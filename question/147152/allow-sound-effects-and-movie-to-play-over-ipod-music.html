<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Allow sound effects and movie to play over iPod music Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Allow sound effects and movie to play over iPod music</h1>
		</header>
		<section>
			<p>I&#39;m coding an app for iOS using the latest Titanium SDK and when the user answers questions, I have set a sound effect to play but I would like that to play over the users music if they are currently using their iPod instead of what it is currently doing which is fading out once once the window opens.  I have set the allowBackground to true so I&#39;m not sure if it has to do with that or the movie that can be played.</p>
<pre><code class="hljs">var win = Titanium.UI.currentWindow;
win.backgroundColor = <span class="hljs-string">'#FFF'</span>;
win.<span class="hljs-variable">height</span> = <span class="hljs-string">'auto'</span>;

win.orientationModes = [
    Titanium.UI.PORTRAIT,
];

var correctsound = Titanium.Media.createSound({
    allowBackground: <span class="hljs-keyword">true</span>,
});
correctsound.url=<span class="hljs-string">'../correct.wav'</span>;

var hintsound = Titanium.Media.createSound({
    allowBackground: <span class="hljs-keyword">true</span>,
});
hintsound.url=<span class="hljs-string">'../hint.wav'</span>;

var wrongsound = Titanium.Media.createSound({
    allowBackground: <span class="hljs-keyword">true</span>,
});
wrongsound.url=<span class="hljs-string">'../wrong.wav'</span>;

var vertScrollView = Titanium.UI.createScrollView({
    contentWidth:<span class="hljs-string">'auto'</span>,
    contentHeight:<span class="hljs-string">'auto'</span>,
    top:<span class="hljs-number">0</span>,
    bottom:<span class="hljs-number">0</span>,
    showVerticalScrollIndicator:<span class="hljs-keyword">true</span>,
    showHorizontalScrollIndicator:<span class="hljs-keyword">false</span>
});

var view = Ti.UI.createView({
    backgroundColor:<span class="hljs-string">'#fff'</span>
});

vertScrollView.<span class="hljs-built_in">add</span>(view)

var intropic = Ti.UI.createImageView({
    <span class="hljs-built_in">image</span>:<span class="hljs-string">'../images/pic1.png'</span>,
    left:<span class="hljs-number">0</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">300</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">320</span>,
    top:<span class="hljs-number">0</span>,
})
view.<span class="hljs-built_in">add</span>(intropic);

intropic.addEventListener(<span class="hljs-string">'click'</span>, function() 
{
    var moviewin = Titanium.UI.createWindow({
    });
    var activeMovie = Titanium.Media.createVideoPlayer({
    url:<span class="hljs-string">'../images/Rule1.mp4'</span>,
    mediaControlMode : Titanium.Media.VIDEO_CONTROL_DEFAULT,
    scalingMode : Titanium.Media.VIDEO_SCALING_NONE,
    fullscreen:<span class="hljs-keyword">true</span>,
    autoplay:<span class="hljs-keyword">true</span>,
});    

    moviewin.<span class="hljs-built_in">add</span>(activeMovie);
    moviewin.<span class="hljs-built_in">open</span>({fullscreen:<span class="hljs-keyword">true</span>});

    activeMovie.addEventListener(<span class="hljs-string">'fullscreen'</span>, function (e) {
    <span class="hljs-keyword">if</span> (!e.entering) {
        activeMovie.stop();
        activeMovie.release();
        moviewin.close();
    }
});
});

var intro2 = Ti.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#000'</span>,
    font:{fontSize:<span class="hljs-number">16</span>},
    left:<span class="hljs-number">10</span>,
    top:<span class="hljs-number">300</span>,
    right:<span class="hljs-number">10</span>,
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'left'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'Intro text here'</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});
view.<span class="hljs-built_in">add</span>(intro2);

<span class="hljs-comment">//Start of Questions*********************************************</span>

var view1 = Ti.UI.createView({
    backgroundColor:<span class="hljs-string">'#FFF'</span>
});

var b1 = Titanium.UI.createButton({
    <span class="hljs-variable">width</span>:<span class="hljs-number">145</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">40</span>,
    left:<span class="hljs-number">10</span>,
    top:<span class="hljs-number">285</span>
});
var b1Label = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'OK as is'</span>,
    left:<span class="hljs-number">50</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">100</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">20</span>,
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#336699'</span>,
    font:{fontSize:<span class="hljs-number">18</span>,fontWeight:<span class="hljs-string">'bold'</span>},
});
b1.<span class="hljs-built_in">add</span>(b1Label);

var b1ImageView = Ti.UI.createImageView({
    <span class="hljs-built_in">image</span>:<span class="hljs-string">'../images/check2.png'</span>,
    left:<span class="hljs-number">10</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">28</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">28</span>
});
b1.<span class="hljs-built_in">add</span>(b1ImageView);

b1.addEventListener(<span class="hljs-string">'click'</span>,function()
{
    lview1.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Incorrect!"</span>;
    lview1.<span class="hljs-built_in">color</span> = <span class="hljs-string">'#cc0000'</span>; 
    lview1b.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Description"</span>;
    wrongsound.play();
});

view1.<span class="hljs-built_in">add</span>(b1);

var b2 = Titanium.UI.createButton({
    <span class="hljs-variable">width</span>:<span class="hljs-number">300</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">40</span>,
    left:<span class="hljs-number">10</span>,
    top:<span class="hljs-number">335</span>
});
var b2Label = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'Not sure, get a clue...'</span>,
    left:<span class="hljs-number">53</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">200</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">20</span>,
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#336699'</span>,
    font:{fontSize:<span class="hljs-number">18</span>,fontWeight:<span class="hljs-string">'bold'</span>},
});
b2.<span class="hljs-built_in">add</span>(b2Label);

var b2ImageView = Ti.UI.createImageView({
    <span class="hljs-built_in">image</span>:<span class="hljs-string">'../images/hint.png'</span>,
    left:<span class="hljs-number">10</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">30</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">33</span>
});
b2.<span class="hljs-built_in">add</span>(b2ImageView);


b2.addEventListener(<span class="hljs-string">'click'</span>,function()
{
    lview1.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Hint..."</span>;
    lview1.<span class="hljs-built_in">color</span> = <span class="hljs-string">'#f37021'</span>; 
    lview1b.<span class="hljs-built_in">text</span> = <span class="hljs-string">"You know this hint."</span>;
    hintsound.play();
});

view1.<span class="hljs-built_in">add</span>(b2);

var b3 = Titanium.UI.createButton({
    <span class="hljs-variable">width</span>:<span class="hljs-number">145</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">40</span>,
    left:<span class="hljs-number">165</span>,
    top:<span class="hljs-number">285</span>
});
var b3Label = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'Incorrect'</span>,
    left:<span class="hljs-number">53</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">100</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">20</span>,
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#336699'</span>,
    font:{fontSize:<span class="hljs-number">18</span>,fontWeight:<span class="hljs-string">'bold'</span>},
});
b3.<span class="hljs-built_in">add</span>(b3Label);

var b3ImageView = Ti.UI.createImageView({
    <span class="hljs-built_in">image</span>:<span class="hljs-string">'../images/wrong.png'</span>,
    left:<span class="hljs-number">10</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">30</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">33</span>
});
b3.<span class="hljs-built_in">add</span>(b3ImageView);


b3.addEventListener(<span class="hljs-string">'click'</span>,function()
{
    lview1.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Right you are!"</span>;
    lview1.<span class="hljs-built_in">color</span> = <span class="hljs-string">'#669933'</span>;
    lview1b.<span class="hljs-built_in">text</span> = <span class="hljs-string">"You are a genius."</span>;
    correctsound.play();
});

view1.<span class="hljs-built_in">add</span>(b3);

var paper = Ti.UI.createImageView({
    <span class="hljs-built_in">image</span>:<span class="hljs-string">'../images/tornpaper2.png'</span>,
    top:<span class="hljs-number">65</span>,
    left:<span class="hljs-number">0</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-string">'320'</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-string">'23'</span>,
});
view1.<span class="hljs-built_in">add</span>(paper);

var l = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'Top question.'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">300</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
    top:<span class="hljs-number">12</span>,
    font:{fontSize:<span class="hljs-number">24</span>}
});
view1.<span class="hljs-built_in">add</span>(l);

var lview1 = Ti.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#000'</span>,
    font:{fontSize:<span class="hljs-number">24</span>},
    left:<span class="hljs-number">10</span>,
    right:<span class="hljs-number">10</span>,
    top:<span class="hljs-number">90</span>,
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'left'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">''</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});
view1.<span class="hljs-built_in">add</span>(lview1);

var lview1b = Ti.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#000'</span>,
    font:{fontSize:<span class="hljs-number">15</span>},
    left:<span class="hljs-number">10</span>,
    right:<span class="hljs-number">10</span>,
    top:<span class="hljs-number">120</span>,
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'left'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">''</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});
view1.<span class="hljs-built_in">add</span>(lview1b);

var right = Titanium.UI.createButton({
    title:<span class="hljs-string">'Next'</span>
});
right.addEventListener(<span class="hljs-string">'click'</span>, function (e) {
    var intPage = scrollView.getCurrentPage();
    <span class="hljs-keyword">if</span> (intPage &lt; (views.length - <span class="hljs-number">1</span>)) {
        scrollView.scrollToView(intPage + <span class="hljs-number">1</span>);
    }
});

win.rightNavButton = right;

var views = [vertScrollView,view1];

var scrollView = Titanium.UI.createScrollableView({
    views:views,
    showPagingControl:<span class="hljs-keyword">true</span>,
    pagingControlHeight:<span class="hljs-number">25</span>,
    maxZoomScale:<span class="hljs-number">2.0</span>,
    currentPage:<span class="hljs-number">0</span>
});

win.<span class="hljs-built_in">add</span>(scrollView);

var i=<span class="hljs-number">1</span>;
var activeView = vertScrollView;


scrollView.addEventListener(<span class="hljs-string">'scroll'</span>, function(e)
{
    activeView = e.view;  <span class="hljs-comment">// the object handle to the view that is about to become visible</span>
    i = e.currentPage;
    Titanium.API.info(<span class="hljs-string">"scroll called - current index "</span> + i + <span class="hljs-string">' active view '</span> + activeView);
});
scrollView.addEventListener(<span class="hljs-string">'click'</span>, function(e)
{
    Ti.API.info(<span class="hljs-string">'ScrollView received click event, source = '</span> + e.source);
});
scrollView.addEventListener(<span class="hljs-string">'touchend'</span>, function(e)
{
    Ti.API.info(<span class="hljs-string">'ScrollView received touchend event, source = '</span> + e.source);
});
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 19th 2013, 10:07:52 pm">January 19th 2013</span>
				by <span class='authorname'>J W</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>allowbackground</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>sound</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-254952">
				
						<section>
							<p>Hi</p>
<p>The <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.Media.Sound-property-allowBackground">allowBackground</a> does not do what you think - it is an android only property and simply allows the audio to play if the activity is paused.</p>
<p>The problem is almost certainly the video as video is more audio important.  Try running the app with the video portion disabled and report back.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 20th 2013, 8:44:46 am">January 20th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/147152/allow-sound-effects-and-movie-to-play-over-ipod-music.html#answer-254952" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I removed the video including the touch event and the music still faded out - I will continue to test with the audio tracks but do you know if the type of audio file makes a difference (.wav vs. mp3)?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 12:55:39 am">January 21st 2013</span>
											by <span class='authorname'>J W</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I will take a further look.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 6:15:02 am">January 21st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Have you tried adding;</p>
<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.Media</span><span class="hljs-class">.setAudioSessionMode</span>(<span class="hljs-tag">AUDIO_SESSION_MODE_AMBIENT</span>);
</code></pre><p>Before you play any sound&#x2F;music, this should allows your sound over the top of the iPod sound.</p>
<p>This should fix the problem.  If not come back to me.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 27th 2013, 1:34:14 pm">January 27th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
