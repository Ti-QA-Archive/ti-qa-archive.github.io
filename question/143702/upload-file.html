<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>upload file Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>upload file</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I want to upload image :<br>here is my code :</p>
<pre><code class="hljs">exports.addMediaToAlbum = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(idAlbum, media, name, description, success, error)</span></span>{

    <span class="hljs-keyword">var</span> client = Ti.Network.createHTTPClient();
    client.open(<span class="hljs-string">'POST'</span>, <span class="hljs-string">'https://server.com/api/photo/'</span>);
    client.setRequestHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'multi-part/form-data'</span>);

    <span class="hljs-keyword">var</span> id;

    client.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
        error(e.error);
    };

    client.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">try</span>{
            <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">this</span>.responseText;
            <span class="hljs-comment">//alert(response);</span>
            success();
           }    
           <span class="hljs-keyword">catch</span>(Err){
                  error(Err);
           }
    };

    client.send({album: idAlbum, photo: media, name: name, description: description});
};
</code></pre><p>i try to send but it doesn&#39;t work.<br>i have the same code width curl in php and it works :</p>
<pre><code class="hljs">        <span class="hljs-variable">$file</span> = new File(<span class="hljs-string">'/path/to/file.jpg'</span>);
        <span class="hljs-variable">$fields</span> = <span class="hljs-keyword">array</span>(
            <span class="hljs-string">"photo"</span> =&gt; <span class="hljs-string">"@"</span>.<span class="hljs-variable">$file-</span>&gt;getRealPath(),
            <span class="hljs-string">"name"</span> =&gt; <span class="hljs-string">"superbe"</span>,
            <span class="hljs-string">"description"</span> =&gt; <span class="hljs-string">"un super souvenir !"</span>,
            <span class="hljs-string">"album"</span> =&gt; <span class="hljs-variable">$album</span>[<span class="hljs-number">0</span>][<span class="hljs-string">'id'</span>]
        );
        curl_setopt(<span class="hljs-variable">$ch</span>, CURLOPT_POST, <span class="hljs-literal">true</span>);
        curl_setopt(<span class="hljs-variable">$ch</span>, CURLOPT_POSTFIELDS, <span class="hljs-variable">$fields</span>);
        <span class="hljs-variable">$result</span> = curl_exec(<span class="hljs-variable">$ch</span>);
</code></pre><p>shoud l add information to my http request object ?</p>
<p>thanks..</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 19th 2012, 8:21:13 am">October 19th 2012</span>
				by <span class='authorname'>Djamel ZAHAL</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>httpclient</span></li>
					
						<li><span class='tagname'>image</span></li>
					
						<li><span class='tagname'>photo</span></li>
					
						<li><span class='tagname'>upload</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>can anyone help me please ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 19th 2012, 2:01:45 pm">October 19th 2012</span>
								by <span class='authorname'>Djamel ZAHAL</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I think I&#39;ve said this to you before, but &quot;it doesn&#39;t work&quot; IS NOT a valid problem statement on this QA board. If something doesn&#39;t work, you need to be providing error logs, console output, and any environmental information that is relevant. In this case, it would probably be great to know what the output on the server side is as well. It might be key in figuring out why &quot;it doesn&#39;t work&quot;. Not providing this information is the reason that your question has 50 views and 0 answers. </p>
<p>FYI, you NEVER have the same code in php and javascript. These 2 entities have almost nothing in common. So assuming that something should work in javascript because you&#39;ve got basically the same code in php will get you absolutely nowhere.</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 19th 2012, 3:29:48 pm">October 19th 2012</span>
								by <span class='authorname'>Anthony Decena</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
