<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>how do I set up the optionDialog so when I click it more then once it closes and not open the dialog again. » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>how do I set up the optionDialog so when I click it more then once it closes and not open the dialog again.</h1>
		</header>
		<section>
			<p>Mobile; Titanium Studio, build: 2.1.2.20 IOS<br>Hello all,<br>I am having a problem with a option dialog iv created coming off a button on a navBar.<br>The optionDialog functions as it should do within the confines of the screen, however if I press the button more then once it layers the dialog on top of the one before it. To that end how could i implement a dialog.hide() into my code? I am a novice so would appreciate any guidance given, ill atach my code for your consideration. </p>
<pre><code class="hljs">exports.opts = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableModel, rightView, tablePlanImage</span>) </span>{
    Ti.API.info(tableModel);
    <span class="hljs-keyword">var</span> opts = {
        cancel : <span class="hljs-number">2</span>,
        selectedIndex : <span class="hljs-number">2</span>,
        title : <span class="hljs-string">'Format'</span>
    };
    <span class="hljs-keyword">var</span> eventGUID = tableModel.passThru.data.guid;
    <span class="hljs-keyword">var</span> eventDes = tableModel.passThru.data.description;
    <span class="hljs-keyword">var</span> emailDialog = Ti.UI.createEmailDialog();
    <span class="hljs-keyword">if</span> (emailDialog.isSupported()) {
        opts.options = [<span class="hljs-string">'Email'</span>, <span class="hljs-string">'Print'</span>, <span class="hljs-string">'Cancel'</span>];
        <span class="hljs-keyword">var</span> dialog = Ti.UI.createOptionDialog(opts);
        dialog.show({
            view : rightView
        });
        dialog.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">var</span> formattedData = dataFormatter.getDataForALLGuests(eventGUID);
            <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">0</span>) {
                <span class="hljs-built_in">require</span>(<span class="hljs-string">'areas/socialshare/controller/email'</span>).emailDialog(formattedData, tablePlanImage, eventDes);
            } 
        });

    }

};
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 5th 2012, 1:20:44 pm">December 5th 2012</span>
				by <span class='authorname'>Matthew Fitzgerald</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>optiondialog</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>apologies it didn&#39;t put it into a code block.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 5th 2012, 1:38:31 pm">December 5th 2012</span>
								by <span class='authorname'>Matthew Fitzgerald</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>If you realised you failed to put the code into script blocks correctly -why did you not choose to fix it?</p>
<p>Quick Tip: you would have had answers by now if you had.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 5th 2012, 6:21:10 pm">December 5th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><pre><code class="hljs"><span class="hljs-keyword">var</span> dialog = <span class="hljs-literal">null</span>;
    rightView.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">if</span> (e.index === <span class="hljs-number">0</span>) {
            icontray.toggleView();
        }
        <span class="hljs-keyword">if</span> (e.index === actionIdx) {

    <span class="hljs-keyword">if</span>( dialog ) {
        <span class="hljs-keyword">if</span>( dialog.visible ) {
            dialog.hide({
                view: rightView
            });
        }
        <span class="hljs-keyword">else</span> {
            dialog.show({
                view: rightView
            });
        }
    }
</code></pre><p>If any one else has this same problem this is how to fix it.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 6th 2012, 1:54:43 pm">December 6th 2012</span>
								by <span class='authorname'>Matthew Fitzgerald</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-252228">
				
						<section>
							<p>Hi</p>
<p>You have stated iOS and referenced the <strong>view</strong> parameter of the <strong>show</strong> method - which leads me to think that you are writing an iPad app - please confirm this is the case as it may help answers.</p>
<p>On the iPad the cancel event should be fired when you click off the <strong>optionDialog</strong>, so how are you able to press another button NOT on the dialog?</p>
<p>On the iPhone you would have to have used the cancel button, so again - how are you able to press another button NOT on the dialog?</p>
<p>Can you provide the calling function that initiates this <strong>optionDialog</strong>.</p>
<p>Your correctly formatted code for the benefit of others. (small tweak to improve you email support handling)</p>
<pre><code class="hljs">exports.opts = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tableModel, rightView, tablePlanImage</span>) </span>{
    Ti.API.info(tableModel);
    <span class="hljs-keyword">var</span> opts = {
        cancel: <span class="hljs-number">2</span>,
        selectedIndex: <span class="hljs-number">2</span>,
        title: <span class="hljs-string">'Format'</span>
    };
    <span class="hljs-keyword">var</span> eventGUID = tableModel.passThru.data.guid;
    <span class="hljs-keyword">var</span> eventDes = tableModel.passThru.data.description;
    <span class="hljs-keyword">var</span> emailDialog = Ti.UI.createEmailDialog();
    <span class="hljs-keyword">var</span> choices = [<span class="hljs-string">'Print'</span>, <span class="hljs-string">'Cancel'</span>];
    <span class="hljs-keyword">if</span> (emailDialog.isSupported()) {
        choices.unshift(<span class="hljs-string">'Email'</span>);
    }
    opts.options = choices;
    <span class="hljs-keyword">var</span> dialog = Ti.UI.createOptionDialog(opts);
    dialog.show({
        view: rightView
    });
    dialog.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> formattedData = dataFormatter.getDataForALLGuests(eventGUID);
        <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">require</span>(<span class="hljs-string">'areas/socialshare/controller/email'</span>).emailDialog(formattedData, tablePlanImage, eventDes);
        }
    });
};
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 5th 2012, 6:29:47 pm">December 5th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/145427/how-do-i-set-up-the-optiondialog-so-when-i-click-it-more-then-once-it-closes-and-not-open-the-dialog-again#answer-252228" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>my apologies for not formatting the code again so it displays properly but I was busy on a different part of the Ipad app, the button (a share button) is on a navGroup, when i click anywhere else BUT the nav group it closes as it should do, however if i click the share button agan its opening the dialog again without closing the  dialog already open and if i press a button to go back to the previous window(also on the navGroup) it will return to the previous window with the dialog still open. so its functioning as it should do everywhere but the navgroup.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 6th 2012, 7:04:28 am">December 6th 2012</span>
											by <span class='authorname'>Matthew Fitzgerald</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Please provide a screenshot of what you are seeing as your description suggests it does close - but later it is then open.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 6th 2012, 7:16:01 am">December 6th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-252272">
				
						<section>
							<p>unfortunately I cant, this app is still confidential atm. ill try a different way of explaining the problem. when i click on the share button it opens the option dialog to show the email button just fine, same button but i keep pressing the share button it will keep opening the dialog over and over again thus layering the dialog until the point where the app crashes, the share button is on a navGroup with a buttonBar, its only closing the optionDialog if i click any where else BUT the navBar, if i click the navBar its staying open wich is causing me all sorts of problems. i really appreciate your help with this malcolm and i hope iv made it a bit clearer. im thinking that maybe i should stick a fireEvent into the navGroup  with a listener to close the dialog if any other buttons are pressed?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 6th 2012, 7:41:12 am">December 6th 2012</span>
								by <span class='authorname'>Matthew Fitzgerald</span><br>
								<a class="icon-bg icon-link" href="question/145427/how-do-i-set-up-the-optiondialog-so-when-i-click-it-more-then-once-it-closes-and-not-open-the-dialog-again#answer-252272" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
