<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>new screen to fire when nav bar button pushed » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>new screen to fire when nav bar button pushed</h1>
		</header>
		<section>
			<p>how would you have a new window show or pop open when you hit a nav bar button at the top?<br>As of right now, when I fire the application i want the main screen to show my selections for the app.  then from there if a button at the top in the nav bar is pressed, i would like it to pull up a new screen of a list of books.<br>When i hit the button as of right now, i don&#39;t get a new screen at all, i get the screen from the app.js.  not like i want anything on the screen to work, i just would like a new screen to show instead of the screen from the app.js file.</p>
<p>Here is my app.js file.</p>
<pre><code class="hljs">var win = Titanium.UI.createWindow({
 <span class="hljs-comment">//   backgroundColor : 'white'</span>
});

var tb1 = Titanium.UI.createTabbedBar({
    <span class="hljs-string">labels :</span> [<span class="hljs-string">'Sports'</span>, <span class="hljs-string">'Map'</span>, <span class="hljs-string">'Books'</span>, <span class="hljs-string">'Contact'</span>],
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#336699'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">style :</span> Titanium.UI.iPhone.SystemButtonStyle.BAR,
    <span class="hljs-string">height :</span> <span class="hljs-number">40</span>,
    <span class="hljs-string">width :</span> <span class="hljs-string">'100%'</span>,
    <span class="hljs-string">index :</span> <span class="hljs-number">1</span>,
});
win.add(tb1);

var newWin = Ti.UI.createWindow({
    <span class="hljs-string">url :</span> <span class="hljs-string">'book.js'</span>
});

tb1.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">0</span>) {
        var newWin = Ti.UI.createWindow({
            <span class="hljs-string">url :</span> <span class="hljs-string">'book.js'</span>,
            <span class="hljs-string">top :</span> <span class="hljs-number">41</span>
        });
        newWin.open();
    }
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">1</span>) {
        var newWin = Ti.UI.createWindow({
            <span class="hljs-string">url :</span> <span class="hljs-string">'info.js'</span>,
            <span class="hljs-string">top :</span> <span class="hljs-number">41</span>
        });
        newWin.open();
    }
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">2</span>) {
        var newWin = Ti.UI.createWindow({
            <span class="hljs-string">url :</span> <span class="hljs-string">'map.js'</span>,
            <span class="hljs-string">top :</span> <span class="hljs-number">41</span>
        });
        newWin.open();
    }
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">3</span>) {
        var newWin = Ti.UI.createWindow({
            <span class="hljs-string">url :</span> <span class="hljs-string">'galary.js'</span>,
            <span class="hljs-string">top :</span> <span class="hljs-number">41</span>
        });
        newWin.open();
    }
})

win.open();


<span class="hljs-comment">//var win = Titanium.UI.createWindow({</span>
<span class="hljs-comment">//    title:"title", </span>
<span class="hljs-comment">//    backgroundColor:"#FFFFFF",</span>


<span class="hljs-comment">//})</span>

<span class="hljs-comment">//label</span>
var label = Titanium.UI.createLabel({
<span class="hljs-label">
    backgroundImage:</span> <span class="hljs-string">"images/image.png"</span>,
<span class="hljs-label">    top:</span> <span class="hljs-string">"10%"</span>,
<span class="hljs-label">    width:</span> <span class="hljs-string">"100%"</span>,
<span class="hljs-label">    height:</span> <span class="hljs-string">"12%"</span>,
<span class="hljs-label">    textalign:</span> <span class="hljs-string">"center"</span>,
})

<span class="hljs-comment">// new button</span>

var openWebpagenotification = Titanium.UI.createButton({
<span class="hljs-label">    title:</span><span class="hljs-string">"Notifications"</span>,
<span class="hljs-label">    backgroundImage:</span> <span class="hljs-string">"images/notificationbutton.png"</span>,
<span class="hljs-label">    width:</span><span class="hljs-string">"100%"</span>,    
<span class="hljs-label">    height:</span><span class="hljs-string">"12%"</span>,
<span class="hljs-label">    top:</span><span class="hljs-string">"20%"</span>,
<span class="hljs-label">    id:</span> <span class="hljs-string">"Notifications"</span>,
<span class="hljs-label">    url:</span><span class="hljs-string">"http://www.google/"</span>,             <span class="hljs-string">color:</span> <span class="hljs-string">'#000000'</span>                                                    

});



openWebpagenotification.addEventListener(<span class="hljs-string">"click"</span>, function(e){


<span class="hljs-comment">// Create a window and add a webview to it that opens your url:</span>
var webviewWindow = Titanium.UI.createWindow({<span class="hljs-string">title:</span> <span class="hljs-string">'Notifications'</span>, <span class="hljs-string">fullscreen:</span> <span class="hljs-literal">false</span>});              
var myWebView = Ti.UI.createWebView({<span class="hljs-string">url:</span>e.source.url}); 
webviewWindow.add(myWebView); 

<span class="hljs-comment">// Will need a button to close the new window:</span>
var closeButton = Titanium.UI.createButton({<span class="hljs-string">title:</span><span class="hljs-string">'Close'</span>, <span class="hljs-string">style:</span>Titanium.UI.iPhone.SystemButtonStyle.PLAIN});
webviewWindow.setLeftNavButton(closeButton);

closeButton.addEventListener(<span class="hljs-string">'click'</span>,function(evt){
    webviewWindow.close();
});

webviewWindow.open({<span class="hljs-string">modal:</span><span class="hljs-literal">true</span>});
webviewWindow.open();  <span class="hljs-comment">// Open your new window </span>
})




win.add(label);
win.add(openWebpagenotification); 
win.open();<span class="hljs-string">'</span>
</code></pre><p>now here is the book.js file - this is where i would like a plain screen to show a listing of books.<br>BOOK.js</p>
<p>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</p>
<pre><code class="hljs">function tibook() {
    var BookWindow = require(<span class="hljs-string">'book'</span>);
    var BookWindow = <span class="hljs-keyword">new</span> BookWindow();
    bookWindow.open();


var tb1 = Titanium.UI.createTabbedBar({
    <span class="hljs-string">labels :</span> [<span class="hljs-string">'Sports'</span>, <span class="hljs-string">'Map'</span>, <span class="hljs-string">'Books'</span>, <span class="hljs-string">'Contact'</span>],
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#336699'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">style :</span> Titanium.UI.iPhone.SystemButtonStyle.BAR,
    <span class="hljs-string">height :</span> <span class="hljs-number">40</span>,
    <span class="hljs-string">width :</span> <span class="hljs-string">'100%'</span>,
    <span class="hljs-string">index :</span> <span class="hljs-number">1</span>,
});
win.add(tb1);

var newWin = Ti.UI.createWindow({
    <span class="hljs-string">url :</span> <span class="hljs-string">'book.js'</span>
});

tb1.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">0</span>) {
        var newWin = Ti.UI.createWindow({
            <span class="hljs-string">url :</span> <span class="hljs-string">'book.js'</span>,
            <span class="hljs-string">top :</span> <span class="hljs-number">41</span>
        });
        newWin.open();
    }
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">1</span>) {
        var newWin = Ti.UI.createWindow({
            <span class="hljs-string">url :</span> <span class="hljs-string">'geo.js'</span>,
            <span class="hljs-string">top :</span> <span class="hljs-number">41</span>
        });
        newWin.open();
    }
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">2</span>) {
        var newWin = Ti.UI.createWindow({
            <span class="hljs-string">url :</span> <span class="hljs-string">'map.js'</span>,
            <span class="hljs-string">top :</span> <span class="hljs-number">41</span>
        });
        newWin.open();
    }
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">3</span>) {
        var newWin = Ti.UI.createWindow({
            <span class="hljs-string">url :</span> <span class="hljs-string">'galary.js'</span>,
            <span class="hljs-string">top :</span> <span class="hljs-number">41</span>
        });
        newWin.open();
    }
})

win.open();




    <span class="hljs-keyword">return</span> self;
};
</code></pre><p>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</p>
<p>Thanks for your thoughts and expertise.  -paul</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 25th 2012, 11:38:47 am">August 25th 2012</span>
				by <span class='authorname'>paul wamser</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>.js</span></li>
					
						<li><span class='tagname'>navbar</span></li>
					
						<li><span class='tagname'>navigation</span></li>
					
						<li><span class='tagname'>newscreen</span></li>
					
						<li><span class='tagname'>window</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-246032">
				
						<section>
							<p>You&#39;re using a mix of multiple context and commonjs coding here that is just bound to get your wires crossed. When you open a window with a url property, you are creating that window inside a new context. Then inside that new context, it looks like you are suddenly trying to format your code commonjs style. Instead, in your app.js file, you should just require the book as you do in the second file and make that your newWin. Then you can open newWin inside the current context and maybe even reuse the tabbedBar instead of writing all that code again. Code like that should remain DRY (dont repeat yourself).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 25th 2012, 1:19:53 pm">August 25th 2012</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="../../question/141472/new-screen-to-fire-when-nav-bar-button-pushed.html#answer-246032" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I think i have an idea with what you are saying… so i left my app.js the same and make this as my book.js file and took out the rest.</p>
<pre><code class="hljs">    <span class="hljs-keyword">var</span> bookWindow = <span class="hljs-built_in">require</span>(<span class="hljs-string">'book'</span>);
    <span class="hljs-keyword">var</span> bookWindow = <span class="hljs-keyword">new</span> bookWindow();
    bookWindow.open();
</code></pre><p>And that was the only code that I have in there now at all in the book.js.  I get this error.</p>
<p>Test[22613:1b803] <em>*</em> Terminating app due to uncaught exception of class &#39;__NSCFDictionary&#39;<br>terminate called throwing an exception</p>
<p>Any thoughts would be greatly appreciated.  Thanks! - paul</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2012, 5:34:37 pm">August 25th 2012</span>
											by <span class='authorname'>paul wamser</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I even tried it like this as well….</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tibook</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> bookWindow = <span class="hljs-built_in">require</span>(<span class="hljs-string">'book'</span>);
    <span class="hljs-keyword">var</span> bookWindow = <span class="hljs-keyword">new</span> bookWindow();
    bookWindow.open();


        <span class="hljs-keyword">return</span> win;
};
</code></pre><p>Now i don&#39;t get an eror with this, but i still see the main screen from the app.js file.  I would like to be able to pull up just a list of books that i can input there myself.<br>thanks for your thoughts. regards, -paul</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2012, 5:38:38 pm">August 25th 2012</span>
											by <span class='authorname'>paul wamser</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You&#39;re adding an entire level of complexity that isn&#39;t necessary. Instead of doing all that using a url property of a window, your app.js should just look like this:</p>
<pre><code class="hljs">tb1.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> BookWin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'book'</span>);
        <span class="hljs-keyword">var</span> newWin = <span class="hljs-keyword">new</span> BookWin();
        newWin.open();
    }
    <span class="hljs-comment">// etc.</span>
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 25th 2012, 7:31:51 pm">August 25th 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
