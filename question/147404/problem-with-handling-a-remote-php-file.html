<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Problem with handling a remote php file » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Problem with handling a remote php file</h1>
		</header>
		<section>
			<p>Hello everyone,</p>
<p>I want to test this code which handle a php file located into a WAMP Server:</p>
<p>I&#39;ll post just my button code:</p>
<pre><code class="hljs">
button.addEventListener(<span class="hljs-string">"click"</span>,function(e){

    var xhr = Titanium.Network.createHTTPClient();
    var url = <span class="hljs-string">"http://localhost/Myfolder/test.php?id=paul&amp;idd=paula"</span>;
    xhr.open(<span class="hljs-string">"<span class="hljs-keyword">GET</span>"</span>,url);

    xhr.onload = function(){

         Ti.API.debug(this.responseText);
         alert(<span class="hljs-string">"Success!"</span>);
    };

});
</code></pre><p>my php file contains a simple script which return a value (it doesn&#39;t contain an error, I am sure that it is correct)</p>
<ul>
<li><p>the problem is that I didn&#39;t get anything when clicking on the button:(even the alert dialog didn&#39;t show up !!!)</p>
</li>
<li><p>I test the url with the brower with the same parameters, it works !!! and it return a value !!!</p>
</li>
</ul>
<p>I don&#39;t understand why this is doesn&#39;t work with my device?</p>
<p>Any suggestions?</p>
<p>Thanks in advance !</p>
<hr>
<p>Application type: mobile</p>
<p>Titanium SDK: 2.3.1.GA</p>
<p>Platform &amp; version: Android 4.0.3</p>
<p>Device: Samsung Note</p>
<hr>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 25th 2013, 1:51:54 pm">January 25th 2013</span>
				by <span class='authorname'>Karray Gargouri</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>createhttpclient()</span></li>
					
						<li><span class='tagname'>php</span></li>
					
						<li><span class='tagname'>titanium studio</span></li>
					
						<li><span class='tagname'>wamp</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-255361">
				
						<section>
							<p>You have not called <code>send()</code> on the xhr object.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 25th 2013, 1:53:15 pm">January 25th 2013</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/147404/problem-with-handling-a-remote-php-file#answer-255361" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>If you need an example on how to use the HTTPClient, see the docs here: <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.Network.HTTPClient">http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.Network.HTTPClient</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 1:54:48 pm">January 25th 2013</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255365">
				
						<section>
							<p>I try to adopt the code like that, but in vain:</p>
<pre><code class="hljs">

<span class="accesslog">button.addEventListener(<span class="hljs-string">"click"</span>,function(e){

    var url = <span class="hljs-string">"http://localhost/Revision5TelB/test.php?nomg=paul&amp;nomf=paula"</span>;
    var xhr = Ti.Network.createHTTPClient({

        onload : function(){

         Ti.API.debug(this.responseText);
         alert(<span class="hljs-string">"Success!"</span>);
    }
    });

    xhr.open(<span class="hljs-string">"<span class="hljs-keyword">GET</span>"</span>,url);


    xhr.send();


});</span>
</code></pre><p>:&#39;(((</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 25th 2013, 2:23:17 pm">January 25th 2013</span>
								by <span class='authorname'>Karray Gargouri</span><br>
								<a class="icon-bg icon-link" href="question/147404/problem-with-handling-a-remote-php-file#answer-255365" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255367">
				
						<section>
							<p>Well, I change the code to this now:</p>
<pre><code class="hljs">
button.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{

    <span class="hljs-keyword">var</span> url = <span class="hljs-string">"http://localhost/Myfolder/test.php?id=paul&amp;idd=paula"</span>;
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({

        onload : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{

         Ti.API.debug(<span class="hljs-keyword">this</span>.responseText);
         alert(<span class="hljs-string">"Success!"</span>);
        },

        <span class="hljs-comment">// function called when an error occurs, including a timeout</span>
     onerror : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
         Ti.API.debug(e.error);
         alert(<span class="hljs-string">'error'</span>);
     },
      timeout : <span class="hljs-number">5000</span>  <span class="hljs-comment">// in milliseconds</span>
    });

    xhr.open(<span class="hljs-string">"GET"</span>,url);


    xhr.send();


});
</code></pre><p>I got an error alert !!!</p>
<p>How can i know why?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 25th 2013, 2:34:26 pm">January 25th 2013</span>
								by <span class='authorname'>Karray Gargouri</span><br>
								<a class="icon-bg icon-link" href="question/147404/problem-with-handling-a-remote-php-file#answer-255367" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Please use the comment system when not providing an answer, it keeps the thread easier to read. You got the error alert, what did the error line on the console say?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 2:39:42 pm">January 25th 2013</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>this is the error line on the console:</p>
<pre><code class="hljs">[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>] (TiHttpClient-1) [4365,4365] HTTP Error (org.apache.http.conn.HttpHostConnectException): Connection to http://localhost refused
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>] org.apache.http.conn.HttpHostConnectException: Connection to http://localhost refused
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:178)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:653)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:637)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at ti.modules.titanium.network.TiHTTPClient$ClientRunnable.run(TiHTTPClient.java:1217)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at java.lang.Thread.run(Thread.java:1019)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>] Caused by: java.net.ConnectException: /127.0.0.1:80 - Connection refused
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:207)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at java.net.Socket.connect(Socket.java:983)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  339)</span>]     ... 8 more
[<span class="hljs-link_label">INFO</span>][<span class="hljs-link_reference">ALERT   (  339)</span>] (KrollRuntimeThread) [22,4387] error
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 2:50:24 pm">January 25th 2013</span>
											by <span class='authorname'>Karray Gargouri</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Your answer is right here: <code>Connection to http:&amp;#x2F;&amp;#x2F;localhost refused</code>. The connection is being refused. Most likely due to the configuration of your WAMP server</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 2:55:07 pm">January 25th 2013</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK, but I can access to the php page and receive an answer from the browser !</p>
<p>Any suggestion how to resolve this WAMP configuration?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 2:56:59 pm">January 25th 2013</span>
											by <span class='authorname'>Karray Gargouri</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Pretty hard to fix configuration problems when I know nothing about your server.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 3:20:04 pm">January 25th 2013</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255370">
				
						<section>
							<p>I&#39;ve set this up on my own server so you can see that the mobile code is correct.</p>
<p>app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.createWindow();

<span class="hljs-keyword">var</span> button = Ti.UI.createButton({
    title:<span class="hljs-string">'Click Here'</span>
});
button.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{

    <span class="hljs-keyword">var</span> url = <span class="hljs-string">"http://mindelusions.com/test/echo.php?foo=bar&amp;biz=baz"</span>;
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({

        onload : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{

         Ti.API.debug(<span class="hljs-keyword">this</span>.responseText);
         alert(<span class="hljs-string">"Success!"</span>);
        },

        <span class="hljs-comment">// function called when an error occurs, including a timeout</span>
     onerror : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
         Ti.API.debug(e.error);
         alert(<span class="hljs-string">'error'</span>);
     },
      timeout : <span class="hljs-number">5000</span>  <span class="hljs-comment">// in milliseconds</span>
    });

    xhr.open(<span class="hljs-string">"GET"</span>,url);


    xhr.send();


});
win.add(button);

win.open();
</code></pre><p>echo.js</p>
<pre><code class="hljs"><span class="php"><span class="hljs-preprocessor">&lt;?php</span>

    <span class="hljs-comment">// Read incoming GET request</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$_GET</span>)){
        <span class="hljs-variable">$params</span> = join(<span class="hljs-string">" "</span>, <span class="hljs-variable">$_GET</span>);
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"|$params|"</span>;
    }

<span class="hljs-preprocessor">?&gt;</span></span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 25th 2013, 3:21:00 pm">January 25th 2013</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/147404/problem-with-handling-a-remote-php-file#answer-255370" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
