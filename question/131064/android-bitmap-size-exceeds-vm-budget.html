<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android Bitmap size exceeds VM Budget » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android Bitmap size exceeds VM Budget</h1>
		</header>
		<section>
			<p>Hey guys,</p>
<p>Android Bitmap size exceeds VM Budget</p>
<p>I have two background images that I am using throughout the app. In Android, when I switch between them using Ti.UI.View.setBackgroundImage(&#39;&#x2F;images&#x2F;main.png&#39;); Which works perfectly in iOS I run out of memory in android. I have tried both jpg and png, they are only 100kb images. I have also tried to create two views with the images pre added, (I created view one, then view 2, remove view one and add view 2) and that also causes the error. Any ideas?</p>
<p>Thanks!</p>
<p>John</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 23rd 2012, 2:40:26 pm">January 23rd 2012</span>
				by <span class='authorname'>John Donna</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>bitmap</span></li>
					
						<li><span class='tagname'>budget</span></li>
					
						<li><span class='tagname'>exceeds</span></li>
					
						<li><span class='tagname'>vm</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-228298">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>That happens with the android emulator, but if you push it to a device it should work fine</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 23rd 2012, 2:46:22 pm">January 23rd 2012</span>
								by <span class='authorname'>Arian Caraballo</span><br>
								<a class="icon-bg icon-link" href="question/131064/android-bitmap-size-exceeds-vm-budget#answer-228298" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ping this thread if that doesn&#39;t resolve the issue, definitely want to make sure we&#39;re not leaking here.  There are tons of weird garbage collection issues with bitmaps on the native Android side which native devs have to deal with all the time. :(</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 23rd 2012, 3:06:34 pm">January 23rd 2012</span>
											by <span class='authorname'>Kevin Whinnery</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It works fine on my HTC Thunderbolt, but I am running CM7 on it, and the Thunderbolt has 768 mb of memory, but I am worried it wont work on other Android devices, is the android emulator that terrible? Also, the crash happens after the first time I allocate. I create screen 1 with background 1, change to view 2 with background 2 and it crashes (I am using the same window and view for both screens, but I am updating it with setBackgroundImage. Only one button on each screen. Should I be concerned here? I am running the v8 and newest version of Titanium developer. Thank you so much for your help guys!</p>
<p>-John</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 23rd 2012, 6:17:00 pm">January 23rd 2012</span>
											by <span class='authorname'>John Donna</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes the android emulator is not that good. I think you ll be fine in the other devices. This happend to me b4 programing in native code and it was just and emulator thing</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 23rd 2012, 6:23:24 pm">January 23rd 2012</span>
											by <span class='authorname'>Arian Caraballo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>same problem on my emulator.<br>I have to display a png map on Android device.<br>the png image is 2239x2239 pix.<br>I get the &quot;Unable to load bitmap. Not enough memory: bitmap size exceeds VM budget&quot;. Is there a size limit for image on Android ?<br>No problem on IOS.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2012, 7:09:51 am">February 13th 2012</span>
											by <span class='authorname'>Armindo Da Silva</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Armindo, the Android platform has a set VM budget per application.  This varies from OS version to device, but it can be as little as 24MB, which is not very much.  Your image is pretty big, which means you may have to more aggressively manage memory in your app.  <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Managing+Memory+and+Finding+Leaks">Check this guide for details</a>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 14th 2012, 6:11:46 am">February 14th 2012</span>
											by <span class='authorname'>Kevin Whinnery</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228299">
				
						<section>
							<p>No idea if this will have an effect or not, but what happens if you increase the thread stack size in tiapp.xml?</p>
<pre><code class="hljs">&lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"ti.android.threadstacksize"</span> type=<span class="hljs-string">"int"</span>&gt;<span class="hljs-number">32768</span>&lt;/<span class="hljs-keyword">property</span>&gt;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 23rd 2012, 2:47:43 pm">January 23rd 2012</span>
								by <span class='authorname'>Justin Toth</span><br>
								<a class="icon-bg icon-link" href="question/131064/android-bitmap-size-exceeds-vm-budget#answer-228299" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>to clarify, this will not impact the Android VM budget, which is what we&#39;re running up against.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 14th 2012, 6:07:39 am">February 14th 2012</span>
											by <span class='authorname'>Kevin Whinnery</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-3</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
