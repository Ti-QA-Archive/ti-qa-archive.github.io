<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>WebView crashing with NSRangeException - iPhone app Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>WebView crashing with NSRangeException - iPhone app</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I am trying to update an iPhone app in Titanium Alloy that I already have in the Appstore.</p>
<p>WebView was working perfectly before but now even the simplest usage is crashing : </p>
<p>Sample code :</p>
<h1 id="view">View</h1>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"win"</span>&gt;</span>    
        <span class="hljs-tag">&lt;<span class="hljs-title">WebView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"webview"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><h1 id="controller-">Controller </h1>
<pre><code class="hljs">var args = arguments[0] || {};

$.webview.html ='<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>';
</code></pre><p>The error I am getting :</p>
<pre><code class="hljs">The application has crashed <span class="hljs-keyword">with</span> an uncaught exception <span class="hljs-string">'NSRangeException'</span>.
[ERROR] :  Reason:
[ERROR] :  *** -[__NSCFString substringFromIndex:]: <span class="hljs-keyword">Index</span> <span class="hljs-number">184</span> <span class="hljs-keyword">out</span> <span class="hljs-keyword">of</span> bounds; <span class="hljs-keyword">string</span> length <span class="hljs-number">183</span>
</code></pre><p>The complete error stack trace is :</p>
<pre><code class="hljs">Stack trace:
[ERROR] :  
[ERROR] :  0   CoreFoundation                      <span class="hljs-number">0x00000001</span>0d46ff1d __exceptionPreprocess + 141
[ERROR] :  1   libobjc.<span class="hljs-keyword">A</span>.dylib                     <span class="hljs-number">0x00000001</span>0d047bb7 objc_exception_throw + 45
[ERROR] :  2   CoreFoundation                      <span class="hljs-number">0x00000001</span>0d46fe6d +[NSException raise:format:] + 205
[ERROR] :  3   Foundation                          <span class="hljs-number">0x00000001</span><span class="hljs-number">09f57988</span> -[NSString substringFromIndex:] + 118
[ERROR] :  4   Vantage Circle                      <span class="hljs-number">0x00000001</span>07bb758d +[TiUtils loadAppResource:] + 301
[ERROR] :  5   Vantage Circle                      <span class="hljs-number">0x00000001</span>07cbca97 -[LocalProtocolHandler startLoading] + 343
[ERROR] :  6   CFNetwork                           <span class="hljs-number">0x00000001</span>0bb5772e ___ZN19URLConnectionLoader27_private_ScheduleOriginLoadEPK12NSURLRequestPK20_CFCachedURLResponse_block_invoke_2 + 61
[ERROR] :  7   CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6be5b ___ZNK19URLConnectionLoader25withExistingProtocolAsyncEU13block_pointerFvP11URLProtocolE_block_invoke + 25
[ERROR] :  8   CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6be26 _ZN19RunloopBlockContext13_invoke_blockEPKvPv + 72
[ERROR] :  9   CoreFoundation                      <span class="hljs-number">0x00000001</span><span class="hljs-number">0d378194</span> CFArrayApplyFunction + 68
[ERROR] :  10  CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6bce7 _ZN19RunloopBlockContext7performEv + 133
[ERROR] :  11  CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6bb26 _ZN17MultiplexerSource7performEv + 256
[ERROR] :  12  CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6b93c _ZN17MultiplexerSource8_performEPv + 72
[ERROR] :  13  CoreFoundation                      <span class="hljs-number">0x00000001</span><span class="hljs-number">0d3a5551</span> __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
[ERROR] :  14  CoreFoundation                      <span class="hljs-number">0x00000001</span>0d39b41d __CFRunLoopDoSources0 + 269
[ERROR] :  15  CoreFoundation                      <span class="hljs-number">0x00000001</span>0d39aa54 __CFRunLoopRun + 868
[ERROR] :  16  CoreFoundation                      <span class="hljs-number">0x00000001</span><span class="hljs-number">0d39a486</span> CFRunLoopRunSpecific + 470
[ERROR] :  17  WebCore                             <span class="hljs-number">0x00000001</span><span class="hljs-number">130d473</span>d _ZN7WebCoreL15runLoaderThreadEPv + 349
[ERROR] :  18  JavaScriptCore                      <span class="hljs-number">0x00000001</span>14ddc483 _ZN3WTFL19wtfThreadEntryPointEPv + 19
[ERROR] :  19  libsystem_pthread.dylib             <span class="hljs-number">0x00000001</span>0e29c2fc _pthread_body + 131
[ERROR] :  20  libsystem_pthread.dylib             <span class="hljs-number">0x00000001</span><span class="hljs-number">0e29c279</span> _pthread_body + 0
[ERROR] :  21  libsystem_pthread.dylib             <span class="hljs-number">0x00000001</span><span class="hljs-number">0e29a4b1</span> thread_start + 13
[ERROR] :  
[ERROR] :  <span class="hljs-number">2015-03-23</span> <span class="hljs-number">16:01:45.119</span> Vantage Circle[<span class="hljs-number">16707:94910</span>] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSCFString substringFromIndex:]: Index 184 out of bounds<span class="hljs-comment">; string length 183'</span>
[ERROR] :  *** First throw call stack:
[ERROR] :  (
[ERROR] :      0   CoreFoundation                      <span class="hljs-number">0x00000001</span>0d46ff35 __exceptionPreprocess + 165
[ERROR] :      1   libobjc.<span class="hljs-keyword">A</span>.dylib                     <span class="hljs-number">0x00000001</span>0d047bb7 objc_exception_throw + 45
[ERROR] :      2   CoreFoundation                      <span class="hljs-number">0x00000001</span>0d46fe6d +[NSException raise:format:] + 205
[ERROR] :      3   Foundation                          <span class="hljs-number">0x00000001</span><span class="hljs-number">09f57988</span> -[NSString substringFromIndex:] + 118
[ERROR] :      4   Vantage Circle                      <span class="hljs-number">0x00000001</span>07bb758d +[TiUtils loadAppResource:] + 301
[ERROR] :      5   Vantage Circle                      <span class="hljs-number">0x00000001</span>07cbca97 -[LocalProtocolHandler startLoading] + 343
[ERROR] :      6   CFNetwork                           <span class="hljs-number">0x00000001</span>0bb5772e ___ZN19URLConnectionLoader27_private_ScheduleOriginLoadEPK12NSURLRequestPK20_CFCachedURLResponse_block_invoke_2 + 61
[ERROR] :      7   CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6be5b ___ZNK19URLConnectionLoader25withExistingProtocolAsyncEU13block_pointerFvP11URLProtocolE_block_invoke + 25
[ERROR] :      8   CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6be26 _ZN19RunloopBlockContext13_invoke_blockEPKvPv + 72
[ERROR] :      9   CoreFoundation                      <span class="hljs-number">0x00000001</span><span class="hljs-number">0d378194</span> CFArrayApplyFunction + 68
[ERROR] :      10  CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6bce7 _ZN19RunloopBlockContext7performEv + 133
[ERROR] :      11  CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6bb26 _ZN17MultiplexerSource7performEv + 256
[ERROR] :      12  CFNetwork                           <span class="hljs-number">0x00000001</span>0ba6b93c _ZN17MultiplexerSource8_performEPv + 72
[ERROR] :      13  CoreFoundation                      <span class="hljs-number">0x00000001</span><span class="hljs-number">0d3a5551</span> __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
[ERROR] :      14  CoreFoundation                      <span class="hljs-number">0x00000001</span>0d39b41d __CFRunLoopDoSources0 + 269
[ERROR] :      15  CoreFoundation                      <span class="hljs-number">0x00000001</span>0d39aa54 __CFRunLoopRun + 868
[ERROR] :      16  CoreFoundation                      <span class="hljs-number">0x00000001</span><span class="hljs-number">0d39a486</span> CFRunLoopRunSpecific + 470
[ERROR] :      17  WebCore                             <span class="hljs-number">0x00000001</span><span class="hljs-number">130d473</span>d _ZN7WebCoreL15runLoaderThreadEPv + 349
[ERROR] :      18  JavaScriptCore                      <span class="hljs-number">0x00000001</span>14ddc483 _ZN3WTFL19wtfThreadEntryPointEPv + 19
[ERROR] :      19  libsystem_pthread.dylib             <span class="hljs-number">0x00000001</span>0e29c2fc _pthread_body + 131
[ERROR] :      20  libsystem_pthread.dylib             <span class="hljs-number">0x00000001</span><span class="hljs-number">0e29c279</span> _pthread_body + 0
[ERROR] :      21  libsystem_pthread.dylib             <span class="hljs-number">0x00000001</span><span class="hljs-number">0e29a4b1</span> thread_start + 13
[ERROR] :  )
[ERROR] :  libc++abi.dylib: terminating with uncaught exception of type NSException
</code></pre><p>I have been struggling on this issue for some weeks now  and would really appreciate if some one could help. </p>
<p>Other details : CLI version 3.4.2, Titanium SDK version 3.5.1.GA, Mac OS X, Version=10.10<br>Thanks Bably</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 23rd 2015, 8:48:02 am">March 23rd 2015</span>
				by <span class='authorname'>Bably Das</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>nsrangeexception</span></li>
					
						<li><span class='tagname'>webview crashing</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-286636">
				
						<section>
							<p>index.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"win"</span>&gt;</span>   
        <span class="hljs-tag">&lt;<span class="hljs-title">WebView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"webview"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>index.js</p>
<pre><code class="hljs">$.webview.html = <span class="hljs-comment">'<span class="hljs-xmlDocTag">&lt;html&gt;</span><span class="hljs-xmlDocTag">&lt;body&gt;</span>Hello<span class="hljs-xmlDocTag">&lt;/body&gt;</span><span class="hljs-xmlDocTag">&lt;/html&gt;</span>';</span>

$.win.open();
</code></pre><p>yields:</p>
<p><img src="http:&#x2F;&#x2F;content.screencast.com&#x2F;users&#x2F;Stephen_Feather&#x2F;folders&#x2F;Jing&#x2F;media&#x2F;44a9af36-9b00-4164-8fdd-11f04e6ce923&#x2F;00000931.png" alt="image"></p>
<p>with:</p>
<pre><code class="hljs">Operating System
  Name                        = Mac OS X
  Version                     = <span class="hljs-number">10.10</span><span class="hljs-number">.2</span>
  Architecture                = <span class="hljs-number">64</span>bit
  <span class="hljs-preprocessor"># CPUs                      = <span class="hljs-number">4</span></span>
  Memory                      = <span class="hljs-number">24.0</span>GB

Node.js
  Node.js Version             = <span class="hljs-number">0.10</span><span class="hljs-number">.36</span>
  npm Version                 = <span class="hljs-number">2.6</span><span class="hljs-number">.0</span>

Titanium CLI
  CLI Version                 = <span class="hljs-number">3.4</span><span class="hljs-number">.2</span>
  node-appc Version           = <span class="hljs-number">0.2</span><span class="hljs-number">.25</span>

Titanium SDKs
  <span class="hljs-number">3.5</span><span class="hljs-number">.1</span>.GA
    Version                   = <span class="hljs-number">3.5</span><span class="hljs-number">.1</span>
    Install Location          = /Users/stephenfeather/Library/Application Support/Titanium/mobilesdk/osx/<span class="hljs-number">3.5</span><span class="hljs-number">.1</span>.GA
    Platforms                 = iphone, mobileweb, android, blackberry
    git Hash                  = <span class="hljs-number">96875</span>c9
    git Timestamp             = <span class="hljs-number">03</span>/<span class="hljs-number">05</span>/<span class="hljs-number">15</span> <span class="hljs-number">10</span>:<span class="hljs-number">08</span>
    node-appc Version         = <span class="hljs-number">0.2</span><span class="hljs-number">.24</span>

Java Development Kit
  Version                     = <span class="hljs-number">1.6</span><span class="hljs-number">.0</span>_65
  Java Home                   = /System/Library/Java/JavaVirtualMachines/<span class="hljs-number">1.6</span><span class="hljs-number">.0</span>.jdk/Contents/Home

Xcode
  <span class="hljs-number">6.2</span> (build <span class="hljs-number">6</span>C131e) - Xcode <span class="hljs-keyword">default</span>
    Install Location          = /Applications/Xcode.app/Contents/Developer
    iOS SDKs                  = <span class="hljs-number">8.2</span>
    iOS Simulators            = <span class="hljs-number">8.2</span>
    Supported by TiSDK <span class="hljs-number">3.5</span><span class="hljs-number">.1</span>.GA = yes
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 23rd 2015, 2:12:12 pm">March 23rd 2015</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="../../question/181573/webview-crashing-with-nsrangeexception---iphone-app.html#answer-286636" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Stephen,</p>
<p>Thank you for your reply.</p>
<ol>
<li>When I created a new project and tried the sample code that I mentioned above for webView then the webView is working as expected but not in my existing application which I already have in AppStore. In my existing project webView was working fine but then it stopped working giving me the NSRange Exception that I mentioned above.</li>
</ol>
<p>I compared your details to mine and found only the following : </p>
<pre><code class="hljs">Operating System
  Name                        = Mac OS X
  Version                     = <span class="hljs-number">10.10</span>
  Architecture                = <span class="hljs-number">64</span>bit
  <span class="hljs-preprocessor"># CPUs                      = <span class="hljs-number">4</span></span>
  Memory                      = <span class="hljs-number">8589934592</span>
Node.js
  Node.js Version             = <span class="hljs-number">0.10</span><span class="hljs-number">.25</span>
  npm Version                 = <span class="hljs-number">1.3</span><span class="hljs-number">.24</span>
Titanium CLI
  CLI Version                 = <span class="hljs-number">3.4</span><span class="hljs-number">.2</span>
Titanium SDK
  SDK Version                 = <span class="hljs-number">3.5</span><span class="hljs-number">.1</span>.GA
  SDK Path                    = /Users/bablydas/Library/Application Support/Titanium/mobilesdk/osx/<span class="hljs-number">3.5</span><span class="hljs-number">.1</span>.GA
  Target Platform             = iphone
</code></pre><p>Your npm Version is much higher version than mine. Could that be the problem? </p>
<p>Where can I upgrage it? Anything else I am missing?</p>
<ol>
<li>Some one had a similar problem <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;163887&#x2F;webview-ios-crash-with-local-file">WebView crash</a></li>
</ol>
<p>and I was told that the problem was solved by creating a new project. </p>
<p>Yes, even for me the same webView code works in a new project. But as I have already distribution and Profile certificates created, will I be able to use them in the new project while pushing an upgrade of  the app to Appstore? The &lt;b&gt;guid&lt;&#x2F;b&gt; property in tiapp.xml file is unique for each project. Will it be a problem?</p>
<p>Please help me get out of this problem.</p>
<p>Thanks for your time.</p>
<p>Bably</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 24th 2015, 1:39:25 am">March 24th 2015</span>
											by <span class='authorname'>Bably Das</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
