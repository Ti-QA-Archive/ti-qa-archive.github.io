<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>23 pages(views) with CURL_UP and DOWN » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>23 pages(views) with CURL_UP and DOWN</h1>
		</header>
		<section>
			<p>http:&#x2F;&#x2F;pastebin.com&#x2F;GXb8jbCx</p>
<ul>
<li>images (if need they go into the resources folder) :  http:&#x2F;&#x2F;www.mediafire.com&#x2F;?8c0b393pt4u7upi</li>
</ul>
<p>please anybody have a look, this is driving me nuts the arrowLeft always crashes.</p>
<p>The flip to the next page works fine but the previous ALWAYS crashes…this has been my nemesis since 2 months or so (tried it then, didnt work, left it be and now trying it again) </p>
<p>Thanks to anybody who can help</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 9th 2010, 2:38:30 pm">December 9th 2010</span>
				by <span class='authorname'>Patrick van Zadel</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>animate</span></li>
					
						<li><span class='tagname'>curl_up</span></li>
					
						<li><span class='tagname'>views</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-158471">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Now this is correctly code:</p>
<p>With swipe and buttons, and i use ImageViews to not produce Memory Leaks.<br>I run in iPad with successfully.</p>
<pre><code class="hljs">
<span class="hljs-comment">// Variables</span>
<span class="hljs-keyword">var</span> TotalPages = <span class="hljs-number">12</span>;
<span class="hljs-keyword">var</span> CurrentPage = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> PagesArray = [];

<span class="hljs-comment">// Populate Array with images</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">1</span>;i&lt;=TotalPages;i++){
    PagesArray.push(<span class="hljs-string">'img/'</span>+i+<span class="hljs-string">'.jpg'</span>);
}

<span class="hljs-comment">// Windows</span>
<span class="hljs-keyword">var</span> win1 = Ti.UI.createWindow({
    backgroundColor:<span class="hljs-string">'#000'</span> <span class="hljs-comment">// In case of image is smaller then window</span>
});
<span class="hljs-keyword">var</span> win2 = Ti.UI.createWindow({
    backgroundColor:<span class="hljs-string">'#000'</span> <span class="hljs-comment">// In case of image is smaller then window</span>
});

<span class="hljs-comment">// ImageViews (To not produce Memory Leak)</span>
<span class="hljs-keyword">var</span> img1 = Ti.UI.createImageView({
    zIndex:<span class="hljs-number">1</span>
});
<span class="hljs-keyword">var</span> img2 = Ti.UI.createImageView({
    zIndex:<span class="hljs-number">1</span>
});

<span class="hljs-comment">// Add ImageViews in windows</span>
win1.add(img1);
win2.add(img2);

<span class="hljs-comment">// Buttons</span>
<span class="hljs-keyword">var</span> btn_prev1 = Ti.UI.createImageView({
    image:<span class="hljs-string">'img/btn_prev.png'</span>,
    height:<span class="hljs-number">64</span>,
    width:<span class="hljs-number">64</span>,
    bottom:<span class="hljs-number">50</span>,
    left:<span class="hljs-number">10</span>,
    zIndex:<span class="hljs-number">2</span>
});
<span class="hljs-keyword">var</span> btn_next1 = Ti.UI.createImageView({
    image:<span class="hljs-string">'img/btn_next.png'</span>,
    height:<span class="hljs-number">64</span>,
    width:<span class="hljs-number">64</span>,
    bottom:<span class="hljs-number">50</span>,
    right:<span class="hljs-number">10</span>,
    zIndex:<span class="hljs-number">2</span>
});
<span class="hljs-keyword">var</span> btn_prev2 = Ti.UI.createImageView({
    image:<span class="hljs-string">'img/btn_prev.png'</span>,
    height:<span class="hljs-number">64</span>,
    width:<span class="hljs-number">64</span>,
    bottom:<span class="hljs-number">50</span>,
    left:<span class="hljs-number">10</span>,
    zIndex:<span class="hljs-number">2</span>
});
<span class="hljs-keyword">var</span> btn_next2 = Ti.UI.createImageView({
    image:<span class="hljs-string">'img/btn_next.png'</span>,
    height:<span class="hljs-number">64</span>,
    width:<span class="hljs-number">64</span>,
    bottom:<span class="hljs-number">50</span>,
    right:<span class="hljs-number">10</span>,
    zIndex:<span class="hljs-number">2</span>
});

<span class="hljs-comment">// Add Buttons in windows</span>
win1.add(btn_prev1);
win1.add(btn_next1);
win2.add(btn_prev2);
win2.add(btn_next2);


<span class="hljs-comment">// Function to Show a Page</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ShowPage</span>(<span class="hljs-params">win,pg,fx</span>)</span>{
    <span class="hljs-keyword">if</span>(win==win1){
        img1.image=PagesArray[pg]; <span class="hljs-comment">// Load Image</span>
        win1.open({transition:fx,duration:<span class="hljs-number">800</span>}); <span class="hljs-comment">// Open next page    </span>
        win2.close(); <span class="hljs-comment">// Close old page</span>
    }<span class="hljs-keyword">else</span>{
        img2.image=PagesArray[pg]; <span class="hljs-comment">// Load Image</span>
        win2.open({transition:fx,duration:<span class="hljs-number">800</span>}); <span class="hljs-comment">// Open next page</span>
        win1.close(); <span class="hljs-comment">// Close old page</span>
    }
}

<span class="hljs-comment">// function to change page</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ChangePage</span>(<span class="hljs-params">win,direction</span>)</span>{
    <span class="hljs-comment">// if from right to left...</span>
    <span class="hljs-keyword">if</span>(direction==<span class="hljs-string">'left'</span>){
        <span class="hljs-keyword">if</span>(CurrentPage&lt;(TotalPages-<span class="hljs-number">1</span>)){ <span class="hljs-comment">// verify if isn't the last page</span>
            CurrentPage++; <span class="hljs-comment">// set next page</span>
            fx=Ti.UI.iPhone.AnimationStyle.CURL_UP; <span class="hljs-comment">// set fx</span>
            ShowPage(win,CurrentPage,fx); <span class="hljs-comment">// do action</span>
        }
    }
    <span class="hljs-comment">// if from left to right...</span>
    <span class="hljs-keyword">if</span>(direction==<span class="hljs-string">'right'</span>){
        <span class="hljs-keyword">if</span>(CurrentPage&gt;<span class="hljs-number">0</span>){ <span class="hljs-comment">// verify if isn't the first page</span>
            CurrentPage--; <span class="hljs-comment">// set previous page</span>
            fx=Ti.UI.iPhone.AnimationStyle.CURL_DOWN; <span class="hljs-comment">// set fx</span>
            ShowPage(win,CurrentPage,fx); <span class="hljs-comment">// do action</span>
        }
    }

}



<span class="hljs-comment">// Start first Page</span>
ShowPage(win1,CurrentPage,Ti.UI.iPhone.AnimationStyle.FLIP_FROM_RIGHT);







<span class="hljs-comment">// When user Swipe with fingers</span>
win1.addEventListener(<span class="hljs-string">'swipe'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    ChangePage(win2,e.direction); <span class="hljs-comment">// Call next window, with direction of swipe</span>
});
<span class="hljs-comment">// same from above (but for other window)!</span>
win2.addEventListener(<span class="hljs-string">'swipe'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    ChangePage(win1,e.direction); <span class="hljs-comment">// Call next window, with direction of swipe</span>
});



<span class="hljs-comment">// Button's Click</span>
btn_prev1.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    ChangePage(win2,<span class="hljs-string">'right'</span>); <span class="hljs-comment">// Call prev window</span>
});
btn_next1.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    ChangePage(win2,<span class="hljs-string">'left'</span>); <span class="hljs-comment">// Call next window</span>
});
btn_prev2.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    ChangePage(win1,<span class="hljs-string">'right'</span>); <span class="hljs-comment">// Call prev window</span>
});
btn_next2.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    ChangePage(win1,<span class="hljs-string">'left'</span>); <span class="hljs-comment">// Call next window</span>
});










<span class="hljs-comment">// (DEBUG) Labels to show avaliable memory</span>

<span class="hljs-comment">// Label</span>
<span class="hljs-keyword">var</span> lbl1 = Ti.UI.createLabel({
    text:<span class="hljs-string">'0'</span>,
    color:<span class="hljs-string">'#000'</span>,
    font:{fontSize:<span class="hljs-number">13</span>,fontWeight:<span class="hljs-string">'bold'</span>},
    height:<span class="hljs-number">30</span>,
    width:<span class="hljs-number">300</span>,
    top:<span class="hljs-number">10</span>,
    left:<span class="hljs-number">10</span>,
    zIndex:<span class="hljs-number">2</span>
});

<span class="hljs-comment">// Label</span>
<span class="hljs-keyword">var</span> lbl2 = Ti.UI.createLabel({
    text:<span class="hljs-string">'0'</span>,
    color:<span class="hljs-string">'#000'</span>,
    font:{fontSize:<span class="hljs-number">13</span>,fontWeight:<span class="hljs-string">'bold'</span>},
    height:<span class="hljs-number">30</span>,
    width:<span class="hljs-number">300</span>,
    top:<span class="hljs-number">10</span>,
    left:<span class="hljs-number">10</span>,
    zIndex:<span class="hljs-number">2</span>
});

<span class="hljs-comment">// Add labels to windows</span>
win1.add(lbl1);
win2.add(lbl2);

<span class="hljs-comment">// Show avaliable memory in 1 sec interval</span>
setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    lbl1.text = <span class="hljs-string">'Free Memory: '</span>+<span class="hljs-built_in">parseInt</span>(Ti.Platform.availableMemory,<span class="hljs-number">10</span>)+<span class="hljs-string">'mb'</span>;
    lbl2.text = <span class="hljs-string">'Free Memory: '</span>+<span class="hljs-built_in">parseInt</span>(Ti.Platform.availableMemory,<span class="hljs-number">10</span>)+<span class="hljs-string">'mb'</span>;
},<span class="hljs-number">1000</span>);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 10th 2010, 9:48:58 am">December 10th 2010</span>
								by <span class='authorname'>Adriano Paladini</span><br>
								<a class="icon-bg icon-link" href="question/87781/23-pagesviews-with-curlup-and-down.html#answer-158471" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-158131">
				
						<section>
							<p>To make this, i use only 2 windows.<br>This is really fast and don&#39;t consume much memory.</p>
<p>this is exactly code do you want. I use the swipe with fingers, but you can easy insert buttons for change pages.</p>
<p>app.js:</p>
<pre><code class="hljs">

<span class="actionscript"><span class="hljs-comment">// Vars</span>
<span class="hljs-keyword">var</span> TotalPages = <span class="hljs-number">12</span>;
<span class="hljs-keyword">var</span> CurrentPage = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> PagesArray = [];

<span class="hljs-comment">// Populate Array with images</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">1</span>;i&lt;=TotalPages;i++){
    PagesArray.push(<span class="hljs-string">'img/'</span>+i+<span class="hljs-string">'.png'</span>);
}

<span class="hljs-comment">// Windows</span>
<span class="hljs-keyword">var</span> win1 = Ti.UI.createWindow();
<span class="hljs-keyword">var</span> win2 = Ti.UI.createWindow();


<span class="hljs-comment">// Function to Show a Page</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ShowPage</span><span class="hljs-params">(win,pg,fx)</span></span>{
    win.backgroundImage=PagesArray[pg]; <span class="hljs-comment">// Load Image</span>
    win.open({transition:fx,duration:<span class="hljs-number">800</span>}); <span class="hljs-comment">// Open next page</span>
    <span class="hljs-comment">// Close old page</span>
    <span class="hljs-keyword">if</span>(win==win1){
        win2.close();
    }<span class="hljs-keyword">else</span>{
        win1.close();
    }
}

<span class="hljs-comment">// function to change page</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ChangePage</span><span class="hljs-params">(win,direction)</span></span>{
    <span class="hljs-comment">// if from right to left...</span>
    <span class="hljs-keyword">if</span>(direction==<span class="hljs-string">'left'</span>){
        <span class="hljs-keyword">if</span>(CurrentPage&lt;(TotalPages-<span class="hljs-number">1</span>)){ <span class="hljs-comment">// verify if isn't the last page</span>
            CurrentPage++; <span class="hljs-comment">// set next page</span>
            fx=Ti.UI.iPhone.AnimationStyle.CURL_UP; <span class="hljs-comment">// set fx</span>
            ShowPage(win,CurrentPage,fx); <span class="hljs-comment">// do action</span>
        }
    }
    <span class="hljs-comment">// if from left to right...</span>
    <span class="hljs-keyword">if</span>(direction==<span class="hljs-string">'right'</span>){
        <span class="hljs-keyword">if</span>(CurrentPage&gt;<span class="hljs-number">0</span>){ <span class="hljs-comment">// verify if isn't the first page</span>
            CurrentPage--; <span class="hljs-comment">// set previous page</span>
            fx=Ti.UI.iPhone.AnimationStyle.CURL_DOWN; <span class="hljs-comment">// set fx</span>
            ShowPage(win,CurrentPage,fx); <span class="hljs-comment">// do action</span>
        }
    }

}



<span class="hljs-comment">// fx to start</span>
fx = Ti.UI.iPhone.AnimationStyle.FLIP_FROM_RIGHT;
<span class="hljs-comment">// Start first Page</span>
ShowPage(win1,CurrentPage,fx);




<span class="hljs-comment">// When user Swipe with fingers</span>
win1.addEventListener(<span class="hljs-string">'swipe'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    ChangePage(win2,e.direction); <span class="hljs-comment">// Call next window</span>
});
<span class="hljs-comment">// same from above (but for other window)!</span>
win2.addEventListener(<span class="hljs-string">'swipe'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    ChangePage(win1,e.direction); <span class="hljs-comment">// Call next window</span>
});</span>
</code></pre><p>Edit:<br>I tested this code and discovery that app caches all images and create a serious memory leak. The problem isn&#39;t in the code, is in the Framework, that was uncache the previously image loaded in window background.</p>
<p>I will search to a correction and will post any progress here.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 9th 2010, 5:42:52 pm">December 9th 2010</span>
								by <span class='authorname'>Adriano Paladini</span><br>
								<a class="icon-bg icon-link" href="question/87781/23-pagesviews-with-curlup-and-down.html#answer-158131" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-158061">
				
						<section>
							<p>I would use the same view and change the contents of the view. </p>
<p>I assume you could use three views instead in order to keep the curl effects… Set the contents of the previous view, the next view and current current view. </p>
<p>That way you will limit memory usage. And I have a feeling that may be a concern with your current design. </p>
<p>I&#39;ve built a similar setup with an app and I have no issues. I also prefetch the content from the internet so loading screens are minimized.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 9th 2010, 3:41:39 pm">December 9th 2010</span>
								by <span class='authorname'>John Welch</span><br>
								<a class="icon-bg icon-link" href="question/87781/23-pagesviews-with-curlup-and-down.html#answer-158061" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-158101">
				
						<section>
							<p>Would you care to share youre code ive fbeen trying to do this for a while now but everytime i run into problems and i doneed the curl up thats the whole point of a book basically xD</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 9th 2010, 4:56:40 pm">December 9th 2010</span>
								by <span class='authorname'>Patrick van Zadel</span><br>
								<a class="icon-bg icon-link" href="question/87781/23-pagesviews-with-curlup-and-down.html#answer-158101" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-158451">
				
						<section>
							<p>The code works decent, it does have an occasional crash but it works.</p>
<p>I would love the swipe too, but I think the swipe isnt really responsive enough.<br>So thats why I use the arrows.</p>
<p>can you help me a bit in convertng it to arrow clicks cause I get a Can&#39;t find variable: win</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 10th 2010, 8:25:13 am">December 10th 2010</span>
								by <span class='authorname'>Patrick van Zadel</span><br>
								<a class="icon-bg icon-link" href="question/87781/23-pagesviews-with-curlup-and-down.html#answer-158451" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
