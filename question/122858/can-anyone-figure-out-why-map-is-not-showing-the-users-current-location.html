<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>can anyone figure out why map is not showing the users current  location » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>can anyone figure out why map is not showing the users current  location</h1>
		</header>
		<section>
			<p>My code is </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span>=Titanium.UI.currentWindow;

Titanium.Geolocation.purpose = <span class="hljs-string">"Recieve User Location"</span>;
Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST;

<span class="hljs-comment">// Set Distance filter. This dictates how often an event fires based on the distance the device moves. This value is in meters.</span>
Titanium.Geolocation.distanceFilter = 10;


    Titanium.Geolocation.getCurrentPosition(function(<span class="hljs-keyword">e</span>)
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">e</span>.<span class="hljs-keyword">error</span>)
        {
                <span class="hljs-comment">// manage the error</span>
                <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">var</span> longitude = <span class="hljs-keyword">e</span>.coords.longitude;
        <span class="hljs-keyword">var</span> latitude = <span class="hljs-keyword">e</span>.coords.latitude;
        <span class="hljs-keyword">var</span> altitude = <span class="hljs-keyword">e</span>.coords.altitude;
        <span class="hljs-keyword">var</span> heading = <span class="hljs-keyword">e</span>.coords.heading;
        <span class="hljs-comment">//var accuracy = e.coords.accuracy;</span>
        <span class="hljs-keyword">var</span> speed = <span class="hljs-keyword">e</span>.coords.speed;
        <span class="hljs-keyword">var</span> timestamp = <span class="hljs-keyword">e</span>.coords.timestamp;
        <span class="hljs-keyword">var</span> altitudeAccuracy = <span class="hljs-keyword">e</span>.coords.altitudeAccuracy;

        <span class="hljs-keyword">var</span> mapview = Titanium.Map.createView({
        top:20,
        height:300,
        mapType: Titanium.Map.STANDARD_TYPE,
        region:{latitude:latitude, longitude:longitude, latitudeDelta:0.01, longitudeDelta:0.01},
        animate:true,
        regionFit:true,
        userLocation:true
        });
        <span class="hljs-keyword">win</span>.add(mapview);
    });

    Titanium.Geolocation.addEventListener('location',function(<span class="hljs-keyword">e</span>)
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">e</span>.<span class="hljs-keyword">error</span>)
        {
                <span class="hljs-comment">// manage the error</span>
        <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">var</span> longitude = <span class="hljs-keyword">e</span>.coords.longitude;
        <span class="hljs-keyword">var</span> latitude = <span class="hljs-keyword">e</span>.coords.latitude;
        <span class="hljs-keyword">var</span> altitude = <span class="hljs-keyword">e</span>.coords.altitude;
        <span class="hljs-keyword">var</span> heading = <span class="hljs-keyword">e</span>.coords.heading;
        <span class="hljs-keyword">var</span> accuracy = <span class="hljs-keyword">e</span>.coords.accuracy;
        <span class="hljs-keyword">var</span> speed = <span class="hljs-keyword">e</span>.coords.speed;
        <span class="hljs-keyword">var</span> timestamp = <span class="hljs-keyword">e</span>.coords.timestamp;
        <span class="hljs-keyword">var</span> altitudeAccuracy = <span class="hljs-keyword">e</span>.coords.altitudeAccuracy;

               <span class="hljs-comment">// again we use the gathered data</span>
      });
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 20th 2011, 6:36:45 am">July 20th 2011</span>
				by <span class='authorname'>mathew orleans</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>mapview</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I am getting a blank white screen.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 20th 2011, 6:43:52 am">July 20th 2011</span>
								by <span class='authorname'>mathew orleans</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I tried to put </p>
<pre><code class="hljs"><span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info(<span class="hljs-symbol">'geo</span> - current position');
</code></pre><p>it gave me following error in the console..</p>
<p>[ERROR] geo - current positionThe operation couldn’t be completed. (kCLErrorDomain error 0.)</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 20th 2011, 6:46:23 am">July 20th 2011</span>
								by <span class='authorname'>mathew orleans</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Did you solve your problem??? i AM  having the same problem.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 20th 2011, 7:47:31 am">July 20th 2011</span>
								by <span class='authorname'>nWorks Technologies</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-213725">
				
						<section>
							<p>A quick answer would be that the gps location has not updated properly. Without running through your code completely, try displaying the lat and long via an alert, and running through the get location at least two times.</p>
<p>It normally takes a couple of passes to update the location.</p>
<p>hope this helps.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 20th 2011, 6:46:16 am">July 20th 2011</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/122858/can-anyone-figure-out-why-map-is-not-showing-the-users-current-location#answer-213725" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>no nothing is coming not even the alert box…</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 20th 2011, 6:50:00 am">July 20th 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>then you need to find out where it is falling over.</p>
<p>I tend to put a series of alerts in around specific actions and see where it gets to.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 20th 2011, 7:56:27 am">July 20th 2011</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>it is not going in </p>
<pre><code class="hljs">Titanium.Geolocation.getCurrentPosition(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{});
</code></pre><p>what should i do then???</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 20th 2011, 8:08:34 am">July 20th 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-213774">
				
						<section>
							<p>I am a little confused as I cannot see why it should not go into the getcurrentposition. try removing the distance filter . and seeing if there are any messages in the Xcode log.</p>
<p>What platform etc are you using?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 20th 2011, 12:12:07 pm">July 20th 2011</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/122858/can-anyone-figure-out-why-map-is-not-showing-the-users-current-location#answer-213774" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
