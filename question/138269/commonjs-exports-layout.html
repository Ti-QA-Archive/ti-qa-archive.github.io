<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>CommonJS exports layout » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>CommonJS exports layout</h1>
		</header>
		<section>
			<p>Hi all, I&#39;m just wondering if there is a difference between the two pieces of code below, and which I should be using? I&#39;ve read through the coding standards and some docs about CommonJS but they seem to say use whatever you want.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mymodule</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// contents</span>
}

exports.mymodule = mymodule();
</code></pre><p>vs</p>
<pre><code class="hljs">exports.mymodule = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// contents</span>
}
</code></pre><p>Any reason for one over the other?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 13th 2012, 8:14:48 am">June 13th 2012</span>
				by <span class='authorname'>Luke Peek</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>commonjs</span></li>
					
						<li><span class='tagname'>exports</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Updated: In the first example I meant to put: <code>exports.mymodule = mymodule;</code> without the brackets.</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 13th 2012, 8:32:44 am">June 13th 2012</span>
								by <span class='authorname'>Luke Peek</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-240777">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Basically, there is no difference from practical point of view, from theoretical point of view, one function is anonymous, the other is named.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 13th 2012, 8:36:23 am">June 13th 2012</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="../../question/138269/commonjs-exports-layout.html#answer-240777" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ok, that makes sense, but is there an real reason to use one over the other? As the second is obviously less code, it seems more practical to use that if there is no difference in functionality?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 13th 2012, 8:39:45 am">June 13th 2012</span>
											by <span class='authorname'>Luke Peek</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It&#39;s just a matter of preference.</p>
<p>I, for example, prefer first style because I use prototypes:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">View</span><span class="hljs-params">()</span> {</span>

}

View.prototype.something = <span class="hljs-string">"Something"</span>;

<span class="hljs-function"><span class="hljs-keyword">module</span>.<span class="hljs-title">exports</span> =</span> View;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="June 13th 2012, 8:43:04 am">June 13th 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks great thanks Ivan, that answers it perfectly!</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 13th 2012, 9:26:12 am">June 13th 2012</span>
											by <span class='authorname'>Luke Peek</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ivan – how do you make use of prototypes?  If I&#39;m thinking about this correctly, there&#39;s no way for a prototype function to access private instance variables in a class.  Example:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyClass</span> (<span class="hljs-params"></span>)
</span>{
    <span class="hljs-keyword">var</span> _privateVariable = <span class="hljs-string">'foo'</span>;
}

MyClass.prototype.publicMethod = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)
</span>{
    <span class="hljs-comment">// can't access _privateVariable...  :-(</span>
};

<span class="hljs-built_in">module</span>.exports = MyClass;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="June 13th 2012, 6:59:09 pm">June 13th 2012</span>
											by <span class='authorname'>Jason Priebe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hello Jason.</p>
<p>JS has no classes and it is not class-based programming language. Instead, JS is object-based language that implements inheritance with object prototype chains.</p>
<p>Every function has &quot;prototype&quot; property, which can be used to create prototype-chains.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">InheritanceTest</span><span class="hljs-params">(someValue)</span> </span>{
    <span class="hljs-keyword">this</span>.something = someValue;
}

InheritanceTest.prototype = {
    doSomething: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        alert(<span class="hljs-keyword">this</span>.something);
    }
};

<span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span> InheritanceTest(<span class="hljs-string">'Testing'</span>);
obj.doSomething(); <span class="hljs-comment">// alerts 'Testing'</span>
</code></pre><p>There are couple of things that needs to be explained here.</p>
<p>Function &quot;InheritanceTest&quot; needs to be called with &quot;new&quot; keyword. That way, it is being called as function constructor, otherwise is called as any other function.</p>
<p>Call of that function creates new empty object ( {} ) that has internal &quot;Proto&quot; property set to object that is prototype of that function. That forms prototype chain. &quot;this&quot; inside function constructor points to newly created object. You can check all this by checking if object has its own property (by calling &quot;hasOwnProperty&quot; method) or property is defined in prototype chain. </p>
<p>When some property is accessed, object is being searched for that property and if it is not  present, object that is pointed in internal &quot;Proto&quot; property is searched and so on, until there is no prototyped object referenced through internal &quot;Proto&quot; property. </p>
<pre><code class="hljs">alert<span class="hljs-list">(<span class="hljs-keyword">obj</span>.hasOwnProperty<span class="hljs-list">(<span class="hljs-quoted">'something</span>')</span>)</span><span class="hljs-comment">; //true</span>
alert<span class="hljs-list">(<span class="hljs-keyword">obj</span>.hasOwnProperty<span class="hljs-list">(<span class="hljs-quoted">'doSomething</span>')</span>)</span><span class="hljs-comment">; //false, "doSomething" is defined in prototype chain</span>
</code></pre><p>And that is how inheritace is achieved. We model objects (not classes, since there is no such thing in JS yet, unless they are emulated) in such way that we form prototype chains.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ExtendInheritanceTest</span><span class="hljs-params">()</span> </span>{

}


ExtendInheritanceTest.protoype = <span class="hljs-keyword">new</span> InheritanceTest(<span class="hljs-string">'Testing 2'</span>); <span class="hljs-comment">// empty object that has "InheritanceTest.prototype" in its prototype chain</span>

<span class="hljs-comment">//overide</span>
ExtendInheritanceTest.protoype.doSomething = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    Ti.API.info(<span class="hljs-keyword">this</span>.something);
};
<span class="hljs-comment">//extend</span>
ExtendInheritanceTest.protoype.doSomethingElse = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    alert(<span class="hljs-keyword">this</span>.somethingElse);
};
</code></pre><p>People usually misunderstand function constructor and they write some logic in it. But that approach is totally wrong because function constructor is outside entity, that is, it is not present in prototype chain. As you can see above, calling &quot;ExtendInheritanceTest&quot; does not set &quot;something&quot; property.<br>You could call &quot;InheritanceTest&quot;:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ExtendInheritanceTest</span><span class="hljs-params">(something)</span> </span>{
    InheritanceTest.call(<span class="hljs-keyword">this</span>, something);
}
</code></pre><p>But that approach is a road to slow code because every next inheritance will have to call its parent constructor. Better approach is to call setter method:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">InheritanceTest</span><span class="hljs-params">(someValue)</span> </span>{
    <span class="hljs-keyword">this</span>.setSomething(someValue);
}

InheritanceTest.prototype = {
    doSomething: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        alert(<span class="hljs-keyword">this</span>.something);
    },
    setSomething: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(something)</span> </span>{
        <span class="hljs-keyword">this</span>.something = something;
    }
};
</code></pre><p>By doing things that way, you can have identical function constructor:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ExtendInheritanceTest</span><span class="hljs-params">(something)</span> </span>{
    <span class="hljs-keyword">this</span>.setSomething(someValue);
}
</code></pre><p>This approach, although it may seem like not DRY, is semantically correct. Now, logic of setting &quot;something&quot; property is done in object (and since JS is object based language, we model objects as we would model classes in class-based languages).</p>
<p>…</p>
<p>OK, now you should understand the basics of OOP in JS.</p>
<p>As for your question regarding private variables … there are no private variables in JS yet. But they can be emulated by using function scopes. That is so called module pattern:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Module</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> privateVar = <span class="hljs-string">'Bla'</span>;
    <span class="hljs-keyword">var</span> doSomething = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{ alert(privateVar); };
    <span class="hljs-keyword">return</span> {
        doSomething: doSomething
    };
}

<span class="hljs-keyword">var</span> mod = Module();
mod.doSomething();
</code></pre><p>Note that &quot;Module&quot; is not being called with &quot;new&quot; keyword.</p>
<p>&quot;privateVar&quot; is not truly private variable, it is just local variable.<br>You can read about scopes on my blog: <a href="http:&#x2F;&#x2F;zenborgium.blogspot.com&#x2F;2012&#x2F;04&#x2F;ultimate-answer-to-titanium-memory.html">http:&#x2F;&#x2F;zenborgium.blogspot.com&#x2F;2012&#x2F;04&#x2F;ultimate-answer-to-titanium-memory.html</a></p>
<p>That is same reason why your &quot;_privateVariable&quot; is not accesible from outside function scope.</p>
<p>That approach should be avoided, there is no sense in using private variables in Titanium. We don&#39;t have to deal with evil hackers, our code is private and is running is safe environment. Make everything public and protect properties with &quot;Object.defineProperty&quot;.</p>
<p>Hope this helps. I&#39;ll write about OOP in Titanium on my blog (after EURO2012 finishes :D ) and I&#39;ll open-source my work (it is called ZenTi) that heavily uses prototypes. It is good example how to use this approach in practice. So, stay around if you&#39;re interested.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 14th 2012, 6:28:48 am">June 14th 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Ivan, That is all really interesting thanks! Is this a generally accepted way to use Titanium? or is this your personal preference?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 15th 2012, 8:34:08 am">June 15th 2012</span>
											by <span class='authorname'>Luke Peek</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That is my personal preference. You can use whatever approach you want (prototype-based is very fast and efficient). Note that above examples don&#39;t use Titanium objects and same thing can be used in other JS environments (DOM, NodeJSm, etc.). It has nothing to do with Titanium in particular. It&#39;s just JS. :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 15th 2012, 9:13:45 am">June 15th 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-240775">
				
						<section>
							<p>Yes, there are differences: <a href="http:&#x2F;&#x2F;kangax.github.com&#x2F;nfe&#x2F;#expr-vs-decl">Function expressions vs. Function declarations</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 13th 2012, 8:25:46 am">June 13th 2012</span>
								by <span class='authorname'>Markus Eschenbach</span><br>
								<a class="icon-bg icon-link" href="../../question/138269/commonjs-exports-layout.html#answer-240775" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Yes, that is true, but I doubt Luke wanted to do this:</p>
<p>exports.mymodule = mymodule();</p>
<p>Most likely:</p>
<p>exports.mymodule = mymodule;</p>
<p>There is no point in exporting the result of function call, but you want to export that function and call it wherever you require it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 13th 2012, 8:31:06 am">June 13th 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ah sorry yes, I didn&#39;t mean to put the brackets!</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 13th 2012, 8:32:13 am">June 13th 2012</span>
											by <span class='authorname'>Luke Peek</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-240778">
				
						<section>
							<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;133920&#x2F;best-practice-common-js-and-inner-functions">question 133920  - Best Practice Common JS and inner functions</a></p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;135478&#x2F;declaring-a-function--effects-on-performance">question 135478  - declaring a function -effects on performance</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 13th 2012, 8:41:23 am">June 13th 2012</span>
								by <span class='authorname'>Markus Eschenbach</span><br>
								<a class="icon-bg icon-link" href="../../question/138269/commonjs-exports-layout.html#answer-240778" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-241306">
				
						<section>
							<p>25</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 19th 2012, 9:56:21 pm">June 19th 2012</span>
								by <span class='authorname'>Bill Freedman</span><br>
								<a class="icon-bg icon-link" href="../../question/138269/commonjs-exports-layout.html#answer-241306" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
