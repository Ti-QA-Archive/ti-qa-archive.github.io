<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Problem getting TextField value on Android Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Problem getting TextField value on Android</h1>
		</header>
		<section>
			<p>I have a problem with a simple LoginForm. It works fine on the iPhone, but fails on Android.</p>
<p>The problem is that on Android the username and password field values are set just once. If one of them was wrong the user is informed, but when he enters other credentials the old one&#39;s are still the field&#39;s values.</p>
<p>This is the code for the loginbutton listener. On the iPhone username.value and password.value are the new ones entered by the user, on the Android .value is still the old one. Why?</p>
<pre><code class="hljs">btnLogin.addEventListener(<span class="hljs-string">"click"</span>, function(){
       <span class="hljs-keyword">if</span> (username.<span class="hljs-keyword">value</span> !== <span class="hljs-string">""</span> &amp;&amp; password.<span class="hljs-keyword">value</span> !== <span class="hljs-string">""</span>){
           <span class="hljs-comment">// make the login request</span>
           loginReq.open(<span class="hljs-string">"POST"</span>, S.ui.server+<span class="hljs-string">"session/login"</span>);
           alert(username.<span class="hljs-keyword">value</span>);
           alert(password.<span class="hljs-keyword">value</span>);
           <span class="hljs-keyword">var</span> <span class="hljs-keyword">params</span> = {
               user: username.<span class="hljs-keyword">value</span>,
               pass: password.<span class="hljs-keyword">value</span>
           }
           loginReq.send(<span class="hljs-keyword">params</span>);
       }
});
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 21st 2011, 5:51:36 am">December 21st 2011</span>
				by <span class='authorname'>Tobias Reike</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>textfield</span></li>
					
						<li><span class='tagname'>values</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-225754">
				
						<section>
							<p>Try making the values null after each http call</p>
<pre><code class="hljs">username.<span class="hljs-keyword">value</span> = <span class="hljs-string">''</span>;
password.<span class="hljs-keyword">value</span> = <span class="hljs-string">''</span>;
</code></pre><p>Also, can you paste the code where you defining username and password?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 21st 2011, 6:09:14 am">December 21st 2011</span>
								by <span class='authorname'>Zarir Bhesania</span><br>
								<a class="icon-bg icon-link" href="question/129681/problem-getting-textfield-value-on-android.html#answer-225754" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>It&#39;s funny, the alerts now show the new values. But the params-object still has the old ones???</p>
<p>The Textfields are nothing special, I think.</p>
<pre><code class="hljs">var username = Ti.UI.createTextField({
<span class="hljs-label">        hintText:</span> <span class="hljs-string">"Loginname"</span>,
<span class="hljs-label">        height:</span> <span class="hljs-string">"40dp"</span>, <span class="hljs-string">top:</span> <span class="hljs-string">"10dp"</span>,<span class="hljs-string">left:</span> <span class="hljs-number">0</span>, <span class="hljs-string">right:</span> <span class="hljs-number">0</span>
    });
    loginForm.add(username);

    var password = Ti.UI.createTextField({
<span class="hljs-label">        hintText:</span> <span class="hljs-string">"Password"</span>,
<span class="hljs-label">        height:</span> <span class="hljs-string">"40dp"</span>, <span class="hljs-string">top:</span> <span class="hljs-string">"10dp"</span>, <span class="hljs-string">left:</span> <span class="hljs-number">0</span>, <span class="hljs-string">right:</span> <span class="hljs-number">0</span>,
<span class="hljs-label">        passwordMask:</span> <span class="hljs-literal">true</span>
    });
    loginForm.add(password);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="December 21st 2011, 7:00:30 am">December 21st 2011</span>
											by <span class='authorname'>Tobias Reike</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>whats the sdk version?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 21st 2011, 7:04:32 am">December 21st 2011</span>
											by <span class='authorname'>Zarir Bhesania</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry forgot that: I am on 1.7.6v20111111</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 21st 2011, 7:06:04 am">December 21st 2011</span>
											by <span class='authorname'>Tobias Reike</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just have seen that there are new versions of 1.7.6 in the CI. Downloading this and trying again.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 21st 2011, 7:08:46 am">December 21st 2011</span>
											by <span class='authorname'>Tobias Reike</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-225760">
				
						<section>
							<p>Sorry forgot that: I am on 1.7.6v20111111</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 21st 2011, 7:05:44 am">December 21st 2011</span>
								by <span class='authorname'>Tobias Reike</span><br>
								<a class="icon-bg icon-link" href="question/129681/problem-getting-textfield-value-on-android.html#answer-225760" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Can you paste the entire code so that I can test on my system?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 21st 2011, 7:08:39 am">December 21st 2011</span>
											by <span class='authorname'>Zarir Bhesania</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Always forgetting that &quot;Your Answer&quot; is default opened. Sorry, here again as comment: http:&#x2F;&#x2F;pastebin.com&#x2F;C9du3jS2</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 21st 2011, 7:12:57 am">December 21st 2011</span>
											by <span class='authorname'>Tobias Reike</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The problem seems to be, that the params for loginReq-HTTPClient are not reset or something. I may add the new params to loginReq.send({}) but these are not used. Instead the former params are used.<br>Do I have to reset the HTTPClient?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 21st 2011, 7:17:01 am">December 21st 2011</span>
											by <span class='authorname'>Tobias Reike</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-225761">
				
						<section>
							<p>There it is: http:&#x2F;&#x2F;pastebin.com&#x2F;C9du3jS2</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 21st 2011, 7:12:16 am">December 21st 2011</span>
								by <span class='authorname'>Tobias Reike</span><br>
								<a class="icon-bg icon-link" href="question/129681/problem-getting-textfield-value-on-android.html#answer-225761" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-225763">
				
						<section>
							<p>I&#39;ve now moved the Ti.Network.createHTTPClient into the click event listener part for the button. Now it works. Thanks for your help!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 21st 2011, 7:29:01 am">December 21st 2011</span>
								by <span class='authorname'>Tobias Reike</span><br>
								<a class="icon-bg icon-link" href="question/129681/problem-getting-textfield-value-on-android.html#answer-225763" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-225767">
				
						<section>
							<p>Hi</p>
<p>I replaced your code inside &quot;btnLogin.addEventListener&quot; and it worked fine.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> loginReq = Ti.Network.createHTTPClient();    

       btnLogin.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
           <span class="hljs-keyword">if</span> (username.value !== <span class="hljs-string">""</span> &amp;&amp; password.value !== <span class="hljs-string">""</span>)
           {
               <span class="hljs-keyword">var</span> myuser = username.value;
               <span class="hljs-keyword">var</span> mypass = password.value;

               alert(username.value);
               alert(password.value);

               loginReq.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
                   alert(loginReq.responseText);    
               }
               loginReq.open(<span class="hljs-string">"POST"</span>, <span class="hljs-string">'url'</span>, <span class="hljs-literal">true</span>);
               loginReq.send({username: myuser,password: mypass});
           }
       });
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 21st 2011, 7:49:51 am">December 21st 2011</span>
								by <span class='authorname'>Zarir Bhesania</span><br>
								<a class="icon-bg icon-link" href="question/129681/problem-getting-textfield-value-on-android.html#answer-225767" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
