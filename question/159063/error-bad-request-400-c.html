<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>error bad request 400 c# » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>error bad request 400 c#</h1>
		</header>
		<section>
			<p>i m writing a small application for my comfort for accessing the acs cloud , but my bad luck is i am unable to create users though i am able to login , everytime i create user using this code i get the error bad request 400 on &quot; using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)&quot; this line. please help me</p>
<pre><code class="hljs">            Uri address = new Uri(<span class="hljs-string">"https://api.cloud.appcelerator.com/v1/users/create.json?key=LJOVi9A95Y3r6TqlFmxS314v6ox4xaPf"</span>);

               <span class="hljs-comment">// Create the web request  </span>
               HttpWebRequest request = WebRequest.Create(address) <span class="hljs-keyword">as</span> HttpWebRequest;

               <span class="hljs-comment">// Set type to POST  </span>
               request.Method = <span class="hljs-string">"POST"</span>;
               request.ContentType = <span class="hljs-string">"application/x-www-urlencoded"</span>;

               <span class="hljs-comment">// Create the data we want to send  </span>

              <span class="hljs-comment">/* Dictionary&lt;string, string&gt; cus_fields = new Dictionary&lt;string, string&gt;();
               cus_fields.Add("companyname", cname.Text);
               //cus_fields.Add("[ACS_Photo]companylogo_id",clogoid.Text);
               cus_fields.Add("code",vcode.Text);
               cus_fields.Add("linkedinurl",lurl.Text);
               cus_fields.Add("twitterurl",turl.Text);
               cus_fields.Add("isspeaker",isspeaker.Text);
               cus_fields.Add("allowaccess",allowaccess.Text);*/</span>


               StringBuilder data = new StringBuilder();
               data.<span class="hljs-keyword">Append</span>(<span class="hljs-string">"username="</span> + HttpUtility.UrlEncode(email.Text));
               data.<span class="hljs-keyword">Append</span>(<span class="hljs-string">"&amp;password="</span> + HttpUtility.UrlEncode(pass.Text));
               data.<span class="hljs-keyword">Append</span>(<span class="hljs-string">"&amp;password_comfirmation="</span> + HttpUtility.UrlEncode(pass.Text));
               data.<span class="hljs-keyword">Append</span>(<span class="hljs-string">"&amp;first_name="</span> + HttpUtility.UrlEncode(fname.Text));
               data.<span class="hljs-keyword">Append</span>(<span class="hljs-string">"&amp;last_name="</span> + HttpUtility.UrlEncode(lname.Text));
             <span class="hljs-comment">//  data.Append("&amp;custom_fields=" + HttpUtility.UrlEncode(cus_fields.ToString()));</span>

               <span class="hljs-comment">// Create a byte array of the data we want to send  </span>
               byte[] byteData = UTF8Encoding.UTF8.GetBytes(data.<span class="hljs-keyword">ToString</span>());

               <span class="hljs-comment">// Set the content length in the request headers  </span>
               request.ContentLength = byteData.Length;

               <span class="hljs-comment">// Write data  </span>
               using (Stream postStream = request.GetRequestStream())
               {
                   postStream.Write(byteData, 0, byteData.Length);
               }

               <span class="hljs-comment">// Get response  </span>
               try
               {
                   using (HttpWebResponse response = request.GetResponse() <span class="hljs-keyword">as</span> HttpWebResponse)
                   {

                       <span class="hljs-comment">// Get the response stream  </span>
                       StreamReader reader = new StreamReader(response.GetResponseStream());
                       JObject joResponse = JObject.<span class="hljs-keyword">Parse</span>(reader.ReadToEnd());
                       JObject ojObject = (JObject)joResponse[<span class="hljs-string">"response"</span>];
                       JArray array = (JArray)ojObject[<span class="hljs-string">"users"</span>];
                       MessageBox.Show(ojObject.<span class="hljs-keyword">ToString</span>());
                       <span class="hljs-comment">// int id = array[0].id.ToString());</span>
                       <span class="hljs-comment">// Console application output  </span>
                       <span class="hljs-comment">//MessageBox.Show(reader.ReadToEnd());</span>
                       <span class="hljs-comment">//var jsondata = new JavaScriptSerializer.Serialize(reader.ReadToEnd().ToString);</span>



                   }
               }
               catch (WebException <span class="hljs-keyword">ex</span>)
               {

                   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">ex</span>.Status == WebExceptionStatus.ProtocolError &amp;&amp; <span class="hljs-keyword">ex</span>.Response != null)
                   {
                       <span class="hljs-keyword">var</span> resp = (HttpWebResponse)<span class="hljs-keyword">ex</span>.Response;
                       <span class="hljs-keyword">if</span> (resp.StatusCode == HttpStatusCode.Unauthorized)
                       {
                           MessageBox.Show(<span class="hljs-string">"Invalid Username and Password"</span>);
                       }
                   }
               }
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 3rd 2013, 9:03:17 am">November 3rd 2013</span>
				by <span class='authorname'>raqeeb abdul</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>api</span></li>
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>application</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>As you will know your c# code is not part of Titanium, whilst you are using it to access ACS is perfectly normal and acceptable, you are less likely to achieve an answer here than if you posted this specific question on something else like <a href="stackoverflow.com">http:&#x2F;&#x2F;stackoverflow.com&#x2F;</a>.</p>
<p>Just thought it worth you trying to find the best answer in the fastest way possible.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 3rd 2013, 9:38:31 am">November 3rd 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
