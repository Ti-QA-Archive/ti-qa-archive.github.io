<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Ti.Gesture is undefined Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Ti.Gesture is undefined</h1>
		</header>
		<section>
			<p>When i move one of my views from Resources&#x2F;Views to Resources&#x2F;iPhone&#x2F;views I get the following error.</p>
<p>&#39;undefined&#39; is not an object (evaluating &#39;Ti.Gesture.addEventListener&#39;)</p>
<p>It does not make sense to me.  BEfore the move, the app runs fine on both simulator and phone, but after the move, the app runs without the above error in the simulator, but not on an actual phone.  I tried moving the file back and forth and the results are consistent with the file move being the only move.</p>
<p>Ti SDK: 2.1.4<br>Xcode: 4.6.2<br>IOS: 6.1.3</p>
<p>Anyone run into a similar issue?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 3rd 2013, 4:38:09 pm">May 3rd 2013</span>
				by <span class='authorname'>Kouroche Sedaghatian</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>orientation</span></li>
					
						<li><span class='tagname'>ti.gesture</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-262119">
				
						<section>
							<p>The simulator is not case-sensitive but the device is. You wrote &quot;Views&quot; and &quot;views&quot; is that really  how you named the folders?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 3rd 2013, 4:43:49 pm">May 3rd 2013</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="question/151940/tigesture-is-undefined#answer-262119" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I wish.  That was just a typo here.  I would expect that if I had the casing issue, the page would not load in the first place.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 3rd 2013, 4:46:03 pm">May 3rd 2013</span>
											by <span class='authorname'>Kouroche Sedaghatian</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Darn, I was hoping it was simple too! :o) Sounds like it could be a problem with the build process not copying files properly. Is the folder named &#39;iphone&#39; or &#39;iPhone&#39;? I suppose our build scripts might see those as different folders.</p>
<p>It could be a bug with the framework, though I&#39;d be surprised as Ti2.1.4 has been around for a while and someone must have used Gesture with a file in a subfolder by now. It could be the way you&#39;ve structured your code. (You haven&#39;t provided any of the code here for me or anyone else to examine.) </p>
<p>Can you get away with not moving the file to the iphone folder?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 3rd 2013, 4:53:04 pm">May 3rd 2013</span>
											by <span class='authorname'>Tim Poulsen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK, so I had a chance to recreate this using a simple project just to make sure it was not anything crazy that I do.</p>
<p>Here is the app structure:</p>
<p>bogus (app name)</p>
<pre><code class="hljs">-<span class="ruby"> <span class="hljs-constant">Resources</span>
</span>
    -<span class="ruby"> iphone
</span>
        -<span class="ruby">ui
</span>
            -<span class="ruby"><span class="hljs-constant">TestWindow</span>.js
</span>
-<span class="ruby">app.js</span>
</code></pre><p>app.js code</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> TestWindow = <span class="hljs-built_in">require</span> (<span class="hljs-string">'ui/TestWindow'</span>);

Ti.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);

<span class="hljs-keyword">var</span> win1 = <span class="hljs-keyword">new</span> TestWindow();

<span class="hljs-keyword">var</span> tab1 = Ti.UI.createTab({  
    icon: <span class="hljs-string">'KS_nav_views.png'</span>,
    title: <span class="hljs-string">'Tab 1'</span>,
    <span class="hljs-built_in">window</span>: win1
});


<span class="hljs-keyword">var</span> tabGroup = Ti.UI.createTabGroup();
tabGroup.addTab(tab1);
tabGroup.open();
</code></pre><p>TestWindow.js code</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TestWindow</span><span class="hljs-params">(title)</span> </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createWindow({
        title:title,
        backgroundColor:<span class="hljs-string">'white'</span>
    });

    Ti.Gesture.addEventListener(<span class="hljs-string">'orientationchange'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        Ti.API.info(<span class="hljs-string">'hello there'</span>);
    });

    <span class="hljs-keyword">var</span> button = Ti.UI.createButton({
        height:<span class="hljs-number">44</span>,
        width:<span class="hljs-number">200</span>,
        title:L(<span class="hljs-string">'openWindow'</span>),
        top:<span class="hljs-number">20</span>
    });
    <span class="hljs-keyword">self</span>.add(button);

    button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">//containingTab attribute must be set by parent tab group on</span>
        <span class="hljs-comment">//the window for this work</span>
        <span class="hljs-keyword">self</span>.containingTab.open(Ti.UI.createWindow({
            title: L(<span class="hljs-string">'newWindow'</span>),
            backgroundColor: <span class="hljs-string">'white'</span>
        }));
    });

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
};

module.exports = TestWindow;
</code></pre><p>This works on the simulator, but not on an actual iPhone.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 6th 2013, 11:05:10 am">May 6th 2013</span>
											by <span class='authorname'>Kouroche Sedaghatian</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I don&#39;t see anything wrong with your code or file layout. This might be a bug with the build scripts. Would you file a ticket at <a href="https:&#x2F;&#x2F;jira.appcelerator.org">jira.appcelerator.org</a>?</p>
<p>Architecturally, you might consider moving the orientation listener to the app.js file.</p>
<pre><code class="hljs"><span class="hljs-comment">// app.js</span>
<span class="hljs-tag">Ti</span><span class="hljs-class">.Gesture</span><span class="hljs-class">.addEventListener</span>(<span class="hljs-string">'orientationchange'</span>, <span class="hljs-function">function</span>(e) {
   <span class="hljs-tag">win1</span><span class="hljs-class">.fireEvent</span>(<span class="hljs-string">'changeorientation'</span>, { 
      <span class="hljs-attribute">portrait</span>: e.source.<span class="hljs-function">isPortrait</span>(), 
      <span class="hljs-attribute">landscape</span>: e.source.<span class="hljs-function">isLandscape</span>() 
   });
});
</code></pre><p>then in TestWindow.js</p>
<pre><code class="hljs"><span class="hljs-comment">// your other stuff plus</span>

<span class="hljs-keyword">self</span>.addEventListener(<span class="hljs-string">'changeorientation'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
   <span class="hljs-keyword">if</span>(e.portrait) {
      <span class="hljs-comment">// re-orient your UI in portrait mode</span>
   } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.landscape) {
      <span class="hljs-comment">// re-orient for landscape mode</span>
   }
});
</code></pre><p>The advantage of this technique is that you could have a single orientation listener at the tab group level and use it to re-orient the layout of any of the windows on any of the tabs. You dont&#39; want multiple listeners, especially the global listeners like Ti.Gesture, Ti.Geolocation, etc. And you want to remove those global listeners when they&#39;re not needed to remove potential memory leaks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 6th 2013, 12:19:09 pm">May 6th 2013</span>
											by <span class='authorname'>Tim Poulsen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Is there a point in filing a bug on 2.x?  it seems to work fine on 3.1.0GA.</p>
<p>Thanks for the pointer on how to better code it.  I will use that from now on.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 8th 2013, 4:30:15 am">May 8th 2013</span>
											by <span class='authorname'>Kouroche Sedaghatian</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No, if this is just for 2.x, don&#39;t bother. The engineers usually don&#39;t go back to fix old versions of the SDKs unless there&#39;s a compelling need to do so.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 8th 2013, 11:22:40 am">May 8th 2013</span>
											by <span class='authorname'>Tim Poulsen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
