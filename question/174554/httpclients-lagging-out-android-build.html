<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>HTTPClients lagging out Android build Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>HTTPClients lagging out Android build</h1>
		</header>
		<section>
			<p>I&#39;ve been testing my app using iPhone emulators, I decided to clear out any android specific bugs today so I built on android. The current biggest issue I&#39;ve encountered is that web service calls completely lock out the app to the point where sometimes the phone will ask if I want to quit or wait. This is in no way an issue on iOS and I was wondering if someone could help me identify what the issue is.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 26th 2014, 4:46:50 pm">May 26th 2014</span>
				by <span class='authorname'>Richard Fyffe</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><pre><code class="hljs">I was wondering <span class="hljs-keyword">if</span> someone could <span class="hljs-keyword">help</span> <span class="hljs-keyword">me</span> identify what the issue <span class="hljs-keyword">is</span>.
</code></pre><p>From the information available in the question, no.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 26th 2014, 5:29:07 pm">May 26th 2014</span>
								by <span class='authorname'>Technical Lead</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>And what information would you like?</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 26th 2014, 5:30:13 pm">May 26th 2014</span>
								by <span class='authorname'>Richard Fyffe</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;m not sure about the other guy, but..</p>
<p>no code, no versions, no hardware descriptions, nothing really for anyone to go on.</p>
<p>&#39;Doctor, I hurt. Fix it.&#39; &lt;- Thats essentially what you have asked.</p>
<p>Missing from your question are a number of important pieces of information. I suggest you take a look at the <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Using+Questions+and+Answers">Using Questions and Answers</a> article, specifically the Q&amp;A Question Checklist.  The missing information is critical to reproducing problems in a test environment and often indicates other factors that cause the undesirable outcome you are experiencing.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 26th 2014, 5:42:02 pm">May 26th 2014</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Titanium Studio, build: 3.2.3.201404181442<br>SDK: 3.2.3.GA<br>Phone: Galaxy Nexus<br>Android Version: 4.2.1</p>
<p>I attempted to make a small test app to demonstrate my problem but I was unable to duplicate my issues, leading me to suspect my app is overloading the phone. I also cannot seem to build to emulator because I keep getting the error:</p>
<pre><code class="lang-~">[<span class="hljs-built_in">ERROR</span>] Application Installer abnormal process termination. Process <span class="hljs-keyword">exit</span> value was <span class="hljs-number">1</span>
[<span class="hljs-built_in">ERROR</span>] :  The selected emulator <span class="hljs-string">"Nexus5"</span> does <span class="hljs-keyword">not</span> have an SD card.
</code></pre>
<p>Even on fresh alloy programs.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 26th 2014, 7:47:42 pm">May 26th 2014</span>
								by <span class='authorname'>Richard Fyffe</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>That&#39;s what I get for clicking post too quickly after preview.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 26th 2014, 7:48:06 pm">May 26th 2014</span>
								by <span class='authorname'>Richard Fyffe</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-279098">
				
						<section>
							<pre><code class="hljs">[<span class="hljs-built_in">ERROR</span>] : The selected emulator <span class="hljs-string">"Nexus5"</span> does <span class="hljs-keyword">not</span> have an SD card. 
[<span class="hljs-built_in">ERROR</span>] Application Installer abnormal process termination. Process <span class="hljs-keyword">exit</span> value was <span class="hljs-number">1</span>
</code></pre><p>This bug may be what you are up against with the emulator:</p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;162337&#x2F;genymotion-and-debug-mode">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;162337&#x2F;genymotion-and-debug-mode</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 26th 2014, 8:30:05 pm">May 26th 2014</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/174554/httpclients-lagging-out-android-build.html#answer-279098" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>(making assumption here, mind you)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 26th 2014, 8:31:18 pm">May 26th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">The current biggest issue I've encountered is that web service calls completely <span class="hljs-operator"><span class="hljs-keyword">lock</span> <span class="hljs-keyword">out</span> the app <span class="hljs-keyword">to</span> the point <span class="hljs-keyword">where</span> sometimes the phone will ask <span class="hljs-keyword">if</span> <span class="hljs-keyword">I</span> want <span class="hljs-keyword">to</span> quit <span class="hljs-keyword">or</span> <span class="hljs-keyword">wait</span></span>
</code></pre><p>This is not normal behavior, and not something I&#39;ve ever experienced. Lets work towards getting your environment working, and then look at your test case.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 26th 2014, 8:33:12 pm">May 26th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;m not using genymotion. Just standard android emulators.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 26th 2014, 8:45:13 pm">May 26th 2014</span>
											by <span class='authorname'>Richard Fyffe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Geny or other wise, its the same error, produced from the same bit of appc code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 26th 2014, 9:08:04 pm">May 26th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>(similar)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 26th 2014, 9:08:57 pm">May 26th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">Ok, here you go.

Using <span class="hljs-number">3.2</span><span class="hljs-number">.0</span>.GA, <span class="hljs-keyword">the</span> attempted fix mentioned <span class="hljs-keyword">above</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span>, however, <span class="hljs-keyword">at</span> line <span class="hljs-number">1302</span> <span class="hljs-keyword">of</span> {sdk}/android/cli/commands/_build.js <span class="hljs-keyword">the</span> emu object still doesn't have <span class="hljs-keyword">the</span> sdcard <span class="hljs-keyword">property</span> <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword">it</span> (confirmed <span class="hljs-keyword">with</span> console.<span class="hljs-command">log</span>(emu).

I don't know why, someone elses problem.

To fix, replace:

} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!emu.sdcard) {

<span class="hljs-keyword">with</span>

} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!emu.sdcard &amp;&amp; (emu.type !== 'genymotion')) {
</code></pre><p>Do you mean this code here?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 26th 2014, 9:11:57 pm">May 26th 2014</span>
											by <span class='authorname'>Richard Fyffe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Richard,</p>
<p>Think we may have run off on a tangent here.</p>
<p>Just create a new avd that has a sd card image attached to it.<br><a href="http:&#x2F;&#x2F;content.screencast.com&#x2F;users&#x2F;Stephen_Feather&#x2F;folders&#x2F;Jing&#x2F;media&#x2F;47e7e787-4fbe-4d28-bdbc-7d84aebca23f&#x2F;00000478.png"><img src="http:&#x2F;&#x2F;content.screencast.com&#x2F;users&#x2F;Stephen_Feather&#x2F;folders&#x2F;Jing&#x2F;media&#x2F;47e7e787-4fbe-4d28-bdbc-7d84aebca23f&#x2F;00000478.png" alt=""></a></p>
</p>
										<div class="author">
											&mdash; commented <span title="May 26th 2014, 10:02:19 pm">May 26th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Alright so I can now launch to emulator. (It took so long because I had to run out for a few things)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 26th 2014, 11:37:38 pm">May 26th 2014</span>
											by <span class='authorname'>Richard Fyffe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>excellent.</p>
<p>Lets take a look at your xhr call, post a snippet of your call and the actual error from the emulator.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 27th 2014, 12:27:22 am">May 27th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>For the most part there are no errors, the app just locks up. I managed to get this error</p>
<pre><code class="hljs">[WARN] :   IdleConnectionHandler: Removing <span class="hljs-tag">a</span> connection that never existed!
[ERROR] :  TiHttpClient: (TiHttpClient-<span class="hljs-number">12</span>) [<span class="hljs-number">390</span>,<span class="hljs-number">84105</span>] HTTP Error (org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.client</span><span class="hljs-class">.ClientProtocolException</span>): Invalid request URI: http:<span class="hljs-comment">//</span>
[ERROR] :  TiHttpClient: org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.client</span><span class="hljs-class">.ClientProtocolException</span>
[ERROR] :  TiHttpClient:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.AbstractHttpClient</span><span class="hljs-class">.execute</span>(AbstractHttpClient<span class="hljs-class">.java</span>:<span class="hljs-number">557</span>)
[ERROR] :  TiHttpClient:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.AbstractHttpClient</span><span class="hljs-class">.execute</span>(AbstractHttpClient<span class="hljs-class">.java</span>:<span class="hljs-number">653</span>)
[ERROR] :  TiHttpClient:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.AbstractHttpClient</span><span class="hljs-class">.execute</span>(AbstractHttpClient<span class="hljs-class">.java</span>:<span class="hljs-number">637</span>)
[ERROR] :  TiHttpClient:     at ti<span class="hljs-class">.modules</span><span class="hljs-class">.titanium</span><span class="hljs-class">.network</span><span class="hljs-class">.TiHTTPClient</span><span class="hljs-variable">$ClientRunnable</span>.<span class="hljs-function"><span class="hljs-title">run</span><span class="hljs-params">(TiHTTPClient.java:<span class="hljs-number">1287</span>)</span></span>
[ERROR] :  TiHttpClient:     at java<span class="hljs-class">.lang</span><span class="hljs-class">.Thread</span><span class="hljs-class">.run</span>(Thread<span class="hljs-class">.java</span>:<span class="hljs-number">856</span>)
[ERROR] :  TiHttpClient: Caused by: org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.ProtocolException</span>: Invalid request URI: http:<span class="hljs-comment">//</span>
[ERROR] :  TiHttpClient:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.RequestWrapper</span>.&lt;init&gt;(RequestWrapper<span class="hljs-class">.java</span>:<span class="hljs-number">86</span>)
[ERROR] :  TiHttpClient:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.DefaultRequestDirector</span><span class="hljs-class">.wrapRequest</span>(DefaultRequestDirector<span class="hljs-class">.java</span>:<span class="hljs-number">251</span>)
[ERROR] :  TiHttpClient:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.DefaultRequestDirector</span><span class="hljs-class">.execute</span>(DefaultRequestDirector<span class="hljs-class">.java</span>:<span class="hljs-number">291</span>)
[ERROR] :  TiHttpClient:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.AbstractHttpClient</span><span class="hljs-class">.execute</span>(AbstractHttpClient<span class="hljs-class">.java</span>:<span class="hljs-number">555</span>)
[ERROR] :  TiHttpClient:     ... <span class="hljs-number">4</span> more
[ERROR] :  TiHttpClient: Caused by: java<span class="hljs-class">.net</span><span class="hljs-class">.URISyntaxException</span>: Authority expected at index <span class="hljs-number">7</span>: http:<span class="hljs-comment">//</span>
[ERROR] :  TiHttpClient:     at java<span class="hljs-class">.net</span><span class="hljs-class">.URI</span><span class="hljs-class">.parseURI</span>(URI<span class="hljs-class">.java</span>:<span class="hljs-number">391</span>)
[ERROR] :  TiHttpClient:     at java<span class="hljs-class">.net</span><span class="hljs-class">.URI</span>.&lt;init&gt;(URI<span class="hljs-class">.java</span>:<span class="hljs-number">204</span>)
[ERROR] :  TiHttpClient:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.RequestWrapper</span>.&lt;init&gt;(RequestWrapper<span class="hljs-class">.java</span>:<span class="hljs-number">84</span>)
[ERROR] :  TiHttpClient:     ... <span class="hljs-number">7</span> more
</code></pre><p>But this doesn&#39;t appear in all instances where the app locks up. Would you like me to post all the output between a normal HTTP call and regaining control? Its probably a few hundred lines though. Also the emulator crashes when I try to replace a default image with an image downloaded off the server using the <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;guide&#x2F;Image_Best_Practices">remote image caching from titanium best practices.</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="May 27th 2014, 12:39:40 am">May 27th 2014</span>
											by <span class='authorname'>Richard Fyffe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs"><span class="hljs-keyword">var</span> httpClient = Titanium.Network.createHTTPClient();
    httpClient.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        alert(<span class="hljs-string">"Network error, can't get the club information."</span>);
    };
    httpClient.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.status == <span class="hljs-string">'200'</span>) {
            <span class="hljs-keyword">var</span> responseContent = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
            <span class="hljs-keyword">if</span> (responseContent.WEB_SERVICE_METADATA.STATUS == <span class="hljs-string">"SUCCESS"</span>){
                Alloy.Globals.ClubOwnerId = responseContent.WEB_SERVICE_DATA.owneraccountid;
                Ti.API.info(Alloy.Globals.ClubOwnerId);
                <span class="hljs-keyword">if</span>(Alloy.Globals.AccountId == Alloy.Globals.ClubOwnerId){Alloy.Globals.isClubOwner = <span class="hljs-literal">true</span>;}
            }
            <span class="hljs-keyword">else</span>
                alert(<span class="hljs-string">"There's a network issue, the setting information can not be displayed."</span>);
        }
    };
    httpClient.open(<span class="hljs-string">'POST'</span>, Alloy.Globals.webServiceAddr);
    <span class="hljs-keyword">var</span> temp = {
        func : Alloy.Globals.FunctionGetClubInformation,
        clubid : clubId
    };
    httpClient.send(temp);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="May 27th 2014, 9:35:15 am">May 27th 2014</span>
											by <span class='authorname'>Richard Fyffe</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
