<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>XHR Request - Use Returned Variable outside of onload function » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>XHR Request - Use Returned Variable outside of onload function</h1>
		</header>
		<section>
			<p>I am trying to retrieve info from a simple remote XML file and pass the info into a couple of labels. I have used the kitchen sink example and it works fine, but I would like to take the labels variables outside of the onload function, so that if the XML feed cannot be found, I still have the opportunity to show the whole page and empty text in labels. </p>
<p>So, my question is: How can I take a variable out of the onload function and use it in a label outside of the function?</p>
<p>Taking the following example code, what would I need to add or change?</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();

xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
    <span class="hljs-keyword">var</span> xmlTitle = doc.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>);
};

<span class="hljs-comment">// Label outside of onload function</span>
<span class="hljs-keyword">var</span> labelTitle = Ti.UI.createLabel({
        text:xmlTitle
    });
    Ti.UI.currentWindow.add(screenname);


<span class="hljs-comment">// open the client</span>
xhr.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'http://twitter.com/statuses/show/123.xml'</span>);

<span class="hljs-comment">// send the data</span>
xhr.send();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 12th 2011, 9:18:47 pm">December 12th 2011</span>
				by <span class='authorname'>Olivier Cuny</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>xhr</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-225296">
				
						<section>
							<p>if they are in the same file.</p>
<p>declare the var outside of the onload function and it is the available in the whole file.</p>
<p>so after var xhr.. add var xmlTitle = &#39;&#39;;</p>
<p>then remove the var off xmlTitle in the onload function.</p>
<p>If you want to pass the variable around the application then from the onload function you can call the function to pass it to I.e. displayLabel(xmlTitle). then you would have </p>
<p>displayLabel = function(invalue)<br>{<br>   Ti.ui.createlabel ({ text: invalue });<br>};</p>
<p>fairly simple example</p>
<p>hope this helps..</p>
<p>T.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 12th 2011, 9:29:56 pm">December 12th 2011</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/129362/xhr-request---use-returned-variable-outside-of-onload-function#answer-225296" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the answer. I am a little confused about the structure of code for the second part of your answer. Would you mind showing me what the code should look like for what you had in mind?<br>Thank you very much for taking the time to answer.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 13th 2011, 1:22:07 am">December 13th 2011</span>
											by <span class='authorname'>Olivier Cuny</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-225304">
				
						<section>
							<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;blog&#x2F;2011&#x2F;10&#x2F;callbacks-are-your-friend-events-arent-too-bad-either.html">see complete example and blog post here</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 13th 2011, 1:38:45 am">December 13th 2011</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/129362/xhr-request---use-returned-variable-outside-of-onload-function#answer-225304" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-225355">
				
						<section>
							<p>I think that I have the solution by simply assigning the value to a var in the function that matches a var outside of the function.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 13th 2011, 5:49:55 pm">December 13th 2011</span>
								by <span class='authorname'>Olivier Cuny</span><br>
								<a class="icon-bg icon-link" href="question/129362/xhr-request---use-returned-variable-outside-of-onload-function#answer-225355" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-240597">
				
						<section>
							<p>I tried this.But this is not working for me.Please Suggest some other Ways.</p>
<p>Thanks in Advance</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 11th 2012, 11:13:02 am">June 11th 2012</span>
								by <span class='authorname'>pankaj Goyal</span><br>
								<a class="icon-bg icon-link" href="question/129362/xhr-request---use-returned-variable-outside-of-onload-function#answer-240597" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
