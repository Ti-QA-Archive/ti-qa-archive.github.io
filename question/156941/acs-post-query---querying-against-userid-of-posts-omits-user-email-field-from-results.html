<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>ACS POST QUERY - querying against user_id of posts omits user email field from results » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>ACS POST QUERY - querying against user_id of posts omits user email field from results</h1>
		</header>
		<section>
			<p>Using Cloud.posts.query API to query for posts with user_id matching a set of user ids doesn&#39;t include email field in the results.<br>I do get an email field when I use curl directly. Is there a way for me to get the email field when using Cloud.posts.query too?</p>
<p>sample code:<br>Here&#39;s the curl call with results</p>
<p>curl -c cookies.txt -b cookies.txt -X GET –data-urlencode &#39;where={&quot;user_id&quot;:{&quot;$in&quot;:[&quot;5202aeb0296d1e0b1a0eba38&quot;, &quot;521fe8fb6f62fa0b4a001096&quot;]}}&#39; &quot;api.cloud.appcelerator.com&#x2F;v1&#x2F;posts&#x2F;query.json?key=VtBOemkWS2i8oF8ky5Zw72RlLnRaRRov&quot;<br>{<br>  &quot;meta&quot;: {<br>    &quot;code&quot;: 200,<br>    &quot;status&quot;: &quot;ok&quot;,<br>    &quot;method_name&quot;: &quot;queryPosts&quot;,<br>    &quot;page&quot;: 1,<br>    &quot;per_page&quot;: 10,<br>    &quot;total_pages&quot;: 3,<br>    &quot;total_results&quot;: 26<br>  },<br>  &quot;response&quot;: {<br>    &quot;posts&quot;: [<br>      {<br>        &quot;id&quot;: &quot;522ab2c1931fe90af40000f9&quot;,<br>        &quot;created_at&quot;: &quot;2013-09-07T04:59:47+0000&quot;,<br>        &quot;updated_at&quot;: &quot;2013-09-07T04:59:47+0000&quot;,<br>        &quot;content&quot;: &quot;Ginger%20friends&quot;,<br>        &quot;user&quot;: {<br>          &quot;id&quot;: &quot;5202aeb0296d1e0b1a0eba38&quot;,<br>          &quot;first_name&quot;: &quot;Team&quot;,<br>          &quot;last_name&quot;: &quot;Fashionist&quot;,<br>          &quot;created_at&quot;: &quot;2013-08-07T20:31:44+0000&quot;,<br>          &quot;updated_at&quot;: &quot;2013-09-07T01:59:31+0000&quot;,<br>          &quot;external_accounts&quot;: [<br>            {<br>              &quot;external_id&quot;: &quot;100004652744055&quot;,<br>              &quot;external_type&quot;: &quot;facebook&quot;,<br>              &quot;token&quot;: &quot;CAAFDF1dZBDvIBALtOPYyub34dXozXajZC0Jss8e1mJmng3PpCqw3rFUqB9fI2CbpTKy3dLCPxNT6ghfli03zE3SSHrG7q9eGnhD4cJFM8v33ngAyMtkWc1QnHkwXZAd7DMGQXIZCpJTleuZBtjz0apPIrnVNtDendZAXKo5KCvE5Bi6KkCr0AH&quot;<br>            }<br>          ],<br>          &quot;email&quot;: &quot;fashionist@gmail.com&quot;,<br>          &quot;confirmed_at&quot;: &quot;2013-08-07T20:31:44+0000&quot;,<br>          &quot;username&quot;: &quot;fashionist&quot;,<br>          &quot;admin&quot;: &quot;false&quot;,<br>          &quot;custom_fields&quot;: {<br>            &quot;bio&quot;: &quot;Awesomeness&quot;<br>          },<br>          &quot;stats&quot;: {<br>            &quot;photos&quot;: {<br>              &quot;total_count&quot;: 84<br>            },<br>            &quot;storage&quot;: {<br>              &quot;used&quot;: 160965240<br>            }<br>          }<br>        },<br>        &quot;photo&quot;: {<br>          &quot;id&quot;: &quot;522ab2c1931fe90af40000fa&quot;,<br>          &quot;filename&quot;: &quot;b5efb50.png&quot;,<br>          &quot;size&quot;: 846991,<br>          &quot;md5&quot;: &quot;6cc832c2249a1c066a254db99bbef915&quot;,<br>          &quot;created_at&quot;: &quot;2013-09-07T04:59:47+0000&quot;,<br>          &quot;updated_at&quot;: &quot;2013-09-07T04:59:51+0000&quot;,<br>          &quot;processed&quot;: true,<br>          &quot;user&quot;: {<br>            &quot;id&quot;: &quot;5202aeb0296d1e0b1a0eba38&quot;,<br>            &quot;first_name&quot;: &quot;Team&quot;,<br>            &quot;last_name&quot;: &quot;Fashionist&quot;,<br>            &quot;created_at&quot;: &quot;2013-08-07T20:31:44+0000&quot;,<br>            &quot;updated_at&quot;: &quot;2013-09-07T01:59:31+0000&quot;,<br>            &quot;external_accounts&quot;: [<br>              {<br>                &quot;external_id&quot;: &quot;100004652744055&quot;,<br>                &quot;external_type&quot;: &quot;facebook&quot;,<br>                &quot;token&quot;: &quot;CAAFDF1dZBDvIBALtOPYyub34dXozXajZC0Jss8e1mJmng3PpCqw3rFUqB9fI2CbpTKy3dLCPxNT6ghfli03zE3SSHrG7q9eGnhD4cJFM8v33ngAyMtkWc1QnHkwXZAd7DMGQXIZCpJTleuZBtjz0apPIrnVNtDendZAXKo5KCvE5Bi6KkCr0AH&quot;<br>              }<br>            ],<br>            &quot;email&quot;: &quot;fashionist@gmail.com&quot;,<br>            &quot;confirmed_at&quot;: &quot;2013-08-07T20:31:44+0000&quot;,<br>            &quot;username&quot;: &quot;fashionist&quot;,<br>            &quot;admin&quot;: &quot;false&quot;,<br>            &quot;custom_fields&quot;: {<br>              &quot;bio&quot;: &quot;Awesomeness&quot;<br>            },<br>            &quot;stats&quot;: {<br>              &quot;photos&quot;: {<br>                &quot;total_count&quot;: 84<br>              },<br>              &quot;storage&quot;: {<br>                &quot;used&quot;: 160965240<br>              }<br>            }<br>          },<br>          &quot;urls&quot;: {<br>            &quot;ipad&quot;: &quot;http:&#x2F;&#x2F;storage.cloud.appcelerator.com&#x2F;FS5Sb8lEaBA13gRnLgfsr0qxd8yxjfkT&#x2F;photos&#x2F;f9&#x2F;15&#x2F;522ab2c2931fe90af40000fb&#x2F;b5efb50_ipad.png&quot;,<br>            &quot;iphone&quot;: &quot;http:&#x2F;&#x2F;storage.cloud.appcelerator.com&#x2F;FS5Sb8lEaBA13gRnLgfsr0qxd8yxjfkT&#x2F;photos&#x2F;f9&#x2F;15&#x2F;522ab2c2931fe90af40000fb&#x2F;b5efb50_iphone.png&quot;,<br>            &quot;android&quot;: &quot;http:&#x2F;&#x2F;storage.cloud.appcelerator.com&#x2F;FS5Sb8lEaBA13gRnLgfsr0qxd8yxjfkT&#x2F;photos&#x2F;f9&#x2F;15&#x2F;522ab2c2931fe90af40000fb&#x2F;b5efb50_android.png&quot;,<br>            &quot;preview&quot;: &quot;http:&#x2F;&#x2F;storage.cloud.appcelerator.com&#x2F;FS5Sb8lEaBA13gRnLgfsr0qxd8yxjfkT&#x2F;photos&#x2F;f9&#x2F;15&#x2F;522ab2c2931fe90af40000fb&#x2F;b5efb50_preview.png&quot;,<br>            &quot;avatar&quot;: &quot;http:&#x2F;&#x2F;storage.cloud.appcelerator.com&#x2F;FS5Sb8lEaBA13gRnLgfsr0qxd8yxjfkT&#x2F;photos&#x2F;f9&#x2F;15&#x2F;522ab2c2931fe90af40000fb&#x2F;b5efb50_avatar.png&quot;,<br>            &quot;original&quot;: &quot;http:&#x2F;&#x2F;storage.cloud.appcelerator.com&#x2F;FS5Sb8lEaBA13gRnLgfsr0qxd8yxjfkT&#x2F;photos&#x2F;f9&#x2F;15&#x2F;522ab2c2931fe90af40000fb&#x2F;b5efb50_original.png&quot;<br>          },<br>          &quot;content_type&quot;: &quot;image&#x2F;png&quot;<br>        }<br>      }, etc….</p>
<p>When I use Cloud.posts.query with this code:</p>
<pre><code class="hljs">    <span class="hljs-keyword">var</span> getID = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(user)</span> </span>{ <span class="hljs-keyword">return</span> user.id;};
    Cloud.Posts.query({
        page: <span class="hljs-number">1</span>,
        limit: Ti.App.maxNumPosts,
        order: <span class="hljs-string">'-created_at'</span>,
        response_json_depth: <span class="hljs-number">4</span>, <span class="hljs-comment">// tried increasing json depth, but this doesn't help</span>
        where: {
            <span class="hljs-string">"user_id"</span>: { <span class="hljs-string">'$in'</span>: usersList.map(getID)  }  <span class="hljs-comment">//usersList is an array of user objects</span>
        }
    }, <span class="hljs-keyword">callback</span>);
</code></pre><p>post results user field do not include an email field. Copied &amp; pasted from expressions window:</p>
<p>&quot;e.posts[0]&quot;    [object Object]<br>    id    &quot;522ab2c1931fe90af40000f9&quot;<br>    created_at    &quot;2013-09-07T04:59:47+0000&quot;<br>    updated_at    &quot;2013-09-07T04:59:47+0000&quot;<br>    content    &quot;Ginger%20friends&quot;<br>    user    [object Object]<br>        id    &quot;5202aeb0296d1e0b1a0eba38&quot;<br>        first_name    &quot;Team&quot;<br>        last_name    &quot;Fashionist&quot;<br>        created_at    &quot;2013-08-07T20:31:44+0000&quot;<br>        updated_at    &quot;2013-09-07T01:59:31+0000&quot;<br>        external_accounts    [object Array]<br>        confirmed_at    &quot;2013-08-07T20:31:44+0000&quot;<br>        username    &quot;fashionist&quot;<br>        admin    &quot;false&quot;<br>        custom_fields    [object Object]<br>    photo    [object Object]    </p>
<p>How can I get the email field of users in the results of Cloud.posts.query?</p>
<p>Thanks!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 8th 2013, 3:13:59 pm">September 8th 2013</span>
				by <span class='authorname'>Monique Barbanson</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>email</span></li>
					
						<li><span class='tagname'>posts</span></li>
					
						<li><span class='tagname'>query</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-268218">
				
						<section>
							<p>Unfortunately that does seem to be supported by the listed fields in the [documentation])http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;cloud&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Posts-method-query).. You may have to query the <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;cloud&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Users-method-query">user</a> object to get at the email address.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 8th 2013, 4:42:52 pm">September 8th 2013</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="question/156941/acs-post-query---querying-against-userid-of-posts-omits-user-email-field-from-results.html#answer-268218" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-268225">
				
						<section>
							<p>Hi Nick,</p>
<p>Thanks for taking a look at my question. However, pls note I&#39;m querying on user_id as per the API you are linking to. This is supported right?<br>Each of post results from the query has a user field (so far so good) but the user object is missing the email field.</p>
<p>Please check the API doc as well as the sample results provided for the acs rest api posts&#x2F;query.json. You&#39;ll see that the posts results include a user field and that user object is supposed to include an email field. The current version of the api code seems to be omitting the email field though. Is this a known bug? Is there an undocumented way to get the full user object to be included in the post result? Thanks for your help!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 8th 2013, 6:43:18 pm">September 8th 2013</span>
								by <span class='authorname'>Monique Barbanson</span><br>
								<a class="icon-bg icon-link" href="question/156941/acs-post-query---querying-against-userid-of-posts-omits-user-email-field-from-results.html#answer-268225" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
