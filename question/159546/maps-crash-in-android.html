<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Maps crash in Android » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Maps crash in Android</h1>
		</header>
		<section>
			<p>Hi to everybody,<br>i have this code:</p>
<pre><code class="hljs"><span class="hljs-built_in">var</span> pin = Titanium<span class="hljs-built_in">.</span><span class="hljs-built_in">Map</span><span class="hljs-built_in">.</span>createAnnotation({
    latitude:<span class="hljs-number">36.830260</span>,<span class="hljs-comment">//33.74511,</span>
    longitude:<span class="hljs-number">11.942233</span>,<span class="hljs-comment">//-84.38993,</span>
    title:<span class="hljs-string">"Sport House"</span>,
    subtitle:<span class="hljs-string">'Sea, Sports, Wear'</span>,
    pincol<span class="hljs-subst">or</span>:Titanium<span class="hljs-built_in">.</span><span class="hljs-built_in">Map</span><span class="hljs-built_in">.</span>ANNOTATION_RED,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">1</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>

});

<span class="hljs-built_in">var</span> <span class="hljs-built_in">map</span> = Ti<span class="hljs-built_in">.</span>UI<span class="hljs-built_in">.</span>createWindow({});
<span class="hljs-built_in">var</span> mapView = Ti<span class="hljs-built_in">.</span><span class="hljs-built_in">Map</span><span class="hljs-built_in">.</span>createView({
    mapType: Titanium<span class="hljs-built_in">.</span><span class="hljs-built_in">Map</span><span class="hljs-built_in">.</span>TERRAIN_TYPE,    
    region: {
        latitude:<span class="hljs-number">36.830260</span>, 
        longitude:<span class="hljs-number">11.942233</span>, 
        latitudeDelta:<span class="hljs-number">0.2</span>, 
        longitudeDelta:<span class="hljs-number">0.2</span>
    },
    animate:<span class="hljs-literal">true</span>,
    regionFit:<span class="hljs-literal">true</span>,
    userLocation:<span class="hljs-literal">true</span>,
    annotations:<span class="hljs-preprocessor">[</span>pin<span class="hljs-preprocessor">]</span><span class="hljs-markup">
});
map.add(mapView);</span>
</code></pre><pre><code class="hljs">mainWindow.<span class="hljs-keyword">close</span>();
<span class="hljs-keyword">map</span>.<span class="hljs-keyword">open</span>();
</code></pre><p>…and when i open map in my device, the app crash!!!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 16th 2013, 10:13:27 am">November 16th 2013</span>
				by <span class='authorname'>Vito Lipari</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>map</span></li>
					
						<li><span class='tagname'>mapview</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>debug your code and post error log for more information.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 16th 2013, 10:15:34 am">November 16th 2013</span>
								by <span class='authorname'>Sanat Mamtora</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>No, you need to show the logs from the device.</p>
<p>These can be obtained using <a href="http:&#x2F;&#x2F;developer.android.com&#x2F;tools&#x2F;debugging&#x2F;ddms.html">ddms or monitor</a>.</p>
<p>You simply posted the build logs.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 16th 2013, 2:29:56 pm">November 16th 2013</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-271381">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>If you are using Titanium Maps in Android then you MUST have already created a map api key for v1.  If not this app will not work.</p>
<p>Chances are you do not have a key for v2 and given Ti.Maps for Android is going to be deprecated you must move to Google Maps for Android v2.</p>
<ul>
<li><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;blog&#x2F;2013&#x2F;03&#x2F;introducing-our-new-google-maps-android-api-v2-module-in-the-appcelerator-marketplace.html">Introducing our new Google Maps Android API v2 Module in the Appcelerator Marketplace</a></li>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Modules.Map">Modules.Map</a></li>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;guide&#x2F;Google_Maps_v2_for_Android">Google Maps v2 for Android</a></li>
</ul>
<p>Even if you have a v1 api key - you should move to v2 as soon as possible, the code is almost identical in use - just need to create a development key and then when you put the app in the store you will need a distribution version one based on your apps keystore.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 16th 2013, 4:55:34 pm">November 16th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/159546/maps-crash-in-android#answer-271381" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for answer, it was very helpful!</p>
<pre><code class="hljs">• I download ti.map.zip 
• i unpacket <span class="hljs-keyword">it</span>
• i <span class="hljs-built_in">put</span> these <span class="hljs-built_in">file</span> ( zip <span class="hljs-built_in">file</span> <span class="hljs-operator">and</span> modules <span class="hljs-built_in">folder</span> ) <span class="hljs-keyword">into</span> root <span class="hljs-built_in">folder</span> <span class="hljs-operator">of</span> <span class="hljs-operator">the</span> project
</code></pre><p>the app is open, but when click on map the app crash!!!</p>
<pre><code class="hljs">• i <span class="hljs-built_in">put</span> <span class="hljs-operator">the</span> <span class="hljs-built_in">files</span> ( zip <span class="hljs-built_in">file</span> <span class="hljs-operator">and</span> modules <span class="hljs-built_in">folder</span> ) <span class="hljs-keyword">into</span> resource <span class="hljs-built_in">folder</span>
</code></pre><p>the app still crash….</p>
<p>what&#39;s wrong?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 16th 2013, 10:26:56 pm">November 16th 2013</span>
											by <span class='authorname'>Vito Lipari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Have you made sure the map module if referenced?</p>
<ul>
<li>In Titanium Studio;</li>
<li>Open <strong>tiapp.xml</strong></li>
<li>Find <strong>modules list</strong> (top right)</li>
<li>Check map appears in this list</li>
<li>If not; press green plus and add it from this list of modules not yet referenced.</li>
<li>It should be yellow if you have installed the module in the correct location</li>
<li>Save</li>
<li>Menu &gt; Project &gt; Clean &gt; Select App &gt; Confirm</li>
<li>Try again</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="November 18th 2013, 1:29:47 pm">November 18th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I don&#39;t understand why the app crash!!!</p>
<p><img src="http:&#x2F;&#x2F;www.liparistudios.com&#x2F;personal&#x2F;Screen-Shot.png &quot;Module&quot;" alt="alt module"></p>
<p>this is the screenshot </p>
<p>http:&#x2F;&#x2F;www.liparistudios.com&#x2F;personal&#x2F;Screen-Shot.png</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 18th 2013, 2:05:42 pm">November 18th 2013</span>
											by <span class='authorname'>Vito Lipari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>this is the <a href="http:&#x2F;&#x2F;www.liparistudios.com&#x2F;personal&#x2F;Screen-Shot.png">screenshot</a> of the module,  it is possible i wrong to put files in the right place?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 19th 2013, 1:03:33 pm">November 19th 2013</span>
											by <span class='authorname'>Vito Lipari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Your screenshot shows a blue icon, these means you are using the system version rather than the downloaded one - otherwise it would be yellow.</p>
<p>Modules should follow this sort of path;</p>
<pre><code class="hljs">{appname}<span class="hljs-regexp">/modules/</span>android<span class="hljs-regexp">/nameofmodule/</span>version<span class="hljs-regexp">/...</span>
</code></pre><p>However if you have the blue icon - that is fine, so do I in a live app that works fine.</p>
<p>Did you update the code to use the new references which would start with;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> MapModule = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ti.map'</span>);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 19th 2013, 2:48:05 pm">November 19th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank you for answer.<br>I moved modules folder in the right <a href="http:&#x2F;&#x2F;liparistudios.com&#x2F;personal&#x2F;Folder.png">place</a> and the icon doesn&#39;t become yellow but it became <a href="http:&#x2F;&#x2F;liparistudios.com&#x2F;personal&#x2F;modules.png">green</a> and the app still crash on map!!!</p>
<p>The links in the text is the screenShot link</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2013, 1:32:41 pm">November 20th 2013</span>
											by <span class='authorname'>Vito Lipari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>• I followed the procedure for getting the api key. </p>
<p>• i put &lt;meta-tag&gt; tag in the right place into tiapp.xml. </p>
<p>• i download the google map module. </p>
<p>• i unzip the file. </p>
<p>• i put the folder modules in &lt;AppFolder&gt;  like <a href="http:&#x2F;&#x2F;liparistudios.com&#x2F;personal&#x2F;Folder.png">this image</a> </p>
<p>• i load the ti.map module from TiApp editor <a href="http:&#x2F;&#x2F;liparistudios.com&#x2F;personal&#x2F;modules.png">screenshot</a> </p>
<p><strong>But when i run the app in my device, when i go to the mapview the app crash!!!!</strong></p>
</p>
										<div class="author">
											&mdash; commented <span title="November 21st 2013, 3:23:42 pm">November 21st 2013</span>
											by <span class='authorname'>Vito Lipari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi, my icon now is YELLOW!!!</p>
<p>I delete the module folder from <em>~&#x2F;Library&#x2F;Application Support&#x2F;Titanium</em>.</p>
<p>But my app when i go to mapView still crash!!! </p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;devlink&#x2F;profile&#x2F;427941&#x2F;malcolm-hollingsworth">Malcom Hollinsworth</a> some ideas????</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 26th 2013, 10:46:36 pm">November 26th 2013</span>
											by <span class='authorname'>Vito Lipari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi i used this terminal comand <strong>sudo &lt;MyAndroidFolder&gt;&#x2F;android-sdk-mac_x86&#x2F;platform-tools&#x2F;adb -d logcat</strong> for logcat and i run the app on my device! </p>
<p>I found this error, maybe my problem is in the code for map???</p>
<p>Error:</p>
<p>E&#x2F;TiApplication( 3737): java.lang.NumberFormatException: Unable to convert null </p>
<p>…</p>
<p>E&#x2F;TiApplication( 3737):     at ti.map.TiUIMapView.processMapProperties(TiUIMapView.java:140) </p>
<p>E&#x2F;TiApplication( 3737):     at ti.map.TiUIMapView.onViewCreated(TiUIMapView.java:107) </p>
<p>…</p>
<p>E&#x2F;AndroidRuntime( 3737): java.lang.NumberFormatException: Unable to convert null </p>
<p>…</p>
<p>E&#x2F;AndroidRuntime( 3737): at <strong>ti.map.TiUIMapView.processMapProperties(TiUIMapView.java:140)</strong> </p>
<p>E&#x2F;AndroidRuntime( 3737): at <strong>ti.map.TiUIMapView.onViewCreated(TiUIMapView.java:107)</strong></p>
</p>
										<div class="author">
											&mdash; commented <span title="November 26th 2013, 11:15:45 pm">November 26th 2013</span>
											by <span class='authorname'>Vito Lipari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Did you find out what the problem was? I am having a similar issue. </p>
<p>Sending event: exception on thread: main msg:java.lang.NumberFormatException: Unable to convert null; Titanium 3.2.0</p>
<p>java.lang.NumberFormatException: Unable to convert null<br>at org.appcelerator.titanium.util.TiConvert.toInt(TiConvert.java:407)<br>at org.appcelerator.kroll.KrollDict.getInt(KrollDict.java:139)<br>at ti.map.TiUIMapView.processMapProperties(TiUIMapView.java:140)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 15th 2014, 9:26:48 pm">January 15th 2014</span>
											by <span class='authorname'>Ash ESM</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Never mind .. in my test on device (2.3.3), it was the maptype that was giving me trouble. I was using STANDARD_TYPE but after changing it to NORMAL_TYPE, it works now. Just thought someone else might get across the same issue. I am not sure why this is. The docs say both should work.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 15th 2014, 9:48:32 pm">January 15th 2014</span>
											by <span class='authorname'>Ash ESM</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-271375">
				
						<section>
							<p>I test my codes directly on my device ( Samnsung S4mini ) and this is the result into the console </p>
<pre><code class="hljs"><span class="hljs-label">Titanium</span> Command-Line Interface, CLI version <span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>, Titanium SDK version <span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">3</span>.GA
<span class="hljs-label">Copyright</span> (c) <span class="hljs-number">2012</span>-<span class="hljs-number">2013</span>, Appcelerator, Inc.  All Rights Reserved.
<span class="hljs-label">Please</span> report <span class="hljs-keyword">bugs </span>to http://jira.appcelerator.org/
[<span class="hljs-preprocessor">INFO</span>] :   Running <span class="hljs-keyword">build </span>process:  python <span class="hljs-string">"/Users/iJim/Library/Application Support/Titanium/mobilesdk/osx/3.1.3.GA/android/builder.py"</span> <span class="hljs-string">"install"</span> <span class="hljs-string">"SportHouse_v2.0"</span> <span class="hljs-string">"/Users/iJim/jobZone/Android/android-sdk-macosx"</span> <span class="hljs-string">"/Users/iJim/jobZone/App/SportHouse_v2.0"</span> <span class="hljs-string">"liparistudios.mobile.sporthouse"</span> <span class="hljs-string">"10"</span>
[<span class="hljs-preprocessor">INFO</span>] logfile = /Users/iJim/jobZone/App/SportHouse_v2.<span class="hljs-number">0</span>/<span class="hljs-keyword">build.log
</span>[<span class="hljs-preprocessor">INFO</span>] Titanium SDK version: <span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">3</span> (<span class="hljs-number">09</span>/<span class="hljs-number">18</span>/<span class="hljs-number">13</span> <span class="hljs-number">12</span>:<span class="hljs-number">00</span> <span class="hljs-number">222</span>f4d1)
[<span class="hljs-preprocessor">INFO</span>] Copying CommonJS modules...
[<span class="hljs-preprocessor">INFO</span>] Copying project resources..
[<span class="hljs-preprocessor">INFO</span>] Compiling Javascript Resources ...
[<span class="hljs-preprocessor">INFO</span>] Compiling <span class="hljs-keyword">Android </span>Resources... This could take some time
[<span class="hljs-preprocessor">INFO</span>] Installing application on device
[<span class="hljs-preprocessor">INFO</span>] Application installed. Launch from drawer on Home Screen
[<span class="hljs-preprocessor">INFO</span>] :   Project <span class="hljs-keyword">built </span>successfully in <span class="hljs-number">50</span>s <span class="hljs-number">336</span>ms
[<span class="hljs-preprocessor">INFO</span>] :   Launching application on device: /Users/iJim/jobZone/<span class="hljs-keyword">Android/android-sdk-macosx/platform-tools/adb </span><span class="hljs-string">"-d"</span> <span class="hljs-string">"shell"</span> <span class="hljs-string">"am"</span> <span class="hljs-string">"start"</span> <span class="hljs-string">"-a"</span> <span class="hljs-string">"android.intent.action.MAIN"</span> <span class="hljs-string">"-c"</span> <span class="hljs-string">"android.intent.category.LAUNCHER"</span> <span class="hljs-string">"-n"</span> <span class="hljs-string">"liparistudios.mobile.sporthouse/.Sporthouse_v20Activity"</span> <span class="hljs-string">"-f"</span> <span class="hljs-string">"0x10200000"</span>
<span class="hljs-label">Starting</span>: Intent { act<span class="hljs-label">=android</span>.intent.action.MAIN cat=[<span class="hljs-keyword">android.intent.category.LAUNCHER] </span>flg<span class="hljs-number">=0x10200000</span> <span class="hljs-keyword">cmp=liparistudios.mobile.sporthouse/.Sporthouse_v20Activity </span>}
[<span class="hljs-preprocessor">INFO</span>] :   App installer shutdown successfully
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 16th 2013, 2:03:13 pm">November 16th 2013</span>
								by <span class='authorname'>Vito Lipari</span><br>
								<a class="icon-bg icon-link" href="question/159546/maps-crash-in-android#answer-271375" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
