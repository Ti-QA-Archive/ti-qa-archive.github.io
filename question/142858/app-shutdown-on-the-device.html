<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>App shutdown on the device » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>App shutdown on the device</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I have a problem. My App shutdown on my device (4S) but not on the simulator and i don&#39;t know why.</p>
<p>So, i have 2 question.</p>
<p>This problem can be a problem of memory ? or it&#39;s because i use Ios6 and i compiled the file with the 5.1 sdk ?</p>
<p>It&#39;s just some data into a TableView that i take from Soundcloud … :(</p>
<p>This is my code … </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> GUI =<span class="hljs-built_in">require</span>(<span class="hljs-string">'music_lib/djGUI'</span>);
<span class="hljs-keyword">var</span> VARS =<span class="hljs-built_in">require</span>(<span class="hljs-string">'common/globals'</span>);
<span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;

<span class="hljs-comment">//######################### COLORS ##################</span>
<span class="hljs-keyword">var</span> textColor=<span class="hljs-string">"white"</span>;
<span class="hljs-keyword">var</span> tableBackgroundColor=<span class="hljs-string">"black"</span>;

<span class="hljs-comment">//######################## SIZES ####################</span>
<span class="hljs-keyword">var</span> rowHeight=<span class="hljs-string">"65dp"</span>;
<span class="hljs-keyword">var</span> imageHeight=<span class="hljs-string">"55dp"</span>;
<span class="hljs-keyword">var</span> imageWidth=<span class="hljs-string">"55dp"</span>;
<span class="hljs-comment">//######################## ANIMATION ####################</span>

<span class="hljs-keyword">var</span> slide_in = Titanium.UI.createAnimation({bottom:<span class="hljs-number">0</span>});
<span class="hljs-keyword">var</span> slide_out = Titanium.UI.createAnimation({bottom:-<span class="hljs-number">252</span>});



<span class="hljs-keyword">var</span> vote_fix = Titanium.App.Properties.getString(<span class="hljs-string">'vote'</span>);
<span class="hljs-keyword">var</span> date_fix = Titanium.App.Properties.getString(<span class="hljs-string">'date'</span>);
Ti.API.info(<span class="hljs-string">'Value of the vote fix'</span> + vote_fix);
<span class="hljs-keyword">var</span> refreshButton=Ti.UI.createButton({
        systemButton:Titanium.UI.iPhone.SystemButton.REFRESH
    })
<span class="hljs-keyword">var</span> voteBtn=Ti.UI.createButton({
    systemButton:Titanium.UI.iPhone.SystemButton.ADD
});
win.setLeftNavButton(refreshButton);
win.setRightNavButton(voteBtn);

<span class="hljs-keyword">var</span> picker_view = Titanium.UI.createView({
    zIndex:<span class="hljs-number">100</span>,
    height:<span class="hljs-number">251</span>,
    width:<span class="hljs-number">320</span>,
    bottom:-<span class="hljs-number">252</span>,
    <span class="hljs-comment">//backgroundColor:'green'</span>
});
win.add(picker_view);
<span class="hljs-comment">//picker_view.hide();</span>



<span class="hljs-keyword">var</span> cancelVote = GUI.myButton({
        conf:{
            height : <span class="hljs-string">"32dp"</span>,
            width : <span class="hljs-string">"100dp"</span>,
        },
        text:L(<span class="hljs-string">'Cancel'</span>)
    });
<span class="hljs-keyword">var</span> VoteVote = GUI.myButton({
        conf:{
            height : <span class="hljs-string">"32dp"</span>,
            width : <span class="hljs-string">"100dp"</span>,
        },
        text:L(<span class="hljs-string">'Vote'</span>)
    });


items2= [GUI.flexSpace,cancelVote,GUI.flexSpace,VoteVote,GUI.flexSpace];

<span class="hljs-keyword">var</span> VoteDetailToolbarVote = Titanium.UI.iOS.createToolbar({
            items : items2,
            top : <span class="hljs-number">0</span>,
            borderTop : <span class="hljs-literal">true</span>,
            borderBottom : <span class="hljs-literal">false</span>,
            translucent : <span class="hljs-literal">true</span>,
            barColor : VARS.barColor,

        });    
<span class="hljs-comment">//VoteDetailToolbar.hide();</span>

picker_view.add(VoteDetailToolbarVote);

<span class="hljs-keyword">var</span> djOneWindow = Ti.UI.createWindow({
       <span class="hljs-comment">//backgroundImage'icn/barnoaflas_natural.jpg',</span>
        backgroundColor : VARS.windowBackgroundColor,
        navBarHidden : <span class="hljs-literal">false</span>,
        barColor : VARS.barColor,
        orientationModes : [Titanium.UI.PORTRAIT],
        url:<span class="hljs-string">'music2.js'</span>
        <span class="hljs-comment">//tabBarHidden:true</span>
});


    <span class="hljs-comment">//################### VIEWS #####################</span>
<span class="hljs-keyword">var</span> DJTableView = Titanium.UI.createTableView({
        backgroundColor : <span class="hljs-string">"#2a2a2a"</span>,
        rowHeight:<span class="hljs-literal">null</span>,
        separatorColor : <span class="hljs-string">"black"</span>,
        width : <span class="hljs-string">'100%'</span>,
        top:<span class="hljs-number">40</span>,
        bottom:<span class="hljs-number">0</span>
    });

<span class="hljs-keyword">var</span> top1TableView = Titanium.UI.createTableView({
        style : Titanium.UI.iPhone.TableViewStyle.GROUPED,
        backgroundColor : <span class="hljs-string">"#1f1f1f"</span>,
        rowHeight:<span class="hljs-literal">null</span>,
        <span class="hljs-comment">//separatorColor : "black",</span>
        width : <span class="hljs-string">'100%'</span>,
        top:<span class="hljs-number">40</span>,
        separatorStyle:<span class="hljs-string">'NONE'</span>
    });
<span class="hljs-keyword">var</span> datadj = [];

<span class="hljs-keyword">var</span> datatop1 = [];
<span class="hljs-keyword">var</span> tb1 = Titanium.UI.iOS.createTabbedBar({
        labels:[<span class="hljs-string">'The DJ N°1 '</span>,<span class="hljs-string">'All DJs in Saigon'</span>],
        backgroundColor:<span class="hljs-string">'#3e3e3c'</span>,
        top:<span class="hljs-number">0</span>,
        style:Titanium.UI.iPhone.SystemButtonStyle.BAR,
        height:<span class="hljs-number">40</span>,
        <span class="hljs-comment">//width:200,</span>
        index:<span class="hljs-number">0</span>
    });
win.add(tb1);
<span class="hljs-keyword">var</span> index = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">var</span> information = [];    
<span class="hljs-keyword">var</span> voteData = [];    
allDJ =<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p</span>)</span>{

    datadj = [];

    <span class="hljs-comment">//Ti.API.info(p);</span>


    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; p.length; j++) {
            <span class="hljs-comment">//Create one row, add to to table, Create album add to rows</span>
            datadj.push(GUI.creteSimpleRow(p[j]));
        }

        <span class="hljs-comment">//Set the data to table</span>
        DJTableView.setData(datadj);        

}




 <span class="hljs-comment">/*test = {
    name:'DJ Konka',
    description:'ijhi ihih hoiho jhi huh ijhih hihu',
    avatar:'http://i1.sndcdn.com/avatars-000019448903-h90xzi-large.jpg?d95e793',
    like:10,
    track:9
};*/</span>


<span class="hljs-comment">//allDJ(test);</span>
<span class="hljs-comment">//top1();</span>
DJlist = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p,e</span>)</span>{

    <span class="hljs-comment">//Ti.API.info('On affiche le Json');</span>
    <span class="hljs-comment">//Ti.API.info(p.length);</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; p.length; j++)
    {e=p[j];
        <span class="hljs-comment">//Ti.API.info(e);</span>

            information[j]={
                        name:e.nom,
                    <span class="hljs-comment">//    description:e.description,</span>
                        avatar:e.avatar,
                        like:e.vote,
                        track:e.track,
                        soundcloud:e.soundcloud,
                        index:j    
                        }
            voteData[j]={
                        name:e.nom,
                    <span class="hljs-comment">//    description:e.description,</span>
                        avatar:e.avatar,
                        like:e.vote,
                        track:e.track,
                        soundcloud:e.soundcloud,
                        index:j    
                        }    
        <span class="hljs-comment">//Ti.API.info(information[j]);</span>
        <span class="hljs-comment">//Ti.API.info(p[j].vote);</span>
    <span class="hljs-comment">//information[j].like=p[j].vote;</span>


    }
    <span class="hljs-comment">//Ti.API.info('Hello ce la fonctionne je crois');</span>

        allDJ(information);


}



searchdj = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) 
    </span>{
        <span class="hljs-keyword">var</span> jsonObject = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
        <span class="hljs-comment">//Ti.API.info(jsonObject);</span>
        DJlist(jsonObject);
    };
    xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) 
    </span>{
    };
    xhr.open(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://www.hcmc-by-night.com/searchdj.php"</span>);

    xhr.send({});
}





DJInformation = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">user,key</span>)</span>{
    <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) 
    </span>{
        <span class="hljs-comment">//alert(this.responseText);</span>
        <span class="hljs-keyword">var</span> jsonObject = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
        <span class="hljs-comment">//Ti.API.info()</span>
        permalink=jsonObject.permalink;
        username=jsonObject.username;
        <span class="hljs-comment">//Ti.API.info(jsonObject)</span>
        <span class="hljs-keyword">if</span>(jsonObject.avatar_url==<span class="hljs-literal">null</span>){
            icon =<span class="hljs-string">'../icon/no-image.gif'</span>;
        }<span class="hljs-keyword">else</span>{
            icon=jsonObject.avatar_url;
        }

        city=jsonObject.city;
        description=jsonObject.description;
        track=jsonObject.track_count;
        id=jsonObject.id;

    <span class="hljs-comment">//    Ti.API.info(image.image);</span>

    <span class="hljs-keyword">var</span> image = Titanium.UI.createImageView({
        image : icon,
        preventDefaultImage : <span class="hljs-literal">true</span>,
        width : <span class="hljs-string">"65dp"</span>,
        height : <span class="hljs-string">"65dp"</span>,
        left : <span class="hljs-string">"15dp"</span>,
        top : <span class="hljs-string">"5dp"</span>,
        borderRadius:<span class="hljs-number">5</span>,
    });

    <span class="hljs-comment">//Title</span>
    <span class="hljs-keyword">var</span> title = Ti.UI.createLabel({
        font:{
            fontSize : <span class="hljs-number">16</span>,
            fontWeight : <span class="hljs-string">'bold'</span>
            },
        color : <span class="hljs-string">"#884DA7"</span>,
        left : <span class="hljs-string">"90dp"</span>,
        top : <span class="hljs-string">"15dp"</span>,
        height : <span class="hljs-string">'25dp'</span>,
        width : <span class="hljs-string">'auto'</span>,
        clickName : title,
        text :username
    });
    <span class="hljs-keyword">var</span> infoAddress=Ti.UI.createLabel({
        font:{
            fontSize : <span class="hljs-number">16</span>
            <span class="hljs-comment">//fontWeight : 'bold'</span>
            },
        color : <span class="hljs-string">"#ffffff"</span>,
        left : <span class="hljs-string">"90dp"</span>,
        top : <span class="hljs-string">'50dp'</span>,
        height : <span class="hljs-string">'auto'</span>,
        <span class="hljs-comment">//width : '1',</span>
        right:<span class="hljs-string">'5dp'</span>,
        clickName : title,
        text :track+<span class="hljs-string">' Tracks'</span>
    });
    <span class="hljs-comment">//Top part of the table</span>
    <span class="hljs-keyword">var</span> topInfo = Ti.UI.createView({
        left : <span class="hljs-string">"15dp"</span>,
        top : <span class="hljs-string">"5dp"</span>,
        height : <span class="hljs-string">"105dp"</span>,
        width : <span class="hljs-string">'auto'</span>
    });


    <span class="hljs-comment">//Add top elements</span>
    topInfo.add(image);
    topInfo.add(title);
    topInfo.add(infoAddress);



    <span class="hljs-comment">//Table view elements</span>
    <span class="hljs-keyword">var</span> topInfoData = [];
    <span class="hljs-keyword">var</span> fullReview = [];

    <span class="hljs-comment">//in iOS - Table setup</span>

    topInfoData[<span class="hljs-number">0</span>] = Ti.UI.createTableViewSection({
            headerView : topInfo
        });

    <span class="hljs-comment">//Adresse + Phone data</span>

    topInfoData[<span class="hljs-number">0</span>].add(Ti.UI.createTableViewRow({
        backgroundColor : <span class="hljs-string">"#1f1f1f"</span>,
        color : <span class="hljs-string">"#ffffff"</span>,
        title : L(<span class="hljs-string">'Description :'</span>),
        selectionStyle:<span class="hljs-string">'NONE'</span>
    }));



    descriptionRow =    Ti.UI.createTableViewRow({
        backgroundColor : <span class="hljs-string">"white"</span>,
        color : <span class="hljs-string">"black"</span>,
        height:<span class="hljs-number">50</span>,
        selectionStyle:<span class="hljs-string">'NONE'</span>
        <span class="hljs-comment">//title :description,    </span>
    });    
    descriptionLabel = Ti.UI.createLabel({
        font:{
            fontSize : <span class="hljs-number">12</span>,
            fontWeight : <span class="hljs-string">'bold'</span>
            },
        color : <span class="hljs-string">"black"</span>,
        left : <span class="hljs-string">"5dp"</span>,
        <span class="hljs-comment">//top : "15dp",</span>
        <span class="hljs-comment">//height : '25dp',</span>
        width : <span class="hljs-string">'auto'</span>,
        clickName : title,
        text:description
    });
    descriptionRow.add(descriptionLabel);
    topInfoData[<span class="hljs-number">0</span>].add(descriptionRow);
<span class="hljs-comment">/*    var descHeaderView = Ti.UI.createView({
        height:"30dp",
    });


    topInfoData[1] = Ti.UI.createTableViewSection({
        headerView : descHeaderView
    });
*/</span>    
    <span class="hljs-comment">/*var descriptionTitle =Ti.UI.createTableViewRow({
        backgroundColor : "#1f1f1f",
        color : "#ffffff",
        title : L('Description :'),
        selectionStyle:'NONE'
    });

    var descriptionRow = Ti.UI.createTableViewRow({
        backgroundColor : "white",
        color : "#ffffff",
        selectionStyle:'NONE'
        //height : 'auto'
    });
    var descriptionLabel = Ti.UI.createLabel({
        text:detail_description+'\n',
        height : 'auto',
        //width : 'auto',
        left : "10dp",
        right : "10dp",
        top :"5dp",
        bottom : "5dp",
        color : "black",
        fontsize: '10dp'
    });

    descriptionRow.add(descriptionLabel);
    topInfoData[1].add(descriptionTitle);
    topInfoData[1].add(descriptionRow);*/</span>

   <span class="hljs-comment">//Create header description</span>
    <span class="hljs-keyword">var</span> descHeaderView = Ti.UI.createView({
        height:<span class="hljs-string">"30dp"</span>,
    });


    topInfoData[<span class="hljs-number">1</span>] = Ti.UI.createTableViewSection({
        headerView : descHeaderView
    });

    <span class="hljs-comment">//Create description row</span>
    topInfoData[<span class="hljs-number">1</span>].add(Ti.UI.createTableViewRow({
        backgroundColor : <span class="hljs-string">"#1f1f1f"</span>,
        color : <span class="hljs-string">"#ffffff"</span>,
        title : L(<span class="hljs-string">'Music :'</span>),
        selectionStyle:<span class="hljs-string">'NONE'</span>
    }));


<span class="hljs-comment">/*    var desc
 * 
 *    http://api.soundcloud.com/users/deejaykonka/tracks.json?consumer_key=apigee
 */</span>




<span class="hljs-keyword">var</span> descHeaderView = Ti.UI.createView({
        height:<span class="hljs-string">"30dp"</span>,
    });


topInfoData[<span class="hljs-number">2</span>] = Ti.UI.createTableViewSection({
        headerView : descHeaderView,
        separatorColor:<span class="hljs-string">'white'</span>
    });

<span class="hljs-keyword">var</span> menuTitleRow = Ti.UI.createTableViewRow({
        backgroundColor : <span class="hljs-string">"#1f1f1f"</span>,
        color : <span class="hljs-string">"#ffffff"</span>,
        height : <span class="hljs-string">'auto'</span>,
        selectionStyle:<span class="hljs-string">'NONE'</span>
    });


<span class="hljs-keyword">var</span> descHeaderView = Ti.UI.createView({
        height:<span class="hljs-string">"60dp"</span>,
    });

topInfoData[<span class="hljs-number">3</span>] = Ti.UI.createTableViewSection({
        headerView : descHeaderView,
        separatorColor:<span class="hljs-string">'white'</span>
    });    


    top1TableView.setData(topInfoData);    

Ti.App.fireEvent(<span class="hljs-string">'TakeMusic'</span>, {name:permalink});

    };
    xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) 
    </span>{
    };
    xhr.open(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://api.soundcloud.com/users/"</span>+user+<span class="hljs-string">".json?consumer_key="</span>+key);
    Ti.API.info(<span class="hljs-string">"http://api.soundcloud.com/users/"</span>+user+<span class="hljs-string">".json?consumer_key="</span>+key);
    xhr.send({});

}


fullInformation = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">user,type,key</span>)</span>{


    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// XHR GET</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) 
    </span>{
        <span class="hljs-comment">//alert(this.responseText);</span>
        <span class="hljs-keyword">var</span> jsonObject = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; jsonObject.length; i++) 
        {
            one_song = jsonObject[i];
       <span class="hljs-comment">//    Ti.API.info('Hello, mais ca marche pas vraiment');</span>
                title=one_song.title;
                desc=one_song.description;
                icon=one_song.artwork_url;
                id=one_song.permalink_url;

                    row =    Ti.UI.createTableViewRow({
                            backgroundColor : <span class="hljs-string">"white"</span>,
                            color : <span class="hljs-string">"black"</span>,
                            <span class="hljs-comment">//title :p[0].description</span>
                        });    

                        <span class="hljs-keyword">var</span> iconTrack = Ti.UI.createImageView({
                            image:icon,
                            height:<span class="hljs-string">'75dp'</span>,
                            width:<span class="hljs-string">'75dp'</span>,
                            left:<span class="hljs-string">'5dp'</span>,
                            top:<span class="hljs-string">'5dp'</span>,
                            borderRadius:<span class="hljs-number">5</span>,

                        });
                       <span class="hljs-keyword">var</span> title = Ti.UI.createLabel({
                                    font:{
                                        fontSize : <span class="hljs-number">14</span>,
                                        fontWeight : <span class="hljs-string">'bold'</span>
                                        },
                                    color : <span class="hljs-string">"#884DA7"</span>,
                                    left : <span class="hljs-string">"90dp"</span>,
                                    top : <span class="hljs-string">"15dp"</span>,
                                    height : <span class="hljs-string">'auto'</span>,
                                    width : <span class="hljs-string">'auto'</span>,
                                    clickName : title,
                                    text : title
                                });

                        <span class="hljs-keyword">var</span> information = Ti.UI.createLabel({
                            text:desc,
                            font:{
                                        fontSize : <span class="hljs-number">10</span>,
                                        fontWeight : <span class="hljs-string">'bold'</span>
                                        },
                            height : <span class="hljs-string">'auto'</span>,
                            <span class="hljs-comment">//width : 'auto',</span>
                            left : <span class="hljs-string">"5dp"</span>,
                            <span class="hljs-comment">//right : "10dp",</span>
                            top :<span class="hljs-string">"90dp"</span>,
                            bottom : <span class="hljs-string">"5dp"</span>,
                            color : <span class="hljs-string">"black"</span>,
                            fontsize: <span class="hljs-string">'10dp'</span>
                        });    
                    <span class="hljs-comment">//var data = id;    </span>
                    row.add(iconTrack);
                    row.add(title);
                    row.add(information);
                    row.id = id;
                    row.titleInfo=one_song.title;
                    row.desc=desc;
                    row.icon=icon;

                top1TableView.insertRowAfter(<span class="hljs-number">2</span>,row,{animationStyle:Titanium.UI.iPhone.RowAnimationStyle.DOWN});

        }
        <span class="hljs-comment">//Ti.API.info(jsonObject);</span>

        <span class="hljs-comment">//Ti.API.info('HEllo man =');</span>


    };
    xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) 
    </span>{
    };
    xhr.open(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://api.soundcloud.com/users/"</span>+user+<span class="hljs-string">"/"</span>+type+<span class="hljs-string">".json?consumer_key="</span>+key);
    Ti.API.info(<span class="hljs-string">"http://api.soundcloud.com/users/"</span>+user+<span class="hljs-string">"/"</span>+type+<span class="hljs-string">".json?consumer_key="</span>+key);
    xhr.send({});


}

affichage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) 
    </span>{
        Ti.API.info(<span class="hljs-string">'Welcoem everybody'</span>);
        <span class="hljs-comment">//alert(this.responseText);</span>
        <span class="hljs-keyword">var</span> jsonObject = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
        jsonObject= jsonObject[<span class="hljs-number">0</span>];
            DJInformation(jsonObject.soundcloud,<span class="hljs-string">'apigee'</span>);
            searchdj();
    };
    xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) 
    </span>{
    };
    xhr.open(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://www.hcmc-by-night.com/numero1.php"</span>);
<span class="hljs-comment">//    Ti.API.info("http://api.soundcloud.com/users/"+user+"/"+type+".json?consumer_key="+key);</span>
    xhr.send({});

};

voter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p</span>)</span>{

    <span class="hljs-keyword">var</span> picker = Ti.UI.createPicker({
        top:<span class="hljs-number">44</span>
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRow</span>(<span class="hljs-params">p</span>)
    </span>{
        <span class="hljs-comment">//Ti.API.info(p);</span>
        <span class="hljs-keyword">var</span> row = Ti.UI.createPickerRow();
        <span class="hljs-keyword">var</span> voteView = Ti.UI.createView({
            height:<span class="hljs-number">40</span>,
            width:<span class="hljs-number">320</span>,
        });

        <span class="hljs-keyword">var</span> img = Ti.UI.createImageView({image:p.avatar,width:<span class="hljs-number">40</span>,height:<span class="hljs-number">40</span>,left:<span class="hljs-number">15</span>});
        <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
            text:p.name,
            width:<span class="hljs-number">230</span>,
            height:<span class="hljs-number">40</span>,
            left: <span class="hljs-number">75</span>
        });
        <span class="hljs-keyword">var</span> like = Ti.UI.createLabel({
            text:p.like +<span class="hljs-string">' likes'</span>,
            width:<span class="hljs-number">100</span>,
            height:<span class="hljs-number">40</span>,
            right:<span class="hljs-number">0</span>,
            color:<span class="hljs-string">'purple'</span>
        });
        voteView.add(img);
        voteView.add(label);
        voteView.add(like);
        row.soundcloud=p.soundcloud;
        row.add(voteView);
        picker.add(row);

    }

    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;p.length;c++)
    {
        addRow(p[c]);
    }

    <span class="hljs-comment">// turn on the selection indicator (off by default)</span>
    picker.selectionIndicator = <span class="hljs-literal">true</span>;
    picker_view.add(picker);
    picker_view.show();

    VoteVote.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{
        sendVote = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p,e</span>)</span>{
                Ti.API.info(p + <span class="hljs-string">' '</span>+ e);

                Titanium.App.Properties.setString(<span class="hljs-string">'vote'</span>,p);
                <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
                xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

                }
                <span class="hljs-keyword">var</span> params = {
                           vote:p,
                           last:e
                        };
                     <span class="hljs-comment">//   Ti.API.info(params);</span>
                xhr.open(<span class="hljs-string">'POST'</span>,<span class="hljs-string">'http://www.hcmc-by-night.com/checkvote.php'</span>);
                xhr.send(params);
        };


        <span class="hljs-comment">//Ti.API.info('Tu viens de voter mec ');</span>
        <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
        <span class="hljs-keyword">var</span> datestr = date.getDate()+<span class="hljs-string">'/'</span>+date.getMonth()+<span class="hljs-string">'/'</span>+date.getFullYear();

        <span class="hljs-keyword">if</span>(date_fix == datestr){
            alert(<span class="hljs-string">'Tomorrow, you will be able to change your vote'</span>);
        }<span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">if</span>(vote_fix==<span class="hljs-literal">null</span> || vote_fix==<span class="hljs-string">''</span>){
            Titanium.App.Properties.setString(<span class="hljs-string">'date'</span>,datestr);
            sendVote(picker.getSelectedRow(<span class="hljs-number">0</span>).soundcloud,vote_fix);
            alert(<span class="hljs-string">'One like for: '</span> +picker.getSelectedRow(<span class="hljs-number">0</span>).soundcloud);
            }<span class="hljs-keyword">else</span>{
                sendVote(picker.getSelectedRow(<span class="hljs-number">0</span>).soundcloud,vote_fix);
                Titanium.App.Properties.setString(<span class="hljs-string">'date'</span>,datestr);
                alert(<span class="hljs-string">'Now, you changed your vote for: '</span>+picker.getSelectedRow(<span class="hljs-number">0</span>).soundcloud);
            }
        }





        picker_view.animate(slide_out);

        <span class="hljs-comment">//label.text = "row index: "+e.rowIndex+", column index: "+e.columnIndex;</span>


        Ti.API.info(<span class="hljs-string">'Date fix: '</span> + date_fix);
        Ti.API.info(<span class="hljs-string">'L autre: '</span>+datestr);

    });


    cancelVote.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

        picker_view.animate(slide_out);

    });
        <span class="hljs-comment">/*
    picker.addEventListener('change',function(e)
    {
        Ti.API.info(picker.getSelectedRow(0).soundcloud);
        //label.text = "row index: "+e.rowIndex+", column index: "+e.columnIndex;
    });
        //searchdj2();
        //w.add(DJTableView2);
    */</span>    
};


<span class="hljs-comment">/*
DJInformation('deejaykonka','apigee');
searchdj();
*/</span>
Ti.App.addEventListener(<span class="hljs-string">'TakeMusic'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) 
</span>{ 
     fullInformation(data.name,<span class="hljs-string">'tracks'</span>,<span class="hljs-string">'apigee'</span>);
});
affichage();



win.add(DJTableView);
win.add(top1TableView);
tb1.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">0</span>){
        DJTableView.hide();
        top1TableView.show();
        index=<span class="hljs-literal">false</span>;
        picker_view.hide();
    }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">1</span>){
        DJTableView.show();
        top1TableView.hide();
        index = <span class="hljs-literal">true</span>;
        picker_view.show();

    }
});
<span class="hljs-keyword">if</span>(index == <span class="hljs-literal">true</span>){
    DJTableView.hide();
    picker_view.hide();
    index=<span class="hljs-literal">false</span>;
}

top1TableView.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
<span class="hljs-comment">//    Ti.API.info(e.index);</span>
    <span class="hljs-keyword">if</span>(e.index==<span class="hljs-number">1</span>){
    <span class="hljs-comment">//    Ti.API.info(e.row.height);</span>
        <span class="hljs-keyword">if</span>(e.row.height==<span class="hljs-number">50</span>)
        {
            e.row.height =<span class="hljs-string">'auto'</span>;
        }<span class="hljs-keyword">else</span>{
            e.row.height =<span class="hljs-number">50</span>;
        }
    }
    <span class="hljs-keyword">if</span>(e.rowData.id){
        Ti.API.info(e.rowData.id);
        songId = e.rowData.id;
        songTitle = e.rowData.titleInfo;

        <span class="hljs-keyword">if</span>(VARS._platform != VARS._android) {
            <span class="hljs-keyword">var</span> webview = Titanium.UI.createWebView({
                url : songId
            });
            <span class="hljs-keyword">var</span> webWin = Titanium.UI.createWindow({
                title : songTitle,
                backgroundColor : <span class="hljs-string">'#2e2e2e'</span>,
                tabBarHidden : <span class="hljs-literal">false</span>,
                navBarHidden : <span class="hljs-literal">false</span>,
                barColor : <span class="hljs-string">'#3e3e3c'</span>,
            });
            webWin.add(webview);
            Ti.Gesture.addEventListener(<span class="hljs-string">'orientationchange'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

                webWin.orientationModes = [Titanium.UI.LANDSCAPE_LEFT, Titanium.UI.LANDSCAPE_RIGHT, Titanium.UI.PORTRAIT, Titanium.UI.UPSIDE_PORTRAIT];
                <span class="hljs-keyword">if</span>(e.orientation == Titanium.UI.LANDSCAPE_LEFT || e.orientation == Titanium.UI.LANDSCAPE_RIGHT) {
                    <span class="hljs-comment">// Do anything you wanna do when user changes the orientation to LandScape</span>
                    webWin.orientation = Titanium.UI.LANDSCAPE_RIGHT;

                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// Revert the changes you made, the user is back to portrait mode</span>
                    webWin.orientation = Titanium.UI.PORTRAIT;

                }
            });

            <span class="hljs-comment">//webWin.hideTabBar();</span>
            Ti.UI.currentTab.open(webWin);
        } <span class="hljs-keyword">else</span> {
            Ti.Platform.openURL(songId);
        }
    }
});

refreshButton.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{
        Ti.API.info(<span class="hljs-string">'Hello'</span>);
        affichage();


    });

voteBtn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{
        Ti.API.info(<span class="hljs-string">'Hello'</span>);
        voter(voteData);

        picker_view.animate(slide_in);

    });


DJTableView.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    id=e.rowData.soundcloud;
    name=e.rowData.name;
    djOneWindow.title=name;
    Ti.API.info(<span class="hljs-string">'id: '</span>+id);
    djOneWindow.id=id;
    djOneWindow.name=name;
    Ti.UI.currentTab.open(djOneWindow);
});
</code></pre><p>Ok ok, i code like a pork</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 29th 2012, 8:32:59 am">September 29th 2012</span>
				by <span class='authorname'>Rebmann Guillaume</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>device</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>memory</span></li>
					
						<li><span class='tagname'>simulator</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-248406">
				
						<section>
							<p>Please check your data retrieving code, any extra declarations and non usage variables of components can make app shutdown on device, i had the same issue and finally i optimized my code by removing any non used variables and UI components from the code and it ran.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 1st 2012, 11:59:41 am">October 1st 2012</span>
								by <span class='authorname'>Jibran Khan</span><br>
								<a class="icon-bg icon-link" href="../../question/142858/app-shutdown-on-the-device.html#answer-248406" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-248565">
				
						<section>
							<p>Hi, Titanium has just released update 2.1.3 with iOS 6 support so try updating to 2.1.3 and check your iOS 6 compatibility. without iOS6 proper compatibility app won&#39;t work on device.<br>you can check the device log as well and try running the X-Code build project using X-Code to find more appropriate cause.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 3rd 2012, 4:04:20 pm">October 3rd 2012</span>
								by <span class='authorname'>Ashish Nigam</span><br>
								<a class="icon-bg icon-link" href="../../question/142858/app-shutdown-on-the-device.html#answer-248565" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
