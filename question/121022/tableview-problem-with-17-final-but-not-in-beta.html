<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>TableView problem with 1.7 final but not in beta » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>TableView problem with 1.7 final but not in beta</h1>
		</header>
		<section>
			<p>Trying to work with final 1.7 (gotta submit today) but get that new error: </p>
<pre><code class="hljs">Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid <span class="hljs-operator"><span class="hljs-keyword">update</span>: invalid <span class="hljs-built_in">number</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">section</span> <span class="hljs-number">0.</span>  The <span class="hljs-built_in">number</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">rows</span> contained <span class="hljs-keyword">in</span> an existing <span class="hljs-keyword">section</span> <span class="hljs-keyword">after</span> the <span class="hljs-keyword">update</span> (<span class="hljs-number">0</span>) must be equal <span class="hljs-keyword">to</span> the <span class="hljs-built_in">number</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">rows</span> contained <span class="hljs-keyword">in</span> that <span class="hljs-keyword">section</span> <span class="hljs-keyword">before</span> the <span class="hljs-keyword">update</span> (<span class="hljs-number">0</span>), plus <span class="hljs-keyword">or</span> <span class="hljs-keyword">minus</span> the <span class="hljs-built_in">number</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">rows</span> inserted <span class="hljs-keyword">or</span> deleted <span class="hljs-keyword">from</span> that <span class="hljs-keyword">section</span> (<span class="hljs-number">1</span> inserted, <span class="hljs-number">0</span> deleted).<span class="hljs-string">'</span></span>
</code></pre><p>There was no probem with Tableview with 1.7 beta.</p>
<p>Any solution?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 14th 2011, 12:06:43 pm">June 14th 2011</span>
				by <span class='authorname'>Jean-Philippe Boily</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>1.7</span></li>
					
						<li><span class='tagname'>1.7.0</span></li>
					
						<li><span class='tagname'>error</span></li>
					
						<li><span class='tagname'>sdk</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>7</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>7 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-211634">
				
						<section>
							<p>I had the same problem on android and weird error returns java.lang.ClassCastException: ti.modules.titanium.ui.LabelProxy.</p>
<p>Anyway I solved the problem by not using same className for rows even when they use same styling. Just make them use a diff className regardless if they use same style or not.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 28th 2011, 2:54:59 pm">June 28th 2011</span>
								by <span class='authorname'>Rey Bumalay</span><br>
								<a class="icon-bg icon-link" href="question/121022/tableview-problem-with-17-final-but-not-in-beta#answer-211634" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Rey, nice catch. Are you recommending adding a random number for each time it&#39;s looped &amp; modified (or some form of unique on the end)?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 28th 2011, 2:59:49 pm">June 28th 2011</span>
											by <span class='authorname'>Jim Carter III</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I find that a &#39;name&#39; + row count number will suffice.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 28th 2011, 3:02:33 pm">June 28th 2011</span>
											by <span class='authorname'>Kosso</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The docs says that we can use same className for rows with similar styling although I think it doesn&#39;t work on 1.7.0 or 1.7.1.</p>
<p>So I&#39;m using a unique id or identifier for my rows but i think incrementing every iteration is also okay.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 28th 2011, 3:03:27 pm">June 28th 2011</span>
											by <span class='authorname'>Rey Bumalay</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It seems like a different problem. I tried the code snippet from Bastian Sackermann just below, crashes even if we specify className or anything I tried in fact….</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 28th 2011, 5:01:49 pm">June 28th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-210190">
				
						<section>
							<p>You&#39;ll need to provide a sample of the code you&#39;re using to create your table.  The error message alone isn&#39;t enough for anyone to help you.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 14th 2011, 12:28:16 pm">June 14th 2011</span>
								by <span class='authorname'>Kosso</span><br>
								<a class="icon-bg icon-link" href="question/121022/tableview-problem-with-17-final-but-not-in-beta#answer-210190" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I don&#39;t know which tableview gives this error and doesn&#39;t have much time for now to investigate. This was working fine with 1.7 beta which is why I posted that here hoping someone else have the same problem. Reverting to beta for now.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 14th 2011, 12:35:07 pm">June 14th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-210622">
				
						<section>
							<p>Same here. Random crashes with 1.7, runs with 1.6.2</p>
<p>Snipp</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Titanium.UI.currentWindow;

<span class="hljs-keyword">var</span> <span class="hljs-keyword">table</span> = Titanium.UI.createTableView();

<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> cars = 0; cars &lt; 200; cars +=1 )
{
    <span class="hljs-keyword">table</span>.appendRow(Titanium.UI.createTableViewRow({
        title:'Row ' + cars,
    }));

}

<span class="hljs-keyword">win</span>.add(<span class="hljs-keyword">table</span>);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 17th 2011, 3:26:51 pm">June 17th 2011</span>
								by <span class='authorname'>Bastian Sackermann</span><br>
								<a class="icon-bg icon-link" href="question/121022/tableview-problem-with-17-final-but-not-in-beta#answer-210622" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>If you ever find a solution, please post it here! :). I tried the latest build on CI without luck.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 17th 2011, 6:03:54 pm">June 17th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Bastian: do you have latest Mac OS, TiStudio, TiSDK? What language is your Mac OS? Anything special that could explain that it crashes and not on Appcelerator&#39;s computers?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 1:02:01 pm">July 7th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Mhh, I&#39;m on the latest Snow Leopard, TiStudio and while German is my native language, my Mac is in German…</p>
<p>Unfortunaly I can&#39;t reproduce the error, because I switched back to 1.6.1 to integrate TiBar.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2011, 4:30:19 am">July 8th 2011</span>
											by <span class='authorname'>Bastian Sackermann</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211458">
				
						<section>
							<p>Same, my app has similar logic where on first load all is fine but when i allow the user to do a refresh it tanks.  Tried on 1.7.0 and 1.7.1</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 26th 2011, 11:22:12 pm">June 26th 2011</span>
								by <span class='authorname'>Jim Carter III</span><br>
								<a class="icon-bg icon-link" href="question/121022/tableview-problem-with-17-final-but-not-in-beta#answer-211458" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211886">
				
						<section>
							<p>Filled a bug report here: http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC-117</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 30th 2011, 4:12:19 pm">June 30th 2011</span>
								by <span class='authorname'>Jean-Philippe Boily</span><br>
								<a class="icon-bg icon-link" href="question/121022/tableview-problem-with-17-final-but-not-in-beta#answer-211886" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I can&#39;t reproduce this error. Tested with SDK 1.7.1 (and 1.7.0 beta) on iOS simulator and Android device (Droid original running 2.2.2).</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 12:24:05 pm">July 7th 2011</span>
											by <span class='authorname'>Tim Poulsen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Pretty weird…I have latest Mac OS, XCode, TiStudio, TiSDK, all that on a MBP. Only thing I could see, which would not make sense, is that my Mac OS is in french.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 1:01:05 pm">July 7th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I removed Ti Studio and resintalled it but still crashes</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 5:09:47 pm">July 7th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Tim: might have something to do with locale? Bastian (two posts up there) that had the same problem seems to have a german Mac OS…</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2011, 10:02:01 am">July 8th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>doubt it&#39;s a locale issue.  I&#39;m in America and it happens for me also.  going to try and post a code snip shortly.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2011, 1:59:59 pm">July 8th 2011</span>
											by <span class='authorname'>Jim Carter III</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Downgraded from Xcode 4 to 3, still doesn&#39;t work</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2011, 6:09:05 pm">July 8th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-212915">
				
						<section>
							<p>To all those having issues… paste JUST the following code in app.js and NOTHING else, clean the project and build… if it crashes, please paste the entire console log to pastebin or something and link it back here for me to review. I have tested this code with 1.7, 1.7.1 and 1.8ci</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Titanium.UI.createWindow();

<span class="hljs-keyword">var</span> <span class="hljs-keyword">table</span> = Titanium.UI.createTableView();

<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> cars = 0; cars &lt; 200; cars +=1 )
{
    <span class="hljs-keyword">table</span>.appendRow(Titanium.UI.createTableViewRow({
        title:'Row ' + cars,
    }));

}

<span class="hljs-keyword">win</span>.add(<span class="hljs-keyword">table</span>);

<span class="hljs-keyword">win</span>.<span class="hljs-keyword">open</span>();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 12th 2011, 2:06:22 pm">July 12th 2011</span>
								by <span class='authorname'>Matt Apperson</span><br>
								<a class="icon-bg icon-link" href="question/121022/tableview-problem-with-17-final-but-not-in-beta#answer-212915" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Stack:</p>
<p>[INFO] One moment, building …<br>[DEBUG] Detecting modules in &#x2F;Users&#x2F;macbook_pro_jpb&#x2F;ti_studio_workspace&#x2F;1.7.1 tableview crashing test&#x2F;modules<br>[DEBUG] Detecting modules in &#x2F;Library&#x2F;Application Support&#x2F;Titanium&#x2F;modules<br>[INFO] Titanium SDK version: 1.7.1<br>[INFO] iPhone Device family: iphone<br>[INFO] iPhone SDK version: 4.3<br>[INFO] iPhone simulated device: iphone<br>[DEBUG] executing command: &#x2F;usr&#x2F;bin&#x2F;killall iPhone Simulator<br>[DEBUG] No matching processes belonging to you were found<br>[DEBUG] finding old log files<br>[DEBUG] executing command: mdfind -onlyin &#x2F;Users&#x2F;macbook_pro_jpb&#x2F;Library&#x2F;Application Support&#x2F;iPhone Simulator&#x2F;4.3 -name c6d53480-64db-497b-94a4-8c1d47791b9c.log<br>[DEBUG] &#x2F;Users&#x2F;macbook_pro_jpb&#x2F;Library&#x2F;Application Support&#x2F;iPhone Simulator&#x2F;4.3&#x2F;Applications&#x2F;1B36CE69-5F94-4C30-856B-8EE638BA02AF&#x2F;Documents&#x2F;c6d53480-64db-497b-94a4-8c1d47791b9c.log<br>[DEBUG] removing old log file: &#x2F;Users&#x2F;macbook_pro_jpb&#x2F;Library&#x2F;Application Support&#x2F;iPhone Simulator&#x2F;4.3&#x2F;Applications&#x2F;1B36CE69-5F94-4C30-856B-8EE638BA02AF&#x2F;Documents&#x2F;c6d53480-64db-497b-94a4-8c1d47791b9c.log<br>[INFO] Launching application in Simulator<br>[INFO] Launched application in Simulator (1.96 seconds)<br>[DEBUG] executing command: xcodebuild -version<br>[DEBUG] Xcode 3.2.6<br>[DEBUG] Component versions: DevToolsCore-1809.0; DevToolsSupport-1806.0<br>[DEBUG] BuildVersion: 10M2518<br>[INFO] Found 4.3.2 patch installed<br>[DEBUG] App Spec: &lt;DTiPhoneSimulatorApplicationSpecifier 0x100303c30&gt; specified by path &#x2F;Users&#x2F;macbook_pro_jpb&#x2F;ti_studio_workspace&#x2F;1.7.1 tableview crashing test&#x2F;build&#x2F;iphone&#x2F;build&#x2F;Debug-iphonesimulator&#x2F;1.7.1 tableview crashing test.app<br>[DEBUG] SDK Root: &lt;DTiPhoneSimulatorSystemRoot 0x100302040&gt; path=&#x2F;Developer&#x2F;Platforms&#x2F;iPhoneSimulator.platform&#x2F;Developer&#x2F;SDKs&#x2F;iPhoneSimulator4.3.sdk version=4.3 name=Simulator - iOS 4.3<br>[DEBUG] using device family iphone<br>[DEBUG] Session started<br>[DEBUG] Session did end with error Error Domain=DTiPhoneSimulatorErrorDomain Code=1 UserInfo=0x10011dbc0 &quot;L’application simulée s’est fermée.&quot;<br>[INFO] Application has exited from Simulator</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2011, 4:37:10 pm">July 12th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><a href="https:&#x2F;&#x2F;gist.github.com&#x2F;1078638">Gist here, sorry…</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2011, 4:38:39 pm">July 12th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That said, if in Ti Studio, I set log level to trace, it seems to work…pretty weird!</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2011, 4:39:10 pm">July 12th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>what OS and what Studio version do you have running?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2011, 4:56:25 pm">July 12th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Mac OS Snow Leopard(french), latest with all patches. Ti Studio, latest. Tested with Ti SDK 1.7.1 final. Works like a charm with 1.7 beta but not with 1.7 final. I am still working with beta SDK which is less than ideal…</p>
<p>I uninstalled Studio last week as my version was an upgrade from beta, but still have the same problem.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2011, 4:59:10 pm">July 12th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi,<br>I am also interested with this topic, because I am also facing (from time to time) some crash due to a tableView.setData()…</p>
<p>I posted a question here :  <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;122480&#x2F;tableview-setdata-crash-unhandled-exception">Link to Q&amp;A</a></p>
<p>But I think it is a bug, since it is not the first one I see and encounter since the upgrade from 1.6.2 to 1.7.0 or 1.7.1…</p>
<p>Therefore I am really interested by the solutions and answers of this topic !</p>
<p>Did someone try the className proposition from Rey ??</p>
<p>Thanks for your help !</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 14th 2011, 10:48:11 am">July 14th 2011</span>
											by <span class='authorname'>abbdoul ab</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-213403">
				
						<section>
							<p>I think that the problem is when you need to refresh the table and you use table.setData([]); I think that this command is async mode, so you need to wait until this command will finish to clean the table and then append the rows, so I used setTimeout command with 200 milliseconds and now the is&#39;t crashing</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 17th 2011, 5:07:33 pm">July 17th 2011</span>
								by <span class='authorname'>Eyal Gaon</span><br>
								<a class="icon-bg icon-link" href="question/121022/tableview-problem-with-17-final-but-not-in-beta#answer-213403" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>It isn&#39;t the problem here as I do not use table.setData but only appendRow…</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 18th 2011, 12:37:37 pm">July 18th 2011</span>
											by <span class='authorname'>Jean-Philippe Boily</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
