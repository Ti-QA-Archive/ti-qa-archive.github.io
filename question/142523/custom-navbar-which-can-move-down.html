<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>custom navbar which can move down » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>custom navbar which can move down</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>i want a custom navbar (with 3 buttons) which can move down to show more information : https:&#x2F;&#x2F;dl.dropbox.com&#x2F;u&#x2F;84505667&#x2F;bar.png<br>i hide the default navbar and used a view within i put right button, another button in the middle but how can i put the back button like the default back button ?</p>
<p>my second question i how to move down the bar to display album information like you see in this image :<br>https:&#x2F;&#x2F;dl.dropbox.com&#x2F;u&#x2F;84505667&#x2F;bar2.png</p>
<p>thanks for help.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 21st 2012, 1:51:04 pm">September 21st 2012</span>
				by <span class='authorname'>Djamel ZAHAL</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>navbar</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-247755">
				
						<section>
							<p>All that looks like is a window that is pushed up above the screen. Create a window and position it so that only the bottom of the window is visible. The buttons you&#39;ll have to handle yourself. ie: back will make the window close, etc. To make the view move down, just animate the position of the window so that all the information is visible. </p>
<p>Whatever you do, don&#39;t try to use a navbar to make that happen, it looks like a custom window component, so you&#39;ll have to build it out piece by piece.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 21st 2012, 1:59:44 pm">September 21st 2012</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/142523/custom-navbar-which-can-move-down#answer-247755" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i dont understand you very well.<br>you say that i will have two windows. one is visible and the other not ?</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 3:37:28 pm">September 21st 2012</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes. Its just like placing one view over another and moving the front view up and down over the back view to display it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 3:57:22 pm">September 21st 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Aaron may be right, but its hard to tell from the screenshots. Regardless, this is how I would do it</p>
<p>All you have to do is click on the &#39;Info&#39; label at the top to show&#x2F;hide the window.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
    backgroundColor:<span class="hljs-string">'#dfdfdf'</span>,
    title:<span class="hljs-string">'Main Win'</span>,
    navBarHidden:<span class="hljs-literal">false</span>
});

<span class="hljs-keyword">var</span> lbl = Ti.UI.createLabel({
    text:<span class="hljs-string">'Background Window'</span>
});
win.add(lbl);

<span class="hljs-comment">// create the info window so that only the bottom is visible.</span>
<span class="hljs-keyword">var</span> infowin = Ti.UI.createWindow({
    backgroundColor:<span class="hljs-string">'#000'</span>,
    height:<span class="hljs-number">480</span>,
    bottom:<span class="hljs-number">436</span>
});
<span class="hljs-comment">// Add a label/button/image/etc to the bottom of the visible view.</span>
<span class="hljs-keyword">var</span> infolbl = Ti.UI.createLabel({
    text:<span class="hljs-string">'Info'</span>,
    color:<span class="hljs-string">'#fff'</span>,
    bottom:<span class="hljs-number">0</span>
});
<span class="hljs-comment">// When the label is clicked, animate the view to display.</span>
<span class="hljs-keyword">var</span> isShowing = <span class="hljs-literal">false</span>;
infolbl.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span> (isShowing) {
        infowin.animate({
            bottom:<span class="hljs-number">436</span>
        });
        isShowing = <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> {
        infowin.animate({
            bottom:<span class="hljs-number">80</span>
        });
        isShowing = <span class="hljs-literal">true</span>;
    }
});

<span class="hljs-keyword">var</span> infotxt = Ti.UI.createLabel({
    text:<span class="hljs-string">'This is more information about the background window. Click "Info" again to hide.'</span>,
    color:<span class="hljs-string">'#fff'</span>
});
infowin.add(infotxt);
infowin.add(infolbl);

<span class="hljs-comment">// wait until the main window is open before opening the info window. </span>
<span class="hljs-comment">// this will allow you to populate the window with the required info.</span>
win.addEventListener(<span class="hljs-string">'open'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ 
    infowin.open();
});

win.open();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 4:27:12 pm">September 21st 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i like, this is going to be an easier approach than tracking location from dragEvent</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 5:00:20 pm">September 21st 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thank you..</p>
<p>i want to move the window down..</p>
<p>have you an example to move down the window ?</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 5:31:00 pm">September 21st 2012</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The code example I just gave you does move the window down. It does exactly what you&#39;ve described and shown in the other app. Paste the code into a new project and run it. You click on the info label and the window moves down.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 5:33:18 pm">September 21st 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247789">
				
						<section>
							<p>no, there is one very long window.</p>
<p>when you initially display the window, you position the window such that the fake navigation bar is at the top of the viewable area.</p>
<p>as the user drags the navigation bar, you adjust the top value of the window to display more content</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 21st 2012, 3:57:38 pm">September 21st 2012</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/142523/custom-navbar-which-can-move-down#answer-247789" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>do you advise me to use touchstart and touchend to move the view ?</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 4:18:18 pm">September 21st 2012</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>yeah i would give that a try… BUT  FYI i have never done anything exactly like what you are trying</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 4:59:19 pm">September 21st 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>very long window ?<br>in the example above. i see two windows created.<br>but how implement the back button if it is not in the first window opened before ?</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 8:53:30 pm">September 21st 2012</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Aaron posted that he thought it was a very long window, I posted that I thought it was 2 windows. The code above has two windows as that is how I would implement it. YOU have to implement the rest. To implement a back button, just create a button that closes the windows that you need to close. Now I&#39;ve given you more than enough to get started on this. Neither Aaron or myself is going to write the code for you. The only way to get this going is to WRITE SOME CODE and FIGURE IT OUT. If you have a problem with your code, you can always post a question with some specific code that you&#39;re having problems with.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 9:17:54 pm">September 21st 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@anthony Amen</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 9:37:12 pm">September 21st 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanks for you response…</p>
<p>i wrote this code but i have a lot of bugs (or what behavior i expected).</p>
<pre><code class="hljs">exports.createWindow = function(idAlbum, parentWindow){

    var start, end;
    var viewInfosAlbum = Ti.UI.createView({
        <span class="hljs-variable">height</span>: <span class="hljs-number">431</span>,
        top: -<span class="hljs-number">391</span>,
        backgroundColor: <span class="hljs-string">'gray'</span>,
        zIndex: <span class="hljs-number">1</span>
    });

    var hided = <span class="hljs-keyword">true</span>

    var container = Ti.UI.createView({
        layout: <span class="hljs-string">'vertical'</span>
    });

    var nameLabel = Ti.UI.createLabel({ 
        font: {fontSize: <span class="hljs-number">11</span>},
        <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
        left: <span class="hljs-number">10</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>
    });

    var contenuAlbumContainer = Ti.UI.createView({
        left: <span class="hljs-number">10</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>,
        layout: <span class="hljs-string">'horizontal'</span>
    });

    var albumContentBold = Ti.UI.createLabel({
        <span class="hljs-built_in">text</span>: <span class="hljs-string">'contenu de l album:'</span>, 
        font: {fontSize: <span class="hljs-number">11</span>},
        <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
        left: <span class="hljs-number">0</span>
    });

    var albumContent = Ti.UI.createLabel({
        <span class="hljs-built_in">text</span>: <span class="hljs-string">'120 photos | 0 vidéos'</span>, 
        font: {fontSize: <span class="hljs-number">11</span>},
        <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
        left: <span class="hljs-number">0</span>
    });

    contenuAlbumContainer.<span class="hljs-built_in">add</span>(albumContentBold);
    contenuAlbumContainer.<span class="hljs-built_in">add</span>(albumContent);

    var dateContainer = Ti.UI.createView({
        left: <span class="hljs-number">10</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>,
        layout: <span class="hljs-string">'horizontal'</span>
    });

    var dateTitle = Ti.UI.createLabel({
        <span class="hljs-built_in">text</span>: <span class="hljs-string">'Date(s):'</span>, 
        font: {fontSize: <span class="hljs-number">11</span>},
        <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
        left: <span class="hljs-number">0</span>
    });

    var createdAtLabel = Ti.UI.createLabel({
        font: {fontSize: <span class="hljs-number">11</span>},
        <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
        left: <span class="hljs-number">0</span>
    });

    dateContainer.<span class="hljs-built_in">add</span>(dateTitle);
    dateContainer.<span class="hljs-built_in">add</span>(createdAtLabel);

    var descriptionTitle = Ti.UI.createLabel({
        <span class="hljs-built_in">text</span>: <span class="hljs-string">'Description:'</span>, 
        font: {fontSize: <span class="hljs-number">11</span>},
        <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
        left: <span class="hljs-number">10</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>
    });

    var descriptionScrollView = Ti.UI.createScrollView({
        left: <span class="hljs-number">10</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">191</span>,
        contentHeight: <span class="hljs-string">'auto'</span>
    });


    var descriptionLabel = Ti.UI.createLabel({
        font: {fontSize: <span class="hljs-number">11</span>},
        <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
        left: <span class="hljs-number">0</span>,
        top: <span class="hljs-number">10</span>
    });

    descriptionScrollView.<span class="hljs-built_in">add</span>(descriptionLabel);

    var operationContainer = Ti.UI.createView({
        <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>,
        layout: <span class="hljs-string">'horizontal'</span>
    });

    var deleteButton = Ti.UI.createButton({
        title:<span class="hljs-string">'Delete'</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">15</span>,
        backgroundColor: <span class="hljs-string">'red'</span>,
        <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>
    });

    var downloadButton = Ti.UI.createButton({
        title:<span class="hljs-string">'Download'</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">15</span>,
        backgroundColor: <span class="hljs-string">'black'</span>,
        <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>
    });

    operationContainer.<span class="hljs-built_in">add</span>(deleteButton);
    operationContainer.<span class="hljs-built_in">add</span>(downloadButton);

    var navBarContainer = Ti.UI.createView({
        <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>,
        bottom: <span class="hljs-number">0</span>
    });

    var backButton = Ti.UI.createButton({
        title:<span class="hljs-string">'Back'</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">20</span>,
        left: <span class="hljs-number">10</span>
    });

    backButton.addEventListener(<span class="hljs-string">'click'</span>, function(e){
        parentWindow.close();
    });

    var moveImage = Ti.UI.createImageView({
        backgroundColor: <span class="hljs-string">'red'</span>,
        <span class="hljs-variable">width</span>: <span class="hljs-number">15</span>, <span class="hljs-variable">height</span>: <span class="hljs-number">15</span>,
        bottom: <span class="hljs-number">0</span>
    });

    var shareButton = Ti.UI.createButton({
        title:<span class="hljs-string">'Share'</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">20</span>,
        right: <span class="hljs-number">10</span>
    });

    navBarContainer.<span class="hljs-built_in">add</span>(backButton);
    navBarContainer.<span class="hljs-built_in">add</span>(moveImage);
    navBarContainer.<span class="hljs-built_in">add</span>(shareButton);

    moveImage.addEventListener(<span class="hljs-string">'touchstart'</span>, function(e){
        start = (e.y + <span class="hljs-number">215</span>) + viewInfosAlbum.animatedCenter.y - viewInfosAlbum.<span class="hljs-variable">height</span>;
        Ti.API.info(<span class="hljs-string">'start : '</span> + start);
    });

    moveImage.addEventListener(<span class="hljs-string">"touchmove"</span>, function(e) {
        var newY = (e.y + <span class="hljs-number">215</span>) + viewInfosAlbum.animatedCenter.y - viewInfosAlbum.<span class="hljs-variable">height</span>;
        <span class="hljs-comment">//var newY = viewInfosAlbum.top + e.y;</span>
        Ti.API.info(<span class="hljs-string">'Y : '</span> + e.y);
        Ti.API.info(<span class="hljs-string">'Animated center : '</span> + viewInfosAlbum.animatedCenter.y);
        Ti.API.info(<span class="hljs-string">'newY : '</span> + newY);
        <span class="hljs-keyword">if</span>(newY &gt; -<span class="hljs-number">371</span> &amp;&amp; newY &lt; -<span class="hljs-number">49</span>){
            viewInfosAlbum.animate({top:newY, duration:<span class="hljs-number">1</span>});
        }
    });

    moveImage.addEventListener(<span class="hljs-string">'touchend'</span>, function(e){
        end = (e.y + <span class="hljs-number">215</span>) + viewInfosAlbum.animatedCenter.y - viewInfosAlbum.<span class="hljs-variable">height</span>;
        Ti.API.info(<span class="hljs-string">'end : '</span> + end);
        <span class="hljs-keyword">if</span>(hided){
            <span class="hljs-keyword">if</span>(end - start &gt; <span class="hljs-number">60</span>){
                viewInfosAlbum.animate({top:<span class="hljs-number">0</span>, duration:<span class="hljs-number">1000</span>});
                hided = <span class="hljs-keyword">false</span>;
            }
        }
        <span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">if</span>(start - end &gt; <span class="hljs-number">60</span>){
                viewInfosAlbum.animate({top:-<span class="hljs-number">391</span>, duration:<span class="hljs-number">1000</span>});
                hided = <span class="hljs-keyword">true</span>;
            }
        }
    });

    container.<span class="hljs-built_in">add</span>(nameLabel);
    container.<span class="hljs-built_in">add</span>(contenuAlbumContainer);
    container.<span class="hljs-built_in">add</span>(dateContainer);
    container.<span class="hljs-built_in">add</span>(descriptionTitle);
    container.<span class="hljs-built_in">add</span>(descriptionScrollView);
    container.<span class="hljs-built_in">add</span>(operationContainer);
    container.<span class="hljs-built_in">add</span>(navBarContainer);

    viewInfosAlbum.<span class="hljs-built_in">add</span>(container);

    getInfosAlbum(idAlbum, nameLabel, descriptionLabel, createdAtLabel);

    <span class="hljs-keyword">return</span> viewInfosAlbum;
};

function getInfosAlbum(idAlbum, nameLabel, descriptionLabel, createdAtLabel){
    require(<span class="hljs-string">'BusinessLogic/getInfosAlbum'</span>).getInfosAlbum(
        idAlbum,
        function update(album){
            nameLabel.<span class="hljs-built_in">text</span> = album.name;
            descriptionLabl.<span class="hljs-built_in">text</span> = album.description;
            <span class="hljs-comment">//sizeLabel.text = album.sizeLabel;</span>
            createdAtLabel.<span class="hljs-built_in">text</span> = album.createdAt;
        },
        function error(msg){

        }
    );
}
</code></pre><p>my problems are in touchestart, touchend and touchemove..</p>
<p>first, it works (aproximatively) but im note sure im using best practices or the good method.<br>can you test this code please ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 23rd 2012, 11:18:44 am">September 23rd 2012</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This code seems to work fine. Everything looks fine. Seems to me this is exactly what you were trying to accomplish.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 23rd 2012, 2:45:36 pm">September 23rd 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
