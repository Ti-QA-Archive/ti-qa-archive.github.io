<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android orientation problem with 1.8.0.1 » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android orientation problem with 1.8.0.1</h1>
		</header>
		<section>
			<p>Hi, Guys! Please I need your help. To exemplify my question I created a new Titanium default project and defined orientation mode for both windows to portrait, as the following code:</p>
<pre><code class="hljs"><span class="hljs-comment">// this sets the background color of the master UIView (when there are no windows/tab groups on it)</span>
Titanium.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);

<span class="hljs-comment">// create tab group</span>
var tabGroup = Titanium.UI.createTabGroup();

<span class="hljs-comment">//</span>
<span class="hljs-comment">// create base UI tab and root window</span>
<span class="hljs-comment">//</span>
var win1 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 1'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});

<span class="hljs-comment">// Orientation locked</span>
win1.orientationModes = [Ti.UI.PORTRAIT];

var tab1 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_views.png'</span>,
    title:<span class="hljs-string">'Tab 1'</span>,
    window:win1
});

var label1 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 1'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win1.<span class="hljs-built_in">add</span>(label1);

<span class="hljs-comment">//</span>
<span class="hljs-comment">// create controls tab and root window</span>
<span class="hljs-comment">//</span>
var win2 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 2'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});

<span class="hljs-comment">// Orientation locked</span>
win2.orientationModes = [Ti.UI.PORTRAIT];

var tab2 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_ui.png'</span>,
    title:<span class="hljs-string">'Tab 2'</span>,
    window:win2
});

var label2 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 2'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win2.<span class="hljs-built_in">add</span>(label2);



<span class="hljs-comment">//</span>
<span class="hljs-comment">//  add tabs</span>
<span class="hljs-comment">//</span>
tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  


<span class="hljs-comment">// open tab group</span>
tabGroup.<span class="hljs-built_in">open</span>();
</code></pre><p>If I compile using 1.7.0 Mobile SDK version, the app works fine, ie, tabGroup in portrait mode locked as expected (and that&#39;s what I want). If I compile the same project with 1.8.0.1, the app run in any orientation mode (and that&#39;s what I don&#39;t want). This situations seems associated with tabs because if I use a single window (without tab) and setting this portrait mode the app works fine with both of SDK versions.</p>
<p>I tested with Android simulator 3.0 and devices with Android 2.2.</p>
<p>Please, how can I solve this?</p>
<p>Thanks in advance.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 24th 2012, 7:28:33 am">January 24th 2012</span>
				by <span class='authorname'>Jose Luna</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>1.8.0.1</span></li>
					
						<li><span class='tagname'>orientation</span></li>
					
						<li><span class='tagname'>tabgroup</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-228355">
				
						<section>
							<p>well, i dont know why ur code is not working on 1.8.0 , but u can try to do changes in android menifet.xml</p>
<pre><code class="hljs">&lt;activity 
    android:<span class="hljs-property">name</span>=<span class="hljs-string">".MyActivity"</span> 
    android:screenOrientation=<span class="hljs-string">"portrait"</span>
  /&gt;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 24th 2012, 7:40:58 am">January 24th 2012</span>
								by <span class='authorname'>Gagan Tiwari</span><br>
								<a class="icon-bg icon-link" href="question/131092/android-orientation-problem-with-1801#answer-228355" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Gagan, but I think that this will modify the behavior of whole app and I need that just win1 and win2 to be locked in portrait mode.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 24th 2012, 8:27:49 am">January 24th 2012</span>
											by <span class='authorname'>Jose Luna</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228372">
				
						<section>
							<p>To lock orientation on Adrnoid use this snippet:</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (Ti.Platform.osname == <span class="hljs-string">'android'</span>){
    Ti.Gesture.addEventListener(<span class="hljs-string">'orientationchange'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        Ti.Android.currentActivity.setRequestedOrientation(Ti.Android.SCREEN_ORIENTATION_PORTRAIT);
    });
}
</code></pre><p>Now you only need to determine in which window you are and add this event listener on opening window and remove on closing window, if you want to work only in one window.</p>
<p>Or check for some global variable state (to force or not to force) orientation</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 24th 2012, 9:53:58 am">January 24th 2012</span>
								by <span class='authorname'>Arturs Sosins</span><br>
								<a class="icon-bg icon-link" href="question/131092/android-orientation-problem-with-1801#answer-228372" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Arturs, thanks for your help but unfortunately didn&#39;t work. It&#39;s seems a bug because although the initial state of the Android emulator 3.0 is in landscape by default, the line <code>Ti.API.info(&amp;quot;Initial orientation mode: &amp;quot; + Titanium.Gesture.orientation);</code> in code bellow returns 2 (portrait).</p>
<pre><code class="hljs"><span class="hljs-comment">// this sets the background color of the master UIView (when there are no windows/tab groups on it)</span>
Titanium.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);

<span class="hljs-comment">// </span>
Ti.API.info(<span class="hljs-string">"Initial orientation mode: "</span> + Titanium.Gesture.orientation);

<span class="hljs-comment">// create tab group</span>
var tabGroup = Titanium.UI.createTabGroup();

<span class="hljs-comment">//</span>
<span class="hljs-comment">// create base UI tab and root window</span>
<span class="hljs-comment">//</span>
var win1 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 1'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});

<span class="hljs-comment">// Orientation locked</span>
win1.orientationModes = [Ti.UI.PORTRAIT];

var tab1 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_views.png'</span>,
    title:<span class="hljs-string">'Tab 1'</span>,
    window:win1
});

var label1 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 1'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win1.<span class="hljs-built_in">add</span>(label1);

<span class="hljs-comment">//</span>
<span class="hljs-comment">// create controls tab and root window</span>
<span class="hljs-comment">//</span>
var win2 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 2'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});

<span class="hljs-comment">// Orientation locked</span>
win2.orientationModes = [Ti.UI.PORTRAIT];

var tab2 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_ui.png'</span>,
    title:<span class="hljs-string">'Tab 2'</span>,
    window:win2
});

var label2 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 2'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win2.<span class="hljs-built_in">add</span>(label2);

<span class="hljs-comment">//</span>
<span class="hljs-comment">//  add tabs</span>
<span class="hljs-comment">//</span>
tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  


<span class="hljs-comment">// open tab group</span>
tabGroup.<span class="hljs-built_in">open</span>();
</code></pre><p><a href="http:&#x2F;&#x2F;img687.imageshack.us&#x2F;img687&#x2F;2254&#x2F;capturaqh.png">See the app picture</a></p>
<p>Any idea? Any way, thank you!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 24th 2012, 7:51:45 pm">January 24th 2012</span>
											by <span class='authorname'>Jose Luna</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
