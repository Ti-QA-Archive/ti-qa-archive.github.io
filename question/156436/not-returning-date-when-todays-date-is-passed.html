<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Not returning date when today&#39;s date is passed Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Not returning date when today&#39;s date is passed</h1>
		</header>
		<section>
			<p>Running Windows, Android</p>
<p>Have the FFox SQL Manager, when I execute the below Qurey in that tool, it returns proper data</p>
<p>select m.type, m.details, m.date, m.time from meals m where m.date = &#39;2013-08-26&#39; order by m.displayorder asc</p>
<p>Run my app which returns that exact string above and have app execute, fail returns yesterdays data. I dont get it. I understand you have to use locatltime, but why would it work when ran in the tool vs app? and how do you pass localtime, when you passing the date directly?, dosent make sense. Help!</p>
<p>var sqlString = &#39;select m.type, m.details, m.date, m.time from meals m where m.date = &quot;&#39; + getDate(&quot;sql&quot;) + &#39;&quot; order by m.displayorder asc&#39;;</p>
<p>getDate(&quot;sql&quot;) is my function and returns 2013-08-26</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 27th 2013, 12:24:15 am">August 27th 2013</span>
				by <span class='authorname'>Brett Moyer</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>date</span></li>
					
						<li><span class='tagname'>datetime</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
				</ul>
			

			<section>
				<h5>6 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hello Brett Moyer, </p>
<p>Can you post some runnable code for testing? </p>
<p>Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 27th 2013, 1:17:53 am">August 27th 2013</span>
								by <span class='authorname'>Md. Mostafizur Rahman</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>well here is the db pieces, side effect now after I uninstalled the App on my device now when I try to run again it fails, says table doesn&#39;t exist. Nuts.</p>
<p>app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> mydb = Ti.Database.install(<span class="hljs-string">'/database/healthyhabits.sqlite'</span>, <span class="hljs-string">'healthyhabitsv1'</span>); <span class="hljs-comment">//sqlite</span>
mydb.<span class="hljs-built_in">close</span>();
</code></pre><p>mealhome.js</p>
<pre><code class="hljs">var mydb = Ti.Database.open('healthyhabitsv1');
//var sqlString = '<span class="hljs-operator"><span class="hljs-keyword">select</span> <span class="hljs-keyword">m</span>.<span class="hljs-keyword">type</span>, <span class="hljs-keyword">m</span>.details, <span class="hljs-keyword">m</span>.<span class="hljs-built_in">date</span>, <span class="hljs-keyword">m</span>.<span class="hljs-keyword">time</span> <span class="hljs-keyword">from</span> meals <span class="hljs-keyword">m</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">m</span>.<span class="hljs-built_in">date</span> = <span class="hljs-string">"' + getDate("</span><span class="hljs-keyword">sql</span><span class="hljs-string">") + '"</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">m</span>.displayorder <span class="hljs-keyword">asc</span><span class="hljs-string">';
var sqlString = "select m.type, m.details, m.date, m.time from meals m where m.date = '</span><span class="hljs-number">2013</span>-<span class="hljs-number">08</span>-<span class="hljs-number">26</span><span class="hljs-string">' order by m.displayorder asc;";
    alert(sqlString);
var mealsRS = mydb.execute(sqlString);</span></span>
</code></pre><p>Thanks for help</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 27th 2013, 1:21:17 am">August 27th 2013</span>
								by <span class='authorname'>Brett Moyer</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>make clean and then install again</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 27th 2013, 1:53:15 am">August 27th 2013</span>
								by <span class='authorname'>Jayesh  Joshi</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I assume by make clean you mean do a clean build in Studio? Also delete and purge all instances from Device? tried that, I am deleting the db now from Studio and adding it back in.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 27th 2013, 11:11:45 am">August 27th 2013</span>
								by <span class='authorname'>Brett Moyer</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>ok nothing works it hates me. Very strange. any ideas would be helpful. My next step is to create a new project and &quot;start&quot; over, but that seems extreme. This all resulted from not getting the SQL to return proper data when a date was included. You would think adding data via FFox would update it to the device. hmmmm.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 27th 2013, 11:19:37 am">August 27th 2013</span>
								by <span class='authorname'>Brett Moyer</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Ok got the DB sorted, but the Date is still an issue. Any Takers?</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 27th 2013, 7:42:49 pm">August 27th 2013</span>
								by <span class='authorname'>Brett Moyer</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-267766">
				
						<section>
							<p>So no one has any ideas on why executing the below in SQL Manager returns proper data, but executing from app, the exact same Query returns prior day?</p>
<pre><code class="hljs"><span class="hljs-operator"><span class="hljs-keyword">select</span> <span class="hljs-keyword">m</span>.<span class="hljs-keyword">type</span>, <span class="hljs-keyword">m</span>.details, <span class="hljs-keyword">m</span>.<span class="hljs-built_in">date</span>, <span class="hljs-keyword">m</span>.<span class="hljs-keyword">time</span> <span class="hljs-keyword">from</span> meals <span class="hljs-keyword">m</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">m</span>.<span class="hljs-built_in">date</span> = <span class="hljs-string">'2013-08-26'</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">m</span>.displayorder <span class="hljs-keyword">asc</span></span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 28th 2013, 6:12:35 am">August 28th 2013</span>
								by <span class='authorname'>Brett Moyer</span><br>
								<a class="icon-bg icon-link" href="question/156436/not-returning-date-when-todays-date-is-passed.html#answer-267766" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>RESOLVED!, a friend of mine noticed that my DB Install is AFTER that require Stmt, therefore the db was installed after the SQL Select call executed. what a nightmare.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 28th 2013, 1:48:35 pm">August 28th 2013</span>
											by <span class='authorname'>Brett Moyer</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
