<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Encryption/Password Protection of SQLite Database » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Encryption/Password Protection of SQLite Database</h1>
		</header>
		<section>
			<p>Is there a way to encrypt a SQLite database in Titanium Mobile yet?  </p>
<p>In the app I&#39;m building, most of the value is from the structure and content of the database.  I&#39;d like to keep people from having easy access to it.  I realize no encryption or password protection is 100% secure from a determined person, but encryption (something like SQLCipher) would help deter those who aren&#39;t hell-bent on cracking it.</p>
<p>I&#39;ve heard vague references here and there about the possibility of adding this functionality in somewhere in the bowels of the Titanium sdk, but I can&#39;t seem to find any advice or starting points.  Any ideas?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 3rd 2011, 7:29:47 pm">February 3rd 2011</span>
				by <span class='authorname'>Mike Lester</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>encrypt</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-191771">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Mike, AFAIK support for this has only been mentioned on an outdated <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;doc&#x2F;mobile&#x2F;roadmap&#x2F;">roadmap</a> but I can&#39;t find references to it actually being scheduled for a near term implementation.  So in terms of a starting point, my advice is:</p>
<ul>
<li>Learn about coding <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;guides&#x2F;en&#x2F;module_ios.html">ios</a> and <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;guides&#x2F;en&#x2F;module_android.html">android</a> extensions</li>
<li>Clone the titanium <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile">mobile</a> database class as a starting point</li>
<li>Link in a copy of the sqlite db engine which supports encryption</li>
</ul>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 3rd 2011, 9:03:30 pm">February 3rd 2011</span>
								by <span class='authorname'>Doug Handy</span><br>
								<a class="icon-bg icon-link" href="question/108471/encryptionpassword-protection-of-sqlite-database#answer-191771" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Just did a web search on SQLCipher, and you have the right idea.  In fact, you may not need to tweak the Ti.Database source code much beyond the headers and include files, then add the proper frameworks etc as described in the module coding guides I linked.  I&#39;m out of time right now, so I&#39;ll leave the rest as an exercise for the reader.  :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2011, 9:17:10 pm">February 3rd 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Doug:  Thanks! This looks like exactly what I need to do, but I&#39;m having trouble understanding what titanium&#39;s &quot;database class&quot; is actually comprised on.  I can see a bunch of .m and .h files in the Classes subdir, but I can&#39;t tell for sure what I need to base a new extension on.  Any thoughts?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2011, 11:46:38 pm">February 3rd 2011</span>
											by <span class='authorname'>Mike Lester</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve not done a module based on the database class (yet, but you are piquing my interest…).  Based on a casual glance at the iphone source, it looks like you would want to clone the four files beginning TiDatabase…, plus everything in the PlausibleDatabase folder.</p>
<p>When you clone them, give them new names, say SqlCipher…. instead of TiDatabase… or whatever.  The reason you want to do that is to keep your module upgrade safe when new SDKs are released.  If you modify TiDatabase… directly, you would need to merge your changes each time you installed a new SDK.  By making your own module with a different name, you can more easily to things like test the <a href="http:&#x2F;&#x2F;guides.appcelerator.com&#x2F;en&#x2F;continuous_builds.html">continuous builds</a>.  You&#39;d still want to periodically do a source compare&#x2F;merge with the new database class to pick up on any fixes or features they added.  But if your class worked fine for your purposes, you&#39;d be upgrade safe.</p>
<p>Giving complete instructions for creating a new class derived from an existing titanium class is beyond the scope of the Q&amp;A facility.  But hopefully I am giving you a direction to follow so you can hit the ground running.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 1:53:29 am">February 4th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-191751">
				
						<section>
							<p>Mike</p>
<p>Your best bet is to use a password salt, which you can learn about <a href="http:&#x2F;&#x2F;pbeblog.wordpress.com&#x2F;2008&#x2F;02&#x2F;12&#x2F;secure-hashes-in-php-using-salt&#x2F;">here</a> and <a href="http:&#x2F;&#x2F;www.ryantetek.com&#x2F;2009&#x2F;11&#x2F;how-to-create-a-better-and-more-secure-password-hashing-function-in-php&#x2F;">here</a>. Both of these resources apply the technique in the context of PHP, but they also explain the theory behind it. It&#39;s a general approach, so you should be able to adapt it easily.</p>
<p>It looks like someone has used password salts for a javascript application <a href="http:&#x2F;&#x2F;dailyjs.com&#x2F;2010&#x2F;12&#x2F;06&#x2F;node-tutorial-5&#x2F;">here</a>, but I cannot say whether they have done a good job (it was just the first salt-related javascript tutorial that google returned). ;)</p>
<p>In case none of the above articles mention it, you can also randomize the salt for each username&#x2F;password. Store this unique salt either in the same database table row as the username or, possibly even better, store it in a secondary table and link them with a foreign key. It&#39;s up to you and your requirements.</p>
<p>Be aware that these techiques can be easily brute forced, especially as they are stored locally to the user (the database could simply be transferred to a more powerful machine and hacked&#x2F;processed in a fraction of the time).</p>
<p>If security is important to you, put the authentication mechanism on a remote server and programme your app to send its password to it over SSL (https).</p>
<p>Hope this helps</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 3rd 2011, 8:26:15 pm">February 3rd 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/108471/encryptionpassword-protection-of-sqlite-database#answer-191751" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Btw, you could use <code>md5HexDigest()</code> from <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.Utils-module">Ti.Utils</a> to create the hash.</p>
<p>You will notice that <code>base64encode()</code> is also available, but this can be easily reversed with <code>base64decode()</code>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2011, 8:32:07 pm">February 3rd 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Paul, md5 isn&#39;t an option here because he is not looking to encrypt the entire sqlite db.  So it must be reversible, plus can&#39;t be just a hash type value.  Encrypted SQL databases are mentioned on the appcelerator <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;doc&#x2F;mobile&#x2F;roadmap&#x2F;">roadmap</a> but that link is dated (talks about goals for July 2010) and I can&#39;t find any tickets in lighthouse as even a pending&#x2F;future feature.</p>
<p>There are versions of the sqlite engine which support encryption, but I think to implement it now would require cloning the Ti.Database module, linking in your own copy of the encrypted sqlite db engine, then using that module instead of the stock database class.  Obviously, this would need to be done for both iphone and android separately if you needed to support both platforms.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2011, 8:57:00 pm">February 3rd 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oops, meant to say he IS looking to encrypt the entire db… mea culpa … need to learn to proof read!</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2011, 9:07:02 pm">February 3rd 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ah, thanks for setting me straight, Doug :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2011, 10:00:36 pm">February 3rd 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I am also very interested in an implementation of SQLCipher for iOS and Android. I would pay good money for that module. It seems that we could still try to do some obfuscation. Although I have never done it and don&#39;t know how to do it. Any tips?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 13th 2011, 7:50:57 am">November 13th 2011</span>
											by <span class='authorname'>Leonardo Amigoni</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
