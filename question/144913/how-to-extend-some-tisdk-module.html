<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>How to extend some TiSDK module? » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>How to extend some TiSDK module?</h1>
		</header>
		<section>
			<p>Hello.</p>
<p>I&#39;m trying to extend &quot;MediaModule&quot; that&#39;s implemented in the SDK. I added JAR file to build path (titanium-media.jar) and I imported &quot;import ti.modules.titanium.media.MediaModule;&quot; in the module:</p>
<pre><code class="hljs"><span class="hljs-keyword">import</span> ti.modules.titanium.media.<span class="hljs-type">MediaModule</span>;

<span class="hljs-annotation">@Kroll</span>.module(name=<span class="hljs-string">"Testmodule"</span>, id=<span class="hljs-string">"com.iskugor.test_module"</span>)
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestmoduleModule</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">MediaModule</span></span>
</code></pre><p>Eclipse does not report any error at this time, so I assume configuration went fine.</p>
<p>The problem occurs when I try to build module. Here is error log:</p>
<pre><code class="hljs">ndk.build:
     [copy] <span class="hljs-type">Copying</span> <span class="hljs-number">1</span> file to /<span class="hljs-type">Users</span>/iskugor/<span class="hljs-type">Documents</span>/<span class="hljs-type">TipsyAndTumbler</span>/<span class="hljs-type">TestModule</span>/build/generated
     [copy] <span class="hljs-type">Copying</span> <span class="hljs-number">1</span> file to /<span class="hljs-type">Users</span>/iskugor/<span class="hljs-type">Documents</span>/<span class="hljs-type">TipsyAndTumbler</span>/<span class="hljs-type">TestModule</span>/build/generated/jni
    [mkdir] <span class="hljs-type">Created</span> dir: /<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/testmodule-generated
     [copy] <span class="hljs-type">Copying</span> <span class="hljs-number">11</span> files to /<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/testmodule-generated
     [exec] jni/<span class="hljs-type">Android</span>.mk:<span class="hljs-number">24</span>: warning: overriding commands <span class="hljs-keyword">for</span> target `/<span class="hljs-keyword">private</span>/<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/tesCompile++ thumb  : com.iskugor.test_module &lt;= com.iskugor.test_module.<span class="hljs-type">TestmoduleModule</span>.cpp
     [exec] tmodule-generated/<span class="hljs-type">KrollGeneratedBindings</span>.cpp'
     [exec] jni/<span class="hljs-type">Android</span>.mk:<span class="hljs-number">24</span>: warning: ignoring old commands <span class="hljs-keyword">for</span> target `/<span class="hljs-keyword">private</span>/<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/testmodule-generated/<span class="hljs-type">KrollGeneratedBindings</span>.cpp'
     [exec] jni/<span class="hljs-type">Android</span>.mk:<span class="hljs-number">27</span>: warning: overriding commands <span class="hljs-keyword">for</span> target `/<span class="hljs-keyword">private</span>/<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/testmodule-generated/<span class="hljs-type">BootstrapJS</span>.cpp'
     [exec] jni/<span class="hljs-type">Android</span>.mk:<span class="hljs-number">27</span>: warning: ignoring old commands <span class="hljs-keyword">for</span> target `/<span class="hljs-keyword">private</span>/<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/testmodule-generated/<span class="hljs-type">BootstrapJS</span>.cpp'
     [exec] jni/<span class="hljs-type">Android</span>.mk:<span class="hljs-number">24</span>: warning: overriding commands <span class="hljs-keyword">for</span> target `/<span class="hljs-keyword">private</span>/<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/testmodule-generated/<span class="hljs-type">KrollGeneratedBindings</span>.cpp'
     [exec] jni/<span class="hljs-type">Android</span>.mk:<span class="hljs-number">24</span>: warning: ignoring old commands <span class="hljs-keyword">for</span> target `/<span class="hljs-keyword">private</span>/<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/testmodule-generated/<span class="hljs-type">KrollGeneratedBindings</span>.cpp'
     [exec] jni/<span class="hljs-type">Android</span>.mk:<span class="hljs-number">27</span>: warning: overriding commands <span class="hljs-keyword">for</span> target `/<span class="hljs-keyword">private</span>/<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/testmodule-generated/<span class="hljs-type">BootstrapJS</span>.cpp'
     [exec] jni/<span class="hljs-type">Android</span>.mk:<span class="hljs-number">27</span>: warning: ignoring old commands <span class="hljs-keyword">for</span> target `/<span class="hljs-keyword">private</span>/<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span>/iskugor/testmodule-generated/<span class="hljs-type">BootstrapJS</span>.cpp'
     [exec] jni/com.iskugor.test_module.<span class="hljs-type">TestmoduleModule</span>.cpp: <span class="hljs-type">In</span> static member function <span class="hljs-symbol">'static</span> void com::iskugor::test_module::<span class="hljs-type">TestmoduleModule</span>::dispose()':
     [exec] jni/com.iskugor.test_module.<span class="hljs-type">TestmoduleModule</span>.cpp:<span class="hljs-number">64</span>: error: <span class="hljs-symbol">'MediaModul</span>e' has not been declared
     [exec] jni/com.iskugor.test_module.<span class="hljs-type">TestmoduleModule</span>.cpp: <span class="hljs-type">In</span> static member function <span class="hljs-symbol">'static</span> v8::<span class="hljs-type">Handle</span>&lt;v8::<span class="hljs-type">FunctionTemplate</span>&gt; com::iskugor::test_module::<span class="hljs-type">TestmoduleModule</span>::getProxyTemplate()':
     [exec] jni/com.iskugor.test_module.<span class="hljs-type">TestmoduleModule</span>.cpp:<span class="hljs-number">82</span>: error: <span class="hljs-symbol">'MediaModul</span>e' has not been declared
     [exec] make: *** [/<span class="hljs-keyword">var</span>/folders/_g/<span class="hljs-number">00</span>v1d_k93sz385dbllxp7xbm0000gn/<span class="hljs-type">T</span><span class="hljs-comment">//iskugor/testmodule-generated/obj/local/armeabi/objs/com.iskugor.test_module/com.iskugor.test_module.TestmoduleModule.o] Error 1</span>

<span class="hljs-type">BUILD</span> <span class="hljs-type">FAILED</span>
/<span class="hljs-type">Users</span>/iskugor/<span class="hljs-type">Library</span>/<span class="hljs-type">Application</span> <span class="hljs-type">Support</span>/<span class="hljs-type">Titanium</span>/mobilesdk/osx/<span class="hljs-number">2.1</span><span class="hljs-number">.3</span>.<span class="hljs-type">GA</span>/module/android/build.xml:<span class="hljs-number">362</span>: <span class="hljs-type">The</span> following error occurred <span class="hljs-keyword">while</span> executing <span class="hljs-keyword">this</span> line:
/<span class="hljs-type">Users</span>/iskugor/<span class="hljs-type">Library</span>/<span class="hljs-type">Application</span> <span class="hljs-type">Support</span>/<span class="hljs-type">Titanium</span>/mobilesdk/osx/<span class="hljs-number">2.1</span><span class="hljs-number">.3</span>.<span class="hljs-type">GA</span>/module/android/build.xml:<span class="hljs-number">317</span>: exec returned: <span class="hljs-number">2</span>
</code></pre><p>Generated &quot;TestmoduleModule.cpp&quot; is the following (I&#39;ll leave irrelevant parts):</p>
<pre><code class="hljs"><span class="hljs-attribute">...</span>
<span class="hljs-variable">#include</span> <span class="hljs-string">"ti.modules.titanium.media.MediaModule.h"</span>

<span class="hljs-attribute">...</span>


<span class="hljs-literal">void</span> TestmoduleModule<span class="hljs-tag">::dispose</span>()
{
    LOGD(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">"dispose()"</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-subst">!</span>proxyTemplate<span class="hljs-built_in">.</span>IsEmpty()) {
        proxyTemplate<span class="hljs-built_in">.</span>Dispose();
        proxyTemplate = Persistent&lt;FunctionTemplate&gt;();
    }

    MediaModule<span class="hljs-tag">::dispose</span>();
}
</code></pre><p>So … I assume that &quot;ti.modules.titanium.media.MediaModule.h&quot; is not included properly.</p>
<p>Do anyone has any clue why is this happening and how to solve this issue?</p>
<p>Thanks.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 20th 2012, 4:58:06 pm">November 20th 2012</span>
				by <span class='authorname'>Ivan Škugor</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>module</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>It sounds like a &quot;high level&quot; dependency issue in regards with error code returned at the stack trace: </p>
<pre><code class="hljs">C:<span class="hljs-command">\Users</span><span class="hljs-command">\tester</span><span class="hljs-command">\AppData</span><span class="hljs-command">\Roaming</span><span class="hljs-command">\Titanium</span><span class="hljs-command">\mobilesdk</span><span class="hljs-command">\win</span>32\2.1.2.v20120824144611<span class="hljs-command">\module</span><span class="hljs-command">\android</span><span class="hljs-command">\build</span>.xml:362: The following error occurred while executing this line:
C:<span class="hljs-command">\Users</span><span class="hljs-command">\tester</span><span class="hljs-command">\AppData</span><span class="hljs-command">\Roaming</span><span class="hljs-command">\Titanium</span><span class="hljs-command">\mobilesdk</span><span class="hljs-command">\win</span>32\2.1.2.v20120824144611<span class="hljs-command">\module</span><span class="hljs-command">\android</span><span class="hljs-command">\build</span>.xml:317: exec returned: 2
</code></pre><p>You might want to add your current target build environment, module samples or even better add a watch to the following Jira ticket: http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-10724 </p>
<p>Hope it helps in order to narrow it down, Ivan.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 20th 2012, 6:05:53 pm">November 20th 2012</span>
								by <span class='authorname'>Eduardo Gomez</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I don&#39;t think that ticket is connected to this problem. I have &quot;gperf&quot; installed anyway.</p>
<p>I think that the problem is missing header file &quot;ti.modules.titanium.media.MediaModule.h&quot;</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 20th 2012, 6:58:10 pm">November 20th 2012</span>
								by <span class='authorname'>Ivan Škugor</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Meant to say (taken from such jira ticket):</p>
<p><em>It is suggested to remove gperf as a dependency to build android modules.</em></p>
<p><em>Note that gperf is not documented as a dependency.</em></p>
<p>Other than that, this is the guide about Installing the Necessary Components on <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides2&#x2F;Android+Module+Development+Guide#AndroidModuleDevelopmentGuide-Step1:InstallingtheNecessaryComponents">Android Module Development Guide</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="November 20th 2012, 7:25:55 pm">November 20th 2012</span>
								by <span class='authorname'>Eduardo Gomez</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-251425">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hello,<br>you should not modify the core. If you get issues with this core modification, you won&#39;t be able to get support from Appc.</p>
<p>IMHO, the right way to go here won&#39;t be extending the media module, but create your own module. Check the docs about how to create a new module for Android here: </p>
<p>http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Extending_Titanium_Mobile</p>
<p>Best,<br>Mauro</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 20th 2012, 6:20:06 pm">November 20th 2012</span>
								by <span class='authorname'>Mauro Parra</span><br>
								<a class="icon-bg icon-link" href="question/144913/how-to-extend-some-tisdk-module#answer-251425" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hm, I don&#39; t understand why is allowed to extend TiUIView, but not MediaModule? TiUIView is Ti module same as MediaModule, it&#39;s just located in different namespace.</p>
<p>There are some examples in AppC module repository: <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_modules&#x2F;tree&#x2F;master&#x2F;moddevguide&#x2F;mobile&#x2F;android&#x2F;src&#x2F;ti&#x2F;moddevguide">https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_modules&#x2F;tree&#x2F;master&#x2F;moddevguide&#x2F;mobile&#x2F;android&#x2F;src&#x2F;ti&#x2F;moddevguide</a></p>
<p>For example, LifeCycleProxy extends KrollProxy, which also belongs to the core, right?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2012, 6:56:00 pm">November 20th 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Actually, extending KrollProxy is not the best example (or it&#39;s not example for this situation at all :D ), but there is mention of extending of TiUIView in the documentation:</p>
<p>Adding Views<br>Views in Titanium must have two classes:</p>
<p>The view proxy: A subclass of TiViewProxy.<br>Responsible for exposing methods and properties of the view to JavaScript (just as a normal proxy would do).<br>Implements TiUIView createView(Activity activity) which returns a new instance of TiUIView.<br>The view implementation: A subclass of TiUIView.<br>Must call setNativeView with an instance of View either in the constructor, or in processProperties.<br>The view implementation is responsible for taking data from the view proxy, and applying it directly to the native View that it exposes.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2012, 7:13:47 pm">November 20th 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK, further investigation has lead me to believe that it is not possible to extend MediaModule (just KrollProxy or KrollModule). Unfortunately. :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 21st 2012, 8:48:21 am">November 21st 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
