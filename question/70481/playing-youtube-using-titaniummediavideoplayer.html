<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Playing YouTube using Titanium.Media.VideoPlayer » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Playing YouTube using Titanium.Media.VideoPlayer</h1>
		</header>
		<section>
			<p>Is it possible to play a YouTube video using Titanium.Media.VideoPlayer?  Currently I am using Titanium.UI.WebView to play the video.</p>
<p>The reason why I want to use Titanium.Media.VideoPlayer is because:</p>
<p>1) I don&#39;t want user to have to click on the play to start the video.  I want the video to start automatically when the window gets focus.  </p>
<p>2) Once the video is complete or the user clicks the &quot;Done&quot; button, I want the view and window to be closed without user having to click the back button.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 15th 2010, 2:33:07 am">October 15th 2010</span>
				by <span class='authorname'>Mansoor Charaniya</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>media</span></li>
					
						<li><span class='tagname'>player</span></li>
					
						<li><span class='tagname'>video</span></li>
					
						<li><span class='tagname'>youtube</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>hey Mansoor,</p>
<p>Did you ever find the answer to your problem? I am trying to achieve the same - play youtube video on Titanium.Media.VideoPlayer, knowing the youtube ID. </p>
<p>Can you please tell me how you made it work? You can message me at skolluri at gmail. </p>
<p>Thanks,<br>Sri</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 25th 2011, 5:47:21 pm">October 25th 2011</span>
								by <span class='authorname'>Sridevi Kolluri</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p><code>you can&amp;#39;t do this anymore</code></p>
</div>
							<div class="author">
								&mdash; commented <span title="August 7th 2015, 11:11:23 am">August 7th 2015</span>
								by <span class='authorname'>Andrew Gallasch</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>12</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>12 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-243572">
				
						<section>
							<p>I finally did it!<br>Everything you need is <a href="https:&#x2F;&#x2F;github.com&#x2F;hellozimi&#x2F;HCYoutubeParser&#x2F;tree&#x2F;master&#x2F;YoutubeParser">here</a><br>and it gives this</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">h264videosWithYoutubeURL</span>(<span class="hljs-params">_youtubeId, _callbackOk, _callbackError</span>)
</span>{
        <span class="hljs-keyword">var</span> youtubeInfoUrl = <span class="hljs-string">'http://www.youtube.com/get_video_info?video_id='</span> + _youtubeId;
        <span class="hljs-keyword">var</span> request = Titanium.Network.createHTTPClient({ timeout : <span class="hljs-number">10000</span>  <span class="hljs-comment">/* in milliseconds */</span>});
        request.open(<span class="hljs-string">"GET"</span>, youtubeInfoUrl);
        request.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_event</span>)</span>{
            <span class="hljs-keyword">if</span> (_callbackError)
                _callbackError({status: <span class="hljs-keyword">this</span>.status, error:_event.error});
        };  
        request.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_event</span>)</span>{
            <span class="hljs-keyword">var</span> qualities = {};
            <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">this</span>.responseText;
            <span class="hljs-keyword">var</span> args = getURLArgs(response);
            <span class="hljs-keyword">if</span> (!args.hasOwnProperty(<span class="hljs-string">'url_encoded_fmt_stream_map'</span>))
            {
                <span class="hljs-keyword">if</span> (_callbackError)
                    _callbackError();
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">var</span> fmtstring = args[<span class="hljs-string">'url_encoded_fmt_stream_map'</span>];
                <span class="hljs-keyword">var</span> fmtarray = fmtstring.split(<span class="hljs-string">','</span>);
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>,j=fmtarray.length; i&lt;j; i++){
                    <span class="hljs-keyword">var</span> args2 = getURLArgs(fmtarray[i]);
                    <span class="hljs-keyword">var</span> type = <span class="hljs-built_in">decodeURIComponent</span>(args2[<span class="hljs-string">'type'</span>]);
                    <span class="hljs-keyword">if</span> (type.indexOf(<span class="hljs-string">'mp4'</span>) &gt;= <span class="hljs-number">0</span>)
                    {
                        <span class="hljs-keyword">var</span> url = <span class="hljs-built_in">decodeURIComponent</span>(args2[<span class="hljs-string">'url'</span>]);
                        <span class="hljs-keyword">var</span> quality = <span class="hljs-built_in">decodeURIComponent</span>(args2[<span class="hljs-string">'quality'</span>]);
                        qualities[quality] = url;

                    }

                }
                <span class="hljs-keyword">if</span> (_callbackOk)
                    _callbackOk(qualities);
                }
        }
        request.send();


}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 22nd 2012, 3:36:57 pm">July 22nd 2012</span>
								by <span class='authorname'>Martin Guillon</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-243572" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi, great job, i&#39;d like to use this code. Can you post all support functions (getURLArgs, etc) which you use in this sample? thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 23rd 2012, 9:46:04 am">July 23rd 2012</span>
											by <span class='authorname'>M. M.</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>oups! sorry i thought i posted everything</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getURLArgs</span>(<span class="hljs-params">_string</span>) </span>{
    <span class="hljs-keyword">var</span> args = {};
    <span class="hljs-keyword">var</span> pairs = _string.split(<span class="hljs-string">"&amp;"</span>);
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; pairs.length; i++) {
        <span class="hljs-keyword">var</span> pos = pairs[i].indexOf(<span class="hljs-string">'='</span>);
        <span class="hljs-keyword">if</span> (pos == -<span class="hljs-number">1</span>) <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">var</span> argname = pairs[i].substring(<span class="hljs-number">0</span>,pos);
        <span class="hljs-keyword">var</span> value = pairs[i].substring(pos+<span class="hljs-number">1</span>);
        args[argname] = <span class="hljs-built_in">unescape</span>(value);
    }
    <span class="hljs-keyword">return</span> args;
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 23rd 2012, 10:30:19 am">July 23rd 2012</span>
											by <span class='authorname'>Martin Guillon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This solution worked perfectly for me. Thank you very much.</p>
<p>You just need to define a <code>_callbackOk</code> function that works with the URL you want.</p>
<p>The array seems to have qualities[&quot;small&quot;] and qualities[&quot;medium&quot;] available for most of the YouTube videos I tried. </p>
<p>You just pass this element of the array into the URL parameter when initializing`Titanium.Media.VideoPlayer</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 27th 2012, 12:53:03 pm">July 27th 2012</span>
											by <span class='authorname'>John Hawkins</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>that s it John.<br>By the way qualities are &#39;small&#39;, &#39;medium&#39;, &#39;720p&#39; and &#39;1080p&#39;</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 27th 2012, 12:55:31 pm">July 27th 2012</span>
											by <span class='authorname'>Martin Guillon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It´s returning a error for me.<br><code>{error:Forbidden, status:403}</code><br>Does anyone know what it is?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 24th 2012, 9:34:05 am">September 24th 2012</span>
											by <span class='authorname'>Douglas Alves</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@John and @ Martin : Hey, Can you give me post all required function which use in this function..<br>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2012, 8:16:44 am">November 27th 2012</span>
											by <span class='authorname'>Jigar Maheshwari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sadly my method doesnt seem to work anymore.<br>You should try the version of Kenan<br>https:&#x2F;&#x2F;gist.github.com&#x2F;3151702</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2012, 8:27:57 am">November 27th 2012</span>
											by <span class='authorname'>Martin Guillon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks Martin..<br>Jigar</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2012, 10:06:56 am">November 27th 2012</span>
											by <span class='authorname'>Jigar Maheshwari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks that works. But how to know if the video player is compatible with hd video or not. Since i am getting the &#39;medium&#39; quality url of some of best quality videos (for eq: https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=xKdClsVM2TU)in youtube. But it is not playing at the same time hd720 url is working</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2014, 10:02:03 am">August 14th 2014</span>
											by <span class='authorname'>Praveen KP</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>doesn&#39;t work on iOS</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 6th 2015, 6:52:54 am">August 6th 2015</span>
											by <span class='authorname'>Andrew Gallasch</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>6</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-248253">
				
						<section>
							<p>See https:&#x2F;&#x2F;gist.github.com&#x2F;3151702 for my quite short workaround. Native player by extracting the mp4.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 28th 2012, 2:52:10 pm">September 28th 2012</span>
								by <span class='authorname'>Kenan Sulayman</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-248253" rel="permalink">permalink</a>
							</div>

							<h5>13 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This right here is what you need. Works perfectly! Thanks Kenan.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 26th 2012, 9:58:20 am">December 26th 2012</span>
											by <span class='authorname'>Ross Waycaster</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>wow, it works again! thanks again for that.<br>Here is my update code (i simplified your code a bit)</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">h264videosWithYoutubeURL</span>(<span class="hljs-params">_youtubeId, _callbackOk, _callbackError</span>) //<span class="hljs-title">http</span>://<span class="hljs-title">www</span>.<span class="hljs-title">youtube</span>.<span class="hljs-title">com</span>/<span class="hljs-title">watch</span>?<span class="hljs-title">v</span>=8<span class="hljs-title">To</span>-6<span class="hljs-title">VIJZRE</span>
</span>{
    <span class="hljs-keyword">var</span> request = Titanium.Network.createHTTPClient({
        timeout : <span class="hljs-number">10000</span> <span class="hljs-comment">/* in milliseconds */</span>
    });
    request.setRequestHeader(<span class="hljs-string">"Referer"</span>, <span class="hljs-string">"http://www.youtube.com/watch?v="</span> + _youtubeId);
    request.open(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://m.youtube.com/watch?ajax=1&amp;feature=related&amp;layout=mobile&amp;tsp=1&amp;&amp;v="</span> + _youtubeId);
    request.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_event</span>) </span>{
        processRequestError(_event, <span class="hljs-string">"Can't get youtube video"</span>, _callbackError);
    };
    request.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_event</span>) </span>{
        <span class="hljs-keyword">var</span> qualities = {};
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> fmtarray = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-keyword">this</span>.responseText.substring(<span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.responseText.length))).content.video[<span class="hljs-string">'fmt_stream_map'</span>];
            ;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, j = fmtarray.length; i &lt; j; i++) {
                <span class="hljs-keyword">var</span> data = fmtarray[i];
                <span class="hljs-keyword">var</span> type = <span class="hljs-built_in">decodeURIComponent</span>(data[<span class="hljs-string">'type'</span>]);
                <span class="hljs-keyword">if</span> (type.indexOf(<span class="hljs-string">'mp4'</span>) &gt;= <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">var</span> url = <span class="hljs-built_in">decodeURIComponent</span>(data[<span class="hljs-string">'url'</span>]);
                    <span class="hljs-keyword">var</span> quality = <span class="hljs-built_in">decodeURIComponent</span>(data[<span class="hljs-string">'quality'</span>]);
                    qualities[quality] = url;
                }
            }
            <span class="hljs-keyword">if</span> (_callbackOk)
                _callbackOk(qualities);
        } <span class="hljs-keyword">catch</span>(e) {
            <span class="hljs-keyword">if</span> (_callbackError)
                _callbackError();
        }
    }
    request.send(); 
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="December 26th 2012, 11:02:57 am">December 26th 2012</span>
											by <span class='authorname'>Martin Guillon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>there are three links in the qualities vaiables finally small , medium and hd720  but none of these    links is working Titanum.Media.Videoplayer im trying that in android need help</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 31st 2012, 11:41:48 am">December 31st 2012</span>
											by <span class='authorname'>Mubashir khan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>personnaly i didnt get the hd720 yet :s I was afraid i couldnt get it.<br>Now for the playing part, it works really well here using </p>
<pre><code class="hljs"><span class="hljs-tag">Titanium</span><span class="hljs-class">.Media</span><span class="hljs-class">.createVideoPlayer</span>({
        <span class="hljs-attribute">url</span>:_args.url,
        <span class="hljs-attribute">autoplay </span>: true,
        <span class="hljs-attribute">backgroundColor</span>: <span class="hljs-string">'#000'</span>,
        <span class="hljs-attribute">fullscreen</span>:true,
        <span class="hljs-attribute">scalingMode</span>: Titanium.Media.VIDEO_SCALING_ASPECT_FIT,
        <span class="hljs-attribute">mediaControlMode</span>: Titanium.Media.VIDEO_CONTROL_NONE
    });
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="December 31st 2012, 12:23:08 pm">December 31st 2012</span>
											by <span class='authorname'>Martin Guillon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Will this code work as is for retrieving and playing videos from a youtube channel e.g. http:&#x2F;&#x2F;www.youtube.com&#x2F;rss&#x2F;user&#x2F;DejAyEnterprise&#x2F;videos.rss? If so, is this url now same as the <em>youtubeID and what defines the other two params in the funciton call </em>(callback ). If not, how can I adapt the code to do just that? Thx</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 17th 2013, 11:05:02 pm">January 17th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@adebisi: did you try? We are not here to implement things for you!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 18th 2013, 6:20:57 am">January 18th 2013</span>
											by <span class='authorname'>Martin Guillon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Martin Thanks ! Very helpful, quickly implemented it in a app ! I&#39;ve got to look into caching the video file now. Thanks again!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 22nd 2013, 2:52:15 am">January 22nd 2013</span>
											by <span class='authorname'>Florent Lamoureux</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Kenan Sulayman, your code is fantastic and It works on iOS but when tried to run on android it just dont work… video player does not opens up.. any clue?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2013, 5:14:49 am">April 18th 2013</span>
											by <span class='authorname'>Ajeet pratap Maurya</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Doesn&#39;t work on Android, please see my solution.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2013, 5:18:21 pm">May 21st 2013</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Why not? All I see in your code is a reincarnation of my code. He asked for 3GPP, he got it. I don&#39;t work with Android, though.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2013, 9:10:45 pm">May 21st 2013</span>
											by <span class='authorname'>Kenan Sulayman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>(sorry, misunderstanding; all good) :o)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2013, 9:12:35 pm">May 21st 2013</span>
											by <span class='authorname'>Kenan Sulayman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>THANKS!</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2013, 7:30:48 pm">May 28th 2013</span>
											by <span class='authorname'>Joseph Sachs</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks that works.<br>But how to know if the video player is compatible with hd video or not. Since i am getting the &#39;medium&#39; quality url   of  some of best quality videos (for eq: https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=xKdClsVM2TU)in youtube. But it is not playing at the same time hd720 url is working</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2014, 10:00:55 am">August 14th 2014</span>
											by <span class='authorname'>Praveen KP</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-249211">
				
						<section>
							<p>@Jonathan: My Gist still works; we experienced the same outage, but my workaround wraps around the interface, the mobile Youtube App uses. https:&#x2F;&#x2F;gist.github.com&#x2F;3151702 — we&#39;re already deploying this code as workaround in our apps. (successfully). Youtube implemented several security enhancements on it&#39;s servers; so for now, I think, this workaround is the only way to get it working. Have a nice day!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 12th 2012, 8:14:42 pm">October 12th 2012</span>
								by <span class='authorname'>Kenan Sulayman</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-249211" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I agree that s the best way to go. I liked my solution because i could get different qualities but it doesnt seem to work anymore!  Thanks for sharing your solution</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 12th 2012, 8:28:42 pm">October 12th 2012</span>
											by <span class='authorname'>Martin Guillon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hmmm. whether it is stable: (?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 13th 2012, 3:04:52 pm">October 13th 2012</span>
											by <span class='authorname'>Jonathan Schneider</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>okay. thanks. it works. but the quali ist realy bad :( resolution?<br>i need min. 720p</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 13th 2012, 4:43:05 pm">October 13th 2012</span>
											by <span class='authorname'>Jonathan Schneider</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The problem is Youtubes&#39; new security system; I&#39;ll get a bit deeper into the Youtube thing and will get my findings to you. Currently it seems this workaround is a bit unstable: Youtube rarely - but it happens - seems to send different &quot;layouts&quot; of what we&#39;re trying to extract, making the automated way unusable. Wouldn&#39;t it be so rarely happening, it&#39;d be easy to build a good algorithm, but that&#39;s the reason it&#39;s happening anyway, I think ;)</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 13th 2012, 11:22:38 pm">October 13th 2012</span>
											by <span class='authorname'>Kenan Sulayman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tried the one that Kenan has provided. Some how I dont get to see the fmt_stream_map under content.video. I have seen the stream_url which is having a 3gp video url but even that is not playing in android.</p>
<p>Is there a solution that works on both IOS and Android that can be used in an titanium app?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 17th 2013, 12:49:39 pm">May 17th 2013</span>
											by <span class='authorname'>Sreekanth Kesari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey Sreekanth,  I took a minute to checkout the current situation. First, you can&#39;t see fmt_stream_map unless you&#39;re sending a mobile useragent. Second, here&#39;s something I crafted in a matter of seconds: https:&#x2F;&#x2F;gist.github.com&#x2F;KenanSulayman&#x2F;5601881. It&#39;s not tested — tell me if it works for you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 17th 2013, 6:55:08 pm">May 17th 2013</span>
											by <span class='authorname'>Kenan Sulayman</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-263127">
				
						<section>
							<p>Here is a spin-off of Kenan&#39;s solution that works on both iOS and Android:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lib = Alloy.Globals;

exports.play = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
    getVideo(id);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getVideo</span>(<span class="hljs-params">id</span>) </span>{
    <span class="hljs-keyword">var</span> client = Ti.Network.createHTTPClient();
    client.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-keyword">this</span>.responseText.substring(<span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.responseText.length)))));
        <span class="hljs-keyword">var</span> response = <span class="hljs-built_in">JSON</span>.parse(json);
        <span class="hljs-keyword">var</span> video = response.content.video;
        <span class="hljs-keyword">var</span> streamUrl = video[<span class="hljs-string">'fmt_stream_map'</span>] ? video[<span class="hljs-string">'fmt_stream_map'</span>][<span class="hljs-number">0</span>].url : video.stream_url;
        Ti.API.info(<span class="hljs-string">"stream url: "</span> + streamUrl);
        playVideo(streamUrl);
    };
    client.setRequestHeader(<span class="hljs-string">'Referer'</span>, <span class="hljs-string">'http://www.youtube.com/watch?v='</span> + id);
    client.setRequestHeader(<span class="hljs-string">'User-Agent'</span>, <span class="hljs-string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14'</span>);
    client.open(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'http://m.youtube.com/watch?ajax=1&amp;feature=related&amp;layout=mobile&amp;tsp=1&amp;&amp;v='</span> + id);
    client.send();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">playVideo</span>(<span class="hljs-params">url</span>) </span>{
    <span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
        title: <span class="hljs-string">'Video Player'</span>,
        backButtonTitle: <span class="hljs-string">'Videos'</span>,
        barColor: <span class="hljs-string">'#000'</span>,
        backgroundColor: <span class="hljs-string">'#000'</span>
    });
    videoPlayer = Ti.Media.createVideoPlayer({
        backgroundColor: <span class="hljs-string">'#000'</span>,
        fullscreen: <span class="hljs-literal">true</span>,
        url: url,
        autoplay: <span class="hljs-literal">true</span>,
        scalingMode: Ti.Media.VIDEO_SCALING_ASPECT_FIT,
        mediaControlMode: Ti.Media.VIDEO_CONTROL_NONE
    });
    <span class="hljs-comment">/*videoPlayer.addEventListener('complete', function(e) { 
        if (e.reason === 0) {
            Ti.API.info('complete exit');
            win.close();
        };
    });*/</span>
    videoPlayer.addEventListener(<span class="hljs-string">'fullscreen'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (!e.entering) {
            Ti.API.info(<span class="hljs-string">'fullscreen exit'</span>);
            win.close();
        }
    });
    <span class="hljs-keyword">if</span>(!lib.constants.IS_ANDROID) {
        win.add(videoPlayer);
    }
    win.open();
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 21st 2013, 5:19:40 pm">May 21st 2013</span>
								by <span class='authorname'>Justin Toth</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-263127" rel="permalink">permalink</a>
							</div>

							<h5>15 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Here is an updated version that handles: (1.) High quality videos now shown on Android (2.) Handle Android back button exiting video player (3.) Auto-close video player after video completes.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lib = Alloy.Globals;

<span class="hljs-keyword">var</span> win = <span class="hljs-literal">null</span>,
    videoPlayer = <span class="hljs-literal">null</span>;

exports.isPlaying = <span class="hljs-literal">false</span>;

exports.play = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) </span>{
    exports.isPlaying = <span class="hljs-literal">true</span>;
    getVideo(id);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getVideo</span>(<span class="hljs-params">id</span>) </span>{
    <span class="hljs-keyword">var</span> client = Ti.Network.createHTTPClient();
    client.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-keyword">this</span>.responseText.substring(<span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.responseText.length)))));
        <span class="hljs-keyword">var</span> response = <span class="hljs-built_in">JSON</span>.parse(json);
        <span class="hljs-keyword">var</span> video = response.content.video;
        <span class="hljs-keyword">var</span> isHighQuality = video[<span class="hljs-string">'fmt_stream_map'</span>] != <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">var</span> streamUrl = isHighQuality ? video[<span class="hljs-string">'fmt_stream_map'</span>][<span class="hljs-number">0</span>].url : video.stream_url;
        <span class="hljs-keyword">if</span>(!isHighQuality) {
            Ti.API.info(<span class="hljs-string">'using low quality video because fmt_stream_map does not exist in json response, User-Agent probably is not being sent correctly'</span>);
        }
        Ti.API.info(<span class="hljs-string">'stream url: '</span> + streamUrl);
        playVideo(streamUrl);
    };
    <span class="hljs-keyword">if</span>(lib.constants.IS_IOS) {
        client.setRequestHeader(<span class="hljs-string">'Referer'</span>, <span class="hljs-string">'http://www.youtube.com/watch?v='</span> + id);
        client.setRequestHeader(<span class="hljs-string">'User-Agent'</span>, <span class="hljs-string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14'</span>);
    }
    client.open(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'http://m.youtube.com/watch?ajax=1&amp;layout=mobile&amp;tsp=1&amp;utcoffset=330&amp;v='</span> + id);
    <span class="hljs-keyword">if</span>(lib.constants.IS_ANDROID) {
        client.setRequestHeader(<span class="hljs-string">'Referer'</span>, <span class="hljs-string">'http://www.youtube.com/watch?v='</span> + id);
        client.setRequestHeader(<span class="hljs-string">'User-Agent'</span>, <span class="hljs-string">'Mozilla/5.0 (Linux; U; Android 2.2.1; en-gb; GT-I9003 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1'</span>);
    }
    client.send();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">playVideo</span>(<span class="hljs-params">url</span>) </span>{
    <span class="hljs-keyword">if</span>(lib.constants.IS_IOS) {
        win = Ti.UI.createWindow({
            title: <span class="hljs-string">'View Training Video'</span>,
            backgroundColor: <span class="hljs-string">'#000'</span>
        });
    }
    videoPlayer = Ti.Media.createVideoPlayer({
        backgroundColor: <span class="hljs-string">'#000'</span>,
        url: url,
        fullscreen: <span class="hljs-literal">true</span>,
        autoplay: <span class="hljs-literal">true</span>,
        scalingMode: Ti.Media.VIDEO_SCALING_ASPECT_FIT,
        mediaControlMode: Ti.Media.VIDEO_CONTROL_DEFAULT   
    });
    videoPlayer.addEventListener(<span class="hljs-string">'complete'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ 
        Ti.API.info(<span class="hljs-string">'video player complete'</span>);
        exports.close();
    });
    videoPlayer.addEventListener(<span class="hljs-string">'fullscreen'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (!e.entering) {
            Ti.API.info(<span class="hljs-string">'video player fullscreen exit'</span>);
            exports.close();
        }
    });
    <span class="hljs-keyword">if</span>(lib.constants.IS_IOS) {
        win.add(videoPlayer);
        win.open();
    }
}

exports.close = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    Ti.API.info(<span class="hljs-string">'closing video player'</span>);
    <span class="hljs-keyword">if</span>(lib.constants.IS_IOS) {
        videoPlayer.fullscreen = <span class="hljs-literal">false</span>;
        win.close();
    }
    <span class="hljs-keyword">else</span> {
        videoPlayer.hide();
        videoPlayer.release();
        videoPlayer = <span class="hljs-literal">null</span>;
    }
    exports.isPlaying = <span class="hljs-literal">false</span>;
};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="May 22nd 2013, 1:53:54 pm">May 22nd 2013</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Very nice ! Thank you. I&#39;ve only a problem: when I rotate the mobile (android), the video player stops and exits. Have you met this problem?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2013, 12:58:48 pm">May 28th 2013</span>
											by <span class='authorname'>Kevin Purnelle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No I&#39;m not seeing that issue on my S3. Can you try a few more devices to see if it&#39;s a device-specific issue? Also, you have the orientation opts set correctly for the window as well as the Android activity?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2013, 1:00:54 pm">May 28th 2013</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The window is only needed for iOS, in android there is no window so I can&#39;t fix the orientation.</p>
<p>In my device (HTC Sensation) I&#39;ve seen that the &#39;complete&#39; event is fired when I rotate the device. So if I remove the &#39;exports.close()&#39; line in the callback, what it does is reload the video at the beginning.</p>
<p>Now maybe the activity as you said, is the problem. But I don&#39;t know what&#39;s the name of the videoplayer own activity and what I should put in the manifest.. Maybe a landscape constraint?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 29th 2013, 6:24:46 am">May 29th 2013</span>
											by <span class='authorname'>Kevin Purnelle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve been investigating but I am sure how to resolve the problem. I&#39;ve read Android doc and maybe it&#39;s related to that: http:&#x2F;&#x2F;developer.android.com&#x2F;guide&#x2F;topics&#x2F;resources&#x2F;runtime-changes.html the activity is closed and then launched again when orientation changes. I don&#39; t know what to do on Ti side.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 29th 2013, 7:17:01 am">May 29th 2013</span>
											by <span class='authorname'>Kevin Purnelle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>(sorry I meant &#39;I&#39;m not sure how to solve the problem&#39;)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 29th 2013, 7:21:49 am">May 29th 2013</span>
											by <span class='authorname'>Kevin Purnelle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve solved my problem this way (I force &#x2F; constraint lanscape mode)<br>In tiapp.xml, in android &#x2F; manifest section this is what I&#39;ve added:</p>
<pre><code class="hljs">&lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">"ti.modules.titanium.media.TiVideoActivity"</span> <span class="hljs-string">android:</span>launchMode=<span class="hljs-string">"singleTask"</span> <span class="hljs-string">android:</span>screenOrientation=<span class="hljs-string">"landscape"</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"keyboardHidden|orientation|screenSize"</span> <span class="hljs-string">android:</span>theme=<span class="hljs-string">"@android:style/Theme.NoTitleBar.Fullscreen"</span>/&gt;
</code></pre><p>I suppose that this ti.modules.titanium.media.TiVideoActivity is the same for any video player activity. (when we lanch it fullscreen without adding it to a view &#x2F; window)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 29th 2013, 8:14:07 am">May 29th 2013</span>
											by <span class='authorname'>Kevin Purnelle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Awesome, great to hear you solved the issue.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 29th 2013, 10:58:21 am">May 29th 2013</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you are interested. I also handle the case where there was an error returned by youtube. This is how my onload function looks like. (basically just check response.result) The youtube error messages are in an array at response.errors</p>
<pre><code class="hljs">client.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-keyword">this</span>.responseText.substring(<span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.responseText.length)))));
    <span class="hljs-keyword">var</span> response = <span class="hljs-built_in">JSON</span>.parse(json);
    <span class="hljs-keyword">var</span> video, isHighQuality, streamUrl;

    <span class="hljs-keyword">if</span> (response.result === <span class="hljs-string">'ok'</span>) {

        video = response.content.video;
        isHighQuality = video[<span class="hljs-string">'fmt_stream_map'</span>] != <span class="hljs-literal">null</span>;
        streamUrl = isHighQuality ? video[<span class="hljs-string">'fmt_stream_map'</span>][<span class="hljs-number">0</span>].url : video.stream_url;

        <span class="hljs-keyword">if</span> (!isHighQuality) {
            Ti.API.info(<span class="hljs-string">'using low quality video because fmt_stream_map does not exist in json response, User-Agent probably is not being sent correctly'</span>);
        }

        Ti.API.info(<span class="hljs-string">'stream url: '</span> + streamUrl)
        playVideo(streamUrl)
    }
    <span class="hljs-keyword">else</span> {

        alert(<span class="hljs-string">'The video could not be loaded. '</span> + response.errors[<span class="hljs-number">0</span>])
    }
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="May 29th 2013, 12:50:20 pm">May 29th 2013</span>
											by <span class='authorname'>Kevin Purnelle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It is bad practice to <code>alert</code> an error.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 29th 2013, 3:25:38 pm">May 29th 2013</span>
											by <span class='authorname'>Kenan Sulayman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This is an example, the point was to show that youtube can return an error (video not found, account deleted, …) and how we can handle it.</p>
<p>I don&#39;t see why it&#39;s bad practice. At least say why or give a link where it is explained.<br>If it&#39;s because the type of the message is too &quot;technical&quot; and not useful for an end user, well maybe.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 30th 2013, 12:26:17 pm">May 30th 2013</span>
											by <span class='authorname'>Kevin Purnelle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi all, I am trying out the code on Android but still finding problem getting mp4 video after two days of trying various ways. Do any of you have the same problems on Android? I am using s3.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 18th 2013, 5:44:43 am">July 18th 2013</span>
											by <span class='authorname'>Mong Suan Yee</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Is this classic or alloy?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2014, 5:25:07 pm">February 18th 2014</span>
											by <span class='authorname'>Gustavo Severo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Any idea for alloy mode?</p>
<p>Because a tried to use the codes posted for Jutin Toth and nothing happen!<br>Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2014, 12:53:50 pm">February 20th 2014</span>
											by <span class='authorname'>Gustavo Severo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>the iOS solution seems not working anymore from one week… We should change the User Agent? or what?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2014, 12:15:48 pm">August 25th 2014</span>
											by <span class='authorname'>Francesco Aiello</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-128111">
				
						<section>
							<p>As long as you can get the MP4 version of the file I don&#39;t think it&#39;ll be an issue. I&#39;ve been adding Revsion3 videos to my app (both for Android and iPhone) and it&#39;s now working fine. It took a bit of trial and error to get the code to work across both platforms.</p>
<p>On Android it will always fire up a new window.. i.e. the video isn&#39;t embedded like you can do on the iPhone.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 15th 2010, 9:35:48 am">October 15th 2010</span>
								by <span class='authorname'>Matt Collinge</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-128111" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>how did you did that, can you guide me on that?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 28th 2012, 5:11:37 am">March 28th 2012</span>
											by <span class='authorname'>Abrar Sair</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-128181">
				
						<section>
							<p>Unfortunately I don&#39;t have control over the media type.  It may not always be an MP4.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 15th 2010, 1:56:01 pm">October 15th 2010</span>
								by <span class='authorname'>Mansoor Charaniya</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-128181" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>It will. (check the syntax of the returned JSON)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 17th 2013, 6:52:10 pm">May 17th 2013</span>
											by <span class='authorname'>Kenan Sulayman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry Kenan, I tried various ways. Mansoor is right. It is not always MP4. I only get .3gp format and I did verify on the json.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 18th 2013, 5:33:26 am">July 18th 2013</span>
											by <span class='authorname'>Mong Suan Yee</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207237">
				
						<section>
							<p>i have searched all the net, nothing happens, i really need to learn playing youtube videos, is this really so hard?nobody can&#39;t do that?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 4th 2011, 10:58:43 am">May 4th 2011</span>
								by <span class='authorname'>Graham Jeffrey</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-207237" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-249188">
				
						<section>
							<p>: (<br>@ since 2 weeks with Martin Guillon script -&gt; HTTP-Fehler 403 (Forbidden): Der Server hat die Verarbeitung der Anforderung verweigert.</p>
<p>help please.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 12th 2012, 3:33:24 pm">October 12th 2012</span>
								by <span class='authorname'>Jonathan Schneider</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-249188" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-256378">
				
						<section>
							<p>@ Martin Guillon<br>I am newbie in Titanium Can You please post the whole code along with design to get the complete functionality i.e. running video from Youtube ..</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 8th 2013, 9:17:14 am">February 8th 2013</span>
								by <span class='authorname'>Muhammad Burhan</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-256378" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I am sorry but no. Sharing code snippet is a good thing but sharing full design&#x2F;implementation is kind of too much.<br>Sorry</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 8th 2013, 9:27:08 am">February 8th 2013</span>
											by <span class='authorname'>Martin Guillon</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-262298">
				
						<section>
							<p>This code works on Android, but the format is .3GP (low quality) :</p>
<pre><code class="hljs">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convert</span>(<span class="hljs-params">a</span>)</span>{
    <span class="hljs-comment">//where "a" is video ID;</span>
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
    xhr.setRequestHeader(<span class="hljs-string">"Referer"</span>, <span class="hljs-string">"http://www.youtube.com/watch?v="</span> + a);
    xhr.setRequestHeader(<span class="hljs-string">"User-Agent"</span>, <span class="hljs-string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14"</span>);
    xhr.open(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://m.youtube.com/watch?ajax=1&amp;feature=related&amp;layout=mobile&amp;tsp=1&amp;&amp;v="</span> + a);
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            x = <span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-keyword">this</span>.responseText.substring(<span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.responseText.length)))));
            y = OS_IOS ? <span class="hljs-built_in">JSON</span>.parse(x).content.video[<span class="hljs-string">"fmt_stream_map"</span>][<span class="hljs-number">0</span>].url : <span class="hljs-built_in">JSON</span>.parse(x).content.video[<span class="hljs-string">"stream_url"</span>];

            movie.url = y;
            win.add(movie);
    };
    xhr.send();
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 7th 2013, 12:32:20 pm">May 7th 2013</span>
								by <span class='authorname'>Thomas Lemaitre</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-262298" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Checkout the version I created for Sreekanth: https:&#x2F;&#x2F;gist.github.com&#x2F;KenanSulayman&#x2F;5601881; might be straightforward.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 17th 2013, 6:58:33 pm">May 17th 2013</span>
											by <span class='authorname'>Kenan Sulayman</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-284209">
				
						<section>
							<p>hi, if creating a webview? is not good?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 3rd 2014, 7:59:42 am">December 3rd 2014</span>
								by <span class='authorname'>Diego Schnider</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-284209" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-217047">
				
						<section>
							<p>i figured out how to play youtube videos with a regular video player ( Titanium.Media.VideoPlayer, or native as MPMoviePlayerController) - msg me at sircambridge at gmail</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 20th 2011, 9:12:47 pm">August 20th 2011</span>
								by <span class='authorname'>gene tsai</span><br>
								<a class="icon-bg icon-link" href="question/70481/playing-youtube-using-titaniummediavideoplayer#answer-217047" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>hey Gene,</p>
<p>Can you post here your solution for how to play Youtube videos using VideoPlayer, please?</p>
<p>Thanks,<br>Sridevi</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 24th 2011, 3:19:46 pm">October 24th 2011</span>
											by <span class='authorname'>Sridevi Kolluri</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I would also like to see your solution for playing the youtube vids</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 12th 2011, 12:33:22 pm">November 12th 2011</span>
											by <span class='authorname'>Sam Witteveen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>that solution … please :-)</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 25th 2012, 6:12:26 am">June 25th 2012</span>
											by <span class='authorname'>George Georgiou</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I would also like to see your solution for playing the youtube vids plz frward to<br>hafsalrahman13@gmail.com</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 25th 2013, 4:01:21 am">February 25th 2013</span>
											by <span class='authorname'>hafsal Rahman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Here&#39;s my (simplified) version of the code:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.createWindow({
    backgroundColor:<span class="hljs-string">'white'</span>
})

<span class="hljs-keyword">var</span> movie = Titanium.Media.createVideoPlayer({
    fullscreen: <span class="hljs-literal">false</span>,
    autoplay: <span class="hljs-literal">false</span>,
    width:<span class="hljs-number">320</span>,height:<span class="hljs-number">180</span>,bottom:<span class="hljs-number">0</span>,left:<span class="hljs-number">0</span>,
    backgroundColor: <span class="hljs-string">'#111'</span>,
    mediaControlStyle: Titanium.Media.VIDEO_CONTROL_DEFAULT,
    scalingMode: Titanium.Media.VIDEO_SCALING_ASPECT_FIT
});

convert(<span class="hljs-string">'W4NoqRbhlFE'</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convert</span>(<span class="hljs-params">a</span>)</span>{
    <span class="hljs-comment">//where "a" is video ID;</span>
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
    xhr.setRequestHeader(<span class="hljs-string">"Referer"</span>, <span class="hljs-string">"http://www.youtube.com/watch?v="</span> + a);
    xhr.setRequestHeader(<span class="hljs-string">"User-Agent"</span>, <span class="hljs-string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14"</span>);
    xhr.open(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://m.youtube.com/watch?ajax=1&amp;feature=related&amp;layout=mobile&amp;tsp=1&amp;&amp;v="</span> + a);
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            x = <span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-keyword">this</span>.responseText.substring(<span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.responseText.length)))));
            y = <span class="hljs-built_in">JSON</span>.parse(x).content.video[<span class="hljs-string">"fmt_stream_map"</span>][<span class="hljs-number">0</span>].url;

            movie.url = y;
            win.add(movie)
    };
    xhr.send()   
}

win.open();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 1st 2013, 8:11:37 pm">March 1st 2013</span>
											by <span class='authorname'>Carlos Henrique Lustosa Zinato</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I had problem with the codes above… This message appears:<br>&quot;y = JSON.parse(x).content.player_data[&quot;fmt_stream_map&quot;][0].url;&quot;</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2014, 5:36:22 pm">February 18th 2014</span>
											by <span class='authorname'>Gustavo Severo</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-28</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
