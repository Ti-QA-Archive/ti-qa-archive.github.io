<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Tips and tricks for memory management » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Tips and tricks for memory management</h1>
		</header>
		<section>
			<p>Hello to all you guys! Optimize the use of memory is a really important thing, and since I lost a lot of time perfecting my own app for this thing, I wanted to share with you some tricks (some already knew, others do not, but it is always better to have the clear ideas) that may help in memory management app.</p>
<p><strong>I can give you this advice:</strong></p>
<ul>
<li><p>When you delete a window &#x2F; view &#x2F; object &#x2F; etc etc, create a function within the object &#x2F; view &#x2F; window that removes all the objects added to the object &#x2F; view &#x2F; window, and after eliminating septal objects to null. For example, I use a lot of the commonjs, and when I delete an object commonjs, call a function inside that I destroy all the objects added to the return of commonjs, and once eliminated makes them null. (this is an example function in at commonjs, which is invoked when the commonjs is eliminated)<br>~~~<br>view.clean_commonjs = funzione () {</p>
<p>  view.remove (img_nuvole);<br>  view.remove (img_umidita);<br>  view.remove (copertura_nuvolosa);<br>  view.remove (umidita);<br>  view.remove (TEMPERATURA);<br>  view.remove (Posizione);<br>  view.remove (pulsante);</p>
<p>  img_nuvole = null;<br>  img_umidita = null;<br>  copertura_nuvolosa = null;<br>  umidita = null;<br>  temperatura = null;<br>  Posizione = null;<br>  Pulsante = null;</p>
</li>
</ul>
<pre><code class="hljs">day_1.remove (giorno1)<span class="hljs-comment">;</span>
day_1.remove (imgDay1)<span class="hljs-comment">;</span>
day_1.remove (tempDay1)<span class="hljs-comment">;</span>

view.remove (day1)<span class="hljs-comment">;</span>
view.remove (DAY_1)<span class="hljs-comment">;</span>

giorno1 = null<span class="hljs-comment">;</span>
imgDay1 = null<span class="hljs-comment">;</span>
tempDay1 = null<span class="hljs-comment">;</span>
day1 = null<span class="hljs-comment">;</span>
DAY_1 = null<span class="hljs-comment">;</span>


day_2.remove (giorno2)<span class="hljs-comment">;</span>
day_2.remove (imgDay2)<span class="hljs-comment">;</span>
day_2.remove (tempDay2)<span class="hljs-comment">;</span>

view.remove (day2)<span class="hljs-comment">;</span>
view.remove (day_2)<span class="hljs-comment">;</span>

giorno2 = null<span class="hljs-comment">;</span>
imgDay2 = null<span class="hljs-comment">;</span>
tempDay2 = null<span class="hljs-comment">;</span>
day2 = null<span class="hljs-comment">;</span>
day_2 = null<span class="hljs-comment">;</span>


day_3.remove (giorno3)<span class="hljs-comment">;</span>
day_3.remove (imgDay3)<span class="hljs-comment">;</span>
day_3.remove (tempDay3)<span class="hljs-comment">;</span>

view.remove (3 ° giorno)<span class="hljs-comment">;</span>
view.remove (day_3)<span class="hljs-comment">;</span>

giorno3 = null<span class="hljs-comment">;</span>
imgDay3 = null<span class="hljs-comment">;</span>
tempDay3 = null<span class="hljs-comment">;</span>
Day3 = null<span class="hljs-comment">;</span>
day_3 = null<span class="hljs-comment">;</span>

day_4.remove (giorno4)<span class="hljs-comment">;</span>
day_4.remove (imgDay4)<span class="hljs-comment">;</span>
day_4.remove (tempDay4)<span class="hljs-comment">;</span>

view.remove (Day4)<span class="hljs-comment">;</span>
view.remove (day_4)<span class="hljs-comment">;</span>

giorno4 = null<span class="hljs-comment">;</span>
imgDay4 = null<span class="hljs-comment">;</span>
tempDay4 = null<span class="hljs-comment">;</span>
Day4 = null<span class="hljs-comment">;</span>
day_4 = null<span class="hljs-comment">;</span>

day_5.remove (giorno5)<span class="hljs-comment">;</span>
day_5.remove (imgDay5)<span class="hljs-comment">;</span>
day_5.remove (tempDay5)<span class="hljs-comment">;</span>

view.remove (5 ° giorno)<span class="hljs-comment">;</span>
view.remove (day_5)<span class="hljs-comment">;</span>


giorno5 = null<span class="hljs-comment">;</span>
imgDay5 = null<span class="hljs-comment">;</span>
tempDay5 = null<span class="hljs-comment">;</span>
5 ° giorno = null<span class="hljs-comment">;</span>
day_5 = null<span class="hljs-comment">;</span>


view.remove (viewNera)<span class="hljs-comment">;</span>
view.remove (actInd)<span class="hljs-comment">;</span>

viewNera = null<span class="hljs-comment">;</span>
actInd = null<span class="hljs-comment">;</span>

clearInterval (timer_refresh)<span class="hljs-comment">;</span>
timer_refresh = null<span class="hljs-comment">;</span>

view = null<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre><pre><code class="hljs">
(the commonjs should automatically <span class="hljs-operator"><span class="hljs-keyword">delete</span> all objects / <span class="hljs-keyword">variables</span> declared <span class="hljs-keyword">within</span> it, but it does <span class="hljs-keyword">not</span> <span class="hljs-keyword">always</span> happen (personally tested <span class="hljs-keyword">with</span> instruments), <span class="hljs-keyword">then</span> the <span class="hljs-keyword">function</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">delete</span> objects / <span class="hljs-keyword">variables</span> <span class="hljs-keyword">within</span> it <span class="hljs-keyword">never</span> hurts)
- <span class="hljs-keyword">Variables</span> declared <span class="hljs-keyword">within</span> the <span class="hljs-keyword">function</span> <span class="hljs-keyword">are</span> <span class="hljs-keyword">not</span> allocated <span class="hljs-keyword">in</span> <span class="hljs-keyword">memory</span>, so <span class="hljs-keyword">do</span> <span class="hljs-keyword">not</span> weigh down the app
- <span class="hljs-keyword">Always</span> deletes <span class="hljs-keyword">variables</span> / objects <span class="hljs-keyword">by</span> setting the <span class="hljs-keyword">variable</span> <span class="hljs-keyword">to</span> <span class="hljs-literal">null</span> / <span class="hljs-keyword">object</span> <span class="hljs-keyword">when</span> the <span class="hljs-keyword">variable</span> / <span class="hljs-keyword">object</span> you <span class="hljs-keyword">do</span> <span class="hljs-keyword">not</span> need it anymore
- <span class="hljs-keyword">Do</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">use</span> ImageView but <span class="hljs-keyword">View</span> <span class="hljs-keyword">with</span> backgroundImage
- <span class="hljs-keyword">Never</span> <span class="hljs-keyword">use</span> borderRadius / borderWidth / borderColor <span class="hljs-keyword">in</span> objects <span class="hljs-keyword">within</span> objects that must <span class="hljs-keyword">move</span>, <span class="hljs-keyword">as</span> <span class="hljs-keyword">for</span> example a scrollableView.
- <span class="hljs-keyword">If</span> you <span class="hljs-keyword">use</span> a scrollableView <span class="hljs-keyword">i</span> give you this super advice <span class="hljs-keyword">I</span> have personally discovered:</span>
</code></pre><p>scrollableViewAmbiente.cacheSize = num_layer_scrollablew_view + 1;</p>
<pre><code class="hljs">sets <span class="hljs-operator">the</span> cacheSize <span class="hljs-operator">of</span> scrollableView, <span class="hljs-operator">in</span> such <span class="hljs-operator">a</span> way that <span class="hljs-keyword">it</span> is equal <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> <span class="hljs-built_in">number</span> <span class="hljs-operator">of</span> view <span class="hljs-operator">of</span> scrollablewView + <span class="hljs-number">1</span>!

- If you use setInterval, always remember <span class="hljs-built_in">to</span> make <span class="hljs-operator">a</span> clearInterval <span class="hljs-operator">of</span> timer <span class="hljs-built_in">to</span> avoid creating continuous timer <span class="hljs-keyword">each</span> <span class="hljs-built_in">time</span> <span class="hljs-operator">the</span> timer calls
</code></pre><p>var timer = setInterval (….)</p>
<p>clearInterval (timer);</p>
<pre><code class="hljs">
- <span class="hljs-keyword">If</span> you <span class="hljs-keyword">do</span> have a <span class="hljs-keyword">for</span> <span class="hljs-keyword">loop</span>, <span class="hljs-keyword">for</span> example, goes <span class="hljs-keyword">from</span> <span class="hljs-number">0</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">array</span> length, you <span class="hljs-keyword">do</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">do</span> so:
</code></pre><p>var array = […];<br>..<br>..<br>..</p>
<p>for(var i=0;i&lt;array.length;i++){<br>        …<br>}</p>
<pre><code class="hljs">but <span class="hljs-keyword">do</span> so! This makes the <span class="hljs-keyword">for</span> <span class="hljs-keyword">loop</span> faster
</code></pre><p>var array = […];<br>var len_array = array.length;<br>..<br>..</p>
<p>for(var i=0;i&lt;len_array;i++){<br>        …<br>}</p>
<pre><code class="hljs">
- <span class="hljs-keyword">if</span> you have <span class="hljs-keyword">to</span> <span class="hljs-built_in">remove</span> objects from <span class="hljs-keyword">a</span> <span class="hljs-keyword">view</span> / window / scrollablewView etc etc <span class="hljs-keyword">do</span> <span class="hljs-keyword">so</span>
</code></pre><p>var view = Ti.UI.createView({<br>..<br>..<br>});</p>
<p>…<br>…</p>
<p>var len = view.children.length;</p>
<p>for (var r = len - 1; r &gt;= 0; r–) {<br>    if ( typeof (view.children[r]) != null) {<br>        view.remove(view.children[r]);<br>       }<br>}</p>
<p>~~~</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 21st 2013, 12:29:42 pm">May 21st 2013</span>
				by <span class='authorname'>nicolò monili</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>memory management</span></li>
					
						<li><span class='tagname'>tips and tricks</span></li>
					
						<li><span class='tagname'>typs memory</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>One more point from my side:</p>
<p>If you have global event listeners, make sure you are removing the event listeners using removeEventListener() if the listeners are accessing any of your local variables like window handles. This is because anything accessed in a global event listener attains a global scope and will not get deleted even if we set the reference to null.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 22nd 2013, 5:10:48 am">May 22nd 2013</span>
								by <span class='authorname'>biswarup dasgupta</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>thanks, for sharing this nicolo</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 25th 2013, 5:54:34 pm">September 25th 2013</span>
								by <span class='authorname'>Kapil Maheshwari</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>9</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-269158">
				
						<section>
							<p>Another important item to add is this:</p>
<pre><code class="hljs">theWindow<span class="hljs-built_in">.</span>addEventListener(
    <span class="hljs-string">'close'</span>,
    function(){
        <span class="hljs-attribute">...</span>
        <span class="hljs-attribute">...</span>
        myXHR<span class="hljs-built_in">.</span><span class="hljs-keyword">abort</span>();
        <span class="hljs-attribute">...</span>
        <span class="hljs-attribute">...</span>
    }
);
</code></pre><p>You need to be sure that any asynchronous network calls (XHR, socket, Bonjour, etc.) are aborted so that they don&#39;t call back to a non-existent object.  I ran into this in some of my early projects, where closing a window would be followed with a callback and a red-screen-of-death.</p>
<p>I generally define my XHR calls as properties of the object that contains each window definition, so they are defined like so:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myClass</span>(<span class="hljs-params">params</span>)</span>{

    <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">this</span>.myXHR = Ti.Network.cleateHTTPClient({
        ...
        ...
    });

    ...
    ...

    <span class="hljs-keyword">this</span>.myWindow = Ti.UI.createWindow({
        ...
        ...
    });
    <span class="hljs-keyword">this</span>.myWindow.addEventListener(
        <span class="hljs-string">'close'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
            ...
            ...
            obj.myXHR.abort();
            obj.myXHR = <span class="hljs-literal">null</span>;
            ...
            ...
        }
    );


    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.myWindow;
}
myClass.prototype.myAction = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">params</span>)</span>{
    <span class="hljs-keyword">this</span>.myXHR.abort();
    <span class="hljs-keyword">this</span>.myXHR.open(params);
    <span class="hljs-keyword">this</span>.myXHR.send(
        ...
        ...
    );
};
<span class="hljs-built_in">module</span>.exports = myClass;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 25th 2013, 6:36:05 pm">September 25th 2013</span>
								by <span class='authorname'>Daniel Gump</span><br>
								<a class="icon-bg icon-link" href="question/152656/tips-and-tricks-for-memory-management#answer-269158" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-278526">
				
						<section>
							<p>Just want to add few things on this:</p>
<p> <em>Do not use ImageView but View with backgroundImage</em></p>
<p>We&#39;ve been following this. And for our our app&#39;s icons, we are using an IconFont. There&#39;s a very useful tutorial <a href="www.tidev.io&#x2F;2014&#x2F;03&#x2F;25&#x2F;create-an-icon-font-with-icomoon&#x2F;">here</a> on how to create an Icon Font.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 8th 2014, 2:05:55 am">May 8th 2014</span>
								by <span class='authorname'>Rowena Alipar</span><br>
								<a class="icon-bg icon-link" href="question/152656/tips-and-tricks-for-memory-management#answer-278526" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
