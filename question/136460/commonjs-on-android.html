<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>commonjs on android » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>commonjs on android</h1>
		</header>
		<section>
			<p>hi,</p>
<p>i have a problem with commonjs on android…</p>
<p>on my app.js i have : </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/util'</span>);
<span class="hljs-keyword">var</span> constantes = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util/vars'</span>);
<span class="hljs-keyword">var</span> firstWindow = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/firstWindow'</span>).createWindow();
firstWindow.open();
</code></pre><p>first window opens winAccueil which contains that : </p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> actIndFilActu</span> = util.createActivityIndicator();
</code></pre><p>ui&#x2F;util contains : </p>
<pre><code class="hljs">exports.createActivityIndicator = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> actInd = Ti.UI.createActivityIndicator({
        width:Ti.UI.SIZE, height:<span class="hljs-number">250</span>,
        message: <span class="hljs-string">'Chargement...'</span>
    });

    <span class="hljs-keyword">return</span> actInd;
};
</code></pre><p>on iPhone it works fine because all variables declared on app.js are visible in the application…but on android, it doesn&#39;t recognize util.create…. in winAccueil.js</p>
<p>thank you for help</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 4th 2012, 9:44:42 am">May 4th 2012</span>
				by <span class='authorname'>Djamel ZAHAL</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>app.js</span></li>
					
						<li><span class='tagname'>commonjs</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Actually Android is correct.</p>
<p>you shouldn&#39;t have access to global variables using commonJS.</p>
<p>have a look here of how to apply a global variable within a commonJS architectures application</p>
<p>http:&#x2F;&#x2F;www.thewarpedcoder.net&#x2F;2011&#x2F;12&#x2F;apccelrator-titanium-commonjs-global-variables&#x2F;</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 4th 2012, 12:46:30 pm">May 4th 2012</span>
								by <span class='authorname'>Trevor Ward</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Trevor is being modest by not posting his answer as an answer.  BTW, if you are in the UK, Trevor is actually teaching a course on commonJS later this month - <a href="http:&#x2F;&#x2F;softlywired02-estw.eventbrite.co.uk&#x2F;">Titanium Best Practices &amp; commonJS Architecture</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="May 4th 2012, 1:35:59 pm">May 4th 2012</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>thanks for your response :) </p>
<p>what about this readed in https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Mobile+Best+Practices :</p>
<p>&quot;Any variables declared in app.js shall be globally available in the entire application.&quot;</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 5th 2012, 8:15:39 am">May 5th 2012</span>
								by <span class='authorname'>Djamel ZAHAL</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>When you add commonJS to the mix on android, that line is in error.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 5th 2012, 9:29:08 am">May 5th 2012</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-237838">
				
						<section>
							<p>On android, each commonJS module runs in its own context and cannot see the variables created in other contexts.  The javascript engine on iOS (jscore) is less strict (more lenient) and can see those variables (including a global namespace).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 4th 2012, 9:50:04 am">May 4th 2012</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="../../question/136460/commonjs-on-android.html#answer-237838" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>is it not advised to use just one context ?…that is why im not using url property in window..<br>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 4th 2012, 9:54:44 am">May 4th 2012</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>a little naming correction, context gives the impression of having multiple javascript instances, where as each commonJS module has its own scope … It runs in the same javascript instance of the parent module. </p>
<p>If you use URL then that creates a new javascript instance, which is really not what you want to do</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 30th 2012, 1:46:40 pm">June 30th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-241341">
				
						<section>
							<p>25</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 19th 2012, 10:03:52 pm">June 19th 2012</span>
								by <span class='authorname'>Bill Freedman</span><br>
								<a class="icon-bg icon-link" href="../../question/136460/commonjs-on-android.html#answer-241341" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
