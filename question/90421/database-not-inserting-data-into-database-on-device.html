<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>database not inserting data into database on device Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>database not inserting data into database on device</h1>
		</header>
		<section>
			<p>database works fine in simulation mode but doesn&#39;t work on device</p>
<p>iphone 3g 4.0.1</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 15th 2010, 10:42:57 pm">December 15th 2010</span>
				by <span class='authorname'>Alan Young</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>data</span></li>
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>insert</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>problems</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-162881">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi,</p>
<ul>
<li>Selects work? or nothing works? If nothing works i would assume your path for the database is unreachable on device. Can you post the code that calls the database? check if you change the path to the root of the resources database you still have a problem. Use something like:</li>
</ul>
<p>db = Titanium.Database.install(&#39;dataapp.sqlite&#39;, &#39;datadb12&#39;);</p>
<p>Cheers</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 16th 2010, 8:47:35 am">December 16th 2010</span>
								by <span class='authorname'>Daniel Ander</span><br>
								<a class="icon-bg icon-link" href="../../question/90421/database-not-inserting-data-into-database-on-device.html#answer-162881" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-162731">
				
						<section>
							<p>post you code.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 16th 2010, 3:18:48 am">December 16th 2010</span>
								by <span class='authorname'>Peter Lum</span><br>
								<a class="icon-bg icon-link" href="../../question/90421/database-not-inserting-data-into-database-on-device.html#answer-162731" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>var db = Ti.Database.install(&#39;localData.sqlite&#39;,&#39;localDataDB&#39;);<br>var rows1 = db.execute(&#39;SELECT * FROM keyChain&#39;);<br>var rowCount = rows1.getRowCount();<br>&#x2F;&#x2F;Function to insert user information into sqlite DB<br>function insertUser(u,p,m){<br>var dbIn = Ti.Database.install(&#39;localData.sqlite&#39;,&#39;localDataDB&#39;);<br>var rows = dbIn.execute(&#39;INSERT INTO keyChain (ID, localUser, localPass, localEmail) VALUES(&quot;1&quot;,&quot;&#39;+u+&#39;&quot;,&quot;&#39;+p+&#39;&quot;,&quot;&#39;+m+&#39;&quot;)&#39;);</p>
<p>Ti.API.info(&#39;JUST INSERTED, rowsAffected = &#39; + db.rowsAffected);<br>Ti.API.info(&#39;JUST INSERTED, lastInsertRowId = &#39; + db.lastInsertRowId);</p>
<p>dbIn.close();<br>}</p>
<p>&#x2F;&#x2F;Send Login infomation to remote server<br>    loginBt.addEventListener(&#39;click&#39;, function()<br>{</p>
<p>userName = Ti.Utils.base64encode(username.value);<br>passWord = Ti.Utils.md5HexDigest(password.value);</p>
<p>if(rowCount != 1 &amp;&amp; username.value != &quot;&quot;){insertUser(username.value,password.value,eMail.value);}</p>
<p>});</p>
<p>my source database is held in resources folder called localData.sqlite.</p>
<p>keyChain is the table name and id, localUser, localPass, localEmail are the fields</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 16th 2010, 9:23:02 am">December 16th 2010</span>
											by <span class='authorname'>Alan Young</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>What happens is the user enters there user name password and email for the first time and it stores on a database on the iphone. Then the next time the app is opened on the login window, the iphone checks to see if there is an entry in the database. If there is, the iphone auto fills the user, pass, email txt fields on the login window</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 16th 2010, 9:29:10 am">December 16th 2010</span>
											by <span class='authorname'>Alan Young</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This is section that inserts the user,pass,email if the row1 is there:</p>
<p>var dataArray = []; &#x2F;&#x2F;Start an array</p>
<p>while (rows1.isValidRow())<br>{<br>    dataArray.push({ID:rows1.fieldByName(&#39;ID&#39;),<br>                    UNAME:rows1.fieldByName(&#39;localUser&#39;),<br>                    KEY:rows1.fieldByName(&#39;localPass&#39;),<br>                    MAIL:rows1.fieldByName(&#39;localEmail&#39;)});<br>    rows1.next();<br>}<br>&#x2F;&#x2F; check if sqlite has user in table and set value of text fields<br>if(rowCount &gt;= 1 ){<br>    username.value = (dataArray[0].UNAME);<br>    password.value = (dataArray[0].KEY);<br>    eMail.value = (dataArray[0].MAIL);<br>    }    </p>
<p>rows1.close();</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 16th 2010, 9:35:43 am">December 16th 2010</span>
											by <span class='authorname'>Alan Young</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have a similar problem with a custom  button is shows up in the simulator but not on the device.</p>
<p>I posted the question but I have had no reply </p>
<p>http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;89541&#x2F;custom-buttons-not-show-on-device-iphone</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 16th 2010, 9:44:25 am">December 16th 2010</span>
											by <span class='authorname'>Alan Young</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-163031">
				
						<section>
							<p>How do you know whether the database is working or not? Do you have some forms of feedback like an alert or something?</p>
<p>And I noticed something that is HIGHLY UNUSUAL:</p>
<p>var dbIn = Ti.Database.install(&#39;localData.sqlite&#39;,&#39;localDataDB&#39;);<br>You should do this once, at the start of your app.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 16th 2010, 9:49:28 am">December 16th 2010</span>
								by <span class='authorname'>Peter Lum</span><br>
								<a class="icon-bg icon-link" href="../../question/90421/database-not-inserting-data-into-database-on-device.html#answer-163031" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Peter</p>
<p>Sorry if my code is a bit allover the place, I&#39;m still working out how to use titanium.</p>
<p>This was the only way I could get to work on the simulator. Its not working on the device </p>
<p>I connect to the database to check if there is a 1 row entry and if there is an entry select all and populate the fields with that data then the user can just login with having to re-enter there user information </p>
<p>the second time I connect to the database:<br>I only connect the second time when the user click the login button and if there is no row of data in the database (because this is the first time they used the app) the data in the txt fields i.e the user,pass, email is inserted. Then after the data has been inserted, the next time they open the app they won&#39;t have to re-enter there pass user details</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 16th 2010, 10:15:40 am">December 16th 2010</span>
											by <span class='authorname'>Alan Young</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So I know that the data is not being inserted into the data base or that the data is not being received from the database because when I try my app the, I entre the login details for the first time and then when I reopen the app the details have to be re-entered</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 16th 2010, 10:19:03 am">December 16th 2010</span>
											by <span class='authorname'>Alan Young</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-163751">
				
						<section>
							<p>Ok I used open database instead of install database I but I understand the database procedure.</p>
<p>Install at the beginning of the app<br>Open when you need to do something<br>close when you have finished</p>
<p>var dbIn = Titanium.Database.open(&#39;localDataDB&#39;);<br>&#x2F;&#x2F;var db = Ti.Database.install(&#39;localData.sqlite&#39;,&#39;localDataDB&#39;);<br>var rows1 = dbIn.execute(&#39;SELECT * FROM keyChain&#39;);<br>var rowCount = rows1.getRowCount();<br>&#x2F;&#x2F;Function to insert user information into sqlite DB<br>function insertUser(u,p,m){<br>&#x2F;&#x2F;var dbIn = Ti.Database.install(&#39;localData.sqlite&#39;,&#39;localDataDB&#39;);</p>
<p>dbIn.execute(&#39;INSERT INTO keyChain (ID, localUser, localPass, localEmail) VALUES(&quot;1&quot;,&quot;&#39;+u+&#39;&quot;,&quot;&#39;+p+&#39;&quot;,&quot;&#39;+m+&#39;&quot;)&#39;);</p>
<p>Ti.API.info(&#39;JUST INSERTED, rowsAffected = &#39; + dbIn.rowsAffected);<br>Ti.API.info(&#39;JUST INSERTED, lastInsertRowId = &#39; + dbIn.lastInsertRowId);</p>
<p>dbIn.close();<br>}</p>
<p>&#x2F;&#x2F;Send Login infomation to remote server<br>    loginBt.addEventListener(&#39;click&#39;, function()<br>{</p>
<p>userName = Ti.Utils.base64encode(username.value);<br>passWord = Ti.Utils.md5HexDigest(password.value);<br>Ti.API.info(&quot;http:&#x2F;&#x2F;www.agentglamour.com&#x2F;app&#x2F;Login1.php?user=&quot;+(userName)+&quot;&amp;pass=&quot;+(passWord));<br>Ti.API.info(userName);<br>Ti.API.info(passWord);<br>Ti.API.info(rowCount);<br>sendUser();</p>
<p>if(rowCount != 1 &amp;&amp; username.value != null){insertUser(username.value,password.value,eMail.value);}</p>
<p>});</p>
<p>I tried it again on my device </p>
<p>And I know it doesn&#39;t work because either the data is not saving in the database or the data is not reloading from the database because the txt field are empty after inputting user infomation</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 16th 2010, 6:51:32 pm">December 16th 2010</span>
								by <span class='authorname'>Alan Young</span><br>
								<a class="icon-bg icon-link" href="../../question/90421/database-not-inserting-data-into-database-on-device.html#answer-163751" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-163761">
				
						<section>
							<p>figured it out :)</p>
<p>Titanium dosen&#39;t copy the database file over to the  xcode resources folder after I copied the sqlite file across the database worked thanks people for your help.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 16th 2010, 7:02:40 pm">December 16th 2010</span>
								by <span class='authorname'>Alan Young</span><br>
								<a class="icon-bg icon-link" href="../../question/90421/database-not-inserting-data-into-database-on-device.html#answer-163761" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
