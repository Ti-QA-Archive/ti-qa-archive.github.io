<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android mapview » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android mapview</h1>
		</header>
		<section>
			<p>Hi. Now im going nuts….</p>
<p>I have created a new project with copied code from another project.<br>The thing is…</p>
<p>Suddenly creating mapview makes the app crash.<br>No code has changed from the copied project.</p>
<p>Here is some output from the console (running debug mode on device)</p>
<p>[WARN][TiMapViewProxy( 7030)] (main) [56,52159] Application&#39;s root activity has been destroyed.  Unable to create MapView.<br>[WARN][dalvikvm( 7030)] threadid=1: thread exiting with uncaught exception (group=0x4001e578)<br>[ERROR][TiApplication( 7030)] (main) [1,52160] Sending event: exception on thread: main msg:java.lang.NullPointerException; Titanium 3.0.0,2012&#x2F;12&#x2F;12 18:49,a5894b3<br>[ERROR][TiApplication( 7030)] java.lang.NullPointerException<br>[ERROR][TiApplication( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:446)<br>[ERROR][TiApplication( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:415)<br>[ERROR][TiApplication( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:428)<br>[ERROR][TiApplication( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.java:477)<br>[ERROR][TiApplication( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:445)<br>[ERROR][TiApplication( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:415)<br>[ERROR][TiApplication( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:428)<br>[ERROR][TiApplication( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleAdd(TiViewProxy.java:561)<br>[ERROR][TiApplication( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage(TiViewProxy.java:208)<br>[ERROR][TiApplication( 7030)]     at android.os.Handler.dispatchMessage(Handler.java:95)<br>[ERROR][TiApplication( 7030)]     at android.os.Looper.loop(Looper.java:130)<br>[ERROR][TiApplication( 7030)]     at android.app.ActivityThread.main(ActivityThread.java:3691)<br>[ERROR][TiApplication( 7030)]     at java.lang.reflect.Method.invokeNative(Native Method)<br>[ERROR][TiApplication( 7030)]     at java.lang.reflect.Method.invoke(Method.java:507)<br>[ERROR][TiApplication( 7030)]     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)<br>[ERROR][TiApplication( 7030)]     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)<br>[ERROR][TiApplication( 7030)]     at dalvik.system.NativeStart.main(Native Method)<br>[ERROR][AndroidRuntime( 7030)] FATAL EXCEPTION: main<br>[ERROR][AndroidRuntime( 7030)] java.lang.NullPointerException<br>[ERROR][AndroidRuntime( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:446)<br>[ERROR][AndroidRuntime( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:415)<br>[ERROR][AndroidRuntime( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:428)<br>[ERROR][AndroidRuntime( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.java:477)<br>[ERROR][AndroidRuntime( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:445)<br>[ERROR][AndroidRuntime( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:415)<br>[ERROR][AndroidRuntime( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:428)<br>[ERROR][AndroidRuntime( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleAdd(TiViewProxy.java:561)<br>[ERROR][AndroidRuntime( 7030)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage(TiViewProxy.java:208)<br>[ERROR][AndroidRuntime( 7030)]     at android.os.Handler.dispatchMessage(Handler.java:95)<br>[ERROR][AndroidRuntime( 7030)]     at android.os.Looper.loop(Looper.java:130)<br>[ERROR][AndroidRuntime( 7030)]     at android.app.ActivityThread.main(ActivityThread.java:3691)<br>[ERROR][AndroidRuntime( 7030)]     at java.lang.reflect.Method.invokeNative(Native Method)<br>[ERROR][AndroidRuntime( 7030)]     at java.lang.reflect.Method.invoke(Method.java:507)<br>[ERROR][AndroidRuntime( 7030)]     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)<br>[ERROR][AndroidRuntime( 7030)]     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)<br>[ERROR][AndroidRuntime( 7030)]     at dalvik.system.NativeStart.main(Native Method)<br>[WARN][ActivityManager( 2704)]   Force finishing activity com.barsys.barsys1234&#x2F;org.appcelerator.titanium.TiActivity<br>[ERROR][        ( 2704)] Dumpstate &gt; &#x2F;data&#x2F;log&#x2F;dumpstate_app_error</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 18th 2012, 1:45:26 pm">December 18th 2012</span>
				by <span class='authorname'>Tom Jakobsen</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>mapview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-253037">
				
						<section>
							<p>Hmmm. Maybe i found the solution myself. Helps posting here :-)  Seems like that the mapview dont like that i have 2 windows opened?<br>I created a loadingwindow wich i closed after initiating the app window.<br>Seems like it didnt like me doing that.  Fixed it with just hiding the loadingwindow.</p>
<p>Now im stuck wondering why ??</p>
<p>Thanks<br>Tom</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 18th 2012, 2:29:41 pm">December 18th 2012</span>
								by <span class='authorname'>Tom Jakobsen</span><br>
								<a class="icon-bg icon-link" href="question/145910/android-mapview#answer-253037" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Tom, you are a genious! exact the same problem, exact the same solution!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2013, 12:51:48 pm">January 14th 2013</span>
											by <span class='authorname'>Beto S</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-253036">
				
						<section>
							<p>Hi</p>
<p>A couple of things to check;</p>
<ul>
<li>If you have created a new project with an Android Map, have you taken time to merge the <strong>TiApp.xml</strong> elements related to android maps?</li>
<li>My favourite - when all else fails <strong>Project &gt; Clean</strong> once you have closed any emulators or simulators.</li>
</ul>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 18th 2012, 1:51:14 pm">December 18th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/145910/android-mapview#answer-253036" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi</p>
<p>If you are saying you have TWO maps then that is true, Android apps can ONLY have one map view in scope at any one time.  If you need it in more than one place you must remove the first one before adding the second one.  iOS does not have this restriction.</p>
<p>If this is because of TWO windows then it is unlikely that this is the cause and the solution you have is more likely a coincidence.</p>
<p>You need to post some simple reproducible code so we can see if there is anything obvious.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 18th 2012, 3:09:16 pm">December 18th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcolm, no i dont have two maps.  Must be somekind of mixup. However, hiding the &quot;loadingwin&quot; instead of closing it, fixed it.</p>
<p>Here is some code from app.js</p>
<pre><code class="hljs"><span class="hljs-comment">//MAKE A WINDOW THAT SHOW THE LOADINGPROCESS</span>
<span class="hljs-comment">//THE STATUS IS UPDATED FROM fireEvent in the checkupdate.js and updatelocaldata.js</span>

<span class="hljs-keyword">var</span> loadingwindow= Ti.UI.createWindow({
        navBarHidden:<span class="hljs-literal">true</span>,
        exitOnClose:<span class="hljs-literal">true</span>,
        backgroundImage:<span class="hljs-string">'/images/Default.png'</span>
    });

<span class="hljs-keyword">var</span> loadingwindowview =    Ti.UI.createView({
    bottom:<span class="hljs-number">0</span>,
    height:<span class="hljs-number">80</span>,
    backgroundColor:<span class="hljs-string">'#000'</span>,
    opacity:<span class="hljs-number">0.6</span>
});
<span class="hljs-keyword">var</span> loadingwindowviewlabel = Ti.UI.createLabel({
    text:<span class="hljs-string">"Trying to check for updates...."</span>,
    color:<span class="hljs-string">"#fff"</span>
});
Ti.App.addEventListener(<span class="hljs-string">'updateloadinglabel'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>)</span>{
    <span class="hljs-keyword">var</span> text = data.text;
    loadingwindowviewlabel.text=text;
})

loadingwindowview.add(loadingwindowviewlabel);
loadingwindow.add(loadingwindowview);
loadingwindow.open();

<span class="hljs-keyword">var</span> checkupdatenow = <span class="hljs-keyword">new</span> checkupdate();<span class="hljs-comment">//this scripts checks if its necessary to update the local db and fires an event when ready</span>

Ti.App.addEventListener(<span class="hljs-string">'checkupdate_done'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)
</span>{
    <span class="hljs-keyword">var</span> needupdate = data.needupdate;

    Ti.API.info(<span class="hljs-string">'UPDATE : '</span>+needupdate);
    <span class="hljs-keyword">if</span>(needupdate===<span class="hljs-string">"true"</span>)
    {
        <span class="hljs-keyword">var</span> updatelocaldatanow = <span class="hljs-keyword">new</span> updatelocaldata();<span class="hljs-comment">//this script listens for the fired event from checkupdatenow</span>
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(needupdate===<span class="hljs-string">"NO_CONNECTION"</span>)<span class="hljs-comment">//OK WE HAVE NO CONNECTION LETS DO SOMETHING</span>
    {
        Ti.App.fireEvent(<span class="hljs-string">'updateloadinglabel'</span>,{
            text:<span class="hljs-string">"No internet. Could not check for update"</span>
        });
        Ti.API.info(<span class="hljs-string">"Needupdate says NO_CONNECTION"</span>);
        Ti.App.fireEvent(<span class="hljs-string">"readytoshow"</span>,
        {
            ready:<span class="hljs-string">"TRUE"</span>
        });

    }
    <span class="hljs-keyword">else</span> <span class="hljs-comment">//OK THE needupdate says false. lets just fire the event and use the data we allready got</span>
    {
        Ti.API.info(<span class="hljs-string">"Needupdate says NO_CONNECTION"</span>);
        Ti.App.fireEvent(<span class="hljs-string">'updateloadinglabel'</span>,{
            text:<span class="hljs-string">"NO CONNECTION 2"</span>
        });
        Ti.App.fireEvent(<span class="hljs-string">"readytoshow"</span>,
        {
            ready:<span class="hljs-string">"TRUE"</span>
        });

    }

    Ti.App.removeEventListener(<span class="hljs-string">'checkupdate_done'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{ });

});


Ti.App.addEventListener(<span class="hljs-string">'readytoshow'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)//<span class="hljs-title">the</span> <span class="hljs-title">readytoshow</span> <span class="hljs-title">event</span> <span class="hljs-title">is</span> <span class="hljs-title">fired</span> <span class="hljs-title">from</span> <span class="hljs-title">updatelocaldata</span>
</span>{ 

    Ti.App.fireEvent(<span class="hljs-string">'updateloadinglabel'</span>,{
        text:<span class="hljs-string">"Building interface"</span>
    });
    <span class="hljs-comment">//platform-specific UI bootstrap</span>
    <span class="hljs-keyword">var</span> app = <span class="hljs-built_in">require</span>(<span class="hljs-string">'/ui/bootstrap'</span>);

        Ti.App.removeEventListener(<span class="hljs-string">'readytoshow'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
        </span>{ 

        });    
        Ti.App.removeEventListener(<span class="hljs-string">'updateloadinglabel'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
        </span>{ 

        });                
        setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{        
        <span class="hljs-keyword">var</span> tabs=app.launch();
        Ti.App.myData = {
            tabs:tabs
        };
        loadingwindow.hide(); <span class="hljs-comment">// REPLACED   loadingwindow.close();, that made mapview crash</span>


    }, <span class="hljs-number">3000</span>);
</code></pre><p>Comments on this is appreciated.<br>Thanks<br>Tom</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 19th 2012, 5:22:23 am">December 19th 2012</span>
											by <span class='authorname'>Tom Jakobsen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>By the way. Anyone know if we still have to have google api key for apps in production?<br>Could any1 tell me the process there ?</p>
<p>Thanks</p>
<p>Tom</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 19th 2012, 5:23:50 am">December 19th 2012</span>
											by <span class='authorname'>Tom Jakobsen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
