<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Custom Tab Bar in iOS jumping from 1st to 3rd tab on app launch Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Custom Tab Bar in iOS jumping from 1st to 3rd tab on app launch</h1>
		</header>
		<section>
			<p>Hi guys,</p>
<p>I&#39;m using the <a href="https:&#x2F;&#x2F;github.com&#x2F;netsells&#x2F;customTabBar&#x2F;blob&#x2F;master&#x2F;customTabBar.js">custom tab bar code</a> to run 5 tabs in an iOS application. All works great, except one annoyance.</p>
<p>When you launch the app for the first time, I want the middle tab (index2 in this case) of 5 in total to be the default. Now, this works, but for a brief second, the 1st tab (index0) shows and then changes to the middle tab.</p>
<p>Is there any way of stopping this happening?</p>
<p>here is my code in app.js which sets the customtabs up</p>
<pre><code class="hljs"><span class="hljs-comment">// this sets the background color of the master UIView (when there are no windows/tab groups on it)</span>
Titanium.UI.setBackgroundColor(<span class="hljs-string">'#ceeded'</span>);

<span class="hljs-comment">// Install the SQLite database</span>
var db = Ti.Database.install(<span class="hljs-string">'my.db'</span>, <span class="hljs-string">'versionName'</span>);

<span class="hljs-comment">// Create the tab group</span>
var tabGroup = Titanium.UI.createTabGroup();

<span class="hljs-comment">// Assign windows &amp; tabs</span>
<span class="hljs-comment">// IMPORTANT:</span>
<span class="hljs-comment">//          'tabBarHidden: true' should be set on all windows</span>
<span class="hljs-comment">//          height should be set to 480 - customTabBar's height (change 480 to app screen height)</span>
var win1 = Titanium.UI.createWindow({ <span class="hljs-string">title:</span><span class="hljs-string">'Search'</span>, <span class="hljs-string">height:</span> <span class="hljs-number">416</span>, <span class="hljs-string">tabBarHidden:</span> <span class="hljs-literal">true</span>, <span class="hljs-string">barColor:</span><span class="hljs-string">'#005349'</span>, <span class="hljs-string">titleImage:</span><span class="hljs-string">'images/title.png'</span>, <span class="hljs-string">url:</span><span class="hljs-string">'search.js'</span> });
var tab1 = Titanium.UI.createTab({ <span class="hljs-string">window:</span>win1 });
var win2 = Titanium.UI.createWindow({ <span class="hljs-string">title:</span><span class="hljs-string">'Local'</span>, <span class="hljs-string">height:</span> <span class="hljs-number">416</span>, <span class="hljs-string">tabBarHidden:</span> <span class="hljs-literal">true</span>, <span class="hljs-string">barColor:</span><span class="hljs-string">'#005349'</span>, <span class="hljs-string">titleImage:</span><span class="hljs-string">'images/title.png'</span>, <span class="hljs-string">url:</span><span class="hljs-string">'local.js'</span> });
var tab2 = Titanium.UI.createTab({ <span class="hljs-string">window:</span>win2 });
var win3 = Titanium.UI.createWindow({ <span class="hljs-string">title:</span><span class="hljs-string">'Home'</span>, <span class="hljs-string">height:</span> <span class="hljs-number">416</span>, <span class="hljs-string">tabBarHidden:</span> <span class="hljs-literal">true</span>, <span class="hljs-string">barColor:</span><span class="hljs-string">'#005349'</span>, <span class="hljs-string">titleImage:</span><span class="hljs-string">'images/title.png'</span>, <span class="hljs-string">url:</span><span class="hljs-string">'home.js'</span> });
var tab3 = Titanium.UI.createTab({ <span class="hljs-string">window:</span>win3 });
var win4 = Titanium.UI.createWindow({ <span class="hljs-string">title:</span><span class="hljs-string">'Favourites'</span>, <span class="hljs-string">height:</span> <span class="hljs-number">416</span>, <span class="hljs-string">tabBarHidden:</span> <span class="hljs-literal">true</span>, <span class="hljs-string">barColor:</span><span class="hljs-string">'#005349'</span>, <span class="hljs-string">titleImage:</span><span class="hljs-string">'images/title.png'</span>, <span class="hljs-string">url:</span><span class="hljs-string">'favourites.js'</span> });
var tab4 = Titanium.UI.createTab({ <span class="hljs-string">window:</span>win4 });
var win5 = Titanium.UI.createWindow({ <span class="hljs-string">title:</span><span class="hljs-string">'News'</span>, <span class="hljs-string">height:</span> <span class="hljs-number">416</span>, <span class="hljs-string">tabBarHidden:</span> <span class="hljs-literal">true</span>, <span class="hljs-string">barColor:</span><span class="hljs-string">'#005349'</span>, <span class="hljs-string">titleImage:</span><span class="hljs-string">'images/title.png'</span>, <span class="hljs-string">url:</span><span class="hljs-string">'news.js'</span> });
var tab5 = Titanium.UI.createTab({ <span class="hljs-string">window:</span>win5 });
tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  
tabGroup.addTab(tab3);
tabGroup.addTab(tab4);
tabGroup.addTab(tab5);

<span class="hljs-comment">// open tab group</span>
tabGroup.open();

<span class="hljs-comment">// Here is the magic</span>
Ti.include(<span class="hljs-string">"customTabBar.js"</span>);

var ctb = <span class="hljs-keyword">new</span> CustomTabBar({
<span class="hljs-label">    tabBar:</span> tabGroup,
<span class="hljs-label">    imagePath:</span> <span class="hljs-string">'images/tabs/'</span>,
<span class="hljs-label">    width:</span> <span class="hljs-number">64</span>,
<span class="hljs-label">    height:</span> <span class="hljs-number">48</span>,
<span class="hljs-label">    items:</span> [
        { <span class="hljs-string">image:</span> <span class="hljs-string">'search.png'</span>, <span class="hljs-string">selected:</span> <span class="hljs-string">'search_over.png'</span> },
        { <span class="hljs-string">image:</span> <span class="hljs-string">'local.png'</span>, <span class="hljs-string">selected:</span> <span class="hljs-string">'local_over.png'</span> },
        { <span class="hljs-string">image:</span> <span class="hljs-string">'home.png'</span>, <span class="hljs-string">selected:</span> <span class="hljs-string">'home_over.png'</span> },
        { <span class="hljs-string">image:</span> <span class="hljs-string">'favourites.png'</span>, <span class="hljs-string">selected:</span> <span class="hljs-string">'favourites_over.png'</span> },
        { <span class="hljs-string">image:</span> <span class="hljs-string">'news.png'</span>, <span class="hljs-string">selected:</span> <span class="hljs-string">'news_over.png'</span> }
    ]
});

<span class="hljs-comment">// set middle tab to be open on app launch (0-4)</span>
tabGroup.setActiveTab(tabGroup.tabs[<span class="hljs-number">2</span>]);
</code></pre><p>And below is my slightly modified customTabBar.js file</p>
<pre><code class="hljs">CustomTabBar = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(settings)</span> </span>{
    <span class="hljs-keyword">var</span> tabBarItems = [];
    <span class="hljs-keyword">var</span>    tabCurrent = <span class="hljs-number">2</span>;

    <span class="hljs-keyword">var</span> resetTabs = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; tabBarItems.length; i++) {
            <span class="hljs-comment">// Clear all the images to make sure only</span>
            <span class="hljs-comment">// one is shown as selected</span>
            <span class="hljs-comment">//tabBarItems[i].image = null; commented out to fix errors</span>
            tabBarItems[i].image = <span class="hljs-string">'images/clear.png'</span>;
        }
    };

    <span class="hljs-keyword">var</span> assignClick = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(tabItem)</span> </span>{
        tabItem.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
            <span class="hljs-comment">// Just fetching the 'i' variable from the loop</span>
            <span class="hljs-keyword">var</span> pos = e.source.pos;

            <span class="hljs-keyword">if</span> (tabCurrent == pos) {
                <span class="hljs-comment">// TODO</span>
                <span class="hljs-comment">// Change back to root window, like the native tab action.</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }        

            <span class="hljs-comment">// Switch to the tab associated with the image pressed</span>
            settings.tabBar.tabs[pos].active = <span class="hljs-literal">true</span>;
            tabCurrent = pos;


            <span class="hljs-comment">// Reset all the tab images</span>
            resetTabs();

            <span class="hljs-comment">// Set the current tab as selected</span>
            tabBarItems[pos].image = settings.imagePath + settings.items[pos].selected;        
        });
    };

    <span class="hljs-comment">// Create the container for our tab items</span>
    <span class="hljs-keyword">var</span> customTabBar = Ti.UI.createWindow({
        height: <span class="hljs-number">48</span>,
        backgroundImage:<span class="hljs-string">'images/tabbarbackground.png'</span>,
        bottom: <span class="hljs-number">0</span>
    });


    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; settings.items.length; i++) {
        <span class="hljs-comment">// Go through each item and create an imageView</span>
        tabBarItems[i] = Titanium.UI.createImageView({
            <span class="hljs-comment">// background is the default image</span>
            backgroundImage: settings.imagePath + settings.items[i].image,

            <span class="hljs-comment">// image is the selected image</span>
            image: settings.imagePath + settings.items[i].selected,
            width: settings.width,
            height: settings.height,
            left: settings.width * i
        });

        <span class="hljs-comment">// Pass the item number (used later for changing tabs)</span>
        tabBarItems[i].pos = i;
        assignClick(tabBarItems[i]);

        <span class="hljs-comment">// Add to the container window</span>
        customTabBar.add(tabBarItems[i]);
    }

    <span class="hljs-comment">// Display the container and it's items</span>
    customTabBar.open();

    <span class="hljs-comment">// Set the first item as current :)</span>
    resetTabs();
    <span class="hljs-comment">//tabBarItems[0].image = settings.imagePath + settings.items[0].selected;</span>
    tabBarItems[<span class="hljs-number">2</span>].image = settings.imagePath + settings.items[<span class="hljs-number">2</span>].selected;

    <span class="hljs-keyword">return</span> {
        hide: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ customTabBar.hide(); },
        show: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ customTabBar.show(); }
    };
};
</code></pre><p>Any help would be greatly appreciated as it gives the appearance to the user that the app isn&#39;t behaving correctly.</p>
<p>Simon</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 9th 2012, 8:19:53 am">May 9th 2012</span>
				by <span class='authorname'>Simon Hume</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>customtabbar</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>tab</span></li>
					
						<li><span class='tagname'>tabgroup</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-238149">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi Simon,<br>Have you tried this way.first set index then open it.</p>
<pre><code class="hljs">// <span class="hljs-keyword">open</span> <span class="hljs-keyword">tab</span> group
tabGroup.setActiveTab(tabGroup.<span class="hljs-keyword">tabs</span>[<span class="hljs-number">2</span>]);

tabGroup.<span class="hljs-keyword">open</span>();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 9th 2012, 8:24:05 am">May 9th 2012</span>
								by <span class='authorname'>Nitin Chavda</span><br>
								<a class="icon-bg icon-link" href="question/136691/custom-tab-bar-in-ios-jumping-from-1st-to-3rd-tab-on-app-launch.html#answer-238149" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Nitin, thanks for this, stupid error on my part! It seems to have fixed seeing the first tab on launch, though the first tab icon (in the tab bar itself) still flashes in its &#39;selected&#39; state. Anything else I may have overlooked?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 9th 2012, 8:52:44 am">May 9th 2012</span>
											by <span class='authorname'>Simon Hume</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Try to use Activity Indicator at tabGroup open time so that it does not show flashes.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 9th 2012, 10:55:35 am">May 9th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
