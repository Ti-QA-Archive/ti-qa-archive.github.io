<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Density based properties in Alloy » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Density based properties in Alloy</h1>
		</header>
		<section>
			<p>Hello,</p>
<p>Currently my application is created in a classic mobile application, without the Alloy framework. In that application I use the dpi of the screen to adjust the sizes so the application looks almost the same on every screen.</p>
<p>How do you achieve this in Alloy? I know Alloy has Titanium Style Sheets (TSS), but you can&#39;t do math in there. Which means you can&#39;t adjust a size * the density factor.</p>
<p>Currently Classic implementation example (In Android):</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> ldf</span> = Ti.Platform.displayCaps.logicalDensityFactor;
<span class="hljs-variable"><span class="hljs-keyword">var</span> view</span> = Ti.UI.createView({
    width: <span class="hljs-number">50</span> * ldf,
    height: <span class="hljs-number">100</span> * ldf
});
</code></pre><p>Any proper way to do calculations with sizes etc in Alloy?</p>
<p>Thanks in advance<br>Patrick van Vuuren</p>
<p>Specifications:</p>
<ul>
<li>Ti.SDK 3.2.3 GA</li>
<li>Alloy 1.3.1</li>
<li>Android 4.0+</li>
<li>OS X 10.9.3</li>
</ul>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 20th 2014, 7:24:29 am">June 20th 2014</span>
				by <span class='authorname'>Patrick van Vuuren</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>calculations</span></li>
					
						<li><span class='tagname'>density</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>tss</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-279965">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>Titanium with Alloy is no different to Titanium without Alloy.  Your previous method uses a work-around we have all used in the past but there is no need to use that now for either Alloy&#x2F;Non-Alloy.</p>
<p>A couple of the many answers I have provided on this subject;</p>
<ul>
<li><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;148337&#x2F;how-to-achieve-same-layout-for-android-and-iphone-using-titanium">How to achieve same layout for Android and iPhone using Titanium</a></li>
<li><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;149743&#x2F;images-in-android">images in Android</a></li>
</ul>
<p>There is a lot of information in these two, more than you need, examples are not in alloy but the logic is identical.</p>
<p>Use DP as the measurement type which gives you the solution you used previously without any calculations required.</p>
<p>Use the section about making (confirming) your new app uses dp as the system unit by changing the <strong>tiapp.xml</strong></p>
<p>From this point forward all number values for dimensions and positions use that to define how to display things.  So your calculation is done for you automatically.</p>
<pre><code class="hljs"><span class="hljs-string">"#something"</span>: {
    height: <span class="hljs-number">200</span>,
    left: <span class="hljs-number">50</span>,
    top: <span class="hljs-number">40</span>,
    width: <span class="hljs-number">100</span>
}
</code></pre><p>These values scale automatically behind the scenes.  You do not need calculations, you do not need the density factor check.</p>
<p>So in short set <strong>systemunit</strong> to be <strong>dp</strong> in <strong>tiapp.xml</strong> enter real numbers (no suffixes) everywhere based on <strong>mdpi</strong> (100% density) and internally all units are calculated for you.  It is that simple.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 20th 2014, 8:53:51 am">June 20th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/175369/density-based-properties-in-alloy#answer-279965" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Those problems are fixed with the solution shown in the first post</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 20th 2014, 10:07:19 am">June 20th 2014</span>
											by <span class='authorname'>Patrick van Vuuren</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So for example, using a Samsung Galaxy S3, which has a high resolution, will look somewhat the same as a phone with a low resolution? Because I had problems having too big fonts on smaller phones, and aligning several views.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 20th 2014, 10:07:27 am">June 20th 2014</span>
											by <span class='authorname'>Patrick van Vuuren</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>When using real numbers for fontSize or &quot;&lt;number&gt;dp&quot; as fontSize, the fonts are scaled down too much on the iPad. </p>
<p>See the differences (Images):</p>
<ul>
<li><a href="http:&#x2F;&#x2F;imgur.com&#x2F;BBFe6Re">TiApp.xml</a></li>
<li><a href="http:&#x2F;&#x2F;imgur.com&#x2F;WTY3XxU">FontSize as real number or dp using dp unit</a></li>
<li><a href="http:&#x2F;&#x2F;imgur.com&#x2F;0N9oo9r">FontSize as calculated factor as shown in first post</a></li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="June 20th 2014, 10:34:51 am">June 20th 2014</span>
											by <span class='authorname'>Patrick van Vuuren</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Excellent glad the info helped.</p>
<p>Changes between devices are worked out as follows - simple example;</p>
<ul>
<li>Galaxy Ace [320x480] ratio 1; width automatically becomes 320</li>
<li>Samsung S II [480x800] ratio 1.5; width automatically becomes 320</li>
<li>Samsung S III [720x1280] ratio 2; width automatically becomes 360</li>
<li>Samsung S5 [1080x1920] ratio 3; width automatically becomes 360</li>
</ul>
<p>In these few examples the widths are basically 320 or 360.  This is great as it means everything is basically the same, and even better you can allow content to stretch to gain the extra.</p>
<p>You can see how easily this translates into a working app - even a three column view layout is really easy;</p>
<pre><code class="hljs">"<span class="hljs-id">#left</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">backgroundColor</span>:<span class="hljs-value"> <span class="hljs-string">"red"</span>,
    height: <span class="hljs-number">50</span>,
    left: <span class="hljs-number">0</span>,
    width: <span class="hljs-number">80</span>
</span></span></span>},
"<span class="hljs-id">#middle</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">backgroundColor</span>:<span class="hljs-value"> <span class="hljs-string">"green"</span>,
    height: <span class="hljs-number">50</span>,
    left: <span class="hljs-number">90</span>, // #left width + margin
    right: <span class="hljs-number">70</span>, // #right width + margin
    width: Ti.UI.FILL
</span></span></span>},
"<span class="hljs-id">#right</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">backgroundColor</span>:<span class="hljs-value"> <span class="hljs-string">"blue"</span>,
    height: <span class="hljs-number">50</span>,
    right: <span class="hljs-number">0</span>,
    width: <span class="hljs-number">60</span>
</span></span></span>}
</code></pre><p>This means that your layout works great on 320 as the #middle column becomes 160, on a 360 wide the #middle width is 200.  The same simple logic works for 1 and 2 column solutions.  You do not have to calculate anything.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 20th 2014, 10:56:01 am">June 20th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Fonts have been the poor cousin of decent sizes for some time.  The good news is that solutions for this are also easy and are much easier from Ti SDK 3.3, due any day now and available as release candidate already.</p>
<p>The easiest way to handle fonts and specifically font sizes is to pre plan them.  Think in terms html styles or MS Word styles.</p>
<p>Predefine the font sizes into styles you and then add them as classes as you go.  You can also subdivide choices into tablet or handheld and even platform</p>
<p><em>All values made up illustration only - I have not calculated things</em>. </p>
<pre><code class="hljs">"<span class="hljs-tag">Label</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">font</span>:<span class="hljs-value"> {
        fontSize: <span class="hljs-number">14</span>
    </span></span></span>}
},
"<span class="hljs-tag">Label</span><span class="hljs-attr_selector">[formfactor=tablet]</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">font</span>:<span class="hljs-value"> {
        fontSize: <span class="hljs-number">20</span>
    </span></span></span>}
},
"<span class="hljs-tag">h1</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">font</span>:<span class="hljs-value"> {
        fontSize: <span class="hljs-number">20</span>,
        fontWeight: <span class="hljs-string">"bold"</span>
    </span></span></span>}
},
"<span class="hljs-tag">h2</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">font</span>:<span class="hljs-value"> {
        fontSize: <span class="hljs-number">16</span>,
        fontWeight: <span class="hljs-string">"bold"</span>
    </span></span></span>}
},
"<span class="hljs-tag">p</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">font</span>:<span class="hljs-value"> {
        fontSize: <span class="hljs-number">14</span>,
        fontWeight: <span class="hljs-string">"normal"</span>
    </span></span></span>}
}
</code></pre><p>Then use them as follows;</p>
<pre><code class="hljs">&lt;Alloy&gt;
    &lt;<span class="hljs-keyword">View</span>&gt;
        &lt;<span class="hljs-keyword">Label</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"something h1"</span>&gt;Heading 1&lt;/<span class="hljs-keyword">Label</span>&gt;
        &lt;<span class="hljs-keyword">Label</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"whatever h2"</span>&gt;Heading 2&lt;/<span class="hljs-keyword">Label</span>&gt;
        &lt;<span class="hljs-keyword">Label</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"p"</span>&gt;Paragraph&lt;/<span class="hljs-keyword">Label</span>&gt;
    &lt;/<span class="hljs-keyword">View</span>&gt;
&lt;/Alloy&gt;
</code></pre><p>Do not apply fonts to any other class and simply combine them as the suggestion above.  This massively simplifies things.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 20th 2014, 11:06:35 am">June 20th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for your very detailed help. The DP indeed works very well, except for the fonts then.<br>I will keep the fonts based on the dpi factor for now, as changing everything is quite a lot of work because my application is quite complex already.</p>
<p>The sizes work out very well, tried it out ;).</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 20th 2014, 11:15:48 am">June 20th 2014</span>
											by <span class='authorname'>Patrick van Vuuren</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Glad I could help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 20th 2014, 2:03:02 pm">June 20th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
