<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Getting JSON response from a webservice » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Getting JSON response from a webservice</h1>
		</header>
		<section>
			<p>Hi, I am new to Titanium and developing an application which retrieves JSON response from a webservice. I am able to access the webservice and get the response successfully incase of iphone. But when I execute the same application in mobileweb I am getting an error like:</p>
<p>XMLHttpRequest cannot load &#39;the url which I used to retrieve the response&#39; .  Origin http:&#x2F;&#x2F;127.0.0.1:8020 is not allowed by Access-Control-Allow-Origin.</p>
<p>The following is the code I used to retrieve the data</p>
<p>url = &#39;url I am using to get the response&#39;;<br>var xhr = Ti.Network.createHTTPClient();</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (Ti.Network.online) {
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{<span class="hljs-comment">// Onload</span>
        <span class="hljs-comment">//var response = this.responseXML;</span>
        <span class="hljs-comment">//var response = this.responseText;</span>
        <span class="hljs-comment">//alert('response = '+response);</span>
        _cb(<span class="hljs-keyword">this</span>.responseText);
    };
    xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
            buttonNames : [<span class="hljs-string">'OK'</span>],
            message : <span class="hljs-string">'Error'</span>
        });
        dialog.show();
    };
    xhr.open(<span class="hljs-string">'GET'</span>, url);
    xhr.setRequestHeader(<span class="hljs-string">'Accept'</span>, <span class="hljs-string">'application/json'</span>);
    xhr.send();
} <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
        message : <span class="hljs-string">'No Connection available'</span>,
        buttonNames : [<span class="hljs-string">'OK'</span>]
    });
    dialog.show();
}
</code></pre><p>Can anyone share the solution ASAP.</p>
<p>Thanks in Advance…</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 10th 2012, 10:15:47 am">October 10th 2012</span>
				by <span class='authorname'>Prasad M.R.C</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>appcelerator</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-248988">
				
						<section>
							<p>Kindly add the following line under your web service file on top but inside the tag (eg php file then add it inside php tag &quot;&lt;?&quot;).<br>header(&quot;Access-Control-Allow-Origin: *&quot;);</p>
<p>this will allow the mobile web application to access cross origin as it is restricted in mobile web. You have look for appropriate cors headers if you are using different webservice technology such as (ASP.net or Java).</p>
<p>Here is the website from where you can find the code.</p>
<p>http:&#x2F;&#x2F;enable-cors.org&#x2F;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 10th 2012, 10:23:12 am">October 10th 2012</span>
								by <span class='authorname'>Jibran Khan</span><br>
								<a class="icon-bg icon-link" href="question/143317/getting-json-response-from-a-webservice#answer-248988" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This will work for both localhost and any hosting server.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 10th 2012, 10:24:51 am">October 10th 2012</span>
											by <span class='authorname'>Jibran Khan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi khan,<br>   The webservice is fine. But I am not able to access the webservice incase of mobile web in a browser. But I am able to get the data from that webservice incase of iphone. In browser I am getting the error like :</p>
<p>XMLHttpRequest cannot load &#39;the url which I used to retrieve the response&#39; . Origin http:&#x2F;&#x2F;127.0.0.1:8020 is not allowed by Access-Control-Allow-Origin.</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 10th 2012, 10:40:34 am">October 10th 2012</span>
											by <span class='authorname'>Prasad M.R.C</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes it will work in mobile apps which ever platform it is, but for mobile web you should add that header in the web service. It will then work for all.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 10th 2012, 11:01:03 am">October 10th 2012</span>
											by <span class='authorname'>Jibran Khan</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
