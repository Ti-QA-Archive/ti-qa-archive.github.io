<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium.Database.install install database empty Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium.Database.install install database empty</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>The problem I have when running the instruction to install the database Titanium.Database.install not working properly.<br>I put the database file on all sites but always installs the empty database.<br>When I access one of the tables produces error table does not exist.<br>Use the following code</p>
<pre><code class="hljs">
DbConstants.DB_NAME = <span class="hljs-string">'testdb'</span>;
DbConstants.DB_PATH_SOURCE = <span class="hljs-string">'../db.sqlite'</span>;

<span class="hljs-keyword">this</span>.installDataBase = function() {
    Ti.API.debug(<span class="hljs-string">"installDataBase &lt;--"</span>);

    <span class="hljs-keyword">if</span> ( Ti.Platform.osname == <span class="hljs-string">'android'</span> ) {
        <span class="hljs-keyword">file</span> = Ti.Filesystem.getFile(<span class="hljs-string">'file:///data/data/'</span>+ Ti.App.getID() + <span class="hljs-string">'/databases/'</span> + DbConstants.DB_NAME);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">file</span> = Ti.Filesystem.getFile(Ti.Filesystem.applicationSupportDirectory + <span class="hljs-string">'/database/'</span> + dbName + <span class="hljs-string">'.sql'</span>);
        }

    <span class="hljs-comment">//If it's there, delete it and reinstall the DB</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">file</span>.exists()) {
        Ti.API.debug(<span class="hljs-string">"database exist!!"</span>);
        <span class="hljs-keyword">file</span>.deleteFile();
        Titanium.Database.install(DbConstants.DB_PATH_SOURCE, DbConstants.DB_NAME);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">//Otherwise, install it for the first time</span>
        Titanium.Database.install(DbConstants.DB_PATH_SOURCE, DbConstants.DB_NAME);
    }

    Ti.API.debug(<span class="hljs-string">"installDataBase --&gt;"</span>);
    };
</code></pre><p>System used<br>-Titanium version 1.8.1<br>-Android 2.3.3<br>-Win 7</p>
<p>Thanks for any help</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 19th 2012, 12:29:28 pm">February 19th 2012</span>
				by <span class='authorname'>Marco Aurelio Osorio</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>database empty</span></li>
					
						<li><span class='tagname'>install</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-230837">
				
						<section>
							<p>Since 1.8.x the database install path has been normalised for both IOS and Android and the updated Wiki advises to alway use an absolute path relative to the root Resources folder.  So always use &#39;&#x2F;path-to-db&#x2F;dbname&#39;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 19th 2012, 12:35:19 pm">February 19th 2012</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="question/132408/titaniumdatabaseinstall-install-database-empty.html#answer-230837" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>hi Nick,</p>
<p>can you please make a changes on my db installation?<br>i dont understand how to fix my problem,<br>this is my code:</p>
<pre><code class="hljs">DatabaseManager.dbHandler = Ti.Database.install(<span class="hljs-string">"/Trails.sqlite"</span>, <span class="hljs-string">'Trails'</span>);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 19th 2012, 1:34:56 pm">February 19th 2012</span>
											by <span class='authorname'>Eliza Sapir</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi, you seem to be doing the right thing (if your Trails.sql is in the Resources folder).  Remember to completely uninstall your app before trying again ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 19th 2012, 2:39:40 pm">February 19th 2012</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i tried but i have still this problem, its realy strange why on android with sdk 2.3.4 everything works fine but on android sdk 2.2 i have this problem? maybe titanium 1.8.1 not support sdk 2.2 ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2012, 7:33:38 am">February 20th 2012</span>
											by <span class='authorname'>Eliza Sapir</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-230904">
				
						<section>
							<p>Hi Nick,<br>I changed the path in the past to &#39;&#x2F;data&#x2F;testdb.sqlite&#39; and the error is the same.<br>Being the absolute path &#39;Resources&#x2F;data&#x2F;testdb.sqlite&#39;.<br>The database I created with SQLiteManager, with tables and data, but when the installation is completely empty, just create the table &#39;android_metadata&#39;.</p>
<p>Thanks again</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 20th 2012, 6:56:32 am">February 20th 2012</span>
								by <span class='authorname'>Marco Aurelio Osorio</span><br>
								<a class="icon-bg icon-link" href="question/132408/titaniumdatabaseinstall-install-database-empty.html#answer-230904" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>hello Marco,</p>
<p>can you tell me how to fix this problem?<br>i have the same problem and the full path doesnt help me</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2012, 7:46:27 am">February 20th 2012</span>
											by <span class='authorname'>Eliza Sapir</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Eliza Sorry, but I could not fix the problem.<br>Intentabla explain to Nick that previous tests have set the path of my database file on multiple sites but the result is the same, empty database onAndroid device.</p>
<p>Examples of location:</p>
<p>Path to database file</p>
<pre><code class="hljs">Resources/data/testdb.sqlite

Ti.Datebase.install (<span class="hljs-string">'/data/testdb.sqlite'</span>, <span class="hljs-string">'testdb'</span>)<span class="hljs-comment">;</span>

<span class="hljs-literal">or</span>

Resources/testdb.sqlite

Ti.Datebase.install (<span class="hljs-string">'/testdb.sqlite'</span>, <span class="hljs-string">'testdb'</span>)<span class="hljs-comment">;</span>

<span class="hljs-literal">or</span>

Resources/testdb.sqlite

Ti.Datebase.install (<span class="hljs-string">'/testdb.sqlite'</span>, <span class="hljs-string">'testdb.db'</span>)<span class="hljs-comment">;</span>

<span class="hljs-literal">or</span>

Resources/testdb.db

Ti.Datebase.install (<span class="hljs-string">'/testdb.db'</span>, <span class="hljs-string">'testdb'</span>)<span class="hljs-comment">;</span>
</code></pre><p>I come to think that may be a bug, but I would like someone to confirm</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2012, 8:10:48 am">February 20th 2012</span>
											by <span class='authorname'>Marco Aurelio Osorio</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i tried all this look my application works on my htc sensation sdk 2.3.4 but when i try to install this application on galaxy sdk 2.2 i get this problem:</p>
<pre><code class="hljs">[<span class="hljs-number">92</span>,<span class="hljs-number">19</span>] ti:/invoker.js
Uncaught Error: Java Exception occured
<span class="hljs-keyword">return</span> delegate.
apply(invoker,__thisObj__,args);
</code></pre><p>i lost alot of time on this bug!</p>
<p>and i dont know what to do to fix it</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2012, 8:18:19 am">February 20th 2012</span>
											by <span class='authorname'>Eliza Sapir</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It&#39;s the same message as shown in the Android emulator Nexus One</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2012, 8:35:30 am">February 20th 2012</span>
											by <span class='authorname'>Marco Aurelio Osorio</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I suggest that you comment on the installation instructions for the database file on the device and directly upload the file to the device if you are testing in the emulator to continue.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2012, 9:39:04 am">February 20th 2012</span>
											by <span class='authorname'>Marco Aurelio Osorio</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Any direction ?<br>Still I am facing the same issue ..</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 18th 2012, 5:25:30 pm">August 18th 2012</span>
											by <span class='authorname'>Soutom Dhara</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-263059">
				
						<section>
							<p>Help me!!!!</p>
<pre><code class="hljs">    backtrace = "#0 <span class="hljs-keyword">u</span>() at <span class="hljs-keyword">file</span>:<span class="hljs-comment">//localhost/var/mobile/Applications/0A840812-585E-4D63-BD19-F3BAFB55BE16/wa-3.1.app/app/ui/common/contact/Contacts.js:1</span>
</code></pre><p>#1 Contacts() at file:&#x2F;&#x2F;localhost&#x2F;var&#x2F;mobile&#x2F;Applications&#x2F;0A840812-585E-4D63-BD19-F3BAFB55BE16&#x2F;wa-3.1.app&#x2F;app&#x2F;ui&#x2F;common&#x2F;contact&#x2F;Contacts.js:1</p>
<p>#2 () at file:&#x2F;&#x2F;localhost&#x2F;var&#x2F;mobile&#x2F;Applications&#x2F;0A840812-585E-4D63-BD19-F3BAFB55BE16&#x2F;wa-3.1.app&#x2F;app&#x2F;ui&#x2F;common&#x2F;timeline&#x2F;Window&#x2F;WindowIOS&#x2F;WindowIOS.js:1&quot;;<br>        line = 1;<br>        message = &quot;&#39;undefined&#39; is not an object (evaluating &#39;c.length&#39;)&quot;;<br>        name = TypeError;<br>        sourceId = 85615968;<br>        sourceURL = &quot;file:&#x2F;&#x2F;localhost&#x2F;var&#x2F;mobile&#x2F;Applications&#x2F;0A840812-585E-4D63-BD19-F3BAFB55BE16&#x2F;wa-3.1.app&#x2F;app&#x2F;handle&#x2F;common&#x2F;contact&#x2F;Contact.js&quot;;<br>    }</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 21st 2013, 12:53:19 am">May 21st 2013</span>
								by <span class='authorname'>Chinh Nguyen Quoc</span><br>
								<a class="icon-bg icon-link" href="question/132408/titaniumdatabaseinstall-install-database-empty.html#answer-263059" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
