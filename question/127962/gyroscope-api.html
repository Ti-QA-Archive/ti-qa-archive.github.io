<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Gyroscope API? Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Gyroscope API?</h1>
		</header>
		<section>
			<p>I found a question from 4 months ago with no answer. Being able to use the accelerometer in conjunction with the gyroscope would allow for a large number of useful apps. It seems there is no way to access the gyroscope through titanium. Please let me know if I have missed something or when this functionality may be included.</p>
<p>Thank you</p>
<p>Jonathan</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 9th 2011, 1:13:21 am">November 9th 2011</span>
				by <span class='authorname'>Jonathan Belew</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>gyroscope</span></li>
					
						<li><span class='tagname'>kitchensink</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-223108">
				
						<section>
							<p>Check out the latest episode of Forging Titanium where I create a native Android module for extending the sensor capabilities of Android and expose them to the Titanium Javascript API. This would be a good blueprint for adding any additional sensor data you might need. </p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;blog&#x2F;2011&#x2F;11&#x2F;forging-titanium-episode-14-twisti-part-1-android-module.html">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;blog&#x2F;2011&#x2F;11&#x2F;forging-titanium-episode-14-twisti-part-1-android-module.html</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 11th 2011, 1:25:58 pm">November 11th 2011</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="../../question/127962/gyroscope-api.html#answer-223108" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hey Tony. I watched your&#39;s Twisti episodes and I watched <a href="http:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=C7JQ7Rpwn2k">this video</a> which explains sensor fusion on Android. </p>
<p>Twisty is exactly what I need but I need roll, pitch and yaw relative to geographic north and I need it for bot OS&#39;s. So I&#39;ll try to make two modules now. </p>
<p>On Android it is all in class called SensorManager and I see that You have been using it in Twisti also. From what I&#39;ve seen in your code on the video, you use magnetic field and accelerometer data, but not gyroscope. And still, you get perfectly stable and accurate values. Or those values are already modified with gyroscope values in SensorManager internally?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 8:50:25 am">February 16th 2012</span>
											by <span class='authorname'>Dino Bartosak</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I believe all it needs to get an accurate 3 dimensional orientation is the combination of the accelerometer and magnetic field matrices. Those matrices are manipulated <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator-developer-relations&#x2F;Forging-Titanium&#x2F;blob&#x2F;master&#x2F;ep-014&#x2F;Twisti&#x2F;src&#x2F;ti&#x2F;twisti&#x2F;TwistiModule.java#L94-96">here</a> via a few built-in Android functions I&#39;m not gonna pretend to know the details of. But basically they are combining the matrices to find the orientation relative to magnetic north, which is why I have the &quot;calibrate&quot; button in the app which changes &quot;magnetic north&quot; to whatever direction the device is currently facing.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 11:41:23 am">February 16th 2012</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>What I really liked watching your example was that the values are steady while your arm is steady, even the 15th decimal. </p>
<p>On iPhone if I read accelerometer&#39;s values (via Titanium API) they vary from the first decimal. I don&#39;t have Android device so if you could do a simple test on Android device I would be grateful. If you can just print XYZ from accelerometer but via Titanium&#39;s API, not Twisti module.<br>I wonder will those XYZ still be steady. Thank you.</p>
<p>Here is the whole app.js (based on kitchensink basically):</p>
<pre><code class="hljs">var win = Titanium.UI.createWindow({
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'white'</span>
});
var accelerometerAdded = <span class="hljs-literal">false</span>;

var x = Titanium.UI.createLabel({
    <span class="hljs-string">text :</span> <span class="hljs-string">'x:'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">color :</span> <span class="hljs-string">'#555'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>
});
win.add(x);

var y = Titanium.UI.createLabel({
    <span class="hljs-string">text :</span> <span class="hljs-string">'y:'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">30</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">color :</span> <span class="hljs-string">'#555'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>
});
win.add(y);

var z = Titanium.UI.createLabel({
    <span class="hljs-string">text :</span> <span class="hljs-string">'z:'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">50</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">color :</span> <span class="hljs-string">'#555'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>
});
win.add(z);

var ts = Titanium.UI.createLabel({
    <span class="hljs-string">text :</span> <span class="hljs-string">'timestamp:'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">70</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">color :</span> <span class="hljs-string">'#555'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>
});
win.add(ts);

var lat = Titanium.UI.createLabel({
    <span class="hljs-string">text :</span> <span class="hljs-string">'Lat:'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">90</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">color :</span> <span class="hljs-string">'#555'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>
});
win.add(lat);

var lon = Titanium.UI.createLabel({
    <span class="hljs-string">text :</span> <span class="hljs-string">'Lon:'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">110</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">color :</span> <span class="hljs-string">'#555'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>
});
win.add(lon);

var alt = Titanium.UI.createLabel({
    <span class="hljs-string">text :</span> <span class="hljs-string">'Alt:'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">130</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">color :</span> <span class="hljs-string">'#555'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>
});
win.add(alt);

var locationCallback = function(e) {
    lat.text = <span class="hljs-string">'Lat: '</span> + e.coords.latitude;
    lon.text = <span class="hljs-string">'Lon:'</span> + e.coords.longitude;
    alt.text = <span class="hljs-string">'Alt:'</span> + e.coords.altitude;
}
var accelerometerCallback = function(e) {
    ts.text = <span class="hljs-string">'timpestamp:'</span> + e.timestamp;
    x.text = <span class="hljs-string">'x: '</span> + e.x;
    y.text = <span class="hljs-string">'y:'</span> + e.y;
    z.text = <span class="hljs-string">'z:'</span> + e.z;
};

Ti.Geolocation.purpose = <span class="hljs-string">'De lokaciju bolan'</span>

Ti.Geolocation.addEventListener(<span class="hljs-string">'location'</span>, locationCallback);

Ti.Accelerometer.addEventListener(<span class="hljs-string">'update'</span>, accelerometerCallback);
accelerometerAdded = <span class="hljs-literal">true</span>;

<span class="hljs-keyword">if</span>(Titanium.Platform.name === <span class="hljs-string">'iPhone OS'</span> &amp;&amp; Titanium.Platform.model === <span class="hljs-string">'Simulator'</span>) {
    var notice = Titanium.UI.createLabel({
        <span class="hljs-string">bottom :</span> <span class="hljs-number">50</span>,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-number">18</span>
        },
        <span class="hljs-string">color :</span> <span class="hljs-string">'#900'</span>,
        <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">text :</span> <span class="hljs-string">'Note: Accelerometer does not work in simulator'</span>,
        <span class="hljs-string">textAlign :</span> <span class="hljs-string">'center'</span>
    });
    win.add(notice);
}

<span class="hljs-keyword">if</span>(Titanium.Platform.name === <span class="hljs-string">'android'</span>) {
    Ti.Android.currentActivity.addEventListener(<span class="hljs-string">'pause'</span>, function(e) {
        <span class="hljs-keyword">if</span>(accelerometerAdded) {
            Ti.API.info(<span class="hljs-string">"removing accelerometer callback on pause"</span>);
            Ti.Accelerometer.removeEventListener(<span class="hljs-string">'update'</span>, accelerometerCallback);
        }
    });
    Ti.Android.currentActivity.addEventListener(<span class="hljs-string">'resume'</span>, function(e) {
        <span class="hljs-keyword">if</span>(accelerometerAdded) {
            Ti.API.info(<span class="hljs-string">"adding accelerometer callback on resume"</span>);
            Ti.Accelerometer.addEventListener(<span class="hljs-string">'update'</span>, accelerometerCallback);
        }
    });
}

win.open();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 12:22:53 pm">February 16th 2012</span>
											by <span class='authorname'>Dino Bartosak</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The reason it stays relatively steady on android is that you&#39;ll notice in the code that every new reading that gets sent to your JS code via event requires both an accelerometer and magnetic field event on the native side. While the magnetic field seems to change almost constantly, the accelerometer is much more stable. So the magnetic field in Twisti, not the accelerometer, is what would potentially cause chaotic values.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 12:45:41 pm">February 16th 2012</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I see that iOS has it&#39;s own Sensor Fusion called Core motion and it gives me the CMAttitude object which contains roll, pitch ans yaw (azimuth) (I&#39;ll test it tomorrow with titanium module). So I think that it internally checks for all three values (acc, gyro and compas) to get me needed correct informations.</p>
<p>I understood that in yours code you wait for both values, but still, you also send XYZ from accelerometer all the time and those values are also steady in all decimals while your hand is steady.</p>
<p>If you go to KitchenSink -&gt; Accelerometer example, on iPhone values are jumping so I am wondering is it the same thing on Android.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 1:14:57 pm">February 16th 2012</span>
											by <span class='authorname'>Dino Bartosak</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-227398">
				
						<section>
							<p>i am trying to make an iphone extension using CMMotionManager. The line </p>
<pre><code class="hljs">CMMotionManager *motionManager = <span class="hljs-comment">[<span class="hljs-comment">[CMMotionManager alloc]</span> init]</span>;
</code></pre><p>is crashing the device build. I am searching for a solution.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 13th 2012, 6:48:10 am">January 13th 2012</span>
								by <span class='authorname'>Ye Chuah</span><br>
								<a class="icon-bg icon-link" href="../../question/127962/gyroscope-api.html#answer-227398" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Have you finished this module? I also need it and I am now reading iOS modules tutorial but I am a bit of confused.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 10:28:32 am">February 16th 2012</span>
											by <span class='authorname'>Dino Bartosak</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
