<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Link fails because the module is not built for armv6 » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Link fails because the module is not built for armv6</h1>
		</header>
		<section>
			<p>I am creating a IOS Titanium module for the redpark serial adapter.  The redpark sdk comes with a library that I am including with my module.  The problem is that the redpark folks upgraded to xcode 4.5 which no longer supports armv6 so their library was built for armv7.  My module builds just fine but when I try to build the Titanium project that includes my redpark module I get a linker error.  I am building with sdk version 5.0 and 2.1.3GA and have iPhone as the only checked deployment target.  I am using xcode 4.2 and Titanium version:  Titanium Studio, build: 2.1.2.201208301612</p>
<p>NOTE:  I created a native app using the redpark library that works just fine..</p>
<p>The link error is the following:</p>
<p>Ld build&#x2F;RedparkTest.build&#x2F;Debug-iphoneos&#x2F;RedparkTest.build&#x2F;Objects-normal&#x2F;armv6&#x2F;RedparkTest normal armv6<br>    cd &quot;&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&quot;<br>    setenv IPHONEOS_DEPLOYMENT_TARGET 4.0<br>    setenv PATH &quot;&#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;Developer&#x2F;usr&#x2F;bin:&#x2F;Developer&#x2F;usr&#x2F;bin:&#x2F;usr&#x2F;bin:&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;sbin&quot;<br>    &#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;Developer&#x2F;usr&#x2F;bin&#x2F;clang++ -arch armv6 -isysroot &#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;Developer&#x2F;SDKs&#x2F;iPhoneOS5.0.sdk &quot;-L&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;build&#x2F;Debug-iphoneos&quot; &quot;-L&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;lib&quot; &quot;-L&#x2F;Library&#x2F;Application Support&#x2F;Titanium&#x2F;modules&#x2F;iphone&#x2F;redpark.com&#x2F;0.1&quot; &quot;-L&#x2F;Library&#x2F;Application Support&#x2F;Titanium&#x2F;modules&#x2F;iphone&#x2F;redpark.com&#x2F;0.1&quot; &quot;-F&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;build&#x2F;Debug-iphoneos&quot; -filelist &quot;&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;build&#x2F;RedparkTest.build&#x2F;Debug-iphoneos&#x2F;RedparkTest.build&#x2F;Objects-normal&#x2F;armv6&#x2F;RedparkTest.LinkFileList&quot; -dead_strip -ObjC -weak_framework iAd -weak_framework iAd -weak_framework CoreMedia -weak_framework CoreVideo -miphoneos-version-min=4.0 -licucore -framework Foundation -weak_framework UIKit -framework CoreGraphics -weak_framework AddressBook -framework AddressBookUI -framework CFNetwork -framework CoreLocation -framework MapKit -framework MessageUI -framework MobileCoreServices -framework OpenGLES -framework QuartzCore -framework SystemConfiguration -lsqlite3 -lz -framework AudioToolbox -weak_framework MediaPlayer -framework AVFoundation -lxml2 -framework StoreKit -lTiCore -lredpark.com -lredpark.com -framework ExternalAccessory -ltiverify -lti_ios_debugger -o &quot;&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;build&#x2F;RedparkTest.build&#x2F;Debug-iphoneos&#x2F;RedparkTest.build&#x2F;Objects-normal&#x2F;armv6&#x2F;RedparkTest&quot;<br>Undefined symbols for architecture armv6:<br>  &quot;_OBJC<em>CLASS</em>$_RscMgr&quot;, referenced from:<br>      objc-class-ref in libredpark.com.a(RedparkComModule.o)<br>ld: symbol(s) not found for architecture armv6<br>clang: error: linker command failed with exit code 1 (use -v to see invocation)</p>
<p>What It seems like is that I need a way to tell titanium to NOT require the armv6 architecture.</p>
<p>Any help would be much appreciated..</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 1st 2012, 2:06:45 pm">December 1st 2012</span>
				by <span class='authorname'>Dave Patton</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>module link failure</span></li>
					
						<li><span class='tagname'>symbol(s) not found</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-252000">
				
						<section>
							<p>@Dave the min os fix should really work, but an alternative that I used before my upgrade to Xcode 4.5 is to edit <code>&amp;#x2F;Library&amp;#x2F;Application\ Support&amp;#x2F;Titanium&amp;#x2F;mobilesdk&amp;#x2F;osx&amp;#x2F;2.1.4.GA&amp;#x2F;iphone&amp;#x2F;builder.py</code></p>
<p>Around line 1117 remove armv6 from the list.</p>
<p>Note: that this is a hack and needs to be done for each SDK you have installed.</p>
<p>If you also look at the python code around this line, you will see why the suggested fix should work. Therefore it might be worth doing a <code>rm -rf build</code> aswell. Doing a clean from Studio doesn&#39;t seem to remove the build directory and so old settings may persist.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 1st 2012, 3:56:42 pm">December 1st 2012</span>
								by <span class='authorname'>Neville Dastur</span><br>
								<a class="icon-bg icon-link" href="question/145264/link-fails-because-the-module-is-not-built-for-armv6#answer-252000" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi,</p>
<p>  I am building for 2.1.4.GA.  I went into the builder.py file for that SDK and removed all armv6 references.  I set my module to build for 2.1.4.GA.  I placed the following in my tiapp.xml file in my app:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">ios</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">min-ios-ver</span>&gt;</span>4.3<span class="hljs-tag">&lt;/<span class="hljs-title">min-ios-ver</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">ios</span>&gt;</span>
</code></pre><p>And based on the build log this statement is being picked up.<br>I physically removed the build directories in my module and app directories then rebuilt the module and app.  I still get the following error:</p>
<p>Ld build&#x2F;RedparkTest.build&#x2F;Debug-iphoneos&#x2F;RedparkTest.build&#x2F;Objects-normal&#x2F;armv6&#x2F;RedparkTest normal armv6<br>    cd &quot;&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&quot;<br>    setenv IPHONEOS_DEPLOYMENT_TARGET 4.3<br>    setenv PATH &quot;&#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;Developer&#x2F;usr&#x2F;bin:&#x2F;Developer&#x2F;usr&#x2F;bin:&#x2F;usr&#x2F;bin:&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;sbin&quot;<br>    &#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;Developer&#x2F;usr&#x2F;bin&#x2F;clang++ -arch armv6 -isysroot &#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;Developer&#x2F;SDKs&#x2F;iPhoneOS5.0.sdk &quot;-L&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;build&#x2F;Debug-iphoneos&quot; &quot;-L&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;lib&quot; &quot;-L&#x2F;Library&#x2F;Application Support&#x2F;Titanium&#x2F;modules&#x2F;iphone&#x2F;redpark.com&#x2F;0.1&quot; &quot;-L&#x2F;Library&#x2F;Application Support&#x2F;Titanium&#x2F;modules&#x2F;iphone&#x2F;redpark.com&#x2F;0.1&quot; &quot;-F&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;build&#x2F;Debug-iphoneos&quot; -filelist &quot;&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;build&#x2F;RedparkTest.build&#x2F;Debug-iphoneos&#x2F;RedparkTest.build&#x2F;Objects-normal&#x2F;armv6&#x2F;RedparkTest.LinkFileList&quot; -dead_strip -ObjC -weak_framework iAd -weak_framework iAd -weak_framework CoreMedia -weak_framework CoreVideo -miphoneos-version-min=4.3 -licucore -framework Foundation -weak_framework UIKit -framework CoreGraphics -weak_framework AddressBook -framework AddressBookUI -framework CFNetwork -framework CoreLocation -framework MapKit -framework MessageUI -framework MobileCoreServices -framework OpenGLES -framework QuartzCore -framework SystemConfiguration -lsqlite3 -lz -framework AudioToolbox -weak_framework MediaPlayer -framework AVFoundation -lxml2 -framework StoreKit -lTiCore -lredpark.com -lredpark.com -framework ExternalAccessory -ltiverify -lti_ios_debugger -o &quot;&#x2F;Users&#x2F;owner&#x2F;Documents&#x2F;Titanium Studio Workspace&#x2F;RedparkTest&#x2F;build&#x2F;iphone&#x2F;build&#x2F;RedparkTest.build&#x2F;Debug-iphoneos&#x2F;RedparkTest.build&#x2F;Objects-normal&#x2F;armv6&#x2F;RedparkTest&quot;<br>ld: in &#x2F;Library&#x2F;Application Support&#x2F;Titanium&#x2F;modules&#x2F;iphone&#x2F;redpark.com&#x2F;0.1&#x2F;libredpark.com.a, file is universal but does not contain a(n) armv6 slice for architecture armv6<br>Command &#x2F;Developer&#x2F;Platforms&#x2F;iPhoneOS.platform&#x2F;Developer&#x2F;usr&#x2F;bin&#x2F;clang++ failed with exit code 1</p>
<p>Much Thanks for your help..</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 2nd 2012, 11:57:17 am">December 2nd 2012</span>
											by <span class='authorname'>Dave Patton</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-251994">
				
						<section>
							<p>from the release docs:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">ios</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">min-ios-ver</span>&gt;</span>4.3<span class="hljs-tag">&lt;/<span class="hljs-title">min-ios-ver</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">ios</span>&gt;</span>
</code></pre><p>needs added to your tiapp.xml to force arm6 building.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 1st 2012, 2:19:18 pm">December 1st 2012</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/145264/link-fails-because-the-module-is-not-built-for-armv6#answer-251994" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;blog&#x2F;2012&#x2F;09&#x2F;titanum-2-1-3-rc2-is-released-with-additional-fixes-for-ios-6-and-iphone-5.html">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;blog&#x2F;2012&#x2F;09&#x2F;titanum-2-1-3-rc2-is-released-with-additional-fixes-for-ios-6-and-iphone-5.html</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="December 1st 2012, 2:21:43 pm">December 1st 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;release-notes&#x2F;?version=2.1.3.GA">http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;release-notes&#x2F;?version=2.1.3.GA</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="December 1st 2012, 2:23:51 pm">December 1st 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tried adding the following to the tiapp.xml before I posted the question and that does not work..</p>
<p>&lt;ios&gt;<br>        &lt;min-ios-ver&gt;4.3&lt;&#x2F;min-ios-ver&gt;<br>&lt;&#x2F;ios&gt;</p>
<p>Again, I think the problem is that the linker wants to find a armv6 slice for everything being linked and the library in my module was built for armv7 not armv6.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 1st 2012, 3:31:24 pm">December 1st 2012</span>
											by <span class='authorname'>Dave Patton</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-252019">
				
						<section>
							<p>@Dave sorry I see your problem is with the building of the module itself. I was mislead by Stephen&#39;s reply about tiapp.xml. Of course this file does not even exist for modules.</p>
<p>AFAIK the xcode build environment is setup for modules when you create it. So a project clean etc does nothing for the settings in the xcode build config for modules.</p>
<p>The only option I know of is to open the .xcodeproj file and edit the architecture settings</p>
<p>I.e. this section of xcode in the <a href="http:&#x2F;&#x2F;imgbin.org&#x2F;index.php?page=image&amp;id=10592">screenshot</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 2nd 2012, 2:11:39 pm">December 2nd 2012</span>
								by <span class='authorname'>Neville Dastur</span><br>
								<a class="icon-bg icon-link" href="question/145264/link-fails-because-the-module-is-not-built-for-armv6#answer-252019" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi,</p>
<p>  I have the .xcodeproj file for the module modified so the only architecture specified is armv7 and the module builds fine but I still get the same link error.  During the build phase of the app Titanium creates a .xcodeproj file for the app.  Titanium is creating this file with armv6 as an active architecture.  What I need is a way to tell Titanium to not include armv6 in the .xcodeproj file it generates for the app build process.  Any ideas?</p>
<p>Much Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 2nd 2012, 2:29:30 pm">December 2nd 2012</span>
											by <span class='authorname'>Dave Patton</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-252020">
				
						<section>
							<p>There must be something odd about your install then. As the build script I pointed you to AFAIK is the thing that controls the xcodeprj creation.</p>
<p>Only other things that come to mind are:</p>
<ul>
<li><p>check you don&#39;t have a different Titanium install location. Sometimes it is under &#x2F;Library and sometimes your home directory i.e. ~&#x2F;Library</p>
<ul>
<li>check you don&#39;t have a VALID_ARCH field in OTHER_LDFLAGS and that it doesn&#39;t include armv6</li>
<li>ensure you are linking against iOS SDK 5.0 (the highest available on 4.2 I think)</li>
<li>lastly, it seems that everyone is going the way of linking with iOS 6 and so consider upgrading to xcode 4.5. I bit the bullet and did my mountain lion upgrade a week ago and one machine was very smooth the other took 4 hours of my time to fix :(<br>Make sure you do a disk verify and fix permission first.</li>
</ul>
</li>
</ul>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 2nd 2012, 3:05:16 pm">December 2nd 2012</span>
								by <span class='authorname'>Neville Dastur</span><br>
								<a class="icon-bg icon-link" href="question/145264/link-fails-because-the-module-is-not-built-for-armv6#answer-252020" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
