<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>In App Purchase Ios Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>In App Purchase Ios</h1>
		</header>
		<section>
			<p>Hi,<br>I am testing for in app purchase on iOS.</p>
<p>The problem I have is with the receipt I send to Apple for verification.<br>The receipt has to be base64 encoded.<br>Tested using the below code.</p>
<pre><code class="hljs">                         //receipt = Ti.Utils.<span class="hljs-keyword">base64encode(evt.receipt).text;
</span>                           receipt = Ti.Utils.<span class="hljs-keyword">base64encode(evt.receipt).toString;
</span>               Ti.API.info(<span class="hljs-string">"receipt :"</span>+ receipt)<span class="hljs-comment">;</span>
</code></pre><p>This is the info output:</p>
<pre><code class="hljs">[INFO] receipt :ewoJInNpZ25hdHVyZSIgPSAiQW1WejQ1QjIzVFdSNUxyNzJtTUZYRXZyVV<span class="hljs-built_in">NSSG5OSXJldm9V</span>
QUhHLzArTmJXdFg1YXZzWGtuekVnamxyT0pwc2pjWkhxYkxQOFJUUUg0OTR2d3hBMHhPdmph
NlYxTmRnSVFpelNpZGMrQkV4RGxud3pPSEwySE9UY0lhdnF1UmV3U1RhWFJ3empWdWlRNTZu
WFJPWEFnaG04Z2c2TURieXZYSlVNczBtUC9PTUFBQURWekNDQTFNd2dnSTdvQU1DQVFJQ0NH
VVVrVTNaV0FTMU1BMEdDU3FHU0liM0RRRUJCUVVBTUg4eEN6QUpCZ05WQkFZVEFsVlRNUk13
RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFX
WnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURXpNREVHQTFVRUF3d3FRWEJ3YkdVZ2FWUjFibVZ6
SUZOMGIzSmxJRU5sY25ScFptbGpZWFJwYjI0Z1FYVjBhRzl5YVhSNU1CNFhEVEE1TURZeE5U
SXlNRFUxTmxvWERURTBNRFl4TkRJeU1EVTFObG93WkRFak1DRUdBMVVFQXd3YVVIVnlZMmho
YzJWU1pXTmxhWEIwUTJWeWRHbG1hV05oZEdVeEd6QVpCZ05WQkFzTUVrRndjR3hsSUdsVWRX
NWxjeUJUZEc5eVpURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NXNWpMakVMTUFrR0ExVUVCaE1D
VlZNd2daOHdEUVlKS29aSWh2Y05BUUVCQlFBRGdZMEF<span class="hljs-built_in">NSUdKQW9HQkFNclJqRjJjdDRJclNk</span>
aVRDaGFJMGc4cHd2L2NtSHM4cC9Sd1YvcnQvOTFYS1ZoTmw0WElCaW1LalFRTmZnSHNEczZ5
anUrK0RyS0pFN3VLc3BoTWRkS1lmRkU1ckdYc0FkQkVqQndSSXhleFRldngzSExFRkdBdDFt
b0t4NTA5ZGh4dGlJZERnSnYyWWFWczQ5QjB1SnZOZHk2U01xTk5MSHNETHpEUzlvWkhBZ01C
QUFHamNqQndNQXdHQTFVZEV3R<span class="hljs-built_in">UIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVOaDNvNHAyQzBn</span>
RVl0VEpyRHRkREM1RllRem93RGdZRFZSMFBBUUgvQkFRREFnZUFNQjBHQTFVZERnUVdCQlNw
ZzRQeUdVakZQaEpYQ0JUTXphTittVjhrOVRBUUJnb3Foa2lHOTJOa0JnVUJCQUlGQURBTkJn
a3Foa2lHOXcwQkFRVUZBQU9DQVFFQUVhU2JQanRtTjRDL0lCM1FFcEszMlJ4YWNDRFhkVlhB
ZVZSZVM1RmFaeGMrdDg4cFFQOTNCaUF4dmRXLzNlVFNNR1k1RmJlQVlMM2V0cVA1Z204d3JG
b2pYMGlreVZSU3RRKy9BUTBLRWp0c<span class="hljs-built_in">UIwN2tMczlRVWU4Y3pSOFVHZmRNMUV1bVYvVWd2RGQ0</span>
TndOWXhMUU1nNFdUUWZna1FRVnk4R1had1ZIZ2JFL1VDNlk3MDUzcEdYQms1MU5QTTN3b3ho
ZDNnU1JMdlhqK2xvSHNTdGNURXFlOXBCRHBtRzUrc2s0dHcrR0szR01lRU41LytlMVFUOW5w
L0tsMW5qK2FCdzdDMHhzeTBiRm5hQWQxY1NTNnhkb3J5L0NVdk02Z3RLc21uT09kcVRlc2Jw
MGJzOHNuNldxczBDOWRnY3hSSHVPTVoydG04bnBMVW03YXJnT1N6UT09IjsKCSJwdXJjaGFz
ZS1pbmZvIiA9ICJld29KSW05eWFXZHBibUZzTFhCMWNtTm9ZWE5sTFdSaGRHVXRjSE4wSWlB
OUlDSXlNREV6TFRBNExUSXpJREUwT2pJNU9qUXhJRUZ0WlhKcFkyRXZURzl6WDBGdVoyVnNa
WE1pT3dvSkluQjFjbU5vWVhObExXUmhkR1V0YlhNaUlEMGdJakV6TnpnMU1ESTROamN3TURB
aU93b0pJblZ1YVhGMVpTMXBaR1Z1ZEdsbWFXVnlJaUE5SUNJd01EQXdZakF3T1RJNE1UZ2lP
d29KSW05eWFXZHBibUZzTFhSeVlXNXpZV04wYVc5dUxXbGtJaUE5SUNJeE1EQXdNREF3TURn
MU1EWTBOamN4SWpzS0NTSmxlSEJwY21WekxXUmhkR1VpSUQwZ0lqRXpOemcxTURNd05EY3dN
REFpT3dvSkluUnlZVzV6WVdOMGFXOXVMV2xrSWlBOUlDSXhNREF3TURBd01EZzJORGN4TnpR
NElqc0tDU0p2Y21sbmFXNWhiQzF3ZFhKamFHRnpaUzFrWVhSbExXMXpJaUE5SUNJeE16YzNN
amt6TXpneE1EQXdJanNLQ1NKM1pXSXRiM0prWlhJdGJHbHVaUzFwZEdWdExXbGtJaUE5SUNJ
eE1EQXdNREF3TURJM016TTBPVGN5SWpzS0NTSmlkbkp6SWlBOUlDSXhMakFpT3dvSkluVnVh
WEYxWlMxMlpXNWtiM0l0YVdSbGJuUnBabWxsY2lJZ1BTQWlNVVV3TXpBeE1EVXRNVEExTnkw
ME9VSkRMVGhETVRNdFJqZEJNVFJCUVRZM05qRTRJanNLQ1NKbGVIQnBjbVZ6TFdSaGRHVXRa
bTl5YldGMGRHVmtMWEJ6ZENJZ1BTQWlNakF4TXkwd09TMHdOaUF4TkRvek1EbzBOeUJCYldW
eWFXTmhMMHh2YzE5QmJtZGxiR1Z6SWpzS0NTSnBkR1Z0TFdsa0lpQTlJQ0kyT1RJNU16RXlO
VGdpT3dvSkltVjRjR2x5WlhNdFpHRjBaUzFtYjNKdFlYUjBaV1FpSUQwZ0lqSXdNVE10TURr
dE1EWWdNakU2TXpBNk5EY2dSWFJqTDBkTlZDSTdDZ2tpY0hKdlpIVmpkQzFwWkNJZ1BTQWlV
bVZ3YjNKME1qTTRNakF4TXlJN0Nna2ljSFZ5WTJoaGMyVXRaR0YwWlNJZ1BTQWlNakF4TXkw
d09TMHdOaUF5TVRveU56bzBOeUJGZEdNdlIwMVVJanNLQ1NKdmNtbG5hVzVoYkMxd2RYSmph
R0Z6WlMxa1lYUmxJaUE5SUNJeU1ERXpMVEE0TFRJeklESXhPakk1T2pReElFVjBZeTlIVFZR
aU93b0pJbUpwWkNJZ1BTQWlZMjl0TG5aaGJITnZablF1Yz<span class="hljs-built_in">NSdmNtVjBaWE4wSWpzS0NTSndk</span>
WEpqYUdGelpTMWtZWFJsTFhCemRDSWdQU0FpTWpBeE15MHdPUzB3TmlBeE5Eb3lOem8wTnlC
QmJXVnlhV05oTDB4dmMxOUJibWRsYkdWeklqc0tDU0p4ZFdGdWRHbDBlU0lnUFNBaU1TSTdD
bjA9IjsKCSJlbnZpcm9ubWVud<span class="hljs-built_in">CIgPSAiU2FuZGJveCI7CgkicG9kIiA9ICIxMDAiOwoJInNp</span>
Z25pbmctc3RhdHVzIiA9I<span class="hljs-built_in">CIwIjsKfQ</span>==
</code></pre><p>The response from my server is null, now I have tested the php script direct and if I set the contents of receipt enclosed in  &quot;&quot; then the the server returns all the details correct.</p>
<p>I do not understand why the receipt variable, which is  also a string is not accepted, is there something else I am missing whilst encoding the data.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 6th 2013, 8:50:07 pm">September 6th 2013</span>
				by <span class='authorname'>John Wheeler</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>in app purchase</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>OK, nevermind, sorted.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 7th 2013, 9:19:19 am">September 7th 2013</span>
								by <span class='authorname'>John Wheeler</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi. Can u please explain on how you sorted it?</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 30th 2013, 9:40:40 am">December 30th 2013</span>
								by <span class='authorname'>Amar Domkawle</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi,<br>Below is the method to encode the receipt.</p>
<pre><code class="hljs">                            receipt = Ti.Utils.base64encode(evt.receipt).toString()<span class="hljs-comment">;</span>
</code></pre><p>I post it to my server, save it in a database and use php to send to Apple Server from my server and then send the verification back to the app.</p>
<p>regards</p>
<p>John</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 30th 2013, 2:48:08 pm">December 30th 2013</span>
								by <span class='authorname'>John Wheeler</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
