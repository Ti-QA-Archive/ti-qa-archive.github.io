<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Push Notifications using Urban Airship » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Push Notifications using Urban Airship</h1>
		</header>
		<section>
			<p>Hi guys.</p>
<p>I&#39;ve been trying for a couple of days to get push notifications working.</p>
<p>Initially I was using the ACS push notifications but for some reason it&#39;s not working properly. I&#39;m now trying to get Urban Airship working in my alloy project. </p>
<p>Can anyone tell me where the airshipconfig.properties file should go in my project. I keep getting the following errors..</p>
<pre><code class="hljs">[ERROR] :  E/mosaic<span class="hljs-class">.mobile</span><span class="hljs-class">.clientapp</span><span class="hljs-class">.avon</span> - UALib: AirshipConfigOptions: null is not <span class="hljs-tag">a</span> valid development app key
[ERROR] :  E/mosaic<span class="hljs-class">.mobile</span><span class="hljs-class">.clientapp</span><span class="hljs-class">.avon</span> - UALib: AirshipConfigOptions: null is not <span class="hljs-tag">a</span> valid development app secret
[ERROR] :  E/mosaic<span class="hljs-class">.mobile</span><span class="hljs-class">.clientapp</span><span class="hljs-class">.avon</span> - UALib: AirshipConfigOptions are not valid. Unable to take off! Check your airshipconfig<span class="hljs-class">.properties</span> file <span class="hljs-keyword">for</span> the errors listed above.
[ERROR] :  UrbanAirshipModule: (main) [<span class="hljs-number">677</span>,<span class="hljs-number">1220</span>] Error occurred during takeoff!!!
</code></pre><p>I have the correct information in my airshipconfig.properties file but I&#39;m not sure where to put it. </p>
<p>I&#39;ve tried having it in the root of the project, the app folder and the assets folder but nothing seems to be working.</p>
<p>Thanks in advance for the help.</p>
<p>Kind Regards,<br>Devon Britton.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 15th 2014, 11:23:07 am">January 15th 2014</span>
				by <span class='authorname'>Devon Britton</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>airship</span></li>
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>push</span></li>
					
						<li><span class='tagname'>urban</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-273936">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>At the root create this folder structure <strong>platform</strong> &gt; <strong>android</strong> &gt; <strong>bin</strong> &gt; <strong>assets</strong> and the airshipconfig.properties should be placed in here</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 15th 2014, 12:47:02 pm">January 15th 2014</span>
								by <span class='authorname'>Luke Taylor</span><br>
								<a class="icon-bg icon-link" href="question/161531/push-notifications-using-urban-airship#answer-273936" rel="permalink">permalink</a>
							</div>

							<h5>12 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Luke.</p>
<p>Thanks for the help. I probably should have mentioned that I&#39;m using Alloy rather than a regular Titanium app. </p>
<p>The folder structure you suggested isn&#39;t working. Everything under the &quot;android&quot; folder is being ignored (it says&quot; [ignored]&quot; next to it in the project explorer.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 5:42:37 am">January 16th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Actually ignore that. I&#39;m not getting that error anymore!! </p>
<p>You sir are a gentleman and a scholar!!!</p>
<p>I thank you kindly for your help!!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 5:58:06 am">January 16th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No problem, I use Urban Airship as opposed to ACS. If you wanted to make it easier for yourself @Fokke Zandbergen has created a wrapper called <strong>UrbanAirport</strong>.</p>
<p>Here&#39;s the Git repo <a href="https:&#x2F;&#x2F;github.com&#x2F;FokkeZB&#x2F;UTiL&#x2F;tree&#x2F;master&#x2F;urbanairport">urbanairport</a></p>
<p>And here&#39;s the link to his blog post which has a <a href="http:&#x2F;&#x2F;fokkezb.nl&#x2F;2013&#x2F;10&#x2F;14&#x2F;setting-up-urban-airship&#x2F;">guide</a> to help</p>
<p>Hope this helps!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 7:22:32 am">January 16th 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Also you have forgotten to mark this question as answered :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 8:13:30 am">January 16th 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Struggling a little to get the urbanairport wrapper you sent me working but I should mark this as answered as you have put most of my confusion to rest!!</p>
<p>Thanks again!!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 8:14:22 am">January 16th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Man I hate to do this to you but I&#39;m having an issue with urbanairport. :-(</p>
<p>When I tick the checkbox to register the device I&#39;m getting a &quot;UALib: No APID. Cannot update.&quot; error. I have no idea why and google is coming up with nothing.</p>
<p>Sorry again :-(</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 8:53:19 am">January 16th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey no problem, might be easier if you start by showing me the code of the urbanairport wrapper</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 10:40:25 am">January 16th 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok cool.</p>
<p>I haven&#39;t made any changes to the urbanairport wrapper that I downloaded from this location - https:&#x2F;&#x2F;github.com&#x2F;FokkeZB&#x2F;UTiL&#x2F;blob&#x2F;master&#x2F;urbanairport&#x2F;urbanairport.js</p>
<p>I&#39;m implementing it in my alloy.js file as follows. (taken directly from his example).</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> urbanairport = require(<span class="hljs-string">'urbanairport'</span>);

urbanairport.register({
  debug: <span class="hljs-literal">true</span>, <span class="hljs-comment">// Show debug info</span>

  <span class="hljs-comment">// Sets push types</span>
  sound: <span class="hljs-literal">true</span>,   <span class="hljs-comment">// iOS + Android (default)</span>
  vibrate: <span class="hljs-literal">true</span>, <span class="hljs-comment">// Android (default)</span>
  badge: <span class="hljs-literal">true</span>,   <span class="hljs-comment">// iOS (default)</span>
  alert: <span class="hljs-literal">true</span>,   <span class="hljs-comment">// iOS (default)</span>

  <span class="hljs-comment">// Set any property and call any single-property method of the extended module</span>
  autoBadge: <span class="hljs-literal">false</span>,

  <span class="hljs-comment">// Enable compatibility mode (see below)</span>
  compatibility: <span class="hljs-literal">true</span>,

  <span class="hljs-comment">// On Android these will be automatically set once UA is flying</span>
  alias: <span class="hljs-string">'John'</span>,
  tags: <span class="hljs-string">'single'</span>, <span class="hljs-comment">// Supports both a single or Array of strings!</span>

  <span class="hljs-keyword">callback</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{ <span class="hljs-comment">// The only callback you need</span>

    <span class="hljs-comment">// Registration failed</span>
    <span class="hljs-keyword">if</span> (e.type === <span class="hljs-string">'error'</span>) {
      alert(<span class="hljs-string">'Sorry, no push for you: '</span> + e.error);

    <span class="hljs-comment">// Registration done</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.type === <span class="hljs-string">'success'</span>) {
      alert(<span class="hljs-string">'Your token is: '</span> + e.deviceToken);

    <span class="hljs-comment">// Received notification</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.type === <span class="hljs-string">'callback'</span>) {

      <span class="hljs-comment">// Properties are normalized for iOS and Android:</span>
      <span class="hljs-comment">// e.payload === e.data === e.data.aps</span>
      <span class="hljs-comment">// e.message === e.data.alert === e.data.aps.alert</span>
      alert(e.message);
    }
  }
});

<span class="hljs-comment">// Manually disable/re-enable push</span>
urbanairport.disable(); <span class="hljs-comment">// enable();</span>

<span class="hljs-comment">// Append tags instead of resetting them</span>
urbanairport.addTags(<span class="hljs-string">'foo'</span>); <span class="hljs-comment">// Both single and Array supported</span>

<span class="hljs-comment">// Set any property and call any single-property method of the extended module</span>
urbanairport.showOnAppClick = <span class="hljs-literal">true</span>;
</code></pre><p>I still get the feeling that perhaps one of the files, either the airshipconfig.properties or the urbanairport.js, is in the wrong place. </p>
<p>I have posted a question on the github repository for him, just in case we can&#39;t get it sorted here.</p>
<p>Again I really do appreciate all the help!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 10:48:41 am">January 16th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>airshipconfig.properties goes here: &#x2F;platform&#x2F;android&#x2F;bin&#x2F;assets&#x2F;airshipconfig.properties</p>
<p>urbanairport.js goes here: &#x2F;app&#x2F;lib&#x2F;urbanairport.js</p>
<p>Next remove the urbanairport.disable(); from the wrapper.</p>
<p>Just to check, have a look through this <a href="http:&#x2F;&#x2F;docs.urbanairship.com&#x2F;build&#x2F;android.html#google-setup">getting started</a> guide from Uraban Airship. You don&#39;t need to worry about the AndroidManifest.XML, as this is created when you compile, or any JAR files as these should be in the modules for Ti.urbanairship.</p>
<p>Finally, make sure that in your airshipconfig.properties you have set <strong>all</strong> the API keys even if you are only doing development, maybe just use the same dev keys for production?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 11:05:46 am">January 16th 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok we&#39;re definitely making progress here!!! (I think I owe you a beer or seven next time you&#39;re in the area…or vice versa…lol)</p>
<p>the device registers successfully and I can send a message from the urban airship console. I am, however, getting a &quot;Received push with invalid authorization on platform GCM&quot; error when trying to send a message.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 5:21:12 pm">January 16th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Never mind.</p>
<p>I got it working perfectly. Turned out I had the API key for android apps in my UA settings instead of the API key for server apps.</p>
<p>I really want to thank you again for all the help you&#39;ve given me!!!</p>
<p>As a titanium rookie having your help has been an absolute godsend!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 5:35:11 pm">January 16th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No problem, thats what this community is all about :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2014, 7:01:45 pm">January 16th 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
