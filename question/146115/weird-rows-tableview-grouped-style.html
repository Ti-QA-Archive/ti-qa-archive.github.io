<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Weird Rows: TableView Grouped Style Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Weird Rows: TableView Grouped Style</h1>
		</header>
		<section>
			<p>Hello Ti Devs,</p>
<p>I&#39;m hoping someone is browsing through during the holidays. </p>
<p>I have a weird looking tableView with the style Property set to GROUPED. </p>
<p>I add the rows to my table in the following manner: </p>
<pre><code class="hljs"><span class="hljs-built_in">var</span> addRowFromData = function(<span class="hljs-built_in">data</span>) {
    <span class="hljs-built_in">var</span> row = Ti<span class="hljs-built_in">.</span>UI<span class="hljs-built_in">.</span>createTableViewRow({
        height: <span class="hljs-number">50</span>,
        className: <span class="hljs-string">'dummyRow'</span>,
        <span class="hljs-built_in">data</span>: <span class="hljs-built_in">data</span>,
        title: <span class="hljs-built_in">data</span><span class="hljs-built_in">.</span>title
    });

    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">data</span><span class="hljs-built_in">.</span>index == <span class="hljs-number">0</span>) row<span class="hljs-built_in">.</span><span class="hljs-keyword">header</span> = <span class="hljs-string">'Active'</span>; 

    tableView<span class="hljs-built_in">.</span>appendRow(row);
};
</code></pre><p>This code creates a tableView which should look as expected. However, the &quot;tapped&quot; state of rows, is kind of weird.<br>Check images attached. </p>
<p>Anyhow, have a clue on why this is happening? </p>
<p>Here&#39;s the tableView code</p>
<pre><code class="hljs">var tableView = <span class="hljs-filename">Ti.UI.createTableView({
    width</span>: <span class="hljs-filename">Ti.UI.FILL,
    height</span>: <span class="hljs-filename">Ti.UI.FILL,
    top</span>: <span class="hljs-number">0</span>,
    left: <span class="hljs-number">0</span>,
    style: <span class="hljs-filename">Ti.UI.iPhone.TableViewStyle.GROUPED,
    backgroundColor</span>: <span class="hljs-string">'transparent'</span>,
    separatorColor: <span class="hljs-string">'#c4c7cc'</span>
});
</code></pre><p>Happy Holidays. Cheers.</p>
<p>####Meta:<br>Platform: iOS 6.0 (iPhone)<br>TiSDK: 3.0.0.GA</p>
<p>####Images:</p>
<ul>
<li><img src="http:&#x2F;&#x2F;f.cl.ly&#x2F;items&#x2F;0y2D401l193G0m3k1o1J&#x2F;iOS%20Simulator%20Screen%20shot%2024-Dec-2012%2010.53.50%20PM.png" alt="http:&#x2F;&#x2F;cl.ly&#x2F;image&#x2F;0B2A0h2T2T2Q&#x2F;iOS%20Simulator%20Screen%20shot%2024-Dec-2012%2010.53.51%20PM.png"></li>
<li><img src="http:&#x2F;&#x2F;f.cl.ly&#x2F;items&#x2F;1J3h3i0b3G2u110e2H3R&#x2F;iOS%20Simulator%20Screen%20shot%2024-Dec-2012%2010.53.55%20PM.png" alt="http:&#x2F;&#x2F;cl.ly&#x2F;image&#x2F;0B2A0h2T2T2Q&#x2F;iOS%20Simulator%20Screen%20shot%2024-Dec-2012%2010.53.51%20PM.png"></li>
<li><img src="http:&#x2F;&#x2F;cl.ly&#x2F;image&#x2F;0B2A0h2T2T2Q&#x2F;iOS%20Simulator%20Screen%20shot%2024-Dec-2012%2010.53.51%20PM.png" alt="http:&#x2F;&#x2F;cl.ly&#x2F;image&#x2F;0B2A0h2T2T2Q&#x2F;iOS%20Simulator%20Screen%20shot%2024-Dec-2012%2010.53.51%20PM.png"></li>
</ul>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 24th 2012, 3:36:24 pm">December 24th 2012</span>
				by <span class='authorname'>Nikhil Nigade</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>grouped</span></li>
					
						<li><span class='tagname'>ios6</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
						<li><span class='tagname'>ui</span></li>
					
				</ul>
			

			<section>
				<h5>6 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>OK enough bragging about how you managed to get a weird look :)</p>
<p>Can I ask;</p>
<ul>
<li>are you adding each row individually</li>
<li>if so do you have to?</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="December 24th 2012, 3:46:41 pm">December 24th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Can you provide the code where you call this function <strong>addRowFromData</strong></p>
</div>
							<div class="author">
								&mdash; commented <span title="December 24th 2012, 3:47:40 pm">December 24th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Haha. Sorry, I was trying hard not to sound that way. But turns out, I did :&#x2F; </p>
<p>Yes, I am adding each row individually.   </p>
<p>I have two options: get each row from the API individually, and call addRowFromData in the onload callback. OR, first, get data from the API and keep adding it to an array. Once I have all the data, loop through it, add rows to a data array and use <code>setData</code> only once. </p>
<p>As of now, I&#39;m using the first alternative.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 24th 2012, 3:50:37 pm">December 24th 2012</span>
								by <span class='authorname'>Nikhil Nigade</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I tried the second alternative, I mentioned above. </p>
<p>Now the table doesn&#39;t do that &quot;nasty thing&quot;. I&#39;ll have to see how this affects performance. Anyhow, I&#39;d still like to use the first method, if this problem gets solved. Hope it does.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 24th 2012, 4:00:48 pm">December 24th 2012</span>
								by <span class='authorname'>Nikhil Nigade</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Do ou get the data from APIs in one go or over several responses?</p>
<p>I looking at this end to see if I get the same visual issue.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 24th 2012, 4:26:07 pm">December 24th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Not one go. First, I get &quot;identifiers&quot; from the API. For each identifier, I have to make a separate call to get data associated with it.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 24th 2012, 4:27:10 pm">December 24th 2012</span>
								by <span class='authorname'>Nikhil Nigade</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-253373">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi, me again.</p>
<p>OK I know where it happens, it is the delay, if the <strong>appendRow</strong> is used in quick succession, then no problem, but after a short delay the problem occurs.</p>
<p>I have a test app for that, this can be used by creating a new simple project and replacing the content of the <strong>app.js</strong> file with the code below.  The very last row is added 15 seconds after the first are shown - this emulates the delay issue - before the 15 seconds are up you can select each row without issue, afterwards the penultimate row has the visual issue.</p>
<p>BTW the colourful effect is to see if that affects anything.</p>
<p>Good news further down.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'#ccc'</span>,
    title: <span class="hljs-string">'Test'</span>
});
<span class="hljs-keyword">var</span> tab = Ti.UI.createTab({  
    icon: <span class="hljs-string">'KS_nav_views.png'</span>,
    title: <span class="hljs-string">'Test'</span>,
    <span class="hljs-built_in">window</span>: win
});

<span class="hljs-keyword">var</span> data = [
    {
        hex: <span class="hljs-string">'#EFDECD'</span>, 
        title: <span class="hljs-string">'Almond'</span>,
        leftImage: <span class="hljs-string">'KS_nav_ui.png'</span>,
        hasChild: <span class="hljs-literal">true</span>
    }, 
    {
        hex: <span class="hljs-string">'#CD9575'</span>, 
        title: <span class="hljs-string">'Antique Brass'</span>, 
        leftImage: <span class="hljs-string">'KS_nav_views.png'</span>,
        hasChild: <span class="hljs-literal">true</span>
    }, 
    {
        hex: <span class="hljs-string">'#FDD9B5'</span>, 
        title: <span class="hljs-string">'Apricot'</span>, 
        leftImage: <span class="hljs-string">'KS_nav_ui.png'</span>,
        hasChild: <span class="hljs-literal">true</span>
    }, 
    {
        hex: <span class="hljs-string">'#78DBE2'</span>, 
        title: <span class="hljs-string">'Aquamarine'</span>, 
        leftImage: <span class="hljs-string">'KS_nav_views.png'</span>,
        hasChild: <span class="hljs-literal">true</span>
    }, 
    {
        hex: <span class="hljs-string">'#87A96B'</span>, 
        title: <span class="hljs-string">'Asparagus'</span>, 
        leftImage: <span class="hljs-string">'KS_nav_ui.png'</span>,
        hasChild: <span class="hljs-literal">true</span>
    }
];

<span class="hljs-keyword">var</span> tbl = Ti.UI.createTableView({
    <span class="hljs-comment">//data: rows,</span>
    width: Ti.UI.FILL,
    height: Ti.UI.FILL,
    top: <span class="hljs-number">0</span>,
    left: <span class="hljs-number">0</span>,
    style: Ti.UI.iPhone.TableViewStyle.GROUPED,
    backgroundColor: <span class="hljs-string">'transparent'</span>,
    separatorColor: <span class="hljs-string">'#c4c7cc'</span>
});
win.add(tbl);

<span class="hljs-keyword">var</span> intRow = <span class="hljs-number">0</span>, intRows = data.length, rows = [];
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRowFromData</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({
        backgroundColor: data.hex,
        hasChild: data.hasChild,
        leftImage: data.leftImage,
        height: <span class="hljs-number">50</span>,
        className: <span class="hljs-string">'dummyRow'</span>,
        data: data,
        title: data.title
    });

    <span class="hljs-keyword">if</span> (data.index === <span class="hljs-number">0</span>) {
        row.header = <span class="hljs-string">'Active'</span>;
    }

    tbl.appendRow(row);
};
<span class="hljs-keyword">for</span> (intRow = <span class="hljs-number">0</span>; intRow &lt; intRows; intRow = intRow + <span class="hljs-number">1</span>) {
    data[intRow].index = intRow;
    addRowFromData(data[intRow]);
}
setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    addRowFromData({
        hex: <span class="hljs-string">'#c60000'</span>, 
        title: <span class="hljs-string">'Dark Red'</span>, 
        leftImage: <span class="hljs-string">'KS_nav_ui.png'</span>,
        hasChild: <span class="hljs-literal">true</span>
    });
}, <span class="hljs-number">1000</span> * <span class="hljs-number">15</span>);

<span class="hljs-keyword">var</span> tabGroup = Ti.UI.createTabGroup();
tabGroup.addTab(tab);
tabGroup.open();
</code></pre><p>There is a <strong>solution</strong> (work-around), not ideal but it will work and does not appear to have any visual issues.</p>
<p>Swap this line;</p>
<pre><code class="hljs"><span class="hljs-tag">tbl</span><span class="hljs-class">.appendRow</span>(<span class="hljs-tag">row</span>);
</code></pre><p>With these two lines;</p>
<pre><code class="hljs"><span class="hljs-tag">rows</span><span class="hljs-class">.push</span>(<span class="hljs-tag">row</span>);
<span class="hljs-tag">tbl</span><span class="hljs-class">.setData</span>(<span class="hljs-tag">rows</span>);
</code></pre><p>This uses the fact there is an object level rows array that is appended (pushed) and the table is update with the entire array each loop. If the row count is high this may be an issue - so you will need to do some performance tests.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 24th 2012, 5:12:13 pm">December 24th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/146115/weird-rows-tableview-grouped-style.html#answer-253373" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ah, I see what you did there. </p>
<p>The IDs which I get are always have a max cap of 10. So for a maximum of 10 rows, I don&#39;t think there should be a problem.</p>
<p>Thank you for your help. Works as expected. Cheers.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2012, 5:21:22 pm">December 24th 2012</span>
											by <span class='authorname'>Nikhil Nigade</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You are welcome</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2012, 5:23:02 pm">December 24th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
