<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy - Databound TableView - add event on row element Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy - Databound TableView - add event on row element</h1>
		</header>
		<section>
			<p>I have an article list with a databound backbone collection. </p>
<p>My View:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"win"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"table"</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"collection"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"article"</span> <span class="hljs-attribute">article_id</span>=<span class="hljs-value">"{article_id}"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"article"</span><span class="hljs-value">text="{article}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"price"</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"{price}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"rowprice"</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">""</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">TextField</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"quantity"</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">onBlur</span>=<span class="hljs-value">"calculateTotal"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">TextField</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">TableViewRow</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"summary"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"lblTotal"</span>&gt;</span>TOTAL:<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"Total"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'print'</span>&gt;</span>Print<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>I have tableview and tableviewrow in one view because i want to calculate the totals when the quantity field loses the focus.</p>
<p>When I add the onBlur event to the tableview the event will be fired and the article list ist shown correctly.</p>
<p>When I add the same event to the TextField of the databound TableViewRow the debugger stops at this line:</p>
<pre><code class="hljs">calculateTotal ? $.__views.quantity.addEventListener(<span class="hljs-string">"blur"</span>, calculateTotal) : __defers[<span class="hljs-string">"$.__views.quantity!blur!calculateTotal"</span>] = !<span class="hljs-number">0</span>;
</code></pre><p>When I continue debugging the article list is empty and <strong>no error</strong> is thrown.</p>
<p>The code of the prebuilt alloy code in the resource folder is:</p>
<pre><code class="hljs">            var __alloyId5 = Ti.UI.createTextField({
                <span class="hljs-property">id</span>: <span class="hljs-string">"quantity"</span>,
                <span class="hljs-type">text</span>: <span class="hljs-string">"0"</span>,
                value: <span class="hljs-string">"0"</span>
            });
            __alloyId1.add(__alloyId5);
            calculateTotal ? $.__views.quantity.addEventListener(<span class="hljs-string">"blur"</span>, calculateTotal) : __defers[<span class="hljs-string">"$.__views.quantity!blur!calculateTotal"</span>] = !<span class="hljs-number">0</span>;
</code></pre><p>When I split it into articlelist.xml and articlerow.xml the events are fired correctly in the articlerow.js<br>But I can&#39;t reach the summary view of the parent controller articlelist.js</p>
<p><strong>What can I do to handle the events on tableviewrow elements ?</strong></p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 4th 2013, 5:30:44 am">March 4th 2013</span>
				by <span class='authorname'>Dieter Gansberger</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>databinding</span></li>
					
						<li><span class='tagname'>events</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
						<li><span class='tagname'>tableviewrow</span></li>
					
				</ul>
			

			<section>
				<h5>7 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>The event on the tableview is an onClick event, not a onBlur.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 4th 2013, 6:57:59 am">March 4th 2013</span>
								by <span class='authorname'>Dieter Gansberger</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Can you repost with the appropriate handlers and geenrated code? I confused as to what is the expected behavior.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 4th 2013, 12:51:16 pm">March 4th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I am not at my Computer at the moment. But when I debug the Code I get a controller object of $.table but not $.article (undefined) or $.price, $.quantity. (also undefined). I will send you the complete generated code with dummy data.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 4th 2013, 4:33:10 pm">March 4th 2013</span>
								by <span class='authorname'>Dieter Gansberger</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Ah, and you won&#39;t get those values because the tableviewrow and each element inside of it will get repeated for every model in your collection. Effectively in the context of being included in the main view, the ID is meaningless since it will be used over and over again. What you need to do is pull that tableviewrow into its own controller.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 4th 2013, 4:35:46 pm">March 4th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>When I add it into its own controller, how can i access the summary view? This would be in the parent controller of the tableviewrow. I had this scenario before but had no success to access the parent view.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 4th 2013, 5:43:08 pm">March 4th 2013</span>
								by <span class='authorname'>Dieter Gansberger</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I would fire a custom event from the child controller that the parent controller can listen for. The custom event could include the calcuulated valuie in its event payload</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 4th 2013, 5:47:32 pm">March 4th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>You are the man. Thanx.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 4th 2013, 6:00:33 pm">March 4th 2013</span>
								by <span class='authorname'>Dieter Gansberger</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-258043">
				
						<section>
							<p>The following line has a couple issues in it:</p>
<pre><code class="hljs">&lt;Label <span class="hljs-property">id</span>=<span class="hljs-string">"article"</span><span class="hljs-type">text</span>=<span class="hljs-string">"{article}"</span>&gt;&lt;/Label&gt;
</code></pre><ol>
<li>you&#39;ve already used the id &quot;article&quot; to define the tableviewrow. use a different id.</li>
<li>you need to put a space between the id string and the next attribute, in this case &quot;text&quot;.</li>
</ol>
<p>I don&#39;t know if those are causing you these problems, but you should resolve those.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 4th 2013, 12:51:05 pm">March 4th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="../../question/149107/alloy---databound-tableview---add-event-on-row-element.html#answer-258043" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I translated the Code from German Labels and IDs to English. I already have a unique id for the Label.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 4th 2013, 4:25:45 pm">March 4th 2013</span>
											by <span class='authorname'>Dieter Gansberger</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
