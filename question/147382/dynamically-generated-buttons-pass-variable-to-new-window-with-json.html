<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Dynamically generated buttons pass variable to new window with JSON Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Dynamically generated buttons pass variable to new window with JSON</h1>
		</header>
		<section>
			<p>First I am a beginner and this is my first app.<br>I have been working on this app for several days and I am stuck. On the page remote_read-org-3.js I am creating buttons that are a list of states. These are being pulled from a mySQL database. This part is working. I need to pass the stateabbr to the next window when the button is clicked. The problem is it passes the last state in the list no matter which button I click.</p>
<p>This is remote_read-org.js It may not been the cleanest code but I am still working through the how to&#39;s</p>
<pre><code class="hljs">var currentWin = Ti.UI.currentWindow;

var view02 = Titanium.UI.createView({
         top:<span class="hljs-number">0</span>,
        left:<span class="hljs-number">0</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-string">'100%'</span>,
        <span class="hljs-variable">width</span>: <span class="hljs-string">'100%'</span>,
        backgroundImage: <span class="hljs-string">'images/wcs_background_2.jpg'</span>,
})

var label01 = Titanium.UI.createLabel({
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"US STATES"</span>,
    top:<span class="hljs-number">25</span>,
    left:<span class="hljs-number">125</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'175'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">"left"</span>,
    font:{fontFamily:<span class="hljs-string">'Arial'</span>,fontWeight:<span class="hljs-string">'bold'</span>,fontSize:<span class="hljs-number">24</span>},
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#1c1e3b"</span>,
})

var label02 = Titanium.UI.createLabel({
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"Attachments"</span>,
    top:<span class="hljs-number">50</span>,
    left: <span class="hljs-number">125</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'24'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'150'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">"left"</span>,
    font:{fontFamily:<span class="hljs-string">'Arial'</span>,fontWeight:<span class="hljs-string">'bold'</span>,fontSize:<span class="hljs-number">18</span>},
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#1c1e3b"</span>,
})

var view01 = Titanium.UI.createView({
        top:<span class="hljs-number">90</span>,
        left:<span class="hljs-number">70</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">375</span>,
        <span class="hljs-variable">width</span>: Ti.UI.FILL,
})

var currentWin = Ti.UI.currentWindow;

var sendit = Ti.Network.createHTTPClient();
sendit.<span class="hljs-built_in">open</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'http://localhost/test/read.php'</span>);
sendit.send();
sendit.onload = function(){
    var json = JSON.parse(<span class="hljs-keyword">this</span>.responseText);

    var json = json.states;

    var dataArray = [];

    var scroller =  Ti.UI.createScrollView({
    <span class="hljs-variable">height</span>: Ti.UI.FILL,
    <span class="hljs-variable">width</span>: Ti.UI.FILL,
});

    var brandView = Ti.UI.createView({   <span class="hljs-comment">//Primary view for buttons</span>
        title: <span class="hljs-string">'Hello'</span>,
        top:<span class="hljs-number">0</span>,
        left:<span class="hljs-number">0</span>,
        <span class="hljs-variable">height</span>      : Ti.UI.FILL,
        <span class="hljs-variable">width</span>       : Ti.UI.FILL,
        contentHeight : <span class="hljs-string">"auto"</span>,
        backgroundColor : <span class="hljs-string">"transparent"</span>,
        layout      : <span class="hljs-string">"horizontal"</span>,
        horizontalBounce :<span class="hljs-keyword">false</span>,
});

scroller.<span class="hljs-built_in">add</span>(brandView);

view01.<span class="hljs-built_in">add</span>(scroller);

    var pos;
    <span class="hljs-keyword">for</span>( pos=<span class="hljs-number">0</span>; pos &lt; json.length; pos++){

        dataArray.push({title:<span class="hljs-string">''</span> + json[pos].stateAbbr + <span class="hljs-string">''</span>});
        <span class="hljs-comment">// set the array to the tableView</span>
        var btn = Ti.UI.createButton({
        title: json[pos].stateAbbr,
        <span class="hljs-variable">width</span>: <span class="hljs-number">60</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">70</span>,
        top: pos * <span class="hljs-number">0</span>, <span class="hljs-comment">// space the buttons at 105</span>
        left: <span class="hljs-number">2</span>,
        backgroundImage: <span class="hljs-string">'images/state_icon.png'</span>, 
        MyID: json[pos].stateAbbr,
    });

    btn.addEventListener(<span class="hljs-string">'click'</span>, function(e) { 

        var newWindow = Titanium.UI.createWindow({ 
            url: <span class="hljs-string">'remote_read_acc.js'</span>, 
            MyID: btn.MyID
            }); 
newWindow.<span class="hljs-built_in">open</span>(newWindow);

});

    brandView.<span class="hljs-built_in">add</span>(btn);

    };

};



var brandView = Ti.UI.createView({
});


view02.<span class="hljs-built_in">add</span>(view01);

view02.<span class="hljs-built_in">add</span>(label01);
view02.<span class="hljs-built_in">add</span>(label02);

currentWin.<span class="hljs-built_in">add</span>(view02);
</code></pre><p>I need to pass the stateabbr to this new window</p>
<p>remote_read_acc.js</p>
<pre><code class="hljs">
var currentWin = Ti.UI.currentWindow;

var view02 = Titanium.UI.createView({
         top:<span class="hljs-number">0</span>,
        left:<span class="hljs-number">0</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-string">'100%'</span>,
        <span class="hljs-variable">width</span>: <span class="hljs-string">'100%'</span>,
        backgroundImage: <span class="hljs-string">'images/wcs_background_2.jpg'</span>,
})

var label01 = Titanium.UI.createLabel({
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"US STATES"</span>,
    top:<span class="hljs-number">25</span>,
    left:<span class="hljs-number">125</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'175'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">"left"</span>,
    font:{fontFamily:<span class="hljs-string">'Arial'</span>,fontWeight:<span class="hljs-string">'bold'</span>,fontSize:<span class="hljs-number">24</span>},
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#1c1e3b"</span>,
})

var label02 = Titanium.UI.createLabel({
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"Attachments"</span>,
    top:<span class="hljs-number">50</span>,
    left: <span class="hljs-number">125</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'24'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'150'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">"left"</span>,
    font:{fontFamily:<span class="hljs-string">'Arial'</span>,fontWeight:<span class="hljs-string">'bold'</span>,fontSize:<span class="hljs-number">18</span>},
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#1c1e3b"</span>,
})

var view01 = Titanium.UI.createView({
        top:<span class="hljs-number">90</span>,
        left:<span class="hljs-number">90</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">375</span>,
        <span class="hljs-variable">width</span>: Ti.UI.FILL,
})

var currentWin = Ti.UI.currentWindow;

var sendit = Ti.Network.createHTTPClient();
sendit.<span class="hljs-built_in">open</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'http://localhost/test/attachments.php'</span>);
sendit.send();
sendit.onload = function(){
    var json = JSON.parse(<span class="hljs-keyword">this</span>.responseText);

    var json = json.attachments;

    var dataArray = [];

    var scroller =  Ti.UI.createScrollView({
    <span class="hljs-variable">height</span>: Ti.UI.FILL,
    <span class="hljs-variable">width</span>: Ti.UI.FILL,
});

    var brandView = Ti.UI.createView({   <span class="hljs-comment">//Primary view for buttons</span>
        title: <span class="hljs-string">'Hello'</span>,
        top:<span class="hljs-number">0</span>,
        left:<span class="hljs-number">0</span>,
        <span class="hljs-variable">height</span>      : Ti.UI.FILL,
        <span class="hljs-variable">width</span>       : Ti.UI.FILL,
        contentHeight : <span class="hljs-string">"auto"</span>,
        backgroundColor : <span class="hljs-string">"transparent"</span>,
        layout      : <span class="hljs-string">"horizontal"</span>,
        horizontalBounce :<span class="hljs-keyword">false</span>,
});

scroller.<span class="hljs-built_in">add</span>(brandView);

view01.<span class="hljs-built_in">add</span>(scroller);

    var pos;
    <span class="hljs-keyword">for</span>( pos=<span class="hljs-number">0</span>; pos &lt; json.length; pos++){

        dataArray.push({title:<span class="hljs-string">''</span> + json[pos].attachmentName + <span class="hljs-string">''</span>});
        <span class="hljs-comment">// set the array to the tableView</span>
        var btn = Ti.UI.createButton({
        title: json[pos].attachmentName ,
        <span class="hljs-variable">width</span>: <span class="hljs-number">190</span>,
        <span class="hljs-variable">height</span>: <span class="hljs-number">30</span>,
        top: pos * <span class="hljs-number">0</span>, <span class="hljs-comment">// space the buttons at 105</span>
        left: <span class="hljs-number">2</span>,
        MyID: json[pos].attachmentName,
    });

    btn.addEventListener(<span class="hljs-string">'click'</span>, function(e) { 

        var newWindow = Titanium.UI.createWindow({ 
            url: <span class="hljs-string">''</span>, 
            }); 
newWindow.<span class="hljs-built_in">open</span>(newWindow);

    brandView.<span class="hljs-built_in">add</span>(btn);

    };

};


var brandView = Ti.UI.createView({
});


view02.<span class="hljs-built_in">add</span>(view01);

view02.<span class="hljs-built_in">add</span>(label01);
view02.<span class="hljs-built_in">add</span>(label02);

currentWin.<span class="hljs-built_in">add</span>(view02);
</code></pre><p>I also then need to use that stateabbr that I passed to query the dataArray to pull just the values from the array that matches the stateabbr variable. so I can display them on this page.</p>
<p>Any help would be greatly appreciated</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 25th 2013, 5:39:39 am">January 25th 2013</span>
				by <span class='authorname'>Darin Densley</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>dataarray</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-255311">
				
						<section>
							<p>Hi Darin,</p>
<p>Try to use <strong>e.source.MyID</strong> instead of <strong>btn.MyID</strong>.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 25th 2013, 6:59:55 am">January 25th 2013</span>
								by <span class='authorname'>Nitin Chavda</span><br>
								<a class="icon-bg icon-link" href="question/147382/dynamically-generated-buttons-pass-variable-to-new-window-with-json#answer-255311" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255312">
				
						<section>
							<p>Hi</p>
<p>Without running your code yet and only reading it you may have a quick fix to try before anything else.  Try this;</p>
<p>In <strong>remote_read-org.js</strong> change</p>
<pre><code class="hljs"><span class="hljs-attribute">MyID</span>: <span class="hljs-string">btn.MyID</span>
</code></pre><p>To</p>
<pre><code class="hljs">MyID: e<span class="hljs-class">.source</span><span class="hljs-class">.MyID</span>
</code></pre><p>Report back</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 25th 2013, 7:02:06 am">January 25th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/147382/dynamically-generated-buttons-pass-variable-to-new-window-with-json#answer-255312" rel="permalink">permalink</a>
							</div>

							<h5>16 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>If you are trying to access the all of the data instead of just the <strong>MyID</strong> parameter then try this;</p>
<pre><code class="hljs">var btn = Ti.UI.createButton({
    title: json[pos].<span class="hljs-keyword">state</span>Abbr,
    width: <span class="hljs-number">60</span>,
    height: <span class="hljs-number">70</span>,
    top: pos * <span class="hljs-number">0</span>, // space the buttons at <span class="hljs-number">105</span>
    left: <span class="hljs-number">2</span>,
    backgroundImage: 'images/state_icon.png', 
    MyID: json[pos].<span class="hljs-keyword">state</span>Abbr,
    data: json[pos]
});
</code></pre><p>Then</p>
<pre><code class="hljs">btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{ 
     <span class="hljs-keyword">var</span> newWindow = Ti.UI.createWindow({ 
        url: <span class="hljs-string">'remote_read_acc.js'</span>, 
        MyID: e.source.MyID,
        data: e.source.data
    }); 
    newWindow.open(newWindow);
});
</code></pre><p>Then you can access the <strong>data</strong> attribute inside your window object;</p>
<pre><code class="hljs">currentW<span class="hljs-keyword">in</span>.data.<span class="hljs-keyword">state</span>Abbr;
currentW<span class="hljs-keyword">in</span>.data.anyotherparamthatwasinthenode;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 7:57:06 am">January 25th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>One question on this there are some states that have many Accompaniment and on remote_read-org.js I have limited to only show each state once. So I is how this would work if you had a one-to-one relationship but I have a one-to-many relationship. that is why I have a different php file for each page. Unless you can think of a different way?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 8:23:37 am">January 25th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Could you give me an example of the the sort of data structure you are referring to?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 8:43:40 am">January 25th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>here is a sample of the mySQL to show you the tables</p>
<pre><code class="hljs"><span class="hljs-comment">--</span>
<span class="hljs-comment">-- Table structure for table `attachments`</span>
<span class="hljs-comment">--</span>

<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`attachments`</span> (
  <span class="hljs-string">`attachmentID`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT,
  <span class="hljs-string">`StateName`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">244</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`stateAbbr`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">244</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`attachmentName`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">244</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`attachmentImage`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">244</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`attachmentID`</span>)
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span>  <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=latin1 AUTO_INCREMENT=<span class="hljs-number">77</span> ;</span>

<span class="hljs-comment">--</span>
<span class="hljs-comment">-- Dumping data for table `attachments`</span>
<span class="hljs-comment">--</span>

<span class="hljs-operator"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-string">`attachments`</span> (<span class="hljs-string">`attachmentID`</span>, <span class="hljs-string">`StateName`</span>, <span class="hljs-string">`stateAbbr`</span>, <span class="hljs-string">`attachmentName`</span>, <span class="hljs-string">`attachmentImage`</span>) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-number">1</span>, <span class="hljs-string">'Alabama'</span>, <span class="hljs-string">'AL'</span>, <span class="hljs-string">'AL Transportation Permit Conditions'</span>, <span class="hljs-string">'http://www.wcspermits.com/pdf/ALABAMA RULES.pdf'</span>),
(<span class="hljs-number">2</span>, <span class="hljs-string">'Alaska'</span>, <span class="hljs-string">'AK'</span>, <span class="hljs-string">'No additional attachments required, conditions are in the body of the permit.'</span>, <span class="hljs-string">''</span>),
(<span class="hljs-number">3</span>, <span class="hljs-string">'Arizona'</span>, <span class="hljs-string">'AZ'</span>, <span class="hljs-string">'No additional attachments required, conditions are in the body of the permit.'</span>, <span class="hljs-string">''</span>),
(<span class="hljs-number">4</span>, <span class="hljs-string">'Arkansas'</span>, <span class="hljs-string">'AR'</span>, <span class="hljs-string">'No additional attachments required, conditions are in the body of the permit.'</span>, <span class="hljs-string">''</span>),
(<span class="hljs-number">5</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Transportation Permit Conditions'</span>, <span class="hljs-string">'http://www.wcspermits.com/pdf/CATransportationPermitConditions.pdf'</span>),
(<span class="hljs-number">6</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA 24/7 Travel'</span>, <span class="hljs-string">'http://www.dot.ca.gov/hq/traffops/permits/pdf_documents/accomp/24-7_SC_2009-04-16.pdf'</span>),
(<span class="hljs-number">7</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Pilot Car'</span>, <span class="hljs-string">'http://www.dot.ca.gov/hq/traffops/permits/pdf_documents/accomp/scpcescortRev9-26-05.pdf'</span>),
(<span class="hljs-number">8</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Curfew Map for Los Angeles'</span>, <span class="hljs-string">'http://www.wcspermits.com/pdf/california_curfew_map_-_los_angeles.pdf'</span>),
(<span class="hljs-number">9</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Curfew Map for Sacramento'</span>, <span class="hljs-string">'http://www.wcspermits.com/pdf/california_curfew_map_-_sacramento.pdf'</span>),
(<span class="hljs-number">10</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Curfew Map for San Diego'</span>, <span class="hljs-string">'http://www.wcspermits.com/pdf/california_curfew_map_-_san_diego.pdf'</span>),
(<span class="hljs-number">11</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Curfew Map for San Francisco'</span>, <span class="hljs-string">'http://www.wcspermits.com/pdf/california_curfew_map_-_san_francisco.pdf'</span>),
(<span class="hljs-number">12</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Holiday Provisions'</span>, <span class="hljs-string">'http://www.wcspermits.com/pdf/california_holiday_provisions.pdf'</span>),
(<span class="hljs-number">13</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Manufactured Housing Over 14 Wide'</span>, <span class="hljs-string">'http://www.dot.ca.gov/hq/traffops/permits/pdf_documents/accomp/scmh14.pdf'</span>),
(<span class="hljs-number">14</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Manufactured Housing (SCMH)'</span>, <span class="hljs-string">'http://www.dot.ca.gov/hq/traffops/permits/pdf_documents/accomp/scmh.pdf'</span>),
(<span class="hljs-number">15</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA San Francisco-Oakland Bay Bridge'</span>, <span class="hljs-string">'http://www.dot.ca.gov/hq/traffops/permits/pdf_documents/accomp/scsfobb072105.pdf'</span>),
(<span class="hljs-number">16</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'CA'</span>, <span class="hljs-string">'CA Tow Trucks'</span>, <span class="hljs-string">'http://www.dot.ca.gov/hq/traffops/permits/pdf_documents/accomp/sctowt.pdf'</span>),
(<span class="hljs-number">17</span>, <span class="hljs-string">'Colorado'</span>, <span class="hljs-string">'CO'</span>, <span class="hljs-string">'CO Transportation Permit Conditions'</span>, <span class="hljs-string">'http://www.wcspermits.com/pdf/COPermitConditions.pdf'</span>),
(<span class="hljs-number">18</span>, <span class="hljs-string">'Colorado'</span>, <span class="hljs-string">'CO'</span>, <span class="hljs-string">'CO Non-Interstate Overweight Divisible Permits'</span>, <span class="hljs-string">'http://www.wcspermits.com/pdf/CONon-Interstate OW Divisible Permits.pdf'</span>),</span>
</code></pre><p>Here is the read.php</p>
<pre><code class="hljs">&lt;?php
<span class="hljs-variable">$mysqli</span> = new mysqli(<span class="hljs-string">"localhost"</span>,<span class="hljs-string">"root"</span>,<span class="hljs-string">"root"</span>,<span class="hljs-string">"wcs"</span>);
<span class="hljs-keyword">if</span> (mysqli_connect_errno()) {
    printf(<span class="hljs-string">"Can't connect to SQL Server. Error Code %s\n"</span>, mysqli_connect_error(<span class="hljs-variable">$mysqli</span>));
    exit;
}
// Set the <span class="hljs-keyword">default</span> <span class="hljs-keyword">namespace</span> <span class="hljs-keyword">to</span> utf8
<span class="hljs-variable">$mysqli-</span>&gt;query(<span class="hljs-string">"SET NAMES 'utf8'"</span>);
<span class="hljs-variable">$json</span>   = <span class="hljs-keyword">array</span>();
<span class="hljs-keyword">if</span>(<span class="hljs-variable">$result</span> = <span class="hljs-variable">$mysqli-</span>&gt;query(<span class="hljs-string">"select DISTINCT stateAbbr from attachments"</span>)) {
    while (<span class="hljs-variable">$row</span>=<span class="hljs-variable">$result-</span>&gt;fetch_assoc()) {
        <span class="hljs-variable">$json</span>[]=array(
            <span class="hljs-string">'stateAbbr'</span>=&gt;<span class="hljs-variable">$row</span>[<span class="hljs-string">'stateAbbr'</span>],
            <span class="hljs-string">'StateName'</span>=&gt;<span class="hljs-variable">$row</span>[<span class="hljs-string">'StateName'</span>],
        );
    }
}
<span class="hljs-variable">$result-</span>&gt;close();

header(<span class="hljs-string">"Content-Type: text/json"</span>);
echo json_encode(<span class="hljs-keyword">array</span>( <span class="hljs-string">'states'</span>  =&gt;   <span class="hljs-variable">$json</span> )); 

<span class="hljs-variable">$mysqli-</span>&gt;close(); 
?&gt;
</code></pre><p>Here is the attachments.php file</p>
<pre><code class="hljs">
&lt;?php
<span class="hljs-variable">$mysqli</span> = new mysqli(<span class="hljs-string">"localhost"</span>,<span class="hljs-string">"root"</span>,<span class="hljs-string">"root"</span>,<span class="hljs-string">"wcs"</span>);
<span class="hljs-keyword">if</span> (mysqli_connect_errno()) {
    printf(<span class="hljs-string">"Can't connect to SQL Server. Error Code %s\n"</span>, mysqli_connect_error(<span class="hljs-variable">$mysqli</span>));
    exit;
}
// Set the <span class="hljs-keyword">default</span> <span class="hljs-keyword">namespace</span> <span class="hljs-keyword">to</span> utf8
<span class="hljs-variable">$mysqli-</span>&gt;query(<span class="hljs-string">"SET NAMES 'utf8'"</span>);
<span class="hljs-variable">$json</span>   = <span class="hljs-keyword">array</span>();
<span class="hljs-keyword">if</span>(<span class="hljs-variable">$result</span> = <span class="hljs-variable">$mysqli-</span>&gt;query(<span class="hljs-string">"select * from attachments"</span>)) {
    while (<span class="hljs-variable">$row</span>=<span class="hljs-variable">$result-</span>&gt;fetch_assoc()) {
        <span class="hljs-variable">$json</span>[]=array(
            <span class="hljs-string">'attachmentID'</span>=&gt;<span class="hljs-variable">$row</span>[<span class="hljs-string">'attachmentID'</span>],
            <span class="hljs-string">'StateName'</span>=&gt;<span class="hljs-variable">$row</span>[<span class="hljs-string">'StateName'</span>],
            <span class="hljs-string">'stateAbbr'</span>=&gt;<span class="hljs-variable">$row</span>[<span class="hljs-string">'stateAbbr'</span>],
            <span class="hljs-string">'attachmentName'</span>=&gt;<span class="hljs-variable">$row</span>[<span class="hljs-string">'attachmentName'</span>],
            <span class="hljs-string">'attachmentImage'</span>=&gt;<span class="hljs-variable">$row</span>[<span class="hljs-string">'attachmentImage'</span>],
        );
    }
}
<span class="hljs-variable">$result-</span>&gt;close();

header(<span class="hljs-string">"Content-Type: text/json"</span>);
echo json_encode(<span class="hljs-keyword">array</span>( <span class="hljs-string">'attachments'</span>  =&gt;   <span class="hljs-variable">$json</span> )); 

<span class="hljs-variable">$mysqli-</span>&gt;close(); 
?&gt;
</code></pre><p>Hope this explains it better</p>
<p>Thanks for the help</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 8:50:50 am">January 25th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So you need to be able to pass multiple records if required.</p>
<p>Assuming you already know how to filter this information inside your loop code you can pass the state array into data.  So imagine you have the following aubset.</p>
<pre><code class="hljs">info = [
    { <span class="hljs-keyword">state</span>Abbr: 'aa, <span class="hljs-keyword">state</span>Name: '<span class="hljs-number">11</span>' },
    { <span class="hljs-keyword">state</span>Abbr: 'bb', <span class="hljs-keyword">state</span>Name: '<span class="hljs-number">22</span>' },
    { <span class="hljs-keyword">state</span>Abbr: 'cc', <span class="hljs-keyword">state</span>Name: '<span class="hljs-number">33</span>' },
    { <span class="hljs-keyword">state</span>Abbr: 'dd', <span class="hljs-keyword">state</span>Name: '<span class="hljs-number">44</span> }
];
var btn = Ti.UI.createButton({
    title: json[pos].<span class="hljs-keyword">state</span>Abbr,
    width: <span class="hljs-number">60</span>,
    height: <span class="hljs-number">70</span>,
    top: pos * <span class="hljs-number">0</span>, // space the buttons at <span class="hljs-number">105</span>
    left: <span class="hljs-number">2</span>,
    backgroundImage: 'images/state_icon.png', 
    MyID: json[pos].<span class="hljs-keyword">state</span>Abbr,
    data: info
});
</code></pre><p>Then later on;</p>
<pre><code class="hljs">currentW<span class="hljs-keyword">in</span>.data[<span class="hljs-number">0</span>].<span class="hljs-keyword">state</span>Abbr; // aa
currentW<span class="hljs-keyword">in</span>.data[<span class="hljs-number">2</span>].<span class="hljs-keyword">state</span>Name; // <span class="hljs-number">33</span>
</code></pre><p>Is this what you mean?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 9:17:46 am">January 25th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I think the part I am missing is how to filter the information inside the loop so I only get each stateabbr once</p>
<p>Then this code will pass all the data I need to the next page</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 4:41:29 pm">January 25th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Give me the first ten rows you will get WITHOUT your limit to a single entry each.  I will work with that for you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 4:46:51 pm">January 25th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>when I run attachments.php this is the first 30 rows of the results</p>
<pre><code class="hljs">
{"<span class="hljs-attribute">attachments</span>":<span class="hljs-value">[{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"1"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Alabama"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"AL"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"AL Transportation Permit Conditions"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/ALABAMA RULES.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"2"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Alaska"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"AK"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"3"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Arizona"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"AZ"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"4"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Arkansas"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"AR"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"5"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Transportation Permit Conditions"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/CATransportationPermitConditions.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"6"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA 24\/7 Travel"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.dot.ca.gov\/hq\/traffops\/permits\/pdf_documents\/accomp\/24-7_SC_2009-04-16.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"7"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Pilot Car"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.dot.ca.gov\/hq\/traffops\/permits\/pdf_documents\/accomp\/scpcescortRev9-26-05.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"8"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Curfew Map for Los Angeles"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/california_curfew_map_-_los_angeles.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"9"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Curfew Map for Sacramento"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/california_curfew_map_-_sacramento.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"10"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Curfew Map for San Diego"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/california_curfew_map_-_san_diego.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"11"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Curfew Map for San Francisco"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/california_curfew_map_-_san_francisco.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"12"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Holiday Provisions"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/california_holiday_provisions.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"13"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Manufactured Housing Over 14 Wide"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.dot.ca.gov\/hq\/traffops\/permits\/pdf_documents\/accomp\/scmh14.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"14"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Manufactured Housing (SCMH)"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.dot.ca.gov\/hq\/traffops\/permits\/pdf_documents\/accomp\/scmh.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"15"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA San Francisco-Oakland Bay Bridge"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.dot.ca.gov\/hq\/traffops\/permits\/pdf_documents\/accomp\/scsfobb072105.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"16"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"California"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CA Tow Trucks"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.dot.ca.gov\/hq\/traffops\/permits\/pdf_documents\/accomp\/sctowt.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"17"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Colorado"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CO"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CO Transportation Permit Conditions"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/COPermitConditions.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"18"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Colorado"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CO"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"CO Non-Interstate Overweight Divisible Permits"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/CONon-Interstate OW Divisible Permits.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"19"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Connecticut"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"CT"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"20"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Delaware"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"DE"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"21"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"District of Columbia"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"DC"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"22"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Florida"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"FL"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"Florida Safety Regulations and Permit Fees for Overweight and Overdimensional Vehicles"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/FloridaPermitConditions.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"23"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Georgia"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"GA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"Georgia Rules of State DOT"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/GeorgiaRules.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"24"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Idaho"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"ID"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"25"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Illinois"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"IL"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"Illinois Special Vehicle Movement Permit Provisions"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/IllinoisProvisions.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"26"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Indiana"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"IN"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"Indiana Transportation Permit Conditions"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/Indiana.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"27"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Indiana"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"IN"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"Indiana Superloads Permit Conditions"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/IndianaSuperloadProvisionSheet.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"28"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Iowa"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"IA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"IA Oversize Load Provisions"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/IowaGeneralProvisions.pdf"</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"29"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Kansas"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"KS"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"30"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Kentucky"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"KY"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>},{"<span class="hljs-attribute">attachmentID</span>":<span class="hljs-value"><span class="hljs-string">"31"</span></span>,"<span class="hljs-attribute">StateName</span>":<span class="hljs-value"><span class="hljs-string">"Louisiana"</span></span>,"<span class="hljs-attribute">stateAbbr</span>":<span class="hljs-value"><span class="hljs-string">"LA"</span></span>,"<span class="hljs-attribute">attachmentName</span>":<span class="hljs-value"><span class="hljs-string">"Transportation Permit Conditions"</span></span>,"<span class="hljs-attribute">attachmentImage</span>":<span class="hljs-value"><span class="hljs-string">"http:\/\/www.wcspermits.com\/pdf\/Louisiana.pdf"</span></span>},</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 5:09:06 pm">January 25th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok I did something wrong sorry</p>
<p>attachments&quot;:[{&quot;attachmentID&quot;:&quot;1&quot;,&quot;StateName&quot;:&quot;Alabama&quot;,&quot;stateAbbr&quot;:&quot;AL&quot;,&quot;attachmentName&quot;:&quot;AL Transportation Permit Conditions&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;ALABAMA RULES.pdf&quot;},{&quot;attachmentID&quot;:&quot;2&quot;,&quot;StateName&quot;:&quot;Alaska&quot;,&quot;stateAbbr&quot;:&quot;AK&quot;,&quot;attachmentName&quot;:&quot;No additional attachments required, conditions are in the body of the permit.&quot;,&quot;attachmentImage&quot;:&quot;&quot;},{&quot;attachmentID&quot;:&quot;3&quot;,&quot;StateName&quot;:&quot;Arizona&quot;,&quot;stateAbbr&quot;:&quot;AZ&quot;,&quot;attachmentName&quot;:&quot;No additional attachments required, conditions are in the body of the permit.&quot;,&quot;attachmentImage&quot;:&quot;&quot;},{&quot;attachmentID&quot;:&quot;4&quot;,&quot;StateName&quot;:&quot;Arkansas&quot;,&quot;stateAbbr&quot;:&quot;AR&quot;,&quot;attachmentName&quot;:&quot;No additional attachments required, conditions are in the body of the permit.&quot;,&quot;attachmentImage&quot;:&quot;&quot;},{&quot;attachmentID&quot;:&quot;5&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Transportation Permit Conditions&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;CATransportationPermitConditions.pdf&quot;},{&quot;attachmentID&quot;:&quot;6&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA 24\&#x2F;7 Travel&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.dot.ca.gov\&#x2F;hq\&#x2F;traffops\&#x2F;permits\&#x2F;pdf_documents\&#x2F;accomp\&#x2F;24-7_SC_2009-04-16.pdf&quot;},{&quot;attachmentID&quot;:&quot;7&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Pilot Car&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.dot.ca.gov\&#x2F;hq\&#x2F;traffops\&#x2F;permits\&#x2F;pdf_documents\&#x2F;accomp\&#x2F;scpcescortRev9-26-05.pdf&quot;},{&quot;attachmentID&quot;:&quot;8&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Curfew Map for Los Angeles&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;california_curfew<em>map</em>-_los_angeles.pdf&quot;},{&quot;attachmentID&quot;:&quot;9&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Curfew Map for Sacramento&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;california_curfew<em>map</em>-_sacramento.pdf&quot;},{&quot;attachmentID&quot;:&quot;10&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Curfew Map for San Diego&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;california_curfew<em>map</em>-_san_diego.pdf&quot;},{&quot;attachmentID&quot;:&quot;11&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Curfew Map for San Francisco&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;california_curfew<em>map</em>-_san_francisco.pdf&quot;},{&quot;attachmentID&quot;:&quot;12&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Holiday Provisions&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;california_holiday_provisions.pdf&quot;},{&quot;attachmentID&quot;:&quot;13&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Manufactured Housing Over 14 Wide&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.dot.ca.gov\&#x2F;hq\&#x2F;traffops\&#x2F;permits\&#x2F;pdf_documents\&#x2F;accomp\&#x2F;scmh14.pdf&quot;},{&quot;attachmentID&quot;:&quot;14&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Manufactured Housing (SCMH)&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.dot.ca.gov\&#x2F;hq\&#x2F;traffops\&#x2F;permits\&#x2F;pdf_documents\&#x2F;accomp\&#x2F;scmh.pdf&quot;},{&quot;attachmentID&quot;:&quot;15&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA San Francisco-Oakland Bay Bridge&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.dot.ca.gov\&#x2F;hq\&#x2F;traffops\&#x2F;permits\&#x2F;pdf_documents\&#x2F;accomp\&#x2F;scsfobb072105.pdf&quot;},{&quot;attachmentID&quot;:&quot;16&quot;,&quot;StateName&quot;:&quot;California&quot;,&quot;stateAbbr&quot;:&quot;CA&quot;,&quot;attachmentName&quot;:&quot;CA Tow Trucks&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.dot.ca.gov\&#x2F;hq\&#x2F;traffops\&#x2F;permits\&#x2F;pdf_documents\&#x2F;accomp\&#x2F;sctowt.pdf&quot;},{&quot;attachmentID&quot;:&quot;17&quot;,&quot;StateName&quot;:&quot;Colorado&quot;,&quot;stateAbbr&quot;:&quot;CO&quot;,&quot;attachmentName&quot;:&quot;CO Transportation Permit Conditions&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;COPermitConditions.pdf&quot;},{&quot;attachmentID&quot;:&quot;18&quot;,&quot;StateName&quot;:&quot;Colorado&quot;,&quot;stateAbbr&quot;:&quot;CO&quot;,&quot;attachmentName&quot;:&quot;CO Non-Interstate Overweight Divisible Permits&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;CONon-Interstate OW Divisible Permits.pdf&quot;},{&quot;attachmentID&quot;:&quot;19&quot;,&quot;StateName&quot;:&quot;Connecticut&quot;,&quot;stateAbbr&quot;:&quot;CT&quot;,&quot;attachmentName&quot;:&quot;No additional attachments required, conditions are in the body of the permit.&quot;,&quot;attachmentImage&quot;:&quot;&quot;},{&quot;attachmentID&quot;:&quot;20&quot;,&quot;StateName&quot;:&quot;Delaware&quot;,&quot;stateAbbr&quot;:&quot;DE&quot;,&quot;attachmentName&quot;:&quot;No additional attachments required, conditions are in the body of the permit.&quot;,&quot;attachmentImage&quot;:&quot;&quot;},{&quot;attachmentID&quot;:&quot;21&quot;,&quot;StateName&quot;:&quot;District of Columbia&quot;,&quot;stateAbbr&quot;:&quot;DC&quot;,&quot;attachmentName&quot;:&quot;No additional attachments required, conditions are in the body of the permit.&quot;,&quot;attachmentImage&quot;:&quot;&quot;},{&quot;attachmentID&quot;:&quot;22&quot;,&quot;StateName&quot;:&quot;Florida&quot;,&quot;stateAbbr&quot;:&quot;FL&quot;,&quot;attachmentName&quot;:&quot;Florida Safety Regulations and Permit Fees for Overweight and Overdimensional Vehicles&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;FloridaPermitConditions.pdf&quot;},{&quot;attachmentID&quot;:&quot;23&quot;,&quot;StateName&quot;:&quot;Georgia&quot;,&quot;stateAbbr&quot;:&quot;GA&quot;,&quot;attachmentName&quot;:&quot;Georgia Rules of State DOT&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;GeorgiaRules.pdf&quot;},{&quot;attachmentID&quot;:&quot;24&quot;,&quot;StateName&quot;:&quot;Idaho&quot;,&quot;stateAbbr&quot;:&quot;ID&quot;,&quot;attachmentName&quot;:&quot;No additional attachments required, conditions are in the body of the permit.&quot;,&quot;attachmentImage&quot;:&quot;&quot;},{&quot;attachmentID&quot;:&quot;25&quot;,&quot;StateName&quot;:&quot;Illinois&quot;,&quot;stateAbbr&quot;:&quot;IL&quot;,&quot;attachmentName&quot;:&quot;Illinois Special Vehicle Movement Permit Provisions&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;IllinoisProvisions.pdf&quot;},{&quot;attachmentID&quot;:&quot;26&quot;,&quot;StateName&quot;:&quot;Indiana&quot;,&quot;stateAbbr&quot;:&quot;IN&quot;,&quot;attachmentName&quot;:&quot;Indiana Transportation Permit Conditions&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;Indiana.pdf&quot;},{&quot;attachmentID&quot;:&quot;27&quot;,&quot;StateName&quot;:&quot;Indiana&quot;,&quot;stateAbbr&quot;:&quot;IN&quot;,&quot;attachmentName&quot;:&quot;Indiana Superloads Permit Conditions&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;IndianaSuperloadProvisionSheet.pdf&quot;},{&quot;attachmentID&quot;:&quot;28&quot;,&quot;StateName&quot;:&quot;Iowa&quot;,&quot;stateAbbr&quot;:&quot;IA&quot;,&quot;attachmentName&quot;:&quot;IA Oversize Load Provisions&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;IowaGeneralProvisions.pdf&quot;},{&quot;attachmentID&quot;:&quot;29&quot;,&quot;StateName&quot;:&quot;Kansas&quot;,&quot;stateAbbr&quot;:&quot;KS&quot;,&quot;attachmentName&quot;:&quot;No additional attachments required, conditions are in the body of the permit.&quot;,&quot;attachmentImage&quot;:&quot;&quot;},{&quot;attachmentID&quot;:&quot;30&quot;,&quot;StateName&quot;:&quot;Kentucky&quot;,&quot;stateAbbr&quot;:&quot;KY&quot;,&quot;attachmentName&quot;:&quot;No additional attachments required, conditions are in the body of the permit.&quot;,&quot;attachmentImage&quot;:&quot;&quot;},{&quot;attachmentID&quot;:&quot;31&quot;,&quot;StateName&quot;:&quot;Louisiana&quot;,&quot;stateAbbr&quot;:&quot;LA&quot;,&quot;attachmentName&quot;:&quot;Transportation Permit Conditions&quot;,&quot;attachmentImage&quot;:&quot;http:\&#x2F;\&#x2F;www.wcspermits.com\&#x2F;pdf\&#x2F;Louisiana.pdf&quot;</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 5:12:43 pm">January 25th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>here is a remote page that is pulling that data</p>
<p>http:&#x2F;&#x2F;rowtrafficstore.com&#x2F;planroom&#x2F;attachments.php</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2013, 5:35:03 pm">January 25th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Are you asking <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;147426&#x2F;how-to-filter-or-search-an-array">this question again</a> when you are asking it here as well?  I was just getting back to this after being asleep.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 6:17:43 am">January 26th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry if I did something wrong my first time posting I had a couple of new questions too.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 6:21:04 am">January 26th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>can I delete the other one?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 6:21:58 am">January 26th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No leave it there it is fine I was not complaining just asking, playing at the moment will have something shortly.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 7:26:20 am">January 26th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok thank you for your efforts. The learning curve has been steep</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 7:29:45 am">January 26th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Right here we go, there is a lot going on in here but here are the main points;</p>
<p>The first loop reads each element in your json array and then collapses them into a nested array, like;</p>
<pre><code class="hljs"><span class="hljs-collection">{
...
    <span class="hljs-string">"CO"</span>: <span class="hljs-collection">[
        <span class="hljs-collection">{
            <span class="hljs-string">"attachmentID"</span>: <span class="hljs-string">"17"</span>,
            <span class="hljs-string">"StateName"</span>: <span class="hljs-string">"Colorado"</span>,
            <span class="hljs-string">"stateAbbr"</span>: <span class="hljs-string">"CO"</span>,
            <span class="hljs-string">"attachmentName"</span>: <span class="hljs-string">"CO Transportation Permit Conditions"</span>,
            <span class="hljs-string">"attachmentImage"</span>: <span class="hljs-string">"http://www.wcspermits.com/pdf/COPermitConditions.pdf"</span>
        }</span>,
        <span class="hljs-collection">{
            <span class="hljs-string">"attachmentID"</span>: <span class="hljs-string">"18"</span>,
            <span class="hljs-string">"StateName"</span>: <span class="hljs-string">"Colorado"</span>,
            <span class="hljs-string">"stateAbbr"</span>: <span class="hljs-string">"CO"</span>,
            <span class="hljs-string">"attachmentName"</span>: <span class="hljs-string">"CO Non-Interstate Overweight Divisible Permits"</span>,
            <span class="hljs-string">"attachmentImage"</span>: <span class="hljs-string">"http://www.wcspermits.com/pdf/CONon-Interstate OW Divisible Permits.pdf"</span>
        }</span>
    ]</span>,
    <span class="hljs-string">"CT"</span>: <span class="hljs-collection">[
        <span class="hljs-collection">{
            <span class="hljs-string">"attachmentID"</span>: <span class="hljs-string">"19"</span>,
            <span class="hljs-string">"StateName"</span>: <span class="hljs-string">"Connecticut"</span>,
            <span class="hljs-string">"stateAbbr"</span>: <span class="hljs-string">"CT"</span>,
            <span class="hljs-string">"attachmentName"</span>: <span class="hljs-string">"No additional attachments required, conditions are in the body of the permit."</span>,
            <span class="hljs-string">"attachmentImage"</span>: <span class="hljs-string">""</span>
        }</span>
    ]</span>,
...
}</span>
</code></pre><p>From the snippet above you can see that Colorado has two child objects whereas Connecticut has only one.</p>
<p>The second loop then goes through the top level object values and use those for buttons.  It then sets the custom property <strong>data</strong> to the child array.</p>
<p>So in the window you can access as an array.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">var</span> request = Titanium.Network.createHTTPClient({
        timeout : <span class="hljs-number">10000</span> <span class="hljs-comment">/* in milliseconds */</span>
    });
    request.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (obj.error) {
            obj.error(e);
        }
    };
    request.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
        <span class="hljs-keyword">if</span> (obj.success) {
            obj.success(json);
        }
    };
    request.open(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://rowtrafficstore.com/planroom/attachments.php"</span>);
    request.send(); 
}
<span class="hljs-keyword">var</span> btn = Ti.UI.createButton({
    title: <span class="hljs-string">'Open'</span>
});
btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    get({
        success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">var</span> json = e.attachments;
            <span class="hljs-keyword">var</span> intState = <span class="hljs-number">0</span>, intStates = json.length, state;
            <span class="hljs-keyword">var</span> strLastAbbr = <span class="hljs-string">''</span>, data = {}, btn;
            <span class="hljs-keyword">for</span> (intState = <span class="hljs-number">0</span>; intState &lt; intStates; intState = intState + <span class="hljs-number">1</span>) {
                state = json[intState];
                <span class="hljs-keyword">if</span> (state.stateAbbr === strLastAbbr) {
                    data[strLastAbbr].push(state);
                } <span class="hljs-keyword">else</span> {
                    strLastAbbr = state.stateAbbr;
                    data[strLastAbbr] = [];
                    data[strLastAbbr].push(state);
                }
            }
            <span class="hljs-keyword">for</span> (state <span class="hljs-keyword">in</span> data) {
                <span class="hljs-keyword">if</span> (data.hasOwnProperty(state)) {
                    btn = Ti.UI.createButton({
                        title: data[state][<span class="hljs-number">0</span>].stateAbbr,
                        width: <span class="hljs-number">60</span>,
                        height: <span class="hljs-number">70</span>,
                        top: <span class="hljs-number">0</span>,
                        left: <span class="hljs-number">2</span>,
                        backgroundImage: <span class="hljs-string">'images/state_icon.png'</span>, 
                        MyID: data[state][<span class="hljs-number">0</span>].stateAbbr,
                        data: data[state]
                    });

                    btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{ 
                        <span class="hljs-keyword">var</span> newWindow = Titanium.UI.createWindow({ 
                            url: <span class="hljs-string">'remote_read_acc.js'</span>, 
                            MyID: e.source.MyID,
                            data: e.source.data
                        }); 
                        newWindow.open(newWindow);
                    }); 
                    brandView.add(btn);
                }
            }
            Ti.API.info(<span class="hljs-built_in">JSON</span>.stringify(data));
        },
        error: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            alert(<span class="hljs-string">'error: '</span> + <span class="hljs-built_in">JSON</span>.stringify(e));
        }
    });
});
win.add(btn);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 9:46:59 am">January 26th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255317">
				
						<section>
							<p>Thanks That worked perfect<br>Now I need to pull all the data from the array on the remote_read_acc.js that has that stateabbr</p>
<p>Is there a quik answer how to do that?</p>
<p>Thanks again for your help</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 25th 2013, 7:17:32 am">January 25th 2013</span>
								by <span class='authorname'>Darin Densley</span><br>
								<a class="icon-bg icon-link" href="question/147382/dynamically-generated-buttons-pass-variable-to-new-window-with-json#answer-255317" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
