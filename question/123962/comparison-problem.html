<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Comparison problem » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Comparison problem</h1>
		</header>
		<section>
			<p>Hi,<br>I have found a strange comparison problem in mobile sdk 1.7.3.</p>
<p>if I do a comparison using &quot;&gt;=&quot;. it seems that it always return true.</p>
<p>For instance :</p>
<pre><code class="hljs"><span class="hljs-literal">a</span> = <span class="hljs-number">3</span><span class="hljs-comment">;</span>
b = <span class="hljs-number">11</span><span class="hljs-comment">;</span>
<span class="hljs-keyword">if</span> (<span class="hljs-literal">a</span> &gt;= b) {
    Ti.API.info('<span class="hljs-literal">true</span>')<span class="hljs-comment">;</span>
}
</code></pre><p>This return true</p>
<pre><code class="hljs"><span class="hljs-literal">a</span> = <span class="hljs-number">3</span><span class="hljs-comment">;</span>
b = <span class="hljs-number">11</span><span class="hljs-comment">;</span>
<span class="hljs-keyword">if</span> (<span class="hljs-literal">a</span> &gt; b) {
    Ti.API.info('<span class="hljs-literal">true</span>')<span class="hljs-comment">;</span>
}
</code></pre><p>This return false;</p>
<p>the only workaraound I have found is to dec b by 1 and use &quot;&gt;&quot; instead of &quot;&gt;=&quot;.</p>
<p>Am I missing something or is it a Javascript - &gt; Obj C conversion ?</p>
<p>Regards</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 9th 2011, 6:08:18 am">August 9th 2011</span>
				by <span class='authorname'>Armindo Da Silva</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>comparison</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>bypass by doing (a&gt;b || a==b)</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 6:13:38 am">August 9th 2011</span>
								by <span class='authorname'>Stefano Di Luca</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>You should always declare variables with &quot;var&quot; keyword, otherwise they become global object properties, or you could say - global variables.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 6:23:13 am">August 9th 2011</span>
								by <span class='authorname'>Ivan Škugor</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Well it seems that the problerm is deeper than my sample case.<br>Because Stefano sample also fails.<br>using directly my sample works since a and b are recognized as integer directly.<br>In my case a come from a textfield, something like a = mytextfield.value; And be come from a field.</p>
<p>Is there a way to force these value considered as integer ?<br>Regards</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 6:29:06 am">August 9th 2011</span>
								by <span class='authorname'>Armindo Da Silva</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Ivan, they were declared as var in my case (not on the samll sample code I have wrote, but as I said previously, bad sample code, better to look at my second comment.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 6:30:58 am">August 9th 2011</span>
								by <span class='authorname'>Armindo Da Silva</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-215914">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Are you sure they are integer type? It seems to me that they are strings, in which case comparison works fine. You can cast strings to integers by multiplying them with 1.</p>
<pre><code class="hljs"><span class="hljs-literal">a</span> = <span class="hljs-literal">a</span> * <span class="hljs-number">1</span><span class="hljs-comment">;</span>
</code></pre><p>Check this examples:</p>
<pre><code class="hljs"><span class="hljs-literal">a</span> = <span class="hljs-string">"3"</span><span class="hljs-comment">;</span>
b = <span class="hljs-string">"11"</span><span class="hljs-comment">;</span>
<span class="hljs-keyword">if</span> (<span class="hljs-literal">a</span> &gt;= b) {
    Ti.API.info('<span class="hljs-literal">true</span>')<span class="hljs-comment">;</span>
}
<span class="hljs-keyword">else</span> {
    Ti.API.info('<span class="hljs-literal">false</span>')<span class="hljs-comment">;</span>
}
</code></pre><p>The output is:</p>
<ul>
<li>true</li>
</ul>
<pre><code class="hljs"><span class="hljs-literal">a</span> = <span class="hljs-string">"3"</span> * <span class="hljs-number">1</span><span class="hljs-comment">;</span>
b = <span class="hljs-string">"11"</span> * <span class="hljs-number">1</span><span class="hljs-comment">;</span>
<span class="hljs-keyword">if</span> (<span class="hljs-literal">a</span> &gt;= b) {
    Ti.API.info('<span class="hljs-literal">true</span>')<span class="hljs-comment">;</span>
}
<span class="hljs-keyword">else</span> {
    Ti.API.info('<span class="hljs-literal">false</span>')<span class="hljs-comment">;</span>
}
</code></pre><p>The output is:</p>
<ul>
<li>false</li>
</ul>
<p>So, now you can see how comparison can be tricky (for more detailed explanation how comparison algorithm works, see ECMAScript specification - 11.8.5 The Abstract Relational Comparison Algorithm). :)<br>I think text field value property is always string, even if it contains integer value.</p>
<p>Here are come useful functions that I use to see what type of value variable contains:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span> (<span class="hljs-params">string_val</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> string_val === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};

<span class="hljs-keyword">var</span> isIntegerRegExp = <span class="hljs-regexp">/^[+-]?[1-9]+[0-9]*$/</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isInteger</span> (<span class="hljs-params">int_val</span>) </span>{
    <span class="hljs-keyword">return</span> isIntegerRegExp.test(int_val);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span> (<span class="hljs-params">numb</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> numb == <span class="hljs-string">'number'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};

<span class="hljs-keyword">var</span> isFloatRegExp = <span class="hljs-regexp">/^[+-]?([0-9]*\.[0-9]*)$/</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFloat</span>(<span class="hljs-params">float_val</span>) </span>{
    <span class="hljs-keyword">return</span> isFloatRegExp.test(float_val);
};
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 9th 2011, 7:01:51 am">August 9th 2011</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="question/123962/comparison-problem#answer-215914" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Just to add … if you need to cast variable value to the string: <code>a = a + &amp;#39;&amp;#39;;</code></p>
</p>
										<div class="author">
											&mdash; commented <span title="August 9th 2011, 7:24:00 am">August 9th 2011</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>in my case it will be to cast them to an integer, any idea ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 9th 2011, 7:28:20 am">August 9th 2011</span>
											by <span class='authorname'>Armindo Da Silva</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes, I told you that, you need to multiply variable value with 1:</p>
<pre><code class="hljs"><span class="hljs-literal">a</span> = <span class="hljs-literal">a</span> * <span class="hljs-number">1</span><span class="hljs-comment">;</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 9th 2011, 7:34:06 am">August 9th 2011</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry Ivan, havn&#39;t seen your previous post. It solved the problem using &quot;* 1&quot;.<br>Thanks again.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 9th 2011, 9:23:55 am">August 9th 2011</span>
											by <span class='authorname'>Armindo Da Silva</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
