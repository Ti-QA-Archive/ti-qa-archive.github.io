<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>getting data from one array to the another array » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>getting data from one array to the another array</h1>
		</header>
		<section>
			<p>I need to take the data from the dataArray and get it in the resultArray using the filter StateName</p>
<p>dataArray has all the correct data in it just not pushing anything to the resultArray</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> sendit = Ti.Network.createHTTPClient();
sendit.open(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'http://localhost/attachments.php'</span>);
sendit.send();
sendit.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);

    <span class="hljs-keyword">var</span> json = json.attachments;

    <span class="hljs-keyword">var</span> dataArray = [];


<span class="hljs-keyword">var</span> i;
    <span class="hljs-keyword">for</span>( i=<span class="hljs-number">0</span>; i &lt; json.length; i++){

        dataArray.push(json[i]);

        };

         <span class="hljs-keyword">var</span> resultArray = [];

         <span class="hljs-keyword">var</span> pos;
        <span class="hljs-keyword">for</span>(pos=<span class="hljs-number">0</span>; pos &lt; dataArray.length; pos++){
            <span class="hljs-keyword">if</span>(dataArray[pos].StateName == MyID){
                resultArray.push(dataArray[pos]);
            }


        <span class="hljs-comment">// set the array to the tableView</span>
        <span class="hljs-keyword">var</span> btn = Ti.UI.createButton({
        title: resultArray[pos].attachmentName ,
        width: <span class="hljs-number">190</span>,
        height: <span class="hljs-number">30</span>,
        top: pos * <span class="hljs-number">0</span>, <span class="hljs-comment">// space the buttons at 105</span>
        left: <span class="hljs-number">2</span>,
        borderRadius:<span class="hljs-number">0</span>,
        backgroundImage: <span class="hljs-string">'images/transparent.png'</span>,
        borderColor: <span class="hljs-string">'transparent'</span>,
        borderWidth: <span class="hljs-string">'0'</span>,
        font:{fontFamily:<span class="hljs-string">'Arial'</span>,fontWeight:<span class="hljs-string">'normal'</span>,fontSize:<span class="hljs-number">11</span>,fontAlign:<span class="hljs-string">'left'</span>},
        color: <span class="hljs-string">"#1c1e3b"</span>,
        MyID: resultArray[pos].attachmentName,
         MyLink: resultArray[pos].attachmentImage,
    });

    btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ 

   <span class="hljs-keyword">var</span> newWindow = Ti.Platform.openURL( +e.source.MyLink );


});

    brandView.add(btn);

    };

};
</code></pre><p>Please any ideas</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 26th 2013, 5:41:49 pm">January 26th 2013</span>
				by <span class='authorname'>Darin Densley</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>array</span></li>
					
						<li><span class='tagname'>loop</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Did the answers I provided in your questions earlier today not solve your problem? </p>
<ul>
<li><a href="https:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;147382&#x2F;dynamically-generated-buttons-pass-variable-to-new-window-with-json">Dynamically generated buttons pass variable to new window with JSON</a></li>
<li><a href="https:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;147426&#x2F;how-to-filter-or-search-an-array">How to filter or search an array</a></li>
</ul>
<p>A guy could take it badly when someone does not try the answers given to them previously or even add a comment say what if anything happened.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 26th 2013, 6:55:01 pm">January 26th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-255443">
				
						<section>
							<p>Hi</p>
<p>Even if this has nothing to do with the problem right now - never do this;</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> sendit</span> = Ti.Network.createHTTPClient();
    sendit.<span class="hljs-keyword">open</span>('GET', 'http:<span class="hljs-comment">//localhost/attachments.php');</span>
    sendit.send();
...
</code></pre><p>Change it to this;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> sendit = Ti.Network.createHTTPClient();
...
    sendit.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
        ...
    };
    sendit.error = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
        ...
    };
...
    sendit.open(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'http://localhost/attachments.php'</span>);
    sendit.send();
...
</code></pre><p>Because they open and send should always be done after the event have been defined.</p>
<p>Your actual problem may be done to this section - on the basis you have provided all related code;</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (dataArray[<span class="hljs-keyword">pos</span>].StateName == MyID) {
    resultArray.<span class="hljs-keyword">push</span>(dataArray[<span class="hljs-keyword">pos</span>]);
}
</code></pre><p>You have not defined <strong>MyID</strong> anywhere so the comparison is comparing agains <strong>undefined</strong> which none of them are.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 26th 2013, 6:58:43 pm">January 26th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/147446/getting-data-from-one-array-to-the-another-array#answer-255443" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I passed it further up in the page like this</p>
<pre><code class="hljs">
<span class="hljs-variable"><span class="hljs-keyword">var</span> MyID</span> = currentWin.MyID;
</code></pre><p>This is coming from another window and it is working as I use it in other places n the page and it shows up when I debug</p>
<p>I changed the other code but it did not fix the problem I still get nothing in the resultsArray</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 7:11:50 pm">January 26th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just so you know the code I gave you in the other two answers did create the array as requested and allowed you to manage the children of the states.  Shame it was discarded as it took a while to create and test including recreating your json array.</p>
<p>The idea is to add comments to the original question and not start new ones, I know you know that because I have told you on the second question about the duplicate - this is the third question.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 7:20:30 pm">January 26th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I am not sure why you are doing this;</p>
<pre><code class="hljs">for<span class="hljs-comment">( i=0; i &lt; json.length; i++)</span> {
    dataArray.push<span class="hljs-comment">(json[i])</span>;
};
</code></pre><p>Especially as you are simply swapping the json array directly into another array which is the same except for the name.  It is also the least efficient way to duplicate an array.</p>
<p>You also seem to be attempting to create your filtered array but then setting the button on every loop even if it was not filtered.</p>
<p>Change this;</p>
<pre><code class="hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">pos</span>=<span class="hljs-number">0</span>; <span class="hljs-keyword">pos</span> &lt; dataArray.<span class="hljs-keyword">length</span>; <span class="hljs-keyword">pos</span>++) {
    <span class="hljs-keyword">if</span> (dataArray[<span class="hljs-keyword">pos</span>].StateName == MyID) {
        resultArray.<span class="hljs-keyword">push</span>(dataArray[<span class="hljs-keyword">pos</span>]);
    }
    // set the array to the tableView
    var btn = Ti.UI.createButton({
        title: resultArray[<span class="hljs-keyword">pos</span>].attachmentName ,
        width: <span class="hljs-number">190</span>,
        height: <span class="hljs-number">30</span>,
        top: <span class="hljs-keyword">pos</span> * <span class="hljs-number">0</span>, <span class="hljs-regexp">//</span> space the buttons at <span class="hljs-number">105</span>
        left: <span class="hljs-number">2</span>,
        borderRadius:<span class="hljs-number">0</span>,
        backgroundImage: <span class="hljs-string">'images/transparent.png'</span>,
        borderColor: <span class="hljs-string">'transparent'</span>,
        borderWidth: <span class="hljs-string">'0'</span>,
        font:{fontFamily:<span class="hljs-string">'Arial'</span>,fontWeight:<span class="hljs-string">'normal'</span>,fontSize:<span class="hljs-number">11</span>,fontAlign:<span class="hljs-string">'left'</span>},
        color: <span class="hljs-string">"#1c1e3b"</span>,
        MyID: resultArray[<span class="hljs-keyword">pos</span>].attachmentName,
        MyLink: resultArray[<span class="hljs-keyword">pos</span>].attachmentImage,
    });
    btn.addEventListener(<span class="hljs-string">'click'</span>, function(e) { 
        var newWindow = Ti.Platform.openURL( +e.source.MyLink ); 
    });
    brandView.add(btn); 
}
</code></pre><p>To this instead;</p>
<pre><code class="hljs"><span class="hljs-comment">// check this debug test has a real value that you expect</span>
Ti.API.info(<span class="hljs-string">'MyID:'</span> + MyID);
<span class="hljs-keyword">for</span> (pos=<span class="hljs-number">0</span>; pos &lt; dataArray.length; pos++) {
    <span class="hljs-keyword">if</span> (dataArray[pos].StateName == MyID) {
        resultArray.push(dataArray[pos]);
        <span class="hljs-comment">// set the array to the tableView</span>
        <span class="hljs-keyword">var</span> btn = Ti.UI.createButton({
            title: resultArray[pos].attachmentName ,
            width: <span class="hljs-number">190</span>,
            height: <span class="hljs-number">30</span>,
            top: pos * <span class="hljs-number">0</span>, <span class="hljs-comment">// space the buttons at 105</span>
            left: <span class="hljs-number">2</span>,
            borderRadius:<span class="hljs-number">0</span>,
            backgroundImage: <span class="hljs-string">'images/transparent.png'</span>,
            borderColor: <span class="hljs-string">'transparent'</span>,
            borderWidth: <span class="hljs-string">'0'</span>,
            font:{fontFamily:<span class="hljs-string">'Arial'</span>,fontWeight:<span class="hljs-string">'normal'</span>,fontSize:<span class="hljs-number">11</span>,fontAlign:<span class="hljs-string">'left'</span>},
            color: <span class="hljs-string">"#1c1e3b"</span>,
            MyID: resultArray[pos].attachmentName,
            MyLink: resultArray[pos].attachmentImage,
        });
        btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{ 
            <span class="hljs-keyword">var</span> newWindow = Ti.Platform.openURL( +e.source.MyLink ); 
        });

        brandView.add(btn);
    } 
}
</code></pre><p>This will ONLY add the button IF the states match.  If this does not fix it then you need to check the debug line to make sure the <strong>MyID</strong> variable does actually have a value when you get to the loop</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 7:28:55 pm">January 26th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This works but only returns one result.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 8:40:04 pm">January 26th 2013</span>
											by <span class='authorname'>Darin Densley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It only gets one result as you are filtering the results to say ONLY include this IF it matches; if there is only one match you only get one result.</p>
<pre><code class="hljs"><span class="hljs-comment">// this filters the results down</span>
<span class="hljs-tag">if</span> (dataArray[pos].StateName == MyID) {
   ...
}
</code></pre><p>If you try with California you should get several results.</p>
<p>If you need to get ALL the unique entries and pass the duplicates on each button press (for example the several for California) then you need to use the code I gave you in the other two questions answers.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2013, 8:45:05 pm">January 26th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Why should you do the onload and onerror before the send?  Since its already defined as an (object?), it shouldnt matter.  I always do my onload&#x2F;error afterwards, and never have a problem.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 27th 2013, 2:18:00 pm">January 27th 2013</span>
											by <span class='authorname'>Josh Lewis</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@ Josh, assuming this one was meant for me.</p>
<p>The reason you define the handlers before the send and open, is that if you define them afterwards the method may not have put the handlers into memory before they are needed - so they fail.</p>
<p>Another reason is the documentation tells you to do this;</p>
<ul>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.Network.HTTPClient-property-onerror">onerror</a></li>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.Network.HTTPClient-property-ondatastream">ondatastream</a></li>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.Network.HTTPClient-property-onload">onload</a></li>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.Network.HTTPClient-property-onreadystatechange">onreadystatechange</a></li>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.Network.HTTPClient-property-onsendstream">onsendstream</a></li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="January 27th 2013, 2:28:24 pm">January 27th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255445">
				
						<section>
							<p>You are repeating yourself. This question is also yours and is very similar: http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;147426&#x2F;how-to-filter-or-search-an-array</p>
<p>What did you try? Did you try at least?</p>
<p>Googling a little for &quot;javascript array filter&quot; should lead you to this page (the 1st result)  https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;JavaScript&#x2F;Reference&#x2F;Global_Objects&#x2F;Array&#x2F;filter</p>
<p>You posted some spagetti code that tells nothing about the structure of the data you are getting from the webservice, but assuming is an array (based on this part of the code <strong>for( i=0; i &lt; json.length; i++){dataArray.push(json[i]);</strong>) I will assume is an array of objects.</p>
<p>So you can simply use the filter method of the array to avoid all the for loops you have there (you have too many anyway).</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> resultArray = json.filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> </span>{ <span class="hljs-keyword">return</span> item.StateName == MyID });
</code></pre><p>So now resultArray will contain only what you need.</p>
<p>Is this what you are looking for?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 26th 2013, 7:08:48 pm">January 26th 2013</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/147446/getting-data-from-one-array-to-the-another-array#answer-255445" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
