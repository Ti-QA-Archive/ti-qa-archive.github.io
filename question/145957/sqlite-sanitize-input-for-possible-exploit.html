<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>SQLite Sanitize input for possible exploit? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>SQLite Sanitize input for possible exploit?</h1>
		</header>
		<section>
			<p>Hi,<br>I was making an app which using SQLite for storing information from text fields and i want to ask if it is possible someone evil user to put &quot;evil text&quot; in these text fields in order to exploit the phone&#39;s database or possibly the app itself?<br>Is there any sanitize technique to ensure that the application is robust against all forms of input data?<br>Thanks in advance.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 19th 2012, 4:34:31 pm">December 19th 2012</span>
				by <span class='authorname'>Marcelino Jorge Romero</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>exploit</span></li>
					
						<li><span class='tagname'>sanitize</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
						<li><span class='tagname'>text</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-253197">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>I always use the execute statement optional parameters to pass in the variables, the syntax is simple, in fact much easier than using raw strings.</p>
<pre><code class="hljs">var rs = db.execute('<span class="hljs-operator"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> test1 <span class="hljs-keyword">where</span> <span class="hljs-keyword">status</span> = ? <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> otherfield;</span>', bytStatus);
 or
var rs = db.execute('<span class="hljs-operator"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> test1 <span class="hljs-keyword">where</span> <span class="hljs-keyword">status</span> = ? <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> otherfield;</span>', 7);
 or
db.execute('<span class="hljs-operator"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> test1 (firstname, lastname) <span class="hljs-keyword">values</span> (?, ?);</span>', strFN, strLtN);
 or
db.execute('<span class="hljs-operator"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> test1 (firstname, lastname) <span class="hljs-keyword">values</span> (?, ?);</span>', 'John', 'Doe');
</code></pre><p>This places the handling of the data to the OS&#x2F;SQLite rather than a simple string.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 20th 2012, 6:40:13 pm">December 20th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/145957/sqlite-sanitize-input-for-possible-exploit.html#answer-253197" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>There is no substitute for cleaning inputs BEFORE placing them into any database or in fact any function in your app, this can go beyond the string escapes as that simply takes what is given and makes sure it will encode.</p>
<p>Ideally you should restrict your users input as they supply it, if that is not possible then remove anything that should not be there once provided.</p>
<p>The technique above will stop malicious injections but it is only ONE step in the process.</p>
<p>So follow these simple rules</p>
<ul>
<li>stop invalid data being provided as it is provided</li>
<li>filter anything provided that you were not able to stop</li>
<li>use the technique above</li>
</ul>
<p>Also good tips</p>
<ul>
<li>if you are expecting numbers make sure you only receive numbers</li>
<li>if you are expecting upper, lower, numbers and simple punctuation then stop&#x2F;remove anything else</li>
<li>regular expressions are your friend (but sometimes it is a complicated relationship)</li>
</ul>
<p>Quick example reg cleans;</p>
<pre><code class="hljs"><span class="hljs-comment">// removes all non upper/lower/numbers and hyphens</span>
strFirstName = strFirstName.replace(<span class="hljs-regexp">/[^A-Za-z0-9-]/gim</span>, <span class="hljs-string">''</span>); 
<span class="hljs-comment">// only 0 to 9</span>
strPhone = strPhone.replace(<span class="hljs-regexp">/[^0-9]/gim</span>, <span class="hljs-string">''</span>);
</code></pre><p>Happy sanitizing.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 22nd 2012, 9:23:50 pm">December 22nd 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Did this answer your question?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2012, 7:16:14 pm">December 24th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes thank you,</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2012, 9:12:00 pm">December 24th 2012</span>
											by <span class='authorname'>Marcelino Jorge Romero</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-253148">
				
						<section>
							<p>I think that you just need to escape single quotes: <a href="http:&#x2F;&#x2F;www.sqlite.org&#x2F;faq.html#q14">http:&#x2F;&#x2F;www.sqlite.org&#x2F;faq.html#q14</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 20th 2012, 8:11:10 am">December 20th 2012</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="question/145957/sqlite-sanitize-input-for-possible-exploit.html#answer-253148" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-253264">
				
						<section>
							<p>I was thinking a way like <code>mysql_real_escape_string()</code> function of php, or it&#39;s not necessary?<br>The way you described above is safe?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 21st 2012, 9:37:57 pm">December 21st 2012</span>
								by <span class='authorname'>Marcelino Jorge Romero</span><br>
								<a class="icon-bg icon-link" href="question/145957/sqlite-sanitize-input-for-possible-exploit.html#answer-253264" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
