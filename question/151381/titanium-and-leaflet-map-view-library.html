<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium and Leaflet (Map View Library) » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium and Leaflet (Map View Library)</h1>
		</header>
		<section>
			<p>Hey,<br>i am completely new to Titanium and as a first try, I added the super simple example (relevant source of this page) to a webview control. The map is shown, scollable and zoomable, but even on modern devices (as a Smasung S3) it is rendered really slow, mutch slower than the webpage. Did somebody face performance problems with webview and JS Libs? Is there a better Way to do this?</p>
<p>during zooming I get following messages in the console output: </p>
<pre><code class="hljs">...
I/Choreographer( <span class="hljs-number">8580</span>): Skipped <span class="hljs-number">38</span> frames!  The <span class="hljs-type">application</span> may be doing too much work <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword">its</span> main thread.
I/Choreographer( <span class="hljs-number">8580</span>): Skipped <span class="hljs-number">52</span> frames!  The <span class="hljs-type">application</span> may be doing too much work <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword">its</span> main thread.
...
</code></pre><p>Webview:</p>
<pre><code class="hljs"><span class="xml"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width, initial-scale=1.0, user-scalable=0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"apple-mobile-web-app-capable"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"yes"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"mapstyle.css"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/css"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"style.css"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/css"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"OpenLayers.js.lib"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"apple-mobile-web-app-capable"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"yes"</span>&gt;</span>    

    <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">body</span> <span class="hljs-attribute">onload</span>=<span class="hljs-value">"initMap();"</span>&gt;</span>blubb  
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"map"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span> blubb
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="actionscript">
        <span class="hljs-keyword">var</span> map = L.map(<span class="hljs-string">'map'</span>);

        L.tileLayer(<span class="hljs-string">'http://</span></span></span><span class="hljs-expression">{<span class="hljs-variable">s</span>}</span><span class="xml"><span class="undefined">.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/</span></span><span class="hljs-expression">{<span class="hljs-variable">z</span>}</span><span class="xml"><span class="undefined">/</span></span><span class="hljs-expression">{<span class="hljs-variable">x</span>}</span><span class="xml"><span class="undefined">/</span></span><span class="hljs-expression">{<span class="hljs-variable">y</span>}</span><span class="xml"><span class="undefined">.png', </span></span><span class="hljs-expression">{
            <span class="hljs-variable">maxZoom</span>: 18,
            <span class="hljs-variable">attribution</span>: '<span class="hljs-variable">Map</span> <span class="hljs-variable">data</span> &amp;<span class="hljs-variable">copy</span>; &lt;<span class="hljs-variable">a</span> <span class="hljs-variable">href</span>=<span class="hljs-string">"http://openstreetmap.org"</span>&gt;<span class="hljs-variable">OpenStreetMap</span>&lt;<span class="hljs-end-block">/a</span>&gt; <span class="hljs-variable">contributors</span>, &lt;<span class="hljs-variable">a</span> <span class="hljs-variable">href</span>=<span class="hljs-string">"http://creativecommons.org/licenses/by-sa/2.0/"</span>&gt;<span class="hljs-variable">CC-BY-SA</span>&lt;<span class="hljs-end-block">/a</span>&gt;, <span class="hljs-variable">Imagery</span> Â© &lt;<span class="hljs-variable">a</span> <span class="hljs-variable">href</span>=<span class="hljs-string">"http://cloudmade.com"</span>&gt;<span class="hljs-variable">CloudMade</span>&lt;<span class="hljs-end-block">/a</span>&gt;'
        }</span><span class="xml"><span class="actionscript">).addTo(map);

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onLocationFound</span><span class="hljs-params">(e)</span> </span></span></span><span class="hljs-expression">{
            <span class="hljs-variable">var</span> <span class="hljs-variable">radius</span> = <span class="hljs-variable">e.accuracy</span> <span class="hljs-end-block">/ </span>2;

            <span class="hljs-variable">L.marker</span>(<span class="hljs-variable">e.latlng</span>)<span class="hljs-variable">.addTo</span>(<span class="hljs-variable">map</span>)
                <span class="hljs-variable">.bindPopup</span>(<span class="hljs-string">"You are within "</span> + <span class="hljs-variable">radius</span> + <span class="hljs-string">" meters from this point"</span>)<span class="hljs-variable">.openPopup</span>();

            <span class="hljs-variable">L.circle</span>(<span class="hljs-variable">e.latlng</span>, <span class="hljs-variable">radius</span>)<span class="hljs-variable">.addTo</span>(<span class="hljs-variable">map</span>);
        }</span><span class="xml"><span class="actionscript">

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onLocationError</span><span class="hljs-params">(e)</span> </span></span></span><span class="hljs-expression">{
            <span class="hljs-variable">alert</span>(<span class="hljs-variable">e.message</span>);
        }</span><span class="xml"><span class="actionscript">

        map.on(<span class="hljs-string">'locationfound'</span>, onLocationFound);
        map.on(<span class="hljs-string">'locationerror'</span>, onLocationError);

        map.locate(</span></span><span class="hljs-expression">{<span class="hljs-variable">setView</span>: <span class="hljs-variable">true</span>, <span class="hljs-variable">maxZoom</span>: 16}</span><span class="xml"><span class="undefined">);
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></span>
</code></pre><p>Thanks in Advance</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 22nd 2013, 5:00:50 pm">April 22nd 2013</span>
				by <span class='authorname'>Johannes B</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>javascript</span></li>
					
						<li><span class='tagname'>leadlet</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-261345">
				
						<section>
							<p>Hello Johannes,</p>
<p>The WebView is unfortunately the most expensive component (top consumer of resources) for a given app. Besides you will have to use Global Event Listeners to pass parameters so you can call Titanium code.</p>
<p>You may consider on either platform because allows you to directly interact and communicate maps events back to your app easier and because several features were merged into current Titanium SDK release and several more are coming soon.</p>
<p>From various test I did a while ago on iOS, markers can slow down the map because the fact Leaflet depends on third party libs or even plugins dragging the app to a poor performance. </p>
<p>Hope it helps to get started quicker, thanks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 22nd 2013, 6:37:13 pm">April 22nd 2013</span>
								by <span class='authorname'>Eduardo Gomez</span><br>
								<a class="icon-bg icon-link" href="question/151381/titanium-and-leaflet-map-view-library.html#answer-261345" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for your response, did you mean to consider switching to the native maps? As much as I&#39;d like to do that it is not possible becuase we&#39;ve to show up custom map materials.</p>
<p>Did you get any experience with openlayers, another JS lib to show maps?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 23rd 2013, 3:19:42 am">April 23rd 2013</span>
											by <span class='authorname'>Johannes B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Nope, haven&#39;t tried out other than Leaflet. From requirements stand point, I only had to zoom, put some markers and find out current location that&#39;s why went native (such a pretty hard decision, uh). I&#39;d consider <a href="https:&#x2F;&#x2F;github.com&#x2F;mapocosm&#x2F;Map-Explorer-Open">Map explorer</a> though.</p>
<p>You may want to explore open source alternatives to native Maps where you can call iOS SDK and create your own module. It would allow you to work <em>under the bridge</em> thus improve memory management and overall performance. I&#39;m not familiar on this matters so <a href="http:&#x2F;&#x2F;mapbox.com&#x2F;blog&#x2F;mapbox-streets-ios-screencast&#x2F;">MapBox</a> can be a good start.</p>
<p>Hope it helps. Best.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 23rd 2013, 1:16:54 pm">April 23rd 2013</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-275479">
				
						<section>
							<p>Hi Johannes B,<br>Is the pinch zoom gesture working in your example code?<br>In which platform are you testing your code… Android, IOs?</p>
<p>I am getting trouble which pinch zoom in some Android devices…<br>Thanks in advance</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 20th 2014, 8:06:59 am">February 20th 2014</span>
								by <span class='authorname'>i escamochero</span><br>
								<a class="icon-bg icon-link" href="question/151381/titanium-and-leaflet-map-view-library.html#answer-275479" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
