<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>JNI Error, table overflow Max 512 - org.appcelerator.titanium.proxy.RProxy » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>JNI Error, table overflow Max 512 - org.appcelerator.titanium.proxy.RProxy</h1>
		</header>
		<section>
			<p>Hey Folks,</p>
<p>I&#39;m developing an app that contains various windows such as news, on-demand, tv guide etcetera.</p>
<p>When opening the news page you have a list view with sections for each news category, containing each 1 highlighted item and 3 other items. </p>
<p>When you click on an item it opens a scrollable view, containing the items including others up to a max of 15 views in the scrollable view.</p>
<p>When opening and closing this scrollable view like five times, I get the following error.</p>
<pre><code class="hljs">[ERROR] :  dalvikvm: JNI ERROR (app bug): local reference <span class="hljs-tag">table</span> <span class="hljs-attribute">overflow</span> (max=<span class="hljs-number">512</span>)
[WARN] :   dalvikvm: JNI local reference <span class="hljs-tag">table</span> (<span class="hljs-number">0</span>xb91b7ee0) dump:
[WARN] :   dalvikvm:   Last <span class="hljs-number">10</span> entries (of <span class="hljs-number">512</span>):
[WARN] :   dalvikvm:       <span class="hljs-number">511</span>: <span class="hljs-number">0</span>xa4e83368 java<span class="hljs-class">.lang</span><span class="hljs-class">.String</span> <span class="hljs-string">"enabled"</span>
[WARN] :   dalvikvm:       <span class="hljs-number">510</span>: <span class="hljs-number">0</span>xa840f910 org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.kroll</span><span class="hljs-class">.runtime</span><span class="hljs-class">.v8</span><span class="hljs-class">.V8Object</span>
[WARN] :   dalvikvm:       <span class="hljs-number">509</span>: <span class="hljs-number">0</span>xa840f910 org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.kroll</span><span class="hljs-class">.runtime</span><span class="hljs-class">.v8</span><span class="hljs-class">.V8Object</span>
[WARN] :   dalvikvm:       <span class="hljs-number">508</span>: <span class="hljs-number">0</span>xa83f7490 java<span class="hljs-class">.lang</span><span class="hljs-class">.Object</span>[] (<span class="hljs-number">1</span> elements)
[WARN] :   dalvikvm:       <span class="hljs-number">507</span>: <span class="hljs-number">0</span>xa674ce78 org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.proxy</span><span class="hljs-class">.RProxy</span>
[WARN] :   dalvikvm:       <span class="hljs-number">506</span>: <span class="hljs-number">0</span>xa83f7418 java<span class="hljs-class">.lang</span><span class="hljs-class">.String</span> <span class="hljs-string">"app://alloy/cont..."</span> (<span class="hljs-number">36</span> chars)
[WARN] :   dalvikvm:       <span class="hljs-number">505</span>: <span class="hljs-number">0</span>xa674ce78 org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.proxy</span><span class="hljs-class">.RProxy</span>
[WARN] :   dalvikvm:       <span class="hljs-number">504</span>: <span class="hljs-number">0</span>xa674caf8 org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.proxy</span><span class="hljs-class">.RProxy</span>
[WARN] :   dalvikvm:       <span class="hljs-number">503</span>: <span class="hljs-number">0</span>xa674ce78 org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.proxy</span><span class="hljs-class">.RProxy</span>
[WARN] :   dalvikvm:       <span class="hljs-number">502</span>: <span class="hljs-number">0</span>xa674caf8 org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.proxy</span><span class="hljs-class">.RProxy</span>
[WARN] :   dalvikvm:   Summary:
[WARN] :   dalvikvm:         <span class="hljs-number">1</span> of java<span class="hljs-class">.lang</span><span class="hljs-class">.Object</span>[] (<span class="hljs-number">1</span> elements)
[WARN] :   dalvikvm:         <span class="hljs-number">3</span> of java<span class="hljs-class">.lang</span><span class="hljs-class">.String</span> (<span class="hljs-number">3</span> unique instances)
[WARN] :   dalvikvm:         <span class="hljs-number">4</span> of org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.kroll</span><span class="hljs-class">.runtime</span><span class="hljs-class">.v8</span><span class="hljs-class">.V8Object</span> (<span class="hljs-number">3</span> unique instances)
[WARN] :   dalvikvm:         <span class="hljs-number">1</span> of org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.kroll</span><span class="hljs-class">.KrollDict</span>
[WARN] :   dalvikvm:         <span class="hljs-number">1</span> of ti<span class="hljs-class">.modules</span><span class="hljs-class">.titanium</span><span class="hljs-class">.ui</span><span class="hljs-class">.widget</span><span class="hljs-class">.listview</span><span class="hljs-class">.ListSectionProxy</span>
[WARN] :   dalvikvm:       <span class="hljs-number">502</span> of org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.proxy</span><span class="hljs-class">.RProxy</span> (<span class="hljs-number">2</span> unique instances)
</code></pre><p>What I always do when closing these scrollable views, and that&#39;s what I&#39;m doing throughout the whole application, is add a custom &#39;destroy:self&#39; event to the top container of the view, like top of the tree in an alloy view.</p>
<p>For example for the scrollable view I do the following:</p>
<pre><code class="hljs"><span class="hljs-comment">// The scrollableview is $.items</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroySelf</span>(<span class="hljs-params">e</span>) </span>{
    $.items.removeEventListener(<span class="hljs-string">"destroy:self"</span>, destroySelf);
    <span class="hljs-keyword">var</span> views = $.items.getViews();
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> v <span class="hljs-keyword">in</span> views) {
        <span class="hljs-keyword">var</span> view = views[v];
        view.removeAllChildren();
        $.items.removeView(view);
    }
    $.items = views = view = v = <span class="hljs-literal">null</span>;
    $.destroy();    
};
$.items.addEventListener(<span class="hljs-string">"destroy:self"</span>, destroySelf);
</code></pre><p>This is to keep the references table low, remove views correctly, and improve performance.</p>
<p>Is there any reason why I get this error, containg 502 entries of org.appcelerator.titanium.proxy.RProxy?</p>
<p>Patrick van Vuuren</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 28th 2014, 10:47:05 am">August 28th 2014</span>
				by <span class='authorname'>Patrick van Vuuren</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>jni</span></li>
					
						<li><span class='tagname'>overflow</span></li>
					
						<li><span class='tagname'>rproxy</span></li>
					
						<li><span class='tagname'>scrollableview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-282004">
				
						<section>
							<p>In general, custom clean up functions like what you&#39;ve written are unnecessary and rarely work any better than relying on Alloy&#39;s and Titanium&#39;s built-in features. Are you actually firing your destroy:self event? Are the items contained in each view of your scrollableview being created and stored in variables elsewhere? Are you cleaning up those references. Note that your function creates additional references to all the objects, which yes it then removes, but it is unnecessarily increasing resource use as it runs.</p>
<p><code>$.destroy()</code> is used for releasing resources associated with models&#x2F;collections. So if you&#39;re not using them, it&#39;s doing nothing. If you look at the generated code for controllers that aren&#39;t using models, you&#39;ll see all it is is:</p>
<pre><code class="hljs"><span class="hljs-keyword">exports</span>.destroy = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> <span class="hljs-comment">{}</span>;</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 28th 2014, 4:00:51 pm">August 28th 2014</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="question/177323/jni-error-table-overflow-max-512---orgappceleratortitaniumproxyrproxy#answer-282004" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>The event is firing. And it actually helps, due to the logs the garbage collector is giving me in DDMS. The GC frees 1.X MB (1XXXk)~ when I close the scrollable view. </p>
<p>When I checkout the RProxy&#39;s API name, it stands for Ti.Android.R. The only time I use that is when I retrieve a drawable from the android drawable library. Each view in the scrollableview contained an image with a drawable resource as the image attribute.</p>
<p>When I commented out this specific image, the error no longer occured. Is this proxy used for retrieving the drawable resource correctly removed by the Titanium&#x2F;Alloy built-in features? As I have no knowledge of it.</p>
<p>The plan was already creating our own share icon, as I use the icon set delivered by our designer. He now delivered us an additional set with more icons to use, including the share icon.</p>
<p>Thanks for your advice.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 29th 2014, 5:06:32 am">August 29th 2014</span>
											by <span class='authorname'>Patrick van Vuuren</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>An update on this because of the article released by Appcelerator in their newsletter. It is a best practice to create your own cleanup method:<br><a href="http:&#x2F;&#x2F;www.tidev.io&#x2F;2014&#x2F;09&#x2F;18&#x2F;cleaning-up-alloy-controllers&#x2F;#comment-13605">Cleaning up Alloy Controllers</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="September 25th 2014, 1:01:34 pm">September 25th 2014</span>
											by <span class='authorname'>Patrick van Vuuren</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
