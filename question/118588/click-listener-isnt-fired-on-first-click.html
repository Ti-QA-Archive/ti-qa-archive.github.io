<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Click listener isn&#39;t fired on first click. Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Click listener isn&#39;t fired on first click.</h1>
		</header>
		<section>
			<p>I&#39;ve got a listener attached to a modal window, the window is full screen and just contains a button and an image. The listener is for a click event and when the window is opened i have to click twice before the event will fire and close the window.<br>This is all happening in the simulator, on a device it seems like the event is never firing.</p>
<p><a href="http:&#x2F;&#x2F;pastie.org&#x2F;1803919">pastie</a></p>
<p>There&#39;s the relevant code,<br>TI sdk 1.6.1 and apple sdk of 4.2</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 15th 2011, 4:43:05 pm">April 15th 2011</span>
				by <span class='authorname'>Mr triux</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>click</span></li>
					
						<li><span class='tagname'>eventlistener</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
				</ul>
			

			<section>
				<h5>6 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Mr Triux</p>
<p>I have tried to run your code, but there are parts missing.</p>
<p>If Chris&#39; answer was not the solution, and you would like a definitive answer, please provide <a href="http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Contributing+to+Titanium#ContributingtoTitanium-CreatingGoodUsecases">a usecase</a>. </p>
<p>Cheers</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 16th 2011, 10:25:50 am">April 16th 2011</span>
								by <span class='authorname'>Paul Dowsett</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>ok I made up a use case, this can inserted into app.js you&#39;ll need an images folder and 2 pngs. I removed the superfluous button as it doesn&#39;t affect the behavior at all. I checked and it still behaves in this odd manner.</p>
<p><a href="http:&#x2F;&#x2F;pastie.org&#x2F;1803919">pastie link</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="April 17th 2011, 1:09:49 pm">April 17th 2011</span>
								by <span class='authorname'>Mr triux</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I should note this test was only on the simulator, i don&#39;t have a device on hand to try with the use case.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 17th 2011, 1:27:22 pm">April 17th 2011</span>
								by <span class='authorname'>Mr triux</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Have you posted the usecase? Your code above is still not complete. For instance, <code>dealDetails</code> has not been defined.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 17th 2011, 2:00:32 pm">April 17th 2011</span>
								by <span class='authorname'>Paul Dowsett</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>pastie link in my comments i&#39;ll just edit the original question too I guess</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 18th 2011, 2:06:20 pm">April 18th 2011</span>
								by <span class='authorname'>Mr triux</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I forget i can edit questions since I can&#39;t edit comments.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 18th 2011, 2:07:41 pm">April 18th 2011</span>
								by <span class='authorname'>Mr triux</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-206434">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>The reason you are experiencing unexpected results is that <code>pictureWin</code> is not properly destroyed when closed. To resolve the issue, ensure that this window is created within the click event listener that opens it.</p>
<p>Also note that a <code>fullscreen</code> window is effectively a <code>modal</code> window, as the user cannot interact with any elements beneath it due to the fact that no events will be forwarded to them and that they are completely obscured. They will also not see the modal blur effect. Consider using one or the other, unless you have a specific reason why both are necessary.</p>
<p>This code has been tested and is working:</p>
<pre><code class="hljs">Titanium.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);

var win1 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Win 1'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});

var label1 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 1'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

var logoView = Ti.UI.createView({
    backgroundColor:<span class="hljs-string">"red"</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">100</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">100</span>,
    top: <span class="hljs-number">50</span>,
    left: <span class="hljs-number">50</span>
<span class="hljs-comment">//    image: './images/venueThumb.png'</span>
});

win1.<span class="hljs-built_in">add</span>(label1);
win1.<span class="hljs-built_in">add</span>(logoView);

win1.<span class="hljs-built_in">open</span>();

logoView.addEventListener(<span class="hljs-string">'click'</span>, function(e){
    var pictureWin = Ti.UI.createWindow({
        backgroundColor:<span class="hljs-string">"green"</span>,
<span class="hljs-comment">//        fullscreen: true,</span>
        modal: <span class="hljs-keyword">true</span>,
        orientationModes: [ Ti.UI.LANDSCAPE_LEFT, Ti.UI.LANDSCAPE_RIGHT]
    });
    var pictureView = Ti.UI.createView({
        backgroundColor:<span class="hljs-string">"blue"</span>,
        <span class="hljs-variable">height</span>:<span class="hljs-number">200</span>,
        <span class="hljs-variable">width</span>:<span class="hljs-number">200</span>
<span class="hljs-comment">//        image: './images/venueLandscape.png'</span>
    });

    pictureWin.<span class="hljs-built_in">add</span>(pictureView);
    pictureWin.<span class="hljs-built_in">open</span>();

    pictureWin.addEventListener(<span class="hljs-string">'click'</span>, function(e){
        Ti.API.info(<span class="hljs-string">'clicked'</span>);
        pictureWin.close();
    });
});
</code></pre><p>Hope this helps</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 18th 2011, 2:41:18 pm">April 18th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/118588/click-listener-isnt-fired-on-first-click.html#answer-206434" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I copied your code into my useCase and I still get the same undesired behavior, i have to click twice to get it to close. If you aren&#39;t experiencing similar problems where else should I look? I&#39;ll try running this on another machine here soon and see if it&#39;s something local to this machine.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2011, 5:12:36 pm">April 18th 2011</span>
											by <span class='authorname'>Mr triux</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I confirmed this on another machine just now. first tap doesn&#39;t trace the statement and doesn&#39;t close, second one does.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2011, 5:25:45 pm">April 18th 2011</span>
											by <span class='authorname'>Mr triux</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Anybody else want to take a stab at this?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2011, 1:55:38 pm">April 20th 2011</span>
											by <span class='authorname'>Mr triux</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Mr Truix</p>
<p>The code above will work if you paste it into a blank <code>app.js</code> file. Please confirm this is the case.</p>
<p>If it does not work when you combine it with the rest of your code or your usecase, then it implies that there is still a latent issue with your code that needs to be resolved.</p>
<p>Cheers</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2011, 3:19:35 pm">April 20th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So as I said there is definitely something else going on, because in a blank app.js your code does the same thing as mine. On two different machines.<br>And just to be sure i just not made a new project and pasted your code in and it most assuredly doesn&#39;t see the first click come to the second window, and it&#39;s not a timing issue or anything like that 1 second 10 seconds, first click nothing second click closes the window.<br>I&#39;m not sure it matters but i&#39;ll list my entire setup<br>it&#39;s a macbook pro ~ 4 years old 10.6.7 iphone sdk 4.2 and xcode 3.2.5<br>Running titanium 1.2.2 with the mobile sdk of 1.6.2</p>
<p>let me know of any other information I can provide.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2011, 5:27:28 pm">April 20th 2011</span>
											by <span class='authorname'>Mr triux</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-206367">
				
						<section>
							<p>Hi there Mr Triux,</p>
<p>Looking at the code I wonder if the last click event  function should be for pictureClose instead of pictureWin?</p>
<p>Cheers,<br>Chris.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 16th 2011, 5:36:09 am">April 16th 2011</span>
								by <span class='authorname'>Chris Reed</span><br>
								<a class="icon-bg icon-link" href="../../question/118588/click-listener-isnt-fired-on-first-click.html#answer-206367" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;ve tried it both ways, and the intent is that you could click anywhere on this full screen picture would close the view, the pictureClose is just a button to indicate the possibility of closing via click.<br>I&#39;ll make a working test and post the code to that.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 17th 2011, 12:52:36 pm">April 17th 2011</span>
											by <span class='authorname'>Mr triux</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
