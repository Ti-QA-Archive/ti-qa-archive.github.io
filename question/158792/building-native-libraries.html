<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Building native libraries Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Building native libraries</h1>
		</header>
		<section>
			<p>Titanium SDK: 3.1.3.GA<br>Platform &amp; version:  Android 4.0.3<br>Device: HTC Desire S<br>Host Operating System: Windows, Linux<br>Titanium Studio:  3.1.3.201309132423</p>
<p>Hello,</p>
<p>I&#39;m interested in implementing core logic in a cross-platform way through Titanium and output it in native libraries, separately for each platform (mainly Android and iOS). This way, I can pass the libraries to fellow developers who will develop their native apps, using my libraries. Can I build native libraries with Titanium? </p>
<p>So far, I have been trying to do this for Android. I wrote a service myservice.js, built the project, took the classes from the build&#x2F;android&#x2F;bin&#x2F;classes folder, packed them in a jar file, which I am including in another Android native project in Eclipse. I am also including the jars in mobilesdk\win32\3.1.3.GA\android and mobilesdk\win32\3.1.3.GA\android\lib. Unfortunately, I am failing to start the service and I am getting the following exception</p>
<pre><code class="hljs"><span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>): FATAL EXCEPTION: main
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>): java.lang.RuntimeException: Unable to start service net.skyscanner.helloworld.HelloService@<span class="hljs-number">40</span>d8b040 with Intent { cmp=net.skyscanner.hellonative/net.skyscanner.helloworld.HelloService (has extras) }: java.lang.NullPointerException
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:<span class="hljs-number">2738</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at android.app.ActivityThread.access$<span class="hljs-number">1900</span>(ActivityThread.java:<span class="hljs-number">139</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:<span class="hljs-number">1334</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at android.os.Handler.dispatchMessage(Handler.java:<span class="hljs-number">99</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at android.os.Looper.loop(Looper.java:<span class="hljs-number">154</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at android.app.ActivityThread.main(ActivityThread.java:<span class="hljs-number">4945</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at java.lang.reflect.Method.invokeNative(Native Method)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at java.lang.reflect.Method.invoke(Method.java:<span class="hljs-number">511</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:<span class="hljs-number">784</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:<span class="hljs-number">551</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at dalvik.system.NativeStart.main(Native Method)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>): Caused by: java.lang.NullPointerException
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at org.appcelerator.kroll.KrollProxy.getKrollObject(KrollProxy.java:<span class="hljs-number">426</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at org.appcelerator.kroll.KrollProxy.hasListeners(KrollProxy.java:<span class="hljs-number">891</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at org.appcelerator.kroll.KrollProxy.hierarchyHasListener(KrollProxy.java:<span class="hljs-number">899</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at org.appcelerator.kroll.KrollProxy.fireEvent(KrollProxy.java:<span class="hljs-number">718</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at ti.modules.titanium.android.TiJSService.start(TiJSService.java:<span class="hljs-number">96</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at ti.modules.titanium.android.TiJSService.onStartCommand(TiJSService.java:<span class="hljs-number">47</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:<span class="hljs-number">2715</span>)
<span class="hljs-number">10</span>-<span class="hljs-number">25</span> <span class="hljs-number">18</span>:<span class="hljs-number">54</span>:<span class="hljs-number">44.772</span>: E/AndroidRuntime(<span class="hljs-number">24980</span>):     ... <span class="hljs-number">10</span> more
</code></pre><p>Do you know if I am missing any jars? Is there any way to find out how Titanium Studio builds Android apps (like a build.xml, to find the jars and any options passed to the Java compiler)? I also tried to have the build&#x2F;android&#x2F; directory as an Android library project which didn&#39;t work. </p>
<p>Thank you,</p>
<p>Kostis</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 25th 2013, 4:22:42 pm">October 25th 2013</span>
				by <span class='authorname'>Kostis Dad</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>native libraries</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-270451">
				
						<section>
							<p><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Extending_Titanium_Mobile">http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Extending_Titanium_Mobile</a>  &lt;- Module building, documented and everything</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 25th 2013, 4:39:43 pm">October 25th 2013</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/158792/building-native-libraries.html#answer-270451" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the answer, but maybe I didn&#39;t make myself clear. As I mentioned above, I need to develop a library (some core logic) in a cross-platform way with Titanium, so I can distribute this library to other mobile developers, who develop apps for iOS or Android, using the respective native SDKs. I don&#39;t need to extend Titanium. My problem is that I need to package the library somehow for each platform. AFAIK, for Android, it has to be a .jar or a library project (with sources), and  for iOS, it has to be a .a  and a headers file.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 27th 2013, 8:50:27 pm">October 27th 2013</span>
											by <span class='authorname'>Kostis Dad</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Call it what you want.<br>If you want your library to be able to <strong>talk</strong> to Titanium, it has to be contained into a naive extension module. </p>
<p>There is n other way around this. Thus making Stephen&#39;s answer the right one. (even though, some additional context could have been helpful)</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 28th 2013, 9:14:54 am">October 28th 2013</span>
											by <span class='authorname'>Christian Brousseau</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for all the help, I really appreciate it. How do I build my library into something importable in Android (e.g. jar, class, source) and iOS (e.g. .a, .h)? The documentation mentions building into .zip files, which can only be used by Titanium.</p>
<p>The only part of the <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Android_Module_Development_Guide">Android documentation</a> that could be related to what I want is the &quot;Appendix: Building JavaScript Native Modules&quot; part, but even there, the module is used in Javascript, in Titanium. The modules&#x2F;libraries that I want to build will be used in Java and Objective-C, because they will be distributed to non-Titanium , native SDK developers.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 28th 2013, 11:15:08 am">October 28th 2013</span>
											by <span class='authorname'>Kostis Dad</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;m unsubscribing from this thread as you just aren&#39;t listening to what Chrisitan and I have tried to tell you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 28th 2013, 2:22:00 pm">October 28th 2013</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Titanium is for building cross platform applications, complete package.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 28th 2013, 2:26:00 pm">October 28th 2013</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK, thank you very much. I guess this is my answer.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 28th 2013, 2:28:12 pm">October 28th 2013</span>
											by <span class='authorname'>Kostis Dad</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>While Stephen may have decided to leave the thread, the fact remains that he was right from the start. I clearly see what you want to do, but this is not the way Titanium handles interaction with native code.</p>
<p>The only way for Titanium to &quot;talk&quot; to native code is through a native extension module. So if you ever want to expose functions contained a library (say, a JAR) then you will have to create a module that actually <strong>exposes</strong> these functions to the outside world.</p>
<p>Titanium is not your typical Java application framework and you have to play within its bounds if you want to use your own native code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 28th 2013, 3:40:44 pm">October 28th 2013</span>
											by <span class='authorname'>Christian Brousseau</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
