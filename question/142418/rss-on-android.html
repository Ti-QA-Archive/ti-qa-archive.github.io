<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>RSS on Android » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>RSS on Android</h1>
		</header>
		<section>
			<p>Hi!</p>
<p>I have this code and trying to get it working for android. I know that the iPhone-parts needs to be erased but not how?</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.currentWindow;


<span class="hljs-keyword">var</span> rssURL = <span class="hljs-string">'feed://megapixlar.blogg.se/index.rss'</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRSSData</span>(<span class="hljs-params"></span>)</span>{ 


    <span class="hljs-keyword">var</span> actView = Ti.UI.createView({
        width:<span class="hljs-number">200</span>,
        height:<span class="hljs-number">140</span>,
        borderRadius:<span class="hljs-number">10</span>,
        opacity:<span class="hljs-number">0.8</span>,
        backgroundColor:<span class="hljs-string">'#000'</span>
    });
    win.add(actView);

    <span class="hljs-keyword">var</span> actInd = Titanium.UI.createActivityIndicator({
        color:<span class="hljs-string">'#fff'</span>,
        height:<span class="hljs-string">'auto'</span>,
        message:<span class="hljs-string">'Laddar...'</span>,
        width:<span class="hljs-string">'auto'</span>,
        style:Titanium.UI.iPhone.ActivityIndicatorStyle.PLAIN
    });

    win.add(actInd);
    actInd.show();


    <span class="hljs-keyword">var</span> data = [];

    <span class="hljs-keyword">var</span> curr = <span class="hljs-number">0</span>;


    <span class="hljs-keyword">var</span> items = <span class="hljs-string">""</span>;


    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();

    xhr.open(<span class="hljs-string">"GET"</span>,rssURL);

    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{

        <span class="hljs-keyword">try</span>
        {

            <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
            items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
            <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;

              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++){

                <span class="hljs-keyword">var</span> item = items.item(c);

                <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
                <span class="hljs-keyword">var</span> description = item.getElementsByTagName(<span class="hljs-string">"description"</span>).item(<span class="hljs-number">0</span>).text;
                <span class="hljs-keyword">var</span> date = item.getElementsByTagName(<span class="hljs-string">"pubDate"</span>).item(<span class="hljs-number">0</span>).text;


            <span class="hljs-keyword">var</span> desc = item.getElementsByTagName(<span class="hljs-string">"description"</span>).item(<span class="hljs-number">0</span>).text;

            <span class="hljs-keyword">var</span> imgUrl = desc;


            <span class="hljs-keyword">var</span> cutPos = imgUrl.search(<span class="hljs-string">'img src="'</span>) + <span class="hljs-number">9</span>;

            imgUrl = imgUrl.substring(cutPos, imgUrl.length);


                           cutPos = imgUrl.search(<span class="hljs-string">'" alt='</span>);

                           imgUrl = imgUrl.substring(<span class="hljs-number">0</span>, cutPos);


                        Ti.API.log(<span class="hljs-string">'IMG: '</span>+imgUrl);





                <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({
                    minRowHeight:<span class="hljs-number">60</span>,
                    height:<span class="hljs-string">'auto'</span>, 
                    hasChild:<span class="hljs-literal">true</span>,
                    backgroundColor:<span class="hljs-string">'#ccc'</span>
                });

                 <span class="hljs-keyword">var</span> rowImage = Ti.UI.createImageView({
                     image:imgUrl,
                     width:<span class="hljs-number">60</span>,
                     height:<span class="hljs-string">'auto'</span>,
                     height:<span class="hljs-number">50</span>,
                     left:<span class="hljs-number">0</span>
                 });
                 row.add(rowImage);

                <span class="hljs-keyword">var</span> titleLabel = Ti.UI.createLabel({
                    color:<span class="hljs-string">'#202020'</span>,
                    shadowColor:<span class="hljs-string">'#fff'</span>,
                    shadowOffset:{x:<span class="hljs-number">0</span>,y:<span class="hljs-number">1</span>},
                    font:{fontSize:<span class="hljs-number">16</span>, fontFamily:<span class="hljs-string">'Helvetica-Bold'</span>},
                    left:<span class="hljs-number">68</span>,
                    right:<span class="hljs-number">15</span>,
                    top:<span class="hljs-number">5</span>,
                    bottom:<span class="hljs-number">20</span>,
                    height:<span class="hljs-string">'auto'</span>,
                    text:title
                });
                row.add(titleLabel);

                <span class="hljs-keyword">var</span> dateLabel = Ti.UI.createLabel({
                    color:<span class="hljs-string">'#999'</span>,
                    font:{fontSize:<span class="hljs-number">12</span>, fontFamily:<span class="hljs-string">'Helvetica'</span>},
                    left:<span class="hljs-number">68</span>,
                    bottom:<span class="hljs-number">2</span>,
                    height:<span class="hljs-number">17</span>,
                    width:<span class="hljs-number">200</span>,
                    text:date
                });
                row.add(dateLabel);
                      data[curr++] = row;
                }

                <span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({
                    data:data, 
                    width:<span class="hljs-number">320</span>,
                    separatorStyle:Ti.UI.iPhone.TableViewSeparatorStyle.SINGLE_LINE, 
                    top:<span class="hljs-number">0</span>});
                   win.add(tableview);


            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatDate</span>(<span class="hljs-params"></span>)
            </span>{
                <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>;
                <span class="hljs-keyword">var</span> datestr = date.getMonth()+<span class="hljs-string">'/'</span>+date.getDate()+<span class="hljs-string">'/'</span>+date.getFullYear();
                <span class="hljs-keyword">if</span> (date.getHours()&gt;=<span class="hljs-number">12</span>)
                {
                    datestr+=<span class="hljs-string">' '</span>+(date.getHours()==<span class="hljs-number">12</span> ? date.getHours() : date.getHours()-<span class="hljs-number">12</span>)+<span class="hljs-string">':'</span>+date.getMinutes()+<span class="hljs-string">' PM'</span>;
                }
                <span class="hljs-keyword">else</span>
                {
                    datestr+=<span class="hljs-string">' '</span>+date.getHours()+<span class="hljs-string">':'</span>+date.getMinutes()+<span class="hljs-string">' AM'</span>;
                }
                <span class="hljs-keyword">return</span> datestr;
            }


            <span class="hljs-keyword">var</span> border = Ti.UI.createView({
                backgroundColor:<span class="hljs-string">"#576c89"</span>,
                height:<span class="hljs-number">2</span>,
                bottom:<span class="hljs-number">0</span>
            });

            <span class="hljs-keyword">var</span> tableHeader = Ti.UI.createView({
                backgroundColor:<span class="hljs-string">"#000"</span>,
                width:<span class="hljs-number">320</span>,
                height:<span class="hljs-number">60</span>
            });

            tableHeader.add(border);

            <span class="hljs-keyword">var</span> arrow = Ti.UI.createView({
                backgroundImage:<span class="hljs-string">"images/whiteArrow.png"</span>,
                width:<span class="hljs-number">23</span>,
                height:<span class="hljs-number">60</span>,
                bottom:<span class="hljs-number">10</span>,
                left:<span class="hljs-number">20</span>
            });

            <span class="hljs-keyword">var</span> statusLabel = Ti.UI.createLabel({
                text:<span class="hljs-string">"Pull to reload"</span>,
                left:<span class="hljs-number">55</span>,
                width:<span class="hljs-number">200</span>,
                bottom:<span class="hljs-number">30</span>,
                height:<span class="hljs-string">"auto"</span>,
                color:<span class="hljs-string">"#fff"</span>,
                textAlign:<span class="hljs-string">"center"</span>,
                font:{fontSize:<span class="hljs-number">13</span>,fontWeight:<span class="hljs-string">"bold"</span>},
                shadowColor:<span class="hljs-string">"#999"</span>,
                shadowOffset:{x:<span class="hljs-number">0</span>,y:<span class="hljs-number">1</span>}
            });

            <span class="hljs-keyword">var</span> lastUpdatedLabel = Ti.UI.createLabel({
                text:<span class="hljs-string">"Last Updated: "</span>+formatDate(),
                left:<span class="hljs-number">55</span>,
                width:<span class="hljs-number">200</span>,
                bottom:<span class="hljs-number">15</span>,
                height:<span class="hljs-string">"auto"</span>,
                color:<span class="hljs-string">"#999"</span>,
                textAlign:<span class="hljs-string">"center"</span>,
                font:{fontSize:<span class="hljs-number">12</span>}

            });

            <span class="hljs-keyword">var</span> activityInd = Titanium.UI.createActivityIndicator({
                left:<span class="hljs-number">20</span>,
                bottom:<span class="hljs-number">13</span>,
                width:<span class="hljs-number">30</span>,
                height:<span class="hljs-number">30</span>
            });

            tableHeader.add(arrow);
            tableHeader.add(statusLabel);
            tableHeader.add(lastUpdatedLabel);
            tableHeader.add(activityInd);

            tableview.headerPullView = tableHeader;


            <span class="hljs-keyword">var</span> pulling = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> reloading = <span class="hljs-literal">false</span>;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beginReloading</span>(<span class="hljs-params"></span>)
            </span>{
                <span class="hljs-comment">// just mock out the reload</span>
                setTimeout(endReloading,<span class="hljs-number">2000</span>);
            }


            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endReloading</span>(<span class="hljs-params"></span>)
            </span>{
                <span class="hljs-comment">// simulate loading</span>
                setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                    getRSSData();
                },<span class="hljs-number">5000</span>);

                <span class="hljs-comment">// when you're done, just reset</span>
                tableview.setContentInsets({top:<span class="hljs-number">0</span>},{animated:<span class="hljs-literal">true</span>});
                reloading = <span class="hljs-literal">false</span>;
                lastUpdatedLabel.text = <span class="hljs-string">"Last Updated: "</span>+formatDate();
                statusLabel.text = <span class="hljs-string">"Pull down to refresh..."</span>;
                activityInd.hide();
                arrow.show();
            }

            tableview.addEventListener(<span class="hljs-string">'scroll'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
            </span>{
                <span class="hljs-keyword">var</span> offset = e.contentOffset.y;
                <span class="hljs-keyword">if</span> (offset &lt;= -<span class="hljs-number">65.0</span> &amp;&amp; !pulling)
                {
                    <span class="hljs-keyword">var</span> t = Ti.UI.create2DMatrix();
                    t = t.rotate(-<span class="hljs-number">180</span>);
                    pulling = <span class="hljs-literal">true</span>;
                    arrow.animate({transform:t,duration:<span class="hljs-number">180</span>});
                    statusLabel.text = <span class="hljs-string">"Release to refresh..."</span>;
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pulling &amp;&amp; offset &gt; -<span class="hljs-number">65.0</span> &amp;&amp; offset &lt; <span class="hljs-number">0</span>)
                {
                    pulling = <span class="hljs-literal">false</span>;
                     t = Ti.UI.create2DMatrix();
                    arrow.animate({transform:t,duration:<span class="hljs-number">180</span>});
                    statusLabel.text = <span class="hljs-string">"Pull down to refresh..."</span>;
                }
            });

            tableview.addEventListener(<span class="hljs-string">'scrollEnd'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
            </span>{
                <span class="hljs-keyword">if</span> (pulling &amp;&amp; !reloading &amp;&amp; e.contentOffset.y &lt;= -<span class="hljs-number">65.0</span>)
                {
                    reloading = <span class="hljs-literal">true</span>;
                    pulling = <span class="hljs-literal">false</span>;
                    arrow.hide();
                    activityInd.show();
                    statusLabel.text = <span class="hljs-string">"Reloading..."</span>;
                    tableview.setContentInsets({top:<span class="hljs-number">60</span>},{animated:<span class="hljs-literal">true</span>});
                    arrow.transform=Ti.UI.create2DMatrix();
                    beginReloading();
                }
            });


            tableview.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
            </span>{

                currentNewsItem = e.index;


                eventitem = items.item(currentNewsItem);
                eventtitle = eventitem.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
                eventdescription = eventitem.getElementsByTagName(<span class="hljs-string">"description"</span>).item(<span class="hljs-number">0</span>).text;
                eventdate = eventitem.getElementsByTagName(<span class="hljs-string">"pubDate"</span>).item(<span class="hljs-number">0</span>).text;
                eventlink = eventitem.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).text;


                eventdate = eventdate.replace(<span class="hljs-string">'+0000'</span>,<span class="hljs-string">''</span>);
                eventdate = eventdate.replace(<span class="hljs-string">'+0100'</span>,<span class="hljs-string">''</span>);
                eventdate = eventdate.replace(<span class="hljs-string">'+0200'</span>,<span class="hljs-string">''</span>);


                    <span class="hljs-keyword">var</span> subWinRSS = Ti.UI.createWindow({
                        url:<span class="hljs-string">'subWinRSS.js'</span>,
                        backgroundColor:<span class="hljs-string">'#eee'</span>,
                        barColor:<span class="hljs-string">'#000'</span>,
                        myTitle:eventtitle,
                        myDescription:eventdescription,
                        myDate:eventdate            
                    });

                    Titanium.UI.currentTab.open(subWinRSS,{animated:<span class="hljs-literal">true</span>});

                });    

        }
        <span class="hljs-keyword">catch</span>(E)
        {

            alert(<span class="hljs-string">'Saknar kontakt med servern. Vi arbetar med problemet'</span>);
        }


};

xhr.send();
}

getRSSData();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 19th 2012, 2:27:28 pm">September 19th 2012</span>
				by <span class='authorname'>Markus Renström</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>reader</span></li>
					
						<li><span class='tagname'>rss</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>The reason your code doesn&#39;t display above is because you used backticks. Backticks are for inlined code and tildes are for code blocks.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 19th 2012, 3:21:02 pm">September 19th 2012</span>
								by <span class='authorname'>Anthony Decena</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-247558">
				
						<section>
							<p><a href="http:&#x2F;&#x2F;meh.n3p.se&#x2F;moodle&#x2F;pluginfile.php&#x2F;377&#x2F;mod_resource&#x2F;content&#x2F;1&#x2F;Rss-läsare.js">Link To The Code</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 19th 2012, 2:29:26 pm">September 19th 2012</span>
								by <span class='authorname'>Markus Renström</span><br>
								<a class="icon-bg icon-link" href="question/142418/rss-on-android#answer-247558" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Your link to the code isnt working either. It asks for a login. Easy and acceptable code sharing methods are codeblocks (if the code isnt too long), or gists&#x2F;pastebins for longer multi file code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 19th 2012, 3:17:38 pm">September 19th 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>link doesnt work</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 19th 2012, 3:18:11 pm">September 19th 2012</span>
											by <span class='authorname'>Arian Caraballo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>var win = Ti.UI.currentWindow;</p>
<p>&#x2F;&#x2F;HÃ¤r sÃ¤tter man vilken adress det ska vara<br>var rssURL = &#39;feed:&#x2F;&#x2F;megapixlar.blogg.se&#x2F;index.rss&#39;;</p>
<p>function getRSSData(){ </p>
<pre><code class="hljs"><span class="hljs-comment">//Skapar en "laddarâ€¦" </span>
var actView = Ti.UI.createView({
    <span class="hljs-variable">width</span>:<span class="hljs-number">200</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">140</span>,
    borderRadius:<span class="hljs-number">10</span>,
    opacity:<span class="hljs-number">0.8</span>,
    backgroundColor:<span class="hljs-string">'#000'</span>
});
win.<span class="hljs-built_in">add</span>(actView);

var actInd = Titanium.UI.createActivityIndicator({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#fff'</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
    message:<span class="hljs-string">'Laddar...'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>,
    style:Titanium.UI.iPhone.ActivityIndicatorStyle.PLAIN
});

win.<span class="hljs-built_in">add</span>(actInd);
actInd.show();

<span class="hljs-comment">//Skapa en ny array</span>
var data = [];
<span class="hljs-comment">//HÃ¥ll koll pÃ¥ vilken rad i tableview</span>
var curr = <span class="hljs-number">0</span>;

<span class="hljs-comment">//GÃ¶r items Ã¥tkomlig utanfÃ¶r funktionen</span>
var items = <span class="hljs-string">""</span>;

<span class="hljs-comment">//Skapa en http-klient sÃ¥ att vi kan kontakta utsidan</span>
var xhr = Ti.Network.createHTTPClient();
<span class="hljs-comment">//HÃ¤mtar in det som finns pÃ¥ adressen</span>
xhr.<span class="hljs-built_in">open</span>(<span class="hljs-string">"GET"</span>,rssURL);
<span class="hljs-comment">//NÃ¤r den har laddat sker funktionen</span>
xhr.onload = function()
{

    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-comment">//HÃ¤mtar det som finns i taggen "item"</span>
        var doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
        items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
        var doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;

          <span class="hljs-comment">//Loopar genom sÃ¥ mÃ¥nga gÃ¥nger som det finns items. Byter man ut items.length mot ex 5 hÃ¤mtar den endast in 5 st.</span>
          <span class="hljs-keyword">for</span> (var c=<span class="hljs-number">0</span>;c&lt;items.length;c++){

            var item = items.item(c);
            <span class="hljs-comment">//HÃ¤mtar in allt under title, description och pubdate. OBS!!! Detta kan i vissa fall heta annat, se hur xml:en Ã¤r uppbyggd..</span>
            var title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;
            var description = item.getElementsByTagName(<span class="hljs-string">"description"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;
            var date = item.getElementsByTagName(<span class="hljs-string">"pubDate"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;

        <span class="hljs-comment">// desc lagrar description.</span>
        var desc = item.getElementsByTagName(<span class="hljs-string">"description"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;
        <span class="hljs-comment">// Kopiera desc till imgUrl sÃ¥ vi inte sabbaroriginalvariabeln    </span>
        var imgUrl = desc;

         <span class="hljs-comment">// Hitta strÃ¤ngen '&lt;img src="' och lagra positionen i cutPos</span>
        var cutPos = imgUrl.search(<span class="hljs-string">'img src="'</span>) + <span class="hljs-number">9</span>;
        <span class="hljs-comment">// Klipp imgUrl sÃ¥ allt frÃ¥n bÃ¶rjan till cutPos fÃ¶rsvinner. +10 Ã¤r sÃ¥ sjÃ¤lva '&lt;img src="' klipps med</span>
        imgUrl = imgUrl.substring(cutPos, imgUrl.length);

                       <span class="hljs-comment">// Hitta var img-taggen slutar</span>
                       cutPos = imgUrl.search(<span class="hljs-string">'" alt='</span>);
                       <span class="hljs-comment">// Plocka ut substring frÃ¥n bÃ¶rjan till slut av img-tagg.</span>
                       imgUrl = imgUrl.substring(<span class="hljs-number">0</span>, cutPos);

                       <span class="hljs-comment">// imgUrl inneÃ¥ller nu bara url till fÃ¶rsta bilden</span>
                    Ti.API.<span class="hljs-built_in">log</span>(<span class="hljs-string">'IMG: '</span>+imgUrl);




            <span class="hljs-comment">//Skapa raden och stoppa in bild, title och datum</span>


            var row = Ti.UI.createTableViewRow({
                minRowHeight:<span class="hljs-number">60</span>,
                <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>, 
                hasChild:<span class="hljs-keyword">true</span>,
                backgroundColor:<span class="hljs-string">'#ccc'</span>
            });

             var rowImage = Ti.UI.createImageView({
                 <span class="hljs-built_in">image</span>:imgUrl,
                 <span class="hljs-variable">width</span>:<span class="hljs-number">60</span>,
             <span class="hljs-comment">//    height:'auto',</span>
                 <span class="hljs-variable">height</span>:<span class="hljs-number">50</span>,
                 left:<span class="hljs-number">0</span>
             });
             row.<span class="hljs-built_in">add</span>(rowImage);

            var titleLabel = Ti.UI.createLabel({
                <span class="hljs-built_in">color</span>:<span class="hljs-string">'#202020'</span>,
                shadowColor:<span class="hljs-string">'#fff'</span>,
                shadowOffset:{x:<span class="hljs-number">0</span>,y:<span class="hljs-number">1</span>},
                font:{fontSize:<span class="hljs-number">16</span>, fontFamily:<span class="hljs-string">'Helvetica-Bold'</span>},
                left:<span class="hljs-number">68</span>,
                right:<span class="hljs-number">15</span>,
                top:<span class="hljs-number">5</span>,
                bottom:<span class="hljs-number">20</span>,
                <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
                <span class="hljs-built_in">text</span>:title
            });
            row.<span class="hljs-built_in">add</span>(titleLabel);

            var dateLabel = Ti.UI.createLabel({
                <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
                font:{fontSize:<span class="hljs-number">12</span>, fontFamily:<span class="hljs-string">'Helvetica'</span>},
                left:<span class="hljs-number">68</span>,
                bottom:<span class="hljs-number">2</span>,
                <span class="hljs-variable">height</span>:<span class="hljs-number">17</span>,
                <span class="hljs-variable">width</span>:<span class="hljs-number">200</span>,
                <span class="hljs-built_in">text</span>:date
            });
            row.<span class="hljs-built_in">add</span>(dateLabel);
                  data[curr++] = row;
            }

            var tableview = Titanium.UI.createTableView({
                data:data, 
                <span class="hljs-variable">width</span>:<span class="hljs-number">320</span>,
                separatorStyle:Ti.UI.iPhone.TableViewSeparatorStyle.SINGLE_LINE, 
                top:<span class="hljs-number">0</span>});
               win.<span class="hljs-built_in">add</span>(tableview);


    <span class="hljs-comment">/////////////////////////////////////////////////////////////////////////////////////////</span>
    <span class="hljs-comment">//Pull to refresh, detta gÃ¥r jag inte genom, ni behÃ¶ver inte Ã¤ndra nÃ¥got alls i detta..//</span>
    <span class="hljs-comment">/////////////////////////////////////////////////////////////////////////////////////////</span>

        function formatDate()
        {
            var date = <span class="hljs-keyword">new</span> Date;
            var datestr = date.getMonth()+<span class="hljs-string">'/'</span>+date.getDate()+<span class="hljs-string">'/'</span>+date.getFullYear();
            <span class="hljs-keyword">if</span> (date.getHours()&gt;=<span class="hljs-number">12</span>)
            {
                datestr+=<span class="hljs-string">' '</span>+(date.getHours()==<span class="hljs-number">12</span> ? date.getHours() : date.getHours()-<span class="hljs-number">12</span>)+<span class="hljs-string">':'</span>+date.getMinutes()+<span class="hljs-string">' PM'</span>;
            }
            <span class="hljs-keyword">else</span>
            {
                datestr+=<span class="hljs-string">' '</span>+date.getHours()+<span class="hljs-string">':'</span>+date.getMinutes()+<span class="hljs-string">' AM'</span>;
            }
            <span class="hljs-keyword">return</span> datestr;
        }


        var border = Ti.UI.createView({
            backgroundColor:<span class="hljs-string">"#576c89"</span>,
            <span class="hljs-variable">height</span>:<span class="hljs-number">2</span>,
            bottom:<span class="hljs-number">0</span>
        });

        var tableHeader = Ti.UI.createView({
            backgroundColor:<span class="hljs-string">"#000"</span>,
            <span class="hljs-variable">width</span>:<span class="hljs-number">320</span>,
            <span class="hljs-variable">height</span>:<span class="hljs-number">60</span>
        });

        <span class="hljs-comment">// fake it til ya make it..  create a 2 pixel</span>
        <span class="hljs-comment">// bottom border</span>
        tableHeader.<span class="hljs-built_in">add</span>(border);

        var arrow = Ti.UI.createView({
            backgroundImage:<span class="hljs-string">"images/whiteArrow.png"</span>,
            <span class="hljs-variable">width</span>:<span class="hljs-number">23</span>,
            <span class="hljs-variable">height</span>:<span class="hljs-number">60</span>,
            bottom:<span class="hljs-number">10</span>,
            left:<span class="hljs-number">20</span>
        });

        var statusLabel = Ti.UI.createLabel({
            <span class="hljs-built_in">text</span>:<span class="hljs-string">"Pull to reload"</span>,
            left:<span class="hljs-number">55</span>,
            <span class="hljs-variable">width</span>:<span class="hljs-number">200</span>,
            bottom:<span class="hljs-number">30</span>,
            <span class="hljs-variable">height</span>:<span class="hljs-string">"auto"</span>,
            <span class="hljs-built_in">color</span>:<span class="hljs-string">"#fff"</span>,
            <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">"center"</span>,
            font:{fontSize:<span class="hljs-number">13</span>,fontWeight:<span class="hljs-string">"bold"</span>},
            shadowColor:<span class="hljs-string">"#999"</span>,
            shadowOffset:{x:<span class="hljs-number">0</span>,y:<span class="hljs-number">1</span>}
        });

        var lastUpdatedLabel = Ti.UI.createLabel({
            <span class="hljs-built_in">text</span>:<span class="hljs-string">"Last Updated: "</span>+formatDate(),
            left:<span class="hljs-number">55</span>,
            <span class="hljs-variable">width</span>:<span class="hljs-number">200</span>,
            bottom:<span class="hljs-number">15</span>,
            <span class="hljs-variable">height</span>:<span class="hljs-string">"auto"</span>,
            <span class="hljs-built_in">color</span>:<span class="hljs-string">"#999"</span>,
            <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">"center"</span>,
            font:{fontSize:<span class="hljs-number">12</span>}

        });

        var activityInd = Titanium.UI.createActivityIndicator({
            left:<span class="hljs-number">20</span>,
            bottom:<span class="hljs-number">13</span>,
            <span class="hljs-variable">width</span>:<span class="hljs-number">30</span>,
            <span class="hljs-variable">height</span>:<span class="hljs-number">30</span>
        });

        tableHeader.<span class="hljs-built_in">add</span>(arrow);
        tableHeader.<span class="hljs-built_in">add</span>(statusLabel);
        tableHeader.<span class="hljs-built_in">add</span>(lastUpdatedLabel);
        tableHeader.<span class="hljs-built_in">add</span>(activityInd);

        tableview.headerPullView = tableHeader;


        var pulling = <span class="hljs-keyword">false</span>;
        var reloading = <span class="hljs-keyword">false</span>;

        function beginReloading()
        {
            <span class="hljs-comment">// just mock out the reload</span>
            setTimeout(endReloading,<span class="hljs-number">2000</span>);
        }


        function endReloading()
        {
            <span class="hljs-comment">// simulate loading</span>
            setTimeout(function(){
                getRSSData();
            },<span class="hljs-number">5000</span>);

            <span class="hljs-comment">// when you're done, just reset</span>
            tableview.setContentInsets({top:<span class="hljs-number">0</span>},{animated:<span class="hljs-keyword">true</span>});
            reloading = <span class="hljs-keyword">false</span>;
            lastUpdatedLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Last Updated: "</span>+formatDate();
            statusLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Pull down to refresh..."</span>;
            activityInd.hide();
            arrow.show();
        }

        tableview.addEventListener(<span class="hljs-string">'scroll'</span>,function(e)
        {
            var offset = e.contentOffset.y;
            <span class="hljs-keyword">if</span> (offset &lt;= -<span class="hljs-number">65.0</span> &amp;&amp; !pulling)
            {
                var t = Ti.UI.create2DMatrix();
                t = t.<span class="hljs-built_in">rotate</span>(-<span class="hljs-number">180</span>);
                pulling = <span class="hljs-keyword">true</span>;
                arrow.animate({transform:t,duration:<span class="hljs-number">180</span>});
                statusLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Release to refresh..."</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pulling &amp;&amp; offset &gt; -<span class="hljs-number">65.0</span> &amp;&amp; offset &lt; <span class="hljs-number">0</span>)
            {
                pulling = <span class="hljs-keyword">false</span>;
                 t = Ti.UI.create2DMatrix();
                arrow.animate({transform:t,duration:<span class="hljs-number">180</span>});
                statusLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Pull down to refresh..."</span>;
            }
        });

        tableview.addEventListener(<span class="hljs-string">'scrollEnd'</span>,function(e)
        {
            <span class="hljs-keyword">if</span> (pulling &amp;&amp; !reloading &amp;&amp; e.contentOffset.y &lt;= -<span class="hljs-number">65.0</span>)
            {
                reloading = <span class="hljs-keyword">true</span>;
                pulling = <span class="hljs-keyword">false</span>;
                arrow.hide();
                activityInd.show();
                statusLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Reloading..."</span>;
                tableview.setContentInsets({top:<span class="hljs-number">60</span>},{animated:<span class="hljs-keyword">true</span>});
                arrow.transform=Ti.UI.create2DMatrix();
                beginReloading();
            }
        });

    <span class="hljs-comment">///////////////////////////</span>
    <span class="hljs-comment">//Slut pÃ¥ pull to refresh//    </span>
    <span class="hljs-comment">///////////////////////////</span>


        tableview.addEventListener(<span class="hljs-string">'click'</span>,function(e)
        {
            <span class="hljs-comment">//BestÃ¤mmer vilken rad man Ã¤r pÃ¥</span>
            currentNewsItem = e.index;

            <span class="hljs-comment">//HÃ¤mta in det som hÃ¶r till just denna raden</span>
            eventitem = items.item(currentNewsItem);
            eventtitle = eventitem.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;
            eventdescription = eventitem.getElementsByTagName(<span class="hljs-string">"description"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;
            eventdate = eventitem.getElementsByTagName(<span class="hljs-string">"pubDate"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;
            eventlink = eventitem.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;

            <span class="hljs-comment">//ErsÃ¤tt "+0000" som finns i pubDate med "", dvs inget.</span>
            eventdate = eventdate.replace(<span class="hljs-string">'+0000'</span>,<span class="hljs-string">''</span>);
            eventdate = eventdate.replace(<span class="hljs-string">'+0100'</span>,<span class="hljs-string">''</span>);
            eventdate = eventdate.replace(<span class="hljs-string">'+0200'</span>,<span class="hljs-string">''</span>);

                <span class="hljs-comment">//Skapa underfÃ¶nster till nyheten. I underfÃ¶nstret kan ni kalla pÃ¥ win.myDescription etc fÃ¶r att fÃ¥ ut vad som finns i den radens description</span>
                var subWinRSS = Ti.UI.createWindow({
                    url:<span class="hljs-string">'subWinRSS.js'</span>,
                    backgroundColor:<span class="hljs-string">'#eee'</span>,
                    barColor:<span class="hljs-string">'#000'</span>,
                    myTitle:eventtitle,
                    myDescription:eventdescription,
                    myDate:eventdate            
                });

                Titanium.UI.currentTab.<span class="hljs-built_in">open</span>(subWinRSS,{animated:<span class="hljs-keyword">true</span>});

            });    

    }
    <span class="hljs-keyword">catch</span>(E)
    {
        <span class="hljs-comment">//Felmeddelande om man inte kan hÃ¤mta</span>
        alert(<span class="hljs-string">'Saknar kontakt med servern. Vi arbetar med problemet'</span>);
    }
</code></pre><p>};<br>&#x2F;&#x2F;GÃ¶r anropet<br>xhr.send();<br>}</p>
<p>getRSSData();</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 19th 2012, 3:26:56 pm">September 19th 2012</span>
											by <span class='authorname'>Markus Renström</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247567">
				
						<section>
							<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.currentWindow;

<span class="hljs-keyword">var</span> rssURL = <span class="hljs-string">'feed://megapixlar.blogg.se/index.rss'</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRSSData</span><span class="hljs-params">()</span></span>{ 

    <span class="hljs-keyword">var</span> actView = Ti.UI.createView({
        width:<span class="hljs-number">200</span>,
        height:<span class="hljs-number">140</span>,
        borderRadius:<span class="hljs-number">10</span>,
        opacity:<span class="hljs-number">0.8</span>,
        backgroundColor:<span class="hljs-string">'#000'</span>
    });
    win.add(actView);

    <span class="hljs-keyword">var</span> actInd = Titanium.UI.createActivityIndicator({
        color:<span class="hljs-string">'#fff'</span>,
        height:<span class="hljs-string">'auto'</span>,
        message:<span class="hljs-string">'Laddar...'</span>,
        width:<span class="hljs-string">'auto'</span>,
        style:Titanium.UI.iPhone.ActivityIndicatorStyle.PLAIN
    });

    win.add(actInd);
    actInd.show();


    <span class="hljs-keyword">var</span> data = [];

    <span class="hljs-keyword">var</span> curr = <span class="hljs-number">0</span>;


    <span class="hljs-keyword">var</span> items = <span class="hljs-string">""</span>;


    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();

    xhr.open(<span class="hljs-string">"GET"</span>,rssURL);

    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
    </span>{

        <span class="hljs-keyword">try</span>
        {

            <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
            items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
            <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;


              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++){

                <span class="hljs-keyword">var</span> item = items.item(c);

                <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
                <span class="hljs-keyword">var</span> description = item.getElementsByTagName(<span class="hljs-string">"description"</span>).item(<span class="hljs-number">0</span>).text;
                <span class="hljs-keyword">var</span> date = item.getElementsByTagName(<span class="hljs-string">"pubDate"</span>).item(<span class="hljs-number">0</span>).text;


            <span class="hljs-keyword">var</span> desc = item.getElementsByTagName(<span class="hljs-string">"description"</span>).item(<span class="hljs-number">0</span>).text;

            <span class="hljs-keyword">var</span> imgUrl = desc;

             /
            <span class="hljs-keyword">var</span> cutPos = imgUrl.search(<span class="hljs-string">'img src="'</span>) + <span class="hljs-number">9</span>;

            imgUrl = imgUrl.substring(cutPos, imgUrl.length);


                           cutPos = imgUrl.search(<span class="hljs-string">'" alt='</span>);

                           imgUrl = imgUrl.substring(<span class="hljs-number">0</span>, cutPos);


                        Ti.API.log(<span class="hljs-string">'IMG: '</span>+imgUrl);



                <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({
                    minRowHeight:<span class="hljs-number">60</span>,
                    height:<span class="hljs-string">'auto'</span>, 
                    hasChild:<span class="hljs-literal">true</span>,
                    backgroundColor:<span class="hljs-string">'#ccc'</span>
                });

                 <span class="hljs-keyword">var</span> rowImage = Ti.UI.createImageView({
                     image:imgUrl,
                     width:<span class="hljs-number">60</span>,
                     height:<span class="hljs-string">'auto'</span>,
                     height:<span class="hljs-number">50</span>,
                     left:<span class="hljs-number">0</span>
                 });
                 row.add(rowImage);

                <span class="hljs-keyword">var</span> titleLabel = Ti.UI.createLabel({
                    color:<span class="hljs-string">'#202020'</span>,
                    shadowColor:<span class="hljs-string">'#fff'</span>,
                    shadowOffset:{x:<span class="hljs-number">0</span>,y:<span class="hljs-number">1</span>},
                    font:{fontSize:<span class="hljs-number">16</span>, fontFamily:<span class="hljs-string">'Helvetica-Bold'</span>},
                    left:<span class="hljs-number">68</span>,
                    right:<span class="hljs-number">15</span>,
                    top:<span class="hljs-number">5</span>,
                    bottom:<span class="hljs-number">20</span>,
                    height:<span class="hljs-string">'auto'</span>,
                    text:title
                });
                row.add(titleLabel);

                <span class="hljs-keyword">var</span> dateLabel = Ti.UI.createLabel({
                    color:<span class="hljs-string">'#999'</span>,
                    font:{fontSize:<span class="hljs-number">12</span>, fontFamily:<span class="hljs-string">'Helvetica'</span>},
                    left:<span class="hljs-number">68</span>,
                    bottom:<span class="hljs-number">2</span>,
                    height:<span class="hljs-number">17</span>,
                    width:<span class="hljs-number">200</span>,
                    text:date
                });
                row.add(dateLabel);
                      data[curr++] = row;
                }

                <span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({
                    data:data, 
                    width:<span class="hljs-number">320</span>,
                    separatorStyle:Ti.UI.iPhone.TableViewSeparatorStyle.SINGLE_LINE, 
                    top:<span class="hljs-number">0</span>});
                   win.add(tableview);



            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatDate</span><span class="hljs-params">()</span>
            </span>{
                <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> Date;
                <span class="hljs-keyword">var</span> datestr = date.getMonth()+<span class="hljs-string">'/'</span>+date.getDate()+<span class="hljs-string">'/'</span>+date.getFullYear();
                <span class="hljs-keyword">if</span> (date.getHours()&gt;=<span class="hljs-number">12</span>)
                {
                    datestr+=<span class="hljs-string">' '</span>+(date.getHours()==<span class="hljs-number">12</span> ? date.getHours() : date.getHours()-<span class="hljs-number">12</span>)+<span class="hljs-string">':'</span>+date.getMinutes()+<span class="hljs-string">' PM'</span>;
                }
                <span class="hljs-keyword">else</span>
                {
                    datestr+=<span class="hljs-string">' '</span>+date.getHours()+<span class="hljs-string">':'</span>+date.getMinutes()+<span class="hljs-string">' AM'</span>;
                }
                <span class="hljs-keyword">return</span> datestr;
            }


            <span class="hljs-keyword">var</span> border = Ti.UI.createView({
                backgroundColor:<span class="hljs-string">"#576c89"</span>,
                height:<span class="hljs-number">2</span>,
                bottom:<span class="hljs-number">0</span>
            });

            <span class="hljs-keyword">var</span> tableHeader = Ti.UI.createView({
                backgroundColor:<span class="hljs-string">"#000"</span>,
                width:<span class="hljs-number">320</span>,
                height:<span class="hljs-number">60</span>
            });
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 19th 2012, 3:59:44 pm">September 19th 2012</span>
								by <span class='authorname'>Markus Renström</span><br>
								<a class="icon-bg icon-link" href="question/142418/rss-on-android#answer-247567" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247568">
				
						<section>
							<pre><code class="hljs">

<span class="processing">            tableHeader.<span class="hljs-built_in">add</span>(border);

            var arrow = Ti.UI.createView({
                backgroundImage:<span class="hljs-string">"images/whiteArrow.png"</span>,
                <span class="hljs-variable">width</span>:<span class="hljs-number">23</span>,
                <span class="hljs-variable">height</span>:<span class="hljs-number">60</span>,
                bottom:<span class="hljs-number">10</span>,
                left:<span class="hljs-number">20</span>
            });

            var statusLabel = Ti.UI.createLabel({
                <span class="hljs-built_in">text</span>:<span class="hljs-string">"Pull to reload"</span>,
                left:<span class="hljs-number">55</span>,
                <span class="hljs-variable">width</span>:<span class="hljs-number">200</span>,
                bottom:<span class="hljs-number">30</span>,
                <span class="hljs-variable">height</span>:<span class="hljs-string">"auto"</span>,
                <span class="hljs-built_in">color</span>:<span class="hljs-string">"#fff"</span>,
                <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">"center"</span>,
                font:{fontSize:<span class="hljs-number">13</span>,fontWeight:<span class="hljs-string">"bold"</span>},
                shadowColor:<span class="hljs-string">"#999"</span>,
                shadowOffset:{x:<span class="hljs-number">0</span>,y:<span class="hljs-number">1</span>}
            });

            var lastUpdatedLabel = Ti.UI.createLabel({
                <span class="hljs-built_in">text</span>:<span class="hljs-string">"Last Updated: "</span>+formatDate(),
                left:<span class="hljs-number">55</span>,
                <span class="hljs-variable">width</span>:<span class="hljs-number">200</span>,
                bottom:<span class="hljs-number">15</span>,
                <span class="hljs-variable">height</span>:<span class="hljs-string">"auto"</span>,
                <span class="hljs-built_in">color</span>:<span class="hljs-string">"#999"</span>,
                <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">"center"</span>,
                font:{fontSize:<span class="hljs-number">12</span>}

            });

            var activityInd = Titanium.UI.createActivityIndicator({
                left:<span class="hljs-number">20</span>,
                bottom:<span class="hljs-number">13</span>,
                <span class="hljs-variable">width</span>:<span class="hljs-number">30</span>,
                <span class="hljs-variable">height</span>:<span class="hljs-number">30</span>
            });

            tableHeader.<span class="hljs-built_in">add</span>(arrow);
            tableHeader.<span class="hljs-built_in">add</span>(statusLabel);
            tableHeader.<span class="hljs-built_in">add</span>(lastUpdatedLabel);
            tableHeader.<span class="hljs-built_in">add</span>(activityInd);

            tableview.headerPullView = tableHeader;


            var pulling = <span class="hljs-keyword">false</span>;
            var reloading = <span class="hljs-keyword">false</span>;

            function beginReloading()
            {

                setTimeout(endReloading,<span class="hljs-number">2000</span>);
            }


            function endReloading()
            {

                setTimeout(function(){
                    getRSSData();
                },<span class="hljs-number">5000</span>);


                tableview.setContentInsets({top:<span class="hljs-number">0</span>},{animated:<span class="hljs-keyword">true</span>});
                reloading = <span class="hljs-keyword">false</span>;
                lastUpdatedLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Last Updated: "</span>+formatDate();
                statusLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Pull down to refresh..."</span>;
                activityInd.hide();
                arrow.show();
            }

            tableview.addEventListener(<span class="hljs-string">'scroll'</span>,function(e)
            {
                var offset = e.contentOffset.y;
                <span class="hljs-keyword">if</span> (offset &lt;= -<span class="hljs-number">65.0</span> &amp;&amp; !pulling)
                {
                    var t = Ti.UI.create2DMatrix();
                    t = t.<span class="hljs-built_in">rotate</span>(-<span class="hljs-number">180</span>);
                    pulling = <span class="hljs-keyword">true</span>;
                    arrow.animate({transform:t,duration:<span class="hljs-number">180</span>});
                    statusLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Release to refresh..."</span>;
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pulling &amp;&amp; offset &gt; -<span class="hljs-number">65.0</span> &amp;&amp; offset &lt; <span class="hljs-number">0</span>)
                {
                    pulling = <span class="hljs-keyword">false</span>;
                     t = Ti.UI.create2DMatrix();
                    arrow.animate({transform:t,duration:<span class="hljs-number">180</span>});
                    statusLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Pull down to refresh..."</span>;
                }
            });

            tableview.addEventListener(<span class="hljs-string">'scrollEnd'</span>,function(e)
            {
                <span class="hljs-keyword">if</span> (pulling &amp;&amp; !reloading &amp;&amp; e.contentOffset.y &lt;= -<span class="hljs-number">65.0</span>)
                {
                    reloading = <span class="hljs-keyword">true</span>;
                    pulling = <span class="hljs-keyword">false</span>;
                    arrow.hide();
                    activityInd.show();
                    statusLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Reloading..."</span>;
                    tableview.setContentInsets({top:<span class="hljs-number">60</span>},{animated:<span class="hljs-keyword">true</span>});
                    arrow.transform=Ti.UI.create2DMatrix();
                    beginReloading();
                }
            });




            tableview.addEventListener(<span class="hljs-string">'click'</span>,function(e)
            {

                currentNewsItem = e.index;


                eventitem = items.item(currentNewsItem);
                eventtitle = eventitem.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;
                eventdescription = eventitem.getElementsByTagName(<span class="hljs-string">"description"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;
                eventdate = eventitem.getElementsByTagName(<span class="hljs-string">"pubDate"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;
                eventlink = eventitem.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).<span class="hljs-built_in">text</span>;


                eventdate = eventdate.replace(<span class="hljs-string">'+0000'</span>,<span class="hljs-string">''</span>);
                eventdate = eventdate.replace(<span class="hljs-string">'+0100'</span>,<span class="hljs-string">''</span>);
                eventdate = eventdate.replace(<span class="hljs-string">'+0200'</span>,<span class="hljs-string">''</span>);

                    var subWinRSS = Ti.UI.createWindow({
                        url:<span class="hljs-string">'subWinRSS.js'</span>,
                        backgroundColor:<span class="hljs-string">'#eee'</span>,
                        barColor:<span class="hljs-string">'#000'</span>,
                        myTitle:eventtitle,
                        myDescription:eventdescription,
                        myDate:eventdate            
                    });

                    Titanium.UI.currentTab.<span class="hljs-built_in">open</span>(subWinRSS,{animated:<span class="hljs-keyword">true</span>});

                });    

        }
        <span class="hljs-keyword">catch</span>(E)
        {

            alert(<span class="hljs-string">'Saknar kontakt med servern. Vi arbetar med problemet'</span>);
        }


};

xhr.send();
}

getRSSData();</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 19th 2012, 4:00:17 pm">September 19th 2012</span>
								by <span class='authorname'>Markus Renström</span><br>
								<a class="icon-bg icon-link" href="question/142418/rss-on-android#answer-247568" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>this is the code, sry guys, probably to long before :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 19th 2012, 4:01:15 pm">September 19th 2012</span>
											by <span class='authorname'>Markus Renström</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
