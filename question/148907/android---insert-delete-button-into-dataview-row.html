<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android - Insert delete button into dataview row Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android - Insert delete button into dataview row</h1>
		</header>
		<section>
			<p>Ive managed to easily read and write from a database to populate data view table&#x2F;rows. Now when i enter the code to insert a button it never appears. I can&#39;t just have the eventlistener listening for a click on the row as that functionality is being used to display more content, so i need a button on each row to act as a delete function. </p>
<p>I am using the following code to add the data to each row along with my attempted button insertion </p>
<pre><code class="hljs"><span class="hljs-tag">while</span> (sql.<span class="hljs-function">isValidRow</span>())
{
      <span class="hljs-tag">data</span><span class="hljs-class">.push</span>({<span class="hljs-attribute">title</span>:sql.<span class="hljs-function">field</span>(<span class="hljs-number">0</span>)});
      <span class="hljs-tag">button</span><span class="hljs-class">.add</span>(row);
      <span class="hljs-tag">sql</span><span class="hljs-class">.next</span>();
 }

<span class="hljs-tag">win1</span><span class="hljs-class">.add</span>(tableView);
<span class="hljs-tag">tableView</span><span class="hljs-class">.setData</span>(data);
</code></pre><p>Any ideas?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 27th 2013, 4:24:09 pm">February 27th 2013</span>
				by <span class='authorname'>Ben McD</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>button</span></li>
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>sql</span></li>
					
						<li><span class='tagname'>tableviewrow</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Need a bit more info.  Where is the value <code>row</code> declared and what type is it ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 27th 2013, 4:29:36 pm">February 27th 2013</span>
								by <span class='authorname'>Nick Milner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Sorry about that, its declared after the table view creation, here is some more of the code :</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> data = [];
<span class="hljs-keyword">var</span> db = Ti.Database.open(<span class="hljs-string">'mydb1Installed'</span>);
<span class="hljs-keyword">var</span> sql = db.execute(<span class="hljs-string">'SELECT * from content WHERE category="'</span> + win.cate + <span class="hljs-string">'"'</span>);

<span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({
    height:<span class="hljs-number">50</span>
});

<span class="hljs-keyword">var</span> button = Ti.UI.createButton({
    color:<span class="hljs-string">'black'</span>,
    backgroundColor:<span class="hljs-string">'red'</span>,
    title:<span class="hljs-string">'Delete'</span>,
    width:<span class="hljs-number">60</span>,
    clickName:<span class="hljs-string">'button'</span>,
    height:<span class="hljs-number">34</span>
});
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="February 27th 2013, 4:42:11 pm">February 27th 2013</span>
								by <span class='authorname'>Ben McD</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>the button.add(row) conflicts with some of my insertion code as well, as i use the title parameter to insert data directly into the database</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 27th 2013, 4:44:25 pm">February 27th 2013</span>
								by <span class='authorname'>Ben McD</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Ben, As per your code </p>
<p>button.add(row)</p>
<p>You are adding row to the button, but what I think is you need to add button to the row</p>
<p>row.add(button)</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 28th 2013, 6:36:37 am">February 28th 2013</span>
								by <span class='authorname'>Raju Mahato</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-257693">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>You should try something like this;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> addRow = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({
        data: obj,
        height: <span class="hljs-number">50</span>,
        id: <span class="hljs-string">'row'</span>,
        width: Ti.UI.FILL
    });
    <span class="hljs-keyword">var</span> lbl = Ti.UI.createLabel({
        height: Ti.UI.SIZE,
        left: <span class="hljs-number">10</span>,
        title: obj.title || <span class="hljs-string">''</span>,
        touchEnabled: <span class="hljs-literal">false</span>,
        width: Ti.UI.SIZE
    });
    row.add(lbl);

    <span class="hljs-keyword">var</span> button = Ti.UI.createButton({
        backgroundColor: <span class="hljs-string">'red'</span>,
        color: <span class="hljs-string">'black'</span>,
        height: <span class="hljs-number">34</span>,
        id: <span class="hljs-string">'button'</span>,
        right: <span class="hljs-number">10</span>,
        title: <span class="hljs-string">'Delete'</span>,
        width: <span class="hljs-number">60</span>
    });
    row.add(button);

    <span class="hljs-keyword">return</span> row;
};

<span class="hljs-keyword">var</span> data = [];
<span class="hljs-keyword">var</span> db = Ti.Database.open(<span class="hljs-string">'mydb1Installed'</span>);
<span class="hljs-keyword">var</span> sql = db.execute(<span class="hljs-string">'SELECT * from content WHERE category="'</span> + win.cate + <span class="hljs-string">'"'</span>);

<span class="hljs-keyword">while</span> (sql.isValidRow()) {
    data.push(addRow({
        title: sql.field(<span class="hljs-number">0</span>)
    }));
    sql.next();
}
<span class="hljs-keyword">var</span> tableView = Ti.UI.createTableView({
    height: Ti.UI.FILL,
    width: Ti.UI.FILL
});
tableView.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">switch</span> (e.source.id) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'row'</span>:
        Ti.API.info(<span class="hljs-string">'row clicked: '</span> + <span class="hljs-built_in">JSON</span>.stringify(e.rowData.data));
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'button'</span>:
        Ti.API.info(<span class="hljs-string">'button clicked: '</span> + <span class="hljs-built_in">JSON</span>.stringify(e.rowData.data));
        <span class="hljs-keyword">break</span>;
    }
});

win1.add(tableView);
tableView.setData(data);
</code></pre><p>This create a function that handles the row creation and stores the data passed into the row.  Using an <strong>id</strong> column you can determine which &quot;thing* was clicked and react accordingly.  The data for the row is then accessible in that row on the click event.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 27th 2013, 9:20:51 pm">February 27th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/148907/android---insert-delete-button-into-dataview-row.html#answer-257693" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for your input Malcolm, the only issue with the code you have provided is that when the objects are loaded into the table it doesn&#39;t display the label. It displays the correct amount of data in the table however. </p>
<p>Even when i change the label name to a static value it still doesn&#39;t display</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 28th 2013, 6:10:21 pm">February 28th 2013</span>
											by <span class='authorname'>Ben McD</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK this is almost certainly a typo as I used an iPad, tweak as follows;</p>
<pre><code class="hljs">var lbl = Ti.UI.createLabel({
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    left: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">text</span>: obj.title || <span class="hljs-string">''</span>, <span class="hljs-comment">// corrected line</span>
    touchEnabled: <span class="hljs-keyword">false</span>,
    <span class="hljs-variable">width</span>: Ti.UI.SIZE
});
row.<span class="hljs-built_in">add</span>(lbl);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 28th 2013, 6:29:21 pm">February 28th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just figured that out now, its fun sometimes to see how radical code can react when the simplest of details are wrong. Thanks so much for your efforts, one of the most helpful posts ive ever had back on any forum</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 28th 2013, 6:32:28 pm">February 28th 2013</span>
											by <span class='authorname'>Ben McD</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You are very welcome.  Do not forget to mark it as answered if you think it has been.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 28th 2013, 6:35:39 pm">February 28th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just noticed an issue with the case statement, while it registers the button input fine it doesn&#39;t seem to be responding to a row click. Been scratching my head over this one for a while now, I can&#39;t seem to figure out why it isn&#39;t detecting it. Any thoughts? Last time i promise :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 28th 2013, 8:25:38 pm">February 28th 2013</span>
											by <span class='authorname'>Ben McD</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I will double-check in the morning for you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 28th 2013, 8:55:30 pm">February 28th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-257720">
				
						<section>
							<p>Hi Ben, As per your code</p>
<p>button.add(row)</p>
<p>You are adding row to the button, but what I think is you need to add button to the row</p>
<p>row.add(button)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 28th 2013, 6:37:22 am">February 28th 2013</span>
								by <span class='authorname'>Raju Mahato</span><br>
								<a class="icon-bg icon-link" href="question/148907/android---insert-delete-button-into-dataview-row.html#answer-257720" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Raju; did you read the other answer, before providing this one?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 28th 2013, 6:49:50 am">February 28th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes Malcom, I have read other answers. But I am not commenting on those answer or not even said that those are wrong. Your have explain it very well. I have just commenting on his code that he has shared. That&#39;s it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 28th 2013, 7:13:26 am">February 28th 2013</span>
											by <span class='authorname'>Raju Mahato</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
