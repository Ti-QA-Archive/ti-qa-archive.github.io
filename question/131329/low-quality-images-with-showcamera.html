<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Low quality images with showCamera? Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Low quality images with showCamera?</h1>
		</header>
		<section>
			<p>In my app, the user can take pictures, but when I upload them to my webserver, they are always 640x640.  I&#39;m not doing any compression between, all I&#39;m doing is sending the event.media to my server, and thats all.</p>
<p>Is there a setting somewhere to make the quality better?  I have the following in my settings when the camera is opened</p>
<pre><code class="hljs">saveToPhotoGallery:Titanium<span class="hljs-class">.App</span><span class="hljs-class">.Properties</span><span class="hljs-class">.getString</span>(<span class="hljs-string">"cameraroll"</span>),
    allowEditing:true,
    mediaTypes:[Ti<span class="hljs-class">.Media</span><span class="hljs-class">.MEDIA_TYPE_PHOTO</span>],
    videoQuality:Titanium<span class="hljs-class">.Media</span><span class="hljs-class">.QUALITY_HIGH</span>
</code></pre><p>I&#39;m testing on an iPhone 4, so the image quality SHOULD be a lot better than 640x640.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 29th 2012, 6:07:38 pm">January 29th 2012</span>
				by <span class='authorname'>Josh Lewis</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>camera</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>quality</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>9</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>9 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-229279">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>TIMOB-7511 has been resolved and the fix is available in master CI build. Try it out and let us know if you see any issue.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 2nd 2012, 11:13:51 pm">February 2nd 2012</span>
								by <span class='authorname'>Neeraj Gupta</span><br>
								<a class="icon-bg icon-link" href="question/131329/low-quality-images-with-showcamera#answer-229279" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>How do I install that master build?  And will the images not be 640x640 if allowEditing=true?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2012, 8:07:18 pm">February 3rd 2012</span>
											by <span class='authorname'>Josh Lewis</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>In Ti Studio, go to the option HElp-&gt;Install Titanium SDK from URL -&gt; </p>
<p>And then choose a build from <a href="http:&#x2F;&#x2F;builds.appcelerator.com.s3.amazonaws.com&#x2F;index.html">this page</a>. Use the master branch, with your right platform. </p>
<p>Best,</p>
<p>Mauro</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2012, 8:11:41 pm">February 3rd 2012</span>
											by <span class='authorname'>Mauro Parra</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Still doesnt work using the 1.9 master.  On the import from the gallery, my 5mb image is now 200k, with no compression or changing of it anywhere in my code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 5th 2012, 12:34:53 pm">February 5th 2012</span>
											by <span class='authorname'>Josh Lewis</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Could this be a simulator thing?  I used the iOS simulator to &#39;tweet&#39; the image directly from the gallery, and its reduced.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 5th 2012, 12:48:21 pm">February 5th 2012</span>
											by <span class='authorname'>Josh Lewis</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hello Josh,<br>can you please try this with today&#39;s build and do the zooming so all the image is inside the cropping square? It will save the image with the highest quality. Just remember to clean your project after updating the SDK version.</p>
<p>Best,</p>
<p>Mauro</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 7th 2012, 8:24:50 pm">February 7th 2012</span>
											by <span class='authorname'>Mauro Parra</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228858">
				
						<section>
							<p>Hi,</p>
<p>Do you encode the image before sending? Please give us the code posting image so that we can help&#x2F;debug.</p>
<p>Best,</p>
<p>Minh</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 29th 2012, 8:38:35 pm">January 29th 2012</span>
								by <span class='authorname'>Minh Nguyen</span><br>
								<a class="icon-bg icon-link" href="question/131329/low-quality-images-with-showcamera#answer-228858" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>sorry, above comment should be in comment section.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 29th 2012, 8:39:37 pm">January 29th 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228890">
				
						<section>
							<p>No, all I have is the following</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span>(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
        {
            <span class="hljs-keyword">var</span> eventData=event.media;

        });    
<span class="hljs-comment">//non related code</span>

<span class="hljs-comment">/** my code to post to my receiving php script**/</span>
<span class="hljs-keyword">var</span> payload = { 
                <span class="hljs-string">"media"</span>: eventData,
                <span class="hljs-string">"extension"</span>:extension,
                <span class="hljs-string">"eventid"</span>:<span class="hljs-keyword">win</span>.eventid,
                <span class="hljs-string">"caption"</span>:caption,
                <span class="hljs-string">"userid"</span>:Titanium.<span class="hljs-keyword">App</span>.Properties.getString(<span class="hljs-string">"userid"</span>),
                <span class="hljs-string">"firstname"</span>:Titanium.<span class="hljs-keyword">App</span>.Properties.getString(<span class="hljs-string">"firstname"</span>),
                <span class="hljs-string">"lastname"</span>:Titanium.<span class="hljs-keyword">App</span>.Properties.getString(<span class="hljs-string">"lastname"</span>)

                };
                  <span class="hljs-keyword">var</span> host=Titanium.<span class="hljs-keyword">App</span>.Properties.getString(<span class="hljs-string">"url"</span>)+'mobileimageadd.php';
xhr.send(payload)
</code></pre><p>and my PHP file</p>
<pre><code class="hljs">//unrelated code
extract($_POST); 
<span class="hljs-keyword">if</span>(move_uploaded_file($_FILES[<span class="hljs-string">"media"</span>][<span class="hljs-string">"tmp_name"</span>], <span class="hljs-variable">$target</span>)) {
//unrelated code

}
</code></pre><p>So I&#39;m doing no compression or anything, and yet all of my images are 640x640..sometimes 640 x another dimension</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 30th 2012, 12:39:40 pm">January 30th 2012</span>
								by <span class='authorname'>Josh Lewis</span><br>
								<a class="icon-bg icon-link" href="question/131329/low-quality-images-with-showcamera#answer-228890" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228935">
				
						<section>
							<p>Anyone?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2012, 12:05:28 am">January 31st 2012</span>
								by <span class='authorname'>Josh Lewis</span><br>
								<a class="icon-bg icon-link" href="question/131329/low-quality-images-with-showcamera#answer-228935" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228937">
				
						<section>
							<p>How about to store captured image to your mobile, and check quality of it?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2012, 12:08:39 am">January 31st 2012</span>
								by <span class='authorname'>Minh Nguyen</span><br>
								<a class="icon-bg icon-link" href="question/131329/low-quality-images-with-showcamera#answer-228937" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Well, the problem is its an iphone 4, so the quality should be high, no matter what.  Unless there&#39;s an option I&#39;m not setting.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 31st 2012, 12:11:10 am">January 31st 2012</span>
											by <span class='authorname'>Josh Lewis</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228939">
				
						<section>
							<p>I&#39;ve found that if I set allowEditing=false, it looks to be higher quality, but then I get an error when uploaing (even though the only thing I change is the allowEditing property)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2012, 12:21:00 am">January 31st 2012</span>
								by <span class='authorname'>Josh Lewis</span><br>
								<a class="icon-bg icon-link" href="question/131329/low-quality-images-with-showcamera#answer-228939" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228958">
				
						<section>
							<p>I don&#39;t believe setting the videoQuality property has any impact on photos, but only videos.  Also, I think using allowEditing=true makes it effectively take the photo which has been rescaled to the editing view.  On a retina display, this would be 640 pixels wide in portrait.</p>
<p>So I think you were on the right track with allowEditing=false, and you need to look at what error occurs when uploading.  Perhaps you are just trying to upload a larger content size then what it will accept on your server.</p>
<p>You might also try adding something like this in the success callback:</p>
<pre><code class="hljs">Ti.API.info(<span class="hljs-string">'image size: '</span> + <span class="hljs-keyword">event</span>.media.width + <span class="hljs-string">'x'</span> + <span class="hljs-keyword">event</span>.media.height );
</code></pre><p>If you get a large image when you set allowEditing=false and you want it smaller (but bigger than 640), try using:</p>
<pre><code class="hljs">event<span class="hljs-class">.media</span><span class="hljs-class">.imageAsResized</span>(w,h)
</code></pre><p>to resize to the dimensions you want.  Probably even better would be to compress the jpg instead using <a href="https:&#x2F;&#x2F;github.com&#x2F;sideshowcoder&#x2F;jpgcompressor&#x2F;blob&#x2F;master&#x2F;documentation&#x2F;index.md">this</a> module.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2012, 4:25:38 am">January 31st 2012</span>
								by <span class='authorname'>Doug Handy</span><br>
								<a class="icon-bg icon-link" href="question/131329/low-quality-images-with-showcamera#answer-228958" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-229008">
				
						<section>
							<p>The problem with the edit=false is that they wont be able to scale and crop at all.  In the regular iOS camera, you an do that, and it will still retain the filesize and clarity and not be dropped to 640x640.</p>
<p>Right now, I&#39;ve sort of &quot;fixed&quot; it by writing out a file with the imageasthumbnail(1024)..at least it keeps the size decent..</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2012, 11:46:54 am">January 31st 2012</span>
								by <span class='authorname'>Josh Lewis</span><br>
								<a class="icon-bg icon-link" href="question/131329/low-quality-images-with-showcamera#answer-229008" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-229174">
				
						<section>
							<p>Hello Josh,</p>
<p>you can get the high resolution pic with this code (hint: set allowEditing: false):</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.createWindow();
Titanium.Media.showCamera({

    success:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>
    </span>{
        <span class="hljs-keyword">var</span> cropRect = event.cropRect;
        <span class="hljs-keyword">var</span> image = event.media;

        Ti.API.debug(<span class="hljs-string">'Our type was: '</span>+event.mediaType);
        <span class="hljs-keyword">if</span>(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
        {
            Titanium.Media.saveToPhotoGallery(event.media);
        }
        <span class="hljs-keyword">else</span>
        {
            alert(<span class="hljs-string">"got the wrong type back ="</span>+event.mediaType);
        }
    },
    cancel:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
    </span>{
    },
    error:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(error)</span>
    </span>{
        <span class="hljs-comment">// create alert</span>
        <span class="hljs-keyword">var</span> a = Titanium.UI.createAlertDialog({title:<span class="hljs-string">'Camera'</span>});

        <span class="hljs-comment">// set message</span>
        <span class="hljs-keyword">if</span> (error.code == Titanium.Media.NO_CAMERA)
        {
            a.setMessage(<span class="hljs-string">'Please run this test on device'</span>);
        }
        <span class="hljs-keyword">else</span>
        {
            a.setMessage(<span class="hljs-string">'Unexpected error: '</span> + error.code);
        }

        <span class="hljs-comment">// show alert</span>
        a.show();
    },
    saveToPhotoGallery:<span class="hljs-literal">true</span>,
    allowEditing:<span class="hljs-literal">false</span>,
    mediaTypes:[Ti.Media.MEDIA_TYPE_VIDEO,Ti.Media.MEDIA_TYPE_PHOTO]
});

win.open();
</code></pre><p>That way you will get the raw image from the camera (with the highest resolution).</p>
<p>Best,</p>
<p>Mauro</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 1st 2012, 11:49:52 pm">February 1st 2012</span>
								by <span class='authorname'>Mauro Parra</span><br>
								<a class="icon-bg icon-link" href="question/131329/low-quality-images-with-showcamera#answer-229174" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Right, I know that, but if they need to be able to crop at all, the editing has to be true, and then the filesize is reduced.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 1st 2012, 11:55:27 pm">February 1st 2012</span>
											by <span class='authorname'>Josh Lewis</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hello,</p>
<p>I added a bug for addressing this: <a href="http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-7511">TIMOB-7511</a>.</p>
<p>Best,</p>
<p>Mauro</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 2nd 2012, 12:04:32 am">February 2nd 2012</span>
											by <span class='authorname'>Mauro Parra</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
