<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android:Java - Setting Push Notifications » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android:Java - Setting Push Notifications</h1>
		</header>
		<section>
			<p>Hello.</p>
<p>I&#39;m new to ACS and I&#39;m trying to set push notifications.<br>I&#39;m developing application on Java-Android and following acs docs example I still cannot set Push Notifications.</p>
<p>first of all, I&#39;m making login to user.<br>After I get login-ok callback, Im trying to set Push:</p>
<p>1) getting token from Android GCM (very long key about 183 characters)<br>GoogleCloudMessaging gcm = GoogleCloudMessaging.getInstance(this);<br>String googleToken = gcm.register(GOOGLE_NOTIFICATION_KEY);</p>
<p>2) once I got Google Push Token I getting ACS Token:</p>
<p>CCPushService.getInstance().getDeviceTokenAsnyc(this, appKey, new DeviceTokenCallback() {<br>            @Override<br>            public void receivedDeviceToken(String token) {<br>                try {<br>                    CCPushService.getInstance().startService(getApplicationContext());<br>                } catch (PushServiceException e) {<br>                    e.printStackTrace();  &#x2F;&#x2F;To change body of catch statement use File | Settings | File Templates.<br>                }<br>            sendTokenToAcsServer(token);<br>            }</p>
<pre><code class="hljs">        <span class="hljs-annotation">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">failedReceiveDeviceToken</span><span class="hljs-params">(Throwable throwable)</span> </span>{
            <span class="hljs-comment">//To change body of implemented methods use File | Settings | File Templates.</span>
        }
    }); 
</code></pre><p>this is my foo …<br>private void sendTokenToAcsServer(String token) {<br>        if (token != null) {<br>            Cocoafish cocoafish = MyCocoaFish.getSharedInstance();<br>            cocoafish.getAccessToken();<br>                cocoafish.getAccessToken();<br>                cocoafish.getAppKey();<br>                cocoafish.getCurrentUser();</p>
<pre><code class="hljs">        <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, Object&gt; <span class="hljs-built_in">data</span> = <span class="hljs-literal">new</span> HashMap&lt;<span class="hljs-built_in">String</span>, Object&gt;();
        <span class="hljs-built_in">data</span><span class="hljs-built_in">.</span>put(<span class="hljs-string">"type"</span>, <span class="hljs-string">"android"</span>);
        <span class="hljs-built_in">data</span><span class="hljs-built_in">.</span>put(<span class="hljs-string">"channel"</span>, <span class="hljs-string">"friend_request"</span>);
        <span class="hljs-built_in">data</span><span class="hljs-built_in">.</span>put(<span class="hljs-string">"device_token"</span>, token);
        <span class="hljs-built_in">String</span> methodName = <span class="hljs-string">"push_notification/subscribe.json"</span>;
        NodeAcsTask nodeAcsTask = <span class="hljs-literal">new</span> NodeAcsTask(methodName, <span class="hljs-built_in">data</span>, mHandler, CCRequestMethod<span class="hljs-built_in">.</span>POST);
        nodeAcsTask<span class="hljs-built_in">.</span>execute();
    }
}
</code></pre><p>BUT !!! IN RESPONSE LINE I&#39;M GETTING: —&gt;&gt;&gt;<br>Failed to authenticate user&quot;,&quot;status&quot;:&quot;fail&quot;,&quot;code&quot;:404}</p>
<p>can please anyone help me ?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 7th 2013, 1:28:23 pm">August 7th 2013</span>
				by <span class='authorname'>Pavel Aizendorf</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>java</span></li>
					
						<li><span class='tagname'>push</span></li>
					
						<li><span class='tagname'>push notifications</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>BUT !!! IN RESPONSE LINE I&#39;M GETTING: —&gt;&gt;&gt;<br>Android application package not configured</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 7th 2013, 1:30:49 pm">August 7th 2013</span>
								by <span class='authorname'>Pavel Aizendorf</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I am facing the exact same issue… I wonder if you have solved it?</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 21st 2013, 6:24:34 pm">August 21st 2013</span>
								by <span class='authorname'>Joseph Sachs</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>having the same problem with moving from MQTT to GCM.  I&#39;ve entered Google Cloud Messaging (GCM) API Key &amp; Google Cloud Messaging (GCM) Sender ID in my app&#39;s ACS console; I also removed Application Package (MQTT).  Then made sure I call CloudPush.retrieveDeviceToken() before setting any other CloudPush properties or making another CloudPush calls.  </p>
<p>With the values in the &quot;Application Package (MQTT)&quot; field removed, i get &quot;Android application package not configured.&quot; when subscribing to push notifications.</p>
<p>With the Application Package field filled from ACS management console, i get &quot;Invalid device token: incorrect length, android device token should have 23 characters.&quot;</p>
<p>is there a place where we can get step by step directions on how to move from MQTT to GCM with Ti SDK 3.1.2</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 21st 2013, 9:41:18 pm">August 21st 2013</span>
								by <span class='authorname'>Alchemic Solutions</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>(&quot;type&quot;, &quot;gcm&quot;);</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 22nd 2013, 2:31:37 am">August 22nd 2013</span>
								by <span class='authorname'>Israel Weisman</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>changing &quot;type&quot; from &quot;android&quot; to &quot;gcm&quot; seems to have done the trick.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 22nd 2013, 5:06:48 pm">August 22nd 2013</span>
								by <span class='authorname'>Alchemic Solutions</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>3</span> Votes</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-267536">
				
						<section>
							<p>Yeah. I solved this issue very simple.<br>just try the following example:</p>
<p><code>private void sendTokenToAcsServer(String gcmToken) {
        if (gcmToken!= null) {
            Map&amp;lt;String, Object&amp;gt; data = new HashMap&amp;lt;String, Object&amp;gt;();
            data.put(&amp;quot;type&amp;quot;, &amp;quot;gcm&amp;quot;);
            data.put(&amp;quot;channel&amp;quot;, &amp;quot;events_notify&amp;quot;);
            data.put(&amp;quot;device_token&amp;quot;, gcmToken);
            String methodName = &amp;quot;push_notification&amp;#x2F;subscribe.json&amp;quot;;
            NodeAcsTask nodeAcsTask = new NodeAcsTask(methodName, data, this, CCRequestMethod.POST);
            nodeAcsTask.execute();
        }
    }</code></p>
<p>i bet you guys typed &quot;type&quot;, &quot;android&quot;); … just change type to GCM :)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 22nd 2013, 2:30:11 am">August 22nd 2013</span>
								by <span class='authorname'>Israel Weisman</span><br>
								<a class="icon-bg icon-link" href="question/155757/androidjava---setting-push-notifications#answer-267536" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Using &quot;gcm&quot; as type fixed it for me. I never would have figured that out. </p>
<p>Is this documented anywhere? Everything i have found said to use &quot;android&quot;.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 26th 2013, 3:47:13 pm">September 26th 2013</span>
											by <span class='authorname'>Markus Greystone</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266962">
				
						<section>
							<p>{&quot;message&quot;:&quot;Android application package not configured&quot;,&quot;status&quot;:&quot;fail&quot;,&quot;code&quot;:422}</p>
<p>this happens with GCM push …</p>
<p>what&#39;s wrong ?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 8th 2013, 9:00:40 am">August 8th 2013</span>
								by <span class='authorname'>Pavel Aizendorf</span><br>
								<a class="icon-bg icon-link" href="question/155757/androidjava---setting-push-notifications#answer-266962" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>also if I&#39;m using GCM service and typong package name in MQTT(android) I&#39;m getting the follows error:<br>{&quot;method_name&quot;:&quot;SubscribeNotification&quot;,&quot;message&quot;:&quot;Invalid device token: incorrect length, android device token should have 23 characters.&quot;,&quot;status&quot;:&quot;fail&quot;,&quot;code&quot;:400}</p>
<p>if I remove package name, when Im getting this error:<br>{&quot;message&quot;:&quot;Android application package not configured&quot;,&quot;status&quot;:&quot;fail&quot;,&quot;code&quot;:422}</p>
<p>What&#39;s wrong ? :((((((((((</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 8th 2013, 9:08:29 am">August 8th 2013</span>
											by <span class='authorname'>Pavel Aizendorf</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266951">
				
						<section>
							<p>Hi Pavel,</p>
<p>Have you entered <code>Application Package</code> name in <code>Android Push Configuration</code> under ACS push notification &#39;settings` tab?</p>
<p>Thanks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 8th 2013, 6:58:14 am">August 8th 2013</span>
								by <span class='authorname'>meenakshi pathak</span><br>
								<a class="icon-bg icon-link" href="question/155757/androidjava---setting-push-notifications#answer-266951" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266953">
				
						<section>
							<p>As I know I don&#39;t need to enter Application Package if I&#39;m using GCM Service. Right ?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 8th 2013, 7:13:44 am">August 8th 2013</span>
								by <span class='authorname'>Pavel Aizendorf</span><br>
								<a class="icon-bg icon-link" href="question/155757/androidjava---setting-push-notifications#answer-266953" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Yes you don&#39;t need to enter Application Package name but you need to enter GCM API key and GCM sender ID in settings.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 8th 2013, 8:10:08 am">August 8th 2013</span>
											by <span class='authorname'>meenakshi pathak</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266957">
				
						<section>
							<p>I did !</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 8th 2013, 8:25:21 am">August 8th 2013</span>
								by <span class='authorname'>Pavel Aizendorf</span><br>
								<a class="icon-bg icon-link" href="question/155757/androidjava---setting-push-notifications#answer-266957" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Can you use comment section for continuing further discussion on the same thread?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 8th 2013, 8:42:06 am">August 8th 2013</span>
											by <span class='authorname'>meenakshi pathak</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266958">
				
						<section>
							<p>I also tried to use mqqt :<br>after sucessfully subscribing, I&#39;m going to Push Notifications window:<br>https:&#x2F;&#x2F;cloud.appcelerator.com&#x2F;apps&#x2F;XXXXXXXXXXXXXXXXXXXX&#x2F;push_notification&#x2F;logs#</p>
<p>sending push to android and getting the following error: </p>
<p>Cannot get specific MQTT Dispatcher to send message to. MsgID: 50bc7bdf-5655-4959-8b9f-e50d81f7d67cdevicetoken: ND1JVUP4ZTK2NVIEV43TRRX, mqttHostNameToSend:null</p>
<p>What should I do ?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 8th 2013, 8:27:53 am">August 8th 2013</span>
								by <span class='authorname'>Pavel Aizendorf</span><br>
								<a class="icon-bg icon-link" href="question/155757/androidjava---setting-push-notifications#answer-266958" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
