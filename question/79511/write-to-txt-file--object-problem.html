<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>write to txt file- object problem » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>write to txt file- object problem</h1>
		</header>
		<section>
			<p>There is 2 files, tab1.js and myList.txt.<br>My only problem is that I can&#39;t write to myList.txt.<br>`<br>&#x2F;&#x2F;this one to read the file<br>var f = Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory, &#39;myList.txt&#39;);</p>
<p>&#x2F;&#x2F;this one to write to file<br>var file = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,&#39;myList.txt&#39;);</p>
<p>var resources = JSON.parse(f.read().text);<br>var contents = f.read();</p>
<p><strong>**</strong>   test   <strong>**</strong><br>Ti.API.info(&#39;file = &#39; + f);<br>Ti.API.info(&#39;exists = &#39; + f.exists());<br>Ti.API.info(&#39;size = &#39; + f.size);</p>
<p>Ti.API.info(&#39;readonly = &#39; + f.readonly);<br>Ti.API.info(&#39;writeable = &#39; + f.writeable);<br>Ti.API.info(&#39;name = &#39; + f.name);</p>
<p>Ti.API.info(&quot;contents blob object = &quot;+contents);<br>Ti.API.info(&#39;contents = &#39; + contents.text);</p>
<p><strong>*</strong>  end test <strong>**</strong><br><code>
</code><br>function loadValues(){</p>
<pre><code class="hljs"> for <span class="hljs-comment">(var i=0; i&lt;resources.list.length; i++)</span>{
     var row = Ti.UI.createTableViewRow<span class="hljs-comment">({
         title:resources.list[i].stuff,
         className:'newRowClass'})</span>;
    data.push<span class="hljs-comment">(row)</span>;
     }
</code></pre><p>}<br>addButton.addEventListener(&#39;click&#39;, function(e)<br>{</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({});
<span class="hljs-keyword">var</span> <span class="hljs-keyword">label</span> = Ti.UI.createLabel({});
<span class="hljs-keyword">label</span>.text = tf1.value;

       <span class="hljs-keyword">while</span>(resources.<span class="hljs-keyword">list</span>[counter].stuff != <span class="hljs-string">""</span>)<span class="hljs-comment">//if there is something, loop until empty</span>
         {
               counter++;
     }
     resources.<span class="hljs-keyword">list</span>[counter].stuff = <span class="hljs-keyword">label</span>.text;

<span class="hljs-keyword">file</span>.write(JSON.stringify(resources));
    row.add(<span class="hljs-keyword">label</span>);
tableView.insertRowBefore(0,row);
</code></pre><p>});<br><code>This is myList.txt</code><br>{&quot;list&quot;:[<br>{&quot;Row&quot;:&quot;1&quot;,&quot;stuff&quot;:&quot;&quot;},<br>{&quot;Row&quot;:&quot;2&quot;,&quot;stuff&quot;:&quot;&quot;},<br>{&quot;Row&quot;:&quot;3&quot;,&quot;stuff&quot;:&quot;&quot;},<br>{&quot;Row&quot;:&quot;4&quot;,&quot;stuff&quot;:&quot;&quot;},<br>{&quot;Row&quot;:&quot;5&quot;,&quot;stuff&quot;:&quot;&quot;}<br>]}<br>`<br>If I only use  …resourcesDirectory, &#39;myList.txt&#39;);, it is ok on iPhone emulator, but not on android emulator or Android device.<br>But if I use …applicationDataDirectory,&#39;myList.txt&#39;);,it happens something strange-I see that file is existing, but I get error nullPointerException, just like there is not an object..??? I get this error on both emulators and android device. I dont understand.. Can someone please try to explain what is  with my code when read,and when write  and tell me how to write to file? Should I specify what to write to file more times? If so, how is it possible that code is working if using …resourcesDirectory, &#39;myList.txt&#39;); Please help!</p>
<p>Thanks!</p>
<p>INFO:</p>
<p>INFO] file = [object TiFilesystemFile]<br>[INFO] exists = true<br>[INFO] size = 1502<br>[INFO] readonly = true<br>[INFO] writeable = false<br>[INFO] name = myList.txt<br>[INFO] contents blob object = [object TiBlob]<br>[INFO] contents = null<br>[ERROR] Script Error = Result of expression &#39;resources&#39; [null] is not an object. at myList.js (line 45).</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 13th 2010, 7:50:02 pm">November 13th 2010</span>
				by <span class='authorname'>Marijana Teljega</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>file</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>object</span></li>
					
						<li><span class='tagname'>text</span></li>
					
						<li><span class='tagname'>write</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-143331">
				
						<section>
							<p>The first issue is that the resources directory is read-only, so while you should be to perform a f.read() to grab the contents of a file, you will never be able to perform a f.write() when f points to a file in the resources folder.</p>
<p>It isn&#39;t clear to me why you need myList.txt but any copy in the resources folder will not be changeable via your code.  You need to create it in the temp folder (if you don&#39;t need it to persist or get backed up), or in the application data folder if you want it to persist between sessions or get backed up during sync operations.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 13th 2010, 9:27:26 pm">November 13th 2010</span>
								by <span class='authorname'>Doug Handy</span><br>
								<a class="icon-bg icon-link" href="question/79511/write-to-txt-file--object-problem#answer-143331" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Oh sorry,I forgot to tell what my app should do. I want to save stuff in myList.txt ). In application there is a textField, where you enter some stuff to buy, and this will be saved in myList.txt. There is also a tableview (in same window as textField), which updates(read) from myList.txt every time you enter a new stuff . It should be possible to read list after a device is restarted. That is why I have to both read and write to file.<br>I have myList.txt saved in application folder.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 14th 2010, 7:54:37 am">November 14th 2010</span>
											by <span class='authorname'>Marijana Teljega</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
