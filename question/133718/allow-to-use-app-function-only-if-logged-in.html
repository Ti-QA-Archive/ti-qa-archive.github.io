<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>allow to use app function ONLY if logged in. » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>allow to use app function ONLY if logged in.</h1>
		</header>
		<section>
			<p>hello -<br>I&#39;ve gone down the path of setting Ti.App.Properties.setString(&#39;profile&#39;, value) to verify if a user is logged in or not.<br>I&#39;ve also created a global logout button that has an event listener to set the value of profile = null if they logout.<br>I put this code in my app.js</p>
<pre><code class="hljs">bs.logoutBtn = bs.ui.createLogoutBtn();
bs.logoutBtn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    Ti.App.Properties.setString(<span class="hljs-string">'profile'</span>, <span class="hljs-literal">null</span>);
    Ti.App.Properties.setString(<span class="hljs-string">'credentials'</span>, <span class="hljs-literal">null</span>);
    Ti.API.info(<span class="hljs-string">'logout clicked'</span>);
    Ti.API.info(Ti.App.Properties.getString(<span class="hljs-string">'profile'</span>));
    controller.open(<span class="hljs-keyword">new</span> login(controller));
});
</code></pre><p>The problem with this when I push the user back to the login screen after logout the leftNavButton shows, is there anyway to disable it?</p>
<p>If this approach needs tweaked, please advise. </p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 13th 2012, 12:44:10 pm">March 13th 2012</span>
				by <span class='authorname'>matt s</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>button</span></li>
					
						<li><span class='tagname'>iphone4</span></li>
					
						<li><span class='tagname'>login</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-233176">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>You can remove the left nav button. Add this in the login window. If the app.prperties user striing is empty do the below.</p>
<p>if !(Ti.App.Properties.getString(&#39;profile&#39;)) {<br>var emptyView = Titanium.UI.createView({});<br>Titanium.UI.currentWindow.leftNavButton = emptyView<br>}<br>More details on another thread.<br>http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;118196&#x2F;remove-left-nav-button</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 13th 2012, 3:48:20 pm">March 13th 2012</span>
								by <span class='authorname'>jaishankar nadipalli</span><br>
								<a class="icon-bg icon-link" href="question/133718/allow-to-use-app-function-only-if-logged-in#answer-233176" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>this is right but it is not a perfect way because when any user logs out app should be start with the login window..and here matt open the login window by adding that window in the stack so every time that window is added in the stack but never pops</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 13th 2012, 3:54:45 pm">March 13th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-233164">
				
						<section>
							<p>when you use .open method to open new win ,this login win will be added to the stack of the windows so instead of open you should try to close the all windows…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 13th 2012, 12:55:05 pm">March 13th 2012</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/133718/allow-to-use-app-function-only-if-logged-in#answer-233164" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>by the way how you open the window..?</p>
<p>i mean are you using tabGroup or navigationGroup…?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 13th 2012, 12:55:53 pm">March 13th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I am using the forging Ti controller</p>
<pre><code class="hljs">
exports.NavigationController = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.windowStack = [];
};

exports.NavigationController.prototype.open = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-comment">/*Ti.UI.Window*/</span>windowToOpen</span>) </span>{
    <span class="hljs-comment">//add the window to the stack of windows managed by the controller</span>
    <span class="hljs-keyword">this</span>.windowStack.push(windowToOpen);

    <span class="hljs-comment">//grab a copy of the current nav controller for use in the callback</span>
    <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
    windowToOpen.addEventListener(<span class="hljs-string">'close'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        that.windowStack.pop();
    });

    <span class="hljs-comment">//hack - setting this property ensures the window is "heavyweight" (associated with an Android activity)</span>
    windowToOpen.navBarHidden = windowToOpen.navBarHidden || <span class="hljs-literal">false</span>;

    <span class="hljs-comment">//This is the first window</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.windowStack.length === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">if</span>(Ti.Platform.osname === <span class="hljs-string">'android'</span>) {
            windowToOpen.exitOnClose = <span class="hljs-literal">true</span>;
            windowToOpen.open();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.navGroup = Ti.UI.iPhone.createNavigationGroup({
                <span class="hljs-built_in">window</span> : windowToOpen
            });
            <span class="hljs-keyword">var</span> containerWindow = Ti.UI.createWindow();
            containerWindow.add(<span class="hljs-keyword">this</span>.navGroup);
            containerWindow.open();
        }
    }
    <span class="hljs-comment">//All subsequent windows</span>
    <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span>(Ti.Platform.osname === <span class="hljs-string">'android'</span>) {
            windowToOpen.open();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.navGroup.open(windowToOpen);
        }
    }
};

<span class="hljs-comment">//go back to the initial window of the NavigationController</span>
exports.NavigationController.prototype.home = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

    <span class="hljs-comment">//store a copy of all the current windows on the stack</span>
    <span class="hljs-keyword">var</span> windows = <span class="hljs-keyword">this</span>.windowStack.concat([]);

    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>, l = windows.length; i &lt; l; i++) {
        (<span class="hljs-keyword">this</span>.navGroup) ? <span class="hljs-keyword">this</span>.navGroup.close(windows[i]) : windows[i].close();
    }
    <span class="hljs-keyword">this</span>.windowStack = [<span class="hljs-keyword">this</span>.windowStack[<span class="hljs-number">0</span>]]; <span class="hljs-comment">//reset stack</span>
};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 13th 2012, 3:15:24 pm">March 13th 2012</span>
											by <span class='authorname'>matt s</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-233180">
				
						<section>
							<p>you may want to:</p>
<pre><code class="hljs"><span class="hljs-tag">controller</span><span class="hljs-class">.home</span>();
<span class="hljs-tag">loginWindow</span><span class="hljs-class">.open</span>(<span class="hljs-rules">{
<span class="hljs-rule"><span class="hljs-attribute">modal</span>:<span class="hljs-value"> true
</span></span></span>});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 13th 2012, 4:15:53 pm">March 13th 2012</span>
								by <span class='authorname'>Alexander Bauer</span><br>
								<a class="icon-bg icon-link" href="question/133718/allow-to-use-app-function-only-if-logged-in#answer-233180" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
