<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Removing all child objects from a view » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Removing all child objects from a view</h1>
		</header>
		<section>
			<p>I am trying to remove all child views from a parent view (possibleTagViewArea) using the following code: </p>
<pre><code class="hljs"><span class="hljs-component">if( possibleTagViewArea.<span class="hljs-keyword">children</span> ){
  while( possibleTagViewArea<span class="hljs-string">.children.length</span> &gt; 0 ) {
    Ti<span class="hljs-string">.API.info(</span> 'Number of <span class="hljs-keyword">children</span>: ' + possibleTagViewArea<span class="hljs-string">.children.length</span> );
    possibleTagViewArea<span class="hljs-string">.remove(</span> possibleTagViewArea<span class="hljs-string">.children[0]</span> );
    Ti<span class="hljs-string">.API.info(</span> 'Deleted child at 0' );
  }</span>
}
</code></pre><p>This seems like it should work. I&#39;m simply removing the child at the zero position until the number of children reaches zero. However, I&#39;m getting errors that almost seem to indicate that there is no rhyme or reason to how the child objects are deleted:</p>
<pre><code class="hljs"><span class="hljs-comment">[INFO]</span> Number <span class="hljs-keyword">of</span> children: 7
<span class="hljs-comment">[INFO]</span> Deleted child at 0
<span class="hljs-comment">[INFO]</span> Number <span class="hljs-keyword">of</span> children: 6
<span class="hljs-comment">[INFO]</span> Deleted child at 0
<span class="hljs-comment">[INFO]</span> Number <span class="hljs-keyword">of</span> children: 5
<span class="hljs-comment">[INFO]</span> Deleted child at 0
<span class="hljs-comment">[INFO]</span> Number <span class="hljs-keyword">of</span> children: 5
<span class="hljs-comment">[WARN]</span> Exception in event callback. {
line = 113;
message = <span class="hljs-string">"*** -<span class="hljs-subst">[NSMutableArray objectAtIndex:]</span>: index 4 beyond bounds <span class="hljs-subst">[0 .. 3]</span>"</span>;
sourceId = 245055424;
sourceURL = <span class="hljs-string">"file://localhost/Users/me/myapp/Resources/tags.js"</span>;
}
</code></pre><p>Notice that the number of children is output as 5 twice in the debug messages. Running this same portion of code yields errors at a different number of children each time. </p>
<p>Any help is greatly appreciated.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 10th 2010, 3:04:40 pm">November 10th 2010</span>
				by <span class='authorname'>Warren Harrison</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>child</span></li>
					
						<li><span class='tagname'>children</span></li>
					
						<li><span class='tagname'>remove</span></li>
					
						<li><span class='tagname'>view</span></li>
					
						<li><span class='tagname'>views</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>10</span> Votes</div>
			<div class="answers"><span>8</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>8 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-142151">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>You might find it easier to wrap the child views in a single view, and remove that from the parent.  Have you tried doing that?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 11th 2010, 2:00:40 pm">November 11th 2010</span>
								by <span class='authorname'>Kevin Whinnery</span><br>
								<a class="icon-bg icon-link" href="question/78311/removing-all-child-objects-from-a-view#answer-142151" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>They are already wrapped in such a containing view. I guess I was thinking there was no real need to remove and recreate the containing view though, just the children. Seems the simplest solution at this point though. Thanks for the tip Kevin.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 11th 2010, 2:04:10 pm">November 11th 2010</span>
											by <span class='authorname'>Warren Harrison</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Tried simply removing the containing view and re-adding it. Of course, its contents still exist, so I have to actually re-instantiate it as a brand new view before re-adding it. Success!</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 11th 2010, 2:09:43 pm">November 11th 2010</span>
											by <span class='authorname'>Warren Harrison</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>How do you reinstantiate the view?  I&#39;m trying to do this and keep getting the same view back.<br>Cheers!</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 8th 2011, 6:01:22 am">December 8th 2011</span>
											by <span class='authorname'>Dooley P</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Nice tip, however not  still not an essential solution. Arrays are one of the most basic features in any language, and besides one year after this question, this is still the case even in iOS.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 10th 2012, 11:24:47 am">February 10th 2012</span>
											by <span class='authorname'>Leo Acevedo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I too would like to know how to re-instantiate a view</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 14th 2012, 10:48:00 am">March 14th 2012</span>
											by <span class='authorname'>David Shepheard</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This method is working very well for me. Thx for sharing :)</p>
<p>Here is my code for re-instantiating the content container view every time:</p>
<pre><code class="hljs"><span class="hljs-comment">// The main scrollview</span>

<span class="hljs-keyword">var</span> scrollview = Ti.UI.createScrollView();

<span class="hljs-comment">// Some content</span>

<span class="hljs-keyword">var</span> rows = [<span class="hljs-string">'row 1'</span>,<span class="hljs-string">'row 2'</span>,<span class="hljs-string">'row 3'</span>];

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getcontents</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// The container for the scrollview contents</span>

    <span class="hljs-keyword">var</span> contentcontainer = Ti.UI.createView();

    <span class="hljs-comment">// Create a bunch of views to put in the container</span>

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> a <span class="hljs-keyword">in</span> rows)
    {
        <span class="hljs-keyword">var</span> row = Ti.UI.createView();
        contentcontainer.add(row);
        row = <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// Add the content container to the scrollview</span>

    scrollview.add(contentcontainer);

    <span class="hljs-comment">// Dereference the local variable</span>

    contentcontainer = <span class="hljs-literal">null</span>;
}

getcontents();

<span class="hljs-comment">// ... later in the code</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanup</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">var</span> scrollview_children = scrollview.getChildren();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> b <span class="hljs-keyword">in</span> scrollview_children)
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">undefined</span>!==scrollview_children[b])
        {
            scrollview.remove(scrollview_children[b]);
        }
    }
}

cleanup();
</code></pre><p>The reason I am setting <code>row = null;</code> and <code>contentcontainer = null;</code> is to dereference the local variable objects from their value objects so that the only reference remaining in memory is the reference created by the .add functions. As soon as you remove the contentcontainer from the scrollview the container and it&#39;s child objects will be garbage collected.</p>
<p>Hope this helps someone :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 19th 2012, 7:23:07 am">December 19th 2012</span>
											by <span class='authorname'>Robin Stoker</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>6</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242049">
				
						<section>
							<p>I think that using the <code>children</code> method inside a <code>remove</code> method is the main problem so I don&#39;t mix them.</p>
<p>Doing it in two steps seems to work for me. Just save first an array and remove all objects later:</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">view</span> &amp;&amp; <span class="hljs-keyword">view</span>.children != undefined)
{    
    <span class="hljs-comment">// Save childrens        </span>
    <span class="hljs-keyword">var</span> removeData = [];
    <span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">view</span>.children.length; i &gt; 0; i--){
        removeData.push(<span class="hljs-keyword">view</span>.children[i - 1]);  
    };

    <span class="hljs-comment">// Remove childrens</span>
    <span class="hljs-keyword">for</span> (i = 0; i &lt; removeData.length; i++){
        <span class="hljs-keyword">view</span>.remove(removeData[i]);
    }
    removeData = null;
};
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 27th 2012, 1:15:27 pm">June 27th 2012</span>
								by <span class='authorname'>Lluis Gerard Lopez</span><br>
								<a class="icon-bg icon-link" href="question/78311/removing-all-child-objects-from-a-view#answer-242049" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This works well</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 26th 2012, 5:35:14 pm">November 26th 2012</span>
											by <span class='authorname'>Andrew Church</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tried al the solutions here (except for Alloy), this is the only one that works for me without giving errors or breaking eventlisteners. (Ti 3.2.0 and iOS6)</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 16th 2013, 5:35:56 pm">December 16th 2013</span>
											by <span class='authorname'>Jasper Pegtel</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Same as Mr. Pegtel here, this is the only one working for me with the 3.2.0 SDK on Android and iOS. Thank you!</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2014, 2:13:02 pm">February 13th 2014</span>
											by <span class='authorname'>Marc Andrew Landles</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>11</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-141111">
				
						<section>
							<p>try looping backwards, i think you will get better results</p>
<pre><code class="hljs"><span class="hljs-component">if( possibleTagViewArea.<span class="hljs-keyword">children</span> ){
  while( possibleTagViewArea<span class="hljs-string">.children.length!=0</span>  ) {
    var len = possibleTagViewArea<span class="hljs-string">.children.length</span>;
    Ti<span class="hljs-string">.API.info(</span> 'Number of <span class="hljs-keyword">children</span>: ' + len );
    possibleTagViewArea<span class="hljs-string">.remove(</span> possibleTagViewArea<span class="hljs-string">.children[len</span> -1 ] );
    Ti<span class="hljs-string">.API.info(</span> 'Deleted child at ' + len -1 );
  }</span>
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 10th 2010, 3:42:05 pm">November 10th 2010</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/78311/removing-all-child-objects-from-a-view#answer-141111" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for your suggestion, but it yields the same results, I&#39;m afraid. It&#39;s as if the next delete is occurring before the length is updated, and so a non-existent index is trying to be deleted. Puzzling.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 11th 2010, 11:45:26 am">November 11th 2010</span>
											by <span class='authorname'>Warren Harrison</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hmm maybe try setting it to null will force the parent to release it for you. I am curious, will have to poke around the code</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 11th 2010, 1:58:29 pm">November 11th 2010</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Try looping backwards without a moving target.  The children.length above shrinks during the loop, so you never remove all of your children.  </p>
<pre><code class="hljs">var viewCount = view.children.<span class="hljs-built_in">length</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">i</span> = <span class="hljs-number">0</span>; <span class="hljs-built_in">i</span> &lt; viewCount; <span class="hljs-built_in">i</span>++) <span class="hljs-cell">{
            view.remove(view.children[((viewCount - <span class="hljs-number">1</span>) -i)]);
        }</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="December 9th 2011, 5:41:47 am">December 9th 2011</span>
											by <span class='authorname'>Jared Alessandroni</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Jared Alessandroni, thanks a lot!!! It work very well!</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 4:28:24 pm">March 2nd 2012</span>
											by <span class='authorname'>Vittorio Sorbera</span>
										</div>
									</li>
								
									<li class="comment">
										<p><h2 id="i-tried-ur-answer-">I tried ur answer </h2>
<p>if( possibleTagViewArea.children ){<br>  while( possibleTagViewArea.children.length!=0  ) {<br>    var len = possibleTagViewArea.children.length;<br>    Ti.API.info( &#39;Number of children: &#39; + len );<br>    possibleTagViewArea.remove( possibleTagViewArea.children[len -1 ] );<br>    Ti.API.info( &#39;Deleted child at &#39; + len -1 );<br>  }<br>}</p>
<hr>
<p>Invalid type passed to function. expected: TiViewProxy, was: NSNull  in -[TiViewProxy remove:] (TiViewProxy.m:129)<br>[WARN] Exception in event callback. {<br>    line = 426;<br>    message = &quot;Invalid type passed to function. expected: TiViewProxy, was: NSNull  in -[TiViewProxy remove:] (TiViewProxy.m:129)&quot;;<br>    sourceId = 261218168;<br>    sourceURL = &quot;file:&#x2F;&#x2F;localhost&#x2F;Users&#x2F;catalists&#x2F;Library&#x2F;Application%20Support&#x2F;iPhone%20Simulator&#x2F;5.0&#x2F;Applications&#x2F;A480EE33-B56E-4E48-9D9F-1730BEA73F76&#x2F;YellowPages.app&#x2F;ui&#x2F;home.js&quot;;<br>}</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 5th 2012, 5:23:06 am">April 5th 2012</span>
											by <span class='authorname'>Umaid Saleem</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>9</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-272602">
				
						<section>
							<p>Since Ti SDK 3.1, you can call  <code>yourView.removeAllChildren( )</code></p>
<p>See: http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.UI.View-method-removeAllChildren</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 16th 2013, 5:48:16 pm">December 16th 2013</span>
								by <span class='authorname'>Kevin Purnelle</span><br>
								<a class="icon-bg icon-link" href="question/78311/removing-all-child-objects-from-a-view#answer-272602" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>6</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247999">
				
						<section>
							<p>Here a possible solution with a recursive function:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeChildrens</span><span class="hljs-params">(objeto)</span> </span>{
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> objeto.children) {
        <span class="hljs-keyword">var</span> child=objeto.children[<span class="hljs-number">0</span>];
        removeChildrens(child);
        objeto.remove(child);
        child=<span class="hljs-literal">null</span>;
    }
}
</code></pre><p><a href="http:&#x2F;&#x2F;gvs-appcelerator.blogspot.com&#x2F;2012&#x2F;09&#x2F;borrar-recursivamente-hijos-de-una.html">http:&#x2F;&#x2F;gvs-appcelerator.blogspot.com&#x2F;2012&#x2F;09&#x2F;borrar-recursivamente-hijos-de-una.html</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 25th 2012, 8:17:26 am">September 25th 2012</span>
								by <span class='authorname'>Gonzalo Valenzuela</span><br>
								<a class="icon-bg icon-link" href="question/78311/removing-all-child-objects-from-a-view#answer-247999" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>It works! THANKS!</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 25th 2013, 9:31:59 am">March 25th 2013</span>
											by <span class='authorname'>Miguel Ángel Castaño Fajardo</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242617">
				
						<section>
							<pre><code class="hljs"><span class="hljs-keyword">if</span>(<span class="hljs-keyword">win</span>.children)
    {
        <span class="hljs-keyword">while</span>(<span class="hljs-keyword">win</span>.children.length != 0)
        {
            <span class="hljs-keyword">var</span> len = <span class="hljs-keyword">win</span>.children.length;
            <span class="hljs-keyword">win</span>.remove( <span class="hljs-keyword">win</span>.children[0] );
        }
    }
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 6th 2012, 9:52:26 am">July 6th 2012</span>
								by <span class='authorname'>Ahmed KLABI</span><br>
								<a class="icon-bg icon-link" href="question/78311/removing-all-child-objects-from-a-view#answer-242617" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-224584">
				
						<section>
							<p>This seems to work a little better:</p>
<pre><code class="hljs"><span class="hljs-keyword">while</span> (thisView.children) {
    <span class="hljs-keyword">try</span> {
        thisView.remove(thisView.children[<span class="hljs-number">0</span>]);
        wait(<span class="hljs-number">10</span>);
    } <span class="hljs-keyword">catch</span> (e) {
    }
}
</code></pre><p>It appears that it takes a finite amount of time to actually remove the child from the view so add a bit of a wait (10 milliseconds worked for me), using a function like this:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wait</span> (<span class="hljs-params">millis</span>) </span>{
    <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    <span class="hljs-keyword">var</span> curDate = <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">do</span> { 
        curDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(); 
    } <span class="hljs-keyword">while</span>(curDate-date &lt; millis);
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 30th 2011, 2:49:25 pm">November 30th 2011</span>
								by <span class='authorname'>Mark Pemburn</span><br>
								<a class="icon-bg icon-link" href="question/78311/removing-all-child-objects-from-a-view#answer-224584" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-259897">
				
						<section>
							<p>what I do  in my app, with Alloy, using underscore.js, is this:</p>
<pre><code class="hljs">_.each($.myScroll.children, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">view</span>) </span>{
        $.myScroll.remove(view);
 });
</code></pre><p>Might not be the fastest but easy to understand.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 3rd 2013, 6:50:02 am">April 3rd 2013</span>
								by <span class='authorname'>Kevin Purnelle</span><br>
								<a class="icon-bg icon-link" href="question/78311/removing-all-child-objects-from-a-view#answer-259897" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
