<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android Push Notification fails although successful subscribing » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android Push Notification fails although successful subscribing</h1>
		</header>
		<section>
			<p>Hi,<br>with this module I&#39;am starting my pushing:  <a href="https:&#x2F;&#x2F;github.com&#x2F;AppWerft&#x2F;CriticalMassHH&#x2F;blob&#x2F;master&#x2F;Resources&#x2F;controls&#x2F;cloudpush.js">ontrols&#x2F;cloudpush.js</a></p>
<p>After sending from web console nothing appears on device and this is the console:</p>
<pre><code class="hljs">Message Id     71030f89-cc4f-40da-bb6f-cdbbba815710
Send Status     Fail
Message Status     Unknown
Channel     Web Console
Device Token     APA91bE2kSnfE7_bYy9TSsN3Eau1<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>JVJFLTsNgXml6bjoJyU6QVn8d77TjDTGkviYl5Bw-bhjt9upI9ZsqJ2EUJIPMD-eES-cEYhJ_mrnK3rXyAEDRiiIXucgsOISgGzHw
Device Type     android
</code></pre><p>On web console I can see: one device is subscribed (my own). I have send to all channels.</p>
<pre><code class="hljs">Web Console         {<span class="hljs-string">"badge"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-string">"alert"</span>:<span class="hljs-string">"Guten Abend!"</span>}     <span class="hljs-number">2014</span>-<span class="hljs-number">05</span>-<span class="hljs-number">23</span>T20:<span class="hljs-number">53</span>:<span class="hljs-number">11.722</span>Z
</code></pre><p>Any ideas? The same issue in developer and in production area. The device retreived successful a deviceToken.</p>
<p>Any ideas?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 23rd 2014, 7:04:15 pm">May 23rd 2014</span>
				by <span class='authorname'>Rainer Schleevoigt</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>push notification</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Here the tabulator &quot;Show subscribed Devices&quot;</p>
<pre><code class="hljs">Subscribed Devices
Channel         <span class="hljs-operator">Type</span>              <span class="hljs-keyword">User</span> <span class="hljs-title">ID</span>      Device Token
[<span class="hljs-string">"cm"</span>]       android(gcm)     <span class="hljs-number">537</span>fb....   APA91bE27_.......
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="May 23rd 2014, 7:22:15 pm">May 23rd 2014</span>
								by <span class='authorname'>Rainer Schleevoigt</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-279001">
				
						<section>
							<p>Hi Rainer Schleevoigt,</p>
<p>You can follow <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Push_Notifications">this link</a> for configuration and send push notifications. And for the sample code you can follow <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;MotiurRahman&#x2F;8766037">this link</a>. Then let me know.</p>
<p>Thanks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 24th 2014, 2:12:25 am">May 24th 2014</span>
								by <span class='authorname'>Motiur Rahman</span><br>
								<a class="icon-bg icon-link" href="question/174487/android-push-notification-fails-although-successful-subscribing.html#answer-279001" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>###But one thing this is very important for push notification.</p>
<p>To create a push notification enabled application:</p>
<ol>
<li>At first you need to create a cloud and cloudpush enable application.</li>
<li>You need a GCM sender ID (project Number) and Google API server key.<br>And you will get <a href="https:&#x2F;&#x2F;console.developers.google.com&#x2F;project">this link</a></li>
</ol>
<p>To configure your app for push notifications:</p>
<ol>
<li>Open My Apps</li>
<li>Find your application in the list of apps and click Manage ACS.</li>
<li>Click Settings option.</li>
<li>In the Android Push Configuration section, enter your Google API key in the Google Cloud Messaging (GCM) API Keyfield and your GCM sender ID (Project Number) in the Google Cloud Messaging (GCM) Sender ID field.<ol>
<li>Click Save Android Push Configuration Changes.</li>
</ol>
</li>
</ol>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 2:26:31 am">May 24th 2014</span>
											by <span class='authorname'>Motiur Rahman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>First time my app was without ACS. Then I have addedacs support. In &quot;Open my Apps&quot; I have seen my app, but without cloud support (after I have added in tiapp.xml).<br>Then I have created a new app in console and have copied all credentails from console to the tiapp.xml.</p>
<p>After this I have inserted all credentials from google in my acs console and after compiling it was possible to register device. In ACS console I can see subscribed devices.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 2:52:07 am">May 24th 2014</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi  Rainer Schleevoigt,</p>
<p>If you think above information is helpful for you, please remember to mark the question as answered so others can learn from it.</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 6:41:24 am">May 24th 2014</span>
											by <span class='authorname'>Motiur Rahman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It doesn&#39;t work. I think the credentials are OK, because I got a valid request token and I can see the subscribed device in webconsole.</p>
<p>If I  send the pn in console I shortly see a red line in answer screen. But I cannot read it. I have recorded as video with my phone and watch the movie with slow motion on mac. I see a message wit a warning about the old procedure &quot;MQTT support for android push notification will expire on December … Please upgrade …&quot;</p>
<p>I think the web console sends with GCM and I&#39;m wondering about this warning.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 9:41:32 am">May 24th 2014</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This is screenshot after submitting of form in web console.<br>I see &quot;Push notification succed&quot; and this warning.In log is status fail.<br><img src="http:&#x2F;&#x2F;familientagebuch.de&#x2F;tideradar&#x2F;pushnot.png" alt="Screenshot"></p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 9:47:33 am">May 24th 2014</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi, now I trued to send from device with this  code:  </p>
<pre><code class="hljs">Cloud.PushNotifications.notify({
    <span class="hljs-string">channel :</span> CHANNEL,
    <span class="hljs-string">friends :</span> <span class="hljs-literal">true</span>,
    <span class="hljs-string">payload :</span> {
        <span class="hljs-string">alert :</span> <span class="hljs-string">'A new bycer with '</span> + Ti.Platform.getModel() + <span class="hljs-string">' has subsribed to criticalmass'</span>,
        <span class="hljs-string">title :</span> <span class="hljs-string">'A new cycler has subscribed.'</span>,
        <span class="hljs-string">badget :</span> <span class="hljs-number">1</span>,
        <span class="hljs-string">vibrate :</span> <span class="hljs-literal">true</span>
    }
}, function(e) {
        <span class="hljs-keyword">if</span> (e.success) {
            console.log(<span class="hljs-string">'Info: push notification succed.'</span>);
            Ti.UI.createNotification({
                <span class="hljs-string">message :</span> <span class="hljs-string">'Andere Radler sind informiert.'</span>
            }).show();
            } <span class="hljs-keyword">else</span> {
            console.log(<span class="hljs-string">'Error:\n'</span> + ((e.error &amp;&amp; e.message) || JSON.stringify(e)));
        }
});
</code></pre><p>On conseol I see only success messages, but nothing comes to the devices.  The full module is here: <a href="https:&#x2F;&#x2F;github.com&#x2F;AppWerft&#x2F;CriticalMassHH&#x2F;blob&#x2F;master&#x2F;Resources&#x2F;controls&#x2F;cloudpush.js">on github</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 10:31:31 am">May 24th 2014</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If I send from device I see this in log of web console:</p>
<p>  <img src="http:&#x2F;&#x2F;familientagebuch.de&#x2F;tideradar&#x2F;pushnot2.png" alt="alt text"></p>
<p><img src="http:&#x2F;&#x2F;familientagebuch.de&#x2F;tideradar&#x2F;pushnot3.png" alt="alt text"></p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 11:16:49 am">May 24th 2014</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Summary of issue.</p>
<ol>
<li>I see valid subscriptings for my devices</li>
<li>if I send via web console or via SDK(REST)-client, then the API sends &#39;success&#39;, but in push notifications console I see: </li>
</ol>
<ul>
<li>Send status: FAIL</li>
<li>Message status: Unknown</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 11:52:57 am">May 24th 2014</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi  Rainer Schleevoigt,</p>
<p>Check your GSM sender ID another name Client ID like as(474346208530) and GSM API key that is  Google API server key and also check internet connection of your device. Then go to the push notification menu and send a push. Here is my <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;MotiurRahman&#x2F;8766037">sample code</a> try it.</p>
<p>Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 12:28:38 pm">May 24th 2014</span>
											by <span class='authorname'>Motiur Rahman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks, I will try. I have used the Client ID and Client ID from my google maps stuff. Is it a problem?</p>
<p>Now it works:</p>
<p>my issue. using of android key, but I have to use a server key with all IP allowed</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2014, 1:30:54 pm">May 24th 2014</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Rainer,</p>
<p>I also have the same problem push notifications are not seen but in the web console :</p>
<p>its saying push notifications succeeded.but nothing is displayed in the device.?<br>I have checked my API key many times and its a server key.<br>How to send push notifications from ACS Console.?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2014, 6:53:12 am">July 8th 2014</span>
											by <span class='authorname'>Aparna M</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-280473">
				
						<section>
							<p>Hello,<br>in the web console of ACS you have  a looging tool too. And in this monitor you will see errors.<br>Your problem: with ACS creds in your tiapp.xml you give creds to CS cloud. It is for communication from device to ACS. Now the ACS must send to google&#x2F;apple. For this the providers need other creds. This is project id and the ServerAPIkey. <strong>Server</strong>: because google must trust ACS. You need this:</p>
<p><img src="http:&#x2F;&#x2F;i.imgur.com&#x2F;Bi3UcP6.png" alt=""></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 8th 2014, 7:57:10 am">July 8th 2014</span>
								by <span class='authorname'>Rainer Schleevoigt</span><br>
								<a class="icon-bg icon-link" href="question/174487/android-push-notification-fails-although-successful-subscribing.html#answer-280473" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>hi,</p>
<p>In logs I got the result as:</p>
<pre><code class="hljs"> Request Logs <span class="hljs-keyword">for</span> classicclub-development
Filter
Request Time     <span class="hljs-number">2014</span>-<span class="hljs-number">06</span>-<span class="hljs-number">30</span>T08:<span class="hljs-number">05</span>:<span class="hljs-number">49.861</span>Z
Request Name     GET /v1/push_notification/get_gcm_sender_id.json
Response Status     <span class="hljs-number">200</span>
Parameters     {<span class="hljs-string">"version"</span>:<span class="hljs-string">"v1"</span>,<span class="hljs-string">"key"</span>:<span class="hljs-string">"xxxxxxxxx"</span>,<span class="hljs-string">"action"</span>:<span class="hljs-string">"get_gcm_sender_id"</span>,<span class="hljs-string">"controller"</span>:<span class="hljs-string">"push_notification"</span>,<span class="hljs-string">"format"</span>:<span class="hljs-string">"json"</span>}
User Agent     Apache-HttpClient/UNAVAILABLE (java <span class="hljs-number">1.4</span>)
Source IP     <span class="hljs-number">101.63</span><span class="hljs-number">.144</span><span class="hljs-number">.83</span>
Response Size     <span class="hljs-number">66</span> bytes
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 8th 2014, 8:45:13 am">July 8th 2014</span>
											by <span class='authorname'>Aparna M</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Its working in one device but not in other device.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2014, 8:51:27 am">July 8th 2014</span>
											by <span class='authorname'>Aparna M</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
