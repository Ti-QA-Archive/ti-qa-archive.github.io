<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>can&#39;t get fireEvent data from web view » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>can&#39;t get fireEvent data from web view</h1>
		</header>
		<section>
			<p>I know there&#39;s a billion posts about this but can&#39;t seem to get anywhere with my particular problem. Pretty straight forward…thx!!</p>
<p>app.js</p>
<pre><code class="hljs">Ti.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);
<span class="hljs-keyword">var</span> win = Ti.UI.createWindow();
<span class="hljs-keyword">var</span> web = Ti.UI.createWebView({
    url : <span class="hljs-string">'http://xxxxxxx'</span>; <span class="hljs-comment">// using localhost for testing</span>
});
win.add(web);
win.open({
    modal : <span class="hljs-literal">true</span>,
    modalTransitionStyle : Ti.UI.iPhone.MODAL_TRANSITION_STYLE_COVER_VERTICAL,
    modalStyle : Ti.UI.iPhone.MODAL_PRESENTATION_FORMSHEET
});
Ti.App.addEventListener(<span class="hljs-string">'sc_oauth_token'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> </span>{
    Ti.API.info(<span class="hljs-string">'event received:'</span> + data); <span class="hljs-comment">// get nothing!</span>
});
</code></pre><p>remote file</p>
<pre><code class="hljs"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">http-equiv</span>=<span class="hljs-value">"Content-type"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"text/html; charset=utf-8"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>SoundCloud Authorization<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="actionscript">
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send_token</span><span class="hljs-params">(t)</span></span>{
                Titanium.App.fireEvent(<span class="hljs-string">'sc_oauth_token'</span>, {token:t});
            }
        </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">body</span> <span class="hljs-attribute">onload</span>=<span class="hljs-value">"send_token('test string')"</span>&gt;</span>page loaded<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre><p>Titanium SDK version: 1.8.1 (01&#x2F;27&#x2F;12 17:31 a24502a)</p>
<p>[INFO] iPhone Device family: ipad</p>
<p>[INFO] iPhone SDK version: 5.0</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 16th 2012, 8:39:28 pm">February 16th 2012</span>
				by <span class='authorname'>Kelly Redd</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>fireevent</span></li>
					
						<li><span class='tagname'>ipad</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Thanks for the help everyone, due to the API that I&#39;m trying to access I have to use a remote file for oauth callback. so i&#39;m using the webview to listen for a url change and regex&#39;ing the query string to get the value i need. nice little hack-a-thon but looks like the way to go.</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 20th 2012, 12:43:44 pm">February 20th 2012</span>
								by <span class='authorname'>Kelly Redd</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-230602">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Assume your html located at <code>Resources&amp;#x2F;html&amp;#x2F;index.html</code></p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> web = Ti.UI.createWebView({
    url : <span class="hljs-string">'html/index.html'</span> <span class="hljs-comment">// using localhost for testing</span>
});

...

Ti.App.addEventListener(<span class="hljs-string">'sc_oauth_token'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    Ti.API.info(<span class="hljs-string">'event received:'</span> + <span class="hljs-built_in">JSON</span>.stringify(data)); <span class="hljs-comment">// get nothing!</span>
});
</code></pre><p>Best,</p>
<p>Minh</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 16th 2012, 9:43:57 pm">February 16th 2012</span>
								by <span class='authorname'>Minh Nguyen</span><br>
								<a class="icon-bg icon-link" href="../../question/132293/cant-get-fireevent-data-from-web-view.html#answer-230602" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>For security reason, Titanium prevent remote URLs to have access to API directly. Check <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;8991&#x2F;webview-usage-guideline.html#answer-20341">here</a>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 10:02:45 pm">February 16th 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>although i was not able to use any suggested solutions i&#39;m marking this as the best answer b&#x2F;c the comment above gets at the core of my problem.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2012, 12:46:14 pm">February 20th 2012</span>
											by <span class='authorname'>Kelly Redd</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>However…you can inject the same javascript code that Titanium uses into your remote html file.  Then you have access to the Ti object and can speak to the device.  Haven&#39;t tried this for the iPhone, but it works great for Android.  In the titanium sdk you are using just find the &#39;bindings.min.js&#39; file and include it in any remote html file.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 1st 2012, 9:50:40 pm">April 1st 2012</span>
											by <span class='authorname'>Brian Knorr</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Brian Knorr - where is bindings.min.js?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 21st 2012, 1:21:33 pm">December 21st 2012</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-230603">
				
						<section>
							<p>I tested your snippet, with the web view html source in a localhost-served test.html page, as you described  your scenario (rather than in Resources folder as suggested by Minh) and it seems the fired event does not get to the listener.. no clues for that apart the <em>remoteness</em> of the html source…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 16th 2012, 9:57:45 pm">February 16th 2012</span>
								by <span class='authorname'>patrick demarta</span><br>
								<a class="icon-bg icon-link" href="../../question/132293/cant-get-fireevent-data-from-web-view.html#answer-230603" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-230624">
				
						<section>
							<p>It doesn&#39;t support if the html content is on remote location, only work if it&#39;s local. What you can do is get the html content via HTTPclient first then assign that as webview html property. </p>
<pre><code class="hljs">
....<span class="hljs-keyword">create</span> webview ....
<span class="hljs-keyword">then</span> 
<span class="hljs-keyword">var</span> c = Titanium.Network.createHTTPClient();
 c.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
    <span class="hljs-comment">{
       html = this.responseText;              
       webview.html = html;
   }</span>
 <span class="hljs-title">c</span>.<span class="hljs-title">open</span><span class="hljs-params">(<span class="hljs-string">'GET'</span>,remote_url)</span>;</span>
 c.send();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 17th 2012, 3:22:32 am">February 17th 2012</span>
								by <span class='authorname'>Daniel Lim</span><br>
								<a class="icon-bg icon-link" href="../../question/132293/cant-get-fireevent-data-from-web-view.html#answer-230624" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-230648">
				
						<section>
							<p>actually i was also facing the same problem before but i found the solution..<br>you cannot use fireEvent inside the javascript code but if you can convert that javascript into jQuery then you can handle fireEvent as well as addEventListner inside jQuery..</p>
<p>hope it works</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 17th 2012, 7:53:10 am">February 17th 2012</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="../../question/132293/cant-get-fireevent-data-from-web-view.html#answer-230648" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
