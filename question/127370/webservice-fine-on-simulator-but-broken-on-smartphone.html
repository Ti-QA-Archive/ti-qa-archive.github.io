<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Webservice fine on Simulator, but broken on smartphone Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Webservice fine on Simulator, but broken on smartphone</h1>
		</header>
		<section>
			<p>Hello, i am trying to establish a connection between the computer and the mobile phone using webservice. When i try my code on the simulatur everthing works fine,<br>that means the iphone post a request and get a result from the webservice. </p>
<p>But the problem comes up when i deploy it on the iphone in real.<br>Then i can also post a request, and this request is succesfully consumed by the webservice, and the webservice answer correctly to this message.<br>But the reply seems to be ignored by the iphone. Do you know or maybe can think of what might be wrong?</p>
<p>[ps. it seems like the iphone is receiving something, because when i set the timeout<br>to a very long period, the request is made only once when the webservice is alive, otherwise when the webservice is off it continues spaming post. But the onload method seems never to be called. ]<br>mfg Andreas He.n</p>
<pre><code class="hljs">var _endpoint =  <span class="hljs-string">":62078/HochschulAppService.asmx"</span>;  
var _ip = <span class="hljs-string">"92.X.Y.Z"</span>;

loader.open(<span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span>, <span class="hljs-string">"http://"</span>+ _ip  +_endpoint);
      loader.setRequestHeader(<span class="hljs-string">"Content-Type"</span>,<span class="hljs-string">"text/xml;charset=\"</span>utf-<span class="hljs-number">8</span>\<span class="hljs-string">""</span>);

    loader.setRequestHeader(<span class="hljs-string">"SOAPAction"</span> , (<span class="hljs-string">"http://tempuri.org/"</span> + methodName));
      loader.setRequestHeader( <span class="hljs-string">"Expect"</span>, <span class="hljs-string">"100-continue"</span>);
      //loader.setRequestHeader(<span class="hljs-string">"Soapaction"</span>, _packagename);

     // loader.setRequestHeader(<span class="hljs-string">"Accept"</span>,<span class="hljs-string">"text/xml, multipart/related, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"</span>);


      body =  <span class="hljs-string">"&lt;name&gt;"</span>+ body+ <span class="hljs-string">"&lt;/name&gt;"</span>;
      sendit =  <span class="hljs-string">"&lt;?xml version=\"</span><span class="hljs-number">1</span>.<span class="hljs-number">0</span>\<span class="hljs-string">" encoding=\"</span>UTF-<span class="hljs-number">8</span>\<span class="hljs-string">"?&gt;\n"</span>;  
     // sendit = sendit + <span class="hljs-string">"&lt;S:Envelope xmlns:S=\"</span>http://schemas.xmlsoap.org/soap/envelope/\<span class="hljs-string">"&gt;\n&lt;S:Body&gt;\n&lt;ns2:"</span> +methodName  + <span class="hljs-string">" xmlns:ns2=\"</span>http://mypackage/\<span class="hljs-string">"&gt;\n&lt;name&gt;"</span>+ body+ <span class="hljs-string">"&lt;/name&gt;\n&lt;/ns2:"</span>+ methodName +<span class="hljs-string">"&gt;\n&lt;/S:Body&gt;\n&lt;/S:Envelope&gt;"</span>;
     sendit = sendit + <span class="hljs-string">"&lt;soap:Envelope xmlns:soap=\"</span>http://schemas.xmlsoap.org/soap/envelope/\<span class="hljs-string">" xmlns:xsd=\"</span>http://www.w3.org/<span class="hljs-number">2001</span>/XMLSchema\<span class="hljs-string">" xmlns:xsi=\"</span>http://www.w3.org/<span class="hljs-number">2001</span>/XMLSchema-instance\<span class="hljs-string">"&gt;\n&lt;soap:Body&gt;\n&lt;"</span> +methodName  + <span class="hljs-string">" xmlns=\"</span>http://tempuri.org/\<span class="hljs-string">"&gt;\n"</span> 
    + body+  <span class="hljs-string">"\n&lt;/"</span>+ methodName +<span class="hljs-string">"&gt;\n&lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;"</span>;
      sendit = sendit.substr(<span class="hljs-number">0</span>, (sendit.length));
 loader.onload = function(){
    // i would be happy to see this message on the mobile phone
        // seems only to work with simulator 
          alert(<span class="hljs-string">"received"</span>);              

     };
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 26th 2011, 12:26:21 am">October 26th 2011</span>
				by <span class='authorname'>siehe oben</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>webservice, c#,respo</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Can you test to see if any other network events are being fired at this time? Set up functions for <code>onerror</code> and <code>onreadystatechange</code> to see if you can get any additional insight into the issue. The details of those functions can be found in the API docs: <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.Network.HTTPClient-object.html">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.Network.HTTPClient-object.html</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="October 26th 2011, 10:56:47 am">October 26th 2011</span>
								by <span class='authorname'>Tony Lukasavage</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-221893">
				
						<section>
							<p>I don&#39;t know why this isn&#39;t working on the iPhone, but the way to find out is to put error handling into your code.</p>
<p>Firstly put try catch statements around your open and send this will then tell you if these are causing an issue. Then add loader.onerror function, this will capture any invalid returned requests.</p>
<p>Then you will be able to see exactly where it is falling over and if you output your response code and messages it should give you more of a clue.</p>
<p>Hope this helps.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 26th 2011, 6:34:39 am">October 26th 2011</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/127370/webservice-fine-on-simulator-but-broken-on-smartphone.html#answer-221893" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-221929">
				
						<section>
							<p>The request is incoming , and leaving the smartphone. I am using soap monitor to analyze it (picture)<br>http:&#x2F;&#x2F;imageshack.us&#x2F;f&#x2F;828&#x2F;anium.jpg&#x2F;<br>[on router 62078 is public and forward it to the local 4040, soap monitor listen on the local 4040 and forward it to the local 62078. This configuration work with simulator, with real smartphone only in one way]</p>
<pre><code class="hljs">loader.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-comment">//this.response is always null on the device</span>
        alert(<span class="hljs-string">"got status "</span> + <span class="hljs-keyword">this</span>.status + <span class="hljs-string">': '</span> + <span class="hljs-keyword">this</span>.response +<span class="hljs-string">': '</span> + <span class="hljs-keyword">this</span>.responseText);
        alert(<span class="hljs-string">"got "</span> + <span class="hljs-keyword">this</span>.getResponseHeader(<span class="hljs-string">'xyz'</span>));

    };

loader.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{

  alert(<span class="hljs-string">"status"</span> + <span class="hljs-keyword">this</span>.status);

};
</code></pre><p>The onerror function  is called after the timeout of 25seconds, so it seems like the packet is lost anywhere on the way or the smartphone doesn&#39;t accept for no reason.<br>Onreadystate &#39;this.status&#39; is always 0 at smartphone, like on the simulator if i turn off the webservice, meaning the smartphone never receives the package.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 26th 2011, 1:53:12 pm">October 26th 2011</span>
								by <span class='authorname'>siehe oben</span><br>
								<a class="icon-bg icon-link" href="question/127370/webservice-fine-on-simulator-but-broken-on-smartphone.html#answer-221929" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
