<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Window open() vs NavigationGroup open() strangeness » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Window open() vs NavigationGroup open() strangeness</h1>
		</header>
		<section>
			<p>Hello, I am porting an existing Android app to iPhone, and want to incorporate the basic iPhone navigation scheme, using iPhone.NavigationGroup. I am starting at the root window of the application. If using a basic window.open(), all is well. Using examples I have found, I believe I am creating the elements all correctly, but when the next window is opened using NavGroup.open() instead of window.open(), I get errors like:</p>
<pre><code class="hljs"><span class="hljs-attr_selector">[WARN]</span> <span class="hljs-attr_selector">[object TiUIScrollView]</span> has an <span class="hljs-attribute">auto</span> <span class="hljs-attribute">height</span> value of 0, meaning this view may not be <span class="hljs-value">visible</span>.
<span class="hljs-attr_selector">[WARN]</span> <span class="hljs-attr_selector">[object TiUIScrollView]</span> has an <span class="hljs-attribute">auto</span> <span class="hljs-attribute">height</span> value of 0, meaning this view may not be <span class="hljs-value">visible</span>.
<span class="hljs-attr_selector">[WARN]</span> <span class="hljs-attr_selector">[object TiUIView]</span> has an <span class="hljs-attribute">auto</span> <span class="hljs-attribute">height</span> value of 0, meaning this view may not be <span class="hljs-value">visible</span>.
<span class="hljs-attr_selector">[WARN]</span> <span class="hljs-attr_selector">[object TiUIView]</span> has an <span class="hljs-attribute">auto</span> <span class="hljs-attribute">height</span> value of 0, meaning this view may not be <span class="hljs-value">visible</span>.
etc, etc
</code></pre><p>followed by …</p>
<pre><code class="hljs">Mon Mar <span class="hljs-number">12</span> <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">50</span> macbook-air.local APP[<span class="hljs-number">13448</span>] &lt;Error&gt;: CGContextConcatCTM: invalid context <span class="hljs-number">0x0</span>
Mon Mar <span class="hljs-number">12</span> <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">50</span> macbook-air.local APP[<span class="hljs-number">13448</span>] &lt;Error&gt;: CGContextSetInterpolationQuality: invalid context <span class="hljs-number">0x0</span>
Mon Mar <span class="hljs-number">12</span> <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">50</span> macbook-air.local APP[<span class="hljs-number">13448</span>] &lt;Error&gt;: CGContextDrawImage: invalid context <span class="hljs-number">0x0</span>
Mon Mar <span class="hljs-number">12</span> <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">50</span> macbook-air.local APP[<span class="hljs-number">13448</span>] &lt;Error&gt;: CGBitmapContextCreateImage: invalid context <span class="hljs-number">0x0</span>
Mon Mar <span class="hljs-number">12</span> <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">50</span> macbook-air.local APP[<span class="hljs-number">13448</span>] &lt;Error&gt;: CGContextConcatCTM: invalid context <span class="hljs-number">0x0</span>
etc, etc
</code></pre><p>The window seems to open but it is transparent, with the elements of both the root and child windows visible, with the contents of the root window superimposed on top of the child window. For the life of me I can&#39;t see what is wrong with any of the code. And it all works fine with window.open().</p>
<p>The scrollview and view referenced, are created just the same as with window.open() (which works fine).</p>
<p>Any ideas?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 12th 2012, 2:46:36 pm">March 12th 2012</span>
				by <span class='authorname'>Hal Burgiss</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>navigation</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>You should post some sample code to demonstrate the issue so that people can help.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 13th 2012, 12:44:30 am">March 13th 2012</span>
								by <span class='authorname'>Minh Nguyen</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>OK, thanks. Its scattered about but here it is in sequence …</p>
<pre><code class="hljs"><span class="hljs-comment">// app.js</span>
<span class="hljs-comment">// The Root window of the App ///////////</span>
<span class="hljs-keyword">var</span> rootwin = Ti.UI.createWindow({
    backgroundImage:<span class="hljs-string">'/images/Default.jpg'</span>,
    exitOnClose: <span class="hljs-keyword">true</span>, <span class="hljs-comment">//required for android (this window only)</span>
    navBarHidden: <span class="hljs-keyword">true</span>,
    barColor: <span class="hljs-string">'#300'</span>
});


<span class="hljs-keyword">if</span> ( ! _isAndroid ) {
    <span class="hljs-comment">// for iOS nav group</span>
    <span class="hljs-keyword">var</span> iOSwin = Ti.UI.createWindow({
        backgroundImage: <span class="hljs-string">'/images/Default.jpg'</span>,
        title: <span class="hljs-string">'APP'</span>
    });
    <span class="hljs-keyword">var</span> iOSnav = Ti.UI.iPhone.createNavigationGroup({
        <span class="hljs-built_in">window</span>:iOSwin
    });
    rootwin.add( iOSnav );
}
rootwin.open();
</code></pre><p>…</p>
<pre><code class="hljs">Observe.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> observeWin = app.newWindow({
        url:<span class="hljs-string">'/Observe.js'</span>,
        title: <span class="hljs-string">'Observe a Student'</span>
    });
    app.info(<span class="hljs-string">'Opening Observation Win'</span>);

    <span class="hljs-keyword">if</span> ( ! _isAndroid ) {
        iOSnav.open(observeWin);
    } <span class="hljs-keyword">else</span> {
        observeWin.open();
    }
});
</code></pre><p>…</p>
<pre><code class="hljs">// Observe.js
var win = Ti.UI.currentWindow;

// <span class="hljs-operator"><span class="hljs-keyword">create</span> the <span class="hljs-keyword">main</span> <span class="hljs-keyword">view</span> <span class="hljs-keyword">for</span> this screen
// app.<span class="hljs-keyword">view</span> creates a scollview <span class="hljs-keyword">and</span> attaches it <span class="hljs-keyword">to</span> <span class="hljs-string">'win'</span>
<span class="hljs-keyword">var</span> mainView = app.<span class="hljs-keyword">view</span>();</span>

// various labels, dialogs, etc happen here, attached to mainView.
</code></pre><p>…</p>
<pre><code class="hljs"><span class="hljs-comment">// library code to implement the view</span>

app.view = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( args <span class="hljs-comment">/* must be object, if specified */</span> )</span> </span>{
    <span class="hljs-comment">// these are applied to the non-scrollable view:</span>
    <span class="hljs-keyword">var</span> _defaults = {
        width:<span class="hljs-string">'100%'</span>,
            height:<span class="hljs-string">'auto'</span>,
            layout:<span class="hljs-string">'vertical'</span>,
            top:<span class="hljs-number">0</span>
    }

    <span class="hljs-comment">// set up a scrollable view for this screen.</span>
    <span class="hljs-keyword">var</span> scrollView = Ti.UI.createScrollView({
            contentWidth: semp.SCREEN_WIDTH,
        contentHeight:<span class="hljs-string">'auto'</span>,
        showVerticalScrollIndicator:<span class="hljs-literal">true</span>,
        showHorizontalScrollIndicator:<span class="hljs-literal">true</span>,
            top:<span class="hljs-number">0</span>,
        zindex:<span class="hljs-number">0</span>
        }
    );
    <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> The win variable needs to be explicitly set beforehand.</span>
    win.add(scrollView);

    <span class="hljs-keyword">if</span> ( <span class="hljs-literal">null</span> != args &amp;&amp; <span class="hljs-keyword">typeof</span> args != <span class="hljs-string">'object'</span> ) args = {};
    <span class="hljs-comment">// over-ride _defaults with passed args, if any</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attrname <span class="hljs-keyword">in</span> args) { _defaults[attrname] = args[attrname]; }

    <span class="hljs-keyword">var</span> _view = Ti.UI.createView(_defaults);
    scrollView.add( _view);
    <span class="hljs-keyword">return</span> _view;
}
</code></pre><p>All of this &quot;works&quot; to a point. The problem is that the window opened by the iOS code is superimposed on the rootwin. All the components of each are visibible (and clickable). I assume the errors posted before are all related to that.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 13th 2012, 10:27:35 am">March 13th 2012</span>
								by <span class='authorname'>Hal Burgiss</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Please now ignore all the error messages quoted in the first post. These are apparently totally coincidental and have nothing to do with the real problem. I can make them go away by setting fixed heights for both the view and scrollView elements. But this does not change the issue of one window superimposed on another (which only happens when using iphone navigationGroup.open()).</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 13th 2012, 12:57:22 pm">March 13th 2012</span>
								by <span class='authorname'>Hal Burgiss</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-233172">
				
						<section>
							<p>Pilot error (AGAIN!!). When converting this to iPhone-ism, the original code attached all the UI elements to the first window (rootwin in my code). For iPhone this is wrong, and should be the iOSwin (in my code). I handle that with an &#39;if&#39; now. Thanks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 13th 2012, 2:47:34 pm">March 13th 2012</span>
								by <span class='authorname'>Hal Burgiss</span><br>
								<a class="icon-bg icon-link" href="question/133664/window-open-vs-navigationgroup-open-strangeness.html#answer-233172" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
