<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>help parsing json (with alloy) » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>help parsing json (with alloy)</h1>
		</header>
		<section>
			<p>who can help me parse this, so that i can display the name from FB to my profile page.</p>
<p>i am working with alloy. this is what i got so far:</p>
<p>profile.js:</p>
<p>var facebook = Alloy.Globals.Facebook;</p>
<p>var url = &#39;https:&#x2F;&#x2F;graph.facebook.com&#x2F;&#39;+ Ti.Facebook.uid + &#39;&#x2F;name?access_token=&#39;;</p>
<p>var xhr = Ti.Network.createHTTPClient({<br>        onload: function(e) {<br>            var response = JSON.parse(this.responseText);<br>             var userName = response.e;<br>            Ti.API.info(&quot;username&quot; + e);</p>
<pre><code class="hljs">        userName = Ti.UI.createLabel({
            text:response.e
        })
    }    
});    

xhr.open(<span class="hljs-string">"<span class="hljs-keyword">GET</span>"</span>, url);
xhr.send();
</code></pre><p>in my console i get the folllowing:<br>[INFO]: username [object Object]</p>
<p>i have no idea what i am doing wrong or why it will not show the name</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 6th 2013, 2:22:44 pm">July 6th 2013</span>
				by <span class='authorname'>Napp Dev</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>facebook</span></li>
					
						<li><span class='tagname'>json</span></li>
					
						<li><span class='tagname'>name</span></li>
					
						<li><span class='tagname'>parse</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I have just realised this is a duplicate of your own question you asked just 2 hours ago;</p>
<ul>
<li><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;154540&#x2F;showing-username-from-fb--alloy">showing username from FB + alloy</a></li>
</ul>
<p>Do not do this again - as you can see from below you have had two answers here on this question, your other questions would also have had the same response.  Be patient and you will be answered - remember it is a weekend and this is a community.</p>
<p>You are likely to have questions ignored in the future if you repeat post questions and especially if so close to together.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 6th 2013, 3:29:34 pm">July 6th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Please learn how to paste code samples into your question it will help you get answered more quickly and help use work out what your code actually means - right now this code is hard to work out - more code would have been even harder to decipher.</p>
<p>Quick tip; When you add code snippets or logs always add 3 <strong>~</strong> on a blank line above your code and another 3 <strong>~</strong> below you code on another blank line - you will see the difference when you preview the comment. (you are not being told off)</p>
<p>Inserted code should look like;</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">something</span><span class="hljs-params">(obj)</span> </span>{
    <span class="hljs-comment">// do something</span>
}
alert(<span class="hljs-string">'Hello'</span>);
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="July 6th 2013, 3:31:26 pm">July 6th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>ok i am really sorry about that. it will not happen again</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 6th 2013, 3:34:50 pm">July 6th 2013</span>
								by <span class='authorname'>Napp Dev</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-265494">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>Assuming you have successfully logged into the facebook API and the data it returns is valid then accessing the node <strong>e</strong> (which I do not believe exists) seems incorrect.</p>
<p>Change this code;</p>
<pre><code class="hljs"><span class="hljs-component">userName = Ti.UI.createLabel({
    text:response<span class="hljs-string">.e</span>
}</span>)
</code></pre><p>To the following;</p>
<pre><code class="hljs"><span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info(<span class="hljs-symbol">'response</span> <span class="hljs-class"><span class="hljs-keyword">object</span>:</span> ' + <span class="hljs-type">JSON</span>.stringify(response));
userName = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createLabel({
    text: response.name
});
</code></pre><p>If your access of the API is correct then you should get a value now - although you may need to tweak <strong>name</strong> as required so you get the correct field.</p>
<p>You should also get a string of the response in the console.  If your call is correct then you should see all the returned json nodes you can access, if it failed then you will see error details - so you may determine what you got wrong.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 6th 2013, 3:24:27 pm">July 6th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/154542/help-parsing-json-with-alloy.html#answer-265494" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@ Malcolm</p>
<p>thanks again for the help and patience.</p>
<p>the response object returns the necessary data, but will not display on screen, althought i did create a label and added –&gt; text: response.name</p>
<p>any idea what i am doing wrong</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2013, 3:52:32 pm">July 6th 2013</span>
											by <span class='authorname'>Napp Dev</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Please copy the console entry after <strong>response object:</strong> here so I can take a look at it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2013, 3:58:37 pm">July 6th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>the output of my console:</p>
<p>˜˜˜</p>
<p>[INFO] :   response object: {&quot;name&quot;:&quot;xxxxxxxxx&quot;,&quot;id&quot;:&quot;xxxxxxxxxxxx&quot;}</p>
<p>˜˜˜</p>
<p>i blanked out my name and id</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2013, 5:04:17 pm">July 6th 2013</span>
											by <span class='authorname'>Napp Dev</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That should have worked then as the object has <strong>name</strong> and the object is referenced by the variable <strong>response</strong>.</p>
<p>I would make sure the <strong>userName</strong> is actually being added to the window.</p>
<p>To rule out he object being wrong change the code (for this test only);</p>
<pre><code class="hljs">userName = Ti.UI.createLabel({
    <span class="hljs-type">text</span>: 'Can you see <span class="hljs-keyword">me</span>'
});
</code></pre><p>If you cannot see this then the label is not added to the window (or view).</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2013, 5:24:29 pm">July 6th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i am working with alloy so how to add a label within a function in js file</p>
<p>btw, you are right i the label is not showing when i change the text to &quot;can you see me&quot;</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2013, 5:31:34 pm">July 6th 2013</span>
											by <span class='authorname'>Napp Dev</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Assuming this in the in the index file then;</p>
<pre><code class="hljs">$.<span class="hljs-keyword">index</span>.<span class="hljs-keyword">add</span>(userName);
</code></pre><p>If this is not the index file then change <strong>index</strong> to whichever file prefix this code is running inside.  If this view has an id on the main window replace <strong>window</strong> for whatever id value you have set.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2013, 5:44:45 pm">July 6th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanks a million times !!!!</p>
<p>i am a real noob when it comes to titanium and i learn with the Q&amp;A and google</p>
<p>i really appreciate your help and patience Malcolm, cheers :-)</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2013, 5:51:26 pm">July 6th 2013</span>
											by <span class='authorname'>Napp Dev</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265495">
				
						<section>
							<p>So, you are parsing the returned data into a JSON object stored in <code>response</code></p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> response = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
</code></pre><p>Now, you assign userName to response.e - Are you sure the JSON object has a property called <code>e</code> ?</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> userName</span> = response.e;
</code></pre><p>And now you are trying to log to console a variable <code>e</code> that is the raw object passed into the <code>onload</code> event</p>
<pre><code class="hljs"> <span class="hljs-tag">Ti</span><span class="hljs-class">.API</span><span class="hljs-class">.info</span>("<span class="hljs-tag">username</span>" + <span class="hljs-tag">e</span>);
</code></pre><p>So, i&#39;m guessing you really want to see what came back in <code>this.responseText</code> ?</p>
<p>So, just do</p>
<pre><code class="hljs">
 <span class="hljs-tag">Ti</span><span class="hljs-class">.API</span><span class="hljs-class">.info</span>(<span class="hljs-tag">JSON</span><span class="hljs-class">.stringify</span>(<span class="hljs-tag">JSON</span><span class="hljs-class">.parse</span>(<span class="hljs-tag">this</span><span class="hljs-class">.responseText</span>));
</code></pre><p>Bur if you want to see what came back in <code>e</code> then just</p>
<pre><code class="hljs"> <span class="hljs-tag">Ti</span><span class="hljs-class">.API</span><span class="hljs-class">.info</span>(<span class="hljs-tag">JSON</span><span class="hljs-class">.stringify</span>(<span class="hljs-tag">e</span>));
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 6th 2013, 3:26:35 pm">July 6th 2013</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="question/154542/help-parsing-json-with-alloy.html#answer-265495" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
