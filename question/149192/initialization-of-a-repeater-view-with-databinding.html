<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Initialization of a repeater view with databinding Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Initialization of a repeater view with databinding</h1>
		</header>
		<section>
			<p>The problem is as follows. I have a collection (table document) that is shared across my app. Navigation across the app works by opening a window when navigating to another screen and closing it when the user clicks the back button. This means there can be potentially many windows open on top of each other. A lot of windows contain repeater view from the document table (all with a filter function).</p>
<p>The problem is, when a window opens, the repeater view doesn&#39;t get initialized by itself. Below is one of the XML view I&#39;m using.</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">ScrollView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"documentsContainer"</span> <span class="hljs-attribute">layout</span>=<span class="hljs-value">"vertical"</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"document"</span> <span class="hljs-attribute">dataFilter</span>=<span class="hljs-value">"filterDocuments"</span> <span class="hljs-attribute">onSingletap</span>=<span class="hljs-value">"documentRowClicked"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"indexdocumentrow"</span> <span class="hljs-attribute">notClickable</span>=<span class="hljs-value">"0"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">ScrollView</span>&gt;</span>
</code></pre><p>The autogenerated initialization code for this piece looks like this:</p>
<pre><code class="hljs">    <span class="hljs-keyword">var</span> __alloyId31 = function(<span class="hljs-keyword">e</span>) {
        <span class="hljs-keyword">var</span> models = filterDocuments(Alloy.Collections.document), children = $.__views.documentsContainer.children;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> <span class="hljs-keyword">d</span> = children.length - 1; <span class="hljs-keyword">d</span> &gt;= 0; <span class="hljs-keyword">d</span>--) $.__views.documentsContainer.remove(children[<span class="hljs-keyword">d</span>]);
        len = models.length;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = 0; i &lt; len; i++) {
            <span class="hljs-keyword">var</span> __alloyId28 = models[i];
            __alloyId28.__transform = {};
            <span class="hljs-keyword">var</span> __alloyId30 = Alloy.createController(<span class="hljs-string">"indexdocumentrow"</span>, {
                notClickable: <span class="hljs-string">"0"</span>,
                id: <span class="hljs-string">"__alloyId29"</span>,
                <span class="hljs-label">$model</span>: __alloyId28
            });
            __alloyId30.setParent($.__views.documentsContainer);
        }
    };
    Alloy.Collections.document.<span class="hljs-keyword">on</span>(<span class="hljs-string">"fetch destroy change add remove reset"</span>, __alloyId31);
</code></pre><p>To have this repeater view initialize, I need to either fetch the collection (which is already done at the beginning of the app) or fire one of the events from the last line, which is more suitable and which is what I do:</p>
<pre><code class="hljs"><span class="hljs-tag">Alloy</span><span class="hljs-class">.Collections</span><span class="hljs-class">.document</span><span class="hljs-class">.trigger</span>("<span class="hljs-tag">change</span>");
</code></pre><p>The problem now is, when I fire this event, all listeners in all open windows get this event. This means that all views in every window are first getting removed and then initialized again. This leads to enormous lagging.</p>
<p>It is so that the document collection is more or less static, so I can get away with just calling $.destroy() right after initializing the repeater object to remove the listeners. But what would be the right way to initialize the repeater views, so that it doesn&#39;t lead to all the app reinitializing itself?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 5th 2013, 1:40:45 pm">March 5th 2013</span>
				by <span class='authorname'>Andrey Chirikba</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>databinding</span></li>
					
						<li><span class='tagname'>intialization</span></li>
					
						<li><span class='tagname'>repeater</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-258131">
				
						<section>
							<p>To prevent that from happening, you&#39;ll likely need to use an instance of the collection for each controller, rather than having them all reference the same global controller. That said, perhaps there should be a means of &quot;pausing&quot; binding so that it doesn&#39;t impact non-visible parts of your app, then provide a means of un-pausing it when you return to those non-visible parts. Perhaps you can submit a feature request ticket to the <a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC">Titanium Community Jira project</a>. Make sure to give it the &quot;alloy&quot; label.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 5th 2013, 3:53:15 pm">March 5th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="question/149192/initialization-of-a-repeater-view-with-databinding.html#answer-258131" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
