<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Pinch to zoom in iOS Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Pinch to zoom in iOS</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I am trying the following code using 3.0.2GA, iOS 6 simulator and the pinch to zoom feature is working as expected, but there is an issue in the UI. Below is the code:</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({ <span class="hljs-string">backgroundColor:</span> <span class="hljs-string">'#000'</span> });

var image = Ti.UI.createImageView({
    <span class="hljs-string">left :</span> <span class="hljs-number">0</span>, <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
<span class="hljs-label">    image:</span> <span class="hljs-string">'waterfall.jpg'</span>,
<span class="hljs-label">    width:</span> Ti.UI.SIZE, <span class="hljs-string">height:</span> Ti.UI.SIZE
});

var scroll = Ti.UI.createScrollView({
    <span class="hljs-string">left :</span> <span class="hljs-number">0</span>, <span class="hljs-string">top :</span> <span class="hljs-number">0</span>, <span class="hljs-string">width :</span> <span class="hljs-number">300</span>, <span class="hljs-string">height :</span> <span class="hljs-number">300</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'red'</span>,
<span class="hljs-label">    contentHeight:</span> <span class="hljs-number">300</span>, <span class="hljs-string">contentWidth:</span> <span class="hljs-number">300</span>,
<span class="hljs-label">    maxZoomScale:</span> <span class="hljs-number">2</span>, <span class="hljs-string">minZoomScale:</span> <span class="hljs-number">1</span>, <span class="hljs-string">zoomScale:</span> <span class="hljs-number">1</span>,
    <span class="hljs-string">disableBounce :</span> <span class="hljs-literal">true</span>
});
scroll.add(image);
win.add(scroll);
win.open();
</code></pre><p>After I launch the application, I can see an additional red space below image which increase as I do pinch to zoom. I have taken a 1600x1200 image for the example. Can someone please try out the code and let me know where the issue is in the code.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 28th 2013, 2:32:01 pm">March 28th 2013</span>
				by <span class='authorname'>Soumya Kanti Kar</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>scrollview</span></li>
					
						<li><span class='tagname'>zoom</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-259564">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Here&#39;s a tweaked version of your code:</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({ <span class="hljs-string">backgroundColor:</span> <span class="hljs-string">'#000'</span> });

var image = Ti.UI.createImageView({
    <span class="hljs-string">left :</span> <span class="hljs-number">0</span>, <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
<span class="hljs-label">    image:</span> <span class="hljs-string">'waterfall.jpg'</span>,
<span class="hljs-label">    width:</span> <span class="hljs-number">400</span>, <span class="hljs-string">height:</span> <span class="hljs-number">300</span>
});
var scroll = Ti.UI.createScrollView({
    <span class="hljs-string">left :</span> <span class="hljs-number">0</span>, <span class="hljs-string">top :</span> <span class="hljs-number">0</span>, <span class="hljs-string">width :</span> <span class="hljs-number">400</span>, <span class="hljs-string">height :</span> <span class="hljs-number">300</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'red'</span>,
<span class="hljs-label">    contentHeight:</span> <span class="hljs-number">300</span>, <span class="hljs-string">contentWidth:</span> <span class="hljs-number">400</span>,
<span class="hljs-label">    maxZoomScale:</span> <span class="hljs-number">2</span>, <span class="hljs-string">minZoomScale:</span> <span class="hljs-number">1</span>, <span class="hljs-string">zoomScale:</span> <span class="hljs-number">1</span>,
    <span class="hljs-string">disableBounce :</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">    verticalBounce:</span> <span class="hljs-literal">false</span>
});
scroll.add(image);
win.add(scroll);
win.open();
</code></pre><p>Notice that I&#39;m setting the height&#x2F;width of the image to match that of the scrollview. I&#39;ve also added the verticalBounce: false attribute to that view. The downside is that the user can scroll past the max&#x2F;min zoom scales, you&#39;ll see the red until they release their fingers. Then, the image will bounce back to the max&#x2F;min zoom.</p>
<p>So, another approach would be to manually handle the pinch event (rather than relying on the scrollview to do it for you). Like this:</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({ backgroundColor: <span class="hljs-string">'#000'</span> });

var <span class="hljs-built_in">image</span> = Ti.UI.createImageView({
    left : <span class="hljs-number">0</span>, top : <span class="hljs-number">0</span>,
    <span class="hljs-built_in">image</span>: <span class="hljs-string">'waterfall.jpg'</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">400</span>, <span class="hljs-variable">height</span>: <span class="hljs-number">300</span>
});
var maxWidth = <span class="hljs-number">1600</span>,
    maxHeight = <span class="hljs-number">1200</span>,
    origWidth = <span class="hljs-number">400</span>,
    origHeight = <span class="hljs-number">300</span>;

var view = Ti.UI.createView({
    left : <span class="hljs-number">0</span>, top : <span class="hljs-number">0</span>, <span class="hljs-variable">width</span> : <span class="hljs-number">400</span>, <span class="hljs-variable">height</span> : <span class="hljs-number">300</span>,
    backgroundColor : <span class="hljs-string">'red'</span>,
});

view.addEventListener(<span class="hljs-string">'pinch'</span>, function(e){
    var newWidth = <span class="hljs-built_in">image</span>.<span class="hljs-variable">width</span> * e.<span class="hljs-built_in">scale</span>;
        newWidth = (newWidth &lt; origWidth) ? origWidth : newWidth;
        newWidth = (newWidth &gt; maxWidth) ? maxWidth : newWidth;
    var newHeight = <span class="hljs-built_in">image</span>.<span class="hljs-variable">height</span> * e.<span class="hljs-built_in">scale</span>;
        newHeight = (newHeight &lt; origHeight) ? origHeight : newHeight;
        newHeight = (newHeight &gt; maxHeight) ? maxHeight : newHeight;
    <span class="hljs-built_in">image</span>.applyProperties({
        <span class="hljs-variable">width</span>: Math.<span class="hljs-built_in">round</span>(newWidth),
        <span class="hljs-variable">height</span>: Math.<span class="hljs-built_in">round</span>(newHeight)
    });
})

view.<span class="hljs-built_in">add</span>(<span class="hljs-built_in">image</span>);
win.<span class="hljs-built_in">add</span>(view);
win.<span class="hljs-built_in">open</span>();
</code></pre><p>With this solution, zooming stops when the user hits the max&#x2F;min limits.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 28th 2013, 5:26:30 pm">March 28th 2013</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="../../question/150172/pinch-to-zoom-in-ios.html#answer-259564" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you for the response Tim. I will try out the approach and let you know. But for the alternative approach that is without using imageView, I think after we zoom the image, we will not be able to pan the image (move around the zoomed image) to see it entirely. But I will check out the code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 29th 2013, 4:02:00 am">March 29th 2013</span>
											by <span class='authorname'>Soumya Kanti Kar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Tim, the tweaked approach with scrollview and imageview is working excellent. I guess the rectangle image and square scrollview assumption was right. Thanks a lot for the tweak. I have not tried the view-imageview approach as scrollview-imageview approach is working good for me.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 29th 2013, 7:04:40 am">March 29th 2013</span>
											by <span class='authorname'>Soumya Kanti Kar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>4</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-259560">
				
						<section>
							<p>It looks like you have a square scrollview showing a rectangular image. So what you&#39;re seeing (the red space) is the portion of the scrollview not being covered by the image.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 28th 2013, 3:58:30 pm">March 28th 2013</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="../../question/150172/pinch-to-zoom-in-ios.html#answer-259560" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Yes, what you say seems very logical. But even if I chance it to a rectangular shaped scrollView, the red space is coming after I do a pinch zoom.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 28th 2013, 4:03:28 pm">March 28th 2013</span>
											by <span class='authorname'>Soumya Kanti Kar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-259586">
				
						<section>
							<p>hi,</p>
<p>it&#39;s because image is not square and you are trying to set square image in scrollview.</p>
<p>see your image size is 1600x1200 but you want to set it in 300x300 size so imageview automatically scales image in the ratio of 1600x1200. but if you use an image which has a same width &amp; height like 1600x1600 or 1200x1200 then it sets perfectly in scrollview.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 29th 2013, 3:31:01 am">March 29th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="../../question/150172/pinch-to-zoom-in-ios.html#answer-259586" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
