<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>how to get base64 string from [object TiBlob] object? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>how to get base64 string from [object TiBlob] object?</h1>
		</header>
		<section>
			<p>Hi friends,</p>
<p>How can I get base64 string from [object TiBlob] object?</p>
<p>Thanks in advance</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 9th 2011, 2:19:05 pm">February 9th 2011</span>
				by <span class='authorname'>yogesh prajapati</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>base64encode</span></li>
					
						<li><span class='tagname'>tiblob</span></li>
					
						<li><span class='tagname'>titanium mobile</span></li>
					
						<li><span class='tagname'>titanium.media.showcamera</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>10</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>10 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-195151">
				
						<section>
							<p>I&#39;m assuming that the Blob is an image and that you&#39;re trying to convert that image into a base64 string. If this is the case, here&#39;s how I did it:</p>
<ol>
<li><p>Use a canvas element in a HTML5 webview and include an event listener in the HTML page of the webview like so:</p>
<pre><code class="hljs">Ti.App.addEventListener(<span class="hljs-string">'getImageString'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
         <span class="hljs-keyword">var</span> imgstr = canvas.toDataURL();
         <span class="hljs-keyword">var</span> base64 = {str:imgstr};
         Ti.App.fireEvent(<span class="hljs-string">'getBase64'</span>,base64);
     });
</code></pre><p>Notice that you need to use the canvas.toDataURL() method to get the base64 string of whatever is rendered on the canvas object.</p>
</li>
<li><p>Pass the string back to the Titanium app context to do what you need with the string. In the code block above, the fireEvent method is called and in the Ti app context, you should have a Ti.App.addEventListener like so:</p>
</li>
</ol>
<pre><code class="hljs">Ti.App.addEventListener(<span class="hljs-string">'getBase64'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    <span class="hljs-keyword">var</span> imgStr = e.str;
});
</code></pre><p>Now you have the Base64 string in the local variable imgStr that you can use to do whatever you need.</p>
<p>Hope this helps.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 9th 2011, 3:53:40 pm">February 9th 2011</span>
								by <span class='authorname'>Brandon Xavier</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-195151" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-195101">
				
						<section>
							<p>Have you tried the <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.Utils.base64encode-method.html">base64encode</a> method?  It is documented as taking a string argument, but you could try with a blob.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 9th 2011, 2:22:17 pm">February 9th 2011</span>
								by <span class='authorname'>Doug Handy</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-195101" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hey Thanks, I already tried it but no luck :(</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 9th 2011, 3:08:36 pm">February 9th 2011</span>
											by <span class='authorname'>yogesh prajapati</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-196621">
				
						<section>
							<p>Hey @Brandon your assumption is right.</p>
<p>Below is how I achieve image upload to server.</p>
<p>Titanium code</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhr2 = Titanium.Network.createHTTPClient();

xhr2.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                            Ti.API.info(<span class="hljs-string">'response of image upload'</span>);
                            <span class="hljs-keyword">var</span> response = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
                               <span class="hljs-comment">//Do the needful</span>
                         };

xhr2.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    Ti.API.info(<span class="hljs-string">'in utf-8 error for POST'</span>);
};

    <span class="hljs-comment">// I have used REST webservice</span>
    <span class="hljs-keyword">var</span> web_service_url = Titanium.App.Properties.getString(<span class="hljs-string">'web_service_url'</span>);
    <span class="hljs-comment">// In para_list I send extra information that I need on server    </span>
    <span class="hljs-keyword">var</span> para_list = <span class="hljs-string">'username='</span>+username+<span class="hljs-string">'&amp;password='</span>+password+<span class="hljs-string">'&amp;image_type='</span> + image_type;
    <span class="hljs-keyword">var</span> req_url = web_service_url + <span class="hljs-string">'?'</span> + para_list;

    Titanium.API.info(req_url);
    xhr2.open(<span class="hljs-string">"POST"</span>,req_url,<span class="hljs-literal">false</span>);
    <span class="hljs-comment">// image is [object TiBlob] object</span>
    xhr2.send({media:image});
</code></pre><p>PHP server code</p>
<pre><code class="hljs">//<span class="hljs-variable">$uploaddir</span> absolute path <span class="hljs-keyword">to</span> uoload directory

<span class="hljs-variable">$image</span>_name = <span class="hljs-variable">$uploaddir</span>.basename($_FILES[<span class="hljs-string">'media'</span>][<span class="hljs-string">'name'</span>]);

<span class="hljs-variable">$image</span>_size = $_FILES[<span class="hljs-string">'media'</span>][<span class="hljs-string">'size'</span>];

<span class="hljs-keyword">if</span>(move_uploaded_file($_FILES[<span class="hljs-string">'media'</span>][<span class="hljs-string">'tmp_name'</span>], <span class="hljs-variable">$image</span>_name))
{                    
    // Now image is available at <span class="hljs-variable">$image</span>_name
}
</code></pre><p>Hope it helps to someone :) </p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 12th 2011, 3:52:48 am">February 12th 2011</span>
								by <span class='authorname'>yogesh prajapati</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-196621" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-216307">
				
						<section>
							<p>@Brandon - this looks exactly like what I need, but I dont understand how to actually access the local variable.  Put another way, how is it that I pass a Blob into these listeners to get a Base64 string back? Sorry, but a newbie to this. Any assistance most appreciated!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 12th 2011, 9:51:26 am">August 12th 2011</span>
								by <span class='authorname'>Carl Vescovi</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-216307" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-217613">
				
						<section>
							<p>And how do I get the base64 of a wav file in the mobile?</p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 29th 2011, 6:47:42 am">August 29th 2011</span>
								by <span class='authorname'>Leandro Vidal</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-217613" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-217639">
				
						<section>
							<p>i just posted some code for a module to do this conversion, I know a patch is coming from appcelerator, but the module might be useful to you now.</p>
<p><a href="http:&#x2F;&#x2F;t.co&#x2F;s6zMvBp">Clearly Innovative Thoughts - Titanium Appcelerator Quickie: base64encode iOS Module</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 29th 2011, 1:36:33 pm">August 29th 2011</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-217639" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-227489">
				
						<section>
							<p>Aaron, thanks a lot! Your module works for me perfectly (WAV files) on a simulator:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> utils</span> = require('com.clearlyinnovative.utils');
Ti.API.info(<span class="hljs-string">"module is =&gt; "</span> + utils); 

<span class="hljs-variable"><span class="hljs-keyword">var</span> f</span> = Ti.Filesystem.getFile(file.path);
<span class="hljs-variable"><span class="hljs-keyword">var</span> encoded_audio</span> = utils.base64encode( f.read() );
</code></pre><p> but it gives an error when I try to put app on iOS Device. Do you know what the  problem could be related with?   </p>
<pre><code class="hljs">[INFO] Performing clean build
[<span class="hljs-keyword">ERROR</span>] 
[<span class="hljs-keyword">ERROR</span>] <span class="hljs-keyword">Error</span>: Traceback (most recent call last):
  <span class="hljs-keyword">File</span> <span class="hljs-string">"/Library/Application Support/Titanium/mobilesdk/osx/1.7.3/iphone/builder.py"</span>, <span class="hljs-keyword">line</span> 1305, <span class="hljs-keyword">in</span> main
    execute_xcode(<span class="hljs-string">"iphoneos%s"</span> % iphone_version,<span class="hljs-keyword">args</span>,False)
  <span class="hljs-keyword">File</span> <span class="hljs-string">"/Library/Application Support/Titanium/mobilesdk/osx/1.7.3/iphone/builder.py"</span>, <span class="hljs-keyword">line</span> 1066, <span class="hljs-keyword">in</span> execute_xcode
    output = <span class="hljs-keyword">run</span>.<span class="hljs-keyword">run</span>(<span class="hljs-keyword">args</span>,False,False,o)
  <span class="hljs-keyword">File</span> <span class="hljs-string">"/Library/Application Support/Titanium/mobilesdk/osx/1.7.3/iphone/run.py"</span>, <span class="hljs-keyword">line</span> 39, <span class="hljs-keyword">in</span> <span class="hljs-keyword">run</span>
    sys.<span class="hljs-keyword">exit</span>(rc)
SystemExit: 65
</code></pre><p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 14th 2012, 2:16:55 am">January 14th 2012</span>
								by <span class='authorname'>Kateryna Lyshchenko</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-227489" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I have some images files in my local file system. I am trying to convert image file into base64 data using Titanium Utils. But after the conversion I am getting empty string… here is my sample code</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> f</span> = Titanium.Filesystem.getFile(currIamge);
<span class="hljs-variable"><span class="hljs-keyword">var</span> temp</span> = f.read();
<span class="hljs-variable"><span class="hljs-keyword">var</span> encodeData</span> = Ti.Utils.base64encode(temp);
alert(<span class="hljs-string">"encodeData = "</span>+encodeData);
</code></pre><p>Here I am getting empty alert. How do I convert a file into base64 data? I am Using Titanium 1.7.5 in iOs platform</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 11:34:26 am">February 16th 2012</span>
											by <span class='authorname'>Karthi Ponnusamy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hello,</p>
<p>I&#39;ve confirmed that base64 encoding now works as expected on non-strings in 1.8.2 (no need for the great clearlyinnovative.utils workaround anymore.) Here&#39;s an example of some code that I use for uploading a base64 encoded .wav to a web service:</p>
<pre><code class="hljs">
</code></pre><p>Hope that helps!</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 4:58:22 am">March 2nd 2012</span>
											by <span class='authorname'>Will Dzierson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hmm.. somehow my code never made it. Here it is:</p>
<pre><code class="hljs">file = recording.stop();
Ti.Media.stopMicrophoneMonitor();

<span class="hljs-comment">//</span>
<span class="hljs-comment">// base64 encoding a wav to upload here</span>
<span class="hljs-comment">//</span>
<span class="hljs-keyword">var</span> encoded_audio = Ti.Utils.base64encode(file.toBlob());
Ti.API.info(encoded_audio);

<span class="hljs-keyword">var</span> data_to_send = {
    <span class="hljs-string">"apikey"</span> : <span class="hljs-string">"supersecret"</span>,
    <span class="hljs-string">"action"</span> : <span class="hljs-string">"recognize"</span>,
    <span class="hljs-string">"freeform"</span> : <span class="hljs-string">"1"</span>,
    <span class="hljs-string">"content-type"</span> : <span class="hljs-string">"audio/x-wav"</span>,
    <span class="hljs-string">"output"</span> : <span class="hljs-string">"json"</span>,
    <span class="hljs-string">"audio"</span> : removeNL(<span class="hljs-built_in">String</span>(encoded_audio))
}; 

<span class="hljs-keyword">var</span> data_string = <span class="hljs-built_in">JSON</span>.stringify(data_to_send);
xhr = Titanium.Network.createHTTPClient();
xhr.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain; charset=utf-8"</span>);
xhr.open(<span class="hljs-string">"POST"</span>, <span class="hljs-string">"yoururl"</span>);
xhr.send(data_string);

xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    Ti.API.info(<span class="hljs-keyword">this</span>.responseText);
};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 5:00:32 am">March 2nd 2012</span>
											by <span class='authorname'>Will Dzierson</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-236739">
				
						<section>
							<p>Hi Will,  </p>
<p>I&#39;m trying this approach, however Ti.Utils.base64encode doesn&#39;t seem to return an object for me.  (get that error)</p>
<p>Any suggestions of what to try?  I am on Ti 1.8.2 now.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 20th 2012, 3:15:58 pm">April 20th 2012</span>
								by <span class='authorname'>Prashant Sheth</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-236739" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-281334">
				
						<section>
							<pre><code class="hljs"><span class="hljs-title">var</span> blob = imageView.toBlob();
<span class="hljs-title">dataUrl</span> = <span class="hljs-string">'data:'</span>+ blob.mimeType + <span class="hljs-string">';base64,'</span> + Ti.Utils.base64encode(blob).text;
</code></pre><p>Then you can send it through event to webview and set to the img.src</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 1st 2014, 7:24:57 am">August 1st 2014</span>
								by <span class='authorname'>Andrey Tkachenko</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-281334" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-217642">
				
						<section>
							<p>I have two questions: 1. Does it work for wav files? I&#39;ve tried <code>file.read()</code>and it returns a TiBlob object. 2. How do I put the module into a titanium project?</p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 29th 2011, 1:45:38 pm">August 29th 2011</span>
								by <span class='authorname'>Leandro Vidal</span><br>
								<a class="icon-bg icon-link" href="../../question/110711/how-to-get-base64-string-from-object-tiblob-object.html#answer-217642" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
