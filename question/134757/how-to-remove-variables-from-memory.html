<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>How to remove variables from memory. » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>How to remove variables from memory.</h1>
		</header>
		<section>
			<p>Hi, I am making an app that dynamically pulls data from a remote database via HTTPClient() and places it as the text of several labels. I want to use the same variables for different dynamic windows but when the window that added these child elements to first closes the variables are still there. So if the second dynamic window opens there is a second instance of that variable loaded and the text that is pulled from the database overlaps the first.</p>
<p>There is two images that each have their own click event listener. When the image is clicked a second window called businessWindow is opened and several labels and images are loaded in it. What I want is so that when the businessWindow closes and the second picture is clicked. That the businessWindow opens again but this time with different labels and images that belong to the second images that was clicked only.</p>
<p>Here is the code:</p>
<p>http:&#x2F;&#x2F;pastebin.com&#x2F;W3cKnTw0</p>
<p>I was having problems putting the code here so I used pastebin.com</p>
<p>If anyone can help me I would appreciate it. Thank you in advanced.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 1st 2012, 10:04:48 pm">April 1st 2012</span>
				by <span class='authorname'>Raul Ochoa</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>clear variables</span></li>
					
						<li><span class='tagname'>close variables</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
						<li><span class='tagname'>remove variables</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I just looked at the code, and you got a lot going on for someone to make sense of, can you create a smaller, simpler example that demonstrates the issue?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 1st 2012, 11:22:01 pm">April 1st 2012</span>
								by <span class='authorname'>Aaron Saunders</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Ok, I tried making a smaller sample. There are a couple of if statements that say a=a. In this example a is never equal to a so the else statement is always executed. </p>
<p>There are two click events that open the same businessWindow declared at the beginning of the code but the namelbl.text changes on both of the instances. If the frontlogo1 is clicked then the businessWindow opens with a label saying Phone: 1 and then when I click the close button the window closes. Then when I click the frontlogo2 the businessWindow opens again this time it has to contain the namelbl.text being Phone: 2 but the window opens with the text Phone: 1 and Phone: 2 over each other. Do I have to add businessWindow.remove(namelbl); in the closebutton.eventlistener?</p>
<pre><code class="hljs">var businessWindow = Ti.UI.createWindow({

    title: <span class="hljs-string">'Business Name'</span>,
    backgroundColor: <span class="hljs-string">'black'</span>

});

var closebutton = Ti.UI.createButton({
    title: <span class="hljs-string">'Close'</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">25</span>,
    bottom: <span class="hljs-number">20</span>
});

businessWindow.<span class="hljs-built_in">add</span>(closebutton);

frontlogo1.addEventListener(<span class="hljs-string">'click'</span>, function() {

<span class="hljs-keyword">if</span> (a=a) { } <span class="hljs-keyword">else</span> {
var namelbl = Titanium.UI.createLabel({
             <span class="hljs-variable">width</span>: <span class="hljs-string">'auto'</span>,
             <span class="hljs-variable">height</span>: <span class="hljs-string">'auto'</span>,
             top: business_image.<span class="hljs-variable">height</span> + <span class="hljs-number">20</span>,
             left: <span class="hljs-number">10</span>,
             <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
             <span class="hljs-built_in">text</span>: <span class="hljs-string">'Phone: 1'</span>
         });

businessWindow.<span class="hljs-built_in">add</span>(namelbl);
businessWindow.<span class="hljs-built_in">open</span>({modal:<span class="hljs-keyword">true</span>});

}
});

frontlogo2.addEventListener(<span class="hljs-string">'click'</span>, function() {

<span class="hljs-keyword">if</span> (a=a) { } <span class="hljs-keyword">else</span> {
var namelbl = Titanium.UI.createLabel({
             <span class="hljs-variable">width</span>: <span class="hljs-string">'auto'</span>,
             <span class="hljs-variable">height</span>: <span class="hljs-string">'auto'</span>,
             top: business_image.<span class="hljs-variable">height</span> + <span class="hljs-number">20</span>,
             left: <span class="hljs-number">10</span>,
             <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
             <span class="hljs-built_in">text</span>: <span class="hljs-string">'Phone: 2'</span>
         });

businessWindow.<span class="hljs-built_in">add</span>(namelbl);
businessWindow.<span class="hljs-built_in">open</span>({modal:<span class="hljs-keyword">true</span>});

}
});

closebutton.addEventListener(<span class="hljs-string">'click'</span>, function() {


    businessWindow.close();

});
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="April 2nd 2012, 12:00:43 am">April 2nd 2012</span>
								by <span class='authorname'>Raul Ochoa</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-234978">
				
						<section>
							<p>Since the question asked was:</p>
<p>&gt; How to remove variables from memory.</p>
<p>Your Answer:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> a</span> = <span class="hljs-number">1</span>;
a = <span class="hljs-literal">null</span>;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 2nd 2012, 12:20:58 am">April 2nd 2012</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/134757/how-to-remove-variables-from-memory#answer-234978" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>To be technically precise, variables can&#39;t be removed from memory (by hand). &quot;a&quot; is still present here, although it references different value.</p>
<p>The question is technically asked in wrong way, right question is to ask how to release memory that &quot;a&quot; variable points at. And the answer is by dereferencing that value you can make GC of that value possible (by referencing &quot;null&quot; value, but you could also reference 42, or anything else).</p>
<p>So …</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;
<span class="hljs-keyword">delete</span> a; <span class="hljs-comment">//won't work</span>

a = <span class="hljs-number">42</span>; <span class="hljs-comment">//referencing different value, 1 can be released</span>

a = <span class="hljs-literal">null</span>; <span class="hljs-comment">//referencing native value, 42 can be released</span>

a = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">//referencing native value, "null" won't be released because native values are always present in memory</span>
</code></pre><p>People tend to think that setting variable to &quot;null&quot; removes value that variable references from memory. But that is wrong, in the best case you can dereference some value and if nothing else references it, it can be marked for GC (somewhere in the future).</p>
<p>If value is destroyed by setting variable value to &quot;null&quot; then we don&#39;t have automatic GC, but manual. When variable is declared inside a function, it is local variable and it will be destroyed when function scope closes itself (in most cases when it finishes with execution). Many people ignore this basic fact and are trying to set that variable to &quot;null&quot;.</p>
<p>Setting variable to &quot;null&quot; could have sense in cases when circular reference between native and host object is created (via event listener or something like that) that prevents that objects from being GC (and setting one part of that circle to &quot;null&quot; brakes circular reference).</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 2nd 2012, 6:04:32 am">April 2nd 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ivan, I couldn&#39;t agree more.  However, until we can control garbage collection on our own, this seems to be the best practice.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 2nd 2012, 11:09:10 am">April 2nd 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>But we shouldn&#39;t be able to control GC because GC should be automatic (that is so in any JS environment that I am aware of - and by ECMAScript spec GC should be automatic). Setting variable to &quot;null&quot; is a workaround to help GC mechanism do its job - in some situations. &quot;Best practice&quot; should be removed from that context because it&#39;s totally wrong no matter from who it comes from. If it comes from Appcelerator&#39;s employees, that isn&#39;t guarantee it is correct (&quot;think for yourself, question authority&quot; :) ). &quot;best practice&quot; sounds better than &quot;workaround for memory leak bug&quot;. :D</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 2nd 2012, 11:52:28 am">April 2nd 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
