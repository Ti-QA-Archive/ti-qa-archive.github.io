<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>_WebTryThreadLock Crash when going BACK from WebView window.   » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>_WebTryThreadLock Crash when going BACK from WebView window.  </h1>
		</header>
		<section>
			<p>I have a table view with a form and on submit it brings the user to a webview that shows results. That works great. but when the user goes BACK to the form. It appears for a second and then crashes with the following result. This was working great in versions prior to 1.6 but since 1.6 its been crashing. </p>
<pre><code class="hljs"><span class="hljs-number">2011</span>-<span class="hljs-number">03</span>-<span class="hljs-number">18</span> <span class="hljs-number">22</span>:<span class="hljs-number">04</span>:<span class="hljs-number">56</span>.<span class="hljs-number">252</span> <span class="hljs-type">APPNAME</span> [<span class="hljs-number">58306</span>:<span class="hljs-number">7003</span>] <span class="hljs-type">bool</span> _WebTryThreadLock(<span class="hljs-type">bool</span>), 
<span class="hljs-number">0x6c64cc0</span>: <span class="hljs-type">Tried</span> to obtain the web lock <span class="hljs-keyword">from</span> a thread other than the main thread <span class="hljs-keyword">or</span> the web 
thread. <span class="hljs-type">This</span> may be a <span class="hljs-literal">result</span> <span class="hljs-keyword">of</span> calling to <span class="hljs-type">UIKit</span> <span class="hljs-keyword">from</span> a secondary thread. <span class="hljs-type">Crashing</span> now...
</code></pre><p>Any ideas why? I can&#39;t seem to figure it out. Any suggestions is appreciated.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 19th 2011, 12:09:16 am">March 19th 2011</span>
				by <span class='authorname'>Dave F</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>_webtrythreadlock</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-205403">
				
						<section>
							<p>Just to follow up. I figured out a way to prevent this. </p>
<p>What I was originally doing was:</p>
<p>On click, I was creating window object and then use an JS file for the url parameter and Open the window. When that window opens the JS file, that file used the current window and defined a webview.</p>
<p>That used to work fine but now when I go BACK from that webview to the prev screen I&#39;d get the _webtrythreadlock error. </p>
<p>So what I did was remove the JS file and create the webview on the click event instead. I like to keep things clean and use JS files to keep things organized but In this case its causing the crash.</p>
<p>doing this seemed to solve the problem. I guess I&#39;ll <a href="https:&#x2F;&#x2F;appcelerator.lighthouseapp.com&#x2F;projects&#x2F;32238&#x2F;tickets&#x2F;3474-_webtrythreadlock-crash-when-going-back-from-webview-window">report a bug</a> and see if it&#39;s valid. </p>
<p>Hope this helps someone. </p>
<p>Fish</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 31st 2011, 2:19:37 pm">March 31st 2011</span>
								by <span class='authorname'>Dave F</span><br>
								<a class="icon-bg icon-link" href="question/117475/webtrythreadlock-crash-when-going-back-from-webview-window#answer-205403" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>this workaround helped me, thanks. But if you use a complex GUI, it&#39;s getting very dirty code…</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 29th 2011, 11:21:22 am">June 29th 2011</span>
											by <span class='authorname'>Simon Lipke</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-205395">
				
						<section>
							<p>Anyone else seeing this crash? I even tried 1.7 latest build with no luck. Its really weird. and keeping me from submitting my latest update of my app. Please help!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 31st 2011, 1:11:03 pm">March 31st 2011</span>
								by <span class='authorname'>Dave F</span><br>
								<a class="icon-bg icon-link" href="question/117475/webtrythreadlock-crash-when-going-back-from-webview-window#answer-205395" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207987">
				
						<section>
							<p>I just downloaded v1.7.0-20110517113535 to see if this has been resolved and it STILL is happening. I guess I have to go back to  my temp solution I mentioned in this thread. Bummer. </p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 18th 2011, 11:07:51 am">May 18th 2011</span>
								by <span class='authorname'>Dave F</span><br>
								<a class="icon-bg icon-link" href="question/117475/webtrythreadlock-crash-when-going-back-from-webview-window#answer-207987" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211732">
				
						<section>
							<p>I got the same problem in my application, with the exact same layout like in this code:</p>
<pre><code class="hljs">app.js

<span class="hljs-keyword">var</span> rootWin = Titanium.UI.createWindow();
<span class="hljs-keyword">var</span> navWindow = Titanium.UI.createWindow({
  title: <span class="hljs-string">'NavWindow'</span>
});
<span class="hljs-keyword">var</span> navGroup = Titanium.UI.iPhone.createNavigationGroup({
  <span class="hljs-built_in">window</span>: navWindow
});

<span class="hljs-keyword">var</span> tableView = Titanium.UI.createTableView();

<span class="hljs-comment">//Save reference (for child windows)</span>
Titanium.UI.currentTab = navGroup;

rootWin.add(navGroup);

tableView.data = [
  {title: <span class="hljs-string">'Click me'</span>, hasChild: <span class="hljs-literal">true</span>}
];

tableView.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

  <span class="hljs-keyword">var</span> win = Titanium.UI.createWindow({
    url: <span class="hljs-string">'window.js'</span>,
    title: <span class="hljs-string">'Window'</span>
  });

  <span class="hljs-comment">//Open window in navGroup</span>
  Titanium.UI.currentTab.open(win, {animated: <span class="hljs-literal">true</span>});

});

navWindow.add(tableView);
rootWin.open();
</code></pre><pre><code class="hljs"><span class="hljs-built_in">window</span>.js

<span class="hljs-keyword">var</span> currentWindow = Titanium.UI.currentWindow;
<span class="hljs-keyword">var</span> webView = Titanium.UI.createWebView();

<span class="hljs-comment">/*
 * Custom back button
 */</span>
<span class="hljs-keyword">var</span> leftNavButton = Titanium.UI.createButton({
  title: <span class="hljs-string">'Back'</span>,
  style: Titanium.UI.iPhone.SystemButtonStyle.BORDERED,
});

leftNavButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  Titanium.UI.currentTab.close(currentWindow);
});

currentWindow.add(webView);
currentWindow.leftNavButton = leftNavButton;

webView.url = <span class="hljs-string">'http://www.google.de'</span>;
</code></pre><p>Crashes with error (each time i click on the back button of the new window):</p>
<p><code>bool _WebTryThreadLock(bool), 0x6a697e0: Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now...</code></p>
<p>The problem of this demo is… it doesn&#39;t actually crash if I create a new project, I have no idea how to exactly reproduce the crash (my app crashes at 100% of the clicks).</p>
<p>I&#39;m using the latest stable version of Titanium (1.7.1) and iPhone Simulator 4.2 on Mac OS X 10.6.8. The App also crashes on my device (iPhone 3GS, 4.3.3, same error).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 29th 2011, 10:04:38 am">June 29th 2011</span>
								by <span class='authorname'>Simon Lipke</span><br>
								<a class="icon-bg icon-link" href="question/117475/webtrythreadlock-crash-when-going-back-from-webview-window#answer-211732" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Bump, same issue. Is there a fix for this yet?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 8th 2011, 5:34:19 pm">September 8th 2011</span>
											by <span class='authorname'>Slim McKinsley</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
