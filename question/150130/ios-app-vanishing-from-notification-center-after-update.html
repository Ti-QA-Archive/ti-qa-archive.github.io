<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>iOS app vanishing from Notification Center after update » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>iOS app vanishing from Notification Center after update</h1>
		</header>
		<section>
			<p>I have an iOS app written in Titanium Studio using Push Notifications, Badges and Sounds through Urban Airship. After my last update people who upgraded are having problems with the Notification Center. At first my app still appears in the Notification Center, but the &quot;Badges, Sounds, Banners&quot; that normally appear under the app&#39;s name have vanished. If you go into the app&#39;s settings in the Notification center, the options to change these things simply are not there. Of course Push Notifications don&#39;t work at this point either.</p>
<p>Now, if you either restart the phone or reinstall the app, the programs entry in the notification center vanishes completely. I have found that after reinstalling the app and restarting the phone enough times the entry in the Notification Center will reappear and Pushes will work again. This is of course an absurd thing to ask all our users to do.</p>
<p>Even while all this is happening I still receive proper APID&#39;s from the phones, and the push messages claim to go though correctly. The phone just does not display them.</p>
<p>On the one fresh install I have tried everything worked great right off the bat.</p>
<p>One one line of code has changed since my last version. It is commented in the code below.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> Urbanairship = <span class="hljs-built_in">require</span>(<span class="hljs-string">"com.0x82.urbanairship"</span>);
Urbanairship.options = {
  APP_STORE_OR_AD_HOC_BUILD: <span class="hljs-literal">true</span>, 
  DEVELOPMENT_APP_KEY: <span class="hljs-string">"xxx"</span>,
  DEVELOPMENT_APP_SECRET: <span class="hljs-string">"xxx"</span>,
  PRODUCTION_APP_KEY: <span class="hljs-string">"yyy"</span>,
  PRODUCTION_APP_SECRET: <span class="hljs-string">"yyy"</span>,
  LOGGING_ENABLED: <span class="hljs-literal">true</span>,
  LOG_LEVEL: <span class="hljs-number">5</span>
};

  Ti.Network.registerForPushNotifications({
  types: [
    Ti.Network.NOTIFICATION_TYPE_BADGE,
    Ti.Network.NOTIFICATION_TYPE_ALERT,
    Ti.Network.NOTIFICATION_TYPE_SOUND
  ],
  success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

    <span class="hljs-keyword">var</span> token = e.deviceToken;
    Urbanairship.autoBadge = <span class="hljs-literal">true</span>;
    Urbanairship.pushEnabled = <span class="hljs-literal">true</span>; <span class="hljs-comment">//Added this line, only line to change</span>
    Urbanairship.registerDevice(token);
    userData.pushID = token; <span class="hljs-comment">//save pushid</span>
    Ti.App.Properties.setString(<span class="hljs-string">'userData'</span>, <span class="hljs-built_in">JSON</span>.stringify(userData));
  },
  error: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    alert(<span class="hljs-string">"The Push Servers appears to be down. Please restart the app and try again"</span>);
    <span class="hljs-keyword">if</span>(DEBUG == <span class="hljs-literal">true</span>){Ti.API.debug(<span class="hljs-string">"Apple Push Error: "</span>+e.error)}
  },
  callback: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
  pushReceived(e.data.type);
  }
})
</code></pre><p>I am completely stumped on where to go on this one. Any suggestions?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 28th 2013, 1:21:56 am">March 28th 2013</span>
				by <span class='authorname'>Jamie Varney</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>notification</span></li>
					
						<li><span class='tagname'>push</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
