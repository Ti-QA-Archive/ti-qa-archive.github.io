<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>How to use Ti.Network.HTTPClient.onreadystatechange? » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>How to use Ti.Network.HTTPClient.onreadystatechange?</h1>
		</header>
		<section>
			<p>I&#39;ve tried sometime ago to use <code>onreadystatechange</code> callback for HTTPClient, but it didn&#39;t work, and so I tried another, dirtier approach.<br>Now I got time to go back and work on this again, and I&#39;m willing to understand what&#39;s going on. My idea was to have a switch inside the callback that would test for some HTTPClient constants that are documented, but in fact they does not exist. Like this:</p>
<pre><code class="hljs"><span class="hljs-string">onreadystatechange:</span> function() {
    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>.readyState) {
        <span class="hljs-keyword">case</span> Ti.Network.HTTPClient.<span class="hljs-string">UNSENT:</span>
        <span class="hljs-keyword">case</span> Ti.Network.HTTPClient.<span class="hljs-string">OPENED:</span>
            that.addLoading()
        <span class="hljs-keyword">break</span>

        <span class="hljs-keyword">case</span> Ti.Network.HTTPClient.<span class="hljs-string">DONE:</span>
            that.removeLoading()
        <span class="hljs-keyword">break</span>
    }
}
</code></pre><p>Although those properties <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.Network.HTTPClient-property-DONE">are inside the documentation</a>, they always appear as undefined for me, and I couldn&#39;t discover their scalar values through the docs.</p>
<p>Googling I even found an <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;HTTPClient+and+the+Request+Lifecycle">old tutorial</a> that does this, but without those constants - and without explanation of the values too.</p>
<p>So, how could I do that? Are those constants really missing, or they were removed and forgotten in the docs? What would be the correct values?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 18th 2013, 2:21:17 pm">March 18th 2013</span>
				by <span class='authorname'>Igor Santos</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>docs</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Ooops. Forgot to say that I was using beta 3.0 SDK and now I&#39;m on 3.0.2 stable, same behaviour. Not sure if I used 2.X before with this code.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 18th 2013, 2:21:58 pm">March 18th 2013</span>
								by <span class='authorname'>Igor Santos</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>In most cases onsuccess&#x2F;onerror is enough.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 18th 2013, 2:50:24 pm">March 18th 2013</span>
								by <span class='authorname'>Rainer Schleevoigt</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I know that, but if it was enough for me I wasn&#39;t asking this ;)</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 18th 2013, 3:26:08 pm">March 18th 2013</span>
								by <span class='authorname'>Igor Santos</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>in the worst case, this is an inconsistency in the docs, and should be fixed.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 18th 2013, 3:28:51 pm">March 18th 2013</span>
								by <span class='authorname'>Igor Santos</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-258846">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<pre><code class="hljs"><span class="hljs-number">0</span>     Uninitialized - <span class="hljs-function"><span class="hljs-title">open</span><span class="hljs-params">()</span></span> has not been called yet.
<span class="hljs-number">1</span>     Loading - <span class="hljs-function"><span class="hljs-title">send</span><span class="hljs-params">()</span></span> has not been called yet.
<span class="hljs-number">2</span>     Loaded - <span class="hljs-function"><span class="hljs-title">send</span><span class="hljs-params">()</span></span> has been called, headers and status are available.
<span class="hljs-number">3</span>     Interactive - Downloading, responseText holds the partial data.
<span class="hljs-number">4</span>     Completed - Finished with all operations.
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 18th 2013, 3:13:01 pm">March 18th 2013</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="question/149715/how-to-use-tinetworkhttpclientonreadystatechange#answer-258846" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>thanks! where did you find it? Am I able to use the constants? If not, why are they in the docs?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2013, 3:25:03 pm">March 18th 2013</span>
											by <span class='authorname'>Igor Santos</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Here is the precise list from the Titanium source code</p>
<p><a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;blob&#x2F;master&#x2F;iphone&#x2F;Classes&#x2F;TiNetworkHTTPClientProxy.h">iPhone</a> Line 15</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2013, 3:34:59 pm">March 18th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just declare your own constants with these values</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2013, 3:35:22 pm">March 18th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks again. Should I open some kind of issue in github to notify about the missing constants in the JS API? What is the better way to solve this?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2013, 4:55:49 pm">March 18th 2013</span>
											by <span class='authorname'>Igor Santos</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ooops, there&#39;s no &quot;issues&quot; in their github. how could I notify them of this problem?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2013, 4:57:50 pm">March 18th 2013</span>
											by <span class='authorname'>Igor Santos</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>They use <a href="http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;">JIRA</a> for issue logging . You can create a ticket there. As far as fixing it for now, I would just use the numeric values in this instance. The Ti.Network.httpClient is very closely modeled on the way that all web browsers perform http requests, so those values are never going to change IMHO. If you feel this question has been answered you can tick the box so that others may find this information</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2013, 5:08:31 pm">March 18th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>oh, and comment your code as well :-)</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2013, 5:09:03 pm">March 18th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hmmmm I didn&#39;t know those numbers for the states were common through other APIs. That makes me more secure about using the pure numbers for now in my code (:</p>
<p>I&#39;m going to post something in their JIRA, I used it a while ago but seeing the Github code messed the stuff in my head haha</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2013, 8:10:12 pm">March 18th 2013</span>
											by <span class='authorname'>Igor Santos</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
