<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Using Titanium.Contacts.showContacts many times on one View » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Using Titanium.Contacts.showContacts many times on one View</h1>
		</header>
		<section>
			<p>Hi,<br> I&#39;m a newbie to the Titanium.<br> I&#39;m trying to fill in the list of people on the screen based on data selected by the user from his&#x2F;her contacts. As a result I call Titanium.Contacts.showContacts whenever user wants to get the data from contact list.<br> The problem is that after a second call I get <code>Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child&amp;#39;s parent first.</code></p>
<p> Do you know what might be the reason. Based on android SDK docs it seems like Contacts view reusage is broken?<br> I run Titanium 2.0.2. GA on Motorola Xoom, android version 4.0.4</p>
<p>Thanks,</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 11th 2012, 9:12:19 pm">December 11th 2012</span>
				by <span class='authorname'>Michal Gdak</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>contacts</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-252553">
				
						<section>
							<p>Hi, when you call <strong>Titanium.Contacts.showContacts</strong> then in the case of 2nd call remove the view from parent then call this method. </p>
<p>this error says, you have put some view in parent and adding it again before removing.</p>
<p>can you put some code here.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 12th 2012, 3:38:43 am">December 12th 2012</span>
								by <span class='authorname'>Ashish Nigam</span><br>
								<a class="icon-bg icon-link" href="question/145624/using-titaniumcontactsshowcontacts-many-times-on-one-view#answer-252553" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>No, i did not mean that you should remove the button from row then add it again, i mean as per exception raised… some child view id being added to another parent view and has not been removed from earlier parent.</p>
<p>code snippet here… can not help to see the exact cause… you may need to put some detailed code.</p>
<p>or better you debug on your own… that exactly when this happen… run your code in debug mode and check which view is creating problem.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 12th 2012, 6:33:55 am">December 12th 2012</span>
											by <span class='authorname'>Ashish Nigam</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It is possible to run Titanium.Contacts.showContacts() for each element in my TableView&#x2F;TableViewHeader. The problem is that the view created using Titanium API is attached to TableVIew. When user clicks another row the same API is called and the same view is being added to the next View or again the same View.<br>Do you have any idea how to trick this issue?</p>
<pre><code class="hljs">E/TiApplication(17082): (main) [19486,30706] Sending event: exception on thread: main msg:java.lang.IllegalStateException: The specified child already has a parent. You m
all removeView() on the child's parent first.; Titanium 2.0.2,2012/05/30 10:21,2ff31a3
E/TiApplication(17082): java.lang.IllegalStateException: The specified child already has a parent. You must <span class="hljs-operator"><span class="hljs-keyword">call</span> removeView() <span class="hljs-keyword">on</span> the <span class="hljs-keyword">child</span><span class="hljs-string">'s parent first.
E/TiApplication(17082):         at android.view.ViewGroup.addViewInner(ViewGroup.java:3337)
E/TiApplication(17082):         at android.view.ViewGroup.addView(ViewGroup.java:3208)
E/TiApplication(17082):         at android.view.ViewGroup.addView(ViewGroup.java:3188)
E/TiApplication(17082):         at ti.modules.titanium.ui.widget.tableview.TiTableViewHeaderItem.&lt;init&gt;(TiTableViewHeaderItem.java:86)
E/TiApplication(17082):         at ti.modules.titanium.ui.widget.tableview.TiTableView$TTVListAdapter.getView(TiTableView.java:197)
E/TiApplication(17082):         at android.widget.AbsListView.obtainView(AbsListView.java:2033)
E/TiApplication(17082):         at android.widget.ListView.makeAndAddView(ListView.java:1772)
E/TiApplication(17082):         at android.widget.ListView.fillUp(ListView.java:705)
E/TiApplication(17082):         at android.widget.ListView.fillGap(ListView.java:645)
E/TiApplication(17082):         at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4546)
E/TiApplication(17082):         at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:3813)
E/TiApplication(17082):         at android.os.Handler.handleCallback(Handler.java:605)
E/TiApplication(17082):         at android.os.Handler.dispatchMessage(Handler.java:92)
E/TiApplication(17082):         at android.os.Looper.loop(Looper.java:137)
E/TiApplication(17082):         at android.app.ActivityThread.main(ActivityThread.java:4446)
E/TiApplication(17082):         at java.lang.reflect.Method.invokeNative(Native Method)
E/TiApplication(17082):         at java.lang.reflect.Method.invoke(Method.java:511)
E/TiApplication(17082):         at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/TiApplication(17082):         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/TiApplication(17082):         at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(17082): FATAL EXCEPTION: main
E/AndroidRuntime(17082): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child'</span>s <span class="hljs-keyword">parent</span> <span class="hljs-keyword">first</span>.
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.<span class="hljs-keyword">view</span>.ViewGroup.addViewInner(ViewGroup.<span class="hljs-keyword">java</span>:<span class="hljs-number">3337</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.<span class="hljs-keyword">view</span>.ViewGroup.addView(ViewGroup.<span class="hljs-keyword">java</span>:<span class="hljs-number">3208</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.<span class="hljs-keyword">view</span>.ViewGroup.addView(ViewGroup.<span class="hljs-keyword">java</span>:<span class="hljs-number">3188</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> ti.modules.titanium.ui.widget.tableview.TiTableViewHeaderItem.&lt;init&gt;(TiTableViewHeaderItem.<span class="hljs-keyword">java</span>:<span class="hljs-number">86</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> ti.modules.titanium.ui.widget.tableview.TiTableView$TTVListAdapter.getView(TiTableView.<span class="hljs-keyword">java</span>:<span class="hljs-number">197</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.widget.AbsListView.obtainView(AbsListView.<span class="hljs-keyword">java</span>:<span class="hljs-number">2033</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.widget.ListView.makeAndAddView(ListView.<span class="hljs-keyword">java</span>:<span class="hljs-number">1772</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.widget.ListView.fillUp(ListView.<span class="hljs-keyword">java</span>:<span class="hljs-number">705</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.widget.ListView.fillGap(ListView.<span class="hljs-keyword">java</span>:<span class="hljs-number">645</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.widget.AbsListView.trackMotionScroll(AbsListView.<span class="hljs-keyword">java</span>:<span class="hljs-number">4546</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.widget.AbsListView$FlingRunnable.run(AbsListView.<span class="hljs-keyword">java</span>:<span class="hljs-number">3813</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.os.<span class="hljs-keyword">Handler</span>.handleCallback(<span class="hljs-keyword">Handler</span>.<span class="hljs-keyword">java</span>:<span class="hljs-number">605</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.os.<span class="hljs-keyword">Handler</span>.dispatchMessage(<span class="hljs-keyword">Handler</span>.<span class="hljs-keyword">java</span>:<span class="hljs-number">92</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.os.Looper.<span class="hljs-keyword">loop</span>(Looper.<span class="hljs-keyword">java</span>:<span class="hljs-number">137</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> android.app.ActivityThread.<span class="hljs-keyword">main</span>(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">4446</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invokeNative(<span class="hljs-keyword">Native</span> Method)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invoke(Method.<span class="hljs-keyword">java</span>:<span class="hljs-number">511</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">784</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit.<span class="hljs-keyword">main</span>(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">551</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime(<span class="hljs-number">17082</span>):        <span class="hljs-keyword">at</span> dalvik.<span class="hljs-keyword">system</span>.NativeStart.<span class="hljs-keyword">main</span>(<span class="hljs-keyword">Native</span> Method)</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="December 15th 2012, 3:24:28 pm">December 15th 2012</span>
											by <span class='authorname'>Michal Gdak</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i did not get the point, what do you exactly want to do?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 17th 2012, 5:07:37 am">December 17th 2012</span>
											by <span class='authorname'>Ashish Nigam</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I gather basic information about 3-4 people (name, surname, e-mail address). Each dataset is enclosed in TableViewRow.<br>As all information needed may be found in the users addressbook I try to look for them in phones Contacts. To eadh TableViewRow I add button which lunches Titanium.Contacts.showContacts().<br>When I click the second button above mentioned error apears.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 18th 2012, 5:43:14 pm">December 18th 2012</span>
											by <span class='authorname'>Michal Gdak</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-252570">
				
						<section>
							<p>Generaly I call showContacts on each click of the button in TableViewRow.</p>
<pre><code class="hljs">            var res = Ti.UI.createTableViewRow({
                <span class="hljs-string">top :</span> <span class="hljs-string">'0dip'</span>,
                <span class="hljs-string">left :</span> <span class="hljs-string">'0dip'</span>,
                <span class="hljs-string">width :</span> Ti.App.SCREEN_WIDTH + <span class="hljs-string">'dip'</span>,
                <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>,
                <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'transparent'</span>,
<span class="hljs-label">                layout:</span> <span class="hljs-string">'absolute'</span>
            });

            .....

            var searchContacts = Ti.UI.createButton({
                <span class="hljs-string">top :</span> <span class="hljs-string">'5dip'</span>,
                <span class="hljs-string">right :</span> <span class="hljs-string">'1dip'</span>,
                <span class="hljs-string">height :</span> <span class="hljs-string">'44dip'</span>,
                <span class="hljs-string">width :</span> <span class="hljs-string">'48dip'</span>,
                <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/images/Common/addressbook.png'</span>
            });

            searchContacts.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
                Titanium.Contacts.showContacts({
<span class="hljs-label">                    selectedPerson:</span> function(e){
                        var data = e.person.fullName.split(<span class="hljs-string">' '</span>);
                        <span class="hljs-keyword">if</span>(data.length&gt;=<span class="hljs-number">1</span>)
                            name_input.value = data[<span class="hljs-number">0</span>];
                        <span class="hljs-keyword">if</span>(data.length&gt;=<span class="hljs-number">2</span>)
                            surname_input.value = data[<span class="hljs-number">1</span>];
                        <span class="hljs-keyword">if</span>(isInsurer &amp;&amp; e.person.email!=<span class="hljs-literal">null</span>){
                            <span class="hljs-keyword">if</span>(e.person.email.home!=<span class="hljs-literal">null</span> &amp;&amp; e.person.email.home.length&gt;=<span class="hljs-number">1</span>)
                                mail_input.value = e.person.email.home[<span class="hljs-number">0</span>];
                        }
                  }
                });
            });

            ....

            res.add(searchContacts);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 12th 2012, 5:31:55 am">December 12th 2012</span>
								by <span class='authorname'>Michal Gdak</span><br>
								<a class="icon-bg icon-link" href="question/145624/using-titaniumcontactsshowcontacts-many-times-on-one-view#answer-252570" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>What you mean is that I should remove searchContacts button when click action is finished from TableViewRow and than add it again?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 12th 2012, 5:39:31 am">December 12th 2012</span>
											by <span class='authorname'>Michal Gdak</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>use the comment section in my answer for discussion, that is required for other to put their suggestions and solutions.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 12th 2012, 6:28:38 am">December 12th 2012</span>
											by <span class='authorname'>Ashish Nigam</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
