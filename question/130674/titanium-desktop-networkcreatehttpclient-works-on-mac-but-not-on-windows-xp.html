<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium Desktop Network.createHTTPClient works on Mac but not on Windows XP Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium Desktop Network.createHTTPClient works on Mac but not on Windows XP</h1>
		</header>
		<section>
			<p>Titanium Desktop 1.1.0</p>
<p>Hello. I&#39;m having an issue with Titanium Desktop when calling an https URL using Windows XP. It works fine on my Mac Titanium Studio but throws the following error when run on Windows XP Titanium Studio. </p>
<p>&quot;[Titanium.Network.HTTPClient] [Error] Peer certificate cannot be authenticated with known CA certificates&quot;</p>
<p>I&#39;ve tried to add xhr.validatesSecureCertificate = false to no avail. </p>
<p>Is there any way to turn off the certificate check on WinHTTP?</p>
<p>Thank you for the help.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 14th 2012, 3:42:39 pm">January 14th 2012</span>
				by <span class='authorname'>Rich B</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>certificate</span></li>
					
						<li><span class='tagname'>desktop</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
						<li><span class='tagname'>win32</span></li>
					
						<li><span class='tagname'>winhttp</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Forgot to add that the certificate is a wildcard certificate. I verified the certificate installation with Digicert SSL Certificate Check Install and it passed.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 14th 2012, 3:46:39 pm">January 14th 2012</span>
								by <span class='authorname'>Rich B</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>We switched from wildcard cert to a SSL Plus cert.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 18th 2012, 2:28:15 pm">January 18th 2012</span>
								by <span class='authorname'>Rich B</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-227700">
				
						<section>
							<p>Hello,</p>
<p>I have seen this error in other contexts. You can go <a href="http:&#x2F;&#x2F;www.dyndnscommunity.com&#x2F;questions&#x2F;16783&#x2F;https-error.html">here</a> and try the solution listed there.</p>
<p>Best,</p>
<p>Mauro</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 16th 2012, 8:24:24 pm">January 16th 2012</span>
								by <span class='authorname'>Mauro Parra</span><br>
								<a class="icon-bg icon-link" href="question/130674/titanium-desktop-networkcreatehttpclient-works-on-mac-but-not-on-windows-xp.html#answer-227700" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Mauro. But that link is DynDNS specific and doesn&#39;t really shed light on the Titanium Desktop issue.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 18th 2012, 1:23:47 pm">January 18th 2012</span>
											by <span class='authorname'>Rich B</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-227900">
				
						<section>
							<p>I figured it out with bits and pieces from different sources. Here&#39;s details for other programmers having the same pain in the butt issue with Windows. Did I mention that nothing went wrong while developing on Mac, only Windoze. That said, here&#39;s my contribution to the community for this known issue (<a href="http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIDESK-716?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel">Jira Support Ticket TIDESK-716</a>) in Titanium Desktop (Win32 edition). The support ticket advises a workaround but doesn&#39;t give much detail on how to get it done and some other pitfalls.</p>
<p>The problem: sending data using the HTTP client over SSL fails with the error &quot;<strong>Peer certificate cannot be authenticated with known CA certificates</strong>.&quot;</p>
<p>The workaround: append the intermediate certificate from your SSL server certificate to the end of the Titanium file called rootcert.pem. Look for this file in the &quot;~\Application Data\Titanium\runtime\win32\&lt;sdk_version&gt;&quot; folder of your Windows install. For example, in Windows XP for Titanium Desktop 1.1.0, it&#39;s under &quot;C:\Documents and Settings\Administrator\Application Data\Titanium\runtime\win32\1.1.0\&quot; as well as in the workspace project folders&#39; &quot;dist\win32\&lt;project_name&gt;\runtime\1.1.0&quot;.</p>
<p>Also, if you haven&#39;t ever installed a SSL cert on your server before, this is the tricky part as every certificate authority names their intermediate certificates something else and could even issue multiple ones. For example, in my case we purchased a single domain Digicert SSL Plus certificate. When they sent me the certificate, they included another file called DigiCertCA.crt which is the intermediate certificate (Apache calls this the &quot;Chain&quot; file). So all I did was cut and paste the contents of that file and append it to the end of the rootcert.pem file, matching how they formatted the other entries, and bang! It worked.</p>
<p>Here&#39;s another way to get your intermediate certificate if it&#39;s already installed on your webserver. On Windows, open Internet Explorer and go to your https:&#x2F;&#x2F; domain. Click the lock icon (Windows XP) or however you can view the certificate details. Click on the &quot;Certification Path&quot; tab, double-click the entry just above your domain, click the &quot;Details&quot; tab, and then click the &quot;Copy to File&quot; button. The Certificate export wizard starts. Make sure to select &quot;Base-64 encoded X.509&quot; as the file format. Then save it to a file. </p>
<p>I can hear you say, damn, I have to put out a patch with this rootcert.pem file in it. Nope, you can add the intermediate certificate into the rootcert.pem file under the &quot;Application Data&quot; path I described above and &quot;Clean&quot; and &quot;Build&quot; the project. This will put the correct rootcert.pem file in your &quot;dist&quot; folder. Now all you have to do is build the package manually to get your .msi installer using this helpful website from <a href="http:&#x2F;&#x2F;www.dionysopoulos.me&#x2F;blog&#x2F;packaging-titanium-dekstop-apps-on-windows">Nicholas Dionysopoulos</a>.</p>
<p>Cool right. Yeah, I hate Windows. Or you could just spend $200-$300 more on an SSL certificate from Thawte or Comodo that are already included in the Titanium rootcert.pem file. But what fun would that be. :)</p>
<p>Hope this helps someone. Cheers.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 18th 2012, 2:27:14 pm">January 18th 2012</span>
								by <span class='authorname'>Rich B</span><br>
								<a class="icon-bg icon-link" href="question/130674/titanium-desktop-networkcreatehttpclient-works-on-mac-but-not-on-windows-xp.html#answer-227900" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
