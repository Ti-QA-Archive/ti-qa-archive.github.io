<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Append Section to Table » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Append Section to Table</h1>
		</header>
		<section>
			<p>####Problem:<br>Is there a way to append a section to a table? You can do myTable.appendRow(row), but it appears to fail if you add a section element, that is, a TableViewSection. Is there such thing as an appendSection() method?</p>
<p>####Example:<br>Ultimately what I want to do is be able to click a button and add more rows to a table, but having those rows in a section, so technically I&#39;m adding a section to the table. This is an example:</p>
<pre><code class="hljs">var section1 = Titanium.UI.TableViewSection()<span class="hljs-comment">;</span>
for(i=0<span class="hljs-comment">; i&lt;rows1.length; i++){</span>
    var row = Titanium.UI.TableViewRow()<span class="hljs-comment">;</span>
    section1.add(row)<span class="hljs-comment">;</span>
}
myTable.appendRow(section1)<span class="hljs-comment">;</span>

var section2 = Titanium.UI.TableViewSection()<span class="hljs-comment">;</span>
for(i=0<span class="hljs-comment">; i&lt;rows2.length; i++){</span>
    var row = Titanium.UI.TableViewRow()<span class="hljs-comment">;</span>
    section2.add(row)<span class="hljs-comment">;</span>
}
myTable.appendRow(section2)<span class="hljs-comment">;</span>
</code></pre><p>This is condensed of course, I&#39;m going to be adding labels and such to each row and have different titles for each section.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 14th 2011, 12:39:48 pm">March 14th 2011</span>
				by <span class='authorname'>Joe iEntry</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>append</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
						<li><span class='tagname'>tableviewsection</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>This would be a great question to have answered or even a workaround, I&#39;m not getting anything to work. Anyone have an example?</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 3rd 2011, 6:39:12 pm">May 3rd 2011</span>
								by <span class='authorname'>Joe iEntry</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-204251">
				
						<section>
							<p>Pretty straight forward…</p>
<pre><code class="hljs"><span class="hljs-tag">myTable</span><span class="hljs-class">.add</span>(<span class="hljs-tag">section2</span>);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 14th 2011, 5:20:36 pm">March 14th 2011</span>
								by <span class='authorname'>Luc Martin</span><br>
								<a class="icon-bg icon-link" href="question/117209/append-section-to-table.html#answer-204251" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;m not able to get this to work. I tried:</p>
<pre><code class="hljs">
<span class="hljs-title">var</span> win = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createWindow();
<span class="hljs-title">var</span> <span class="hljs-typedef"><span class="hljs-keyword">data</span> = [];</span>

<span class="hljs-typedef"><span class="hljs-keyword">data</span>[0] = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTableViewSection<span class="hljs-container">({<span class="hljs-title">headerTitle</span>:'<span class="hljs-type">Header</span> 1'})</span>;</span>
<span class="hljs-typedef"><span class="hljs-keyword">data</span>[0].add<span class="hljs-container">(<span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.<span class="hljs-title">createTableViewRow</span>({<span class="hljs-title">title</span>:'<span class="hljs-type">Row</span> 1'})</span>);</span>

<span class="hljs-typedef"><span class="hljs-keyword">data</span>[1] = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTableViewSection<span class="hljs-container">({<span class="hljs-title">headerTitle</span>:'<span class="hljs-type">Header</span> 2'})</span>;</span>
<span class="hljs-typedef"><span class="hljs-keyword">data</span>[1].add<span class="hljs-container">(<span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.<span class="hljs-title">createTableViewRow</span>({<span class="hljs-title">title</span>:'<span class="hljs-type">Row</span> 2'})</span>);</span>

<span class="hljs-title">var</span> tableView = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTableView({
    <span class="hljs-typedef"><span class="hljs-keyword">data</span>:<span class="hljs-keyword">data</span>,</span>
    style: <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.iPhone.<span class="hljs-type">TableViewStyle</span>.<span class="hljs-type">GROUPED</span>
});

<span class="hljs-title">var</span> section3 = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTableViewSection({headerTitle:'<span class="hljs-type">Header</span> <span class="hljs-number">3</span>'});
<span class="hljs-title">section3</span>.add(<span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTableViewRow({title:'<span class="hljs-type">Row</span> <span class="hljs-number">3</span>'}));
<span class="hljs-title">tableView</span>.add(section3);

<span class="hljs-title">win</span>.add(tableView);
<span class="hljs-title">win</span>.open();
</code></pre><p>My section 3 does not show up (only the first two). Anything else that I need to do?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 15th 2011, 5:25:41 am">March 15th 2011</span>
											by <span class='authorname'>Peter Olsson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This is exactly the issue I&#39;m having. If I add a whole bunch of sections at once it&#39;s fine, which is what Peter did for sections 1 and 2, but when it comes to adding a section later, such as his section 3, it does not work. In fact, the application fails unexpectedly for me. Luc Martin, or someone else, can you confirm that table sections can be added iteratively as shown here?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 16th 2011, 11:43:10 am">March 16th 2011</span>
											by <span class='authorname'>Joe iEntry</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>pretty much similar problem. app crashes woith the following exception:</p>
<p>(Titanium 1.6. - iOS 4.1)</p>
<pre><code class="hljs"><span class="hljs-number">2011</span>-<span class="hljs-number">03</span>-<span class="hljs-number">17</span> <span class="hljs-number">16</span>:<span class="hljs-number">01</span>:<span class="hljs-number">24.807</span> iWear[<span class="hljs-number">22816</span>:<span class="hljs-number">207</span>] *** Terminating app due <span class="hljs-keyword">to</span>
uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid 
update: invalid <span class="hljs-type">number</span> <span class="hljs-keyword">of</span> rows <span class="hljs-keyword">in</span> section <span class="hljs-number">0.</span> The <span class="hljs-type">number</span> <span class="hljs-keyword">of</span> rows contained 
<span class="hljs-keyword">in</span> an existing section <span class="hljs-keyword">after</span> <span class="hljs-keyword">the</span> update (<span class="hljs-number">1</span>) must be <span class="hljs-keyword">equal</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> <span class="hljs-type">number</span> <span class="hljs-keyword">of</span> 
rows contained <span class="hljs-keyword">in</span> <span class="hljs-keyword">that</span> section <span class="hljs-keyword">before</span> <span class="hljs-keyword">the</span> update (<span class="hljs-number">1</span>), plus <span class="hljs-keyword">or</span> minus <span class="hljs-keyword">the</span> 
<span class="hljs-type">number</span> <span class="hljs-keyword">of</span> rows inserted <span class="hljs-keyword">or</span> deleted <span class="hljs-keyword">from</span> <span class="hljs-keyword">that</span> section (<span class="hljs-number">1</span> inserted, <span class="hljs-number">0</span> 
deleted).'
</code></pre><p>as soon as the tableview has been populated with one section using appendRow, a second call to appendView with a section leads to this error.</p>
<p>critical for me as I fetch data asynchronous from web requests</p>
<p>view.add does not do anything</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 17th 2011, 1:45:59 pm">March 17th 2011</span>
											by <span class='authorname'>stefan swoboda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">var tableview = <span class="hljs-filename">Titanium.UI.createTableView({
    data</span>:data,
    style: <span class="hljs-filename">Titanium.UI.iPhone.TableViewStyle.GROUPED,
    minRowHeight</span>:<span class="hljs-number">40</span>
});


<span class="hljs-filename">tableview.appendRow(Ti.UI.createTableViewSection({headerTitle</span>:<span class="hljs-string">"xxx"</span>}));
// <span class="hljs-filename">tableview.appendRow(Ti.UI.createTableViewSection({headerTitle</span>:<span class="hljs-string">"xxy"</span>}));
</code></pre><p>try this. and then uncomment the second appendRow line and try it again.<br>app dies very silently. looks like I have been extremely lucky to have cathed the error posted above</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 17th 2011, 2:09:32 pm">March 17th 2011</span>
											by <span class='authorname'>stefan swoboda</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-205505">
				
						<section>
							<p>I just solved a very similar problem by using table.setData to &quot;refresh&quot; the table as described here:</p>
<p>http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;21581&#x2F;adding-sections–rows-to-tableview—-doc-examples-dont-work</p>
<p>In my case, I have a table with two sections. I am dynamically adding rows to one of the sections directly. The app was not showing the changes and crashing. Solution: call setData with the array of sections after adding a row.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 2nd 2011, 5:56:25 am">April 2nd 2011</span>
								by <span class='authorname'>Robb Shecter</span><br>
								<a class="icon-bg icon-link" href="question/117209/append-section-to-table.html#answer-205505" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Using table.setData does work, but is there any way to avoid having to make an array and then do table.setData(array)? How do you add sections dynamically?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 21st 2011, 5:58:14 pm">April 21st 2011</span>
											by <span class='authorname'>Joe iEntry</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It appears that <code>setData</code> is the only way to dynamically add sections to tables. It&#39;s a very long process.</p>
<h4 id="the-idea-">The Idea:</h4>
<p>Basically what you have to do is iterate through the table as is, push those sections to an array, create whatever new sections you want, push those to that same array, and then do <code>table.setData(sections)</code>.</p>
<h4 id="the-code-">The Code:</h4>
<pre><code class="hljs"><span class="hljs-keyword">var</span> sections = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=0;i&lt;<span class="hljs-keyword">table</span>.data.length;i++) {
    sections.push(<span class="hljs-keyword">table</span>.data[i]);
}
<span class="hljs-keyword">var</span> newSection = Ti.UI.createTableViewSection();
<span class="hljs-comment">// add some rows to it, and then...</span>
sections.push(newSection);
<span class="hljs-keyword">table</span>.setData(sections);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="May 3rd 2011, 7:19:20 pm">May 3rd 2011</span>
											by <span class='authorname'>Joe iEntry</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
