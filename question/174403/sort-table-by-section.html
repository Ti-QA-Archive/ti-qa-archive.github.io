<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Sort table by section Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Sort table by section</h1>
		</header>
		<section>
			<p>Hi i want to make a sort of my table by section and the section contain the value of the date any help  please</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 21st 2014, 3:48:59 pm">May 21st 2014</span>
				by <span class='authorname'>amri hichem</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>If you want answers to questions - you have to show you have at least tried, this may be code that doesn&#39;t quite work - it may be processes you tried or links to things that you have worked through.</p>
<p>I know you have not been using the platform for long - but trust me the community does want to help - but you have to show you have done your part.</p>
<ul>
<li><a href="http:&#x2F;&#x2F;www.tidev.io&#x2F;2014&#x2F;02&#x2F;05&#x2F;titanium-qa-how-to-ask-a-successful-question&#x2F;">Titanium Q&amp;A: How to ask a successful question</a></li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="May 21st 2014, 4:18:38 pm">May 21st 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><pre><code class="hljs"><span class="hljs-keyword">var</span> json = JSON.parse(this.responseText);
   <span class="hljs-keyword">var</span> json= json.GetAllEventsResult;

   <span class="hljs-comment">//Ti.API.info(jsonObject.query.results.item.length);</span>

   <span class="hljs-comment">//loop each item in the json object</span>
   <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; json.length; i++) <span class="hljs-comment">{
        //create a table row
        var imagee= Titanium.Utils.base64decode(json[i].GetEventCatImage);
        var row = Titanium.UI.createTableViewRow({
            hasChild: true,
            className: 'recipe-row',
            backgroundColor: '#fff',
            filter: json[i].GetEventTown +json[i].GetEventTitle+json[i].GetEventArtiste, 

    //this is the data we want to search on (title)
             title:json[i]. GetEventTitle,
             telephone:json[i].GetTelephone,
            descrption:json[i].GetEventDescrption,
            date:json[i].GetEventDate,
            langetude:json[i].GetEventLangetude,
            tarifs:json[i].GetEventTarifs,
            latetude:json[i].GetEventLatitude,
            id:json[i].GetEventId,
            idd:json[i].GetEventIdd,
            pic:json[i].GetEventImage,
            town:json[i].GetEventTown,
            artiste:json[i].GetEventArtiste,
            imageee:imagee
        //    descrption: json[i].Employeelasttname
            //_link: jsonObject.query.results.item[i].link
        }</span>);

<span class="hljs-keyword">var</span> sec= Titanium.UI.createTableViewSection( <span class="hljs-comment">{headerTitle:'4/14/2014'}</span>);
<span class="hljs-keyword">if</span>(json[i].GetEventDate==sec.headerTitle)    
        <span class="hljs-comment">{ sec.add(row);
            data[i]=sec;}</span>
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="May 21st 2014, 5:04:55 pm">May 21st 2014</span>
								by <span class='authorname'>amri hichem</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-278928">
				
						<section>
							<p>Hi</p>
<p>OK your code effort shows you have been working with the data - excellent.</p>
<p>So you wish to sort the tableView with the data being sorted by the date field <strong>GetEventDate</strong>.</p>
<p>The easiest way to sort the data is to use the underscore library.  You do not say if you are using;</p>
<ul>
<li><p>Titanium with the Alloy framework</p>
<p>or</p>
</li>
<li><p>Titanium without the Alloy framework</p>
</li>
</ul>
<p>However judging by your code syntax I will assume without.</p>
<p>Follow these initial steps;</p>
<ul>
<li>Download <a href="http:&#x2F;&#x2F;underscorejs.org&#x2F;underscore.js">underscore.js</a></li>
<li>Save it to {appname}&#x2F;resources&#x2F;</li>
</ul>
<p><em>For those using Alloy the previous two steps are not required.</em></p>
<p>To sort the data using the date node you would adjust your supplied code as below;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'underscore'</span>);  <span class="hljs-comment">// line only needed if not Alloy</span>
<span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
<span class="hljs-keyword">var</span> json= json.GetAllEventsResult;
json = _.sortBy(json, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">element</span>) </span>{ <span class="hljs-keyword">return</span> element.GetEventDate; });

<span class="hljs-comment">// the rest of your code</span>
</code></pre><p>The <strong>json</strong> array now has the data in the correct order.</p>
<p>Now this code will use that sorted array and give you the starting points of how and where you add the sections and rows.  I will let you add those - that way you fully understand what is happening.  This extra code snippet should appear BEFORE your existing loop as it tells you in the console where to add your code for simply creating the section read for the rows.  Once you are happy you insert your code inside.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'underscore'</span>);  <span class="hljs-comment">// line only needed if not Alloy</span>
<span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
<span class="hljs-keyword">var</span> json= json.GetAllEventsResult;
json = _.sortBy(json, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">element</span>) </span>{ <span class="hljs-keyword">return</span> element.GetEventDate; });
<span class="hljs-keyword">var</span> last = <span class="hljs-string">''</span>;
_.each(data, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">entry</span>) </span>{
    <span class="hljs-keyword">if</span> (last !== entry.GetEventDate) {
        Ti.API.info(<span class="hljs-string">'create section: '</span> + entry.GetEventDate);
        last = entry.GetEventDate;
    }
    Ti.API.info(<span class="hljs-string">'add row: '</span> + entry.GetEventTitle);
});

<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; json.length; i++) {
<span class="hljs-comment">// the rest of your code</span>
</code></pre><p>A quick tip the underscore library I have included here will save lots of time, I have only used two of the methods - sortBy and each.  &#39;sortBy&#39; explains itself, &#39;each&#39; however is very powerful as it is very easy to use.</p>
<p>This is the loop you normally create in your code;</p>
<pre><code class="hljs"><span class="hljs-keyword">for</span>(var <span class="hljs-built_in">i</span> = <span class="hljs-number">0</span>; <span class="hljs-built_in">i</span> &lt; json.<span class="hljs-built_in">length</span>; <span class="hljs-built_in">i</span>++) <span class="hljs-cell">{
  Ti.API.info(<span class="hljs-string">'title: '</span> + json[i]. GetEventTitle);
}</span>
</code></pre><p>However using the &#39;underscore&#39; library you can make things a little easier to code and some what easier to read;</p>
<pre><code class="hljs">_.<span class="hljs-keyword">each</span>(json, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(item)</span> </span>{
    Ti.API.info(<span class="hljs-string">'title: '</span> + item.GetEventTitle);
});
</code></pre><p>You may choose never to use it - but in case you do - that is how you do use it.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 21st 2014, 5:42:48 pm">May 21st 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/174403/sort-table-by-section.html#answer-278928" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>thnk you very much for your help<br>but what about the  section  i want to make a section on each collection of rows which have the same date did u understand me sir</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2014, 6:45:08 pm">May 21st 2014</span>
											by <span class='authorname'>amri hichem</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you have used the included code I provided you will see that it shows you how and when to add the sections and when to add the rows to those sections.  If i do all the work for you, you will not have learnt anything and will not be able to solve the problem again.</p>
<p>I have given 95% of what you need - your own code has the other 5% of logic, just join your bits into where my code says.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2014, 6:58:19 pm">May 21st 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i am so thankful for the help really underscore.js i discovred now and the problem with your code is that add row to section before i fill the row and after that how can i fill data of the list view</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2014, 7:07:39 pm">May 21st 2014</span>
											by <span class='authorname'>amri hichem</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>table view not list view sorry</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2014, 7:10:38 pm">May 21st 2014</span>
											by <span class='authorname'>amri hichem</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>As it is 10:20pm here and I should leave at 6pm I am off for the day.  If you can show you have tried using the code example I gave (not just the underscore part) I will help you finish it in the morning.</p>
<p>But seriously the first each is almost the entire answer, you have the missing bits in your own code ready to slot in.  I am trying to help you learn, rather than throw you code you will not understand.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2014, 7:22:05 pm">May 21st 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok  i will try and i will show you what i have done and thnx again</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2014, 7:27:02 pm">May 21st 2014</span>
											by <span class='authorname'>amri hichem</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi  here is what i do but it doesn&#39;t display the table:</p>
<pre><code class="hljs">xhr.onload = function() { 



   <span class="hljs-comment">//create a json object using the JSON.PARSE function</span>
   var json = JSON.parse(<span class="hljs-keyword">this</span>.responseText);
   var json= json.GetAllEventsResult;

  json = _.sortBy(json, function (element) { <span class="hljs-keyword">return</span> element.GetEventDate; });
var last = <span class="hljs-string">''</span>;
_.each(data, function (entry) {
    <span class="hljs-keyword">if</span> (last !== entry.GetEventDate) {
        alert(<span class="hljs-string">'create section: '</span> + entry.GetEventDate);
       var sec = Titanium.UI.createTableViewSection( {headerTitle:entry.GetEventDate,backgroundcolor:<span class="hljs-string">"#fff"</span>});
        last = entry.GetEventDate;
    }
   sec.<span class="hljs-built_in">add</span>(entry);
    });




   <span class="hljs-comment">//loop each item in the json object</span>
   <span class="hljs-keyword">for</span>(var i = <span class="hljs-number">0</span>; i &lt; json.length; i++) {
        <span class="hljs-comment">//create a table row</span>
        var imagee= Titanium.Utils.base64decode(json[i].GetEventCatImage);
        var row = Titanium.UI.createTableViewRow({
            hasChild: <span class="hljs-keyword">true</span>,
            className: <span class="hljs-string">'recipe-row'</span>,
            backgroundColor: <span class="hljs-string">'#fff'</span>,
            <span class="hljs-built_in">filter</span>: json[i].GetEventTown +json[i].GetEventTitle+json[i].GetEventArtiste, 

    <span class="hljs-comment">//this is the data we want to search on (title)</span>
             title:json[i]. GetEventTitle,
             telephone:json[i].GetTelephone,
            descrption:json[i].GetEventDescrption,
            date:json[i].GetEventDate,
            langetude:json[i].GetEventLangetude,
            tarifs:json[i].GetEventTarifs,
            latetude:json[i].GetEventLatitude,
            id:json[i].GetEventId,
            idd:json[i].GetEventIdd,
            pic:json[i].GetEventImage,
            town:json[i].GetEventTown,
            artiste:json[i].GetEventArtiste,
            imageee:imagee

        });









}
        var titleLabel = Titanium.UI.createLabel({
            <span class="hljs-built_in">text</span>: json[i].GetEventTitle,
            font: {fontSize: <span class="hljs-number">14</span>, fontFamily:<span class="hljs-string">"SpicyRice-Regular"</span>},
            left: <span class="hljs-number">70</span>,
            top: <span class="hljs-number">5</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">20</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">210</span>,

            <span class="hljs-built_in">color</span>: <span class="hljs-string">'#000'</span>,
            touchEnabled: <span class="hljs-keyword">false</span>
        });
        <span class="hljs-keyword">if</span>(titleLabel.<span class="hljs-built_in">text</span> == <span class="hljs-string">''</span>) {
            titleLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">'No description is available.'</span>;
        }
        row.<span class="hljs-built_in">add</span>(titleLabel);

        var dateLabel = Titanium.UI.createLabel({
            <span class="hljs-built_in">text</span>: json[i].GetEventDate,
            font: {fontSize: <span class="hljs-number">14</span>, fontFamily:<span class="hljs-string">"SpicyRice-Regular"</span>},
            left: <span class="hljs-number">70</span>,
            top: <span class="hljs-number">27</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">20</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">210</span>,

            <span class="hljs-built_in">color</span>: <span class="hljs-string">'#A0A0A0'</span>,
            touchEnabled: <span class="hljs-keyword">false</span>
        });

        row.<span class="hljs-built_in">add</span>(dateLabel);
        var townLabel = Titanium.UI.createLabel({
            <span class="hljs-built_in">text</span>: json[i].GetEventTown,
            font: {fontSize: <span class="hljs-number">15</span>, fontFamily:<span class="hljs-string">"SpicyRice-Regular"</span>},
            left: <span class="hljs-number">70</span>,
            top: <span class="hljs-number">40</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">30</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">399</span>,
            <span class="hljs-built_in">color</span>: <span class="hljs-string">'#A0A0A0'</span>,
            touchEnabled: <span class="hljs-keyword">false</span>
        });

    row.<span class="hljs-built_in">add</span>(townLabel);

        var descrptionLabel = Titanium.UI.createLabel({
            <span class="hljs-built_in">text</span>: json[i].GetEventDescrption,
            font: {fontSize: <span class="hljs-number">14</span>, fontFamily:<span class="hljs-string">"SpicyRice-Regular"</span>},
            left: <span class="hljs-number">70</span>,
            top: <span class="hljs-number">30</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">400</span>,
            <span class="hljs-built_in">color</span>: <span class="hljs-string">'#A0A0A0'</span>,
            touchEnabled: <span class="hljs-keyword">false</span>
        });

    <span class="hljs-comment">//    row.add(descrptionLabel);</span>


        <span class="hljs-comment">//add our little icon to the left of the row</span>
        var iconImage = Titanium.UI.createImageView({
            <span class="hljs-built_in">image</span>:<span class="hljs-string">"http://famissimamobile.azurewebsites.net/Images/"</span>+imagee,
            <span class="hljs-variable">width</span>:  <span class="hljs-number">50</span>,
            <span class="hljs-variable">height</span>:  <span class="hljs-number">50</span>,
            left: <span class="hljs-number">10</span>,
            top: <span class="hljs-number">10</span>,
            touchEnabled: <span class="hljs-keyword">false</span>
        });
        row.<span class="hljs-built_in">add</span>(iconImage);

data.push(row);
   }




   <span class="hljs-comment">//finally, set the data property of the tableView to our data[] object</span>





   tblRecipess.data = data;   

};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="May 22nd 2014, 5:29:54 am">May 22nd 2014</span>
											by <span class='authorname'>amri hichem</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Malcolm Hollingsworth i  think that u haven&#39;t find a solution for this like me really it make me crazy i fed 2 days in the same problem  !!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 22nd 2014, 5:07:28 pm">May 22nd 2014</span>
											by <span class='authorname'>amri hichem</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
