<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>orientationchange not working on android (Alloy) Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>orientationchange not working on android (Alloy)</h1>
		</header>
		<section>
			<p>I have a simple app which opens a new window when oriantation changes using Alloy. It works fine on my iPhone test device. On my android phone it doesn&#39;t work. It worked fine on both phones before i switched to Alloy.<br>What seems to be the problem? Maybe a bug with the latest Alloy release?</p>
<pre><code class="hljs">alloy.js

Ti.Gesture.addEventListener(<span class="hljs-string">"orientationchange"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    <span class="hljs-keyword">switch</span>(e.orientation){
        <span class="hljs-keyword">case</span> Ti.UI.PORTRAIT:
            Alloy.Globals.WINDOW_TWO.close();
            Alloy.Globals.WINDOW_ONE = Alloy.createController(<span class="hljs-string">"win1"</span>).getView();
        <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> Ti.UI.LANDSCAPE_LEFT:
            Alloy.Globals.WINDOW_ONE.close();
            Alloy.Globals.WINDOW_TWO = Alloy.createController(<span class="hljs-string">"win2"</span>).getView();
        <span class="hljs-keyword">break</span>;
    }
}
</code></pre><ol>
<li>Application type: mobile.</li>
<li>Titanium SDK: 3.1.0.GA</li>
</ol>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 13th 2013, 1:27:19 pm">May 13th 2013</span>
				by <span class='authorname'>Elvis Mercado</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>orientation</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>A couple questions:</p>
<ul>
<li>Did you update the TiSDK at the same time? This seems more likely like a Titanium issue than it is an Alloy one, but lets make sure.</li>
<li>You haven&#39;t don&#39;t us anything about the problem you are encountering. What does &quot;doesn&#39;t work&quot; mean, in detail?</li>
<li>Alloy version? The fact that you only referenced the TiSDK version leads me to believe my first suspicion might be right. What happens if you run your app, with Alloy, against the 3.0.X TiSDK?</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="May 13th 2013, 1:57:40 pm">May 13th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Tony,</p>
<p>I updated Titanium Studio complete with the latest release of Alloy. 1.1.2. Sorry to have been vague. What i meant with &#39;doesn&#39;t work&#39; is that when i change the iPhone from portrait to landscape the windows change correctly. On my Galaxy S phone when i do the same it seems as if no oriantation change is triggered, so the windows don&#39;t change and nothing happens. Also tested with HTC phone.<br>So why is the app doing this correctly on iOS and not on Android?</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 14th 2013, 5:33:29 am">May 14th 2013</span>
								by <span class='authorname'>Elvis Mercado</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Also tried TiSDK 3.0.2 and 3.0.0 with no success</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 14th 2013, 6:08:47 am">May 14th 2013</span>
								by <span class='authorname'>Elvis Mercado</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>can you verify if your orientation handler is firing at all on android?</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 14th 2013, 11:31:52 am">May 14th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>The orientation handler is not firing at all on android. I have the following in my code, maybe this has something to do with it.</p>
<pre><code class="hljs"><span class="hljs-tag">app</span><span class="hljs-class">.tss</span>

"<span class="hljs-tag">Window</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">orientationModes</span>:<span class="hljs-value"> [Ti.UI.PORTRAIT]
</span></span></span>}
</code></pre><pre><code class="hljs"><span class="hljs-tag">win2</span><span class="hljs-class">.tss</span>

"<span class="hljs-id">#win2</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">orientationModes</span>:<span class="hljs-value"> [Ti.UI.LANDSCAPE_LEFT, Ti.UI.LANDSCAPE_RIGHT]
</span></span></span>}
</code></pre><p>So mainly all windows i create are layed out in portrait unless i specify that for another window, like win2. It works on iPhone device but not on android. I also tried removing the styling from app.tss and writing it specifically for win1, but it also did not work.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 14th 2013, 3:03:40 pm">May 14th 2013</span>
								by <span class='authorname'>Elvis Mercado</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-262695">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>yes, constraining the orientations would undoubtedly prevent the orientation events from firing. What is your expected behavior here? The way this is structured it doesn&#39;t appear as though it should support more than one orientation on any given platform unless there&#39;s something else yu aren&#39;t showing in the style. the #win2 style will overwrite the &quot;Window&quot; one, they won&#39;t merge. If this works on iOS it&#39;s likely a bug in that the orientationModes are being ignored. I would get rid of the orientationModes altogether and test whether that resolves your issue for the particular case, then see how you can work it back in afterward.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 14th 2013, 3:27:26 pm">May 14th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="../../question/152307/orientationchange-not-working-on-android-alloy.html#answer-262695" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>What i expected to happen was that the listener would be always active, and on orientation changes that the window with the correct orientation would come forward. Indeed removing the Window styling from app.tss helps but it is still difficult to keep one window in the correct orientation when active.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 16th 2013, 6:05:27 am">May 16th 2013</span>
											by <span class='authorname'>Elvis Mercado</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
