<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Game reset help » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Game reset help</h1>
		</header>
		<section>
			<p>Hello,</p>
<p>Can you give me a code snippet on how can I make the game view reset everytime I tap on the New game or Main Menu?</p>
<p>This is in the Play Game.js</p>
<pre><code class="hljs"><span class="hljs-comment">//function playGame() {</span>

<span class="hljs-comment">// Create game gameScene</span>
var gameScene = quicktigame2d.createScene();

<span class="hljs-comment">// Create your textsprite</span>
var countdownlabel = quicktigame2d.createSprite({
    <span class="hljs-built_in">image</span>: <span class="hljs-string">"images/GAME_SCENE/Others/countdown_3.png"</span>,
    x: <span class="hljs-number">150</span>,
    y: <span class="hljs-number">290</span>
});

var timerlabel = quicktigame2d.createTextSprite({
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"00.00"</span>,
    y: <span class="hljs-number">800</span>,
    x: <span class="hljs-number">265</span>,
    fontSize:<span class="hljs-number">50</span>,
    <span class="hljs-built_in">textAlign</span>: Ti.UI.TEXT_ALIGNMENT_CENTER
});

var currentLabel = quicktigame2d.createTextSprite({
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"01"</span>,
    y: <span class="hljs-number">95</span>,
    x: <span class="hljs-number">60</span>,
    fontSize:<span class="hljs-number">50</span>,
    <span class="hljs-built_in">textAlign</span>: Ti.UI.TEXT_ALIGNMENT_CENTER
});

<span class="hljs-comment">// Create your sprite</span>
var bg = quicktigame2d.createSprite({
    <span class="hljs-built_in">image</span>:<span class="hljs-string">'images/GAME_SCENE/Background/game_bg.png'</span>
});
gameScene.<span class="hljs-built_in">add</span>(bg);
var menuBtn = quicktigame2d.createSprite({
    <span class="hljs-built_in">image</span>:<span class="hljs-string">'images/GAME_SCENE/Buttons/menu_button.png'</span>
});
var newBtn = quicktigame2d.createSprite({
    <span class="hljs-built_in">image</span>:<span class="hljs-string">'images/GAME_SCENE/Buttons/new_button.png'</span>
});
var gamestart = quicktigame2d.createSprite({
    <span class="hljs-built_in">image</span>: <span class="hljs-string">"images/GAME_SCENE/Others/game_start.png"</span>
});
gamestart.hide();

<span class="hljs-comment">//display();</span>
var a = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">11</span>,<span class="hljs-number">12</span>,<span class="hljs-number">13</span>,<span class="hljs-number">14</span>,<span class="hljs-number">15</span>,<span class="hljs-number">16</span>,<span class="hljs-number">17</span>,<span class="hljs-number">18</span>,<span class="hljs-number">19</span>,<span class="hljs-number">20</span>,<span class="hljs-number">21</span>,<span class="hljs-number">22</span>,<span class="hljs-number">23</span>,<span class="hljs-number">24</span>,<span class="hljs-number">25</span>];
var current = <span class="hljs-number">1</span>;
a.<span class="hljs-built_in">sort</span>(function(){ <span class="hljs-keyword">return</span> Math.<span class="hljs-built_in">random</span>()-<span class="hljs-number">0.5</span>; });

var x = <span class="hljs-number">45</span>;
var y = <span class="hljs-number">170</span>;
var number = [];
<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">25</span>;i++)
{
    number[i] = quicktigame2d.createSprite({
        <span class="hljs-built_in">image</span>:<span class="hljs-string">'images/GAME_SCENE/Numbers/'</span>+a[i]+<span class="hljs-string">'.png'</span>
    });
    number[i].tag = a[i];
    number[i].move(x,y);
    x+=<span class="hljs-number">110</span>;
    <span class="hljs-keyword">if</span>((i+<span class="hljs-number">1</span>)%<span class="hljs-number">5</span> == <span class="hljs-number">0</span>){
        y += <span class="hljs-number">110</span>;
        x = <span class="hljs-number">50</span>;
    }
    gameScene.<span class="hljs-built_in">add</span>(number[i]);
}


<span class="hljs-comment">// Add sprite into gameScene</span>
gameScene.<span class="hljs-built_in">add</span>(menuBtn);
gameScene.<span class="hljs-built_in">add</span>(newBtn);
gameScene.<span class="hljs-built_in">add</span>(currentLabel);
gameScene.<span class="hljs-built_in">add</span>(timerlabel);
gameScene.<span class="hljs-built_in">add</span>(countdownlabel);
gameScene.<span class="hljs-built_in">add</span>(gamestart);

var touchMoveBase = {
    <span class="hljs-built_in">set</span>: function(<span class="hljs-built_in">point</span>) {
        <span class="hljs-keyword">this</span>.x = <span class="hljs-built_in">point</span>.x;
        <span class="hljs-keyword">this</span>.y = <span class="hljs-built_in">point</span>.y;
    }
}

game.addEventListener(<span class="hljs-string">'touchstart'</span>, function(e) {    
    var scaleX = game.screen.<span class="hljs-variable">width</span>   / game.<span class="hljs-built_in">size</span>.<span class="hljs-variable">width</span>;
    var scaleY = game.screen.<span class="hljs-variable">height</span>  / game.<span class="hljs-built_in">size</span>.<span class="hljs-variable">height</span>;

    var x = e.x * scaleX;
    var y = e.y * scaleY;

    <span class="hljs-keyword">if</span>(menuBtn.contains(x,y)){
        <span class="hljs-comment">//menuBtn.image = 'images/GAME_SCENE/Buttons/menu_button_press.png';</span>
        <span class="hljs-comment">//alert('Menu');</span>
        <span class="hljs-comment">//game.popScene();</span>
        <span class="hljs-comment">//game.startCurrentScene();</span>
    }
});

game.addEventListener(<span class="hljs-string">'touchmove'</span>, function(e) {    
    var scaleX = game.screen.<span class="hljs-variable">width</span>   / game.<span class="hljs-built_in">size</span>.<span class="hljs-variable">width</span>;
    var scaleY = game.screen.<span class="hljs-variable">height</span>  / game.<span class="hljs-built_in">size</span>.<span class="hljs-variable">height</span>;

    var x = e.x * scaleX;
    var y = e.y * scaleY;

});

game.addEventListener(<span class="hljs-string">'touchend'</span>, function(e) {    
    var scaleX = game.screen.<span class="hljs-variable">width</span>   / game.<span class="hljs-built_in">size</span>.<span class="hljs-variable">width</span>;
    var scaleY = game.screen.<span class="hljs-variable">height</span>  / game.<span class="hljs-built_in">size</span>.<span class="hljs-variable">height</span>;

    var x = e.x * scaleX;
    var y = e.y * scaleY;

    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">25</span>;i++){
        <span class="hljs-keyword">if</span>(number[i].contains(x,y)){
            <span class="hljs-comment">//alert(number[i].tag);</span>
            <span class="hljs-keyword">if</span>(number[i].tag == current){
                number[i].hide();
                current++;
                <span class="hljs-keyword">if</span>(number[i].tag != <span class="hljs-number">25</span>)
                    <span class="hljs-keyword">if</span>(current&lt;<span class="hljs-number">10</span>)
                        currentLabel.<span class="hljs-built_in">text</span> = <span class="hljs-string">"0"</span> + current;
                    <span class="hljs-keyword">else</span>
                        currentLabel.<span class="hljs-built_in">text</span> = current;
                    <span class="hljs-comment">// Ti.API.info("CURRENT: "+currentLabel.text);</span>
                <span class="hljs-keyword">if</span>(number[i].tag == <span class="hljs-number">25</span>){
                    <span class="hljs-comment">//clearInterval(timer);</span>
                    gameScene.remove(timerlabel);
                    alert(<span class="hljs-string">"Congratulations!\nYour score is: "</span> + timerlabel.<span class="hljs-built_in">text</span>);
                    var file = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory , <span class="hljs-string">"\highscore.csv"</span>);
                    file.<span class="hljs-built_in">append</span>(timerlabel.<span class="hljs-built_in">text</span> + <span class="hljs-string">","</span>);
                }
            }
        }
    }
    <span class="hljs-keyword">if</span>(newBtn.contains(x,y)){
        alert(<span class="hljs-string">'New Button'</span>);
    }
    <span class="hljs-keyword">if</span>(menuBtn.contains(x,y)){
        game.popScene(gameScene);
        playBtn.show();
        howToBtn.show();
        highscoreBtn.show();
        game.startCurrentScene();
    }


});
<span class="hljs-comment">//}</span>
</code></pre><p>Thanks!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 28th 2012, 3:53:02 am">November 28th 2012</span>
				by <span class='authorname'>Leo Bacay</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>game</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>quicktigames2d</span></li>
					
						<li><span class='tagname'>reset</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Well, what have you tried so far?</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 28th 2012, 7:40:30 am">November 28th 2012</span>
								by <span class='authorname'>Christian Brousseau</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Haven&#39;t tried anything yet. I don&#39;t know how. :(</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 29th 2012, 2:00:52 am">November 29th 2012</span>
								by <span class='authorname'>Leo Bacay</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
