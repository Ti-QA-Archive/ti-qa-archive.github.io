<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>For loop + Button use in For loop » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>For loop + Button use in For loop</h1>
		</header>
		<section>
			<p>Hi All,<br>I have a for loop that creates a view with a title and a button in a table row on a Table as following </p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">InboxTable</span><span class="hljs-params">(section, title, startOpenBool)</span></span>{
<span class="hljs-keyword">var</span> amountTasks = <span class="hljs-number">10</span>;
<span class="hljs-keyword">var</span> tableInboxData = [];
<span class="hljs-keyword">var</span> tableInbox = Ti.UI.createTableView({ top:<span class="hljs-string">'6%'</span>, objName: <span class="hljs-string">'tableInbox'</span>,bottom : <span class="hljs-string">'12%'</span>});
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt;= amountTasks ; i++){
      <span class="hljs-keyword">var</span> InboxRows = Ti.UI.createTableViewRow({
        objName: <span class="hljs-string">'InboxRows'</span>,
        touchEnabled: <span class="hljs-literal">true</span>,
           height:<span class="hljs-string">'auto'</span>,
           bottom:<span class="hljs-string">'10%'</span>,
      });
    <span class="hljs-keyword">var</span> contentBlock = Ti.UI.createView({
        height:<span class="hljs-string">'auto'</span>,
        top:<span class="hljs-string">'15%'</span>,
        layout:<span class="hljs-string">'Horizontal'</span>,
        bottom : <span class="hljs-string">'15%'</span>
    });
    <span class="hljs-keyword">var</span> TitleView = Ti.UI.createView({
        height:<span class="hljs-string">'100'</span>,
        width:<span class="hljs-string">'100%'</span>,
        backgroundColor:<span class="hljs-string">'#7A7A7A'</span>,
        width:<span class="hljs-string">'100%'</span>
    });

    <span class="hljs-keyword">var</span> sectionTitle = Ti.UI.createLabel({
        text: i+<span class="hljs-number">1</span> +<span class="hljs-string">'.'</span>+<span class="hljs-string">'title'</span>,
        height: <span class="hljs-string">'auto'</span>,
        textAlign:<span class="hljs-string">'left'</span>,
        left:<span class="hljs-string">'3%'</span>,
        color:<span class="hljs-string">'#000000'</span>,
        font:{fontSize:<span class="hljs-string">'30sp'</span>}
    });    
    <span class="hljs-keyword">var</span> expansionButton = Ti.UI.createButton({
        width: <span class="hljs-string">'15%'</span>,
        top:<span class="hljs-string">'15%'</span>,
        height: <span class="hljs-string">'50%'</span>,
        right:<span class="hljs-string">'3%'</span>,
        open: startOpenBool
    });
</code></pre><p>And it works perfectly now the only problem is if i have a <code>expansionButton.addEventListener(&amp;#39;singletap&amp;#39;, function(event){</code> it only works on the last button in the for loop now i just want to know how can I get the button to work on all of them</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 31st 2012, 10:01:12 am">October 31st 2012</span>
				by <span class='authorname'>Stiaan Maas</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>button</span></li>
					
						<li><span class='tagname'>for</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>just put this event also in loop so it will work for all the buttons.</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 31st 2012, 10:55:52 am">October 31st 2012</span>
								by <span class='authorname'>Sarafaraz Babi</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-250313">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>You don&#39;t provide all your code, and your description of the problem is a little light on details.  You say &quot;it only works on the last button&quot;, but you don&#39;t indicate if that means &quot;it only fires for the last button&quot; or &quot;it only performs correctly for the last button&quot;.</p>
<p>I&#39;m going to work from the assumption that you mean the latter.  The event listener fires for all buttons, but it is always operating on the last row of controls.</p>
<p>That is a classic Javascript scoping problem.  If your event listener was to reference <code>contentBlock</code>, for example, it will always be referring to the last contentBlock you created.  Each time through the loop, you&#39;re overwriting the value for that variable, and all the event listeners you define are referring to that same instance of contentBlock.</p>
<p>Build your tableviewrow and its controls in a function.  Also add your event listener within that function.  That will give you scope for each set of controls, so your event listeners can operate independently on different instances of those variables.  Better yet, build a CommonJS module for this specialized tableviewrow.</p>
<p>BTW – I think you have an indexing problem with this loop:</p>
<pre><code class="hljs">for <span class="hljs-comment">(var i = 0; i &lt;= amountTasks ; i++)</span>{
</code></pre><p>This will loop through 11 times, not 10.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 31st 2012, 10:22:08 am">October 31st 2012</span>
								by <span class='authorname'>Jason Priebe</span><br>
								<a class="icon-bg icon-link" href="question/144190/for-loop--button-use-in-for-loop#answer-250313" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you you helped a lot and sorry about the vague description but you did assume correctly thank you</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 31st 2012, 10:36:52 am">October 31st 2012</span>
											by <span class='authorname'>Stiaan Maas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Mark the answer as correct then.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 31st 2012, 12:39:57 pm">October 31st 2012</span>
											by <span class='authorname'>Majid Mazinani</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
