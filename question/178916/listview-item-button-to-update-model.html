<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>LIstView item button to update model » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>LIstView item button to update model</h1>
		</header>
		<section>
			<p>In the example below I have a button on each listview item which when clicked I&#39;d like it to update the model binded to that item. I can get the onClick event to work but can&#39;t work out how to get item data to then update the model. Is this even possible?</p>
<p>index.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ListView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"list"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Templates</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"itemTemplate"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">Templates</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">ListSection</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"collection"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"listItem"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">ListSection</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">ListView</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>itemTemplate.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ItemTemplate</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"user"</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">"70"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"update"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"updatedUser"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"name"</span> <span class="hljs-attribute">bindId</span>=<span class="hljs-value">"name"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ItemTemplate</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>listItem.xml</p>
<pre><code class="hljs"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ListItem</span> <span class="hljs-attribute">template</span>=<span class="hljs-value">"user"</span> <span class="hljs-attribute">name:text</span>=<span class="hljs-value">"</span></span></span><span class="hljs-expression">{{<span class="hljs-variable">name</span>}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-value">"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span></span>
</code></pre><p>itemTemplate.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updatedUser</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">//change an attribute on the model and save</span>

}
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 6th 2014, 3:56:38 pm">November 6th 2014</span>
				by <span class='authorname'>Marcus Williams</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>backbone</span></li>
					
						<li><span class='tagname'>listview</span></li>
					
						<li><span class='tagname'>model</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-283687">
				
						<section>
							<p>on the click event of the listView, you will get an event object… from the event object, you can get the object associated with the row and determine which model was selected.</p>
<p>you will want to add the model id to the row so you can access it to retrieve the model, something like the code below, not tested</p>
<pre><code class="hljs"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ListItem</span> <span class="hljs-attribute">template</span>=<span class="hljs-value">"user"</span> <span class="hljs-attribute">name:text</span>=<span class="hljs-value">"</span></span></span><span class="hljs-expression">{{<span class="hljs-variable">name</span>}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-value">"</span>  <span class="hljs-attribute">model_id</span>=<span class="hljs-value">"</span></span></span><span class="hljs-expression">{{<span class="hljs-variable">id</span>}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-value">"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span></span>
</code></pre><p>The function to get the model id would look something like this.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getModelFromSelectedRow</span><span class="hljs-params">(_event)</span> </span>{
  <span class="hljs-keyword">var</span> item = _event.section.items[_event.itemIndex];
  <span class="hljs-keyword">var</span> selectedUserId = item.properties.model_id;
  <span class="hljs-keyword">return</span>  $.collection.<span class="hljs-keyword">get</span>(selectedUserId);
}
</code></pre><p>A complete example application can be found here <a href="https:&#x2F;&#x2F;github.com&#x2F;aaronksaunders&#x2F;AppC-Alloy-Book">https:&#x2F;&#x2F;github.com&#x2F;aaronksaunders&#x2F;AppC-Alloy-Book</a> Look at the file <code>friends.js</code></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 8th 2014, 2:31:50 pm">November 8th 2014</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="../../question/178916/listview-item-button-to-update-model.html#answer-283687" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Is there any harm in using the itemId to store the model id?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2014, 7:06:26 am">November 9th 2014</span>
											by <span class='authorname'>Marcus Williams</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i have no idea what you are asking… sorry</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2014, 6:53:53 pm">November 9th 2014</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Here is a complete example I put together based on code I had already <a href="https:&#x2F;&#x2F;github.com&#x2F;aaronksaunders&#x2F;sampleListViewButtonClick">https:&#x2F;&#x2F;github.com&#x2F;aaronksaunders&#x2F;sampleListViewButtonClick</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="November 10th 2014, 2:20:08 am">November 10th 2014</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This is what I mean</p>
<pre><code class="hljs">&lt;ListItem itemId=<span class="hljs-string">"{id}"</span> template=<span class="hljs-string">"{template}"</span>  full_name:<span class="hljs-type">text</span>=<span class="hljs-string">"{full_name}"</span>  /&gt;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 10th 2014, 5:46:05 am">November 10th 2014</span>
											by <span class='authorname'>Marcus Williams</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>you can name it whatever you want?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 10th 2014, 12:20:33 pm">November 10th 2014</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
