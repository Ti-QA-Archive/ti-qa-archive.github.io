<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>How to achieve a layout in a view ?? » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>How to achieve a layout in a view ??</h1>
		</header>
		<section>
			<p>I have this simple code </p>
<pre><code class="hljs">var win = Ti.UI.createWindow({
    <span class="hljs-string">navBarHidden :</span> <span class="hljs-literal">true</span>,
    <span class="hljs-string">className :</span> <span class="hljs-string">'window'</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">"#efefef"</span>
});

var my_container = Ti.UI.createView({
    <span class="hljs-string">height :</span> <span class="hljs-number">325</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">303</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">30</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">"#cac"</span>,
    <span class="hljs-string">layout :</span> <span class="hljs-string">"horizontal"</span>
});
var my_image = Ti.UI.createImageView({
    <span class="hljs-string">width :</span> <span class="hljs-string">'100%'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">right :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">image :</span> <span class="hljs-string">'hello.jpg'</span>
});

my_container.add(my_image);
win.add(my_container);

win.open();
</code></pre><p>and here is the url for image</p>
<p><img src="http:&#x2F;&#x2F;i.imgur.com&#x2F;Y9zvF.png" alt="http:&#x2F;&#x2F;i.imgur.com&#x2F;Y9zvF.png"></p>
<p>and my Screenshot looks like something </p>
<p><img src="http:&#x2F;&#x2F;i.imgur.com&#x2F;2IE88.png" alt="http:&#x2F;&#x2F;i.imgur.com&#x2F;2IE88.png"></p>
<p>but i want the image to be aligned at the top of the view like </p>
<p><img src="http:&#x2F;&#x2F;i.imgur.com&#x2F;EBi0W.png" alt="http:&#x2F;&#x2F;i.imgur.com&#x2F;EBi0W.png"></p>
<p>I have tried every possible combination like :</p>
<p><code>my_container.layout = &amp;quot;horizontal&amp;quot; ;</code><br>or<br><code>my_container.layout = &amp;quot;horizontal&amp;quot; ;</code><br>or<br><code>no layout ( i.e. absolute)</code></p>
<p>with </p>
<p><code>my_image. width = &amp;#39;100%&amp;#39; ;</code><br>or<br><code>my_image. width =Ti.UI.Fill ;</code><br>or<br><code>my_image. width = 303 ;</code></p>
<p>But none of them seems like to be working for me.</p>
<p>I am in real confusion why is this making it behave like that.</p>
<p>Why is image pushed downwards in the view !!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 15th 2012, 6:44:39 am">August 15th 2012</span>
				by <span class='authorname'>Sahil Grover</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>fill</span></li>
					
						<li><span class='tagname'>image</span></li>
					
						<li><span class='tagname'>layout</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>forgot to mention my sdk version is <code>2.1.1.GA</code> and I am developing on <code>iOS 5.1</code> version</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 15th 2012, 6:48:01 am">August 15th 2012</span>
								by <span class='authorname'>Sahil Grover</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-245372">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>The problem is <em>not the layout properties</em>, it is image scaling! Note first that you are passing a larger image than the view, so Titanium does some scaling under the sheets.</p>
<p>So  when you define the width of that <code>ImageView</code>, if the image you pass is bigger than the view, Titanium scales it using its own mechanism, which obviously, is not what you want, since it has been causing you to tear your hair out the past few days. I believe they scale images from the bottom up, causing your weird problem.</p>
<p>To fix this, you need to take control of the image scaling from Titanium, and pass a new, resized image</p>
<p>To do this, we need to get the original height and width of the image, to preserve the aspect ratio, then figure out a new size, resize the image, and pass it to the imageView.</p>
<p>To get the height and width of the image you kind of have to hack around a bit, here is how I did it with SDK 2.1.1.GA:</p>
<p><strong>Get Height and Width of a Blob &#x2F; Image</strong></p>
<pre><code class="hljs">
<span class="hljs-comment">// Load the image as a blob to get height information</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> imageFile</span> = Ti.Filesystem.getFile('hello.png');
<span class="hljs-variable"><span class="hljs-keyword">var</span> blobOfImage</span> = imageFile.read();

<span class="hljs-comment">// Put it in a imageView, since It wont let me get height from a blob for some reason</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> imageView1</span> = Titanium.UI.createImageView({
    image: blobOfImage,
    width: 'auto',
    height: 'auto',
});

<span class="hljs-comment">// This is the important part, toImage this view and you get the height and width of this image</span>
<span class="hljs-comment">// For some reason we cant get this from a Blob in SDK 2.1.1.GA</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> heightOfImage</span> = imageView1.toImage().height;
<span class="hljs-variable"><span class="hljs-keyword">var</span> widthOfImage</span> = imageView1.toImage().width;
</code></pre><p>Now we calculate the aspect ratio for the width (screen size for iPhone of 320).</p>
<p><strong>Aspect Ratio</strong></p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> aspectRatio</span> =  heightOfImage / widthOfImage;
</code></pre><p>And now we can create the new resized image in the imageview.</p>
<p><strong>New Image!</strong></p>
<pre><code class="hljs">
var my_container = Ti.UI.createView({
    <span class="hljs-string">height :</span> <span class="hljs-number">325</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">303</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">30</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">"#cac"</span>,
    <span class="hljs-string">layout :</span> <span class="hljs-string">"horizontal"</span>
});
var my_image = Ti.UI.createImageView({
    <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">right :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">image :</span> blobOfImage.imageAsResized(<span class="hljs-number">320</span>, <span class="hljs-number">320</span>*aspectRatio) <span class="hljs-comment">// Note the resize call to the image blob</span>
});
</code></pre><p>Here is the final output :</p>
<p><img src="http:&#x2F;&#x2F;i.imgur.com&#x2F;d4ABS.png" alt="Screenshot "> </p>
<p>So I guess the lesson is dont trust Titanium to scale your images for you.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 15th 2012, 2:02:40 pm">August 15th 2012</span>
								by <span class='authorname'>Josiah Hester</span><br>
								<a class="icon-bg icon-link" href="question/141034/how-to-achieve-a-layout-in-a-view-#answer-245372" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Bingo the perfect answer !!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 3:45:39 pm">August 15th 2012</span>
											by <span class='authorname'>Sahil Grover</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-245341">
				
						<section>
							<p>Here it is not the problem of layout.. try removing the layout and run your app.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 15th 2012, 7:05:36 am">August 15th 2012</span>
								by <span class='authorname'>Ajeet pratap Maurya</span><br>
								<a class="icon-bg icon-link" href="question/141034/how-to-achieve-a-layout-in-a-view-#answer-245341" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Unfortunately that doesnt work. It looks like something</p>
<p><a href="http:&#x2F;&#x2F;i.imgur.com&#x2F;IPWeg.png">Imgur</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 7:08:28 am">August 15th 2012</span>
											by <span class='authorname'>Sahil Grover</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-245340">
				
						<section>
							<p>Remove the <strong>layout:horizontal</strong> from the my_container view.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 15th 2012, 7:02:22 am">August 15th 2012</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/141034/how-to-achieve-a-layout-in-a-view-#answer-245340" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Unfortunately that doesnt work. It looks like something</p>
<p><a href="http:&#x2F;&#x2F;i.imgur.com&#x2F;IPWeg.png">Imgur</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 7:08:36 am">August 15th 2012</span>
											by <span class='authorname'>Sahil Grover</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-245345">
				
						<section>
							<p>i think you should give your <code>imageView</code> the same width and height of your <code>view</code> </p>
<pre><code class="hljs">    height : <span class="hljs-number">325</span>,
    width : <span class="hljs-number">303</span>,
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 15th 2012, 7:58:12 am">August 15th 2012</span>
								by <span class='authorname'>Mhd Zaher Ghaibeh</span><br>
								<a class="icon-bg icon-link" href="question/141034/how-to-achieve-a-layout-in-a-view-#answer-245345" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-245346">
				
						<section>
							<p>The only way I managed to do what you want is to add a height to the image</p>
<pre><code class="hljs">var my_container = Ti.UI.createView({
    <span class="hljs-string">height :</span> <span class="hljs-number">325</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">303</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">30</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">"#cac"</span>
});
var my_image = Ti.UI.createImageView({
<span class="hljs-label">    top:</span><span class="hljs-number">0</span>,
<span class="hljs-label">    height:</span><span class="hljs-number">475</span>,
    <span class="hljs-string">image :</span> <span class="hljs-string">'hello.jpg'</span>
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 15th 2012, 7:58:37 am">August 15th 2012</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/141034/how-to-achieve-a-layout-in-a-view-#answer-245346" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Dan I tried out this solution and it works fine for this particular image. But if I change the image, to something other image in that case the image is again not aligned.  I tried implementing the same in my <strong><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;140999">other question</a></strong> but it is not working over there….</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 8:28:01 am">August 15th 2012</span>
											by <span class='authorname'>Sahil Grover</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You will have to find the height of each image and set it.<br>Is a mess, but I don&#39;t see other way.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 8:39:55 am">August 15th 2012</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Dan my images are coming from server so I am not sure what would be the image <code>size &amp;#x2F; format</code> for one particular image this seems working fine but changing the image ruins everything. How do i overcome that ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 8:40:35 am">August 15th 2012</span>
											by <span class='authorname'>Sahil Grover</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Dan in that case how to find the height and also what is <code>algorithm</code> to set the height for image ???</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 8:42:15 am">August 15th 2012</span>
											by <span class='authorname'>Sahil Grover</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Try to get the images with xhr and get the height of the returning blob.<br>Don&#39;t have time now to test.</p>
<p>Another way would be to add the image offscreen and then get it&#39;s height, and reattach it to your container with the size calculated.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 8:56:22 am">August 15th 2012</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Dan what is the algorithm to take care off. Lets say if image has height x and width y ??</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 9:06:32 am">August 15th 2012</span>
											by <span class='authorname'>Sahil Grover</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs"><span class="hljs-keyword">var</span> new_h = <span class="hljs-built_in">Math</span>.round(x / y * <span class="hljs-number">303</span>); <span class="hljs-comment">// 303 is the width of the container</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 9:23:13 am">August 15th 2012</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>My recommendation to you is to wrap your image retrieval with a simple web service that can return you the URL for the image as well as the height and width.  It&#39;s a lot faster to let the server-side code determine the dimensions than decoding images on the device.</p>
<p>I think others have tried the approach of putting images into hidden ImageViews to get the dimensions, and they&#39;ve had varying success with that; I never bothered with it – it seems terribly inefficient, and when I read of others&#39; problems with it, I felt like it would not be a productive approach.  I also have the luxury of programming against a server-side CMS that makes getting image attributes quite easy.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 11:23:20 am">August 15th 2012</span>
											by <span class='authorname'>Jason Priebe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><strong>+100</strong> on what Jason says.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 11:27:28 am">August 15th 2012</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-245356">
				
						<section>
							<p>Try setting the height of my_image to <code>Ti.UI.SIZE</code></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 15th 2012, 9:15:15 am">August 15th 2012</span>
								by <span class='authorname'>Beejay Morgan</span><br>
								<a class="icon-bg icon-link" href="question/141034/how-to-achieve-a-layout-in-a-view-#answer-245356" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Beejay if that is working for you can you please add a screenshot here. I am not able to achieve using it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 9:23:17 am">August 15th 2012</span>
											by <span class='authorname'>Sahil Grover</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">var win = Ti.UI.createWindow({
    <span class="hljs-string">navBarHidden :</span> <span class="hljs-literal">true</span>,
    <span class="hljs-string">className :</span> <span class="hljs-string">'window'</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">"#efefef"</span>
});

var my_container = Ti.UI.createView({
    <span class="hljs-string">height :</span> <span class="hljs-number">325</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">303</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">30</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">"#cac"</span>
});
var my_image = Ti.UI.createImageView({
    <span class="hljs-string">width :</span> Ti.UI.SIZE,
<span class="hljs-label">    height:</span> Ti.UI.SIZE,
    <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">right :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">image :</span> <span class="hljs-string">'hello.png'</span>
});

my_container.add(my_image);
win.add(my_container);

win.open();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 9:33:31 am">August 15th 2012</span>
											by <span class='authorname'>Beejay Morgan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Realizing I misunderstood what you&#39;re asking for. Apologies… Looking into it now.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2012, 9:39:54 am">August 15th 2012</span>
											by <span class='authorname'>Beejay Morgan</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
