<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Modal window help Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Modal window help</h1>
		</header>
		<section>
			<p>When opening a modal window, if the windows navBarHidden property is set to true, opening it the first time is fine. After closing it and reopening it, the modal window shows up behind the phones status bar at the top (where the signal, clock etc is).</p>
<p>Here is a quick example you can import to test for yourself.</p>
<p>&lt;a href=&quot;http:&#x2F;&#x2F;dopserv1.dop.com&#x2F;tacmode&#x2F;modal_win_test.zip&quot;&gt;http:&#x2F;&#x2F;dopserv1.dop.com&#x2F;tacmode&#x2F;modal_win_test.zip&lt;&#x2F;a&gt;</p>
<p>Pastie for those worried of viruses and whatnot: &lt;a href=&quot;http:&#x2F;&#x2F;pastie.org&#x2F;1398992&quot;&gt;http:&#x2F;&#x2F;pastie.org&#x2F;1398992&lt;&#x2F;a&gt;</p>
<p>Import the new project and compile. I&#39;ve left the navBarHidden property set to false so you can see how it SHOULD behave. Once you open and close the modal window a few times, open up app.js and change the navBarHidden property to true. Then open and close the modal window a couple times and you will see the second time and any time after that, it goes behind the status bar.</p>
<p>I am using iphone sdk 4.2 and Ti sdk 1.5.1</p>
<p>Here is what it looks like the first time you open:</p>
<p><img src="http:&#x2F;&#x2F;dopserv1.dop.com&#x2F;tacmode&#x2F;first_open.png &quot;Title&quot;" alt="alt text"></p>
<p>After opening a second time and any time after that:</p>
<p><img src="http:&#x2F;&#x2F;dopserv1.dop.com&#x2F;tacmode&#x2F;second_open.png &quot;Title&quot;" alt="alt text"></p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 6th 2011, 5:52:13 pm">January 6th 2011</span>
				by <span class='authorname'>Ronnie Swietek</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>modal</span></li>
					
						<li><span class='tagname'>navbarhidden</span></li>
					
						<li><span class='tagname'>window</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>9</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>9 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-176511">
				
						<section>
							<p>Hi,</p>
<p>For those of you working on Android and are facing the same problem (modal window appearing behind status bar), I have found a workaround.</p>
<p>Basically you have to specify the window&#39;s windowSoftInputMode property to any of the Ti.UI.Andorid.SOFT_INPUT_XXX operating modes. Doing so will force the window into a heavyweight window. This will bring your newly created window below the status bar instead of behind it.</p>
<p>Example:</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({
    exitOnClose: <span class="hljs-keyword">false</span>,
    url:<span class="hljs-string">'main/details.js'</span>,
    backgroundImage:<span class="hljs-string">'../images/Background.png'</span>,
    <span class="hljs-variable">width</span>: stageWidth,
    <span class="hljs-variable">height</span>: <span class="hljs-string">'auto'</span>,
    windowSoftInputMode: Ti.UI.Android.SOFT_INPUT_ADJUST_RESIZE,
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 11th 2011, 6:52:05 am">January 11th 2011</span>
								by <span class='authorname'>Zheng Da Clinton Goh</span><br>
								<a class="icon-bg icon-link" href="../../question/97591/modal-window-help.html#answer-176511" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>very handy, thank you</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 11th 2011, 5:54:18 pm">January 11th 2011</span>
											by <span class='authorname'>Ronnie Swietek</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-174081">
				
						<section>
							<p>Hi Ronnie,</p>
<p>Just tried your code with 1.5.1 and a built of 1.6.0 and got the same result as you.</p>
<p>Try moving the window creation for activity into the click listener for btn like this, worked for me that way.</p>
<pre><code class="hljs">btn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> activity = Titanium.UI.createWindow({
        title:<span class="hljs-string">'New Account'</span>,
        url:<span class="hljs-string">'main_windows/activity.js'</span>,
        navBarHidden:<span class="hljs-literal">true</span>
        <span class="hljs-comment">// Setting nav bar hidden to true causes the window to slide</span>
        <span class="hljs-comment">// behind the phones status bar on iphone when opening </span>
        <span class="hljs-comment">// the second time.</span>
    });
    activity.open({
        modal:<span class="hljs-literal">true</span>,
        modalTransitionStyle:Ti.UI.iPhone.MODAL_TRANSITION_STYLE_COVER_VERTICAL,
        modalStyle:Ti.UI.iPhone.MODAL_PRESENTATION_FULLSCREEN
    });
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 6th 2011, 6:49:30 pm">January 6th 2011</span>
								by <span class='authorname'>Dan Giulvezan</span><br>
								<a class="icon-bg icon-link" href="../../question/97591/modal-window-help.html#answer-174081" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-174091">
				
						<section>
							<p>Since the variable is in the click function it will be making a new window every time correct? Will that cause an increase in memory over time? You are right though, that does work.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 6th 2011, 6:51:12 pm">January 6th 2011</span>
								by <span class='authorname'>Ronnie Swietek</span><br>
								<a class="icon-bg icon-link" href="../../question/97591/modal-window-help.html#answer-174091" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-174101">
				
						<section>
							<p>Hopefully someone will correct me if I&#39;m wrong, but I <em>think</em> it will destroy the window every time you call win.close() from activity.js, so I&#39;m thinking you&#39;ll be okay.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 6th 2011, 6:54:07 pm">January 6th 2011</span>
								by <span class='authorname'>Dan Giulvezan</span><br>
								<a class="icon-bg icon-link" href="../../question/97591/modal-window-help.html#answer-174101" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-174111">
				
						<section>
							<p>That would be great if it did. Putting the variable inside of the click function actually solved another bug I was having. Hopefully it does indeed destroy the instance.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 6th 2011, 6:57:45 pm">January 6th 2011</span>
								by <span class='authorname'>Ronnie Swietek</span><br>
								<a class="icon-bg icon-link" href="../../question/97591/modal-window-help.html#answer-174111" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-174121">
				
						<section>
							<p>From what I know and what I been told, window.close does release the window and all childs but I could be wrong. Better bet would be to run instruments tools on it and see if the allocation increases as you open and close the window. </p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 6th 2011, 7:37:37 pm">January 6th 2011</span>
								by <span class='authorname'>Sj Singh</span><br>
								<a class="icon-bg icon-link" href="../../question/97591/modal-window-help.html#answer-174121" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>From my experience with programming on Android, window.close() does NOT release all childs which you added to the window. My workaround for this is to add a &#39;close&#39; event listener to the window and manually remove its children window.close(); is executed and the event listener catches the &#39;close&#39; event.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 8th 2011, 1:43:11 am">January 8th 2011</span>
											by <span class='authorname'>Zheng Da Clinton Goh</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-175061">
				
						<section>
							<p>Double post. Apologies.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 8th 2011, 1:59:39 am">January 8th 2011</span>
								by <span class='authorname'>Zheng Da Clinton Goh</span><br>
								<a class="icon-bg icon-link" href="../../question/97591/modal-window-help.html#answer-175061" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-175071">
				
						<section>
							<p>I have the same problem on Android:</p>
<p><img src="https:&#x2F;&#x2F;dl-web.dropbox.com&#x2F;get&#x2F;Photos&#x2F;AndroidModal.png?w=154a710c" alt="alt text"></p>
<p>I&#39;ve tried Dan&#39;s work around but it doesn&#39;t seem to work. Is that solution iPhone specific? Has anyone had the same problem with modal windows in Android?</p>
<p>Here&#39;s a bit of my code&quot;</p>
<pre><code class="hljs">function rowClick(e) {
    Ti.API.info(<span class="hljs-string">'Row '</span> + e.<span class="hljs-keyword">index</span> + <span class="hljs-string">' was clicked'</span>);
    <span class="hljs-keyword">if</span> (e.<span class="hljs-keyword">index</span> &lt; tableData.length-<span class="hljs-number">1</span>) {
        Ti.API.info(<span class="hljs-string">'Product ID: '</span> + json[e.<span class="hljs-keyword">index</span>].productID);
        var win = Ti.UI.createWindow({
            url:<span class="hljs-string">'main/details.js'</span>,
            title:json[e.<span class="hljs-keyword">index</span>].pname,
            backgroundImage:<span class="hljs-string">'../images/tableview/brown_bg_482.png'</span>,
            navBarHidden:<span class="hljs-keyword">true</span>
        });
        var prodID = json[e.<span class="hljs-keyword">index</span>].productID;
        win.prodID = prodID;
        win.open({
            modal:<span class="hljs-keyword">true</span>, <span class="hljs-comment">// Left out iPhone stuff</span>
        });    
        win.title = <span class="hljs-string">'Deals!'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.<span class="hljs-keyword">index</span> == tableData.length-<span class="hljs-number">1</span>) {
        Ti.API.info(<span class="hljs-string">'Load More Deals'</span>);
    }
};
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 8th 2011, 2:00:19 am">January 8th 2011</span>
								by <span class='authorname'>Zheng Da Clinton Goh</span><br>
								<a class="icon-bg icon-link" href="../../question/97591/modal-window-help.html#answer-175071" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-177811">
				
						<section>
							<p>I have another interesting issue. So my code is still setup the way Dan suggested. The issue now is in the activity window, I open another window called topic. So now I am in app.js -&gt; activity.js -&gt; topic.js</p>
<p>When I close topic.js (its opened from inside activity.js), it closes and then the bar is again behind the status bar, grrrreattt!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 12th 2011, 4:02:58 pm">January 12th 2011</span>
								by <span class='authorname'>Ronnie Swietek</span><br>
								<a class="icon-bg icon-link" href="../../question/97591/modal-window-help.html#answer-177811" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I found adding the top property to the window helps. The status bar is 20px to setting the top to 20 seems to fix it too.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2011, 4:35:17 pm">January 12th 2011</span>
											by <span class='authorname'>Ronnie Swietek</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Personally, I would try not to use pixels to push the window downwards. If you&#39;re developing only for iPhone, that&#39;s fine. But if you want to port it over to Android &#x2F; Blackberry (in the future), then it might cause problems because not all phones have a 20-pixel status bar. Just KIV in the mean time. I hope Titanium developers solve this bug soon.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 13th 2011, 12:32:23 am">January 13th 2011</span>
											by <span class='authorname'>Zheng Da Clinton Goh</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You could always do a conditional and change the pixel amount based on whichever OS too, but yeah I agree, I hope they fix it soon</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 13th 2011, 12:35:03 am">January 13th 2011</span>
											by <span class='authorname'>Ronnie Swietek</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for all writing this. I am newbie in Ti,Does anyone happens to fix this? Noticed,same behavior in my app window navigation.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2011, 12:56:45 pm">February 16th 2011</span>
											by <span class='authorname'>Gangaraju Chowki</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
