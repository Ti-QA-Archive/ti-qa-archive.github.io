<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Search + Pulled JSON Data? Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Search + Pulled JSON Data?</h1>
		</header>
		<section>
			<p>So I am pulling data from a remote MySQL Database through a .PHP file that parses the data as a JSON String through the App. What I need is a SearchBar that will search through the ENTIRE DATABASE through several fields (Plain text fields) and display whatever returns. Here is what I have so far:</p>
<p><a href="http:&#x2F;&#x2F;pastie.org&#x2F;private&#x2F;kjsgqbsdqg2idradjnacw">http:&#x2F;&#x2F;pastie.org&#x2F;private&#x2F;kjsgqbsdqg2idradjnacw</a></p>
<p>Right now it&#39;s in a TableView that displays the 8 last rows in the table, and if you scroll down you can see the next 8 and then the next 8 and so on so forth. What is happening is that if you use the SearchBar, it will <em>only</em> search the rows that are showing up. So if there are 8, it will only search those 8. What I want is it to search the entire database (400+ rows) no matter how many rows are showing.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 1st 2010, 7:13:42 pm">November 1st 2010</span>
				by <span class='authorname'>Colton Arabsky</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>searchbar</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-135871">
				
						<section>
							<p>I assume you could one of two things.  Hook the blur event and grab the search string and initiate a call to your server and refill the table.  Or you could hook the change event and do the same thing.  Depending on the number of rows, indices and type of data it may be better to catch the blur since it would be called less often than change.</p>
<p>Your code looks pretty good, should have looked at it first ;)  Going to see what you are doing and if I have any suggestions.</p>
<p>Yes.  Nicely done.  I think you can do what I mentioned above.  You should be able to trigger off of a combination of blur&#x2F;change&#x2F;return and refill the table with the search results.  Where it may get tricky is undoing&#x2F;canceling the search.  You&#39;d probably want to keep the results of standard scrolling in an array and append the search results to the previous list results and that would let you undo by popping the array back into the table.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 1st 2010, 7:32:50 pm">November 1st 2010</span>
								by <span class='authorname'>John McKnight</span><br>
								<a class="icon-bg icon-link" href="question/75481/search--pulled-json-data.html#answer-135871" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-135921">
				
						<section>
							<p>Hey John, sorry, but could you give me an example of what you are saying? I <em>understand</em> what you&#39;re saying 100%, it&#39;s just I work better with an example of it, rather than just an explanation. If you know what you mean? :)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 1st 2010, 7:58:32 pm">November 1st 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="question/75481/search--pulled-json-data.html#answer-135921" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Sure.  Let me get some coffee and scratch my head for a few moments :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 1st 2010, 8:03:42 pm">November 1st 2010</span>
											by <span class='authorname'>John McKnight</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-135991">
				
						<section>
							<p>John, I think you have been scratching your head and drinkin&#39; coffee for long enough! Haha ;)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 1st 2010, 10:44:18 pm">November 1st 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="question/75481/search--pulled-json-data.html#answer-135991" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>haha - ok. I&#39;ll see what I can do.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 1st 2010, 11:28:41 pm">November 1st 2010</span>
											by <span class='authorname'>John McKnight</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-136031">
				
						<section>
							<p>Here is the basic idea in code, sorta.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lastSearchTerm = <span class="hljs-string">''</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doSearch</span>(<span class="hljs-params">search</span>) </span>{
  <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
  xhr.setTimeout(<span class="hljs-number">60000</span>);

  xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ 
    Ti.API.info(e); 
  };

  xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> json = <span class="hljs-keyword">this</span>.responseText;
    <span class="hljs-keyword">var</span> response = <span class="hljs-built_in">JSON</span>.parse(json);

    <span class="hljs-comment">/* By this point you have some new data to append to your table */</span>
    <span class="hljs-comment">// You could push the data into the table or merge it with an array of previous fetched data.</span>
  }

  xhr.open(<span class="hljs-string">'POST'</span>, service_url <span class="hljs-comment">/* this is your url that would respond with search data */</span>);

  <span class="hljs-keyword">var</span> parms = {
    searchTerm: search
  }; 

  xhr.send(parms);
}


<span class="hljs-comment">// This gets called when a key was pressed or enter or blur</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">searchChanged</span>(<span class="hljs-params">search</span>) </span>{

  <span class="hljs-comment">// If the search changed, we do our call to the server.</span>
  <span class="hljs-keyword">if</span> (search != lastSearchTerm) {
    doSearch(search);
  }

  lastSearchTerm = search;
}



<span class="hljs-comment">// These are your listeners with a change to call the search</span>
searchbar.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{
    Titanium.App.Properties.setBool(<span class="hljs-string">'if_searched'</span>, <span class="hljs-literal">true</span>);
    searchChanged(e.value);

    <span class="hljs-keyword">return</span> e.value;
});
searchbar.addEventListener(<span class="hljs-string">'return'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{
    searchbar.blur();
    Titanium.App.Properties.setBool(<span class="hljs-string">'if_searched'</span>, <span class="hljs-literal">true</span>);
    searchChanged(e.value);

    <span class="hljs-keyword">return</span> e.value;
});

searchbar.addEventListener(<span class="hljs-string">'blur'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{
    searchChanged(e.value);
}
</code></pre><p>In your PHP you could expect to see a new variable $_POST[&#39;searchTerm&#39;] that you can use to do a search through your data.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 1st 2010, 11:50:29 pm">November 1st 2010</span>
								by <span class='authorname'>John McKnight</span><br>
								<a class="icon-bg icon-link" href="question/75481/search--pulled-json-data.html#answer-136031" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-136281">
				
						<section>
							<p>Hey John. Is it possible to put a HTTP client inside another one? I&#39;ve never tried it before, would it cause any lag?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 2nd 2010, 12:54:13 pm">November 2nd 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="question/75481/search--pulled-json-data.html#answer-136281" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Can you be more specific?  What are you trying to do?  Are you wanting to send a request after the first request completed?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2010, 2:38:05 pm">November 2nd 2010</span>
											by <span class='authorname'>John McKnight</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-137621">
				
						<section>
							<p>Alright John, I really don&#39;t understand what <em>I</em> am supposed to do with that.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 4th 2010, 10:17:16 pm">November 4th 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="question/75481/search--pulled-json-data.html#answer-137621" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
