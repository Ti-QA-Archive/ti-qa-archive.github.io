<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android: window.width/height no longer contains a value in SDK 1.6.0 » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android: window.width/height no longer contains a value in SDK 1.6.0</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>today I switched from &#39;Titanium SDK version: 1.6.0 (01&#x2F;29&#x2F;11 17:49 f9036efc1f4a524603bf)&#39; to &#39;Titanium SDK version: 1.6.0 (02&#x2F;14&#x2F;11 16:58 4056f5d…)&#39; cause the latest SDK contains a fix for non-cached network images. </p>
<p>Since this update I&#39;m no longer able to get the current window width or height. Neither by win.width nor by win.size.width. This was working in the previous 1.6.0 version and in 1.5.1</p>
<p>Here&#39;s a simple code to reproduce:</p>
<pre><code class="hljs">Titanium.UI.setBackgroundColor(<span class="hljs-string">'#ffffff'</span>);

var params = {exitOnClose: <span class="hljs-keyword">true</span>};

var win  = Ti.UI.createWindow(params);
win.<span class="hljs-built_in">open</span>();
win.show();

Ti.API.info(<span class="hljs-string">'width'</span> + win.<span class="hljs-variable">width</span>);
Ti.API.info(<span class="hljs-string">'size.width'</span> + win.<span class="hljs-built_in">size</span>.<span class="hljs-variable">width</span>);
Ti.API.info(<span class="hljs-string">'height'</span> + win.<span class="hljs-variable">height</span>);
Ti.API.info(<span class="hljs-string">'size.height'</span> + win.<span class="hljs-built_in">size</span>.<span class="hljs-variable">height</span>);
</code></pre><p>Outputs:<br>SDK 1.5.1</p>
<pre><code class="hljs"><span class="hljs-attr_selector">[INFO]</span> <span class="hljs-attr_selector">[556,1245]</span> <span class="hljs-tag">width320</span>
<span class="hljs-attr_selector">[INFO]</span> <span class="hljs-attr_selector">[33,1278]</span> <span class="hljs-tag">size</span><span class="hljs-class">.width320</span>
<span class="hljs-attr_selector">[INFO]</span> <span class="hljs-attr_selector">[13,1291]</span> <span class="hljs-tag">height533</span>
<span class="hljs-attr_selector">[INFO]</span> <span class="hljs-attr_selector">[8,1299]</span> <span class="hljs-tag">size</span><span class="hljs-class">.height533</span>
</code></pre><p>latest SDK 1.6.0 (02&#x2F;14&#x2F;11 16:58 4056f5d…)</p>
<pre><code class="hljs"><span class="hljs-attr_selector">[INFO]</span> <span class="hljs-attr_selector">[556,1245]</span> <span class="hljs-tag">width0</span>
<span class="hljs-attr_selector">[INFO]</span> <span class="hljs-attr_selector">[33,1278]</span> <span class="hljs-tag">size</span><span class="hljs-class">.width0</span>
<span class="hljs-attr_selector">[INFO]</span> <span class="hljs-attr_selector">[13,1291]</span> <span class="hljs-tag">height0</span>
<span class="hljs-attr_selector">[INFO]</span> <span class="hljs-attr_selector">[8,1299]</span> <span class="hljs-tag">size</span><span class="hljs-class">.height0</span>
</code></pre><p>The sizes are also not available when using url paramter to create a window…</p>
<p>I&#39;m using Ubuntu 10.10 and simulator &#39;APIs 2.1-update 1&#39; with WVGA800 screen.</p>
<p>Is <code>Titanium.Platform.DisplayCaps</code> a good workaround to access the current width? Does anyone know another workaround?</p>
<p>Cheers</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 15th 2011, 4:43:05 pm">February 15th 2011</span>
				by <span class='authorname'>Jicks Steen</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>regression</span></li>
					
						<li><span class='tagname'>size</span></li>
					
						<li><span class='tagname'>window</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-198441">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>ditto re <code>displayCaps</code>.</p>
<p>I&#39;m kinda amazed that reading the <code>.width</code> and <code>.height</code> right after opening the window used to work in 1.5.1, because I don&#39;t consider <code>.open</code> to be synchronous.  Instead, I would have checked the <code>.width</code> and <code>.height</code> in an event listener for the window&#39;s <code>open</code> event.  That&#39;s asynchronous, of course, but that&#39;s the first opportunity I would expect to be able to read those properties successfully.</p>
<p>E.g.,</p>
<pre><code class="hljs">Titanium.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);
<span class="hljs-keyword">var</span> win = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Test'</span>,
    backgroundColor:<span class="hljs-string">'#000'</span>,
    exitOnClose: <span class="hljs-literal">true</span>
});

win.addEventListener(<span class="hljs-string">'open'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    Ti.API.info(<span class="hljs-string">'window height: '</span> + win.height);
    Ti.API.info(<span class="hljs-string">'window width: '</span> + win.width);
});

win.open();
</code></pre><p>But, anyway, <code>displayCaps</code> is what you probably want.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 15th 2011, 9:54:40 pm">February 15th 2011</span>
								by <span class='authorname'>Bill Dawson</span><br>
								<a class="icon-bg icon-link" href="question/112701/android-windowwidthheight-no-longer-contains-a-value-in-sdk-160.html#answer-198441" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Bill thanks I try to use the eventListener. Hope that works for me. Using displayCaps doesn&#39;t work correct for me.</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> win</span> = Titanium.UI.createWindow({  
    width: Ti.Platform.displayCaps.platformWidth,
    height: Ti.Platform.displayCaps.platformHeight,
    exitOnClose: <span class="hljs-literal">true</span>
});
</code></pre><p>Tested it on an Android 2.2 device (HTC Magic). The window is now about 20pixel too high (as high as the statusbar is) and the last tableViewRow is not completely visible therefore.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2011, 6:36:35 am">February 16th 2011</span>
											by <span class='authorname'>Jicks Steen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok I tried to use <code>Ti.Platform.displayCaps.platformWidth</code>. But whereas <code>Ti.Platform.displayCaps.platformWidth</code> returns 480 the correct size is 455 when using screen HVGA.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2011, 7:11:08 pm">February 16th 2011</span>
											by <span class='authorname'>Jicks Steen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>? HVGA is 320x480.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2011, 7:29:15 pm">February 16th 2011</span>
											by <span class='authorname'>Bill Dawson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sure, it is 320x480. But the window size is 455 cause of the android status bar (the top bar containing the clock and so on). Is the height of the android status bar always 25px? In such a case I could calculate the window height.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2011, 7:57:58 pm">February 16th 2011</span>
											by <span class='authorname'>Jicks Steen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ah, I understand.  Yes, I hadn&#39;t thought of that – indeed, our displayCaps gives the actual dimensions of the screen, including any chrome.</p>
<p>I wouldn&#39;t rely on that 25px, it doesn&#39;t sound very portable or future-proof.  In this case maybe using the <code>open</code> event listener will work better for you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2011, 8:34:28 pm">February 16th 2011</span>
											by <span class='authorname'>Bill Dawson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank you, Bill. I&#39;m going to refactor my app now.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2011, 6:14:26 am">February 17th 2011</span>
											by <span class='authorname'>Jicks Steen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-198361">
				
						<section>
							<p>displayCaps has been working just fine for me on both iPhone and Android. </p>
<p><code>var platformWidth = Ti.Platform.displayCaps.platformWidth;</code></p>
<p>The win.width refers to your window object, which doesn&#39;t necessarily have to fill the screen. Perhaps that value is no longer calculated when use use &#39;auto&#39; for the width? I don&#39;t know.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 15th 2011, 4:47:01 pm">February 15th 2011</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="question/112701/android-windowwidthheight-no-longer-contains-a-value-in-sdk-160.html#answer-198361" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
