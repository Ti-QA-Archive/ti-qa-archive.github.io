<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Error on dataCollection in a TableView » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Error on dataCollection in a TableView</h1>
		</header>
		<section>
			<p>Titanium Studio, build: 3.3.0.201407100905<br>Mac OSX Mavericks 10.9.5<br>Titanium SDK 3.3.0<br>Platform: Android Device with 4.3.1</p>
<p>Hi everyone i&#39;ve got a problem in my app made with the alloy framwork. In the <code>alloy.js</code> I include 3 collection with </p>
<pre><code class="hljs">Alloy.Collections.musei     = Alloy.createCollection(<span class="hljs-string">'musei'</span>);
Alloy.Collections.turismo     = Alloy.createCollection(<span class="hljs-string">'turismo'</span>);
Alloy.Collections.memo         = Alloy.createCollection(<span class="hljs-string">'memo'</span>);
</code></pre><p>then in the <code>memo.js</code> I fetch the Alloy.Collections.memo collections with <code>Alloy.Collections.memo.fetch();</code>. In my memo.xml I&#39;ve got this code:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"memoView"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"viewDetail"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"doClick"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"rowMemo"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">View</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"labelNome"</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"aaaaa"</span>/&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">TableViewRow</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>If I add the <code>dataCollection=&amp;#39;memo&amp;#39;</code> in the TableView tag when i launch the application on the devices Titanium throws me this error</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication: <span class="hljs-list">(<span class="hljs-keyword">main</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">8553</span>,<span class="hljs-number">30277</span>] Sending event: exception on thread: main msg:java.lang.NullPointerException<span class="hljs-comment">; Titanium 3.3.0,2014/07/11 12:36,787cd39</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication: java.lang.NullPointerException
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at android.view.ViewConfiguration.get<span class="hljs-list">(<span class="hljs-keyword">ViewConfiguration.java:323</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at android.view.View.&lt;init&gt;<span class="hljs-list">(<span class="hljs-keyword">View.java:3271</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at android.view.ViewGroup.&lt;init&gt;<span class="hljs-list">(<span class="hljs-keyword">ViewGroup.java:448</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at android.widget.FrameLayout.&lt;init&gt;<span class="hljs-list">(<span class="hljs-keyword">FrameLayout.java:93</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at ti.modules.titanium.ui.widget.tableview.TiTableView.&lt;init&gt;<span class="hljs-list">(<span class="hljs-keyword">TiTableView.java:274</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at ti.modules.titanium.ui.widget.TiUITableView.processProperties<span class="hljs-list">(<span class="hljs-keyword">TiUITableView.java:106</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at org.appcelerator.kroll.KrollProxy.setModelListener<span class="hljs-list">(<span class="hljs-keyword">KrollProxy.java:1185</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at org.appcelerator.titanium.proxy.TiViewProxy.realizeViews<span class="hljs-list">(<span class="hljs-keyword">TiViewProxy.java:500</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView<span class="hljs-list">(<span class="hljs-keyword">TiViewProxy.java:491</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView<span class="hljs-list">(<span class="hljs-keyword">TiViewProxy.java:469</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at ti.modules.titanium.ui.TableViewProxy.getTableView<span class="hljs-list">(<span class="hljs-keyword">TableViewProxy.java:150</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at ti.modules.titanium.ui.TableViewProxy.handleSetData<span class="hljs-list">(<span class="hljs-keyword">TableViewProxy.java:695</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at ti.modules.titanium.ui.TableViewProxy.handleMessage<span class="hljs-list">(<span class="hljs-keyword">TableViewProxy.java:872</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at android.os.Handler.dispatchMessage<span class="hljs-list">(<span class="hljs-keyword">Handler.java:95</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at android.os.Looper.loop<span class="hljs-list">(<span class="hljs-keyword">Looper.java:137</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at android.app.ActivityThread.main<span class="hljs-list">(<span class="hljs-keyword">ActivityThread.java:5289</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at java.lang.reflect.Method.invokeNative<span class="hljs-list">(<span class="hljs-keyword">Native</span> Method)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at java.lang.reflect.Method.invoke<span class="hljs-list">(<span class="hljs-keyword">Method.java:525</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run<span class="hljs-list">(<span class="hljs-keyword">ZygoteInit.java:739</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at com.android.internal.os.ZygoteInit.main<span class="hljs-list">(<span class="hljs-keyword">ZygoteInit.java:555</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     at dalvik.system.NativeStart.main<span class="hljs-list">(<span class="hljs-keyword">Native</span> Method)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre><p>I use that code in other views with other collections but <code>memo.xml</code> view is the only that throws the error. What&#39;s the problem?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 22nd 2014, 12:27:52 pm">September 22nd 2014</span>
				by <span class='authorname'>Angelo Gelmi</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>datacollection</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
						<li><span class='tagname'>tableviewrow</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I see you&#39;re missing the Collection tag in your xml, are you sure that&#39;s not required?</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 22nd 2014, 2:09:31 pm">September 22nd 2014</span>
								by <span class='authorname'>Patrick van Vuuren</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>In the other xml file I don&#39;t include Collection tag but everything works… only this view throws the error</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 22nd 2014, 2:24:17 pm">September 22nd 2014</span>
								by <span class='authorname'>Angelo Gelmi</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-282583">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>You don&#39;t want to define your collections in alloy.js. By doing so, you load their definitions (though from the code you showed not their contents) into memory when the app loads. Now, when you fetch() data into them, they will be in memory containing all their data – even if you&#39;re user is in some part of your app where he&#x2F;she doesn&#39;t need access to that collection. Memory is precious, don&#39;t waste it like this.</p>
<p>Instead, add the &lt;Collection&gt; tag in the controller that will use it. Then, make sure to add a $.destroy() in that controller&#39;s close event listener.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 22nd 2014, 6:11:44 pm">September 22nd 2014</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="question/177870/error-on-datacollection-in-a-tableview#answer-282583" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I put the <code>$.destroy()</code> in the function that close the window and now everything works!<br>Thanks Tim</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 26th 2014, 1:28:23 pm">September 26th 2014</span>
											by <span class='authorname'>Angelo Gelmi</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
