<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Problem with getting data from array » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Problem with getting data from array</h1>
		</header>
		<section>
			<p>Hi, I have some code which creates a Table View Row for the data in an array. The code works fine up until the event listener. I create a variable stringTitle which is suppose to get the &quot;title&quot; data from each row and the value goes into the title of the new Window. However, the new Window title gives me only the &quot;title&quot; of the last row in the array whenever i click any of the rows which is wrong.</p>
<pre><code class="hljs">

<span class="processing"><span class="hljs-keyword">for</span>(var i = <span class="hljs-number">0</span>; i &lt; dataArray.length; i++){

    thisData = dataArray[i];

    var row = Ti.UI.createTableViewRow({
        <span class="hljs-variable">height</span>:<span class="hljs-string">'140'</span>,
        <span class="hljs-variable">width</span>:<span class="hljs-string">'100%'</span>,
        layout:<span class="hljs-string">'horizontal'</span>
});

<span class="hljs-comment">//var stringTitle = thisData.title;</span>

var stringTitle = dataArray[i].title;


var rowImg = Ti.UI.createImageView({
      <span class="hljs-built_in">image</span>:dataArray[i].<span class="hljs-built_in">image</span>,
      <span class="hljs-variable">height</span>:<span class="hljs-number">140</span>,
      <span class="hljs-variable">width</span>:<span class="hljs-number">140</span>
    });


var txtView = Titanium.UI.createView({
   borderRadius:<span class="hljs-number">10</span>,
   layout:<span class="hljs-string">'vertical'</span>,
   top:<span class="hljs-number">20</span>,
   <span class="hljs-variable">height</span>:Ti.UI.Fill,
   <span class="hljs-variable">width</span>:Ti.UI.FILL
});

var gametitle = Titanium.UI.createLabel({
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'Title: '</span>+dataArray[i].title,
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'white'</span>,
    <span class="hljs-built_in">textAlign</span>: Ti.UI.TEXT_ALIGNMENT_LEFT
});

<span class="hljs-comment">/*
  var tblIdea = Titanium.UI.createLabel({
     data:[],    
     width:'auto',
     height : Ti.Platform.displayCaps.platformHeight,
     backgroundColor:'#efa187'
  });
*/</span>

var gameGenre = Titanium.UI.createLabel({
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'Genre: '</span>+dataArray[i].genre,
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'white'</span>,
    top:<span class="hljs-number">20</span>,
    <span class="hljs-built_in">textAlign</span>: Ti.UI.TEXT_ALIGNMENT_LEFT
});

var stringTitle = dataArray[i].title;

row.addEventListener(<span class="hljs-string">'click'</span>, function(e) {


    var newWindow = Titanium.UI.createWindow({ 
            url:<span class="hljs-string">'gameInfo.js'</span>,
            title:stringTitle
        });
        <span class="hljs-comment">//gamesTab.open(newWindow);</span>
        newWindow.<span class="hljs-built_in">open</span>();
        <span class="hljs-comment">//Alloy.createController('gameInfo.js').getView();</span>


});


txtView.<span class="hljs-built_in">add</span>(gametitle);
txtView.<span class="hljs-built_in">add</span>(gameGenre);

row.<span class="hljs-built_in">add</span>(rowImg);
row.<span class="hljs-built_in">add</span>(txtView);
tableData.push(row);

}

var newReleasesTable = Titanium.UI.createTableView({ 
data:tableData 
}); 

newReleases.<span class="hljs-built_in">add</span>(newReleasesTable);</span>
</code></pre><p>Any ideas on how to fix this?<br>e.rowData or e.row does not work for me as well which is why I tried using this workaround.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 16th 2014, 2:15:23 pm">July 16th 2014</span>
				by <span class='authorname'>Ben Khoo</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>array</span></li>
					
						<li><span class='tagname'>tableviewrow</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-280763">
				
						<section>
							<p>Hi Ben,</p>
<p>it is a very bad pattern to link every table view row with an event. this eats memory and the count of references increases. Commonly you add an event listwner to the whole table view. In event callback you find a link to the row. You can add a property &#39;itemId&#39; to every row with your data. On click you can reference to this data.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 16th 2014, 2:37:48 pm">July 16th 2014</span>
								by <span class='authorname'>Rainer Schleevoigt</span><br>
								<a class="icon-bg icon-link" href="question/176196/problem-with-getting-data-from-array#answer-280763" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Here a better solution:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> newReleasesTable</span> = Titanium.UI.createTableView({
});
<span class="hljs-variable"><span class="hljs-keyword">var</span> rows</span> = [];
<span class="hljs-keyword">for</span> (<span class="hljs-variable"><span class="hljs-keyword">var</span> i</span> = <span class="hljs-number">0</span>; i <span class="hljs-type">&lt; dataArray.length; i++) {
    rows.push(require('row.widget')(dataArray[i]));
}
newReleasesTable.setData(rows);</span>
</code></pre><p>and in row.widget.js:</p>
<pre><code class="hljs">module.exports =<span class="hljs-function"> function(</span>_data<span class="hljs-function">)</span> {
    var self =<span class="hljs-function"> Ti.UI.createtabelViewRow(</span><span class="hljs-function">)</span>;
    //<span class="hljs-instruction"> fill </span>with UIs
   <span class="hljs-instruction"> return </span>self;

};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 16th 2014, 2:57:18 pm">July 16th 2014</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi, Thanks for the reply. I will try out the method you suggest but do you know what is the problem in my original code? I would like to use the original method if possible.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2014, 3:38:55 pm">July 16th 2014</span>
											by <span class='authorname'>Ben Khoo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You original code is unfavorable,  because you run for every data thrue the loop. If the generating of code is in an extra module, then the code will parsed once and then the interpreter uses the cached variante.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> rows = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; dataArray.length; i++) {
    rows.push(<span class="hljs-built_in">require</span>(<span class="hljs-string">'row.widget'</span>)(dataArray[i]));
}
<span class="hljs-keyword">var</span> newReleasesTable = Titanium.UI.createTableView({data:rows});
newReleasesTable.addEventlistener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    <span class="hljs-built_in">console</span>.log(e.row);
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 16th 2014, 4:01:41 pm">July 16th 2014</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
