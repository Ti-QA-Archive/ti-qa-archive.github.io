<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium - Updated SQLite database is lost when the app is killed » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium - Updated SQLite database is lost when the app is killed</h1>
		</header>
		<section>
			<p>For my application I make use of a basic SQLite database which is packaged with the app itself. That is a trimmed down version of the complete database, to reduce the download and reduce the startup time.</p>
<p>When the application is opened, it checks for an update on a server, and then receives the rest of the database + some images. The local database is then updated with the received data using several INSERT statements (surrounded by &quot;BEGIN&quot; and &quot;COMMIT&quot; statements).</p>
<p>What I notice is that when I manually kill the app (double tap the home button, long press on the app, press the &#39;minus&#39; badge) and restart the app again, the database is restored to the initial database packaged with the initial application. All the updates are lost and have to be downloaded again.</p>
<p>Is there a way to save the database data persistently, is it Apple policy that SQL data can always be removed to save space, or am I doing something wrong?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 14th 2013, 9:48:13 am">September 14th 2013</span>
				by <span class='authorname'>t vm</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>That is not consistent with what I have seen in the past. I use sqlite in exactly the same way, local database, updated from remote server… Never a problem. Are you using database transactions and maybe not committing them or not closing your database after the inserts? (Not sure if that would cause your problems, just tossing out ideas) and how are you installing your database the first time? You do need to use the install function… Almost sounds like you might be overwriting your working database with your basic database every time you launch…</p>
<p>Just some things to look at. If you provide code, might be easier to help.</p>
<p>Ray</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 14th 2013, 1:46:10 pm">September 14th 2013</span>
								by <span class='authorname'>Ray Belisle</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;m not using the &#39;install&#39; feature. Instead of putting a .sqlite file in the Resources dir, I do it by executing various SQL statements. The flow is as follows:<br>(1) Ti.Database.open(&#39;db&#39;);<br>(2) A couple of CREATE TABLE statements<br>(3) A couple of INSERT statements</p>
<p>Should this behave any different then the &#39;install&#39; method? I should look into non-committed transactions. There wouldn&#39;t be an easy way of checking to see if there is a transaction open?</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 14th 2013, 1:58:16 pm">September 14th 2013</span>
								by <span class='authorname'>t vm</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>someone needs to read the docs….</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 14th 2013, 9:00:39 pm">September 14th 2013</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
