<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Store Array with Local Notifications in APP Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Store Array with Local Notifications in APP</h1>
		</header>
		<section>
			<p>Dear Appcelerator people,</p>
<p>Is there a way to store an array with local notifications in the APP itself? So when im closing the APP completely and reopening it i still can detect the stored notifications?</p>
<p>now i have this piece of code for global registering of my notifications:</p>
<pre><code class="hljs">instance.createReminder = function(<span class="hljs-keyword">e</span>)
    {
       <span class="hljs-comment">//Ti.API.info('in the create reminder function in app.js ')</span>
       <span class="hljs-comment">//Ti.API.info(' passed reminder text' +e.reminder);</span>
       Ti.API.info('passed reminder date ' +<span class="hljs-keyword">e</span>.reminderDate);               

        globals.alerts[globals.alerts.length] = Ti.<span class="hljs-keyword">App</span>.iOS.scheduleLocalNotification(
        {     
            alertBody:<span class="hljs-keyword">e</span>.reminder,
            alertAction:<span class="hljs-string">"open"</span>,
            userInfo:{<span class="hljs-string">"hello"</span>:<span class="hljs-string">"world"</span>},
            sound:<span class="hljs-string">"pop.caf"</span>,

            date:<span class="hljs-keyword">e</span>.reminderDate        
        });
    }
</code></pre><p>I want to get the &#39;globas.alerts&#39; bakc from the app memory when reopening it? Are there any suggestions?</p>
<p>Or maybe i can get a list of the scheduled notifications planned? So i can use that array?</p>
<p>Thanks already!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 15th 2012, 4:56:40 pm">July 15th 2012</span>
				by <span class='authorname'>Blaat Orx</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>array</span></li>
					
						<li><span class='tagname'>close</span></li>
					
						<li><span class='tagname'>local notification</span></li>
					
						<li><span class='tagname'>reopening</span></li>
					
						<li><span class='tagname'>setlist</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-243159">
				
						<section>
							<p>Use Ti.App.Properties to store and retrieve data in between app sessions.</p>
<p>http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.1&#x2F;index.html#!&#x2F;api&#x2F;Titanium.App.Properties</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 15th 2012, 5:55:29 pm">July 15th 2012</span>
								by <span class='authorname'>Kosso</span><br>
								<a class="icon-bg icon-link" href="question/139727/store-array-with-local-notifications-in-app.html#answer-243159" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-243195">
				
						<section>
							<p>Allright thanks for that, but are arrays supported?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 16th 2012, 11:23:00 am">July 16th 2012</span>
								by <span class='authorname'>Blaat Orx</span><br>
								<a class="icon-bg icon-link" href="question/139727/store-array-with-local-notifications-in-app.html#answer-243195" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Did you try?  ;) </p>
<p>In older version of Ti.App.properties, you had to JSON.stringify an array to store in and JSON.parse it when you retrieve it. </p>
<p>Now, you should be able to use the getObject  &#x2F; setObject methods to store an array. (if not, stringify it and store as a string)</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2012, 11:34:03 am">July 16th 2012</span>
											by <span class='authorname'>Kosso</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-243211">
				
						<section>
							<p>Thanks i got the arrays working!</p>
<p>Now another small problem, i have a in app listener for my notifications set that works fine but when is set my notification in app and im closing my app my background listener will not pick up the notification, any ideas?:</p>
<p>my dates are fin checked it with the working app listener, im calling that function with:</p>
<pre><code class="hljs">var now = <span class="hljs-keyword">new</span> Date();
var dateSet = <span class="hljs-keyword">new</span> Date(now.getTime() + <span class="hljs-number">7000</span>);    
Ti.API.info(<span class="hljs-string">'now = '</span> + now);    

globals.notifyAlerts.createReminder({<span class="hljs-string">reminderID:</span><span class="hljs-string">'1'</span>, <span class="hljs-string">reminderChannelID:</span><span class="hljs-string">'3'</span>, <span class="hljs-string">reminderTitle:</span><span class="hljs-string">'_reminder'</span>, <span class="hljs-string">reminderDate:</span>dateSet});
</code></pre><p>app listener that works fine:</p>
<pre><code class="hljs">instance.createReminder = function(<span class="hljs-keyword">e</span>)
{
   <span class="hljs-comment">//Ti.API.info('in the create reminder function in app.js ')</span>
   <span class="hljs-comment">//Ti.API.info(' passed reminder text' +e.reminder);</span>
   <span class="hljs-comment">//Ti.API.info('passed reminder date ' +e.reminderDate);      </span>

    globals.alerts[globals.alerts.length] = Ti.<span class="hljs-keyword">App</span>.iOS.scheduleLocalNotification(
    {     
        alertBody:<span class="hljs-keyword">e</span>.reminder,
        alertAction:<span class="hljs-string">"open"</span>,
        userInfo:{<span class="hljs-string">"hello"</span>:<span class="hljs-string">"world"</span>},
        sound:<span class="hljs-string">"pop.caf"</span>,

        date:<span class="hljs-keyword">e</span>.reminderDate        
    });

    globals.pAlerts.push([<span class="hljs-keyword">e</span>.reminderID, <span class="hljs-keyword">e</span>.reminderChannelID, <span class="hljs-keyword">e</span>.reminderTitle, <span class="hljs-keyword">e</span>.reminderDate])
    Ti.<span class="hljs-keyword">App</span>.Properties.setList('alerts', globals.pAlerts);        
}
</code></pre><p>app.js for registering():</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isiOS4Plus</span>(<span class="hljs-params"></span>)
</span>{
    <span class="hljs-comment">// add iphone specific tests</span>
    <span class="hljs-keyword">if</span> (Titanium.Platform.name == <span class="hljs-string">'iPhone OS'</span>)
    {
        <span class="hljs-keyword">var</span> version = Titanium.Platform.version.split(<span class="hljs-string">"."</span>);
        <span class="hljs-keyword">var</span> major = <span class="hljs-built_in">parseInt</span>(version[<span class="hljs-number">0</span>],<span class="hljs-number">10</span>);

        <span class="hljs-comment">// can only test this support on a 3.2+ device</span>
        <span class="hljs-keyword">if</span> (major &gt;= <span class="hljs-number">4</span>)
        {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

<span class="hljs-keyword">if</span> (isiOS4Plus())
{
    <span class="hljs-comment">// register a background service. this JS will run when the app is backgrounded</span>
    <span class="hljs-keyword">var</span> service = Ti.App.iOS.registerBackgroundService({url:<span class="hljs-string">'bg.js'</span>});
    <span class="hljs-comment">/*Ti.API.info("registered background service = "+service);*/</span>

    <span class="hljs-comment">// fired when an app resumes for suspension</span>
    Ti.App.addEventListener(<span class="hljs-string">'resume'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
        Ti.API.info(<span class="hljs-string">"app is resuming from the background"</span>);
    });
    Ti.App.addEventListener(<span class="hljs-string">'resumed'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
        Ti.API.info(<span class="hljs-string">"app has resumed from the background"</span>);
    });

    Ti.App.addEventListener(<span class="hljs-string">'pause'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
        Ti.API.info(<span class="hljs-string">"app was paused from the foreground"</span>);
    });
}
</code></pre><p>bg.js that won&#39;t work:</p>
<pre><code class="hljs"><span class="hljs-comment">/**
 * this is a background service and this code will run *every* time the 
 * application goes into the foreground
 */</span>
Ti.API.info(<span class="hljs-string">"hello from a background service"</span>);

<span class="hljs-comment">// we cancel our notification if we don't want it to continue</span>
<span class="hljs-comment">// notification.cancel(); </span>

<span class="hljs-comment">//this one is not working!! </span>
Ti.App.iOS.addEventListener(<span class="hljs-string">'notification'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{
    Ti.API.info(<span class="hljs-string">"local notification received: "</span> + <span class="hljs-built_in">JSON</span>.stringify(e));    
});

Ti.App.currentService.addEventListener(<span class="hljs-string">'stop'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{
    Ti.API.info(<span class="hljs-string">"background service is stopped"</span>);
});

<span class="hljs-comment">// we need to explicitly stop the service or it will continue to run</span>
<span class="hljs-comment">// you should only stop it if you aren't listening for notifications in the background</span>
<span class="hljs-comment">// to conserve system resources. you can stop like this:</span>
<span class="hljs-comment">//Ti.App.currentService.stop();</span>

<span class="hljs-comment">// you can unregister the service by calling </span>
<span class="hljs-comment">// Ti.App.currentService.unregister() </span>
<span class="hljs-comment">// and this service will be unregistered and never invoked again</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 16th 2012, 5:02:38 pm">July 16th 2012</span>
								by <span class='authorname'>Blaat Orx</span><br>
								<a class="icon-bg icon-link" href="question/139727/store-array-with-local-notifications-in-app.html#answer-243211" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>fixed it! my alertbody was not valid!</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2012, 5:42:19 pm">July 16th 2012</span>
											by <span class='authorname'>Blaat Orx</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Blaat,</p>
<p>I have to implement same functionality in my app in IOS, can you suggest me from where to start  to implement the local notification, same as you, your help will be appreciated.<br>Thanks in advance</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 2nd 2013, 5:46:46 am">May 2nd 2013</span>
											by <span class='authorname'>Sagar  Patel</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
