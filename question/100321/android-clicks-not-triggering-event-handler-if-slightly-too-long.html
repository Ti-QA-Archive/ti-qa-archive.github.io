<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android clicks not triggering event handler if slightly too long » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android clicks not triggering event handler if slightly too long</h1>
		</header>
		<section>
			<p>We&#39;ve found that in testing our iPhone app on Android on the device, if we touch a button or row label (table view) longer than a very quick tap, the &quot;click&quot; event handler does not trigger.  We are checking the logs by running <strong>adb -d logcat</strong>, and nothing happens.</p>
<p><strong>This also happens in Kitchen Sink on Android under the Controls &#x2F; Button screen - press the Click Me button for more that 0.2 seconds, and it will do nothing.</strong></p>
<p>This happens on ANY button or table view row that has a click event.  The buttons all have images behind them, with alternative images for the button-down view, and those register as you hold the button down.  (This is all the same code that was compiled and runs fine on the iPhone.)</p>
<p>Is there something we&#39;re missing, or a parameter that we can adjust for finger taps?  And no, we are not &quot;sliding&quot; our finger when we &quot;slow tap&quot; a button (and by slow, I mean a casual, cautious tap to ensure you are hitting a particular spot on the screen, for example).</p>
<p>Any ideas&#x2F;suggestions?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 13th 2011, 6:46:08 pm">January 13th 2011</span>
				by <span class='authorname'>Richard Baughman</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>click</span></li>
					
						<li><span class='tagname'>event</span></li>
					
						<li><span class='tagname'>trigger</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-178771">
				
						<section>
							<p>Richard</p>
<p>Surely if you leave your finger on the screen for more than a pre-defined length of time, the action becomes a touch? Check out the <code>touchstart</code> and <code>touchend</code> events of most UI controls.</p>
<p>Cheers</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 13th 2011, 7:19:06 pm">January 13th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/100321/android-clicks-not-triggering-event-handler-if-slightly-too-long#answer-178771" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Well, not on the iPhone, and not on any other Android apps I&#39;ve tried.  It only happens in Ti apps, it seems.  All other apps on Android work as the iPhone does - the button&#x2F;row highlight even if you hold your finger on them, and when you let go they trigger the click.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 13th 2011, 8:42:51 pm">January 13th 2011</span>
											by <span class='authorname'>Richard Baughman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you need to configure a delay, then simply do so with the touchstart and touchend events.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2011, 12:04:30 am">January 14th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I don&#39;t want a delay.  I simply want the app&#39;s button-click and row-click events to work the way all non-Titanium app click events work (Android <em>and</em> iPhone).  No matter how long you hold your finger on a table view row or button, when you let go the click event is triggered.  This is not the case in the Ti Android environment (try the Kitchen Sink app as mentioned in my post to see what I mean).</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2011, 3:04:08 am">January 14th 2011</span>
											by <span class='authorname'>Richard Baughman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Richard</p>
<p>Anything touch below 0.2 seconds is registered as a click. Any touch above 0.2 seconds is registered as a touch. You need to configure a separate eventListener for each of these two scenarios.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2011, 10:48:37 am">January 14th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So for every button and table row that has a click event handler I have to add a touch event handler to do the same thing if I want my users to not be confused as to why the button&#x2F;row doesn&#39;t seem to do anything?  This does not make sense to me.</p>
<p>From the Android Developer page on handling UI Events:  &quot;For a touch-capable device, once the user touches the screen, the device will enter touch mode. From this point onward, only Views for which isFocusableInTouchMode() is true will be focusable, such as text editing widgets. <strong>Other Views that are touchable, like buttons, will not take focus when touched; they will simply fire their on-click listeners when pressed.</strong>&quot;</p>
<p>&quot;onTouch() - This returns a boolean to indicate whether your listener consumes this event. The important thing is that this event can have multiple actions that follow each other. So, if you return false when the down action event is received, you indicate that you have not consumed the event and are also not interested in subsequent actions from this event. Thus, you will not be called for any other actions within the event, such as a finger gesture, or the eventual up action event.&quot;</p>
<p>My read of this is that if you do not have an onTouch event handler, the onClick one should always get the event.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2011, 2:26:30 pm">January 14th 2011</span>
											by <span class='authorname'>Richard Baughman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>&gt;Anything touch below 0.2 seconds is registered as a click. Any touch above 0.2 seconds is registered as a touch. You need to configure a separate eventListener for each of these two scenarios.</p>
<p>This may be the way this works at present in Ti, but it is definitely not the way it <em>should work</em>. At present in my Titanium-developed app, I have to click my buttons very quickly in order for the click event to fire. However, in <em>all</em> of the non-Ti apps on my Android device, I can click and hold down the buttons for any length of time, and when I release the button, the desired action is carried out.</p>
<p>Requiring users to limit their button presses to 0.2 seconds is not realistic (especially for older users and users with certain disabilities which affect their motor skills), nor is it the way <em>every other Android app</em> works.</p>
<p>Requiring developers to add a separate event listener is also not realistic.  Simply put: button clicks on apps created with Ti–regardless of the duration of the click–should function in the same way that they do on non-Ti created apps.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 5th 2011, 8:30:52 am">February 5th 2011</span>
											by <span class='authorname'>Andrew Gribble</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-179391">
				
						<section>
							<p>Richard</p>
<p>If you have observed that the same code runs differently on android and iOS platforms, then your concerns may indeed be valid.</p>
<p>Would you create a use-case, as per the <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;guides&#x2F;en&#x2F;contribute.html#creating_good_use-cases">Creating Good Use-cases</a> documentation, and give us an example in one of the default android apps (installed by default on the emulator) that demonstrates the proper behavior, for comparison?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 14th 2011, 3:53:14 pm">January 14th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/100321/android-clicks-not-triggering-event-handler-if-slightly-too-long#answer-179391" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Richard - note that my answer above has been updated</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2011, 4:04:13 pm">January 14th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-179741">
				
						<section>
							<p>For a Use-case that works on Android Sim, try the Settings app. On the opening screen, click Display, then Brightness.  Click and hold the mouse down on OK or Cancel as long as you want, then let go; the event triggers the exact same way if you had just tapped it.  AND, all our Ti iOS apps&#39; buttons and table views work this way (including this one we are trying to convert to Android).</p>
<p>Now try the same thing in the Kitchen Sink on the Sim.  On the Controls menu, try the Button menu item.  Click and hold the green Click Me button for 1&#x2F;2 second, even 1&#x2F;4 second, and let go - pause just briefly before letting go.  You get no action.  Now just click and let go - the button changes, as it is supposed to.  Same with the Base UI &#x2F; View &#x2F; Alert Dialog screen buttons.</p>
<p>Load KS on your Android device and try the buttons on any screen - they all behave the same way - no action with the slightest pause on the button. Try any non-TI app with a button - pressing and holding the button for any time makes no difference - it&#39;s always a click.</p>
<p>BTW, I am getting the same behavior on a Table View with a label and one or two buttons in each row.  No click event is triggered on the row with the slightest pause.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 15th 2011, 4:14:28 am">January 15th 2011</span>
								by <span class='authorname'>Richard Baughman</span><br>
								<a class="icon-bg icon-link" href="question/100321/android-clicks-not-triggering-event-handler-if-slightly-too-long#answer-179741" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-179771">
				
						<section>
							<p>This currently broken in 1.5.x.</p>
<p>I spend some hours to track this down yesterday.</p>
<p>The intended behavior if I interpret the code correctly is that you can touch inside an element and as long as you do not move your finger out of the elements area a touch end event will be fired if you lift your finger.</p>
<p>Due to some wrong code handling the action described above will always result in a touch_cancel event (unless the element is located in the top left corner).</p>
<p>I created a patch to fix this issue and opened up a ticket:</p>
<p>https:&#x2F;&#x2F;github.com&#x2F;appseleration&#x2F;titanium_mobile&#x2F;commit&#x2F;ad24c453be4bd3c354621dbe3ea9e7db28fa0cdb</p>
<p>the fork is based on 1.5.1 and also addresses some other issues in 1.5.1. Additionally it provides basic support for longpress events on table views so you will be able to have longpress option dialog boxes as in other native android apps.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 15th 2011, 8:51:45 am">January 15th 2011</span>
								by <span class='authorname'>Nils Domrose</span><br>
								<a class="icon-bg icon-link" href="question/100321/android-clicks-not-triggering-event-handler-if-slightly-too-long#answer-179771" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you, Nils.  From your note, I assume that the fix avoids sending the touch_cancel event, which should result in a click event being passed on?  Just to summarize the issue: a &quot;touch&quot; or &quot;long-touch&quot; on a table view or button which has only a click event handler does not get the click event, when it should.</p>
<p>Not being a Git user and being fairly new to the Android platform &amp; applying patches (I&#39;ve done it with Ti&#x2F;iOS), can you tell me where and what to unpack from the above patch zip file?  Thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 16th 2011, 5:59:54 pm">January 16th 2011</span>
											by <span class='authorname'>Richard Baughman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>A good starting point to build the sdk is here: http:&#x2F;&#x2F;suchfuncoding.com&#x2F;128&#x2F;build-titanium-from-source&#x2F;<br>Basically you need to have scons and your env vars setup correctly. Afterwards just clone the git and run scons in the sdk dir</p>
<p>Nils</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 17th 2011, 6:00:53 pm">January 17th 2011</span>
											by <span class='authorname'>Nils Domrose</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-180771">
				
						<section>
							<p>Richard</p>
<p>To let you know, there is a ticket now for this issue at <a href="https:&#x2F;&#x2F;appcelerator.lighthouseapp.com&#x2F;projects&#x2F;32238-titanium-mobile&#x2F;tickets&#x2F;2844">#2844</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 17th 2011, 6:36:14 pm">January 17th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/100321/android-clicks-not-triggering-event-handler-if-slightly-too-long#answer-180771" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-193111">
				
						<section>
							<p><a href="https:&#x2F;&#x2F;appcelerator.lighthouseapp.com&#x2F;projects&#x2F;32238-titanium-mobile&#x2F;tickets&#x2F;2844">Ticket 2844</a> exists to track the problem. A fix is not going into 1.6.0. If you&#39;re in a hurry a community member provided a patch in this thread that you can apply to get your own build with the fix.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 5th 2011, 8:25:46 pm">February 5th 2011</span>
								by <span class='authorname'>Don Thorp</span><br>
								<a class="icon-bg icon-link" href="question/100321/android-clicks-not-triggering-event-handler-if-slightly-too-long#answer-193111" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
