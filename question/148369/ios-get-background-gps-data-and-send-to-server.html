<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>IOS get background gps Data and send to Server Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>IOS get background gps Data and send to Server</h1>
		</header>
		<section>
			<p>Hi everybodey, i would like to create an app that collect the geolocation data and send it to a server. This app should do all this stuff during it is in the background. Can you give me a clear answer about the possibilities, for an IOS device, to do this with appcelerator.</p>
<p>Thanks for your help !</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 16th 2013, 4:19:55 pm">February 16th 2013</span>
				by <span class='authorname'>meister kleister</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>background</span></li>
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>gps</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>server</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Missing from you question are several pieces of information that will help you obtain a speedy and accurate answer, please provide details the following details;</p>
<ul>
<li>Titanium SDK Version?</li>
<li>Target platform<ul>
<li>iOS only?</li>
</ul>
</li>
<li>A code snippet that can be used to determine what you have achieved so far</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="February 16th 2013, 4:37:57 pm">February 16th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-256934">
				
						<section>
							<p>Hi</p>
<p>I am sure you will agree that you have not provided a question but more a request for others to provide you with code that achieves your three goals;</p>
<ul>
<li>GPS tracking</li>
<li>Send to server</li>
<li>Background Operation</li>
</ul>
<p>Each of these three requests includes requires more than simply code, you need to understand the background of each.</p>
<p>I have not seen any code that you have provided in your original question to show what you have tried to demonstrate which path you are taking and if the answer is a bug fix or pointing you in the right direction.</p>
<p>Whilst there are people here who are generous enough (I am one of those people) to provide you with code that goes beyond a simple snippet or fix for your supplied code that has problems - you are basically asking for the framework for a complete app.</p>
<p>I am sure you understand that if you get that you are VERY lucky as you will have a solution and not had to create the solution yourself and got it for free (no one is asking you for money).</p>
<p>As I say - people here are happy to help - but you are going to have to show you have tried something yourself of ask for something specific.</p>
<p>I see from your membership date that you joined today - so welcome, we are a friendly bunch.  But do remember that if you ask for everything you will get nothing.  Ask for something and show you have at least tried to achieve your own goal and people will happily help you out - including me.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 16th 2013, 4:46:15 pm">February 16th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/148369/ios-get-background-gps-data-and-send-to-server.html#answer-256934" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the updated information.</p>
<p>Here is some simple code to get you started on the location side of things;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lbl = Ti.UI.createLabel({
    text: <span class="hljs-string">'Waiting'</span>
});
<span class="hljs-keyword">var</span> locationHandler = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  <span class="hljs-keyword">if</span> (e.success === <span class="hljs-literal">undefined</span> || e.success) {
    lbl.setText(<span class="hljs-built_in">JSON</span>.stringify(e.coords));
  }
}
win.add(lbl);
Ti.Geolocation.addEventListener(<span class="hljs-string">"location"</span>, locationHandler);
</code></pre><p><em>This will update a label on your window with the current location coordinates.</em></p>
<p>Here is a simple reusable function to manage calls to a web-server so you can post some data.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">net</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({
        onload: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(obj.success) !== <span class="hljs-string">'undefined'</span>) {
                obj.success({
                    data: <span class="hljs-keyword">this</span>.responseText,
                    status: <span class="hljs-keyword">this</span>.status
                });
            }
        },
        onerror: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(obj.error) !== <span class="hljs-string">'undefined'</span>) {
                obj.error({
                });
            }
        },
        onsendstream: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(obj.progress) !== <span class="hljs-string">'undefined'</span>) {
                obj.progress({
                    progress: <span class="hljs-built_in">parseFloat</span>((e.progress * <span class="hljs-number">100</span>), <span class="hljs-number">10</span>)
                });
            }
        },
        timeout: <span class="hljs-number">1000</span> * (obj.timeout || <span class="hljs-number">5</span>)
    });
    xhr.open(<span class="hljs-string">"POST"</span>, obj.url);
    xhr.send(obj.data || {});
}
</code></pre><p>This is how you call it;</p>
<pre><code class="hljs">net<span class="hljs-list">({
    url: <span class="hljs-quoted">'http</span><span class="hljs-keyword">://youwebserver</span>.com/afolder/apage.php',
    data: {
        field1: <span class="hljs-quoted">'Whatever</span>',
        field2: <span class="hljs-quoted">'You</span>',
        somethingelse: <span class="hljs-quoted">'Want</span>'
    },
    success: function <span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> {
        Ti.API.info<span class="hljs-list">(<span class="hljs-quoted">'success</span>' + JSON.stringify<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span>)</span><span class="hljs-comment">;</span>
    },
    error: function <span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> {
        Ti.API.info<span class="hljs-list">(<span class="hljs-quoted">'error</span>' + JSON.stringify<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span>)</span><span class="hljs-comment">;</span>
    },
    progress: function <span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> {
        Ti.API.info<span class="hljs-list">(<span class="hljs-quoted">'progress</span>' + e.progress)</span><span class="hljs-comment">;</span>
    },
    timeout: <span class="hljs-number">5</span>
})</span><span class="hljs-comment">;</span>
</code></pre><p>Get used to doing these two things before you start trying to get it working on a background service.</p>
<p>I suggest you consider this your starting point and when you are ready start a new question to help you with the background services if you have not solved it yourself.</p>
<p>If the code above makes no sense, you are going to need to dig into each of the methods referenced above.</p>
<p>That said this should give you a very good start and will form the basis of your app.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2013, 7:19:23 pm">February 16th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcom, thanks for the good start. Backgroundservice is now working for me.<br>But how can i post to the webservice with xml and basic authentication ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2013, 10:03:26 am">February 20th 2013</span>
											by <span class='authorname'>meister kleister</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-256939">
				
						<section>
							<p>I&#39;m sorry form my not clear question. For the Background: I has developed a app in phonegap before, but the problem was that i can&#39;t use it in the Background. Getting position data in the Background with the setting int the .plist was possible. But to send the data at the same time to a server while the app is in the background was not possible with this framework. So i try to find a solution for this problem to run the geoupload in the Background.</p>
<p>I find this Site but tried nothing befor. I don&#39;t demand code from you guyes. The question is only. If i start with Titanium as a natice code builder could i run my geodata app in the Background to upload the data to a Server. (like an javascript action).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 16th 2013, 7:07:40 pm">February 16th 2013</span>
								by <span class='authorname'>meister kleister</span><br>
								<a class="icon-bg icon-link" href="../../question/148369/ios-get-background-gps-data-and-send-to-server.html#answer-256939" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Quick tip; please comment on the related answer or the actual question if there is no answer - rather than creating a whole new answer which is really a comment - it makes it harder in the future to work out threads if answers scores change or other answers are added. (You are not being told off)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2013, 7:19:36 pm">February 16th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-256936">
				
						<section>
							<p>Yes it is possible with Appcelerator Titanium.<br>You&#39;ll need to add the appropriate permissions to info.plist for geolocation to run in the background</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>UIBackgroundModes<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>location<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 16th 2013, 5:30:03 pm">February 16th 2013</span>
								by <span class='authorname'>Hani Hamadeh</span><br>
								<a class="icon-bg icon-link" href="../../question/148369/ios-get-background-gps-data-and-send-to-server.html#answer-256936" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>How do i apply this? Putting this in my info.plist doesn&#39;t work. Because when i rebuild to IOS device in Titanium it just changes the info.plist back again</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 3rd 2013, 5:36:56 am">March 3rd 2013</span>
											by <span class='authorname'>T Engwer</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
