<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Question about Urban Airship Notification » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Question about Urban Airship Notification</h1>
		</header>
		<section>
			<p>hello to all guys</p>
<p>I wanted to ask you a question on the method for sending push notifications with Urban Airship servie</p>
<p>The service allows you to test the notifications in two ways:</p>
<p>1) loading a &quot;<strong>certified developer</strong>&quot;</p>
<p>2) loading a &quot;<strong>certified production</strong>&quot;</p>
<p>I wanted to know this thing:</p>
<ul>
<li>with the first method I can test my notifications only when using the device token?</li>
<li>while the second after loading the &quot;production certificate&quot;, even if you do not register the device token, the notifications come in anyway?</li>
</ul>
<p>(I&#39;ve already tested the service, it works perfectly, but they are still in testing I tried the service only with the &quot;certified developer&quot; using the device token)</p>
<p>thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 29th 2013, 5:02:12 am">July 29th 2013</span>
				by <span class='authorname'>nicolò monili</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>airship</span></li>
					
						<li><span class='tagname'>urban</span></li>
					
						<li><span class='tagname'>urban airship</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-266524">
				
						<section>
							<p>When you&#39;re ready to submit to the app store, you&#39;ll want to create a production app that uses your production certificate (iOS) and API key (Android) for sending, as your development certificate will not work for production apps.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 30th 2013, 5:26:06 am">July 30th 2013</span>
								by <span class='authorname'>Jeremy Sher</span><br>
								<a class="icon-bg icon-link" href="question/155388/question-about-urban-airship-notification#answer-266524" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>yes yes yes, I knew that :)<br>but wanted to know if what I said was correct, that in &quot;developer mode&quot; could send push notifications test only through the device token</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 30th 2013, 5:50:06 am">July 30th 2013</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Your development app in Urban Airship should actually have all of the features of a production app (they&#39;re the push provider we use as well). The trick is that the &quot;Test Push&quot; option can in fact only send to a single device, but you can use the Push Composer to send to tags, segments, etc just like you would in production.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 30th 2013, 2:43:48 pm">July 30th 2013</span>
											by <span class='authorname'>Jeremy Sher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Jeremy Sher can I ask you another question?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 8:03:42 am">August 5th 2013</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sure, please do.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 2:25:03 pm">August 5th 2013</span>
											by <span class='authorname'>Jeremy Sher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hello, thank you very much<br>I wanted you to see the code I use to enable the user to use push notifications</p>
<p>when the user enters in the app is unleashed this event</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">active_push_notification</span><span class="hljs-params">()</span> </span>{

 Ti.Network.registerForPushNotifications({
 types : [Ti.Network.NOTIFICATION_TYPE_BADGE, Ti.Network.NOTIFICATION_TYPE_ALERT, Ti.Network.NOTIFICATION_TYPE_SOUND],
 success : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
 <span class="hljs-keyword">var</span> deviceToken = e.deviceToken;
 Ti.API.info(<span class="hljs-string">'successfully registered for apple device token with '</span> + e.deviceToken);
 <span class="hljs-keyword">var</span> params = {
 tags : [<span class="hljs-string">'version'</span> + Ti.App.getVersion()],
 alias : <span class="hljs-string">""</span>
 };
 UrbanAirship.register(params, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> </span>{
 Ti.API.debug(<span class="hljs-string">"registerUrban success: "</span> + JSON.stringify(data));
 }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(errorregistration)</span> </span>{
 Ti.API.warn(<span class="hljs-string">"Couldn't register for Urban Airship"</span>);
 });
 },
 error : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
 Ti.API.warn(<span class="hljs-string">"push notifications disabled: "</span> + e);
 },
 <span class="hljs-keyword">callback</span> : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
 <span class="hljs-keyword">var</span> a = Ti.UI.createAlertDialog({
 title : <span class="hljs-string">'New Message'</span>,
 message : e.data.alert
 });
 a.show();
 }
 });
 Ti.API.info(<span class="hljs-string">'registered urban airship'</span>);

 }
</code></pre><p>and this is urbanship.js</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> UrbanAirship = {
    getToken: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> Ti.Network.remoteDeviceUUID;
    },
    register: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">params, lambda, lambdaerror</span>) </span>{
        <span class="hljs-keyword">var</span> method = <span class="hljs-string">'PUT'</span>;
        <span class="hljs-keyword">var</span> token = UrbanAirship.getToken();
        <span class="hljs-keyword">var</span> url = UrbanAirship.baseurl+<span class="hljs-string">'/api/device_tokens/'</span>+token;
        payload = (params) ? <span class="hljs-built_in">JSON</span>.stringify(params) : <span class="hljs-string">''</span>;
        Ti.API.info(<span class="hljs-string">'sending registration with params '</span>+payload);
        UrbanAirship.helper(url, method, payload, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data,status</span>)</span>{
            Ti.API.log(<span class="hljs-string">'completed registration: '</span>+<span class="hljs-built_in">JSON</span>.stringify(status));
            <span class="hljs-keyword">if</span> (status == <span class="hljs-number">200</span>) {
                lambda({action:<span class="hljs-string">"updated"</span>,success:<span class="hljs-literal">true</span>});
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (status == <span class="hljs-number">201</span>) {
                lambda({action:<span class="hljs-string">"created"</span>,success:<span class="hljs-literal">true</span>});
            } <span class="hljs-keyword">else</span> {
              Ti.API.log(<span class="hljs-string">'error registration: '</span>+<span class="hljs-built_in">JSON</span>.stringify(status));
            }
        },<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr,error</span>) </span>{
          Ti.API.log(<span class="hljs-string">'xhr error registration: '</span>+<span class="hljs-built_in">JSON</span>.stringify(error));
        });
    },
    unregister: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">lambda</span>) </span>{
        <span class="hljs-keyword">var</span> method = <span class="hljs-string">'DELETE'</span>;
        <span class="hljs-keyword">var</span> token = UrbanAirship.getToken();
        <span class="hljs-keyword">var</span> url = UrbanAirship.baseurl+<span class="hljs-string">'/api/device_tokens/'</span>+token;
        UrbanAirship.helper(url, method, <span class="hljs-literal">null</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data,status</span>)</span>{
            <span class="hljs-keyword">if</span> (status == <span class="hljs-number">204</span>) {
              lambda({status:status});
            } <span class="hljs-keyword">else</span> {
              lambda({status: status});
            }
        },<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr,error</span>) </span>{
          lambda({success:<span class="hljs-literal">false</span>,xhr:xhr.status,error:error});
        });
    },
    getAlias: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">lambda</span>) </span>{
        <span class="hljs-keyword">var</span> method = <span class="hljs-string">'GET'</span>;
        <span class="hljs-keyword">var</span> token = UrbanAirship.getToken();
        <span class="hljs-keyword">var</span> url= UrbanAirship.baseurl+<span class="hljs-string">'/api/device_tokens/'</span>+token;
        UrbanAirship.helper(url, method, <span class="hljs-literal">null</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data,status</span>) </span>{
            lambda(data);
        },<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr,e</span>) </span>{
          lambda({status:xhr.status,e:e});
        });
    },
    helper: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, method, params, lambda, lambdaerror</span>) </span>{
      <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
      xhr.setTimeout(<span class="hljs-number">60000</span>);
      xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        lambdaerror(<span class="hljs-keyword">this</span>,e);
      };
      xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> results = <span class="hljs-keyword">this</span>.responseText;
        lambda(results, <span class="hljs-keyword">this</span>.status);
      };
      <span class="hljs-comment">// open the client</span>
      xhr.open(method, url);
      xhr.setRequestHeader(<span class="hljs-string">'Content-Type'</span>,<span class="hljs-string">'application/json'</span>);
      xhr.setRequestHeader(<span class="hljs-string">'Authorization'</span>,<span class="hljs-string">'Basic '</span>+Ti.Utils.base64encode(UrbanAirship.key + <span class="hljs-string">":"</span> + UrbanAirship.master_secret));
      <span class="hljs-comment">// send the data</span>
      xhr.send(params);
    }
};
</code></pre><p>this code is sufficient to enable push notifications (in the state production)?</p>
<p>I used the same code to enable push notifications in the state development (by sending the token device), but now that they are in production code is the same?</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 2:30:09 pm">August 5th 2013</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It looks like it should — I&#39;ve never had to make code changes when moving from development push to production, only configuration changes.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 2:36:08 pm">August 5th 2013</span>
											by <span class='authorname'>Jeremy Sher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>then the code should always be to</p>
<p>i just have to create the app on URBAN AIRSHIP in PRODUCTION state and change the three values ??of the keys right?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 2:38:58 pm">August 5th 2013</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266816">
				
						<section>
							<p>Yes, exactly — you&#39;ll need to provide <code>PRODUCTION_APP_KEY</code>, <code>PRODUCTION_APP_SECRET</code>, and set <code>APP_STORE_OR_AD_HOC_BUILD</code> to <code>true</code>. If you have a custom <code>airshipconfig.properties</code> file (Android), don&#39;t forget to also update the sender ID in case you&#39;re using a different API key for production GCM.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 5th 2013, 2:44:00 pm">August 5th 2013</span>
								by <span class='authorname'>Jeremy Sher</span><br>
								<a class="icon-bg icon-link" href="question/155388/question-about-urban-airship-notification#answer-266816" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Sorry Nicolo, meant this as a reply</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 2:44:20 pm">August 5th 2013</span>
											by <span class='authorname'>Jeremy Sher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I only care about iOS Jeremy Sher :)</p>
<p>when i&#39;m in production state , I create a new app on the site URBAN AIRSHIP, and edit the following lines of code from the app (titanium)</p>
<pre><code class="hljs">UrbanAirship.key = <span class="hljs-string">"oooooo'';
UrbanAirship.secret = "</span>ooooooo<span class="hljs-string">''</span><span class="hljs-comment">;</span>
UrbanAirship.master_secret = <span class="hljs-string">'oooooo'</span><span class="hljs-comment">;</span>
</code></pre><p>I have to change other things on the iOS platform?<br>excuse the many questions but I would like to settle this matter once and for all</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 2:49:29 pm">August 5th 2013</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You should never have to include the master secret in client code — that&#39;s used for authenticating to actually send push, which means that if someone was able to get that key from your package they could actually send pushes to your users. We use the com.0x82.urbanairship module to help us manage registration, location services, etc — I haven&#39;t implemented UA without it in a while, but would highly recommend that module (the company I work for helped develop it).</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 2:52:59 pm">August 5th 2013</span>
											by <span class='authorname'>Jeremy Sher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok I&#39;ll try not to insert the master-secret</p>
<p>before talking to set the property: APP_STORE_OR_AD_HOC_BUILD?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 2:55:28 pm">August 5th 2013</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Since you&#39;re talking to the Urban Airship API directly, you shouldn&#39;t need to specify that (it&#39;s used by the different modules to determine if it&#39;s talking to sandbox servers or not).</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 2:58:10 pm">August 5th 2013</span>
											by <span class='authorname'>Jeremy Sher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Jeremy Sher hello it&#39;s me again :)</p>
<p>I did more tests …</p>
<p>using the code that I posted previously, I have created an app on URBAN AIRSHIP (state-development), and when I open the app from the device and I enable push notifications (with the usual alert), on the site URBAN AIRSHIP is properly registered the my DEVICE TOKEN.</p>
<p>and if I try to send a broadcast message, the notification is successfully sent to my device.</p>
<p>Now what I wonder is this: using the same code, when i publish the app on the Appstore (of course I will have before changing the two key with the new  that i will take from URBAN AIRSHIP site when I create the new app in the state production) , what will happen ?</p>
<p>each user that will enable the notifications still save the device token?</p>
<p>thanks thanks thanks again.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 8:14:59 pm">August 5th 2013</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes, I think that&#39;s exactly right — as long as you&#39;re using the production credentials users who download your app from the store should have their device tokens registered with Urban Airship so you can send to them just like you&#39;ve sent to your own device.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 8:19:12 pm">August 5th 2013</span>
											by <span class='authorname'>Jeremy Sher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok thanks again</p>
<p>my curiosity … You have already used this service?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 8:22:15 pm">August 5th 2013</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes, we use it for our client&#39;s apps and are generally very happy with it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 8:27:46 pm">August 5th 2013</span>
											by <span class='authorname'>Jeremy Sher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>However, I think I understood that (apart for the first 45 days free), I can send broadcast messages from the site URBAN AIRSHIP only for the first 45 days for free, but if you do not want to pay I can send broadcast messages only via the API right? or am I wrong?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 8:30:19 pm">August 5th 2013</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I think you need to pay them regardless of whether you&#39;re using the dashboard or API (we use both for different things) but you should contact their sales people with those questions.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2013, 8:41:05 pm">August 5th 2013</span>
											by <span class='authorname'>Jeremy Sher</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
