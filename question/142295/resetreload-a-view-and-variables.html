<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Reset/Reload a view and variables » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Reset/Reload a view and variables</h1>
		</header>
		<section>
			<p>Everyone,</p>
<p>(Overview of the app - one window with multiple views that are set with zIndexes that get shown and hiden as a user interacts with the application, this is a data entry app one device but multiple people entering their data.)</p>
<p>In my app I am creating today&#39;s date using the following:</p>
<pre><code class="hljs"><span class="hljs-comment">//Create the Date object that is today and used to calculate a person's age</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> today</span> = new Date();

<span class="hljs-variable"><span class="hljs-keyword">var</span> day</span> = today.getUTCDate();
<span class="hljs-variable"><span class="hljs-keyword">var</span> month</span> = today.getUTCMonth() + <span class="hljs-number">1</span>;
<span class="hljs-variable"><span class="hljs-keyword">var</span> year</span> = today.getUTCFullYear();
</code></pre><p>I then use today to set the value of a date picker</p>
<pre><code class="hljs">
//<span class="hljs-operator"><span class="hljs-keyword">Create</span> the Acutal <span class="hljs-built_in">Date</span> Picker
<span class="hljs-keyword">var</span> picker = Titanium.UI.createPicker({
    top: <span class="hljs-number">32</span>,
    selectionIndicator: <span class="hljs-literal">true</span>,
    <span class="hljs-keyword">value</span>: today,
    <span class="hljs-keyword">type</span>:Ti.UI.PICKER_TYPE_DATE,
});</span>
</code></pre><p>The date picker is on its own view that I am animate when a user clicks on the textField.</p>
<p>I then use the today variable to calculate a users age and set a photo images name. </p>
<p>Everything is working correctly the first time through the app.  I am uploading the photo along with other information to my web server. </p>
<p>What I am trying to figure out is how to get &quot;today&quot; to recreate itself each time the data entry view is shown instead of when the app launches.  Also how do I get the date picker to use the new calculated &quot;today&quot; so when a new user goes to choose a date it starts with today, right now it shows the last date picked.</p>
<p>Here is how I am trying to reset the variables and &quot;today&quot; after the photo gets uploaded to the server</p>
<pre><code class="hljs">xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> successUpload = Titanium.UI.createAlertDialog({
            title: <span class="hljs-string">'Thank You'</span>,
            message: <span class="hljs-string">'Your Information Has Been Submitted'</span>
            });
            successUpload.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
                entryForm.show();
                viewThanks.hide();
                dobText.value = <span class="hljs-string">""</span>;
                fNameText.value = <span class="hljs-string">""</span>;
                emailText.value = <span class="hljs-string">""</span>;
                MyApp.photoName = <span class="hljs-string">""</span>;
                MyApp.totalDays = <span class="hljs-string">""</span>;
                MyApp.d = <span class="hljs-string">""</span>;
                e.value = <span class="hljs-string">""</span>;
                image.value = <span class="hljs-string">""</span>;
                f.value = <span class="hljs-string">""</span>;
                <span class="hljs-keyword">var</span> today = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
                 <span class="hljs-keyword">var</span> day = today.getUTCDate();
                <span class="hljs-keyword">var</span> month = today.getUTCMonth() + <span class="hljs-number">1</span>;
                <span class="hljs-keyword">var</span> year = today.getUTCFullYear();
                });
            successUpload.show();
      };
</code></pre><p>The code for the app is a couple of hundred lines long so if anyone wants to see it all let me know.</p>
<p>Thanks in advance.</p>
<p>Dan</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 16th 2012, 4:57:08 pm">September 16th 2012</span>
				by <span class='authorname'>Daniel Krajc</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>data</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-247374">
				
						<section>
							<p>You need to wrap the functionality that you want to execute each time in a function. That way you can listen for the focus event on your data entry window and execute that function each time.  This should make it easy reset all your variables and give you a fresh interface for data entry.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 16th 2012, 9:50:23 pm">September 16th 2012</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/142295/resetreload-a-view-and-variables#answer-247374" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247424">
				
						<section>
							<p>Anthony,</p>
<p>Thanks for the information.  I am still not sure I get it.  The app only has one window, I added all of the elements on different views and I am hiding and showing the views.  If I have an eventListener on a button that is </p>
<pre><code class="hljs">testButton.addEventlistener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
entryView.show();
});
</code></pre><p>would the show() act as the focus?  If so then I would just have to do </p>
<pre><code class="hljs">entryView.addEventListener(<span class="hljs-string">'focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
reset my variables
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 17th 2012, 4:34:10 pm">September 17th 2012</span>
								by <span class='authorname'>Daniel Krajc</span><br>
								<a class="icon-bg icon-link" href="question/142295/resetreload-a-view-and-variables#answer-247424" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Please use the comment feature when commenting on an answer, it keeps the thread easier to read.</p>
<p>I used the focus event as an example. It looks like you&#39;ve already got the perfect place to reset your variables.</p>
<pre><code class="hljs">testButton.addEventlistener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    <span class="hljs-comment">// reset your vars here, then show the entryView</span>
    resetVariables();
    entryView.show();
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="September 17th 2012, 4:44:59 pm">September 17th 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
