<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>How to remove/close All Windows from Application and open New One » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>How to remove/close All Windows from Application and open New One</h1>
		</header>
		<section>
			<p>I am using custom Tabs (Buttons) instead of Tabbar, as tabbar can&#39;t close on Android and if contain in window so make it irresponsive to close. I am opening all Windows one by one from Bottom Button</p>
<pre><code class="hljs">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LoadBottomButton</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> cx = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++) {

            <span class="hljs-keyword">var</span> bottPath = <span class="hljs-string">'../images/testEn/'</span> + i + <span class="hljs-string">'_en.png'</span>;
            <span class="hljs-keyword">var</span> hoverPath = <span class="hljs-string">'../images/testEnOrange/'</span> + i + <span class="hljs-string">'oren.png'</span>;
            <span class="hljs-keyword">var</span> focusPath = <span class="hljs-string">'../images/testSelEn/'</span> + i + <span class="hljs-string">'sel.png'</span>

            <span class="hljs-keyword">var</span> bottomBtn = Ti.UI.createButton({
                height:<span class="hljs-number">61</span>,
                width:<span class="hljs-number">65</span>,
                top: <span class="hljs-number">0</span>,
                backgroundImage:bottPath,
                backgroundFocusedImage:hoverPath,
                backgroundSelectedImage:focusPath,
                zIndex: <span class="hljs-number">2</span>,
                left:cx,
                tag:i,

            });


            <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span>) { 
                bottomBtn.backgroundImage = focusPath;
            }

            bottomBtn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{


                <span class="hljs-keyword">if</span> (e.source.tag == <span class="hljs-number">2</span>) {

                    <span class="hljs-comment">//alert(e.source.tag);</span>
                        <span class="hljs-keyword">var</span> winCat1 = <span class="hljs-literal">null</span>;
                            winCat1 = Titanium.UI.createWindow({
                                url: <span class="hljs-string">'business.js'</span>,
                                <span class="hljs-comment">// title: e.source.catName,</span>
                                backgroundImage: <span class="hljs-string">'../images/bkg-complete.png'</span>,
                                barColor:<span class="hljs-string">'#111'</span>,
                                backgroundColor: <span class="hljs-string">'transparent'</span>,
                                tabBarHidden: <span class="hljs-literal">true</span>,
                                <span class="hljs-comment">//modal: true,</span>
                                navbarHidden:<span class="hljs-literal">true</span>,
                                fullscreen:<span class="hljs-literal">true</span>,
                                exitOnClose:<span class="hljs-literal">true</span>
                            });

                            winCat1.orientationModes = [
                                Titanium.UI.PORTRAIT
                            ];

                            winCat1.open();

                            <span class="hljs-comment">//win1.close();</span>
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.source.tag == <span class="hljs-number">3</span>) {

                    <span class="hljs-keyword">var</span> winCat2 = <span class="hljs-literal">null</span>;
                    winCat2 = Titanium.UI.createWindow({
                                url: <span class="hljs-string">'favorites.js'</span>,
                                <span class="hljs-comment">// title: e.source.catName,</span>
                                backgroundImage: <span class="hljs-string">'../images/bkg-complete.png'</span>,
                                barColor:<span class="hljs-string">'#111'</span>,
                                backgroundColor: <span class="hljs-string">'transparent'</span>,
                                tabBarHidden: <span class="hljs-literal">true</span>,
                                <span class="hljs-comment">//modal: true,</span>
                                navbarHidden:<span class="hljs-literal">true</span>,
                                fullscreen:<span class="hljs-literal">true</span>,
                                exitOnClose:<span class="hljs-literal">true</span>
                            });

                            winCat2.orientationModes = [
                                Titanium.UI.PORTRAIT
                            ];

                            winCat2.open();

                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.source.tag == <span class="hljs-number">4</span>) {

                    <span class="hljs-keyword">var</span> winCat3 = <span class="hljs-literal">null</span>;
                    winCat3 = Titanium.UI.createWindow({
                                url: <span class="hljs-string">'mapview_update.js'</span>,
                                <span class="hljs-comment">// title: e.source.catName,</span>
                                backgroundImage: <span class="hljs-string">'../images/bkg-complete.png'</span>,
                                barColor:<span class="hljs-string">'#111'</span>,
                                backgroundColor: <span class="hljs-string">'transparent'</span>,
                                tabBarHidden: <span class="hljs-literal">true</span>,
                                <span class="hljs-comment">//modal: true,</span>
                                navbarHidden:<span class="hljs-literal">true</span>,
                                fullscreen:<span class="hljs-literal">true</span>,
                                exitOnClose:<span class="hljs-literal">true</span>
                            });

                            winCat3.orientationModes = [
                                Titanium.UI.PORTRAIT
                            ];

                            winCat3.open();
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.source.tag == <span class="hljs-number">5</span>) {

                    <span class="hljs-keyword">var</span> winCat4 = <span class="hljs-literal">null</span>;
                    winCat4 = Titanium.UI.createWindow({
                                url: <span class="hljs-string">'update.js'</span>,
                                <span class="hljs-comment">// title: e.source.catName,</span>
                                backgroundImage: <span class="hljs-string">'../images/bkg-complete.png'</span>,
                                barColor:<span class="hljs-string">'#111'</span>,
                                backgroundColor: <span class="hljs-string">'transparent'</span>,
                                exitOnClose:<span class="hljs-literal">true</span>,
                                tabBarHidden: <span class="hljs-literal">true</span>,
                                <span class="hljs-comment">//modal: true,</span>
                                navbarHidden:<span class="hljs-literal">true</span>,
                                fullscreen:<span class="hljs-literal">true</span>,
                            });

                            winCat4.orientationModes = [
                                Titanium.UI.PORTRAIT
                            ];

                            winCat4.open();
                } 
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.source.tag != <span class="hljs-number">1</span>) {
                    win1.close();
                    win1 = <span class="hljs-literal">null</span>;
                }

            });
            win1.add(bottomBtn);

            cx = cx + <span class="hljs-number">65</span>;

    }

}
</code></pre><p>Bottom Buttons are working fine but When I close but when I close win1 to open new Window</p>
<pre><code class="hljs">
buttn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{

    <span class="hljs-comment">//var activity = Titanium.Android.currentActivity;</span>
        <span class="hljs-comment">//activity.finish();</span>

    <span class="hljs-keyword">var</span> winAr1 = Ti.UI.createWindow({
            width:<span class="hljs-string">'auto'</span>,
            height:<span class="hljs-string">'auto'</span>,
            top:<span class="hljs-number">0</span>,
            left:<span class="hljs-number">0</span>,
            backgroundImage: <span class="hljs-string">'../images/bkg-complete.png'</span>,
            url:<span class="hljs-string">'ui/home_ar.js'</span>,
            tabBarHidden: <span class="hljs-literal">true</span>,
                <span class="hljs-comment">//modal: true,</span>
                navbarHidden:<span class="hljs-literal">true</span>,
                fullscreen:<span class="hljs-literal">true</span>,
            exitOnClose:<span class="hljs-literal">true</span>
        });

        winAr1.orientationModes = [
            Titanium.UI.PORTRAIT,
        ];
        winAr1.open();

    win1.close();
    win1 = <span class="hljs-literal">null</span>;

});
</code></pre><p>win1 is not releasing and removing completely and some content remain on stack and usually its also called focus of same win1 rather removing from stack and also navigate me to last winCat1 - 4 which was opened before. <strong>Therefore  how to check which ever Windows are present on stack so can remove&#x2F; close from the memory to open new layout in Android</strong>. This is I am doing only because TabGroup and Tabbar doesnt remove in Android.</p>
<p><strong>It works perfect for first time when LoadBottomButton() isnot called, only buttn.addEventListener is called but not after the method is called</strong></p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 31st 2012, 3:51:16 am">July 31st 2012</span>
				by <span class='authorname'>Umaid Saleem</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>memory</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
						<li><span class='tagname'>window</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-244454">
				
						<section>
							<p>the best solution is to keep track of all of the windows yourself and clean them up yourself, consider a global variable of window objects</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 4th 2012, 10:36:21 am">August 4th 2012</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/140362/how-to-removeclose-all-windows-from-application-and-open-new-one#answer-244454" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-244463">
				
						<section>
							<p>I agree with the above. I&#39;ve implemented a solution found on a page that follows the patter below.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> globals = {};
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createGlobal</span><span class="hljs-params">(key,obj)</span></span>{
globals[key] = obj;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findGlobal</span><span class="hljs-params">(key)</span></span>{
<span class="hljs-keyword">return</span> globals[key];
}
</code></pre><p>Then in my application when I create a window I want to manage later I do the following</p>
<pre><code class="hljs"><span class="hljs-regexp">//</span> <span class="hljs-keyword">if</span> _win <span class="hljs-keyword">is</span> my <span class="hljs-built_in">window</span> object
createGlobal(<span class="hljs-string">'coolWindow'</span>, _win);

<span class="hljs-regexp">//</span> Now I can get that <span class="hljs-built_in">window</span> whenever <span class="hljs-keyword">and</span> wherever I want with <span class="hljs-keyword">this</span>
var _windowToClose = findGlobal(<span class="hljs-string">'coolWindow'</span>);
_windowToClose.close();
</code></pre><p>This way you don&#39;t see a bunch of globally scoped variables, just a couple of functions to access anything you want.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 4th 2012, 2:27:16 pm">August 4th 2012</span>
								by <span class='authorname'>Lee Bartelme</span><br>
								<a class="icon-bg icon-link" href="question/140362/how-to-removeclose-all-windows-from-application-and-open-new-one#answer-244463" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
