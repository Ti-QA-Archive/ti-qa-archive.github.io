<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Common JS. Javascript Module confusion » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Common JS. Javascript Module confusion</h1>
		</header>
		<section>
			<p>Can someone explain the following in details?</p>
<p>When a JavaScript module is loaded, the object returned by require should be cached by Titanium and provided again to consumers without evaluating the module&#39;s JavaScript code multiple times. If a developer thinks they want their module code evaluated multiple times, they should really be creating a module with a function that can be called multiple times. There&#39;s no valid use case for re-evaluating JavaScript in a module over and over.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 25th 2012, 11:31:25 am">October 25th 2012</span>
				by <span class='authorname'>Aadil Farooq</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>cache</span></li>
					
						<li><span class='tagname'>commonjs</span></li>
					
						<li><span class='tagname'>javascript</span></li>
					
						<li><span class='tagname'>module</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I really dont understand why there is not valid use case for re-evaluating Js in module over and over again?</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 25th 2012, 11:33:39 am">October 25th 2012</span>
								by <span class='authorname'>Aadil Farooq</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-249967">
				
						<section>
							<p>Evaluating means source code parsing. There is no point in parsing module&#39;s source code multiple times. I think that&#39;s the point.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 25th 2012, 11:56:29 am">October 25th 2012</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="question/143961/common-js-javascript-module-confusion#answer-249967" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>In your case you execute the function over and over again, what is cached is not the executed function, but as Ivan said, the code is parsed only once so the JS engine doesn&#39;t have to work each time in interpreting what you have there.</p>
<p>Makes sense?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 25th 2012, 12:03:46 pm">October 25th 2012</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-249966">
				
						<section>
							<p>I&#39;m not sure I follow. What are you trying to achieve?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 25th 2012, 11:49:00 am">October 25th 2012</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/143961/common-js-javascript-module-confusion#answer-249966" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i am exporting two functions from my module and requiring it in main app.js(code given below). I think my code is evaluated over and over again(cuz i receive different values from functions each time?)….<br>is my usecase not valid according to above description? or am i not understanding it right?<br>Thanks</p>
<p>services&#x2F;uimanipulations.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> divWidth=<span class="hljs-number">600</span>;
<span class="hljs-keyword">var</span> divHeight=<span class="hljs-number">1024</span>;
exports.getWidthInDp=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(pixels)</span></span>{
    <span class="hljs-keyword">return</span> ((pixels/divWidth)*Ti.Platform.displayCaps.platformWidth).toString();<span class="hljs-comment">//+'dp';</span>
}
<span class="hljs-comment">//gets the dp exquilatent accordind to percentage</span>
exports.getHeightInDp=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(pixels)</span></span>{
    <span class="hljs-keyword">return</span> ((pixels/divHeight)*Ti.Platform.displayCaps.platformHeight).toString();<span class="hljs-comment">//+'dp';</span>
}
</code></pre><p>app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> uimanipulations=<span class="hljs-built_in">require</span>(<span class="hljs-string">'services/uimanipulations'</span>);
<span class="hljs-keyword">var</span> logo=Ti.UI.createView({
    backgroundImage:<span class="hljs-string">'home_hd/logo.png'</span>,
    top:uimanipulations.getHeightInDp2(<span class="hljs-string">'55'</span>),
    width:uimanipulations.getWidthInDp2(<span class="hljs-string">'350'</span>),
    height:uimanipulations.getHeightInDp2(<span class="hljs-string">'123'</span>),
    zIndex:<span class="hljs-number">2</span>,
});
</code></pre><p>using Android 2.3.3; Ti SDK 2.0.2</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 25th 2012, 11:55:13 am">October 25th 2012</span>
											by <span class='authorname'>Aadil Farooq</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-249969">
				
						<section>
							<p>errr… dunno… in your example you the exported functions are:<br>getWidthInDp and getHeightInDp</p>
<p>And your codes do:<br>getHeightInDp2 and etHeightInDp2</p>
<p>are you sure you are using the code you intent to?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 25th 2012, 12:09:23 pm">October 25th 2012</span>
								by <span class='authorname'>Andrés Tello</span><br>
								<a class="icon-bg icon-link" href="question/143961/common-js-javascript-module-confusion#answer-249969" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>the functions are same i.e getHeightInDp2 and getWidthInDp2 on both places. its was mistyping</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 25th 2012, 4:25:45 pm">October 25th 2012</span>
											by <span class='authorname'>Aadil Farooq</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-249970">
				
						<section>
							<p>you the = your</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 25th 2012, 12:10:06 pm">October 25th 2012</span>
								by <span class='authorname'>Andrés Tello</span><br>
								<a class="icon-bg icon-link" href="question/143961/common-js-javascript-module-confusion#answer-249970" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-249984">
				
						<section>
							<p>Note that your functions are dependent on Ti.Platform.displayCaps.platformWidth and Ti.Platform.displayCaps.platformHeight, which can change depending on the orientation of the device.  So it&#39;s not terribly surprising that you might get different values even when passing the same input value.</p>
<p>If you&#39;re concerned about variables changing from call to call, it&#39;s easy to check this for yourself.  Use the debugger to set a breakpoint and inspect the variables.</p>
<p>There are a surprising number of people here who are not familiar with the debugger, so here&#39;s a <a href="https:&#x2F;&#x2F;vimeo.com&#x2F;21949107">demo video</a> for those folks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 25th 2012, 3:18:31 pm">October 25th 2012</span>
								by <span class='authorname'>Jason Priebe</span><br>
								<a class="icon-bg icon-link" href="question/143961/common-js-javascript-module-confusion#answer-249984" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
