<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>animate view from module Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>animate view from module</h1>
		</header>
		<section>
			<p>I made an additional module to check if people are logged in with facebook, </p>
<h2 id="i-got-two-views-inside-my-inside-my-index-xml-">I got two views inside my inside my index.xml:</h2>
<p>&lt;Alloy&gt;<br>    &lt;Window id=&quot;mainWindow&quot;&gt;<br>      &lt;Require src=&quot;dashboard&quot; id=&quot;dashboard&quot;&gt;&lt;&#x2F;Require&gt;<br>      &lt;Require src=&quot;login&quot; id=&quot;login&quot;&gt;&lt;&#x2F;Require&gt;<br>    &lt;&#x2F;Window&gt;</p>
<h2 id="-lt-x2f-alloy-gt-">&lt;&#x2F;Alloy&gt;</h2>
<h2 id="dashboard-is-the-home-of-the-app-and-login-is-positioned-top-1500px-when-someone-is-not-logged-in-i-try-to-animate-the-login-view-to-the-top-using-">dashboard is the home of the app and login is positioned: top: 1500px; when someone is not logged in I try to animate the login view to the top using:</h2>
<p>var loginWin = Alloy.createController(&#39;login&#39;).getView();</p>
<h2 id="loginwin-animate-top-0-">loginWin.animate({top: 0});</h2>
<p>When I log loginWin it returns: [object loginWin] but nothing is animating.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 1st 2014, 5:55:08 pm">January 1st 2014</span>
				by <span class='authorname'>Maurits Meester</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>animation</span></li>
					
						<li><span class='tagname'>facebook</span></li>
					
						<li><span class='tagname'>module</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-273312">
				
						<section>
							<p>I made an additional module to check if people are logged in with facebook,</p>
<p>I got two views inside my inside my index.xml:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mainWindow"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"dashboard"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dashboard"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Require</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"login"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"login"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Require</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>dashboard is the home of the app and login is positioned: top: 1500px; when someone is not logged in I try to animate the login view to the top using:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> loginWin = Alloy.createController(<span class="hljs-string">'login'</span>).getView();
loginWin.animate({top: <span class="hljs-number">0</span>});
</code></pre><p>When I log loginWin it returns: [object loginWin] but nothing is animating.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 1st 2014, 5:58:06 pm">January 1st 2014</span>
								by <span class='authorname'>Maurits Meester</span><br>
								<a class="icon-bg icon-link" href="question/161068/animate-view-from-module.html#answer-273312" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Share your login.xml &#x2F;.tss&#x2F;.js  file.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 2:24:36 am">January 2nd 2014</span>
											by <span class='authorname'>Sanat Mamtora</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>login.xml:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"loginWin"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"FB.login"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"fbButton"</span>&gt;</span>Login with fb<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>     
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>login.tts:</p>
<pre><code class="hljs">"<span class="hljs-id">#loginWin</span>": <span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">top</span>:<span class="hljs-value"> <span class="hljs-number">1000</span>,
  zIndex: <span class="hljs-number">10</span>,
  width:<span class="hljs-string">'100%'</span>,
  height:<span class="hljs-string">'100%'</span>,
  backgroundColor:<span class="hljs-string">"yellow"</span>
</span></span></span>}
</code></pre><p>login.js:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> FB = <span class="hljs-built_in">require</span>(<span class="hljs-string">'FB'</span>);
</code></pre><p>FB:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> FB;
<span class="hljs-built_in">module</span>.exports = FB = {

  login: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

    facebook.addEventListener(<span class="hljs-string">'login'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
      <span class="hljs-keyword">if</span> (e.success) {
          alert(<span class="hljs-string">'Logged In'</span>);
          loginWin.close();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.error) {
          alert(e.error);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.cancelled) {
          alert(<span class="hljs-string">"Canceled"</span>);
      }
    });

    facebook.authorize();

  },

  logout: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

    facebook.logout();
    facebook.loggedIn = <span class="hljs-literal">false</span>;

    FB.is_logged_in();
  },

  is_logged_in: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'logged in: '</span> + facebook.loggedIn);

    <span class="hljs-keyword">if</span>(facebook.loggedIn!==<span class="hljs-literal">true</span>)
    { 
      <span class="hljs-keyword">var</span> loginWin = Alloy.createController(<span class="hljs-string">'login'</span>).getView();
      loginWin.animate({top: <span class="hljs-number">0</span>});
    }<span class="hljs-keyword">else</span>{
      <span class="hljs-keyword">var</span> loginWin = Alloy.createController(<span class="hljs-string">'login'</span>).getView();
      loginWin.animate({top: <span class="hljs-number">1000</span>});
    }
  }

};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 6:21:20 am">January 2nd 2014</span>
											by <span class='authorname'>Maurits Meester</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-273322">
				
						<section>
							<p>Hi,</p>
<p>if you are using Require tag to add controller then no need to use createController method because if you use that method then that method create another object for login so either use Require tag to add additional controller or use createController method.</p>
<p>so in your case, just remove createController code.</p>
<p>and also tell that login controller is a window object or view object?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 2nd 2014, 4:23:01 am">January 2nd 2014</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/161068/animate-view-from-module.html#answer-273322" rel="permalink">permalink</a>
							</div>

							<h5>12 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I tried to do this within my FB module but that&#39;s not an option either because $ is missing and I&#39;m getting the error: Can&#39;t find variable: $;</p>
<p><code>$.login.getView().animate({top: 0, duration: 1000});</code></p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 6:23:35 am">January 2nd 2014</span>
											by <span class='authorname'>Maurits Meester</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Try this :</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> loginWin = Alloy.createController(<span class="hljs-string">'login'</span>).getView(<span class="hljs-string">"loginWin"</span>);
loginWin.animate({top: <span class="hljs-number">0</span>});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 7:07:02 am">January 2nd 2014</span>
											by <span class='authorname'>Sanat Mamtora</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>no nothing happens, when I do this in index.js, the animation shows, but I want to show the animation from my module:</p>
<p><code>$.login.getView(&amp;#39;loginWin&amp;#39;).animate({top: 0, duration:1000});</code></p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 7:13:32 am">January 2nd 2014</span>
											by <span class='authorname'>Maurits Meester</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>login is actually your view so you can access all your controls of that view with the . extensionâ¦.<br>like if you want to get loginWin then you can access that view by the below lineâ¦</p>
<pre><code class="hljs">$<span class="hljs-class">.login</span><span class="hljs-class">.loginWin</span>.
</code></pre><p>this returns the view of your login controllâ¦..<br>so no need to use createController methodâ¦just use require tag as you didâ¦and access that view by the above lineâ¦.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 7:34:29 am">January 2nd 2014</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>but how can I acces that view from my (FB) module? When I use:</p>
<pre><code class="hljs">$.login.getView(<span class="hljs-string">'loginWin'</span>).animate({<span class="hljs-string">top:</span> <span class="hljs-number">0</span>, <span class="hljs-string">duration:</span><span class="hljs-number">1000</span>});
</code></pre><p>I get &quot;Can&#39;t find variable: $;&quot;</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 7:37:38 am">January 2nd 2014</span>
											by <span class='authorname'>Maurits Meester</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>is FB your controller with .xml&#x2F;.tss&#x2F;.js fileâ¦ or is it simple .js file..?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 7:44:29 am">January 2nd 2014</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>fb is not a controller but a module written in lib&#x2F;FB.js:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> facebook = <span class="hljs-built_in">require</span>(<span class="hljs-string">'facebook'</span>);
facebook.appid = XXXXXXXXXXXX;
facebook.permissions = [<span class="hljs-string">'email'</span>,<span class="hljs-string">'user_about_me'</span>];
facebook.forceDialogAuth = <span class="hljs-literal">true</span>;


<span class="hljs-keyword">var</span> FB;
<span class="hljs-built_in">module</span>.exports = FB = {

  login: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

    facebook.addEventListener(<span class="hljs-string">'login'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
      <span class="hljs-keyword">if</span> (e.success) {
          alert(<span class="hljs-string">'Logged In'</span>);
          loginWin.close();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.error) {
          alert(e.error);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.cancelled) {
          alert(<span class="hljs-string">"Canceled"</span>);
      }
    });

    facebook.authorize();

  },

  logout: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

    facebook.logout();
    facebook.loggedIn = <span class="hljs-literal">false</span>;

    FB.is_logged_in();
  },

  is_logged_in: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'logged in: '</span> + facebook.loggedIn);

    <span class="hljs-keyword">if</span>(facebook.loggedIn!==<span class="hljs-literal">true</span>)
    { 
      <span class="hljs-keyword">var</span> loginWin = Alloy.createController(<span class="hljs-string">'login'</span>).getView(<span class="hljs-string">"loginWin"</span>);
      <span class="hljs-built_in">console</span>.log(loginWin);
      loginWin.animate({top: <span class="hljs-number">0</span>, duration:<span class="hljs-number">1000</span>});
    }<span class="hljs-keyword">else</span>{
      <span class="hljs-keyword">var</span> loginWin = Alloy.createController(<span class="hljs-string">'login'</span>).getView(<span class="hljs-string">"loginWin"</span>);
      loginWin.animate({top: <span class="hljs-number">1000</span>, duration:<span class="hljs-number">1000</span>});
    }
  }

};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 7:55:40 am">January 2nd 2014</span>
											by <span class='authorname'>Maurits Meester</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>then you can not access it by $ sign. this sign is only used with controller so you need to use Alloy.createController method to animate view but then the question is if you create object with Alloy.createController then where you add that viewâ¦?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 8:04:04 am">January 2nd 2014</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>isn&#39;t the view already added in my index.xml:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mainWindow"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"dashboard"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dashboard"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Require</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"login"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"login"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Require</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>login.xml:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"loginWin"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"FB.login"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"fbButton"</span>&gt;</span>Login with fb<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>     
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>or should I add it on a later point, in my module?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 8:33:28 am">January 2nd 2014</span>
											by <span class='authorname'>Maurits Meester</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>this is correct but what i told you is you can not access this controller&#39;s object in fb.js so you need to find some other way to animate login viewâ¦.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 8:41:30 am">January 2nd 2014</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>do you have another way ;)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 9:06:16 am">January 2nd 2014</span>
											by <span class='authorname'>Maurits Meester</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i think you should use callback method for that in index.js..</p>
<p>the idea is when you create object with require for fb then i think you check login or logout with is_logged_in method so when you call that method you should pass one callback function which is created in your index.js fileâ¦so you can call that function from is_logged_in methodâ¦</p>
<p>index.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mainWindow"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"dashboard"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dashboard"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Require</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"login"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"login"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Require</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>index.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> fb = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fb'</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show_hide_login</span>(<span class="hljs-params">isLoggin</span>)</span>{
    <span class="hljs-keyword">if</span>(!isLogin){
        login.loginWin.animate({top: <span class="hljs-number">0</span>, duration:<span class="hljs-number">1000</span>});
    }<span class="hljs-keyword">else</span>{
        login.animate({top: <span class="hljs-number">1000</span>, duration:<span class="hljs-number">1000</span>});
    }
}

fb.is_logged_in(show_hide_login);
</code></pre><p>fb.js</p>
<pre><code class="hljs">is_logged_in: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cb</span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'logged in: '</span> + facebook.loggedIn);
     <span class="hljs-keyword">if</span>(cb){
        cb(facebook.loggedIn);
    }
  }
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2014, 9:22:43 am">January 2nd 2014</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
