<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium: Network connection was lost » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium: Network connection was lost</h1>
		</header>
		<section>
			<p>I&#39;m getting a weird error.</p>
<p>Trying to download an mp3 file using createHTTPClient.</p>
<p>The file downloads fully, and at the very end gives the Network connection was lost error.</p>
<p>If i download the same file using a regular browser, the file downloads and has the same file size as the one downloaded with the createHTTPClient.</p>
<p>Anyone have any idea what can be causing this?</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> c = Titanium.Network.createHTTPClient({enableKeepAlive:<span class="hljs-literal">false</span>});
c.setTimeout(<span class="hljs-number">10000</span>);
c.ondatastream = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    Ti.API.info(e.progress)
};
c.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    Ti.UI.createAlertDialog({title:<span class="hljs-string">'XHR'</span>, message:<span class="hljs-string">'Error: '</span> + e.error}).show();
};

c.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'http://asd123:r2d2@http://178.62.197.233/dl/110/ac33f71d7db3c3a0fdb80d90dbc95c7a15c6281f4e32a123c948c7467e421b28/128/'</span>);

c.file = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory, <span class="hljs-string">'myfile.mp3'</span>);
c.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    Ti.API.info(<span class="hljs-string">'Loaded!...'</span>)    
};
c.send();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 31st 2014, 6:05:42 pm">December 31st 2014</span>
				by <span class='authorname'>Blue Fire</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-284874">
				
						<section>
							<p>Ok, so turns out Titanium was not at fault here, the server was not sending content type and content size headers which was causing Titanium to freak out once the download was done.</p>
<p>Setting those headers fixed the issue.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 2nd 2015, 7:25:49 am">January 2nd 2015</span>
								by <span class='authorname'>Blue Fire</span><br>
								<a class="icon-bg icon-link" href="question/180002/titanium-network-connection-was-lost#answer-284874" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Blue Fire,</p>
<p>Was this issue happening with 3.4.0.GA? Did you try with an older SDK and see whether the issue was occurring or not. I am also facing a similar issue. Every alternative call, I get the connection was lost error.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 9th 2015, 11:12:07 pm">January 9th 2015</span>
											by <span class='authorname'>Soumya Kanti Kar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
