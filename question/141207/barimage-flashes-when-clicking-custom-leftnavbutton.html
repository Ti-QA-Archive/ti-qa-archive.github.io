<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Barimage flashes when clicking custom leftNavButton » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Barimage flashes when clicking custom leftNavButton</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I have a problem where to barImages flashes when i click the backbutton in the titlebar.<br>The setup is a TableView where the rows have children. when i click one of the rows the child opens as it should and everyting looks great. But when i click the &quot;back&quot; button i the titlebar to get back to my TableView the titlebar flashes for a split second.<br>The weird thing is that this is problem only seems to occur when i make a custom back button using LeftNavButton. If i remove the custom back button and use the normal blue one, this bug seems to disappear.<br>Has anyone else experienced this and maybe knows of a way to fix it ?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 20th 2012, 4:57:55 am">August 20th 2012</span>
				by <span class='authorname'>Daniel Wiklund</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>barimage</span></li>
					
						<li><span class='tagname'>bug</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>leftnavbutton</span></li>
					
						<li><span class='tagname'>titlebar</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Please provide some code that reproduces the issue, so we can work out if it your code or a bug.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 20th 2012, 5:16:23 am">August 20th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Oh sorry here is the code that creates the &quot;child&quot; window and adds the custom back button</p>
<pre><code class="hljs">tabelRow.addEventListener(<span class="hljs-string">"click"</span>,function(<span class="hljs-keyword">e</span>) {

    <span class="hljs-keyword">var</span> backBtn = Ti.UI.createButton({
        title: <span class="hljs-string">"back"</span>,
        backgroundImage: <span class="hljs-string">"images/backButton.png"</span>,
        backgroundSelectedImage: <span class="hljs-string">"images/backButtonActive.png"</span>,
        width: 50,
        height: 30,
        color: <span class="hljs-string">"#d0bca6"</span>,
        textAlign: <span class="hljs-string">"center"</span>,
        font: { fontSize: 10, fontWeight: <span class="hljs-string">"bold"</span> }
    });

    <span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Ti.UI.createWindow({
        url: <span class="hljs-string">"showLogPos.js"</span>,
        backgroundColor: <span class="hljs-string">"#d8c5a3"</span>,
        barImage: <span class="hljs-string">"images/titleBarImage.png"</span>,
        leftNavButton: backBtn
    });

    <span class="hljs-keyword">var</span> winTitle = setTitleText(<span class="hljs-keyword">e</span>.rowData.pageTitle);

    backBtn.addEventListener(<span class="hljs-string">"click"</span>, function() {
        <span class="hljs-keyword">win</span>.<span class="hljs-keyword">close</span>();
    });

    <span class="hljs-keyword">win</span>.setTitleControl(winTitle);
    <span class="hljs-keyword">win</span>.logId = <span class="hljs-keyword">e</span>.rowData.id;
    Ti.UI.currentTab.<span class="hljs-keyword">open</span>(<span class="hljs-keyword">win</span>);


});
</code></pre><p>The setTitleText function creates a view to use custom font and fontcolor in the title</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 20th 2012, 5:46:53 am">August 20th 2012</span>
								by <span class='authorname'>Daniel Wiklund</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Daniel</p>
<p>Can you provide just a little bit more, you are using a table with custom properties and the custom setTitleText function.</p>
<p>Provide the table code, with a data snippet it if it long and the the function for the title.</p>
<p>As the issue could start from the tableview custom data not being passed or the custom view in the titlebar affecting the custom leftNavButton.</p>
<p>Also you suggest the problem occurs when the back button is pressed, but given that could not happen until the window is loaded that your code above produces, it could be something in the file <strong>showLogPos.js</strong>.</p>
<p>So more is needed to try and help you.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 20th 2012, 6:23:19 am">August 20th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>This is the code from setTitleText function</p>
<pre><code class="hljs">
exports.createTitleBar = <span class="hljs-keyword">function</span>(<span class="hljs-variable">$title</span>) {

    var titleBar = Titanium.UI.createLabel({
        color: <span class="hljs-string">'#a7947e'</span>,
        height: <span class="hljs-number">26</span>,
        width: <span class="hljs-number">210</span>,
        top: <span class="hljs-number">3</span>,
        text: <span class="hljs-variable">$title</span>,
        textAlign: <span class="hljs-string">'center'</span>,
        font: { fontFamily: <span class="hljs-string">"American Typewriter"</span>, fontSize: <span class="hljs-number">24</span>, fontWeight: <span class="hljs-string">'light'</span> },
        shadowColor:<span class="hljs-string">'#000'</span>, shadowOffset: { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">1</span> }

    });

    return titleBar;

}
</code></pre><p>The code in the showLogPos.js is just a mapView so i don&#39;t think there is any problems there but here it is anyways :)<br>And thanks alot for your help</p>
<pre><code class="hljs"><span class="hljs-built_in">var</span> longitude = <span class="hljs-keyword">rows</span><span class="hljs-built_in">.</span>fieldByName(<span class="hljs-string">"longitude"</span>);
<span class="hljs-built_in">var</span> latitude = <span class="hljs-keyword">rows</span><span class="hljs-built_in">.</span>fieldByName(<span class="hljs-string">"latitude"</span>);

<span class="hljs-built_in">var</span> annotation = Ti<span class="hljs-built_in">.</span><span class="hljs-built_in">Map</span><span class="hljs-built_in">.</span>createAnnotation({
     longitude: longitude,
     latitude: latitude,
     title: <span class="hljs-keyword">rows</span><span class="hljs-built_in">.</span>fieldByName(<span class="hljs-string">"note"</span>),
     animate: <span class="hljs-literal">true</span>
});

<span class="hljs-built_in">var</span> mapView = Titanium<span class="hljs-built_in">.</span><span class="hljs-built_in">Map</span><span class="hljs-built_in">.</span>createView({
    mapType: Titanium<span class="hljs-built_in">.</span><span class="hljs-built_in">Map</span><span class="hljs-built_in">.</span>STANDARD_TYPE,
    region: {latitude: latitude, longitude: longitude, latitudeDelta:<span class="hljs-number">0.01</span>, longitudeDelta:<span class="hljs-number">0.01</span>},
    animate:<span class="hljs-literal">true</span>,
    regionFit:<span class="hljs-literal">true</span>,
    userLocation:<span class="hljs-literal">true</span>,
    annotations: <span class="hljs-preprocessor">[</span>annotation<span class="hljs-preprocessor">]</span><span class="hljs-markup">
});

mapView.selectAnnotation(annotation);
thisWin.add(mapView);</span>
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="August 20th 2012, 7:23:36 am">August 20th 2012</span>
								by <span class='authorname'>Daniel Wiklund</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I don&#39;t know if this helps; but it is the default blue titlebar that gets visible when to titlebar flashes</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 20th 2012, 9:13:39 am">August 20th 2012</span>
								by <span class='authorname'>Sky Brud</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
