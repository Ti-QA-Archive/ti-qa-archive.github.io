<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Adding a button to open a new window in Titanium Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Adding a button to open a new window in Titanium</h1>
		</header>
		<section>
			<p>I&#39;m completely new to app development and I&#39;m having difficulty adding a button that will open a new window when clicked. The button I&#39;ve coded below appears in the Home window as I want it to, but when clicked an error comes up. I want the exec_window.js to be loaded when the button is clicked, and for a close button to appear on this window and I&#39;m not sure what I&#39;m doing wrong. I&#39;m sure I&#39;m doing something stupid and ridiculously obvious but any help would be much appreciated! </p>
<p>HomeWindow.js:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HomeWindow</span>(<span class="hljs-params">title</span>) </span>{
    <span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
        title:title,
        backgroundColor: <span class="hljs-string">'#336699'</span>
});

<span class="hljs-keyword">var</span> execButton = Titanium.UI.createButton({
        title:<span class="hljs-string">'Exec'</span>,
        width:<span class="hljs-number">200</span>,
        height:<span class="hljs-number">40</span>,
        top:<span class="hljs-number">10</span>
    });

    execButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{

        <span class="hljs-keyword">var</span> w = Titanium.UI.createWindow({
            url:<span class="hljs-string">'ui/common/home/exec_window.js'</span>
        });
        w.open();

        <span class="hljs-comment">// trying to create a button to close the window</span>
        <span class="hljs-keyword">var</span> b = Titanium.UI.createButton({
            title:<span class="hljs-string">'Close'</span>,
            height:<span class="hljs-number">30</span>,
            width:<span class="hljs-number">150</span>
        });
        w.add(b);
        b.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
        </span>{
            w.close();
        });

        w.open();
    });

win.add(execButton);

<span class="hljs-keyword">return</span> win;
}



<span class="hljs-built_in">module</span>.exports = HomeWindow;
</code></pre><p>exec_window.js:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">window_exec</span>(<span class="hljs-params">_args</span>) </span>{
    <span class="hljs-keyword">var</span> win = Titanium.UI.createWindow({
        title:_args.title
    });

    <span class="hljs-keyword">return</span> win;
}

<span class="hljs-built_in">module</span>.exports = window_exec;
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 1st 2014, 1:23:59 pm">August 1st 2014</span>
				by <span class='authorname'>James Rudge</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>button</span></li>
					
						<li><span class='tagname'>javascript</span></li>
					
						<li><span class='tagname'>titanium studio</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>You have not said;</p>
<ul>
<li>Ti SDK Version?</li>
<li>Platform Target; iOS, Android or both?</li>
<li>What error message you are receiving?</li>
</ul>
<p>Welcome BTW - nice to see new people here.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 1st 2014, 2:14:11 pm">August 1st 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Sorry about that. Platform target is android, I think my SDK version is 3.3.0.GA if that makes any sense, and error message is &quot;UncaughtReference Error: module is not defined at &#x2F;index.html (line 6080)&quot;</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 1st 2014, 2:21:13 pm">August 1st 2014</span>
								by <span class='authorname'>James Rudge</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-281355">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>Your problem is simple - and not really your fault;</p>
<p>You are correctly creating a CommonJS module <strong>exec_window.js</strong> and then accessing via another CommonJS module <strong>HomeWindow.js</strong>, but it is here things go a little wrong.</p>
<ul>
<li>You have mixed up the <strong>url</strong> window property and how you access the CommonJS.</li>
<li>You should really move the close button for the new window into to that window.  The idea is keep everything to do with one thing in that one place.</li>
<li>You have started using params to pass things but using two different ways and on one of them, not actually used the value.</li>
</ul>
<p>I have made some changes and moved things around - hopefully you will understand the simple changes and it will make sense.</p>
<p><strong>HomeWindow.js</strong></p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
        title: obj.title || <span class="hljs-string">'Untitled'</span>,
        backgroundColor: <span class="hljs-string">'#336699'</span>
    });
    <span class="hljs-keyword">var</span> execButton = Titanium.UI.createButton({
        title:<span class="hljs-string">'Exec'</span>,
        width:<span class="hljs-number">200</span>,
        height:<span class="hljs-number">40</span>,
        top:<span class="hljs-number">10</span>
    }); 
    execButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ 
        <span class="hljs-keyword">var</span> newWin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/common/home/exec_window'</span>).create({
            title: <span class="hljs-string">'New Window'</span>
        });
        newWin.open();
    }); 
    win.add(execButton);

    <span class="hljs-keyword">return</span> win;
}
exports.create = create;
</code></pre><p><strong>exec_window.js</strong></p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">(obj)</span> </span>{
    <span class="hljs-keyword">var</span> win = Titanium.UI.createWindow({
        title: obj.title || <span class="hljs-string">'Untitled'</span>
    });
    <span class="hljs-comment">// trying to create a button to close the window</span>
    <span class="hljs-keyword">var</span> btnClose = Titanium.UI.createButton({
        title:<span class="hljs-string">'Close'</span>,
        height:<span class="hljs-number">30</span>,
        width:<span class="hljs-number">150</span>
    });
    win.add(btnClose);
    btnClose.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        win.close();
    }); 
    <span class="hljs-keyword">return</span> win;
} 
exports.create = create;
</code></pre><p>Example usage <strong>refined from your own</strong>;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = require('ui/common/home/HomeWindow').create({
    title: 'New <span class="hljs-keyword">Window</span>'
});
<span class="hljs-keyword">win</span>.<span class="hljs-keyword">open</span>();
</code></pre><p>I have had to assume the location of the <strong>HomeWindow</strong> so adjust to suit your needs.</p>
<p>If this does not make sense - let me know.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 1st 2014, 2:27:29 pm">August 1st 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/176688/adding-a-button-to-open-a-new-window-in-titanium#answer-281355" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Some how you must called <strong>HomeWindow</strong> in your app?  So I rewrote the usage of that using the tweak I made.</p>
<p>If you let me have the code in your app that references the <strong>HomeWindow.js</strong> then I can review it and give it back with any changes that are required.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 1st 2014, 3:07:12 pm">August 1st 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry, didn&#39;t mean to post it there! Here&#39;s my ApplicationTabGroup.js file which I think you&#39;re referring to. Thanks again!</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ApplicationTabGroup</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createTabGroup(),
    HomeWindow = <span class="hljs-keyword">require</span>(<span class="hljs-string">'ui/common/HomeWindow'</span>),
    EventsWindow = <span class="hljs-keyword">require</span>(<span class="hljs-string">'ui/common/EventsWindow'</span>),
    NewsWindow = <span class="hljs-keyword">require</span>(<span class="hljs-string">'ui/common/NewsWindow'</span>);

    <span class="hljs-comment">//Creating App Tabs</span>
    <span class="hljs-keyword">var</span> homeWin = <span class="hljs-keyword">new</span> HomeWindow(L(<span class="hljs-string">'home_title'</span>)),
        eventsWin = <span class="hljs-keyword">new</span> EventsWindow(L(<span class="hljs-string">'events_title'</span>)),
        newsWin = <span class="hljs-keyword">new</span> NewsWindow(L(<span class="hljs-string">'news_title'</span>));

    <span class="hljs-keyword">var</span> homeTab = Ti.UI.createTab({
        title: L(<span class="hljs-string">'home_title'</span>),
        icon: <span class="hljs-string">'/images/football.png'</span>,
        window: homeWin
    });
    homeWin.containingTab = homeTab;

    <span class="hljs-keyword">var</span> eventsTab = Ti.UI.createTab({
        title: L(<span class="hljs-string">'events_title'</span>),
        icon: <span class="hljs-string">'/images/football.png'</span>,
        window: eventsWin
    });
    eventsWin.containingTab = eventsTab;

    <span class="hljs-keyword">var</span> newsTab = Ti.UI.createTab({
        title: L(<span class="hljs-string">'news_title'</span>),
        icon: <span class="hljs-string">'/images/football.png'</span>,
        window: newsWin
    });
    newsWin.containingTab = newsTab;

    <span class="hljs-keyword">self</span>.addTab(homeTab);
    <span class="hljs-keyword">self</span>.addTab(eventsTab);
    <span class="hljs-keyword">self</span>.addTab(newsTab);



<span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
};


module.exports = ApplicationTabGroup;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 1st 2014, 3:12:36 pm">August 1st 2014</span>
											by <span class='authorname'>James Rudge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just for clarity, tis is the real place the problems started;</p>
<pre><code class="hljs">var w = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createWindow({
    url:<span class="hljs-symbol">'ui</span>/common/home/exec_window.js'
});
w.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>You correctly created the <strong>exec_window.js</strong> file as a CommonJS module and returned a perfectly correct window object.  However you then created another window and attempted to use the file that was designed as CommonJS as if it was any old JavaScript File.</p>
<p>You were correct to use CommonJS - you should not use the <strong>url</strong> property of <strong>window</strong>, it is an old way to solve a problem we no longer should be using.  Given many examples still exist that still show that property it is understandable where the confusion started.</p>
<p>So I changed it to this;</p>
<pre><code class="hljs">var newWin = require(<span class="hljs-symbol">'ui</span>/common/home/exec_window').create({
    title: <span class="hljs-symbol">'New</span> <span class="hljs-type">Window'</span>
});
newWin.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>It then calls the CommonJS module, uses the create function (name changed to define usage) and returns that window.  So now <strong>newWin</strong> (I changed the variable to denote this was a different window - name this as you wish) returns the window - so you can simply open it.</p>
<p>I did some other housekeeping - mostly related to the <strong>obj</strong> references.  This just allows you to pass an object to the function.  In our example we simply used one; title, but we could of used more - so I left that possible for you.  For example;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> newWin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/common/home/exec_window'</span>).create({
    title: <span class="hljs-string">'New Window'</span>,
    something: <span class="hljs-string">'Hellow'</span>,
    <span class="hljs-keyword">else</span>: <span class="hljs-string">'World'</span>
});
</code></pre><p>This is an EXAMPLE only - but shows you could pass other properties through the function so they can be read inside the module.  You can use these for label captions, window titles, parameters to calculations - anything you want.</p>
<p>Finally I moved the close button for the new window - into the new window itself.  This simply keeps everything related to that window inside that window.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 1st 2014, 3:16:13 pm">August 1st 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The usage change is as follows;</p>
<pre><code class="hljs">var homeWin = HomeWindow.create({
        title: L('home_title')
    }),
    eventsWin = <span class="hljs-keyword">new</span> EventsWindow(L('events_title')),
    newsWin = <span class="hljs-keyword">new</span> NewsWindow(L('news_title'));
</code></pre><p>You will notice the difference in syntax.  This is because I also changed the syntax inside the CommonJS module itself;</p>
<pre><code class="hljs"><span class="hljs-comment">// was</span>
<span class="hljs-keyword">module</span>.exports = window_exec;
<span class="hljs-comment">// became</span>
exports.<span class="hljs-keyword">create</span> = <span class="hljs-keyword">create</span>;
</code></pre><p>I did this as you are likely going to extend this module in the future to add additional related code suitable for this section.  So it is easier to extend this way.  For example;</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">(obj)</span> </span>{
    <span class="hljs-comment">// do the create thing</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">somethingelse</span><span class="hljs-params">(obj)</span> </span>{
    <span class="hljs-comment">// whatever you want</span>
}
exports.create = create;
exports.somethingelse = somethingelse;
</code></pre><p>So later in your usage (where you actually call this), you can do this;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> homeWin = HomeWindow.create({
    title: L(<span class="hljs-string">'home_title'</span>)
}),
<span class="hljs-comment">// but also;</span>
<span class="hljs-keyword">var</span> morestuff = HomeWindow.somethingelse({
    firstName: <span class="hljs-string">'Malcolm'</span>
    lastName: <span class="hljs-string">'Hollingsworth'</span>
}),
<span class="hljs-comment">// from the same code</span>
<span class="hljs-comment">// useful if related to each other</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 1st 2014, 3:25:24 pm">August 1st 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks so much Malcolm - really appreciate it! I now properly understand all the changes you&#39;ve made, and the app runs as I desire it to. Without people like you new developers such as myself would just be lost forever! Thanks again!</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 1st 2014, 4:19:37 pm">August 1st 2014</span>
											by <span class='authorname'>James Rudge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You are very welcome,</p>
<p>I would have responded sooner - but office router blew up, I had to install a new one.  Fun times.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 1st 2014, 5:16:09 pm">August 1st 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-281357">
				
						<section>
							<p>Hi Malcolm - thank you for your answer, I think I understand where I went wrong! Excuse my ignorance but I&#39;m not 100% sure where I should be putting the bit of code you wrote at the bottom:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = require('ui/common/home/HomeWindow').create({
    title: 'New <span class="hljs-keyword">Window</span>'
});
<span class="hljs-keyword">win</span>.<span class="hljs-keyword">open</span>();
</code></pre><p>Thanks in advance!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 1st 2014, 3:00:34 pm">August 1st 2014</span>
								by <span class='authorname'>James Rudge</span><br>
								<a class="icon-bg icon-link" href="question/176688/adding-a-button-to-open-a-new-window-in-titanium#answer-281357" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Quick tip; next time - please do not create a new answer when your contribution is actually a comment - it confuses things in the future when trying to work out relevance, simply add a comment to the answer it is related to, or if the additional information is a follow up to the question or general information then add it as a comment to your own question at the top.  You are NOT being told off.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 1st 2014, 3:05:34 pm">August 1st 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
