<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android: listener for device screen lock » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android: listener for device screen lock</h1>
		</header>
		<section>
			<p>I have some Android-related code that needs to react when the user presses the device lock button to turn off the screen. Is there a way I can do this? I noticed the Titanium.Android.ACTION_SCREEN_OFF action, but from what I can gather from the documentation this will just let me perform an action, rather than do something in my own application code. Can anyone give me some advice?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 8th 2011, 3:22:02 pm">November 8th 2011</span>
				by <span class='authorname'>Craig Marvelley</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>lock</span></li>
					
						<li><span class='tagname'>screen</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-261179">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Your answer has been posted a year ago, is this still not possible from within appcelerator?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 20th 2013, 1:12:50 pm">April 20th 2013</span>
								by <span class='authorname'>Thomas Martin</span><br>
								<a class="icon-bg icon-link" href="question/127938/android-listener-for-device-screen-lock.html#answer-261179" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>it appears as though this may have been made available in 3.1.0: <a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-10214">https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-10214</a>. You&#39;ll probably have to dig around for details.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 2:36:08 pm">April 20th 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Tony<br>Many thanks for your input.<br>Despite your somewhat doubtful statement («appears», «may have») I dived into the possible solution and found it, much to my enjoyment, to be working.</p>
<p>So for anyone looking into the same question, here is what worked for me in 3.1.0:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> bc = Ti.Android.createBroadcastReceiver({
    onReceived: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        Ti.API.info(<span class="hljs-string">'Handling broadcast ACTION_SCREEN_OFF.'</span>);
    }
});

Ti.Android.registerBroadcastReceiver(bc, [Ti.Android.ACTION_SCREEN_OFF]);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 10:53:27 am">April 22nd 2013</span>
											by <span class='authorname'>Thomas Martin</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">
<span class="hljs-keyword">var</span> bc = Ti.Android.createBroadcastReceiver({
    onReceived: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        Ti.API.info(<span class="hljs-string">'Handling broadcast ACTION_SCREEN_OFF.'</span>);
    }
});

Ti.Android.registerBroadcastReceiver(bc, [Ti.Android.ACTION_SCREEN_OFF]);
</code></pre><p>sorry, no edit…</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 10:55:43 am">April 22nd 2013</span>
											by <span class='authorname'>Thomas Martin</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Haha, I didn&#39;t want to give the impression that I <em>knew</em> it was working having not used it myself. Glad you got it working!</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 4:00:16 pm">April 22nd 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for the update!</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 28th 2013, 5:59:15 pm">April 28th 2013</span>
											by <span class='authorname'>Craig Marvelley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Has anyone found a way to do a similar thing on ios?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 22nd 2013, 3:11:08 am">May 22nd 2013</span>
											by <span class='authorname'>Ben Sudbury</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-223120">
				
						<section>
							<p>The Android platform is not a big fan of letting developers launch code when the screen comes on or goes off, because it can delay the process. For this reason, they&#39;ve made it a bit more difficult to handle than most broadcast intents. In the case of most broadcast intents, you would create an intent filter in a custom AndroidManifest.xml file, as detailed in <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;blog&#x2F;2011&#x2F;08&#x2F;android-intent-filters.html">this blog post</a>. </p>
<p>Unfortunately, as I mentioned Android makes it a little more difficult for screen on&#x2F;off intents. You are not permitted to create this intent filter in your AndroidManifest.xml. Instead, you are required to create the intent filter in your code. At this time, Titanium does not have an exposed API for creating Intent Filters or Broadcast Receivers in code. </p>
<p>Your best option at this point is to pursue creating an Android module to give you this functionality. The following links show you how to create a native Android module, and how you can use Java to create Intent Filters to receive screen on&#x2F;off events, respectively.</p>
<p><a href="http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Android+Module+Development+Guide">http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Android+Module+Development+Guide</a></p>
<p><a href="http:&#x2F;&#x2F;thinkandroid.wordpress.com&#x2F;2010&#x2F;01&#x2F;24&#x2F;handling-screen-off-and-screen-on-intents&#x2F;">http:&#x2F;&#x2F;thinkandroid.wordpress.com&#x2F;2010&#x2F;01&#x2F;24&#x2F;handling-screen-off-and-screen-on-intents&#x2F;</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 11th 2011, 2:46:49 pm">November 11th 2011</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="question/127938/android-listener-for-device-screen-lock.html#answer-223120" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>OK, thanks Tony. Much appreciated!</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 17th 2011, 9:18:26 am">November 17th 2011</span>
											by <span class='authorname'>Craig Marvelley</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
