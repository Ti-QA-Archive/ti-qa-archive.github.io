<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Unable to implement longpress for documentviewer » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Unable to implement longpress for documentviewer</h1>
		</header>
		<section>
			<p>Application Type: iOS Mobile App (for iPad)<br>Titanium SDK: 3.x<br>iOS Version: 7.1.1<br>Device: iOS Simulator</p>
<p>Description:-<br>Being new to Titanium I&#39;ve been struggling to implement some basic events. I have a Document Viewer that displays a PDF file. When the user does a longpress on the PDF file i want to capture that event and do some function. Tried to implement the Long Press Event for the Document Viewer in the Ti.UI.iOS, but it is not responding. Is there any specific way this needs to be implemented.</p>
<p>Code:-</p>
<p>&#x2F;&#x2F; Use a NavigationWindow to create a navigation bar for the window<br>var win = $.ackMainWindow;<br>var navWin = Ti.UI.iOS.createNavigationWindow({window: win});<br>var winButton = Titanium.UI.createButton({<br>    title:&#39;Launch&#39;,<br>    height:40,<br>    width:200,<br>    top:270<br>});<br>win.add(winButton);</p>
<p>var path = Titanium.Filesystem.applicationDataDirectory + &quot;ifsc-code.pdf&quot;;</p>
<p>&#x2F;&#x2F; Create a document viewer to preview a PDF file<br>var docViewer = Ti.UI.iOS.createDocumentViewer({url:path});</p>
<p>&#x2F;&#x2F; Adding longpress event listener.<br>docViewer.addEventListener(&#39;longpress&#39;, function(bubbles, cancelBubble, source, type, x, y) {<br>    alert(type);<br>});</p>
<p>&#x2F;&#x2F; Adding event listener for winButton to show Document Viewer.<br>winButton.addEventListener(&#39;click&#39;, function(){<br>    docViewer.show({animated: true});<br>});</p>
<p>navWin.open();</p>
<p>Could somebody tell me what i am doing wrong here.</p>
<p>Thanks,<br>Nirumal.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 30th 2014, 3:38:57 am">June 30th 2014</span>
				by <span class='authorname'>Nirumal Thomas</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>documentviewer</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>ipad</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Thanks for the code but without the code syntax is a little hard to read.</p>
<p>Quick tip; When you add code snippets or logs always add 3 <strong>~</strong> on a blank line above your code and another 3 <strong>~</strong> below you code on another blank line - you will see the difference when you preview the comment. (you are not being told off)</p>
<p>Inserted code should look like;</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">something</span><span class="hljs-params">(obj)</span> </span>{
    <span class="hljs-comment">// do something</span>
}
alert(<span class="hljs-string">'Hello'</span>);
</code></pre><p>For further details click the captions on the mark-down bar for examples.</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 30th 2014, 4:01:05 am">June 30th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Sorry this is my first post.</p>
<pre><code class="hljs"><span class="hljs-comment">// Use a NavigationWindow to create a navigation bar for the window</span>
<span class="hljs-keyword">var</span> win = $.ackMainWindow; <span class="hljs-keyword">var</span> navWin = Ti.UI.iOS.createNavigationWindow({<span class="hljs-built_in">window</span>: win});
<span class="hljs-keyword">var</span> winButton = Titanium.UI.createButton({ title:<span class="hljs-string">'Launch'</span>, height:<span class="hljs-number">40</span>, width:<span class="hljs-number">200</span>, top:<span class="hljs-number">270</span> });
win.add(winButton);

<span class="hljs-keyword">var</span> path = Titanium.Filesystem.applicationDataDirectory + <span class="hljs-string">"ifsc-code.pdf"</span>;

<span class="hljs-comment">// Create a document viewer to preview a PDF file</span>
<span class="hljs-keyword">var</span> docViewer = Ti.UI.iOS.createDocumentViewer({url:path});

<span class="hljs-comment">// Adding longpress event listener.</span>
docViewer.addEventListener(<span class="hljs-string">'longpress'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">bubbles, cancelBubble, source, type, x, y</span>) </span>{ alert(type); });

<span class="hljs-comment">// Adding event listener for winButton to show Document Viewer.</span>
winButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ docViewer.show({animated: <span class="hljs-literal">true</span>}); });

navWin.open();
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="June 30th 2014, 4:19:07 am">June 30th 2014</span>
								by <span class='authorname'>Nirumal Thomas</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-280228">
				
						<section>
							<p>Hi</p>
<p>Without actually reviewing your code and your comment about this being your first post - I just checked, you are new to the TItanium platform.  Which is cool as it explains this code…</p>
<pre><code class="hljs">docViewer.addEventListener(<span class="hljs-string">'longpress'</span>, <span class="hljs-keyword">function</span>(
  bubbles, 
  cancelBubble, 
  <span class="hljs-built_in">source</span>, 
  <span class="hljs-built_in">type</span>, 
  x, 
  y) {
    alert(<span class="hljs-built_in">type</span>);
});
</code></pre><p>You have read the documentation and misunderstood one key part that you will need to understand going forwards;  ALL event properties are passed in one object parameter;</p>
<pre><code class="hljs">docViewer.addEventListener(<span class="hljs-string">'longpress'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span></span> {
    alert(e.<span class="hljs-built_in">type</span>);
});
</code></pre><p>All properties come from that single object property.  You can call it WHATEVER you want <strong>e</strong> is the common shorthand for event, but the object variable name is for you to choose.</p>
<p>This is the same for ALL event listeners.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 30th 2014, 4:25:03 am">June 30th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/175617/unable-to-implement-longpress-for-documentviewer.html#answer-280228" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>please help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 30th 2014, 3:46:18 pm">June 30th 2014</span>
											by <span class='authorname'>Nirumal Thomas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have created a test app to test what is going on here, but so far not good news. I have added extra testing code to see which events do work;</p>
<pre><code class="hljs">var <span class="hljs-keyword">handler</span> = function (e) {
    Ti.API.info(<span class="hljs-string">'docViewer: '</span> + e.type);
};
docViewer.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'dblclick'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'doubletap'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'load'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'longpress'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'menu'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'pinch'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'postlayout'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'singletap'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'swipe'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'touchcancel'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'touchend'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'touchmove'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'touchstart'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'twofingertap'</span>, <span class="hljs-keyword">handler</span>);
docViewer.addEventListener(<span class="hljs-string">'unload'</span>, <span class="hljs-keyword">handler</span>);
</code></pre><p>However ONLY load&#x2F;unload appear to fire.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 30th 2014, 5:24:16 pm">June 30th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So is this a bug in the framework or is it like longpress can only be tested on the device?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2014, 2:45:04 am">July 1st 2014</span>
											by <span class='authorname'>Nirumal Thomas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tried to work around this by adding a view inside the document viewer to handle events, but this was throwing an error for the &#39;docViewer.add()&#39; function. Does Document Viewer fall under the category of views to which you can not add child views?</p>
<p>The error I get:-</p>
<pre><code class="hljs">[<span class="hljs-keyword">ERROR</span>] :  Script <span class="hljs-keyword">Error</span> {
[<span class="hljs-keyword">ERROR</span>] :      backtrace = <span class="hljs-string">"#0 () at :0"</span>;
[<span class="hljs-keyword">ERROR</span>] :      line = <span class="hljs-number">9</span>;
[<span class="hljs-keyword">ERROR</span>] :      message = <span class="hljs-string">"'undefined' is not a function (evaluating 'docViewer.add(pdfButton)')"</span>;
[<span class="hljs-keyword">ERROR</span>] :      name = TypeError;
[<span class="hljs-keyword">ERROR</span>] :      sourceId = <span class="hljs-number">302078432</span>;
[<span class="hljs-keyword">ERROR</span>] :      sourceURL = <span class="hljs-string">"file:///Users/defiance/Library/Application%20Support/iPhone%20Simulator/7.1/Applications/517449D1-1B60-4FA0-9A3A-508BCB4C08B9/ACKDemo.app/alloy/controllers/index.js"</span>;
[<span class="hljs-keyword">ERROR</span>] :  }
[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">2014</span>-<span class="hljs-number">07</span>-<span class="hljs-number">01</span> <span class="hljs-number">10</span>:<span class="hljs-number">32</span>:<span class="hljs-number">58.319</span> ACKDemo[<span class="hljs-number">1285</span>:<span class="hljs-number">70</span>b] Warning: Attempt <span class="hljs-keyword">to</span> present &lt;TiErrorController: <span class="hljs-number">0xd175460</span>&gt; <span class="hljs-keyword">on</span> &lt;TiRootViewController: <span class="hljs-number">0xd078b60</span>&gt; <span class="hljs-keyword">while</span> a presentation <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> progress!
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 1st 2014, 3:12:19 am">July 1st 2014</span>
											by <span class='authorname'>Nirumal Thomas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Right now I am not sure if this is a bug in the framework or the documentation.  I am surprised the events beyond load and unload are noted as the DocumentViewer is more like an external viewer used inside an app.  So you might expect to get less control over something like that.</p>
<p>You cannot add child items to the DocumentViewer as it is not a view in the way you normally understand them and nor is it a container either.</p>
<p>I am still investigating and will come back to you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2014, 1:38:14 pm">July 1st 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-280229">
				
						<section>
							<p>Thanks for understanding.<br>But even after i changed the handler function&#39;s parameter. The handler is not being triggered.</p>
<pre><code class="hljs"><span class="hljs-comment">// Use a NavigationWindow to create a navigation bar for the window</span>
<span class="hljs-keyword">var</span> win = $.ackMainWindow;
<span class="hljs-keyword">var</span> navWin = Ti.UI.iOS.createNavigationWindow({<span class="hljs-built_in">window</span>: win});
<span class="hljs-keyword">var</span> winButton = Titanium.UI.createButton({
    title:<span class="hljs-string">'Launch'</span>,
    height:<span class="hljs-number">40</span>,
    width:<span class="hljs-number">200</span>,
    top:<span class="hljs-number">270</span>
});
win.add(winButton);

<span class="hljs-keyword">var</span> path = Titanium.Filesystem.applicationDataDirectory + <span class="hljs-string">"ifsc-code.pdf"</span>;

<span class="hljs-comment">// Create a document viewer to preview a PDF file</span>
<span class="hljs-keyword">var</span> docViewer = Ti.UI.iOS.createDocumentViewer({url:path});

<span class="hljs-comment">// Adding longpress event listener.</span>
docViewer.addEventListener(<span class="hljs-string">'longpress'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    alert(e.type);
});

<span class="hljs-comment">// Adding event listener for winButton to show Document Viewer.</span>
winButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    docViewer.show({animated: <span class="hljs-literal">true</span>});
});

navWin.open();
</code></pre><p>Is there anything else I am doing wrong here.</p>
<p>Thanks,<br>Nirumal.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 30th 2014, 4:34:07 am">June 30th 2014</span>
								by <span class='authorname'>Nirumal Thomas</span><br>
								<a class="icon-bg icon-link" href="question/175617/unable-to-implement-longpress-for-documentviewer.html#answer-280229" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
