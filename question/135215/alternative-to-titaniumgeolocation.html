<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alternative to Titanium.Geolocation » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alternative to Titanium.Geolocation</h1>
		</header>
		<section>
			<p>So, I&#39;ve read lots of different questions on this forum, and various blog posts about how to get an accurate current location from the Titanium.Geolocation module.</p>
<p>At the moment, I use the process of adding a location listener, calling the getCurrentLocation() method, and waiting the events to be fired to the listener.  In general, this does give me accurate location.</p>
<p>However, I feel there is a bigger problem.  I would say roughly 40% of the time, my location listener is never called, and getCurrentLocation returns no value, so I am getting <em>NO</em> value from the Titanium.Geolocation for the current location.</p>
<p>I decided to see what happens with the KitchenSink Geolocation example, and the same thing happens:</p>
<ol>
<li>I&#39;m sitting at my desk at work.  I start the KitchenSink application and go to the Geolocation page.</li>
<li>The &#39;Current Location&#39; and &#39;Updated Location&#39; are never updated, no matter how long I wait.</li>
<li>I go to google maps - it gets my location within 5 seconds.</li>
<li>I go back to the KitchenSink application, and it does have an updated &#39;Current Location&#39; and &#39;Updated Location&#39; value now.</li>
</ol>
<p>So it seems to me that the Titanium.Geolocation module doesn&#39;t work that well, since the KitchenSink application cant get my location, but the Google Maps app can.</p>
<p>Is there an alternative to using this Module.  Could I use a webview and use HTML5 geolocation functions instead?</p>
<p>Thanks for reading this question!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 11th 2012, 6:49:49 am">April 11th 2012</span>
				by <span class='authorname'>John Farrelly</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>gps</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-235738">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi John.</p>
<p>Well, to answer your question there is an inherent issue with initially getting your location. Using an event listener to wait for a change in the location will eventually fire, but a better way is to actually get the location using the geo location api. and get it twice …. This solution always resolves a true location on iPhone.</p>
<p>If you look at https:&#x2F;&#x2F;github.com&#x2F;thewarpedcoder&#x2F;warpedAR-Open-Source this will give you the code to resolve your location issue.</p>
<p>It is not really a fault with Titanium more a device issue where it assumes the location it has is current, but that could have been from 2 hrs ago, so physically forcing it to give get a new location is good. But if you only do it once, it does return the previously stored location not the latest location. When you have this then adding the event listener to update every 5 or 10 meters will trigger the fire event successfully.</p>
<p>Hope this helps</p>
<p>T.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 11th 2012, 7:52:10 am">April 11th 2012</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/135215/alternative-to-titaniumgeolocation.html#answer-235738" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for responding Trevor.  I&#39;ll give that a go and come back with the results.  I might also install the AR app on my iPhone, looks interesting :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 11th 2012, 8:14:26 am">April 11th 2012</span>
											by <span class='authorname'>John Farrelly</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I wrote a recursive function to call getCurrentLocation() three times.  While this generally gives better results, I do find that it still gives inaccurate information sometimes.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 11th 2012, 10:22:04 am">April 11th 2012</span>
											by <span class='authorname'>John Farrelly</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>We&#39;re experiencing the same problems. Checking the coordinate timestamp each time reveals that we keep getting cached locations, usually even on the second, third, …, twentieth call to getCurrentLocation.</p>
<p>It seems like the most reliable way to get a current location is to set a distanceFilter, listen to the &#39;location&#39; event, and (e.g.) persist the resulting coordinates to variables for synchronous reads. But this seems really inefficient (and probably battery-hungry) unless you need constant location updates. We just want occasional discrete readings of the location (and our users aren&#39;t necessarily moving a whole lot besides).</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 13th 2012, 2:25:46 am">April 13th 2012</span>
											by <span class='authorname'>Brian Langenfeld</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-235743">
				
						<section>
							<p>The location Event fires only if the location has changed. Therefore you will not get any changes while sitting. Using getCurrentLocation(); just Returns the last valid location, if there was none before you wont get any. I am with you if you say the naming of the function is misleading, should be something like getLastLocation();</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 11th 2012, 8:17:40 am">April 11th 2012</span>
								by <span class='authorname'>Alexander Bauer</span><br>
								<a class="icon-bg icon-link" href="question/135215/alternative-to-titaniumgeolocation.html#answer-235743" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the reply Alexander.  That&#39;s pretty much what I figured was going on, but what confuses me is why the Google Maps App seems to be able to get the position which Titanium can&#39;t.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 11th 2012, 10:30:27 am">April 11th 2012</span>
											by <span class='authorname'>John Farrelly</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
