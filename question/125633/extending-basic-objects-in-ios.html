<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Extending basic objects in IOS Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Extending basic objects in IOS</h1>
		</header>
		<section>
			<p>I am trying to extend a very simple object (Ti.UI.createView({}))   The extended properties are not showing up in a simple info message.   </p>
<p>Here is a sample of my app.js file</p>
<pre><code class="hljs">ML={};

var TheWindow = Ti.UI.createView({});                

  TheWindow.ML=ML;
  ML.TestProp = 'Test';
  TheWindow.ML.NewProp = 'Where are you??';
  TheWindow.ML.TestProp = 'tset';

Ti.API.info('&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;' + JSON.stringify(TheWindow.ML));
Ti.API.info('<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>' + JSON.stringify(ML));
</code></pre><p>The output for IOS is:</p>
<pre><code class="hljs">[INFO] &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;{}

[INFO] <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>{<span class="hljs-string">"TestProp"</span>:<span class="hljs-string">"Test"</span>}
</code></pre><p>The output for Android is:</p>
<pre><code class="hljs">I/TiAPI   (  360): (kroll$1: app://app.js) [44,864] &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;{<span class="hljs-string">"TestProp"</span>:<span class="hljs-string">"tset"</span>,<span class="hljs-string">"NewProp"</span>:<span class="hljs-string">"Where are you??"</span>}
I/TiAPI   (  360): (kroll$1: app://app.js) [2,866] <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>{<span class="hljs-string">"TestProp"</span>:<span class="hljs-string">"tset"</span>,<span class="hljs-string">"NewProp"</span>:<span class="hljs-string">"Where are you??"</span>}
</code></pre><p>This is critical for our application since we extend several objects in several different ways.  </p>
<p>Mac OSX 10.7 (Lion)<br>IOS SDK 4.3<br>Titanium SKD 1.7.2&#x2F;1.7.3&#x2F;1.8.0 (results all the same)</p>
<p>Any help is appreciated.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 15th 2011, 2:12:19 pm">September 15th 2011</span>
				by <span class='authorname'>Jon Barnhart</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-218913">
				
						<section>
							<p>Try setting the properties on your <code>ML</code> object before attaching it to the window object, or instead attach the properties using the full object already attached to the window.</p>
<p>option 1:</p>
<pre><code class="hljs"><span class="hljs-keyword">ML</span> = {
 TestProp: '<span class="hljs-keyword">Test</span>'
};
TheWindow.<span class="hljs-keyword">ML</span> = <span class="hljs-keyword">ML</span>;
</code></pre><p>option 2:</p>
<pre><code class="hljs">TheWindow.<span class="hljs-keyword">ML</span> = {};
TheWindow.<span class="hljs-keyword">ML</span>.TestProp = '<span class="hljs-keyword">Test</span>';
<span class="hljs-comment">//etc...</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 15th 2011, 2:20:32 pm">September 15th 2011</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/125633/extending-basic-objects-in-ios.html#answer-218913" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Option 2, is probably the way you want to go, otherwise removing the view will not release the values from memory.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 2:29:37 pm">September 15th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>In my basic sample that would work just fine, however I don&#39;t want the properties to be released when the view is released since it is a global application variable.  Also, I can&#39;t add all the properties to my object up front since I don&#39;t have all the answers up front.   Why are there 2 different results between the same code deployed to IOS and Android?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 3:28:53 pm">September 15th 2011</span>
											by <span class='authorname'>Jon Barnhart</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tried option 2 for the fun of it. </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> TheWindow = TI.UI.createView({});
  TheWindow.<span class="hljs-keyword">ML</span> = {};
  TheWindow.<span class="hljs-keyword">ML</span>.TestProp = '<span class="hljs-keyword">Test</span>';

Ti.API.info(JSON.stringify(TheWindow.<span class="hljs-keyword">ML</span>));
</code></pre><p>Result in IOS</p>
<pre><code class="hljs">[INFO] {}
</code></pre><p>If I ask for TheWindow.ML.TestProp I get undefined</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 3:45:28 pm">September 15th 2011</span>
											by <span class='authorname'>Jon Barnhart</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It didn&#39;t occur to me because of the name of your variable but I just noticed that you are using <code>createView()</code> as <code>TheWindow</code> variable and not <code>createWindow()</code>. Not all Titanium objects in iOS are directly accessible in the way that you are attempting. You can attach custom variables to views, but only what you attach at creation time will be available to you. Meaning, you wont be able to modify the custom var after the creation but you can access any vars you attached during creation.<br>If you use the <code>Window</code> object, you will be able to modify your custom variables as desired.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 4:38:47 pm">September 15th 2011</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Anthony, I think you have answered my question, however, I changed it to createWindow instead of createView, and still get the same result.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 4:49:17 pm">September 15th 2011</span>
											by <span class='authorname'>Jon Barnhart</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Here is my new code for app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">ML</span>={TestProp: '<span class="hljs-keyword">Test</span>'};

<span class="hljs-keyword">var</span> TheWindow = Ti.UI.createWindow({});                
  TheWindow.<span class="hljs-keyword">ML</span>=<span class="hljs-keyword">ML</span>;
  TheWindow.<span class="hljs-keyword">ML</span>.TestProp = 'changed';

Ti.API.info('&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;' + JSON.stringify(TheWindow.<span class="hljs-keyword">ML</span>));
~
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 5:04:15 pm">September 15th 2011</span>
											by <span class='authorname'>Jon Barnhart</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The code below creates a window in app.js deployed to the IOS simulator.</p>
<p>I setup 2 custom variables in the creation of the window Custom1 is a simple string property.  Custom2 is a simple object property.   </p>
<p>In the click even of the window, I can change the background color of the window, I can change the Custom1 property but I am unable to change Custom2.Value.  I can however completely reassign the value of Custom2 to a &quot;new&quot; object.</p>
<p>The output has been pasted below as well.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> TheWindow = Ti.UI.createWindow({backgroundColor:<span class="hljs-string">'yellow'</span>,
                                    Custom1:<span class="hljs-string">'lite'</span>,
                                    Custom2:{Value: <span class="hljs-number">4.50</span>}
                                   });                

TheWindow.addEventListener(<span class="hljs-string">'click'</span>, OnClick);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OnClick</span>(<span class="hljs-params">evt</span>)
</span>{
  TheWindow.backgroundColor = <span class="hljs-string">'grey'</span>;

  TheWindow.Custom1 = <span class="hljs-string">'dark'</span>;
  Ti.API.info(TheWindow.Custom1);

  TheWindow.Custom2.Value = <span class="hljs-number">2.00</span>;
  Ti.API.info(<span class="hljs-string">'Should be 2.00: '</span> + TheWindow.Custom2.Value);
  Ti.API.info(<span class="hljs-string">'JSON 2.00: '</span> + <span class="hljs-built_in">JSON</span>.stringify(TheWindow.Custom2));

  TheWindow.Custom2 = {Value:<span class="hljs-number">3.00</span>};
  Ti.API.info(<span class="hljs-string">'Should be 3.00: '</span> + TheWindow.Custom2.Value);
  Ti.API.info(<span class="hljs-string">'JSON 3.00: '</span> + <span class="hljs-built_in">JSON</span>.stringify(TheWindow.Custom2));

}

TheWindow.open();
</code></pre><p>output:</p>
<pre><code class="hljs">[INFO] dark

[INFO] Should be <span class="hljs-number">2.00</span>: <span class="hljs-number">4.5</span>

[INFO] JSON <span class="hljs-number">2.00</span>: {<span class="hljs-string">"Value"</span>:<span class="hljs-number">4.5</span>}

[INFO] Should be <span class="hljs-number">3.00</span>: <span class="hljs-number">3</span>

[INFO] JSON <span class="hljs-number">3.00</span>: {<span class="hljs-string">"Value"</span>:<span class="hljs-number">3</span>}
</code></pre><p>I believe this is a bug.   If this is the intended behavior please explain what I am missing as to why I can&#39;t change TheWindow.Custom2.Value directly.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 6:40:59 pm">September 15th 2011</span>
											by <span class='authorname'>Jon Barnhart</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I just ran into this as well with the iPhone simulator.  Jon&#39;s example makes it quite clear that there&#39;s something wrong here.  His &quot;Custom1&quot; property is changeable, but the Value property of the Custom2 object is not.  Even though Custom2 can be completely reassigned successfully.  </p>
<p>When run on Android, everything works as expected, which is why I think this is a bug.  There&#39;s nothing iPhone or Android specific here, so the code should work the same way on both devices.</p>
<p>Anthony or Matt, can you take another look at this?  I&#39;d post an example of what I&#39;m seeing, but Jon&#39;s example is clearer than my code.</p>
<hr>
<p>Titanium Studio 1.0.4.201108101535</p>
<p>Mobile SDK 1.8.0.v20110913141920</p>
<p>iPhone simulator</p>
<p>Android 2.2</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 16th 2011, 6:36:50 pm">September 16th 2011</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
