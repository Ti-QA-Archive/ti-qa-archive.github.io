<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>best practices classic titanium Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>best practices classic titanium</h1>
		</header>
		<section>
			<p>Hi all appcelerator community!</p>
<p>I have several questions about the proper development of an application in titanium for android development.</p>
<p>Awaiting development applications with multiple windows, and when to move from one window to another, I always worry about closing the previous memory consumption. </p>
<pre><code class="hljs">var win1 = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWindow<span class="hljs-literal">()</span>;
var next = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createButton<span class="hljs-literal">()</span>;
next.title = <span class="hljs-symbol">'Next</span> <span class="hljs-type">Window'</span>;
next.addEventListener(<span class="hljs-symbol">'click'</span>, function<span class="hljs-literal">()</span> {
    var win2 = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWindow<span class="hljs-literal">()</span>;
    win2.url = <span class="hljs-symbol">'window2</span>.js';
    win2.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
    setTimeout(function<span class="hljs-literal">()</span> {
        win1.close<span class="hljs-literal">()</span>;
    },<span class="hljs-number">1000</span>);
});

win1.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>(For now I have no intention of developing &#39;alloy&#39;).</p>
<p>Generally also created the first window in app.js and then continued with the next window. My question is: what is the correct way to work, I structure my project as a classical code in titanium. If the correct way is to work with TabGroup?, Or work with views.</p>
<p>Also caught my attention of how to work with databases in sqlite, now I have an application that must create nearly 30 tables and is fed a JSON from a server in apache. (where I can configure this file?).</p>
<p>At this time I am directing a little in the KitchenSink app, and I see how much everything is encapsulated in modules.</p>
<p>I need some help to develop a good future application in titanium.</p>
<p>Thank you</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 2nd 2014, 3:34:59 pm">August 2nd 2014</span>
				by <span class='authorname'>antonio medel</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>application</span></li>
					
						<li><span class='tagname'>titanium studio</span></li>
					
						<li><span class='tagname'>windows</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-281378">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>You have too many questions going on here, focus on something, resolve that and then move on.  Otherwise it looks like you are after the blueprints to making the perfect app without understanding how to get their yourself.</p>
<p>Your later questions have no real substance behind to explain your needs or how you expect to work with them.  So this answer is only going to deal with the memory management and related issues of creating windows.  Later on you can ask a new question with a more detailed break down of the specific thing you are after.  </p>
<p>I am going to simplify your window create questions to the following sub-topics;</p>
<ul>
<li>Should you use tabs?</li>
<li>Should you close the previous window each time you open a new window?</li>
<li>How do you deal with memory issues when closing things?</li>
<li>Should I use views in place of Windows?</li>
<li>Heard about modules - any use with windows?</li>
</ul>
<p>Firstly the most important thing to know is that the answers to all four of those questions is; yes, no and maybe.</p>
<p>Whilst there are best practices - those best practices do not mean only one way ever for all things.  Often a best practise used for one thing will not be suitable if a different best practice affects another section.</p>
<p>So we will work through each of those questions;</p>
<ul>
<li><p><strong>Should you use tabs?</strong></p>
<p>Yes if your app suits tabs. No if it does not. Many apps benefit from the layout that tabs provide, some do not.  This is not a best practice answer this is simply would your users benefit from the tabs UX.</p>
</li>
<li><p><strong>Should you close the previous window each time you open a new window?</strong></p>
<p>If you are opening a sequence of windows that the users moves between, for example; a table of choices that when pressed displays a new window with details.  Then the user is expecting to return to the previous window when the details are no longer needed.  If your app has four tabs then each tab has a window, a user moves from one of those windows to a child window - then you have five windows open in total, you cannot close any of those - your app will break.</p>
<p>So in short there are times when you should close the previous window - but only if the existence of the previous window being removed will not cause the app itself to be unstable.</p>
</li>
<li><p><strong>How do you deal with memory issues when closing things?</strong></p>
<p>Take a look at this recent question I answered that shows how to safely close a window by removing the references to things that cannot remove themselves.  It includes a walk-through of the reason - including how to correctly handle a timeout or interval - both common memory leaks when not handled correctly.  The example - shows you how.</p>
<ul>
<li><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;176705&#x2F;hideshow-labels-in-android#answer-281373">hide&#x2F;show labels in android</a> ignore the subject line - the content is the key</li>
</ul>
<p>A good rule of thumb is always remove references to things that you said listener out for (Event listeners), also anything that you said to keep going (setInterval &amp; setTimeout as examples), tableViews can often grab hold of the references in rows - set set those references to empty arrays.</p>
</li>
<li><p><strong>Should I use views in place of Windows?</strong></p>
<p>Yes you can, they can be better in some circumstances and worse in others.  However to solve the problems you are trying to solve this is not the something you should be worrying about now as the Window self memory management abilities are far easier to benefit from.  You need to be much further down the road before trying to mix this in as a solution.  I hope you do not take offence at that statement.</p>
</li>
<li><p><strong>Heard about modules - any use with windows?</strong></p>
<p>Yes - very strongly yes. CommonJS modules makes things easier to code, debug, manage memory and reuse of core elements.</p>
<p>First thing, do not do these any more;</p>
</li>
</ul>
<pre><code class="hljs">wi<span class="hljs-label">n2</span>.url = <span class="hljs-string">'window2.js'</span>;
</code></pre><pre><code class="hljs">setTimeout<span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> {
    win1.close<span class="hljs-list">()</span><span class="hljs-comment">;</span>
},<span class="hljs-number">1000</span>)</span><span class="hljs-comment">;</span>
</code></pre><p> Here is a good example of your code with a CommonJS modules building a new window, and both the first and second windows have suitable memory clean-up  for the code;</p>
<p> <strong>app.js</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
    height: TI.UI.FILL,
    title: <span class="hljs-string">'Hello World'</span>,
    width: TI.UI.FILL
});
<span class="hljs-keyword">var</span> btnNext = Ti.UI.createButton({
    title: <span class="hljs-string">'Next Window'</span>
});
win.add(btnNext);
<span class="hljs-keyword">var</span> btnNextHandler = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> nextWin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'next'</span>).create({
        title: <span class="hljs-string">'New Window'</span>
    });
    nextWin.open();
};
<span class="hljs-keyword">var</span> winCloseHandler = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    btnNext.removeEventListener(<span class="hljs-string">'click'</span>, btnNextHandler); 
    win.removeEventListener(<span class="hljs-string">'close'</span>, winCloseHandler); 
};
btnNext.addEventListener(<span class="hljs-string">'click'</span>, btnNextHandler); 
win.addEventListener(<span class="hljs-string">'close'</span>, winCloseHandler); 
win.open();
</code></pre><p> <strong>next.js</strong></p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">(obj)</span> </span>{
    <span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
        height: TI.UI.FILL,
        title: obj.title || <span class="hljs-string">'Untitled'</span>,
        width: TI.UI.FILL
    });
    <span class="hljs-keyword">var</span> btnCloseHandler = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
        win.close();
    };
    <span class="hljs-keyword">var</span> winCloseHandler = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
        win = <span class="hljs-literal">null</span>;
    };
    <span class="hljs-keyword">var</span> btnClose = Ti.UI.createButton({
        title: <span class="hljs-string">'Close'</span>
    });
    win.add(btnClose);
    btnClose.addEventListener(<span class="hljs-string">'click'</span>, btnCloseHandler); 
    win.addEventListener(<span class="hljs-string">'close'</span>, winCloseHandler); 
    <span class="hljs-keyword">return</span> win;
}
exports.create = create;
</code></pre><p> Your new window sits over the top of the previous one as pressing close on the new window returns you to the second.</p>
<p>You are rejecting the move to Alloy now - which is fine, just be aware out of all the things you are considering for best practices - Alloy would top that list.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 2nd 2014, 4:57:35 pm">August 2nd 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/176710/best-practices-classic-titanium#answer-281378" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Malcolm!</p>
<p>I understand a little more from your response.</p>
<p>Now one questions to improve the interface, the issue of working with windows.</p>
<p>You can add animations to windows as in Iphone with windowNavigation?</p>
<p>Moreover, one of my biggest problems is still not resolve creating sqlite database. I have a file that contains all the database creation and feeding of this, with JSON coming from an Apache server.</p>
<p>This file should also add it to a module? the start of the application?</p>
<p>I remain attentive and thank you very much for your concern.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 2nd 2014, 7:36:10 pm">August 2nd 2014</span>
											by <span class='authorname'>antonio medel</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-281546">
				
						<section>
							<p>Hi there</p>
<p>I wonder if the above code can include animation? or a transition?</p>
<p>Thank you</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 8th 2014, 5:43:11 pm">August 8th 2014</span>
								by <span class='authorname'>antonio medel</span><br>
								<a class="icon-bg icon-link" href="question/176710/best-practices-classic-titanium#answer-281546" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
