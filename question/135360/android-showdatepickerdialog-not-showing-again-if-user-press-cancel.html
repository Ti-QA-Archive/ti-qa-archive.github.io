<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android showDatePickerDialog() not showing again if user press &#39;cancel&#39; » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android showDatePickerDialog() not showing again if user press &#39;cancel&#39;</h1>
		</header>
		<section>
			<p>Hi everyone, I was trying to do a DatePicker for Android that displays when I touch a TextField(could be a button), but the problem is that when I click on &#39;cancel&#39;, the dialog does not displays again.</p>
<p>Can anyone help me with this? Thank you!</p>
<pre><code class="hljs">
textField.addEventListener(<span class="hljs-string">'focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            picker.showDatePickerDialog({
                <span class="hljs-keyword">callback</span> : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
                    <span class="hljs-keyword">if</span>(!e.cancel) {
                        <span class="hljs-keyword">var</span> dateValue = e.value;
                        textField.value = dateValue.getDate() + <span class="hljs-string">'/'</span>
                         + (dateValue.getMonth() + <span class="hljs-number">1</span>) + <span class="hljs-string">'/'</span> 
                         + dateValue.getFullYear();
                        textField.blur();
                    }
                }
            });

        });
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 13th 2012, 6:03:35 pm">April 13th 2012</span>
				by <span class='authorname'>Nahuel Gabioud Fernandez</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>cancel</span></li>
					
						<li><span class='tagname'>datepicker</span></li>
					
						<li><span class='tagname'>event</span></li>
					
						<li><span class='tagname'>not showing</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-236079">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hello Nahuel</p>
<p>The focus event for any control calls only once for window instance. So if you wants to call the focus event again you need to close the window and open it again but that not going to solve the problem for you. So the better option is to get the click event of textfield like the below.</p>
<pre><code class="hljs">textField.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    picker.showDatePickerDialog({
        <span class="hljs-keyword">callback</span> : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
            <span class="hljs-keyword">if</span>(!e.cancel) {
                <span class="hljs-keyword">var</span> dateValue = e.value;
                textField.value = dateValue.getDate() + <span class="hljs-string">'/'</span>
                + (dateValue.getMonth() + <span class="hljs-number">1</span>) + <span class="hljs-string">'/'</span> 
                + dateValue.getFullYear();
                textField.blur();
            }
        }
    });
});
</code></pre><p>Hope this going to help you.</p>
<p>Regards</p>
<p>Nikunj</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 14th 2012, 3:54:26 am">April 14th 2012</span>
								by <span class='authorname'>Nikunj Sakhrelia</span><br>
								<a class="icon-bg icon-link" href="question/135360/android-showdatepickerdialog-not-showing-again-if-user-press-cancel#answer-236079" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you Nikunj! That totally worked!</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 16th 2012, 10:23:20 am">April 16th 2012</span>
											by <span class='authorname'>Nahuel Gabioud Fernandez</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265917">
				
						<section>
							<p>var GetAndroidDateTimePicker = function(txtbox) {</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> dateValue = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
<span class="hljs-keyword">var</span> yy = dateValue.getFullYear();
<span class="hljs-keyword">var</span> mm = dateValue.getMonth();
<span class="hljs-keyword">var</span> dd = dateValue.getDate();
<span class="hljs-keyword">var</span> edate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(yy, mm, dd);
<span class="hljs-keyword">var</span> val1 = [];
<span class="hljs-keyword">var</span> val2 = [];
<span class="hljs-keyword">var</span> val3 = [];
<span class="hljs-keyword">var</span> newVal1 = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> ampm = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> picker = Ti.UI.createPicker({
    type : Titanium.UI.PICKER_TYPE_TIME,
    value : edate,
    format24 : <span class="hljs-literal">true</span>,
    height :  <span class="hljs-number">180</span>,
    width :<span class="hljs-number">200</span>,
    top :  <span class="hljs-number">60</span>,
    left :  <span class="hljs-number">10</span>,
});

picker.showDatePickerDialog({
    callback : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        Titanium.API.info(<span class="hljs-string">"THE E:"</span> + <span class="hljs-built_in">JSON</span>.stringify(e))
        <span class="hljs-keyword">if</span> (e.cancel) {
        } <span class="hljs-keyword">else</span> {
            Titanium.API.info(<span class="hljs-string">"THE DT:"</span> + e.value);
            <span class="hljs-keyword">var</span> pd = e.value.toLocaleString();
            val1 = pd.split(<span class="hljs-string">" "</span>);
            newVal1 = val1[<span class="hljs-number">0</span>] + <span class="hljs-string">" "</span> + val1[<span class="hljs-number">1</span>] + <span class="hljs-string">" "</span> + val1[<span class="hljs-number">2</span>] + <span class="hljs-string">" "</span> + val1[<span class="hljs-number">3</span>];
            Titanium.API.info(val1[<span class="hljs-number">0</span>]);
            Titanium.API.info(val1[<span class="hljs-number">1</span>]);
            Titanium.API.info(val1[<span class="hljs-number">2</span>]);
            Titanium.API.info(val1[<span class="hljs-number">3</span>]);
            setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                timeing();
            }, <span class="hljs-number">200</span>);
        }
    }
});
ab = <span class="hljs-literal">true</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeing</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (ab) {
        ab = <span class="hljs-literal">false</span>;
        picker.showTimePickerDialog({
            callback : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">if</span> (e.cancel) {
                } <span class="hljs-keyword">else</span> {
                    Titanium.API.info(<span class="hljs-string">"THE TT:"</span> + e.value.toLocaleString());
                    <span class="hljs-keyword">var</span> dp = e.value.toLocaleString();
                    val2 = dp.split(<span class="hljs-string">" "</span>);
                    val3 = val2[<span class="hljs-number">4</span>].split(<span class="hljs-string">":"</span>);
                    <span class="hljs-keyword">if</span> (val3[<span class="hljs-number">0</span>] &gt;= <span class="hljs-number">12</span>) {
                        ampm = <span class="hljs-string">"PM"</span>
                    } <span class="hljs-keyword">else</span> {
                        ampm = <span class="hljs-string">"AM"</span>;
                    }
                    txtbox.value = newVal1 + <span class="hljs-string">" "</span> + val3[<span class="hljs-number">0</span>] + <span class="hljs-string">":"</span> + val3[<span class="hljs-number">1</span>] + <span class="hljs-string">":"</span> + val3[<span class="hljs-number">2</span>] + <span class="hljs-string">" "</span> + ampm;
                }
            }
        });
    }
}
</code></pre><p>}</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 15th 2013, 9:41:13 am">July 15th 2013</span>
								by <span class='authorname'>Jayesh  Joshi</span><br>
								<a class="icon-bg icon-link" href="question/135360/android-showdatepickerdialog-not-showing-again-if-user-press-cancel#answer-265917" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
