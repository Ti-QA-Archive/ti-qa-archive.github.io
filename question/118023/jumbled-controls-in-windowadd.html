<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Jumbled controls in window.add » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Jumbled controls in window.add</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I&#39;m new to Titanium and still trying to understand. Can someone please help explain this behavior?</p>
<p>I create a window with vertical layout, call open on it, and then add around 10 controls (labels and text fields) into it. Surprisingly, the first control I add always gets misplaced somewhere further below.</p>
<p>After struggling to find the problem, I experimented by moving all addition of controls to the &#39;open&#39; event handler of the window and everything seems to be working as of now.</p>
<p>Is it a requirement that controls must be added in the &#39;open&#39; event callback? Why so? Or is something else missing somewhere?</p>
<p>My environment:</p>
<ul>
<li><p>Titanium SDK version: 1.6.1 (03&#x2F;15&#x2F;11 11:45 2fdc0c5)</p>
</li>
<li><p>Mac OS 10.6.7</p>
</li>
<li><p>Testing on emulated Android 2.1-update1</p>
</li>
</ul>
<p>Thanks.<br>Tan</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 1st 2011, 8:11:56 am">April 1st 2011</span>
				by <span class='authorname'>Tanmay Mohapatra</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>add</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>window</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>it would be helpful if you included some code, <a href="http:&#x2F;&#x2F;pastie.org&#x2F;">http:&#x2F;&#x2F;pastie.org&#x2F;</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="April 1st 2011, 9:35:41 am">April 1st 2011</span>
								by <span class='authorname'>Aaron Saunders</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Tanmay</p>
<p>In order for someone to advise you about this, would you create a usecase? A usecase is a self-contained piece of code that demonstrates your issue in the <strong>least possible</strong> number of lines and that runs <strong>without modification</strong> when pasted into an empty <code>app.js</code>. Some advantages of providing a usecase are:</p>
<ul>
<li>it is much kinder to those wishing to help you, because they won&#39;t have to spend considerable time replicating your issue on their systems</li>
<li>you will likely receive more accurate answers, as people will be running exactly the same code as you</li>
<li>you will gain a much greater knowledge of how Titanium works</li>
<li>the process of creating a usecase can often simplify the problem and consequently reveal the answer</li>
</ul>
<p>You can read more about this subject in the official documentation, under the section <a href="http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Contributing+to+Titanium#ContributingtoTitanium-CreatingGoodUsecases">Creating Good Use-cases</a>.</p>
<p>Note that, if the code is long, you may want to create a <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;">Git Gist</a> or <a href="http:&#x2F;&#x2F;pastebin.com&#x2F;">pastebin</a> rather than paste the code here directly.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 1st 2011, 10:25:31 am">April 1st 2011</span>
								by <span class='authorname'>Paul Dowsett</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thanks Aaron &amp; Paul.<br>Sorry for the delay in responding as I was away for a while.</p>
<p>Here is a small piece of code that recreates the scenario. The labels are &#39;almost always&#39; not in order of addition when I run it.</p>
<p><a href="http:&#x2F;&#x2F;pastie.org&#x2F;1757719">Here&#39;s the code pastie</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="April 5th 2011, 7:04:57 am">April 5th 2011</span>
								by <span class='authorname'>Tanmay Mohapatra</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-205638">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Tanmay</p>
<p>Thanks for your usecase, which is very good. I can confirm the problem is also exhibited when I run it. I will investigate, and report back.</p>
<p>Cheers</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 5th 2011, 7:33:46 am">April 5th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/118023/jumbled-controls-in-windowadd#answer-205638" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Tanmay</p>
<p>Regarding your code, note that labels have auto dimensions by default, so there is no need to define them in your case.</p>
<p>The problem with your code is caused by the window being opened before the controls are created and added. Also note that by opening the window at the last moment, it creates a much smoother transition onscreen. The following amended version works as expected:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win1 = Ti.UI.createWindow({
  title: <span class="hljs-string">"Main Window"</span>,
  exitOnClose: <span class="hljs-literal">true</span>,
  layout: <span class="hljs-string">'vertical'</span>,
  navBarHidden: <span class="hljs-literal">false</span>
});     

<span class="hljs-keyword">var</span> btnNewWin = Ti.UI.createButton({
  top:<span class="hljs-number">5</span>,
  width:<span class="hljs-number">301</span>,
  height:<span class="hljs-number">57</span>,
  title: <span class="hljs-string">"New Win"</span>
});
win1.add(btnNewWin);
win1.open();

btnNewWin.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">var</span> win2 = Ti.UI.createWindow({
    title: <span class="hljs-string">"Second Window"</span>,
    layout: <span class="hljs-string">'vertical'</span>,
    navBarHidden: <span class="hljs-literal">false</span>
  });    

  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    <span class="hljs-keyword">var</span> lbl = Ti.UI.createLabel({
        text: <span class="hljs-string">'Label: '</span> + i,
        textAlign:<span class="hljs-string">'left'</span>
    });
    win2.add(lbl);
  }
  win2.open();
});
</code></pre><p>Hope this helps</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 5th 2011, 7:44:54 am">April 5th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>For those with the same problem, here are some screenshots demonstrating the issue:</p>
<p>Before:</p>
<p><img src="http:&#x2F;&#x2F;img845.imageshack.us&#x2F;img845&#x2F;2923&#x2F;screenshot218.png" alt="before"></p>
<p>After (fixed):</p>
<p><img src="http:&#x2F;&#x2F;img703.imageshack.us&#x2F;img703&#x2F;1285&#x2F;screenshot217.png" alt="after"></p>
</p>
										<div class="author">
											&mdash; commented <span title="April 5th 2011, 7:51:06 am">April 5th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you are interested in a fix for this, you can follow ticket <a href="https:&#x2F;&#x2F;appcelerator.lighthouseapp.com&#x2F;projects&#x2F;32238-titanium-mobile&#x2F;tickets&#x2F;3512">#3512</a>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 5th 2011, 12:28:07 pm">April 5th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks Paul. I&#39;ll be following the ticket.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 5th 2011, 1:35:18 pm">April 5th 2011</span>
											by <span class='authorname'>Tanmay Mohapatra</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Great, Tanmay, you are welcome! :) Would you mind marking this answer as best to close the thread, so that others may find it easily? Many thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 5th 2011, 1:48:31 pm">April 5th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-205634">
				
						<section>
							<p>Thanks Aaron and sorry for the delay in responding as I was away for a while. </p>
<p>Here is a small piece of code that recreates the scenario. The labels are &#39;almost always&#39; not in order of addition when I run it.</p>
<p>http:&#x2F;&#x2F;pastie.org&#x2F;1757719</p>
<p>&lt;script src=&#39;http:&#x2F;&#x2F;pastie.org&#x2F;1757719.js&#39;&gt;&lt;&#x2F;script&gt;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 5th 2011, 6:53:33 am">April 5th 2011</span>
								by <span class='authorname'>Tanmay Mohapatra</span><br>
								<a class="icon-bg icon-link" href="question/118023/jumbled-controls-in-windowadd#answer-205634" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
