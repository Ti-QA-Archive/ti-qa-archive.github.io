<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Service not works when screen off » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Service not works when screen off</h1>
		</header>
		<section>
			<p>Thanks for reading, I need some help, I´m going crazy… really.</p>
<p>In Android, Titanium SDK 1.8.2.<br>I have a service that captures the GPS position and saves in database. The interval of the intent it´s every 30 seconds.</p>
<p>All works fine… really good when screen is on, only when sreen off by pushing power button or by sleep mode, the service not works.</p>
<p>In my tiapp.xml the services it´s:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">android</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">manifest</span> <span class="hljs-attribute">android:versionName</span>=<span class="hljs-value">"1.0.0"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.WAKE_LOCK"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">manifest</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">services</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">service</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"interval"</span> <span class="hljs-attribute">url</span>=<span class="hljs-value">"servicio.js"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">services</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">android</span>&gt;</span>
</code></pre><p>Service it´s called:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> intent=Titanium.Android.createServiceIntent({url: <span class="hljs-string">'servicio.js'</span>});
intent.putExtra(<span class="hljs-string">'interval'</span>,<span class="hljs-number">30000</span>);
Ti.Android.startService(intent);
</code></pre><p>Please help!!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 25th 2012, 2:58:10 pm">April 25th 2012</span>
				by <span class='authorname'>Juan Ramón Jimenez</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>background</span></li>
					
						<li><span class='tagname'>intent</span></li>
					
						<li><span class='tagname'>service</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hello,</p>
<p>check <a href="http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;5786489&#x2F;appcelerator-titanium-android-background-location-service">this resource</a>, with some examples. </p>
<p>Best,</p>
<p>Mauro</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 25th 2012, 6:27:05 pm">April 25th 2012</span>
								by <span class='authorname'>Mauro Parra</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-237658">
				
						<section>
							<p>Hello Juan,</p>
<p>We&#39;re currently working on an app that makes use of background services in Android, using Titanium SDK 1.8.2 and have noticed the same behavior you describe.  The devices we are testing on use Android 2.2.1 and Android 2.3.4.  When device is sleeping (screen off), the GPS updates stop running.  If the device is in use or plugged in and charging with screen off, the GPS updates continue running. Did this behavior begin with Titanium 1.8.2?  We are wondering if it&#39;s a bug introduced in one of the builds.  We&#39;ll continue investigating and post any findings.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 1st 2012, 8:12:28 pm">May 1st 2012</span>
								by <span class='authorname'>Carlos Collazo</span><br>
								<a class="icon-bg icon-link" href="question/136030/service-not-works-when-screen-off#answer-237658" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>So far, we haven&#39;t found anything new on this subject.  We&#39;ve found that the only way to keep the updates going in the background with the screen off seems to be by letting the gps radio activated through: <code>Titanium.Geolocation.addEventListener(&amp;#39;location&amp;#39;, locationCallback);</code> You&#39;ll notice the satellite or GPS symbol on the top of the notification area when it is active.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 29th 2012, 4:21:03 pm">May 29th 2012</span>
											by <span class='authorname'>Carlos Collazo</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-240535">
				
						<section>
							<p>might find some answers here</p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;127293&#x2F;should-an-android-notification-work-when-phone-is-asleep">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;127293&#x2F;should-an-android-notification-work-when-phone-is-asleep</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 9th 2012, 1:57:06 pm">June 9th 2012</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/136030/service-not-works-when-screen-off#answer-240535" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
