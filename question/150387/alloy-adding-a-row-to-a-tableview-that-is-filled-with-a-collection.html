<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy: adding a Row to a TableView that is filled with a collection » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy: adding a Row to a TableView that is filled with a collection</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I work on an Alloy project under MacOs 10.8.x and use Titanium Studio 3.0.2 with SDK 3.0.2.GA.</p>
<p>I have a TableView that is bound to a collection that synchronizes its content with a server.<br>I would like to show an additional row in the table view at the top, that says eg. &#39;Overview&#39;. This row should not be bound to the collection.</p>
<p>To clarify with an example: e.g. I have a list of books, the list comes from a database table books. I click on a book. A new list with all the chapters of the selected book is shown. the chapter list comes from a database table chapter. but the first entry of the chapter list should be an overview over the book. its data comes from the book table and not from the chapter table. </p>
<pre><code class="hljs"><span class="hljs-comment">&lt;!-- myList.xml ---&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Collection</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"item"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"myList"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Items"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"myTable"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"openItem"</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"item"</span> <span class="hljs-attribute">dataFilter</span>=<span class="hljs-value">"itemFilter"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SearchBar</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"itemRow"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><pre><code class="hljs"><span class="hljs-comment">// myList.js</span>

Alloy.Collections.item.fetch();

var myRow = Titanium.UI.createTableViewRow({
    id: <span class="hljs-string">'overview'</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-string">'47dip'</span>
});
var myLabel = Titanium.UI.createLabel({
    <span class="hljs-built_in">text</span>: <span class="hljs-string">'Overview'</span>,
    top: <span class="hljs-string">"0dip"</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-string">"47dip"</span>,
    left: <span class="hljs-string">"5dip"</span>,
    right: <span class="hljs-string">"5dip"</span>,
    font: {
        fontSize: <span class="hljs-string">"14dp"</span>,
        fontWeight: <span class="hljs-string">"bold"</span>
    }
});
myRow.<span class="hljs-built_in">add</span>(myLabel);
<span class="hljs-comment">// this is working, but directly after displaying this row,</span>
<span class="hljs-comment">// the collection is overwriting it again</span>
$.myTable.appendRow(myRow);

<span class="hljs-comment">// functions openItem, itemFilter, etc ommited</span>
</code></pre><p>Does anybody have an idea how I would accomplish this?</p>
<p>Thanks, Tim</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 3rd 2013, 7:32:29 am">April 3rd 2013</span>
				by <span class='authorname'>Tim Kask</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>collection</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
						<li><span class='tagname'>tableviewrow</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-259935">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Have you tried using the headerView property?</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Collection</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"item"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"myList"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Items"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"myTable"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"openItem"</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"item"</span> <span class="hljs-attribute">dataFilter</span>=<span class="hljs-value">"itemFilter"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SearchBar</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">HeaderView</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"bookOverview"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">HeaderView</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"itemRow"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 3rd 2013, 10:51:41 am">April 3rd 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="../../question/150387/alloy-adding-a-row-to-a-tableview-that-is-filled-with-a-collection.html#answer-259935" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hello Tony</p>
<p>thanks, that sounds like a great idea and I tried it.<br>I got two problems:</p>
<ul>
<li>the searchBar is not showing anymore, after I use the HeaderView</li>
<li>the HeaderView does not show the bottom border line. I would have to imitate a tableViewRow, by adding an os dependent bottom border line and click effect. </li>
</ul>
<p>maybe I did something wrong, my overview.xml looks like this:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"itemOverviewView"</span> <span class="hljs-attribute">onclick</span>=<span class="hljs-value">"showItemOverview"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"item"</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"Items Overview"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>just to be sure, I tried to use a TableViewRow instead of a View. The result was that nothing of the overview was shown.</p>
<p>thanks, Tim</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 3rd 2013, 11:48:10 am">April 3rd 2013</span>
											by <span class='authorname'>Tim Kask</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ah, yeah, I actually logged a ticket for that a while ago: <a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-11994">https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-11994</a></p>
<p>There&#39;s no inherent reason why the table would re-render the collection after your appendRow() call. I&#39;m assuming the code you are omitting above is causing the re-render. Showing the full controller might help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 3rd 2013, 11:57:24 am">April 3rd 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I think it is not re-rendering, but rendering after the additional row got appended. I assume this has to do with the sync of the collection with the server.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 3rd 2013, 12:10:04 pm">April 3rd 2013</span>
											by <span class='authorname'>Tim Kask</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>what im saying is that the act of appending a row to the table will not trigger that action. I&#39;m assuming other code is doing that.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 3rd 2013, 12:15:56 pm">April 3rd 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>as Tony suggested, I checked my additional code:</p>
<p>I use restapi.js from Mads Møller for syncing collections with the server. it triggers a fetch event after successful retrieving of the data. (btw: the reset event seems to early)</p>
<p>I changed the controller in that way, that the collection is listening for the fetch event. as soon as it arrives, it adds the additional row:</p>
<pre><code class="hljs"><span class="hljs-comment">// mylist.js</span>

<span class="hljs-comment">// superItem is a collection, eg books</span>
<span class="hljs-comment">// item is a collection, eg. chapters of books</span>

Alloy.Collections.item.fetch();

<span class="hljs-comment">// add the row after the fetch event</span>
Alloy.Collections.item.on(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-comment">// <span class="hljs-doctag">Note:</span> instead of this code, you could use the code from the question</span>
    <span class="hljs-comment">// the important part is to wait for the 'fetch' event.</span>
    $.superItemModel = Alloy.Collections.superItem.get(Alloy.Globals.currentSuperItemId);

    <span class="hljs-keyword">var</span> overviewRowController = Alloy.createController(<span class="hljs-string">'superItemOverviewRow'</span>, { $model: $.superItemModel });   <span class="hljs-comment">// is this a hack? $model is the internal reference to the current model</span>
    $.myTable.insertRowBefore(<span class="hljs-number">0</span>, overviewRowController.getView());
});
</code></pre><p>thanks for all the help, Tim</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 4th 2013, 12:04:41 pm">April 4th 2013</span>
											by <span class='authorname'>Tim Kask</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-259908">
				
						<section>
							<p>hello Tim,</p>
<p>Refer this link <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;guide&#x2F;Alloy_Data_Binding-section-36739592_AlloyDataBinding-AlloyModel-ViewBinding">http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;guide&#x2F;Alloy_Data_Binding-section-36739592_AlloyDataBinding-AlloyModel-ViewBinding</a></p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 3rd 2013, 8:25:52 am">April 3rd 2013</span>
								by <span class='authorname'>Jigar Maheshwari</span><br>
								<a class="icon-bg icon-link" href="../../question/150387/alloy-adding-a-row-to-a-tableview-that-is-filled-with-a-collection.html#answer-259908" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hello Jigar</p>
<p>thanks for the link. Even after reading it again, I don&#39;t see, how I can add an additional row to a tableView that is outside of the tableView-Collection binding. Did I miss something?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 3rd 2013, 9:25:15 am">April 3rd 2013</span>
											by <span class='authorname'>Tim Kask</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-260014">
				
						<section>
							<p>Hi</p>
<p>as Tony suggested, I checked my additional code:</p>
<p>I use restapi.js from Mads Møller for syncing collections with the server. it triggers a fetch event after successful retrieving of the data. (btw: the reset event seems to early)</p>
<p>I changed the controller in that way, that the collection is listening for the fetch event. as soon as it arrives, it adds the additional row:</p>
<pre><code class="hljs"><span class="hljs-comment">// mylist.js</span>

<span class="hljs-comment">// superItem is a collection, eg books</span>
<span class="hljs-comment">// item is a collection, eg. chapters of books</span>

Alloy.Collections.item.fetch();

<span class="hljs-comment">// add the row after the fetch event</span>
Alloy.Collections.item.on(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-comment">// <span class="hljs-doctag">Note:</span> instead of this code, you could use the code from the question</span>
    <span class="hljs-comment">// the important part is to wait for the 'fetch' event.</span>
    $.superItemModel = Alloy.Collections.superItem.get(Alloy.Globals.currentSuperItemId);

    <span class="hljs-keyword">var</span> overviewRowController = Alloy.createController(<span class="hljs-string">'superItemOverviewRow'</span>, { $model: $.superItemModel });   <span class="hljs-comment">// is this a hack? $model is the internal reference to the current model</span>
    $.myTable.insertRowBefore(<span class="hljs-number">0</span>, overviewRowController.getView());
});
</code></pre><p>thanks for all the help, Tim</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 4th 2013, 6:02:01 am">April 4th 2013</span>
								by <span class='authorname'>Tim Kask</span><br>
								<a class="icon-bg icon-link" href="../../question/150387/alloy-adding-a-row-to-a-tableview-that-is-filled-with-a-collection.html#answer-260014" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Can you add this as a comment to the original conversation and then mark mine as best answer? This way people can find the troubleshooting path we used to determine the final solution.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 4th 2013, 11:57:28 am">April 4th 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
