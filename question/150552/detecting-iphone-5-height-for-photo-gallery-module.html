<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Detecting iPhone 5 height for photo gallery module » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Detecting iPhone 5 height for photo gallery module</h1>
		</header>
		<section>
			<p>I&#39;m trying to get Titanium to check for the height of the iPhone 5 in a photo gallery module for a project of mine. The code wasn&#39;t written by me, but in the photo gallery module there is a &#39;createGallery&#39; function which sets the default size for older iPhone i.e  320x480</p>
<p>Then there are if statements for iPad and Android:</p>
<pre><code class="hljs">if(VARS._platform==VARS._iPad)
    {
        x=10<span class="hljs-comment">;</span>
        defaultX=10<span class="hljs-comment">;</span>
        _imagesPerCol=5<span class="hljs-comment">;</span>
        defaultHeight=140<span class="hljs-comment">;</span>
        defaultWidth=140<span class="hljs-comment">;</span>
        defaultPadding=10<span class="hljs-comment">;</span>

        //Set default dimensions for screen
        defaultPortraitWidth=768<span class="hljs-comment">;</span>
        defaultPortraitHeight=1024<span class="hljs-comment">;</span>
        defaultLandScapeWidth=1024<span class="hljs-comment">;</span>
        defaultLandScapeHeight=768<span class="hljs-comment">;</span>

    }

    if(VARS._platform==VARS._android)
    {
        var ldp=Ti.Platform.displayCaps.logicalDensityFactor<span class="hljs-comment">;</span>
        y=10<span class="hljs-comment">;</span>
        x*=ldp<span class="hljs-comment">;</span>
        defaultX*=ldp<span class="hljs-comment">;</span>
        _imagesPerCol=4<span class="hljs-comment">;</span>
        defaultHeight*=ldp<span class="hljs-comment">;</span>
        defaultWidth*=ldp<span class="hljs-comment">;</span>
        defaultPadding*=ldp<span class="hljs-comment">;</span>

        //Set default dimmesnios for screen
        defaultPortraitWidth= Ti.Platform.displayCaps.platformWidth<span class="hljs-comment">;</span>
        defaultPortraitHeight= Ti.Platform.displayCaps.platformHeight<span class="hljs-comment">;</span>
        defaultLandScapeWidth= Ti.Platform.displayCaps.platformHeight<span class="hljs-comment">;</span>
        defaultLandScapeHeight=Ti.Platform.displayCaps.platformWidth<span class="hljs-comment">;</span>

        //Padding
        defaultPadding = (Ti.Platform.displayCaps.platformWidth-(_imagesPerCol*defaultWidth))/4<span class="hljs-comment">;</span>

    }
</code></pre><p>My question is how can I check for iPhone 5? Is there a built in API in Titanium for checking for iPhone 5? I searched the Titanium 3.0 docs for &quot;iPhone 5&quot;, but returned 0 results. </p>
<p>BTW, the rest of the app is fine because I&#39;ve included the Default-568h@2x.png start up image. It&#39;s only in the photo gallery view.</p>
<p>Thanks in advance!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 6th 2013, 1:41:36 am">April 6th 2013</span>
				by <span class='authorname'>Paul Cisneros</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>api</span></li>
					
						<li><span class='tagname'>gallery</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>iphone5</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-260195">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>The answer @mitul gave works, but it only addresses the iphone 5 height question and not the actual problem.</p>
<p>Here is a CommonJS module helper that gives you a simple way of handling this problem and a related one and example usage code.</p>
<ul>
<li><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;147129&#x2F;iphone-5-titaniumplatformdisplaycapsplatformheight.html#answer-255063">iPhone 5 …</a></li>
</ul>
<p>The other problem you have is the code you are using is doing all sorts of pointless calculations to set widths and heights based on the device and orientation that are all handled for you these days, so assuming this is old code.</p>
<p>Chances are you do NOT need to work out the height, and almost certainly not if your only requirement is for this code.</p>
<p>There is insufficient code to see what the gallery needs the dimensions for in this generic way - but you should be able to use Ti.UI.FILL for width and height.  This will fill the available space on any device in any orientation.  If you need to leave some space, still use the Ti.UI.FILL but ALSO provide a top, left, right or bottom (depending on where you need it) value with a fixed size.  This then tells the OS use all the space but leave a fixed gap.  </p>
<p>This way you do not need to specify ANY dimensions.</p>
<p>You should not and do not have to explicitly allow for every single orientation, aspect ratio and density for any device that may come on the market.  At least you no longer have to.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 6th 2013, 8:51:47 am">April 6th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/150552/detecting-iphone-5-height-for-photo-gallery-module.html#answer-260195" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the response!</p>
<p>I tried your example code here:  <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;147129&#x2F;iphone-5-titaniumplatformdisplaycapsplatformheight.html#answer-255063">link</a></p>
<p>Using your short example for the alert. It works! But I&#39;m not sure how to write the Ti.UI.FILL for the width and the height.   </p>
<p>And actually, this gap (white space at the bottom for &#39;Retina tall&#39;), is happening in a &#39;createImageWin&#39; function. Basically, this gallery creates both the grid view, scroll view and image view. When I placed the alert inside the &#39;createImageWin&#39; function it works so I know I&#39;m along the right path.</p>
<p>Would it be something like: </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> Platform = require(<span class="hljs-string">'/platform'</span>);
<span class="hljs-keyword">if</span> (Platform.isRetina()) {
    // <span class="hljs-keyword">do</span> things <span class="hljs-keyword">if</span> on a retina device
    <span class="hljs-keyword">if</span> (Platform.isTall()) {
        Ti.UI.FILL(<span class="hljs-variable">"Height:"</span>+height);
    Ti.UI.FILL(<span class="hljs-variable">"Width:"</span>+width);
    } <span class="hljs-keyword">else</span> {
        // <span class="hljs-keyword">do</span> things <span class="hljs-keyword">if</span> <span class="hljs-keyword">NOT</span> iPhone <span class="hljs-number">5</span> (tall)
    }
    // <span class="hljs-keyword">do</span> things only interested <span class="hljs-keyword">in</span> retina but <span class="hljs-keyword">not</span> the height
} <span class="hljs-keyword">else</span> {
    // <span class="hljs-keyword">do</span> things <span class="hljs-keyword">for</span> non-retina
}
</code></pre><p>This example doesn&#39;t work BTW, I tried it.</p>
<p>Also, is the <code>var Platform = require(&amp;#39;&amp;#x2F;platform&amp;#39;);</code> placed in the header, or placed each time you call?</p>
<p>Here is the code in app.js for detecting platforms. Almost straight out of the Kitchen sink:</p>
<pre><code class="hljs"><span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> {
    var osname = Ti.Platform.osname,
        version = Ti.Platform.version,
        height = Ti.Platform.displayCaps.platformHeight,
        width = Ti.Platform.displayCaps.platformWidth<span class="hljs-comment">;</span>

    Ti.API.info<span class="hljs-list">(<span class="hljs-string">"Height:"</span>+height)</span><span class="hljs-comment">;</span>
    Ti.API.info<span class="hljs-list">(<span class="hljs-string">"Width:"</span>+width)</span><span class="hljs-comment">;</span>

    var isTablet = osname === <span class="hljs-quoted">'ipad</span>' || <span class="hljs-list">(<span class="hljs-keyword">osname</span> === <span class="hljs-quoted">'android</span>' <span class="hljs-keyword">&amp;&amp;</span> <span class="hljs-list">(<span class="hljs-keyword">width</span> &gt; <span class="hljs-number">899</span> || height &gt; <span class="hljs-number">899</span>)</span>)</span><span class="hljs-comment">;</span></span>
</code></pre><p>Maybe there is a way to change this code to work out the issue in the gallery module? I understand that you are saying that this is an old method for coding. Or is it possible to change the width and height issues in the <code>if (Platform.isTall())</code> function?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 6th 2013, 7:35:27 pm">April 6th 2013</span>
											by <span class='authorname'>Paul Cisneros</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It is easier than that.</p>
<p>Some examples;</p>
<ul>
<li><strong>Basic view</strong> that expands to fill the space available of the window (in this case).  Note that this will work for all devices of all sizes in all orientations.</li>
</ul>
<pre><code class="hljs">var view = Ti.UI.createView({
    backgroundColor: <span class="hljs-string">'orange'</span>,
    <span class="hljs-variable">height</span>: Ti.UI.FILL,
    <span class="hljs-variable">width</span> Ti.UI.FILL
});
win.<span class="hljs-built_in">add</span>(view);
</code></pre><ul>
<li><strong>View with a gap of 50 at the top</strong> another view will be placed in this space - example usage would be a toolbar or button.  Again works for all devices of all sizes in all orientations.</li>
</ul>
<pre><code class="hljs">var view = Ti.UI.createView({
    backgroundColor: <span class="hljs-string">'orange'</span>,
    <span class="hljs-variable">height</span>: Ti.UI.FILL,
    top: <span class="hljs-number">50</span>,
    <span class="hljs-variable">width</span> Ti.UI.FILL
});
win.<span class="hljs-built_in">add</span>(view);
var toolbar = Ti.UI.createView({
    backgroundColor: <span class="hljs-string">'green'</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">50</span>,
    top: <span class="hljs-number">0</span>,
    <span class="hljs-variable">width</span> Ti.UI.FILL
});
win.<span class="hljs-built_in">add</span>(toolbar);
</code></pre><ul>
<li><strong>Same technique for labels</strong></li>
</ul>
<pre><code class="hljs">var lbl = Ti.UI.createLabel({
    <span class="hljs-variable">height</span>: Ti.UI.SIZE, <span class="hljs-comment">// unlike FILL, SIZE makes the label fit the available content </span>
    left: <span class="hljs-number">50</span>,
    right: <span class="hljs-number">50</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">'This is a really long label and will wrap onto more than one line, this is to show how the SIZE and left and right properties work together'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span> Ti.UI.FILL
});
win.<span class="hljs-built_in">add</span>(lbl);
</code></pre><p>You have used the <strong>Ti.UI.FILL</strong> and <strong>Ti.UI.SIZE</strong> as if they are functions - they are simply constants that the OS uses to work out the size rules.</p>
<p>Also read the answer to another question I gave before;</p>
<ul>
<li><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;148337&#x2F;how-to-achieve-same-layout-for-android-and-iphone-using-titanium">How to achieve same layout for Android and iPhone using Titanium</a></li>
</ul>
<p>This explains how to manage the different system units and end up using a single method to solve <em>most</em> of your layout issues.</p>
<p>Further information on how to handle the layouts can be found here;</p>
<ul>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Transitioning_to_the_New_UI_Layout_System">Transitioning to the New UI Layout System</a></li>
</ul>
<p>The code you have been using works on an older way of handling sizes, which has been improved and resolved a few versions back.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 6th 2013, 10:02:34 pm">April 6th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tried your code using the <code>Ti.UI.FILL</code> or <code>Ti.UI.SIZE</code>, however, I wasn&#39;t able to implement it that way in this use case. The reason is because you don&#39;t want images to be stretched in any way or else they become distorted. </p>
<p>It&#39;s different for the UI or graphics i.e. buttons, toolbar, etc..</p>
<p>I&#39;m not exactly sure how the <code>Ti.UI.SIZE</code> works, and maybe it could work in this case, but I ended up solving it this way using your platform.js module. </p>
<pre><code class="hljs">      <span class="hljs-comment">//THIS IS FOR iPhone5</span>
        <span class="hljs-keyword">var</span> <span class="hljs-keyword">Platform</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'common/platform'</span>);

         <span class="hljs-keyword">if</span> (<span class="hljs-keyword">Platform</span>.isTall()) <span class="hljs-comment">{
            //Set default dimensions for screen
            defaultPortraitWidth=320;
            defaultPortraitHeight=568;
            defaultLandScapeWidth=568;
            defaultLandScapeHeight=320;
        }</span>
</code></pre><p>This way it fills the background, centers the image without distortion. It was tricky to solve this, because as I said in my original question this issue was only for the image view within the gallery module. The grid view in the gallery module was formatted correctly as well as the rest of the app.</p>
<p>I&#39;m still marking this as the best answer, because I believe using the module was the best method. Other ways that I tried, I was unable to trigger an event (an alert in my case). </p>
<p>Thanks for the help!</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 7th 2013, 6:09:52 pm">April 7th 2013</span>
											by <span class='authorname'>Paul Cisneros</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-260183">
				
						<section>
							<p>hi,</p>
<p>you can check that with <strong>Titanium.Platform.displayCaps.platformHeight</strong>.</p>
<p>so if height is 568 then its a iphone 5 like you can use a function which checks for device </p>
<pre><code class="hljs">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isIphone5</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> height = Titanium.Platform.displayCaps.platformHeight;

    <span class="hljs-keyword">if</span>(height &gt; <span class="hljs-number">480</span>){
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 6th 2013, 3:05:28 am">April 6th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="../../question/150552/detecting-iphone-5-height-for-photo-gallery-module.html#answer-260183" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hello, I tried your code, but I was unable to implement. I&#39;m sure is does work cause it&#39;s similar to the way I solved it, however, with the accepted answer required using a module and I was able to detect iPhone 5 this way. Thanks for the help!</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 7th 2013, 5:34:54 pm">April 7th 2013</span>
											by <span class='authorname'>Paul Cisneros</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
