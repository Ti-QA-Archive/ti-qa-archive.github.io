<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium.Media.VideoPlayer crashes while playback if there is an OrientationChange of it&#39;s parent View » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium.Media.VideoPlayer crashes while playback if there is an OrientationChange of it&#39;s parent View</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I ran into a major problem while developing an IPad app.</p>
<p>I have a setup where the VideoPlayer is set in a View, which is placed inside a ScrollableView.<br>All is controlled by an orientationchange handler and event like this:</p>
<p>#</p>
<pre><code class="hljs">      Ti.Gesture.addEventListener(<span class="hljs-string">'orientationchange'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
        <span class="hljs-keyword">var</span> orientation = fnc_getOrientation(e.orientation);
        mainScrollView.scrollToView(mainScrollView.currentPage);
    });
<span class="hljs-comment">////////////</span>
      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fnc_getOrientation</span><span class="hljs-params">(orient)</span> </span>{
        <span class="hljs-keyword">switch</span> (orient) {
           <span class="hljs-keyword">case</span> Titanium.UI.PORTRAIT: <span class="hljs-keyword">return</span> <span class="hljs-string">'portrait'</span>;
           <span class="hljs-keyword">case</span> Titanium.UI.UPSIDE_PORTRAIT: <span class="hljs-keyword">return</span> <span class="hljs-string">'portrait'</span>;
           <span class="hljs-keyword">case</span> Titanium.UI.LANDSCAPE_LEFT: <span class="hljs-keyword">return</span> <span class="hljs-string">'landscape'</span>;
           <span class="hljs-keyword">case</span> Titanium.UI.LANDSCAPE_RIGHT: <span class="hljs-keyword">return</span> <span class="hljs-string">'landscape'</span>;
        }
      }
</code></pre><p>If I now have an orientationchange while the video is playing, the app crashes&#x2F;exits with no further error message and returns me to iOs.<br>If the video is paused, the orientationchange works like it should.</p>
<p>Is there a possibility to prevent it from crashing (e.g. pause video before change? Didn&#39;t get that running.)?</p>
<p>Thank you very much if you got any information for me.</p>
<p>Greetings, Leo</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 24th 2011, 1:05:35 pm">June 24th 2011</span>
				by <span class='authorname'>Leo Bergmann</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>orientation</span></li>
					
						<li><span class='tagname'>video</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-211323">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi Matt,</p>
<p>Just got the chance to check it on an IPad 1…there it works…but the simulator still crashes. Strange but I guess we can say case closed…thanks for testing it.</p>
<p>Greetings, Leo</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 24th 2011, 4:05:35 pm">June 24th 2011</span>
								by <span class='authorname'>Leo Bergmann</span><br>
								<a class="icon-bg icon-link" href="question/121555/titaniummediavideoplayer-crashes-while-playback-if-there-is-an-orientationchange-of-its-parent-view.html#answer-211323" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211302">
				
						<section>
							<p>Leo, you MUST post a full use case, along with mobile and Ti SDK for a situation like this or you cant be helped… when you post a question like this, for someone to help, they must re-create a large amount of code to &quot;fill in the blanks&quot;.</p>
<p>Not trying to sound rude, but just trying to help you get the answer you need, and in fact deserve as a Titanium developer :)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 24th 2011, 1:19:44 pm">June 24th 2011</span>
								by <span class='authorname'>Matt Apperson</span><br>
								<a class="icon-bg icon-link" href="question/121555/titaniummediavideoplayer-crashes-while-playback-if-there-is-an-orientationchange-of-its-parent-view.html#answer-211302" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211309">
				
						<section>
							<p>Hi Matt,</p>
<p>Sorry, no harm done here…just had a long day coding and wanted to get it done fast.</p>
<p>The Ti SDK is 1.6.2; iOs SDK is 4.2.</p>
<p>I just wrote a little app which reproduces the environment and the error.</p>
<p>#</p>
<pre><code class="hljs">Titanium.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);

<span class="hljs-comment">// Main Window called stage...</span>
var stage = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Das Lebende Buch'</span>,
    backgroundColor:<span class="hljs-string">'#ccc'</span>
});

<span class="hljs-comment">// Allowed Orientation Modes</span>
stage.orientationModes = [
  Titanium.UI.PORTRAIT,
  Titanium.UI.UPSIDE_PORTRAIT,
  Titanium.UI.LANDSCAPE_LEFT,
  Titanium.UI.LANDSCAPE_RIGHT
];



<span class="hljs-comment">// Landscape Content View 000</span>
var image_000_l = Titanium.UI.createImageView({
      <span class="hljs-built_in">image</span>: <span class="hljs-string">'content/image_000_l.jpg'</span>
});

view_000_l = Ti.UI.createView({
      backgroundColor:<span class="hljs-string">'#000'</span>,

      <span class="hljs-variable">width</span>: <span class="hljs-number">1024</span>,
      <span class="hljs-variable">height</span>: <span class="hljs-number">768</span>
});
view_000_l.<span class="hljs-built_in">add</span>(image_000_l);

<span class="hljs-comment">// Panorama Content View 000</span>
var image_000_p = Titanium.UI.createImageView({
  <span class="hljs-built_in">image</span>: <span class="hljs-string">'content/image_000_p.jpg'</span>
});

var view_000_p = Ti.UI.createView({
  backgroundColor:<span class="hljs-string">'#000'</span>,

  <span class="hljs-variable">width</span>: <span class="hljs-number">768</span>,
  <span class="hljs-variable">height</span>: <span class="hljs-number">1024</span>
});
view_000_p.<span class="hljs-built_in">add</span>(image_000_p);


<span class="hljs-comment">// View 000 - Keeps views for the landscape and panorama images</span>
var view_000 = Ti.UI.createView({
  backgroundColor:<span class="hljs-string">'#000'</span>
});

view_000.<span class="hljs-built_in">add</span>(view_000_l);
view_000.<span class="hljs-built_in">add</span>(view_000_p);


<span class="hljs-comment">// Landscape Content View 001</span>
var image_001_l = Titanium.UI.createImageView({
  <span class="hljs-built_in">image</span>: <span class="hljs-string">'content/image_001_l.jpg'</span>
});

var view_001_l = Ti.UI.createView({
  backgroundColor:<span class="hljs-string">'#000'</span>,

  <span class="hljs-variable">width</span>: <span class="hljs-number">1024</span>,
  <span class="hljs-variable">height</span>: <span class="hljs-number">768</span>
});
view_001_l.<span class="hljs-built_in">add</span>(image_001_l);

<span class="hljs-comment">// Panorama Content View 001</span>
var image_001_p = Titanium.UI.createImageView({
  <span class="hljs-built_in">image</span>: <span class="hljs-string">'content/image_001_p.jpg'</span>
});

var view_001_p = Ti.UI.createView({
  backgroundColor:<span class="hljs-string">'#000'</span>,

  <span class="hljs-variable">width</span>: <span class="hljs-number">768</span>,
  <span class="hljs-variable">height</span>: <span class="hljs-number">1024</span>
});
view_001_p.<span class="hljs-built_in">add</span>(image_001_p);


<span class="hljs-comment">// View 000 - Keeps views for the landscape and panorama images</span>
var view_001 = Ti.UI.createView({
    backgroundColor:<span class="hljs-string">'#000'</span>
});

view_001.<span class="hljs-built_in">add</span>(view_001_l);
view_001.<span class="hljs-built_in">add</span>(view_001_p);


<span class="hljs-comment">// Create Video View that sits on top of View 000</span>

<span class="hljs-comment">// Video View which contains the video</span>
var view_video = Titanium.UI.createView({});

<span class="hljs-comment">// Create the videoplayer</span>
var video_010 = Titanium.Media.createVideoPlayer({
      contentURL: <span class="hljs-string">'content/video.mp4'</span>,
      backgroundColor:<span class="hljs-string">'#000'</span>,
      movieControlMode:Titanium.Media.VIDEO_CONTROL_DEFAULT,
      scalingMode:Titanium.Media.VIDEO_SCALING_ASPECT_FIT
});

<span class="hljs-comment">// Add the Video to the video_view</span>
view_video.<span class="hljs-built_in">add</span>(video_010);
<span class="hljs-comment">// Add the Video to the main View</span>
view_000.<span class="hljs-built_in">add</span>(view_video);


<span class="hljs-comment">// Create the ScrollableView</span>
var scrollView = Titanium.UI.createScrollableView({
    views:[view_000, view_001],
    maxZoomScale: <span class="hljs-number">1.0</span>,
    currentPage:<span class="hljs-number">0</span>
});
<span class="hljs-comment">// Add the scrollableView to the root window</span>
stage.<span class="hljs-built_in">add</span>(scrollView);


<span class="hljs-comment">// Catch orientationchanges</span>
Ti.Gesture.addEventListener(<span class="hljs-string">'orientationchange'</span>,function(e){
        var orientation = fnc_getOrientation(e.orientation);
        <span class="hljs-keyword">if</span> (orientation == <span class="hljs-string">'portrait'</span>) {
            view_000_l.hide();
            view_001_l.hide();
            view_000_p.show();
            view_001_p.show();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orientation == <span class="hljs-string">'landscape'</span>) {
            view_000_l.show();
            view_001_l.show();
            view_000_p.hide();
            view_001_p.hide();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">//do nothing</span>
        }
});



<span class="hljs-comment">// Handle the different orientationmodes</span>
function fnc_getOrientation(orient) {
    <span class="hljs-keyword">switch</span> (orient) {
        <span class="hljs-keyword">case</span> Titanium.UI.PORTRAIT: <span class="hljs-keyword">return</span> <span class="hljs-string">'portrait'</span>;
        <span class="hljs-keyword">case</span> Titanium.UI.UPSIDE_PORTRAIT: <span class="hljs-keyword">return</span> <span class="hljs-string">'portrait'</span>;
        <span class="hljs-keyword">case</span> Titanium.UI.LANDSCAPE_LEFT: <span class="hljs-keyword">return</span> <span class="hljs-string">'landscape'</span>;
        <span class="hljs-keyword">case</span> Titanium.UI.LANDSCAPE_RIGHT: <span class="hljs-keyword">return</span> <span class="hljs-string">'landscape'</span>;
    }
}

<span class="hljs-comment">// Open window after all is created</span>
stage.<span class="hljs-built_in">open</span>({fullscreen: <span class="hljs-keyword">true</span>});
</code></pre><p>I hope this now is better to work with.</p>
<p>Thank you very much for your interest.</p>
<p>Greetings, Leo</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 24th 2011, 2:03:40 pm">June 24th 2011</span>
								by <span class='authorname'>Leo Bergmann</span><br>
								<a class="icon-bg icon-link" href="question/121555/titaniummediavideoplayer-crashes-while-playback-if-there-is-an-orientationchange-of-its-parent-view.html#answer-211309" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I just tested this code, and with 1.6.2 and 4.2 sdk on an ipad both simulator and on device it does not crash on change for me… have you tried clearing your build folder?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 24th 2011, 2:09:30 pm">June 24th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
