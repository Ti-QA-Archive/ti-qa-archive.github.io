<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Navigation Controller module and activity lifecycle » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Navigation Controller module and activity lifecycle</h1>
		</header>
		<section>
			<p>I found a situation about using navigation controller, Here&#39;s my sample codes<br>app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> NavigationController = <span class="hljs-keyword">require</span>(<span class="hljs-string">'NavigationController'</span>).NavigationController;
<span class="hljs-keyword">var</span> navigationController = <span class="hljs-keyword">new</span> NavigationController();
<span class="hljs-keyword">var</span> isAndroid = (Ti.Platform.osname === <span class="hljs-string">'android'</span>? <span class="hljs-keyword">true</span> : <span class="hljs-keyword">false</span>);
<span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'#000'</span>, title: <span class="hljs-string">'home window'</span>
});
<span class="hljs-keyword">var</span> b = Ti.UI.createButton({
    title: <span class="hljs-string">'open'</span>, width: <span class="hljs-number">100</span>, height: <span class="hljs-number">80</span>
});
b.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    Ti.<span class="hljs-keyword">include</span>(<span class="hljs-string">'newWin.js'</span>);
    navigationController.open(newWindow());
});
<span class="hljs-keyword">if</span>(isAndroid){
    <span class="hljs-keyword">var</span> activity = Ti.Android.currentActivity;
    [<span class="hljs-string">'create'</span>, <span class="hljs-string">'destroy'</span>, <span class="hljs-string">'pause'</span>, <span class="hljs-string">'resume'</span>, <span class="hljs-string">'start'</span>, <span class="hljs-string">'stop'</span>].<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        activity.addEventListener(e, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            Ti.API.info(<span class="hljs-string">"!!!!MAIN Activity: "</span> + e + <span class="hljs-string">" HIT!!!!"</span>);
        })
    });
}
win.add(b);
navigationController.open(win);
</code></pre><p>newWin.js</p>
<pre><code class="hljs"><span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span><span class="hljs-collection">{
    newWindow = function<span class="hljs-list">()</span><span class="hljs-collection">{
        var win = Ti.UI.createWindow<span class="hljs-list">(<span class="hljs-collection">{
            backgroundColor: 'blue', title: 'new window'
        }</span>)</span><span class="hljs-comment">;</span>
        var b = Ti.UI.createButton<span class="hljs-list">(<span class="hljs-collection">{
            title: 'close', width: <span class="hljs-number">100</span>, height: <span class="hljs-number">80</span>
        }</span>)</span><span class="hljs-comment">;</span>
        b.addEventListener<span class="hljs-list">(<span class="hljs-keyword">'click'</span>, function<span class="hljs-list">()</span><span class="hljs-collection">{
            navigationController.back<span class="hljs-list">()</span><span class="hljs-comment">;</span>
        }</span>)</span><span class="hljs-comment">;</span>
        win.add<span class="hljs-list">(<span class="hljs-keyword">b</span>)</span><span class="hljs-comment">;</span>
        if<span class="hljs-list">(<span class="hljs-keyword">isAndroid</span>)</span><span class="hljs-collection">{
            var activity = Ti.Android.currentActivity;
            <span class="hljs-collection">['create', 'destroy', 'pause', 'resume', 'start', 'stop']</span>.forEach<span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> <span class="hljs-collection">{
                activity.addEventListener<span class="hljs-list">(<span class="hljs-keyword">e</span>, function<span class="hljs-list">()</span> <span class="hljs-collection">{
                    Ti.API.info<span class="hljs-list">(<span class="hljs-string">"!!!!NEW Activity: "</span> + e + <span class="hljs-string">" HIT!!!!"</span>)</span><span class="hljs-comment">;</span>
                }</span>)</span>
            }</span>)</span><span class="hljs-comment">;</span>
        }</span>
        return win;
    }</span>
}</span>)</span><span class="hljs-list">()</span><span class="hljs-comment">;</span>
</code></pre><p>NavigationController.js</p>
<pre><code class="hljs">exports.NavigationController = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.windowStack = [];
};

exports.NavigationController.prototype.open = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-comment">/*Ti.UI.Window*/</span>windowToOpen</span>) </span>{
    <span class="hljs-comment">//add the window to the stack of windows managed by the controller</span>
    <span class="hljs-keyword">this</span>.windowStack.push(windowToOpen);
    <span class="hljs-comment">//grab a copy of the current nav controller for use in the callback</span>
    <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
    windowToOpen.navBarHidden = windowToOpen.navBarHidden || <span class="hljs-literal">false</span>;
    <span class="hljs-comment">//This is the first window</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.windowStack.length === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">if</span>(Ti.Platform.osname === <span class="hljs-string">'android'</span>) {
            windowToOpen.exitOnClose = <span class="hljs-literal">true</span>;
            windowToOpen.open();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.navGroup = Ti.UI.iPhone.createNavigationGroup({
                <span class="hljs-built_in">window</span> : windowToOpen
            });
            <span class="hljs-keyword">var</span> containerWindow = Ti.UI.createWindow();
            containerWindow.add(<span class="hljs-keyword">this</span>.navGroup);
            containerWindow.open();
        }
    }
    <span class="hljs-comment">//All subsequent windows</span>
    <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span>(Ti.Platform.osname === <span class="hljs-string">'android'</span>) {
            windowToOpen.open();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.navGroup.open(windowToOpen);
        }
    }
    Ti.API.info(<span class="hljs-string">'OPEN trigerred, there are '</span> + <span class="hljs-keyword">this</span>.windowStack.length + <span class="hljs-string">' windows in the stack'</span>);
};
<span class="hljs-comment">//go back to the initial window of the NavigationController</span>
exports.NavigationController.prototype.home = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">//store a copy of all the current windows on the stack</span>
    <span class="hljs-keyword">var</span> windows = <span class="hljs-keyword">this</span>.windowStack.concat([]);
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>, l = windows.length; i &lt; l; i++) {
        (<span class="hljs-keyword">this</span>.navGroup) ? <span class="hljs-keyword">this</span>.navGroup.close(windows[i]) : windows[i].close();
        windows[i] = <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">this</span>.windowStack = [<span class="hljs-keyword">this</span>.windowStack[<span class="hljs-number">0</span>]]; <span class="hljs-comment">//reset stack</span>
    Ti.API.info(<span class="hljs-string">'HOME trigerred, there are '</span> + windows.length + <span class="hljs-string">' windows in the stack'</span>);
};
exports.NavigationController.prototype.back = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">//store a copy of all the current windows on the stack</span>
    <span class="hljs-keyword">var</span> windows = <span class="hljs-keyword">this</span>.windowStack.pop();
    (<span class="hljs-keyword">this</span>.navGroup) ? <span class="hljs-keyword">this</span>.navGroup.close(windows) : windows.close();
    windows = <span class="hljs-literal">null</span>;
    Ti.API.info(<span class="hljs-string">'BACK trigerred, there are '</span> + <span class="hljs-keyword">this</span>.windowStack.length + <span class="hljs-string">' windows in the stack'</span>);
};
</code></pre><p>back function in NavigationController.js is add by I, rest part is from forging Titanium. The first question is…should I use this back function, or just use android&#39;s back button to close windows?</p>
<p>This sample does open a new window from app.js by <code>navigationController.open(newWindow());</code>then close it by the button in new window <code>navigationController.back();</code>. At beginning, the MAIN activity triggers &quot;stop&quot; ?? Shouldn&#39;t it stay in &quot;start&quot;?</p>
<pre><code class="hljs"><span class="hljs-variable">D</span>/<span class="hljs-variable">TiAssetHelper</span>(  <span class="hljs-number">336</span>): <span class="hljs-variable">Fetching</span> <span class="hljs-string">"app.js"</span> <span class="hljs-function_or_atom">with</span> <span class="hljs-variable">Fastdev</span>...
<span class="hljs-variable">D</span>/<span class="hljs-variable">Module</span>  (  <span class="hljs-number">336</span>): <span class="hljs-variable">Loading</span> <span class="hljs-function_or_atom">module</span>: <span class="hljs-variable">NavigationController</span> <span class="hljs-arrow">-&gt;</span> <span class="hljs-variable">Resources</span>/<span class="hljs-variable">NavigationController</span>.<span class="hljs-function_or_atom">js</span>
<span class="hljs-variable">D</span>/<span class="hljs-variable">TiAssetHelper</span>(  <span class="hljs-number">336</span>): <span class="hljs-variable">Fetching</span> <span class="hljs-string">"NavigationController.js"</span> <span class="hljs-function_or_atom">with</span> <span class="hljs-variable">Fastdev</span>...
<span class="hljs-variable">I</span>/<span class="hljs-variable">ActivityManager</span>(   <span class="hljs-number">60</span>): <span class="hljs-variable">Starting</span> <span class="hljs-function_or_atom">activity</span>: <span class="hljs-variable">Intent</span> { <span class="hljs-function_or_atom">cmp</span>=<span class="hljs-function_or_atom">com</span>.<span class="hljs-function_or_atom">life</span>.<span class="hljs-function_or_atom">cycle</span>/<span class="hljs-function_or_atom">org</span>.<span class="hljs-function_or_atom">appcelerator</span>.<span class="hljs-function_or_atom">titanium</span>.<span class="hljs-variable">TiActivity</span> (<span class="hljs-function_or_atom">has</span> <span class="hljs-function_or_atom">extras</span>) }
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-variable">OPEN</span> <span class="hljs-function_or_atom">trigerred</span>, <span class="hljs-function_or_atom">there</span> <span class="hljs-function_or_atom">are</span> <span class="hljs-number">1</span> <span class="hljs-function_or_atom">windows</span> <span class="hljs-function_or_atom">in</span> <span class="hljs-function_or_atom">the</span> <span class="hljs-function_or_atom">stack</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">MAIN</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">create</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">MAIN</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">start</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiRootActivity</span>(  <span class="hljs-number">336</span>): (<span class="hljs-function_or_atom">main</span>) [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>] <span class="hljs-function_or_atom">checkpoint</span>, <span class="hljs-function_or_atom">on</span> <span class="hljs-function_or_atom">root</span> <span class="hljs-function_or_atom">activity</span> <span class="hljs-function_or_atom">resume</span>. <span class="hljs-function_or_atom">activity</span> = <span class="hljs-function_or_atom">com</span>.<span class="hljs-function_or_atom">life</span>.<span class="hljs-function_or_atom">cycle</span>.<span class="hljs-variable">LifecycleActivity</span>@<span class="hljs-number">43e36</span>aa0
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">MAIN</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">resume</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">MAIN</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">D</span>/<span class="hljs-variable">TiUIView</span>(  <span class="hljs-number">336</span>): (<span class="hljs-function_or_atom">main</span>) [<span class="hljs-number">222</span>,<span class="hljs-number">222</span>] <span class="hljs-variable">Nativeview</span> <span class="hljs-function_or_atom">is</span> <span class="hljs-function_or_atom">null</span>
<span class="hljs-variable">D</span>/<span class="hljs-variable">TiUIView</span>(  <span class="hljs-number">336</span>): (<span class="hljs-function_or_atom">main</span>) [<span class="hljs-number">67</span>,<span class="hljs-number">289</span>] <span class="hljs-variable">Nativeview</span> <span class="hljs-function_or_atom">is</span> <span class="hljs-function_or_atom">null</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">ActivityManager</span>(   <span class="hljs-number">60</span>): <span class="hljs-variable">Displayed</span> <span class="hljs-function_or_atom">activity</span> <span class="hljs-function_or_atom">com</span>.<span class="hljs-function_or_atom">life</span>.<span class="hljs-function_or_atom">cycle</span>/<span class="hljs-function_or_atom">org</span>.<span class="hljs-function_or_atom">appcelerator</span>.<span class="hljs-function_or_atom">titanium</span>.<span class="hljs-variable">TiActivity</span>: <span class="hljs-number">393</span> <span class="hljs-function_or_atom">ms</span> (<span class="hljs-function_or_atom">total</span> <span class="hljs-number">5429</span> <span class="hljs-function_or_atom">ms</span>)
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">MAIN</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
</code></pre><p>when I repeat open and close newWindow, the messages shows<br>1st turn:</p>
<pre><code class="hljs"><span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">start</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">resume</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
</code></pre><p>where is the new window created from and where is destroy?<br>In 2ns turn:</p>
<pre><code class="hljs"><span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">start</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">start</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">resume</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">resume</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
</code></pre><p>those events doubled!!<br>and tripled in 3rd turn:</p>
<pre><code class="hljs"><span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">start</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">start</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">start</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">resume</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">resume</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">resume</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
</code></pre><p>Is it normal?<br>and these windows (activities?) will destroyed when I close the MAIN window:</p>
<pre><code class="hljs"><span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">MAIN</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">destroy</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">pause</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">stop</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">destroy</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">destroy</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
<span class="hljs-variable">I</span>/<span class="hljs-variable">TiAPI</span>   (  <span class="hljs-number">336</span>): <span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-variable">NEW</span> <span class="hljs-variable">Activity</span>: <span class="hljs-function_or_atom">destroy</span> <span class="hljs-variable">HIT</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span><span class="hljs-exclamation_mark">!</span>
</code></pre><p>Are there any misunderstandings for me to use navigation controller?<br>By the way, I can get win.activity in this sample…<br>I am using Titanium 1.8.2 (2012&#x2F;02&#x2F;29 14:02 28f9b09), Google API 2.2 on win7.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 6th 2012, 4:01:33 am">April 6th 2012</span>
				by <span class='authorname'>Jace Su</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>activity</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>navigationcontroller</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-235509">
				
						<section>
							<p>Don&#39;t use activities, use heavyweight windows on Android. Every new heavyweight window creates new activity that can be closed with back button. So, when window opens, add it to the stack, when it closes, remove it from the stack.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 8th 2012, 10:03:52 am">April 8th 2012</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="question/135001/navigation-controller-module-and-activity-lifecycle.html#answer-235509" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Also, don&#39;t use window &quot;url&quot;s, that approach is buggy. Use CommonJS.</p>
<p>And that ForgingTitanium episode has some issue on Android regarding usage of global variables that is not permitted in CommonJS. If you need help with that, let me know. :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 8th 2012, 10:05:46 am">April 8th 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I am a little confusing in using commonJS, so I am using <code>Ti.include()</code> to include js of a function to return a window so far. The individual js for each window is defined as format below:</p>
<pre><code class="hljs">(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    newWindow = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> win = Ti.UI.createWindow();
    ...
    ...
    <span class="hljs-keyword">return</span> win;
    };
})();
</code></pre><p>when I need to transit to another window, I will include the js the open it as:</p>
<pre><code class="hljs">butt.addEventListener(<span class="hljs-symbol">'click'</span>, function<span class="hljs-literal">()</span>{
    <span class="hljs-type">Ti</span>.<span class="hljs-keyword">include</span>(<span class="hljs-symbol">'newWin</span>.js');
    navigationController.<span class="hljs-keyword">open</span>(newWindow<span class="hljs-literal">()</span>);
});
</code></pre><p>Does it work the same as commonJS? or should I convert this form to exports.XXX?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 8th 2012, 10:33:10 pm">April 8th 2012</span>
											by <span class='authorname'>Jace Su</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>&quot;Ti.include&quot; basically copy-pastes included source code (possibly multiple times ;) ). CommonJS&#39;s &quot;require&quot; function on the other hand returns exported object (required file is evaluated just first time).</p>
<p>You just need to export &quot;newWindow&quot; function (for example):</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> newWin = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">//implementation</span>
};

<span class="hljs-built_in">module</span>.exports = newWin;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 10th 2012, 5:12:45 am">April 10th 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Ivan,<br>I&#39;m using NavigationController too, In the last window I have to use Intent to open qrcode reader.<br>Even if it correctly read the qrcode, onReaderEnd function isn&#39;t executed:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> onQRButtonClick = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
<span class="hljs-keyword">var</span> intent = Ti.Android.createIntent({action: <span class="hljs-string">"com.google.zxing.client.android.SCAN"</span>,
       packageName: <span class="hljs-string">"com.google.zxing.client.android"</span>});
   intent.putExtra(<span class="hljs-string">"SCAN_MODE"</span>, <span class="hljs-string">"QR_CODE_MODE"</span>);
   Ti.Android.currentActivity.startActivityForResult(intent, onReaderEnd);
};
</code></pre><p>If i don&#39;t use NavigationController it works.<br>How can I fix this problem?</p>
<p>Thanks a lot</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2012, 6:16:15 am">November 20th 2012</span>
											by <span class='authorname'>Silvia Zobele</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
