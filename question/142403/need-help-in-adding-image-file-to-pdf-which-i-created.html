<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Need help in adding image file to pdf which I created Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Need help in adding image file to pdf which I created</h1>
		</header>
		<section>
			<p>Hi All,</p>
<p>I am doing development in iPhone , using latest titanium sdk 2.1.1.</p>
<p>I am using <a href="http:&#x2F;&#x2F;code.google.com&#x2F;p&#x2F;jspdf&#x2F;">jspdf</a> to generate pdf file , but the problem is I can only make  pdf which include only text content , and unable to include images in PDF , Please help me to do this , or please provide me solution of how to make pdf using combination of text and images.</p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 19th 2012, 11:11:42 am">September 19th 2012</span>
				by <span class='authorname'>Moiz Chhatriwala</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>create</span></li>
					
						<li><span class='tagname'>genrate</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>pdf</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>4</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-251812">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi </p>
<p>I have a working prototype and hope to have it ready to share within 24 hours.  I am having to rewrite portions of the original library to allow images to work.</p>
<p>I am using the latest version of the library so everything is as up to date as possible and the library does seem reasonably feature complete.</p>
<p>Fingers crossed</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 28th 2012, 6:45:55 am">November 28th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/142403/need-help-in-adding-image-file-to-pdf-which-i-created#answer-251812" rel="permalink">permalink</a>
							</div>

							<h5>17 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thats great News :)<br>Thanks , I know you can do it :)))</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 28th 2012, 8:46:06 am">November 28th 2012</span>
											by <span class='authorname'>Moiz Chhatriwala</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Looking forward to seeing it Malcolm.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 28th 2012, 12:03:50 pm">November 28th 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Quick Update:</p>
<p>The whole thing works perfectly and inserts images wherever needed using the same syntax as original jSPDF library.</p>
<p>I am currently re-factoring the code in order to provide the solution as a plug-in using the jsPDF plug-in syntax. This is so as few changes (hopefully none) are required to the original library.  This is to allow upgrades to the original library without breaking the Titanium image support I have built.</p>
<p>In order to get this far I have already created multiple versions using a variety of techniques, the one I am using now is actually surprisingly simple.</p>
<p>So whilst not currently ready it will be very shortly.</p>
<p>I will be providing the code as a private beta for a limited number of people (max 10) on a first come first served basis.  This is in order to focus the bug checking before making it freely available.  Anyone interested send me a <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;devlink&#x2F;profile&#x2F;427941&#x2F;malcolm-hollingsworth">devmail</a> and if you are early enough I will let you have the beta code to check.</p>
<p>Yes Moiz you are first on the list and I assume Dan Williams and Anthony Decena are interested in the beta code as well.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 29th 2012, 10:01:57 pm">November 29th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I know you can solve this problem as you are life saver for many peoples . :)</p>
<p>Please provide me the pdf plugin which you have created , so that I can have look into it .</p>
<p>Thank you very much.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 30th 2012, 12:32:03 am">November 30th 2012</span>
											by <span class='authorname'>Moiz Chhatriwala</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi</p>
<p>Have you had any luck with this yet?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 3rd 2012, 7:56:43 am">December 3rd 2012</span>
											by <span class='authorname'>Dan Williams</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Dan</p>
<p>Yes an update would be useful.</p>
<p>I have the process working perfectly, uses the existing core jspdf.js library and a slightly modified addimage plugin.</p>
<p>However at the moment it requires running a function at the end of the process.  Which is fine but I would prefer that it is done using the existing plugin framework that jspdf uses and adds a new verb <strong>save</strong>.</p>
<p>This would then mean you simple add <strong>doc.save(filename)</strong>.  But thus far I am having problems accessing the verb <strong>output</strong> from the plugin without spurious errors.</p>
<p>I will wrap up the version using the function and send it to you and Moiz, maybe you could look at the save plugin I have been playing with and see if you get better luck.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 3rd 2012, 8:15:11 am">December 3rd 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>New update.</p>
<p>I have a working beta version which DOES use the jsPDF plugin system.  Those who have asked for beta versions have been sent emails.  Anthony if you want to see it - I need an email address - just devmail me if you are interested.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 3rd 2012, 9:31:59 am">December 3rd 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>that&#39;s great, many thanks. I&#39;ll give it a go and let you know how i get on.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 3rd 2012, 9:52:26 am">December 3rd 2012</span>
											by <span class='authorname'>Dan Williams</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi, just to let you know this is working like a charm. Many thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 3rd 2012, 11:40:19 am">December 3rd 2012</span>
											by <span class='authorname'>Dan Williams</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Many thanks again for this!, the component works great, although I have experimented some issues with images when I open the .pdf with Adobe Reader, anyone else?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 22nd 2013, 12:32:25 pm">July 22nd 2013</span>
											by <span class='authorname'>Pablo Sierra</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Send me an example and how it does not work as expected.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 22nd 2013, 12:37:07 pm">July 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks!!, I&#39;ll send an example to you :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 22nd 2013, 1:00:47 pm">July 22nd 2013</span>
											by <span class='authorname'>Pablo Sierra</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcom, I sent you a devmail, but I didn&#39;t get a response. Are you still working on this? do you plan to make it public?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 12th 2013, 1:22:53 pm">September 12th 2013</span>
											by <span class='authorname'>Victor Medina</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcolm,</p>
<p>Just sent you a devmail - looking forward to hearing from you on this subject.</p>
<p>Cheers,<br>&#x2F;&#x2F;MD</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 25th 2013, 4:57:22 pm">October 25th 2013</span>
											by <span class='authorname'>atypical co</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Project is now available on git and will shortly be updated to 1.0;</p>
<p><a href="https:&#x2F;&#x2F;github.com&#x2F;Core-13">github.com&#x2F;Core-13</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="January 22nd 2014, 11:11:39 am">January 22nd 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>unable to create pdf file from blob object example vw.toImage().</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 17th 2014, 4:19:16 am">November 17th 2014</span>
											by <span class='authorname'>sandeep kudale</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi  Malcolm,</p>
<p>I tried using jsPDF-image-support in my titanium application. Works great on both IOS and android. Thanks for the modification you have done on jsPDF.</p>
<p>I am facing an issue when using when trying to add the image from the webview. I am doing a webview.toImage() to get the image of the chart that is loaded to a webview. I am using highcharts for charts.  I get the image from the webview. I have verified it by putting it to an another image view. But when I try to use the same webview.toImage() in addImage method using </p>
<p>doc.addImage(view, &#39;JPEG&#39;, 10, 20, 128, 96);</p>
<p>It doesn&#39;t seem to that image. I am missing something</p>
<p>Any help is highly appreciated.<br>Thanks in advance</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 17th 2015, 11:56:49 am">March 17th 2015</span>
											by <span class='authorname'>Geervani BS</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247546">
				
						<section>
							<p>A few things here. When you have a problem with a 3rd party library, the proper way to handle issues would be to first contact the author of that library. They will more than likely be the best source to resolving your issues.</p>
<p>It looks like you downloaded JSPDF from a Google code repository where the latest zip was built in 2009. 2009?!?! Thats like 100 years in javascript years. I&#39;m sure if you were to contact the author he would tell you that the Google code repo was very old, and that you could get the latest code from his <a href="https:&#x2F;&#x2F;github.com&#x2F;MrRio&#x2F;jsPDF">GitHub Repo</a>. Then, I&#39;m sure he would tell you that you can see code demos on his <a href="http:&#x2F;&#x2F;jspdf.com&#x2F;">Demo Page</a>, on which the Image demo is in the Graphic Elements tab at the very bottom.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 19th 2012, 12:31:01 pm">September 19th 2012</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/142403/need-help-in-adding-image-file-to-pdf-which-i-created#answer-247546" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks  Anthony , but this demo does not work on images , If we need to add images to pdf we can&#39;t do with help of this demo.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2012, 6:26:08 pm">November 27th 2012</span>
											by <span class='authorname'>Moiz Chhatriwala</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I actually haven&#39;t seen any successful images added to a Titanium app using this lib. I think its because the image adding function uses the js new Image() method. Since there is no document object in a titanium app, there is no way to add this image to the app. The library would need to be modified in order to facilitate the addition of images in the pdf.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2012, 6:33:21 pm">November 27th 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Is there any other way to get this done , can you suggest any alternative to do this , because I am trying to get it do from a long time.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 28th 2012, 4:44:55 am">November 28th 2012</span>
											by <span class='authorname'>Moiz Chhatriwala</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Anthony, I have worked out how to achieve it in principle, see answer below.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 28th 2012, 6:47:02 am">November 28th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;d be interested to know if you&#39;ve managed to get this working too?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 29th 2012, 2:08:29 pm">November 29th 2012</span>
											by <span class='authorname'>Dan Williams</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Dan Williams,</p>
<p>I read your comment about the jsPDF image generation success info pdf file and felt happy that the issue is solvable now.Kindly can you please share that with me as well.email is available if you want.Thanks Dan</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 5th 2012, 8:21:29 am">December 5th 2012</span>
											by <span class='authorname'>Ali Akram</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Ali</p>
<p>I am not sure you have read this thread correctly as you have commented on the wrong answer and asked Dan to provide his work.  Whilst Dan has kindly performed testing on the library I have put together he was not responsible for the work.</p>
<p>It might be an idea to to re-read the answers - note how much work has gone into it and by who and then ask that person (ME) if you could join the jsPDF with Ti.image support beta - which is by invite only at the moment whilst testing is going on.</p>
<p>If you do want to be included you will need to turn on your devmail option in your Titanium profile and ask in the correct answer please.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 5th 2012, 8:33:27 am">December 5th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><h2 id="hi-malcolm-">Hi malcolm ,</h2>
<p>I am interested to, get register myself into your beta for this module.I have sent you email through devmail.Please  add me to the list and let me know with some good news.<br>Thanks Malcolm for you assistance.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 10th 2012, 3:00:13 am">December 10th 2012</span>
											by <span class='authorname'>Ali Akram</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcolm,<br>The beta is woking fine and hope it will be better more in coming days.Great effort.Thanks a lot.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 11th 2012, 3:00:15 am">December 11th 2012</span>
											by <span class='authorname'>Ali Akram</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-253702">
				
						<section>
							<p>See <a href="http:&#x2F;&#x2F;factisresearch.blogspot.de&#x2F;2012&#x2F;12&#x2F;templated-pdf-printing-for-appcelerator.html">this</a> article and referred code:</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 1st 2013, 6:05:28 pm">January 1st 2013</span>
								by <span class='authorname'>Fabian Schuetz</span><br>
								<a class="icon-bg icon-link" href="question/142403/need-help-in-adding-image-file-to-pdf-which-i-created#answer-253702" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Fabian</p>
<p>For most developers using the layout system of the jsPDF library is very easy and not at all cumbersome.  I am interested to know how using HTML web pages to layout elements is any easier when you still have to create web pages that have inherit layout that you could have programmatically created with the jsPDF library..</p>
<p>Do you have an example of the PDF created using the code you have proposed?  Does the resulting render as an image or native vector based elements?</p>
<p>I see this is iOS only, do you have plans for an Android or Blackberry version?</p>
<p>I am not sure if you spotted in the comments but I have a working version of the jsPDF library with full image support without any modules so it works cross platform.  Let me know if you are interested in having a play.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 1st 2013, 6:33:10 pm">January 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcom,</p>
<p>I think HTML templating is a well-known, well-documented and wide-spread<br>approach to layouting. For my part, I would definitely prefer creating a document<br>with these techniques, i.e. HTML and CSS, than with some library, that might<br>or might not turn out to suit my needs in the end. </p>
<p>However it is great you got your solution to work, as of course it is platform<br>independent and mine is not. I was actually thinking about creating an implementation<br>of my solution for Android as well, but unfortunately my app won&#39;t run on Android.<br>I have already posted bugs about that on jira. </p>
<p>So yeah. An Android solution will most likely come, but I do not have plans for a<br>Blackberry solution.</p>
<p>Having a play? Don&#39;t really understand what you mean, but sure :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 1st 2013, 6:47:14 pm">January 1st 2013</span>
											by <span class='authorname'>Fabian Schuetz</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry - my comments were not meant negatively, I was asking what benefits you see in html layout as opposed to programmatic.  Obviously we are coming at it from two different directions so I was after your thoughts.</p>
<p>The &quot;..having a play..&quot; was part of the there is a JS version - did you want a copy to have a playe with?  I know what you said about preferring HTML layouts, but thought I would offer.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 1st 2013, 6:55:24 pm">January 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just got your email with the PDF, that is great - works a treat and my concerns that the routine would render a graphic were unfounded - renders text as text.</p>
<p>Good work.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 1st 2013, 7:03:20 pm">January 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No offense taken. About &#39;having a play&#39;. You already gave me your JS solution and I tried It. Problem for me was, that I have HTML strings in a database that have to be added to the PDF. I do not create this data and it is no further specified than being HTML. So I definitely need a means to add HTML to a PDF document, as I don&#39;t see a chance to extract fields from an a basically unknown HTML string.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 1st 2013, 7:04:48 pm">January 1st 2013</span>
											by <span class='authorname'>Fabian Schuetz</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hello guys, can anyone please send me a copy of the jsPDF working with images?  I really need this, and have been asking around for a while now.  Your help&#x2F;assistance is highly appreciated.</p>
<p>Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2014, 10:09:13 pm">January 21st 2014</span>
											by <span class='authorname'>Paulo Dichone</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have not really done much with the code since it was originally created, the idea was that people would take the code from GitHub and do with it as they pleased.</p>
<p>There have been a two main issues people have brought up so here is the answer to both;</p>
<ul>
<li><p>The images look weird of corrupted on desktop devices</p>
<ul>
<li>This is because the dimensions and size were not added in correctly but the devices never had an issue so it was not spotted.  I will be posting an update to the GitHub account in the next couple of days for an already tested workaround.</li>
<li>This will require you knowing the pixel width and height and size in bytes for any images you add in order to include them as those are now required values.</li>
<li>You can of course write a routine to determine those but as EXIF is less than guaranteed  you might have to rely on loading them into memory and checking the answers - this is an async process which means it cannot be performed in-line so this is a process you will need to resolve before passing the values to the new addImage method.</li>
</ul>
</li>
<li><p>Support for PNG images</p>
<ul>
<li>As PDF has no built into support for PNG this is not possible.  You may have used PDF creation tools that accept PNG images, but these are converted to JPG images before being inserted.</li>
<li>So if you wish to include something that is a PNG - you will have to convert it to a JPG image and then add that image instead.</li>
<li>This is NOT a limitation of the routine or the jsPDF solution it is simply a lack of support within the PDF spec.</li>
</ul>
</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2015, 1:54:25 pm">July 7th 2015</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-287773">
				
						<section>
							<p>Hi Malcolm,</p>
<p>I have the same problem adding the multiple images(scroll view) to a pdf file. The pdf file is getting created but when i open it, it is corrupted.<br>Can you help me in fixing this issue.</p>
<p>Regards,<br>Renuka Prasad H N</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 7th 2015, 4:32:30 am">July 7th 2015</span>
								by <span class='authorname'>Renuka Prasad H N</span><br>
								<a class="icon-bg icon-link" href="question/142403/need-help-in-adding-image-file-to-pdf-which-i-created#answer-287773" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This and your other &#39;answer&#39; are really comment so should have been added to the original answer as follow ups - it gets really confusing otherwise.is</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2015, 1:45:28 pm">July 7th 2015</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcolm,</p>
<p>I&#39;m able to get the jpg images but the problem is appending the image to pdf is not working. I&#39;m trying<br>to append the images generated dynamically in the applicationDataDirectory to the pdf. I&#39;m getting 4<br>different jpg images in applicationDataDirectory.</p>
<p>This is what i&#39;m doing in app.js</p>
<p>var _jsPDF = require(&#39;.&#x2F;jsPDFMod&#x2F;TiJSPDF&#39;);</p>
<p>var _isAndroid = Ti.Platform.osname === &#39;android&#39;;</p>
<p>var _tempFile = null;</p>
<p>(function() {<br>    var win = Ti.UI.createWindow({<br>        backgroundColor : &#39;#eee&#39;,<br>        height : Ti.UI.FILL,<br>        layout : &#39;vertical&#39;,<br>        title : &#39;jsPDF Sample&#39;,<br>        width : Ti.UI.FILL<br>    });</p>
<pre><code class="hljs">var webView = Ti.UI.createWebView({
    <span class="hljs-string">height :</span> <span class="hljs-string">"90%"</span>,
    <span class="hljs-string">width :</span> <span class="hljs-string">"100%"</span>,
    <span class="hljs-string">top :</span> <span class="hljs-string">"0%"</span>,
    <span class="hljs-string">url :</span> <span class="hljs-string">'http://www.msn.com'</span>
});

win.add(webView);

var btn = Ti.UI.createButton({
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">height :</span> <span class="hljs-string">"10%"</span>,
    <span class="hljs-string">title :</span> <span class="hljs-string">'Run PDF Sample'</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">20</span>,
    <span class="hljs-string">right :</span> <span class="hljs-number">20</span>,
    <span class="hljs-string">bottom :</span> <span class="hljs-number">5</span>,
    <span class="hljs-string">width :</span> Ti.UI.FILL
});
win.add(btn);

btn.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
    var doc = <span class="hljs-keyword">new</span> _jsPDF();
    doc.setProperties({
        <span class="hljs-string">title :</span> <span class="hljs-string">'Title'</span>,
        <span class="hljs-string">subject :</span> <span class="hljs-string">'This is the subject'</span>,
        <span class="hljs-string">author :</span> <span class="hljs-string">'John Doe'</span>,
        <span class="hljs-string">keywords :</span> <span class="hljs-string">'one, two, three'</span>,
        <span class="hljs-string">creator :</span> <span class="hljs-string">'Someone'</span>
    });
    var i = <span class="hljs-number">1</span>;


    var id = setInterval(function() {
        var screenShot = webView.toImage();
        Ti.API.info(<span class="hljs-string">'scroll to'</span> + (<span class="hljs-number">768</span> * i));
        <span class="hljs-comment">//since webView is scrollable we are taking 4 different images by scrolling </span>
        webView.evalJS(<span class="hljs-string">'window.scrollTo(0,'</span> + (<span class="hljs-number">768</span> * i) + <span class="hljs-string">')'</span>);

        i = i + <span class="hljs-number">1</span>;
        var screenShot = webView.toImage();
        Ti.API.info(<span class="hljs-string">'scroll to'</span> + (<span class="hljs-number">768</span> * i));
        webView.evalJS(<span class="hljs-string">'window.scrollTo(0,4608)'</span>);

        var filename = <span class="hljs-keyword">new</span> Date().getTime() + <span class="hljs-number">1</span> + <span class="hljs-string">".jpg"</span>; <span class="hljs-comment">//converting to jpg image</span>

        var f = Titanium.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, filename);

        f.write(screenShot);

        doc.addImage(f, <span class="hljs-string">'JPEG'</span>, <span class="hljs-number">15</span>, <span class="hljs-number">40</span>, <span class="hljs-number">180</span>, <span class="hljs-number">180</span>); <span class="hljs-comment">//adding the image to pdf</span>

        var res = doc.output();
        Ti.API.info(<span class="hljs-string">'file size::::'</span> + f.size);

        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">5</span>) {
            clearInterval(id);

            var timeStampName = <span class="hljs-keyword">new</span> Date().getTime();
            <span class="hljs-keyword">if</span> (_tempFile != <span class="hljs-literal">null</span>) {
                _tempFile.deleteFile();
            }

            _tempFile = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, timeStampName + <span class="hljs-string">'.pdf'</span>);
            _tempFile.write(res);
            <span class="hljs-comment">//doc.save(_tempFile);</span>


            <span class="hljs-keyword">if</span> (_isAndroid) {
                var intent = Ti.Android.createIntent({
                    <span class="hljs-string">action :</span> Ti.Android.ACTION_VIEW,
                    <span class="hljs-string">type :</span> <span class="hljs-string">"application/pdf"</span>,
                    <span class="hljs-string">data :</span> _tempFile.nativePath
                });

                <span class="hljs-keyword">try</span> {
                    Ti.Android.currentActivity.startActivity(intent);
                } <span class="hljs-keyword">catch</span>(e) {
                    Ti.API.debug(e);
                    alert(<span class="hljs-string">'You have no apps on your device that can open PDFs. Please download one from the marketplace.'</span>);
                }
            } <span class="hljs-keyword">else</span> {

                var winPDF = Ti.UI.createWindow({
                    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#eee'</span>,
                    <span class="hljs-string">height :</span> Ti.UI.FILL,
                    <span class="hljs-string">title :</span> <span class="hljs-string">'PDF Preview'</span>,
                    <span class="hljs-string">width :</span> Ti.UI.FILL
                });
                var btnClose = Ti.UI.createButton({
                    <span class="hljs-string">title :</span> <span class="hljs-string">'Close'</span>
                });
                btnClose.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
                    winPDF.close();
                });
                winPDF.setRightNavButton(btnClose);
                var pdfview = Ti.UI.createWebView({
                    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#eee'</span>,
                    <span class="hljs-string">url :</span> _tempFile.nativePath,
                    <span class="hljs-string">height :</span> Ti.UI.FILL,
                    <span class="hljs-string">width :</span> Ti.UI.FILL
                });
                winPDF.add(pdfview);
                winPDF.open({
                    <span class="hljs-string">modal :</span> <span class="hljs-literal">true</span>
                });
            }
        }
    }, <span class="hljs-number">2000</span>);
});

win.addEventListener(<span class="hljs-string">'close'</span>, function(e) {
    <span class="hljs-keyword">if</span> (_tempFile != <span class="hljs-literal">null</span>) {
        _tempFile.deleteFile();
    }
    _tempFile = <span class="hljs-literal">null</span>;
});

win.open({
    <span class="hljs-string">modal :</span> <span class="hljs-literal">true</span>
});
</code></pre><p>})();</p>
<p>Can you please help me in fixing this as it is very much urgent.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2015, 3:59:35 am">July 8th 2015</span>
											by <span class='authorname'>Renuka Prasad H N</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK I will answer this here as you did not listen last time I asked yu to move it to the correct thread.</p>
<p>To repeat my previous two points;</p>
<ul>
<li><p>You need to provide JPG images.</p>
<p>You say you are, but you are not.  When you use <strong>toImage()</strong> it always creates a PNG file.  You have saved that file with a JPG extension but that does not make it JPG - that simply saves the PNG contents into a file that has the incorrect file extension.</p>
<p>You HAVE to convert those file into JPG files FROM the PNG files they are when you used <strong>toImage</strong>.</p>
</li>
<li><p>When adding the image they actually require the width and height in pixels of the source image and file size in bytes in order to add the image.  </p>
<p>This was NOT required to show the image on the device (assuming you are using JPG images), but incorrectly displayed the images when on desktops.  This HAS now been fixed by adding 3 new properties to the <strong>addImage</strong> method in the code you do NOT currently have access to as I have not uploaded the project yet - but it will be uploaded before the end of the week.</p>
</li>
</ul>
<p>So to summarise - you HAVE to provide JPG images (you are not) and you have to provide 3 new values that you have to know before adding the image (width, height and file size).</p>
<p>To repeat the revised code will be up by the end of the week - but you HAVE to convert your PNG images to JPG if you have ANY hope this will work.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2015, 11:32:58 am">July 8th 2015</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks Malcolm. I got to know the problem the thing is i searched in the blog and community for the conversion of png<br>images to jpg images i didn&#39;t get any solution so i resorted to this method.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2015, 11:45:54 am">July 8th 2015</span>
											by <span class='authorname'>Renuka Prasad H N</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Please if you can give some guidelines or link for converting the png images to jpg images it would be of great<br>help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2015, 11:57:26 am">July 8th 2015</span>
											by <span class='authorname'>Renuka Prasad H N</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>A quick Google search for &quot;appcelerator convert png to jpg&quot; gives many answers - the second link shows you how to use the imageFactory module to achieve the goal with a full code example.  I found it in 30 seconds.</p>
<ul>
<li><a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator-modules&#x2F;ti.imagefactory">https:&#x2F;&#x2F;github.com&#x2F;appcelerator-modules&#x2F;ti.imagefactory</a></li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2015, 11:58:58 am">July 8th 2015</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks Malcolm. I&#39;ll try this module</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 8th 2015, 2:12:17 pm">July 8th 2015</span>
											by <span class='authorname'>Renuka Prasad H N</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcolm,</p>
<p>Still this is not working for me. You told you will share the code in github, if you have put the code in<br>github can you please share the link here.</p>
<p>Regards,<br>Renuka Prasad H N</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 13th 2015, 5:11:35 am">July 13th 2015</span>
											by <span class='authorname'>Renuka Prasad H N</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You really are not interested in reading (link is in the green answer, or searching based on the other day.  You do need to try and help yourself before people stop give up helping you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 13th 2015, 7:41:18 am">July 13th 2015</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-287774">
				
						<section>
							<p>The problem is we want to send the whole web view(which is scroll view) as pdf. If i just do webView.toImage() it gives the image<br>of the visible part. So what i did was i took 3 different images by scrolling and added it to a file which is to be converted to pdf.<br>Pdf file is also getting created but it is corrupted when we open it. Please help us in fixing the issue</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 7th 2015, 4:47:03 am">July 7th 2015</span>
								by <span class='authorname'>Renuka Prasad H N</span><br>
								<a class="icon-bg icon-link" href="question/142403/need-help-in-adding-image-file-to-pdf-which-i-created#answer-287774" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
