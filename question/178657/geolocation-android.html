<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Geolocation Android » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Geolocation Android</h1>
		</header>
		<section>
			<p>i am developing an Android app and i have to get the latitude and longitude to save it in a database..<br>but i can&#39;t make it work..</p>
<p>this is my code.. </p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (Titanium.Geolocation.locationServicesEnabled === <span class="hljs-literal">false</span>){
     Alerta.message=<span class="hljs-string">"Servicios de localizacion desactivados, por favor activelos"</span>;
     Alerta.show();
}
<span class="hljs-keyword">else</span>{
  Titanium.Geolocation.accuracy= Titanium.Geolocation.ACCURACY_BEST;
  Titanium.Geolocation.distanceFilter=<span class="hljs-number">10</span>;
  Titanium.Geolocation.preferredProvider = Titanium.Geolocation.PROVIDER_NETWORK;
  Titanium.Geolocation.addEventListener(<span class="hljs-string">'location'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
     getLocation();
  });
}

..
..
..
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLocation</span><span class="hljs-params">()</span></span>{
   Titanium.Geolocation.getCurrentPosition(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
     <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> longitude = e.coords.longitude;
           <span class="hljs-keyword">var</span> latitude = e.coords.latitude;
           Titanium.App.latitud  = latitude;
           Titanium.App.longitud = longitude;
           Ti.API.info(<span class="hljs-string">"*** "</span> + Titanium.App.latitud + <span class="hljs-string">" "</span> + Titanium.App.longitud );
         }
         <span class="hljs-keyword">catch</span>(err) {
           dummy();
        }
   });
}
</code></pre><p>And i get:</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  GeolocationModule: <span class="hljs-list">(<span class="hljs-keyword">KrollRuntimeThread</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">308</span>,<span class="hljs-number">308</span>] Unable to register <span class="hljs-list">[<span class="hljs-keyword">network</span>], provider is null</span></span></span>
</code></pre><p>and i can&#39;t get the coords…</p>
<p>how can i make it work ?</p>
<p>thanks in advance..</p>
<p>SDK: 3.4.0GA<br>Android 4.3, API 18.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 24th 2014, 3:49:04 am">October 24th 2014</span>
				by <span class='authorname'>Juan Carlos Salinas Ojeda</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>provider</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-283332">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi Ojeda,</p>
<p>Thanks for your concern.</p>
<p>Please check the link <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;177887&#x2F;set-up-geoloacation-for-current-postition">Set up Geoloacation for current position</a> and it works for both android and iOS.</p>
<p>Hope it&#39;ll help you to solve your problem. If you have any concern about my answer, then feel free to let us know.</p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 24th 2014, 4:08:14 am">October 24th 2014</span>
								by <span class='authorname'>Raju ®</span><br>
								<a class="icon-bg icon-link" href="question/178657/geolocation-android.html#answer-283332" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i get the same man…</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  GeolocationModule: <span class="hljs-list">(<span class="hljs-keyword">KrollRuntimeThread</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">252</span>,<span class="hljs-number">252</span>] Unable to register <span class="hljs-list">[<span class="hljs-keyword">network</span>], provider is null</span></span></span>
</code></pre><p>:(</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 24th 2014, 4:38:37 am">October 24th 2014</span>
											by <span class='authorname'>Juan Carlos Salinas Ojeda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>There doesn&#39;t appear to be anything wrong with that code, but you may want to consider listening for the location, like this:</p>
<pre><code class="hljs">Ti.Geolocation.addEventListener(<span class="hljs-string">'location'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-comment">// do your thing</span>
});
</code></pre><p>When you consistently poll at an interval like that, you may be getting overlapping calls returning from the Geolocation module, giving unexpected results. Also, make sure you have location services enabled and configured through DDMS if you are using an emulator. Here&#39;s the wiki documentation covering all of this: <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides2&#x2F;Tracking+Position+and+Heading">http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Tracking+Position+and+Heading</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="October 24th 2014, 7:55:51 am">October 24th 2014</span>
											by <span class='authorname'>Raju ®</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i am using the event listener but im gonna check the link too.. thanks..</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 24th 2014, 11:42:13 am">October 24th 2014</span>
											by <span class='authorname'>Juan Carlos Salinas Ojeda</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-283333">
				
						<section>
							<p>Hi guys,</p>
<p>Enable location service on your device and try this sample code.</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (Ti.Geolocation.locationServicesEnabled) {
    Titanium.Geolocation.purpose = 'Get Current Location';
    Titanium.Geolocation.addEventListener('location', function(<span class="hljs-keyword">e</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">e</span>.<span class="hljs-keyword">error</span>) {
            alert('<span class="hljs-keyword">Error</span>: ' + <span class="hljs-keyword">e</span>.<span class="hljs-keyword">error</span>);
        } <span class="hljs-keyword">else</span> {
            Ti.API.info(<span class="hljs-keyword">e</span>.coords);
             <span class="hljs-keyword">var</span> longitude = <span class="hljs-keyword">e</span>.coords.longitude;
             <span class="hljs-keyword">var</span> latitude = <span class="hljs-keyword">e</span>.coords.latitude;

        }
    });
} <span class="hljs-keyword">else</span> {
    alert('Please enable location services');
}
</code></pre><p>Let me know have any question about this issue.<br>Thanks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 24th 2014, 4:11:30 am">October 24th 2014</span>
								by <span class='authorname'>Motiur Rahman</span><br>
								<a class="icon-bg icon-link" href="question/178657/geolocation-android.html#answer-283333" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i am getting this:</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  GeolocationModule: <span class="hljs-list">(<span class="hljs-keyword">KrollRuntimeThread</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">469</span>,<span class="hljs-number">469</span>] Unable to register <span class="hljs-list">[<span class="hljs-keyword">network</span>], provider is null</span></span></span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="October 24th 2014, 4:20:57 am">October 24th 2014</span>
											by <span class='authorname'>Juan Carlos Salinas Ojeda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Please test it on a real device.</p>
<p>Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 24th 2014, 7:10:54 am">October 24th 2014</span>
											by <span class='authorname'>Motiur Rahman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i will and let you know.. thanks…</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 24th 2014, 11:40:48 am">October 24th 2014</span>
											by <span class='authorname'>Juan Carlos Salinas Ojeda</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-283433">
				
						<section>
							<p>thanks all…. works fine in the device.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 28th 2014, 1:48:34 am">October 28th 2014</span>
								by <span class='authorname'>Juan Carlos Salinas Ojeda</span><br>
								<a class="icon-bg icon-link" href="question/178657/geolocation-android.html#answer-283433" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Welcome and happy that you resolves you problem.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 28th 2014, 1:54:07 am">October 28th 2014</span>
											by <span class='authorname'>Raju ®</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-283331">
				
						<section>
							<p>Hi, try this code:</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (Titanium.Geolocation.locationServicesEnabled === <span class="hljs-literal">false</span>) {
    Titanium.UI.createAlertDialog({
        title : <span class="hljs-string">'Warning'</span>,
        message : <span class="hljs-string">'Localization disabled, please enable!'</span>
    }).show();
}

<span class="hljs-keyword">var</span> headingCallback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
};

Ti.Geolocation.addEventListener(<span class="hljs-string">'heading'</span>, headingCallback);
<span class="hljs-keyword">var</span> headingAdded = <span class="hljs-literal">true</span>;

Titanium.Geolocation.getCurrentPosition(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">if</span> (!e.success) {
        alert(<span class="hljs-string">'Unable to receive the position'</span>);
        Ti.App.Properties.setBool(<span class="hljs-string">"gps_on"</span>, <span class="hljs-literal">false</span>);

    } <span class="hljs-keyword">else</span> {
        Titanium.App.latitud  = e.coords.latitude;
            Titanium.App.longitud = e.coords.longitude;
            Ti.API.info(<span class="hljs-string">"*** "</span> + Titanium.App.latitud + <span class="hljs-string">" "</span> + Titanium.App.longitud );
    }
});

<span class="hljs-keyword">var</span> locationCallback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">if</span> (!e.success || e.error) {
        <span class="hljs-keyword">return</span>;
    }

    Titanium.App.latitud  = e.coords.latitude;
        Titanium.App.longitud = e.coords.longitude;
        Ti.API.info(<span class="hljs-string">"*** "</span> + Titanium.App.latitud + <span class="hljs-string">" "</span> + Titanium.App.longitud );
};
Titanium.Geolocation.addEventListener(<span class="hljs-string">'location'</span>, locationCallback);
<span class="hljs-keyword">var</span> locationAdded = <span class="hljs-literal">true</span>;

<span class="hljs-keyword">if</span> (Titanium.Platform.name == <span class="hljs-string">'android'</span>) {
    <span class="hljs-comment">//  as the destroy handler will remove the listener, only set the pause handler to remove if you need battery savings</span>
    Ti.Android.currentActivity.addEventListener(<span class="hljs-string">'pause'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        Ti.API.info(<span class="hljs-string">"pause event received"</span>);
        <span class="hljs-keyword">if</span> (headingAdded) {
            Ti.API.info(<span class="hljs-string">"removing heading callback on pause"</span>);
            Titanium.Geolocation.removeEventListener(<span class="hljs-string">'heading'</span>, headingCallback);
            headingAdded = <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">if</span> (locationAdded) {
            Ti.API.info(<span class="hljs-string">"removing location callback on pause"</span>);
            Titanium.Geolocation.removeEventListener(<span class="hljs-string">'location'</span>, locationCallback);
            locationAdded = <span class="hljs-literal">false</span>;
        }
    });
    Ti.Android.currentActivity.addEventListener(<span class="hljs-string">'destroy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        Ti.API.info(<span class="hljs-string">"destroy event received"</span>);
        <span class="hljs-keyword">if</span> (headingAdded) {
            Ti.API.info(<span class="hljs-string">"removing heading callback on destroy"</span>);
            Titanium.Geolocation.removeEventListener(<span class="hljs-string">'heading'</span>, headingCallback);
            headingAdded = <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">if</span> (locationAdded) {
            Ti.API.info(<span class="hljs-string">"removing location callback on destroy"</span>);
            Titanium.Geolocation.removeEventListener(<span class="hljs-string">'location'</span>, locationCallback);
            locationAdded = <span class="hljs-literal">false</span>;
        }
    });
    Ti.Android.currentActivity.addEventListener(<span class="hljs-string">'resume'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        Ti.API.info(<span class="hljs-string">"resume event received"</span>);
        <span class="hljs-keyword">if</span> (!headingAdded &amp;&amp; headingCallback) {
            Ti.API.info(<span class="hljs-string">"adding heading callback on resume"</span>);
            Titanium.Geolocation.addEventListener(<span class="hljs-string">'heading'</span>, headingCallback);
            headingAdded = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (!locationAdded &amp;&amp; locationCallback) {
            Ti.API.info(<span class="hljs-string">"adding location callback on resume"</span>);
            Titanium.Geolocation.addEventListener(<span class="hljs-string">'location'</span>, locationCallback);
            locationAdded = <span class="hljs-literal">true</span>;
        }
    });
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 24th 2014, 4:04:50 am">October 24th 2014</span>
								by <span class='authorname'>Antonino Salvatore Cutri&#39;</span><br>
								<a class="icon-bg icon-link" href="question/178657/geolocation-android.html#answer-283331" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>my friend.. i am getting this:</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  GeolocationModule: <span class="hljs-list">(<span class="hljs-keyword">KrollRuntimeThread</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">34</span>,<span class="hljs-number">34</span>] Unable to get current position, location is null
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiSensorHelper: <span class="hljs-list">(<span class="hljs-keyword">main</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">3</span>,<span class="hljs-number">214</span>] Unable to register, sensor is null
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  GeolocationModule: <span class="hljs-list">(<span class="hljs-keyword">KrollRuntimeThread</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">445</span>,<span class="hljs-number">659</span>] Unable to register <span class="hljs-list">[<span class="hljs-keyword">network</span>], provider is null
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   pause event received
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   removing heading callback on pause
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   removing location callback on pause
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiSensorHelper: <span class="hljs-list">(<span class="hljs-keyword">main</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">42</span>,<span class="hljs-number">701</span>] Unable to unregister, sensor is null</span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="October 24th 2014, 4:23:57 am">October 24th 2014</span>
											by <span class='authorname'>Juan Carlos Salinas Ojeda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You are using a real device or the simulator?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 24th 2014, 5:38:28 am">October 24th 2014</span>
											by <span class='authorname'>Antonino Salvatore Cutri&#39;</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>using Genymotion… im gonna try real device and let you know.. thanks..</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 24th 2014, 11:41:14 am">October 24th 2014</span>
											by <span class='authorname'>Juan Carlos Salinas Ojeda</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
