<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Open newWin stopped working after updates » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Open newWin stopped working after updates</h1>
		</header>
		<section>
			<p>Application type: mobile iPad<br>Titanium SDK: 3.1.1.GA<br>Platform &amp; version: iOS 7<br>Device: iOS simulator<br>Host Operating System: OS<br>Titanium Studio: 3.1.1.201306112235<br>Logs:  No log but iPad simulator says Applicaton Error Can&#39;t find variable: win at flipbook.js (line 5 )</p>
<p>I had this working even though it dropped the navigation but never could figure out  how to show the navgroup from previous window on this new win. It worked so just used it as is, yet now it gives an application error code and not sure how to fix it.</p>
<p>If someone would not mind telling me why I lost the navbar from the master_list.js to the flipbook.js I would so appreciate it as well.  That maybe why I am now having an issue but not sure it worked with no error messages for over year but broke when I went to update it.</p>
<p>I could use any and all help please.</p>
<p>flipbook.js</p>
<pre><code class="hljs"><span class="hljs-comment">// Your Window</span>
var newWin = Ti.UI.createWindow({
    backgroundColor:<span class="hljs-string">'#000000'</span>
});
win.navGroup.<span class="hljs-built_in">open</span>(newWin);


<span class="hljs-comment">// Add Flipbook Library</span>
Ti.include(<span class="hljs-string">'flipbook/flipbook.js'</span>);

<span class="hljs-comment">// Simple Code for splitview ipad project</span>

<span class="hljs-comment">// Create Flipbook Object</span>
flipbook.create({
    pages:[<span class="hljs-string">'img/flipbook/1.jpg'</span>,<span class="hljs-string">'img/flipbook/2.jpg'</span>,<span class="hljs-string">'img/flipbook/3.jpg'</span>,<span class="hljs-string">'img/flipbook/4.jpg'</span>,<span class="hljs-string">'img/flipbook/5.jpg'</span>,<span class="hljs-string">'img/flipbook/6.jpg'</span>,<span class="hljs-string">'img/flipbook/7.jpg'</span>,<span class="hljs-string">'img/flipbook/8.jpg'</span>,<span class="hljs-string">'img/flipbook/9.jpg'</span>,<span class="hljs-string">'img/flipbook/10.jpg'</span>,<span class="hljs-string">'img/flipbook/11.jpg'</span>,<span class="hljs-string">'img/flipbook/12.jpg'</span>,<span class="hljs-string">'img/flipbook/13.jpg'</span>,<span class="hljs-string">'img/flipbook/14.jpg'</span>,<span class="hljs-string">'img/flipbook/15.jpg'</span>,<span class="hljs-string">'img/flipbook/16.jpg'</span>], <span class="hljs-comment">// Add your Image Pages</span>
    top:<span class="hljs-number">0</span>,
    left:<span class="hljs-number">0</span>,
    right:<span class="hljs-number">0</span>,
    bottom:<span class="hljs-number">0</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">775</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">1000</span>,
    <span class="hljs-comment">//showButtons:false,</span>
    <span class="hljs-comment">//showPagination:false,</span>
    attachTo:win <span class="hljs-comment">// ATTENTION, USE this to add object to you window instead of 'win.add(blabla);'</span>
});
</code></pre><p>master_list.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> MASTER_WINDOW = {};

(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;
    <span class="hljs-keyword">var</span> navGroup = win.navGroup;
    <span class="hljs-keyword">var</span> tableData = [
     Ti.UI.createTableViewRow({title:<span class="hljs-string">'Admissions'</span>, url:<span class="hljs-string">'admissions.js'</span>}),
     Ti.UI.createTableViewRow({title:<span class="hljs-string">'Financial Aid'</span>, url:<span class="hljs-string">'finaid.js'</span>}),
     Ti.UI.createTableViewRow({title:<span class="hljs-string">'Degrees and Programs'</span>, url:<span class="hljs-string">'programs.js'</span>}),
     Ti.UI.createTableViewRow({title:<span class="hljs-string">'Housing and Dining'</span>, url:<span class="hljs-string">'reslife.js'</span>}),
     Ti.UI.createTableViewRow({title:<span class="hljs-string">'Galleries'</span>, url:<span class="hljs-string">'galleries.js'</span>}),
      Ti.UI.createTableViewRow({title:<span class="hljs-string">'Viewbook'</span>, url:<span class="hljs-string">'flipbook.js'</span>}),
       Ti.UI.createTableViewRow({title:<span class="hljs-string">'Visit UAF'</span>, url:<span class="hljs-string">'visit.js'</span>}),
       Ti.UI.createTableViewRow({title:<span class="hljs-string">'Contact Information'</span>, url:<span class="hljs-string">'contact.js'</span>})
    ];

    <span class="hljs-comment">/**
    * on click event, fireEvent, detail window is listening
    */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tableClick</span><span class="hljs-params">(evt)</span> </span>{
        <span class="hljs-keyword">var</span> newWin = Ti.UI.createWindow({
            title:evt.row.title,
            barImage: <span class="hljs-string">'/images/PageTitle-bg.jpg'</span>,
            barColor: <span class="hljs-string">'#000'</span>,
            url:evt.row.url
        });
        navGroup.open(newWin);
        newWin.navGroup = navGroup;
    }

    <span class="hljs-comment">/**
    * initialize the window
    */</span>
    MASTER_WINDOW.init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{

        <span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({
            data:tableData,
            backgroundColor: <span class="hljs-string">'transparent'</span>,
            rowBackgroundColor: <span class="hljs-string">'transparent'</span>,
        });
        win.add(tableview);        

        tableview.addEventListener(<span class="hljs-string">'click'</span>,tableClick);                        
    }

})();
MASTER_WINDOW.init();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 6th 2013, 9:55:47 pm">December 6th 2013</span>
				by <span class='authorname'>Sherrie Roberts</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>error</span></li>
					
						<li><span class='tagname'>ipad</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-272241">
				
						<section>
							<p>Hi,</p>
<p>you need to get and set navGroup object which you are passing from master_list.js so do the following…</p>
<p>flipbook.js</p>
<pre><code class="hljs"><span class="hljs-comment">// Your Window</span>

<span class="hljs-keyword">var</span> win = Ti.UI.currentWindow;
<span class="hljs-keyword">var</span> navGroup = win.navGroup;

<span class="hljs-keyword">var</span> newWin = Ti.UI.createWindow({
    backgroundColor:<span class="hljs-string">'#000000'</span>
});

navGroup.open(newWin);


<span class="hljs-comment">// Add Flipbook Library</span>
Ti.<span class="hljs-keyword">include</span>(<span class="hljs-string">'flipbook/flipbook.js'</span>);

<span class="hljs-comment">// Simple Code for splitview ipad project</span>

<span class="hljs-comment">// Create Flipbook Object</span>
flipbook.create({
    pages:[<span class="hljs-string">'img/flipbook/1.jpg'</span>,<span class="hljs-string">'img/flipbook/2.jpg'</span>,<span class="hljs-string">'img/flipbook/3.jpg'</span>,<span class="hljs-string">'img/flipbook/4.jpg'</span>,<span class="hljs-string">'img/flipbook/5.jpg'</span>,<span class="hljs-string">'img/flipbook/6.jpg'</span>,<span class="hljs-string">'img/flipbook/7.jpg'</span>,<span class="hljs-string">'img/flipbook/8.jpg'</span>,<span class="hljs-string">'img/flipbook/9.jpg'</span>,<span class="hljs-string">'img/flipbook/10.jpg'</span>,<span class="hljs-string">'img/flipbook/11.jpg'</span>,<span class="hljs-string">'img/flipbook/12.jpg'</span>,<span class="hljs-string">'img/flipbook/13.jpg'</span>,<span class="hljs-string">'img/flipbook/14.jpg'</span>,<span class="hljs-string">'img/flipbook/15.jpg'</span>,<span class="hljs-string">'img/flipbook/16.jpg'</span>], <span class="hljs-comment">// Add your Image Pages</span>
    top:<span class="hljs-number">0</span>,
    left:<span class="hljs-number">0</span>,
    right:<span class="hljs-number">0</span>,
    bottom:<span class="hljs-number">0</span>,
    width:<span class="hljs-number">775</span>,
    height:<span class="hljs-number">1000</span>,
    <span class="hljs-comment">//showButtons:false,</span>
    <span class="hljs-comment">//showPagination:false,</span>
    attachTo:win <span class="hljs-comment">// ATTENTION, USE this to add object to you window instead of 'win.add(blabla);'</span>
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 7th 2013, 4:42:20 am">December 7th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/160212/open-newwin-stopped-working-after-updates#answer-272241" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I had tried that before and it did not give the error  but loaded the start-up window into the detail.js which is the menu&#x2F;navigation for the app instead of opening the flipbook.js in the master window.  </p>
<p>Wonder what else I have wrong now.  I am posting the detail.js and the app.js</p>
<p>detail.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> DETAIL_WINDOW = {};
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;
    <span class="hljs-keyword">var</span> webView = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">/**
    * called when event is fired from master window tableView
    */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rowClicked</span><span class="hljs-params">(evtData)</span> </span>{
        Ti.API.debug(evtData);


        <span class="hljs-keyword">if</span> (webView == <span class="hljs-literal">null</span> ){

            Ti.API.debug(<span class="hljs-string">"creating webview"</span>);

            webView = Ti.UI.createWebView({
                autoDetect: [Ti.UI.iOS.AUTODETECT_NONE],
                backgroundColor: <span class="hljs-string">'#efdbb2'</span>
            });    
            win.add(webView);            
        }

        webView.url = evtData.url;

    }

    <span class="hljs-comment">/**
    * basic window initialization
    */</span>
    DETAIL_WINDOW.init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{    

        Ti.App.addEventListener(<span class="hljs-string">'app:rowClicked'</span>,rowClicked);    

        Ti.Gesture.addEventListener(<span class="hljs-string">'orientationchange'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{        
        });

    }

})();
DETAIL_WINDOW.init();
</code></pre><p>app.js - Opens up the detail.js (shown above) along with the master-list.js (shown in first post)</p>
<pre><code class="hljs">
<span class="hljs-comment">// Simple Code for splitview ipad project</span>
SplitViewApp = {};

<span class="hljs-comment">// WINDOWS</span>
SplitViewApp.masterWindow = Ti.UI.createWindow({
    title:<span class="hljs-string">'Menu'</span>,
        barImage: <span class="hljs-string">'/images/PageTitle-bg.jpg'</span>,
        barColor: <span class="hljs-string">'#000'</span>,
        backgroundImage: <span class="hljs-string">'/images/burlap.jpg'</span>,
        url:<span class="hljs-string">'master_list.js'</span>
});
SplitViewApp.detailWindow = Ti.UI.createWindow({
    title:<span class="hljs-string">'UAF Admissions'</span>,
     backgroundImage: <span class="hljs-string">'/images/cover_960X768.jpg'</span>,
     barImage: <span class="hljs-string">'/images/PageTitle-bg.jpg'</span>,
     barColor: <span class="hljs-string">'#000'</span>,
    url:<span class="hljs-string">'detail.js'</span>
});


<span class="hljs-comment">//Forces the application to only open in Landscape</span>
<span class="hljs-comment">// MASTER NAV GROUP</span>
SplitViewApp.masterNav = Ti.UI.iPhone.createNavigationGroup({
    <span class="hljs-built_in">window</span>:SplitViewApp.masterWindow
});

<span class="hljs-comment">// DETAIL NAV GROUP</span>
SplitViewApp.detailNav = Ti.UI.iPhone.createNavigationGroup({
    <span class="hljs-built_in">window</span>:SplitViewApp.detailWindow
});

<span class="hljs-comment">// SPLIT VIEW</span>
SplitViewApp.splitView = Titanium.UI.iPad.createSplitWindow({
    masterView:SplitViewApp.masterNav,
    detailView:SplitViewApp.detailNav
});

Ti.App.addEventListener.addEventListener(<span class="hljs-string">'app:rowClicked'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    Ti.API.log(<span class="hljs-string">'setMasterPopupVisible'</span>);
    <span class="hljs-comment">// see bug in lighthouse</span>
    <span class="hljs-comment">// https://appcelerator.lighthouseapp.com/projects/32238/tickets/2300-hide-master-popover-on-ipad</span>
    SplitViewApp.splitView.setMasterPopupVisible(<span class="hljs-literal">false</span>);
    SplitViewApp.splitView.setMasterPopupVisible(<span class="hljs-literal">true</span>);
});
SplitViewApp.splitView.addEventListener(<span class="hljs-string">'visible'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

    <span class="hljs-comment">//if detail view then show button to display master list</span>
    <span class="hljs-comment">// the framework does this automagically!!</span>
    <span class="hljs-keyword">if</span> (e.view == <span class="hljs-string">'detail'</span>) {
        e.button.title = <span class="hljs-string">"Master View List"</span>;
        SplitViewApp.detailWindow.leftNavButton = e.button;
        SplitViewApp.masterWindow.button = e.button;
        Ti.API.log(<span class="hljs-string">'Set button'</span>);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.view == <span class="hljs-string">'master'</span>) {
        SplitViewApp.detailWindow.leftNavButton = <span class="hljs-literal">null</span>;
        SplitViewApp.masterWindow.button = <span class="hljs-literal">null</span>;
        Ti.API.log(<span class="hljs-string">'Removed button'</span>);
    }
});

SplitViewApp.masterWindow.navGroup = SplitViewApp.masterNav;
SplitViewApp.splitView.open();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="December 9th 2013, 8:04:53 pm">December 9th 2013</span>
											by <span class='authorname'>Sherrie Roberts</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
