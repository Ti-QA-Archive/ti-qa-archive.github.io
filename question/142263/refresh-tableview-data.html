<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Refresh tableview data » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Refresh tableview data</h1>
		</header>
		<section>
			<p>hi there, i am trying to refresh my tableview but it always adding the same values as new record? append to the bottom? i can&#39;t understand why?<br>what should i do?</p>
<pre><code class="hljs">yenile_btn.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    <span class="hljs-keyword">var</span> db = Titanium.Database.open(<span class="hljs-string">'mydb'</span>);
    <span class="hljs-keyword">var</span> baglanti = db.execute(<span class="hljs-string">'SELECT id,baslik FROM liste'</span>);

                    Ti.API.info(<span class="hljs-string">"Toplam Row Say?s?:"</span>+baglanti.getRowCount());
                <span class="hljs-keyword">if</span>(!baglanti.getRowCount()){
                    alert(<span class="hljs-string">"Hiç Listeniz Yoktur."</span>);
                }
                <span class="hljs-keyword">while</span> (baglanti.isValidRow())
                    {
                    <span class="hljs-comment">//data.push({id:baglanti.fieldByName('id'), title:baglanti.fieldByName('baslik')}); </span>

                            <span class="hljs-keyword">var</span> renk_ayarla = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span></span>{
                                <span class="hljs-keyword">if</span>(id%<span class="hljs-number">2</span>==<span class="hljs-number">1</span>){
                                        row.backgroundColor = <span class="hljs-string">'#1f1f1f'</span>;
                                            }<span class="hljs-keyword">else</span>{
                                                row.backgroundColor =<span class="hljs-string">'#2a2a2a'</span> ;
                                            }

                            }
                            row = Ti.UI.createTableViewRow({
                                        height:<span class="hljs-number">30</span>,
                                        width:Ti.UI.FILL,
                                        selectedBackgroundColor:<span class="hljs-string">'#000'</span>, 
                                        hasChild:<span class="hljs-literal">true</span>,
                                        data_id:baglanti.fieldByName(<span class="hljs-string">'id'</span>),
                                        backgroundColor:<span class="hljs-string">''</span>


                                    });

                                    renk_ayarla(baglanti.fieldByName(<span class="hljs-string">'id'</span>)) 
                                    <span class="hljs-keyword">var</span> id = baglanti.fieldByName(<span class="hljs-string">'id'</span>);
                                    <span class="hljs-keyword">var</span> baslik = baglanti.fieldByName(<span class="hljs-string">'baslik'</span>);

                                nameLabel = Ti.UI.createLabel({
                                text:baglanti.fieldByName(<span class="hljs-string">'baslik'</span>),
                                font:{
                                    fontSize:<span class="hljs-number">12</span>,
                                    fontWeight:<span class="hljs-string">'bold'</span>,
                                    fontFamily:<span class="hljs-string">'Trebuchet MS'</span>
                                },
                                height:<span class="hljs-string">'auto'</span>,
                                top:<span class="hljs-number">0</span>,
                                left:<span class="hljs-number">15</span>,
                                height:<span class="hljs-number">30</span>,
                                color:<span class="hljs-string">'#FFF'</span>,
                                shadowColor:<span class="hljs-string">'#000'</span>,
                                shadowOffset:{
                                    x:<span class="hljs-number">1</span>,
                                    y:<span class="hljs-number">1</span>
                                }
                            });

                            row.add(nameLabel);
                            tableData.push(row);

                    baglanti.next();
                    }
                    table.setData(tableData);

                    table.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
                        alert(e.source.data_id);

                    });
                    baglanti.close();
                    db.close();

});
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 14th 2012, 2:55:39 pm">September 14th 2012</span>
				by <span class='authorname'>Graham Jeffrey</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>refresh</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-247307">
				
						<section>
							<p>It looks like you are constantly pushing data into the tableData array without ever clearing it. So each time you are just adding more rows to the array. Try setting tableData to an empty array before you start each population or after you call setData() on the table.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 14th 2012, 3:11:48 pm">September 14th 2012</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/142263/refresh-tableview-data#answer-247307" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>this is my tableview</p>
<pre><code class="hljs"><span class="hljs-built_in">var</span> table = Ti<span class="hljs-built_in">.</span>UI<span class="hljs-built_in">.</span>createTableView({
    top:<span class="hljs-number">0</span>,
    width:<span class="hljs-number">320</span>,
    left:<span class="hljs-number">0</span>,
    backgroundCol<span class="hljs-subst">or</span>:<span class="hljs-string">'transparent'</span>,
    backgroundImage:<span class="hljs-string">'transparent'</span>,    
    separatorCol<span class="hljs-subst">or</span>:<span class="hljs-string">'transparent'</span>,
    background:<span class="hljs-string">'transparent'</span>,
    <span class="hljs-built_in">data</span>: tableData
});
</code></pre><p>i am adding this line before opening the database </p>
<pre><code class="hljs"><span class="hljs-tag">table</span><span class="hljs-class">.setData</span>(<span class="hljs-attr_selector">[]</span>);
</code></pre><p>but still the same problem?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 14th 2012, 3:45:44 pm">September 14th 2012</span>
											by <span class='authorname'>Graham Jeffrey</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Like I said, its because you haven&#39;t reset the array <code>tableData</code>. You keep pushing more and more info onto that array. Reset that array:</p>
<pre><code class="hljs">tableData = <span class="hljs-string">[]</span>;
</code></pre><p>before you populate each time.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 14th 2012, 4:19:40 pm">September 14th 2012</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Can you please my code :( i am still trying but couldn&#39;t make it :( </p>
<pre><code class="hljs">Ti.<span class="hljs-keyword">include</span>(<span class="hljs-string">"functions.js"</span>);
<span class="hljs-keyword">var</span> baseWin = Ti.UI.currentWindow;
baseWin.navBarHidden = <span class="hljs-literal">true</span>;
baseWin.backgroundColor = <span class="hljs-string">'#000'</span>;

mywindow = Ti.UI.createWindow({
    title:<span class="hljs-string">"Videolar"</span>,
    barColor:<span class="hljs-string">'#000'</span>,
    navBarHidden:<span class="hljs-literal">false</span>

});
mywindow.barColor = <span class="hljs-string">'#000'</span>;
mywindow.backgroundColor = <span class="hljs-string">'#000'</span>;

<span class="hljs-keyword">var</span> navGroup = Ti.UI.iPhone.createNavigationGroup( {
    window : mywindow

});


<span class="hljs-keyword">var</span> db = Titanium.Database.open(<span class="hljs-string">'mydb'</span>);
<span class="hljs-keyword">var</span> baglanti = db.execute(<span class="hljs-string">'SELECT id,baslik FROM liste'</span>);

<span class="hljs-keyword">var</span> tableData= [];

<span class="hljs-keyword">var</span> table = Ti.UI.createTableView({
    top:<span class="hljs-number">0</span>,
    width:<span class="hljs-number">320</span>,
    left:<span class="hljs-number">0</span>,
    backgroundColor:<span class="hljs-string">'transparent'</span>,
    backgroundImage:<span class="hljs-string">'transparent'</span>,    
    separatorColor:<span class="hljs-string">'transparent'</span>,
    background:<span class="hljs-string">'transparent'</span>
});

mywindow.add(table);

<span class="hljs-keyword">var</span> ekle = Ti.UI.createButton({
    title:<span class="hljs-string">'Yeni'</span>
});

<span class="hljs-keyword">var</span> refresh = Ti.UI.createButton({
    title:<span class="hljs-string">'Refresh'</span>
});

mywindow.setLeftNavButton(refresh);
mywindow.setRightNavButton(ekle);
ekle.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    <span class="hljs-keyword">var</span> ekle_pencere = Ti.UI.createWindow({
        title:<span class="hljs-string">'Yeni Liste Ekle'</span>,
        barColor:<span class="hljs-string">'#000'</span>
    });
    <span class="hljs-keyword">var</span> isim = Ti.UI.createTextField({
        color:<span class="hljs-string">'#000'</span>,
                                top:<span class="hljs-number">10</span>,
                                left:<span class="hljs-number">10</span>,
                                right:<span class="hljs-number">10</span>,
                                width:<span class="hljs-number">300</span>,
                                height:<span class="hljs-number">100</span>,
                                hintText:<span class="hljs-string">'Liste Ad?'</span>,
                                keyboardType:Titanium.UI.KEYBOARD_DEFAULT,
                                returnKeyType:Titanium.UI.RETURNKEY_DEFAULT,
                                borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED
    });

    <span class="hljs-keyword">var</span> gonder = Ti.UI.createButton({
        title:<span class="hljs-string">"Ekle"</span>,
        width:<span class="hljs-number">50</span>,
        height:<span class="hljs-number">30</span>,
        backgroundColor:<span class="hljs-string">'#1e1e1e'</span>,
        top:<span class="hljs-number">150</span>,
        right:<span class="hljs-number">50</span>        
    });

    ekle_pencere.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
        isim.blur();
    });

    gonder.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
        liste_ekle(isim.value);

        tableData.push(row);
        navGroup.close(ekle_pencere);
        navGroup.open(mywindow);
    });

    ekle_pencere.add(isim);
    ekle_pencere.add(gonder);
    navGroup.open(ekle_pencere);
});



Ti.API.info(<span class="hljs-string">"Toplam Row Say?s?:"</span>+baglanti.getRowCount());
<span class="hljs-keyword">if</span>(!baglanti.getRowCount()){
    alert(<span class="hljs-string">"Hiç Listeniz Yoktur."</span>);
}
<span class="hljs-keyword">while</span> (baglanti.isValidRow())
    {
    <span class="hljs-comment">//data.push({id:baglanti.fieldByName('id'), title:baglanti.fieldByName('baslik')}); </span>

            <span class="hljs-keyword">var</span> renk_ayarla = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span></span>{
                <span class="hljs-keyword">if</span>(id%<span class="hljs-number">2</span>==<span class="hljs-number">1</span>){
                        row.backgroundColor = <span class="hljs-string">'#1f1f1f'</span>;
                            }<span class="hljs-keyword">else</span>{
                                row.backgroundColor =<span class="hljs-string">'#2a2a2a'</span> ;
                            }

            }
            row = Ti.UI.createTableViewRow({
                        height:<span class="hljs-number">30</span>,
                        width:Ti.UI.FILL,
                        selectedBackgroundColor:<span class="hljs-string">'#000'</span>, 
                        hasChild:<span class="hljs-literal">true</span>,
                        data_id:baglanti.fieldByName(<span class="hljs-string">'id'</span>),
                        backgroundColor:<span class="hljs-string">''</span>


                    });

                   renk_ayarla(baglanti.fieldByName(<span class="hljs-string">'id'</span>)) 
            <span class="hljs-keyword">var</span> id = baglanti.fieldByName(<span class="hljs-string">'id'</span>);
            <span class="hljs-keyword">var</span> baslik = baglanti.fieldByName(<span class="hljs-string">'baslik'</span>);

            nameLabel = Ti.UI.createLabel({
                text:baglanti.fieldByName(<span class="hljs-string">'baslik'</span>),
                font:{
                    fontSize:<span class="hljs-number">12</span>,
                    fontWeight:<span class="hljs-string">'bold'</span>,
                    fontFamily:<span class="hljs-string">'Trebuchet MS'</span>
                },
                height:<span class="hljs-string">'auto'</span>,
                top:<span class="hljs-number">0</span>,
                left:<span class="hljs-number">15</span>,
                height:<span class="hljs-number">30</span>,
                color:<span class="hljs-string">'#FFF'</span>,
                shadowColor:<span class="hljs-string">'#000'</span>,
                shadowOffset:{
                    x:<span class="hljs-number">1</span>,
                    y:<span class="hljs-number">1</span>
                }
            });

            row.add(nameLabel);
            tableData.push(row);

    baglanti.next();
    }

    table.setData(tableData);

    table.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
        alert(e.source.data_id);

    });

    refresh.addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    tableData = [];
});

<span class="hljs-comment">/* here's the tableview part */</span>

mywindow.add(table);
mywindow.navGroup = navGroup;
baseWin.add(navGroup);
baglanti.close();
db.close();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="September 14th 2012, 5:39:19 pm">September 14th 2012</span>
											by <span class='authorname'>Graham Jeffrey</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247308">
				
						<section>
							<p>Create row,label etc controls with var keyword. Here in above code, the variable which are created, are global one.</p>
<p>while (baglanti.isValidRow())<br>                    {<br>                    &#x2F;&#x2F;data.push({id:baglanti.fieldByName(&#39;id&#39;), title:baglanti.fieldByName(&#39;baslik&#39;)}); </p>
<pre><code class="hljs">                        <span class="hljs-keyword">var</span> renk_ayarla = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span></span>{

                        <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({
                                    height:<span class="hljs-number">30</span>,
                                    width:Ti.UI.FILL,
                                    selectedBackgroundColor:<span class="hljs-string">'#000'</span>, 
                                    hasChild:<span class="hljs-literal">true</span>,
                                    data_id:baglanti.fieldByName(<span class="hljs-string">'id'</span>),
                                    backgroundColor:<span class="hljs-string">''</span>


                                });
</code></pre><p> if(id%2==1){<br>                                        row.backgroundColor = &#39;#1f1f1f&#39;;<br>                                            }else{<br>                                                row.backgroundColor =&#39;#2a2a2a&#39; ;<br>                                            }</p>
<pre><code class="hljs">                        }

                                renk_ayarla(baglanti.fieldByName(<span class="hljs-string">'id'</span>)) 
                                var id = baglanti.fieldByName(<span class="hljs-string">'id'</span>);
                                var baslik = baglanti.fieldByName(<span class="hljs-string">'baslik'</span>);

                            var nameLabel = Ti.UI.createLabel({
                            <span class="hljs-built_in">text</span>:baglanti.fieldByName(<span class="hljs-string">'baslik'</span>),
                            font:{
                                fontSize:<span class="hljs-number">12</span>,
                                fontWeight:<span class="hljs-string">'bold'</span>,
                                fontFamily:<span class="hljs-string">'Trebuchet MS'</span>
                            },
                            <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
                            top:<span class="hljs-number">0</span>,
                            left:<span class="hljs-number">15</span>,
                            <span class="hljs-variable">height</span>:<span class="hljs-number">30</span>,
                            <span class="hljs-built_in">color</span>:<span class="hljs-string">'#FFF'</span>,
                            shadowColor:<span class="hljs-string">'#000'</span>,
                            shadowOffset:{
                                x:<span class="hljs-number">1</span>,
                                y:<span class="hljs-number">1</span>
                            }
                        });

                        row.<span class="hljs-built_in">add</span>(nameLabel);
                        tableData.push(row);

                baglanti.next();
                }
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 14th 2012, 3:12:53 pm">September 14th 2012</span>
								by <span class='authorname'>Shalini Kushwaha</span><br>
								<a class="icon-bg icon-link" href="question/142263/refresh-tableview-data#answer-247308" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>can you put the code to the code block? i can&#39;t see the changes :(</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 14th 2012, 3:15:03 pm">September 14th 2012</span>
											by <span class='authorname'>Graham Jeffrey</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
