<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>ListView android » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>ListView android</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>is there a scrollEvent on listView on android to make pagination ?</p>
<p>thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 22nd 2013, 8:53:42 am">April 22nd 2013</span>
				by <span class='authorname'>Djamel ZAHAL</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>listview</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>What is your current TiSDK version?  Have you moved to Ti 3.1 if you are referring to ListView?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 22nd 2013, 2:22:06 pm">April 22nd 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>im using 3.0.0</p>
<p>i prefer solution with tableView…but e.contentOffset.y doesn&#39;t work….</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 22nd 2013, 2:28:01 pm">April 22nd 2013</span>
								by <span class='authorname'>Djamel ZAHAL</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-261330">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>This is not the first time you have tried to work out pagination and you have considered many different ways.</p>
<p>My concern is that you are using the word &quot;pagination&quot; but your meaning and other peoples meanings are different.  I wonder if you explain EXACTLY what you want to achieve and NOT how you think it should be achieved - we might get closer to a suitable answer for you.</p>
<p>Some definitions;</p>
<ul>
<li><strong>Pagination</strong></li>
</ul>
<p>Retrieval of information in blocks that can be accessed using page number and page size values, this technique allows fast, responsive data retrieval whilst reducing unnecessary bandwidth and delays for data that is not required.</p>
<p>Pagination is NOT a solution or method, simply a technique of data retrieval.  It must be combined with other techniques to be fully utilised.</p>
<ul>
<li><strong>Lazy Load</strong></li>
</ul>
<p>Commonly this is a technique to only load new information is required, generally for mobiles when the device screen is scrolled to a point where no more information is available (or will be available) and the additional information is then quickly appended.  This is an automatic version of <strong>Load more</strong>.</p>
<ul>
<li><strong>Load More</strong></li>
</ul>
<p>A manual version of the above</p>
<ul>
<li><strong>Visual pagination</strong></li>
</ul>
<p>A list of each page you could display (can be shortened for space) with a means to choose that page and the current results be replaced with the newly requested ones.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 22nd 2013, 3:27:42 pm">April 22nd 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/151348/listview-android#answer-261330" rel="permalink">permalink</a>
							</div>

							<h5>14 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>So in short, HOW are you hoping your pagination will appear to the user?  One of the above or something else?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 3:28:37 pm">April 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Lazy Load</p>
<p>i did it for iPhone and it works : </p>
<p>my code : </p>
<pre><code class="hljs">tableViewOffres.addEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        Ti.API.info(<span class="hljs-string">'height : '</span> + e.contentSize.height + <span class="hljs-string">' | offset : '</span> + e.contentOffset.y);
        Ti.API.info(e.contentOffset.y);
        <span class="hljs-keyword">var</span> height = e.contentSize.height - (e.contentOffset.y + <span class="hljs-number">316</span>);
        <span class="hljs-keyword">if</span>(height &lt; <span class="hljs-number">100</span>) {
    }
}
</code></pre><p>the problem is on android, i replaced e.contentSize.height by e.totalItemCount * 79 because the height of row is 79.</p>
<p>but for e.contentOffset.y…i dont know..</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 3:40:03 pm">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Not directly related - but this is answer using a <strong>scrollView</strong>, cross platform supported.</p>
<ul>
<li><a href="https:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;147145&#x2F;show-more-images-when-scroll-down#answer-254933">show more images when scroll down</a></li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 3:51:56 pm">April 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The thing you need to remember is that these event vary vastly between platforms - so the answer has to as well.</p>
<p>You should be looking more towards a simpler sum for Android.  Three scroll event properties in particular are of use for Android</p>
<ul>
<li>totalItemCount </li>
<li>visibleItemCount </li>
<li>firstVisibleItem </li>
</ul>
<p>Imagine you have 100 items in total, your view port can see 8 at any one time.</p>
<pre><code class="hljs"><span class="hljs-comment">// this is not real code just an example calculation</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> tolerance</span> = <span class="hljs-number">5</span>; <span class="hljs-comment">// how many rows BEFORE the bottom should you trigger this on</span>
<span class="hljs-keyword">if</span> ((firstVisibleItem + visibleItemCount + tolerance) &gt; totalItemCount) {
   <span class="hljs-comment">// near bottom</span>
}
</code></pre><p>You would need to have one block of code for iOS and another for Android (think if statement inside the event)</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 3:56:31 pm">April 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>if i have 30 rows.</p>
<p>firstVisibleItem = 0,<br>visibleItemCount = 5 (in my case) but executed several times in scrollEvent so i will increase very quickly…</p>
<p>so it will load more before i am at the end…</p>
<p>i dont understand :s</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 4:03:12 pm">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK you have 30 rows in total, you can see only 5 at any one time (this is not something you set - it is returned as an answer in the scroll event).</p>
<p>For demo purposes the following are shortened;</p>
<ul>
<li>firstVisibleItem = first</li>
<li>visibleItemCount = visible</li>
</ul>
<p>First load;</p>
<ul>
<li>(first = 0 + visible = 5 + tolerance = 5) = (0 + 5 + 5) = 10 &gt; 30 = FALSE</li>
</ul>
<p>Move the table so the first row is no longer visible</p>
<ul>
<li>(first = 1 + visible = 5 + tolerance = 5) = (1 + 5 + 5) = 11 &gt; 30 = FALSE</li>
</ul>
<p>Then;</p>
<ul>
<li>(first = 2 + visible = 5 + tolerance = 5) = (2 + 5 + 5) = 12 &gt; 30 = FALSE</li>
<li>(first = 3 + visible = 5 + tolerance = 5) = (3 + 5 + 5) = 13 &gt; 30 = FALSE</li>
<li>(first = 4 + visible = 5 + tolerance = 5) = (4 + 5 + 5) = 14 &gt; 30 = FALSE</li>
<li>(first = 5 + visible = 5 + tolerance = 5) = (5 + 5 + 5) = 15 &gt; 30 = FALSE</li>
</ul>
<p>…</p>
<p>The first 24 are now above the visible screen area;</p>
<ul>
<li>(first = 25 + visible = 5 + tolerance = 5) = (25 + 5 + 5) = 30 &gt; 30 = FALSE</li>
<li>(first = 26 + visible = 5 + tolerance = 5) = (26 + 5 + 5) = 31 &gt; 30 = TRUE</li>
</ul>
<p>You should be able to see in this walk-through that the result will not be <strong>TRUE</strong> until the first 25 rows have gone above the visible screen area.  You can of course increase the <strong>tolerance</strong> variable to &quot;detect&quot; when you ask for the next page of data from your server&#x2F;local db - a bit earlier.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 4:13:58 pm">April 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanks :)</p>
<p>here is my code, the app crashes when i scroll :s</p>
<pre><code class="hljs">tableViewOffres.addEventListener(<span class="hljs-string">'scroll'</span>, function(e) {
        <span class="hljs-keyword">if</span>(e.firstVisibleItem + e.visibleItemCount + <span class="hljs-number">3</span> &gt; e.totalItemCount) {
                var rows = [];
               <span class="hljs-keyword">for</span> (var i = limit * page; i &lt; limit * (page + <span class="hljs-number">1</span>) &amp;&amp; i &lt; data.length; i++) {
                   var offre = Ti.UI.createTableViewRow({
                    <span class="hljs-string">height :</span> <span class="hljs-number">79</span>,
                    <span class="hljs-string">width :</span> <span class="hljs-string">'100%'</span>,
                    <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/images/listItem.png'</span>,
                    <span class="hljs-string">backgroundSelectedImage :</span> <span class="hljs-string">'/images/listItemOver.png'</span>,
                    <span class="hljs-string">index :</span> i,
                    <span class="hljs-string">type :</span> <span class="hljs-string">'offre'</span>,
<span class="hljs-label">                    className:</span> <span class="hljs-string">'offre'</span>,
                    <span class="hljs-string">hasChild :</span> <span class="hljs-literal">false</span>
                });

                rows.push(offre);
            }
        }

        tableViewOffres.appendRow(rows);
        page++;     
    });
</code></pre><p>i dont see the bug…thanks again for help</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 4:47:04 pm">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanks for you help Malcom, the problem above is another problem..</p>
<p>thanks again :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 5:02:57 pm">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ah, i have a problem with page :</p>
<pre><code class="hljs"> <span class="hljs-keyword">if</span>(e.firstVisibleItem + e.visibleItemCount + <span class="hljs-number">3</span> &gt; e.totalItemCount) {
            <span class="hljs-comment">//alert('load');</span>
            var rows = [];
               <span class="hljs-keyword">for</span> (var i = limit * page; i &lt; limit * (page + <span class="hljs-number">1</span>) &amp;&amp; i &lt; data.length; i++) {
                   var offre = Ti.UI.createTableViewRow({
                    <span class="hljs-string">height :</span> <span class="hljs-number">79</span>,
                    <span class="hljs-string">width :</span> <span class="hljs-string">'100%'</span>,
                    <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/images/listItem.png'</span>,
                    <span class="hljs-string">backgroundSelectedImage :</span> <span class="hljs-string">'/images/listItemOver.png'</span>,
                    <span class="hljs-string">index :</span> i,
                    <span class="hljs-string">type :</span> <span class="hljs-string">'offre'</span>,
<span class="hljs-label">                    className:</span> <span class="hljs-string">'offre'</span>,
                    <span class="hljs-string">hasChild :</span> <span class="hljs-literal">false</span>
                });

                rows.push(offre);
            }

            tableViewOffres.appendRow(rows); 
            page++;
        }
</code></pre><p>as you see, i increment the page, but the page is incremented many times. i tought that rows added, the totalItemCount increases so page is executed only one time when we are in the bottom. it is not the case…</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 5:13:59 pm">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>it seems that e.totalItemCount is not refreshed even if i add rows..</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 5:23:16 pm">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Then keep a count of the rows you start with in your own variable and then add to it when you add rows - use this not the built in value.</p>
<p>Also, you should not add ONE record every time, you should get to the bottom (the TRUE I pointed out above) and then add several at once - much more efficient - much less likely to cause errors.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 5:28:51 pm">April 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>BTW stop marking the question as answered only to un-mark a bit later, very annoying, choose one and stick to it.  You have a certain reputation that means that others are not always ready to pitch in - this is one of those reasons.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 5:30:28 pm">April 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i changed e.totalItemCount to rows.length (rows changes when we call appendRow) and page increase very quickly so the first time im on the bottom, it loads all data.</p>
<p>here is my code :</p>
<pre><code class="hljs">tableViewOffres.addEventListener(<span class="hljs-string">'scroll'</span>, function(e) {
        <span class="hljs-keyword">if</span>(e.firstVisibleItem + e.visibleItemCount + <span class="hljs-number">3</span> &gt; rows.length) {
                var rows2 = [];
               <span class="hljs-keyword">for</span> (var i = limit * page; i &lt; limit * (page + <span class="hljs-number">1</span>) &amp;&amp; i &lt; data.length; i++) {
                   var offre = Ti.UI.createTableViewRow({
                    <span class="hljs-string">height :</span> <span class="hljs-number">79</span>,
                    <span class="hljs-string">width :</span> <span class="hljs-string">'100%'</span>,
                    <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/images/listItem.png'</span>,
                    <span class="hljs-string">backgroundSelectedImage :</span> <span class="hljs-string">'/images/listItemOver.png'</span>,
                    <span class="hljs-string">index :</span> i,
                    <span class="hljs-string">type :</span> <span class="hljs-string">'offre'</span>,
<span class="hljs-label">                    className:</span> <span class="hljs-string">'offre'</span>,
                    <span class="hljs-string">hasChild :</span> <span class="hljs-literal">false</span>
                });

                rows2.push(offre);
            }

            tableViewOffres.appendRow(rows2);
            page++; 
            alert(<span class="hljs-string">"total : "</span> + e.totalItemCount + <span class="hljs-string">' | page : '</span> + page);

        }  
    });
</code></pre><p>any ideas ?</p>
<p>rows2 are rows to add the main array rows wich contain all tableViewRow of tableView..</p>
<p>thanks for help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 5:40:18 pm">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>resolved….it was a coding error. i used two arrays :s..</p>
<p>thanks. now i can mark as bes anwser..</p>
<p>thanks again.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 6:09:03 pm">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-261282">
				
						<section>
							<p>I think the answer to your question is no….</p>
<p>Listview is a new method of displaying data. But is restrictive, and I think intentionally aimed at displaying a static list efficiently.</p>
<p>If you want to do paging you would probably still be best using a tableview…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 22nd 2013, 11:04:37 am">April 22nd 2013</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/151348/listview-android#answer-261282" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ok so the problem is :<br>i used tableView but i need offset in scroll event and i dont have it.</p>
<p>on iPhone it is : e.contentOffset.y</p>
<p>on android, it doesn&#39;t work…so is there another solution ?</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 11:06:37 am">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>can you just help for that problem : https:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;151291&#x2F;width-problem-on-android</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 6:09:42 pm">April 22nd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
