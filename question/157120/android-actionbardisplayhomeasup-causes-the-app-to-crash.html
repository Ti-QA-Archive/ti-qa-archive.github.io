<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android actionBar.displayHomeAsUp causes the app to crash » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android actionBar.displayHomeAsUp causes the app to crash</h1>
		</header>
		<section>
			<p>I have the weirdest issue ever,<br>Same code I&#39;m using in multiple windows on an android app, causes the app to crash on a specific window…</p>
<pre><code class="hljs">win.addEventListener(<span class="hljs-string">"open"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(evt)</span> </span>{ 
    <span class="hljs-keyword">var</span> actionBar = win.activity.actionBar; 
        actionBar.displayHomeAsUp = <span class="hljs-literal">true</span>;

        actionBar.backgroundImage = <span class="hljs-string">'images/bg_navbar_short.png'</span>;

        actionBar.onHomeIconItemSelected = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{      
               win.close();
            }; 
});
</code></pre><p>I don&#39;t know specificaly wich line from this function is causing it.. but if I isolate this code .. and get the lame window without the icon on top it works..<br>If I try to do an action bar.. it crashes and i get the &quot;Unfortunately App stopped running&quot; dialog</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 12th 2013, 1:39:55 pm">September 12th 2013</span>
				by <span class='authorname'>Cristian Alexandru</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>actionbar</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>error</span></li>
					
						<li><span class='tagname'>event</span></li>
					
						<li><span class='tagname'>menu</span></li>
					
				</ul>
			

			<section>
				<h5>6 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Oh by the way I&#39;m trying with the last SDK and Galaxy S4</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 12th 2013, 1:40:30 pm">September 12th 2013</span>
								by <span class='authorname'>Cristian Alexandru</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Now I see the emulator makes the same problem, .. I don&#39;t really know what might have changed…<br>here&#39;s my log:</p>
<pre><code class="hljs">E/SurfaceFlinger(   37): ro.sf.lcd_density must be defined as a build property
D/AndroidRuntime( 2026): Shutting down VM
W/dalvikvm( 2026): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
I/TiAPI   ( 2026):  scroll line 1725
E/TiApplication( 2026): (main) [53692,1583227] Sending event: exception on thread: main msg:java.lang.NullPointerException; Titanium 3.1.1,2013/06/15 16:10,f7592c1
E/TiApplication( 2026): java.lang.NullPointerException
E/TiApplication( 2026):     at org.appcelerator.titanium.proxy.ActionBarProxy.handlesetDisplayHomeAsUp(ActionBarProxy.java:178)
E/TiApplication( 2026):     at org.appcelerator.titanium.proxy.ActionBarProxy.handleMessage(ActionBarProxy.java:201)
E/TiApplication( 2026):     at android.os.Handler.dispatchMessage(<span class="hljs-operator"><span class="hljs-keyword">Handler</span>.<span class="hljs-keyword">java</span>:<span class="hljs-number">95</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> android.os.Looper.<span class="hljs-keyword">loop</span>(Looper.<span class="hljs-keyword">java</span>:<span class="hljs-number">137</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> android.app.ActivityThread.<span class="hljs-keyword">main</span>(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">5041</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invokeNative(<span class="hljs-keyword">Native</span> Method)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invoke(Method.<span class="hljs-keyword">java</span>:<span class="hljs-number">511</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">793</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit.<span class="hljs-keyword">main</span>(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">560</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> dalvik.<span class="hljs-keyword">system</span>.NativeStart.<span class="hljs-keyword">main</span>(<span class="hljs-keyword">Native</span> Method)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>): FATAL <span class="hljs-keyword">EXCEPTION</span>: <span class="hljs-keyword">main</span>
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>): <span class="hljs-keyword">java</span>.lang.NullPointerException
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> org.appcelerator.titanium.proxy.ActionBarProxy.handlesetDisplayHomeAsUp(ActionBarProxy.<span class="hljs-keyword">java</span>:<span class="hljs-number">178</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> org.appcelerator.titanium.proxy.ActionBarProxy.handleMessage(ActionBarProxy.<span class="hljs-keyword">java</span>:<span class="hljs-number">201</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> android.os.<span class="hljs-keyword">Handler</span>.dispatchMessage(<span class="hljs-keyword">Handler</span>.<span class="hljs-keyword">java</span>:<span class="hljs-number">95</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> android.os.Looper.<span class="hljs-keyword">loop</span>(Looper.<span class="hljs-keyword">java</span>:<span class="hljs-number">137</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> android.app.ActivityThread.<span class="hljs-keyword">main</span>(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">5041</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invokeNative(<span class="hljs-keyword">Native</span> Method)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invoke(Method.<span class="hljs-keyword">java</span>:<span class="hljs-number">511</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">793</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit.<span class="hljs-keyword">main</span>(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">560</span>)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">2026</span>):     <span class="hljs-keyword">at</span> dalvik.<span class="hljs-keyword">system</span>.NativeStart.<span class="hljs-keyword">main</span>(<span class="hljs-keyword">Native</span> Method)
W/ActivityManager(  <span class="hljs-number">398</span>):   <span class="hljs-keyword">Force</span> finishing activity com.wontonmedia.SimpleRounds/org.appcelerator.titanium.TiModalActivity</span>
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="September 12th 2013, 2:37:48 pm">September 12th 2013</span>
								by <span class='authorname'>Cristian Alexandru</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>What Ti SDK version are you using?  3.1.2 has some issues with ActionBar and holo themed apps. Try going down to 3.1.1.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 12th 2013, 5:42:07 pm">September 12th 2013</span>
								by <span class='authorname'>Adam Paxton</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Just saw your first comment… So, try going down to 3.1.1.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 12th 2013, 5:56:35 pm">September 12th 2013</span>
								by <span class='authorname'>Adam Paxton</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>actually it does the same with 3.1.1,  yes i know about those issues with 3.1.2 but it&#39;s not one of them…<br>Has something to do with my window contents,<br>Just created a blank one, and everything&#39;s fine…</p>
<p>It&#39;s another thing that I have on my window (got 2400 lines there) that causes the problem..</p>
<p>The weird thing is that If I add that displayhomeasup=true at the very end of my window commonjs wrapper  .. it breaks the window,..otherwise it works…</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 12th 2013, 6:40:22 pm">September 12th 2013</span>
								by <span class='authorname'>Cristian Alexandru</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>OK, Found the answer,<br>modal:true was enabled in the actual window….<br>so no activity home button if modal is true…<br>it will cause your app to fail!</p>
<p>why those things arren&#39;t somehow debugged or messaged properly.. it took me 3 hours to &quot;discover&quot; that<br>I can&#39;t undestand nothing from the logcat output …<br>same with other errors that I&#39;m having…causing nightmares to make an app stable and respect the standards</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 12th 2013, 6:49:51 pm">September 12th 2013</span>
								by <span class='authorname'>Cristian Alexandru</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
