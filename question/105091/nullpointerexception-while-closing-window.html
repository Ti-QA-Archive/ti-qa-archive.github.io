<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>NullPointerException while closing window » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>NullPointerException while closing window</h1>
		</header>
		<section>
			<p>hi,</p>
<p>when i close a window while there still are methods using the window instance i get a <strong>java.lang.NullPointerException</strong></p>
<p>is there a way to avoid it?</p>
<p>i have a window that does some calculation for like 1sec.</p>
<p>when the user clicks the back button during this time, the error occurs. even if i catch the &quot;android:back&quot; event it doesn&#39;t help.</p>
<p>here the use case: <a href="http:&#x2F;&#x2F;pastebin.com&#x2F;661Xju17">link</a><br>when click on back button, i get a force close.<br>(<em>of course, this is just a very simple use case, easy to avoid. but the principle behind it doesn&#39;t change.</em>)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 26th 2011, 11:09:35 am">January 26th 2011</span>
				by <span class='authorname'>marcin kolonko</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>close</span></li>
					
						<li><span class='tagname'>nullpointerexeption</span></li>
					
						<li><span class='tagname'>window</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-186361">
				
						<section>
							<p>Marcin</p>
<p>This is an interesting question, but I cannot replicate your exact issue. This may be because of the fact that although the use-case is nice and simple, which is indeed one of the important requirements of a useful use-case, it must be  modified in order to get it to execute. Hence, I ended up with possibly an entirely different scenario on my system. Please read <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;guides&#x2F;en&#x2F;contribute.html#creating_good_use-cases">Creating Good Use-cases</a> for more information about this.</p>
<p>If you paste some improved code, I will take another look.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 27th 2011, 2:11:02 pm">January 27th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/105091/nullpointerexception-while-closing-window#answer-186361" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-209659">
				
						<section>
							<p>I have the same issue, I&#39;m calling window.close and it is throwing the NullPointerException, yet I can see that it&#39;s actually closing the window successfully. Were you able to get this resolved?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 8th 2011, 6:47:24 pm">June 8th 2011</span>
								by <span class='authorname'>Justin Toth</span><br>
								<a class="icon-bg icon-link" href="question/105091/nullpointerexception-while-closing-window#answer-209659" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Again, Justin, please refer to the link I have provided. Thank you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2011, 6:11:00 pm">June 9th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Paul - My response was validating that an issue does exist and asking Marcin if he ever found a solution, if I posted the original question then I would provide code to reproduce. </p>
<p>There ended up being a bug in Android on the 1.7 build regarding opening multiple modal windows on top of each other, when you close a modal window then it does not set Ti.UI.currentWindow to the window underneath it so when you call close on the next one it throws the NullPointerException since that window was already closed. </p>
<p>The work around is to store a reference to the current window within the scope of that window so that you can close it later on without relying on Ti.UI.currentWindow.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2011, 6:34:40 pm">June 9th 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Justin</p>
<p>If Titanium is not behaving correctly, as you claim with modal windows, then by definition a bug exists. As I am sure that you and I would rather have a correctly working platform than to have to use workarounds, a proper way to replicate the bug is essential in order for us to raise a ticket and have it fixed. Without a ticket there will be no fix, and without a usecase there will be no ticket.</p>
<p>Please let me know where your usecase is, and we can progress this process.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2011, 9:00:08 pm">June 9th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Paul - First of all, not everyone on this forum is a Titanium employee and gets paid to write up use cases for every bug that exists. If those of us who actively develop in Titanium were to create code examples reproducing every bug we find then we would never get any real work done. If the Titanium support team sees multiple threads about an issue then between the developers and the QA team, you guys can try and reproduce the issue and fix it if a reproduce was successful. That&#39;s your job. </p>
<p>Secondly, I already gave you the example in the thread that I created about this issue - http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;120738&#x2F;possible-bug—closing-2-modal-windows-causes-nullpointerexception-in-windowclose - My purpose in responding to this thread was to ask the author if he figured out the issue on his end, as I had the same issue myself, not to quibble with you.</p>
<p>Third, I&#39;ve read a bunch of other responses that you&#39;ve given over the last year and a little feedback… When people take the time to give you code to reproduce the issue and you try it and it works for you, don&#39;t patronize them for wasting your time that you could&#39;ve been spending helping others, all that does is make people not want to write up code for you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 2:21:57 pm">June 16th 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Justin</p>
<p>I would like to point out that I was writing concise usecases for Titanium, and including them in tickets, <strong>long</strong> before I began working for Appcelerator. In fact, I have no doubt that this was one of the contributing factors that prompted the company to approach me in the first place.</p>
<p>My recompense, at that time, was knowing that a good usecase helped expedite tickets that were inhibiting my projects. I also felt it was worth the extra effort and inconvenience because so many other developers could potentially be helped by the resolution of just one issue.</p>
<p>On a personal level, also, I consider the act of writing proper usecases an absolutely essential tool when developing my apps, because they have given me much greater insight into how Titanium works. Furthermore, when faced with an issue that I have suspected was a bug, the process of creating a usecase has often simplified the problem and consequently revealed the cause. On the majority of occasions, I have to admit, it was my own error rather than Titanium&#39;s.</p>
<p>Thus, I have seen countless reports in this forum of very similar problems where Titanium has not worked as the users would expect. With a worded description of the issue, or pseudocode, they are simply impossible to replicate.</p>
<p>Regarding your issue, I have actually done quite a bit of work investigating it, but unfortunately I have been sidetracked by other work. I will look at it again, and report back in your ticket.</p>
<p>Lastly, of course, I regret the tone that you have interpreted in something that I have written. Throughout my participation in the Q&amp;A, which also began long before I joined the Appcelerator, I have tried to keep the tone in accordance with how I would expect others to behave; amiable and with a great deal of goodwill. However, I will certainly bear your comments in mind.</p>
<p>Regards</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 4:07:31 pm">June 16th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
