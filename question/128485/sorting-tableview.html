<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Sorting TableView » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Sorting TableView</h1>
		</header>
		<section>
			<p>Hello!</p>
<p>I&#39;d like to sort a tableview with custom rows after the row variable &quot;dist&quot; but it&#39;s not going very well. This is the code for generating the rows.</p>
<pre><code class="hljs">function getListRows(){
    var rows = [],i=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; getData().length; i++)
    {
        var row = Ti.UI.createTableViewRow({
            className: <span class="hljs-string">'FWOA'</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-string">'70dip'</span>
        });
        row.ID = getData()[i].ID;

        var imagePreview = Ti.UI.createImageView({
            <span class="hljs-variable">height</span>: <span class="hljs-string">'60dip'</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-string">'60dip'</span>,
            url: getData()[i].imageURL,
            left: <span class="hljs-number">0</span>
        });
        var compositionTitle = Ti.UI.createLabel({
            <span class="hljs-built_in">text</span>: getData()[i].compositionTitle,
            left: <span class="hljs-string">'70dip'</span>,
            font: {fontSize: <span class="hljs-string">'20dip'</span>},
            top: <span class="hljs-number">0</span>
        });
        var artist = Ti.UI.createLabel({
            <span class="hljs-built_in">text</span>: getData()[i].artist,
            left: <span class="hljs-string">'70dip'</span>,
            font: {fontSize: <span class="hljs-string">'16dip'</span>},
            top: <span class="hljs-string">'22dip'</span>
        });
        var distance = Ti.UI.createLabel({
            left: <span class="hljs-string">'70dip'</span>,
            font: {fontSize: <span class="hljs-string">'16dip'</span>},
            top: <span class="hljs-string">'40dip'</span>
        });
        var <span class="hljs-built_in">dist</span> = getDistance(lati,getData()[i].latitude,longi,getData()[i].longitude);
        var distText = <span class="hljs-built_in">dist</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">dist</span> &lt; <span class="hljs-number">1000</span>)
            distText = distText + <span class="hljs-string">" meter"</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">dist</span> &gt;= <span class="hljs-number">1000</span> &amp;&amp; <span class="hljs-built_in">dist</span> &lt; <span class="hljs-number">10000</span>)
            distText = distText + <span class="hljs-string">" km"</span>;
        distance.<span class="hljs-built_in">text</span> = <span class="hljs-string">"Avstånd: "</span> + distText;

        row.<span class="hljs-built_in">add</span>(artist);
        row.<span class="hljs-built_in">add</span>(compositionTitle);
        row.<span class="hljs-built_in">add</span>(imagePreview);
        row.<span class="hljs-built_in">add</span>(distance);
        rows.push(row);
    }
    <span class="hljs-keyword">return</span> rows;
}
</code></pre><p>And this is where i try to sort the rows</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sortRows</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> sortData = tableView.data;
    sortData.sort(sortDistance);
    tableView.setData(sortData);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sortDistance</span><span class="hljs-params">(o1,o2)</span>
</span>{
    <span class="hljs-keyword">if</span> (o1.dist &gt; o2.dist)
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (o1.dist &lt; o2.dist)
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre><p>I get error</p>
<pre><code class="hljs">TypeError: Cannot find <span class="hljs-annotation">default</span> <span class="hljs-keyword">value</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">object</span>
</code></pre><p>What am i doing wrong here?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 20th 2011, 11:51:11 am">November 20th 2011</span>
				by <span class='authorname'>Anton Gildebrand</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>tableview</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>can you provide more information on <code>getData()</code>? Also I would recommend sorting the data before adding it to the table.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 20th 2011, 2:06:04 pm">November 20th 2011</span>
								by <span class='authorname'>Aaron Saunders</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-223832">
				
						<section>
							<p>Hi Anton</p>
<p>Tableview for appcelerator Titanium is quiet not totally equipped with the functionality such as sorting, searching and updating. We have to acheive that with the code logic.</p>
<p>Once the data comes in the tableview after that you cannot able to make any update in it. So when you need to sort the data first you have to remove the current table view and then sort the array as per the user instuction and then create the new tableview with the sorted array. This will be the quick solution.</p>
<p>I again says that if there is any better solution for this then do provide.</p>
<p>Regards</p>
<p>Nikunj</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 21st 2011, 1:23:06 am">November 21st 2011</span>
								by <span class='authorname'>Nikunj Sakhrelia</span><br>
								<a class="icon-bg icon-link" href="question/128485/sorting-tableview.html#answer-223832" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I was able to solve this, i sorted the data before i made it into TableViewRows =)</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 21st 2011, 3:13:38 pm">November 21st 2011</span>
											by <span class='authorname'>Anton Gildebrand</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
