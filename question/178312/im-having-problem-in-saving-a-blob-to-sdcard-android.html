<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>I&#39;m having problem in saving a BLOB to sdcard (Android) Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>I&#39;m having problem in saving a BLOB to sdcard (Android)</h1>
		</header>
		<section>
			<p>Hi, I&#39;m quite new to Titanium and I&#39;m sorry if I am not specific with my question.<br>I have a blob which I&#39;m getting from my web view as follows</p>
<pre><code class="hljs"><span class="hljs-comment">"data:image/png;base64</span><span class="hljs-string">,</span><span class="hljs-comment">iVBORw0KGgoAAAANSUhEUgAAAmwAAAGDCAYAAACWb0zvAAAABHNCSVQICAgIfAhkiAAAIABJREFUeJzUvd2LJUmS9vcTRII5RII7ZMEJ6IY5sANbgwTvLBJIC7pZ0M0LupH</span><span class="hljs-literal">+</span><span class="hljs-comment">Z</span><span class="hljs-literal">+</span><span class="hljs-comment">lCMC3Yl8mFHTgNXRAHKsEdMsANMmB1YWYecbL7lXTZE9BdVflxIsLd3D4ee8zsv/mP//iP/</span><span class="hljs-literal">+</span><span class="hljs-comment">Dv4NIdbj/fKLnAJKz3lfV2Y90U3UFopDlzXQr5JbO8LAiwvlXu9zu9Q9sqTMAOqopMICKICCkl</span><span class="hljs-literal">+</span><span class="hljs-comment">nvn/nanb5UkgkhCJ/u</span><span class="hljs-literal">+</span><span class="hljs-comment">AEyCpIT2jqra5</span><span class="hljs-literal">+</span><span class="hljs-comment">yKzBn2Bjtcf8zkXGBXoJPmQt</span><span class="hljs-literal">+</span><span class="hljs-comment">U</span><span class="hljs-literal">+</span><span class="hljs-comment">1qpW0PV3kfkQtsalxn</span><span class="hljs-literal">+</span><span class="hljs-comment">9PUr</span><span class="hljs-literal">+</span><span class="hljs-comment">aXYe04ddhDg9W</span><span class="hljs-literal">+</span><span class="hljs-comment">v/OX//Am0w66074312431bUXfK0Ji</span><span class="hljs-literal">+</span><span class="hljs-comment">fNX/vP/8p/55//pXxARFGACJVFb5af/6yd074gUlh8Xsgi3X1Zu326gjPUQEcqcwN9VAfzdSin2tb37sye7166wCzlnrj8s3O4rt9dX7m</span><span class="hljs-literal">+</span><span class="hljs-comment">NvlVKLlz/eOX6hysy2R7a/br9Hegb3O83am22jk</span><span class="hljs-literal">+</span><span class="hljs-literal">+</span><span class="hljs-comment">vlujtkpTRSZ7IlUl50yShADLciHPxZ55OgnLBCD</span><span class="hljs-literal">+</span><span class="hljs-comment">J6Qp0YH7zzdu6wo7/jtCnqBtjfW</span><span class="hljs-literal">+</span><span class="hljs-comment">0rZGDnkQ4XJZKF8W30tQ7dT3hm5qsjCBKqz3ldsvN3RrANSts1wWlmXh</span><span class="hljs-literal">+</span><span class="hljs-comment">sPizyS2dqfnFBGTrydIUuha0Q7trdFVUa201sb7A</span><span class="hljs-literal">+</span><span class="hljs-comment">RZQITksouvU5Jk61wusCv6AbU12lbpm5JEyC</span><span class="hljs-literal">+</span><span class="hljs-comment">F649XShbb81lMJnfQ9cbr327UX27Ik4kcgKaMviurQv6y8Kf/8V/oW</span><span class="hljs-literal">+</span><span class="hljs-comment">d</span><span class="hljs-literal">+</span><span class="hljs-comment">t3eVWUEgbxV2pUxqzzgp7J00FZigN2itcluV159vyMvCP/8P/8z1</span><span class="hljs-literal">+</span><span class="hljs-comment">pVaK2u7k</span><span class="hljs-literal">+</span><span class="hljs-comment">ZM15UkheuSqbXBW0V3ZcmFy49Xyks2uRN7ByaQyWSxtsbt32</span><span class="hljs-literal">+</span><span class="hljs-comment">0Vqmtodr583/6J5ZloeRs37</span><span class="hljs-literal">+</span><span class="hljs-comment">tqCpK53pZkOfC7ZcVAa5fr1wvV/t835</span><span class="hljs-literal">+</span><span class="hljs-comment">mStc</span><span class="hljs-literal">+</span><span class="hljs-comment">7sWudoZ3HfKsCv29cn</span><span class="hljs-literal">+</span><span class="hljs-comment">7j3UN</span><span class="hljs-literal">+</span><span class="hljs-comment">VNVuvpaxLnZ7PMvP14pIg96TuSQW5ns72lK9pk71Fa5/XLjp//7lfp9RXelPBculwslF9NLfq2tArC8FDtbML4vfl9tjbpVylzs2VTpfs5Dv6kqIsLyw4JMQntb6cD1spCeF3pXbt9u3H6</span><span class="hljs-literal">+</span><span class="hljs-comment">2f0uF2SC1hrLS</span><span class="hljs-literal">+</span><span class="hljs-comment">brf/enQ</span><span class="hljs-literal">+</span><span class="hljs-comment">4nEOK9ZJyt7mekvd34y7/</span><span class="hljs-literal">+</span><span class="hljs-comment">xO31hu6dthXW</span><span class="hljs-literal">+</span><span class="hljs-comment">8rrvzdu//ZXoHH9w5XrZeX645VLLqSJocsEW6O2K9fLwvL1KzILkhfKl0x</span><span class="hljs-literal">+</span><span class="hljs-literal">+</span><span class="hljs-comment">ZOvZYZd7Rmws/J6u/H6X16R2WVsP/ZEwh7s1eRNdehKsDNba7Vz</span><span class="hljs-literal">+</span><span class="hljs-comment">ZQOPeTyUC6LrfkOdasmNK5zxZ</span><span class="hljs-literal">+</span><span class="hljs-comment">BydZAt0bVDmrn1uQhDXkYz</span><span class="hljs-literal">+</span><span class="hljs-comment">b/7qpm29T1tduf2iq6KfnFvqa70luFHdIs5FyQ54X2fWV9W2mtAZ2cCyXbO1</span><span class="hljs-literal">+</span><span class="hljs-comment">XKzIXVEG3Sv</span><span class="hljs-literal">+</span><span class="hljs-comment">AUgpLXvx5T2eDFDsJO/QdWrtTa0dRSirUvdO</span><span class="hljs-literal">+</span><span class="hljs-comment">3</span><span class="hljs-literal">+</span><span class="hljs-comment">1MTYnia1xbJU1Cvixmb8Tsxbqu1Fa5/mHhT1</span><span class="hljs-literal">+</span><span class="hljs-comment">/us5Ve</span><span class="hljs-literal">+</span><span class="hljs-literal">+</span><span class="hljs-comment">dsX9hfxHGvsUadTV9nVwGe3yf4yy33c5K3Vfa9waT</span><span class="hljs-literal">+</span><span class="hljs-comment">QryjNkYVZpW6mr3SeJ6Z7yr6RQms4/puZMlUXKnbgrbarJEYrlcWF6uiCRu99XPpLgus3O6vjVardTt7k/ah4j87i8F1vud9X4fhn693bh9O/6tVFrr</span><span class="hljs-literal">+</span><span class="hljs-comment">BK6gwHrL6s5YWoGVyQNh0EmTkq00TYT8rHhvgF1O3/NhHLcd4esSpo6HZDvpuD4aPAkSFN0V24/r9TWkHwxZ1ISsiuqjfVtpeMO4OSHUTuv//rKfV1N2W3K7ecbdb2Ne0OnvVVe//ZKeVlYviyu</span><span class="hljs-literal">+</span><span class="hljs-comment">EAR1B1UIdlOa6ft5qDo5orYHdJ4lzjQuiuoUi62lj0Oyg4ipmxU1RTk92qfWSv3t5X12536bvde3jP1LT7fBDMMot0H6ruvGc0Mve</span><span class="hljs-literal">+</span><span class="hljs-comment">5qo7DqdqG4VQ5nO3</span><span class="hljs-literal">+</span><span class="hljs-comment">oaSnk9GbQKaTwkRoNJOh75X1zQ6mTLbvyGHE2DEHUZV7KJxNh7Fpm9K3</span><span class="hljs-literal">+</span><span class="hljs-comment">iibyjBo7JnWTPElMQUbSi49gcxlOK7x/CkXv/fdDM2m9PfjHukpDUXOrjRV2JQ2mfO2iFDcaWUHfW</span><span class="hljs-literal">+</span><span class="hljs-comment">uKCu3n29oV3jytdrVHW0zVrzZOveu6N0UY2vVnnGzXeji6zhl0gT1baU1tXX8AJ6bG</span><span class="hljs-literal">+</span><span class="hljs-comment">BwaleqCEt2OXRFuN6V5O</span><span class="hljs-literal">+</span><span class="hljs-comment">eRVh</span><span class="hljs-literal">+</span><span class="hljs-comment">vFK3jnw3R69tlftbhUmRSenbSruvyA7Ly0LXTqvVZaGPwGRcO9R3O0sAJWcgw2773r7Xw7Dt0LXxV1WSNNCOCqy/mDNlTlPI1KHU7f06/eNBBNBdaU2p7lyK5vE9mUxuTB4TfVO0VZiE3Du198cPm3zPQ5bF5Fc2GYHm/X6nfl9tf4Emjf7RaR4wjOfalP5h6913XzdVci5kd0rqZka9UhGVoRvOV6eTNNk5EDHDvsMNKE2pm3K/r2jt4zwprjcnuNRKSgAmwzLOpa</span><span class="hljs-literal">+</span><span class="hljs-comment">rr7V25a8//8RPP/2F</span><span class="hljs-literal">+</span><span class="hljs-comment">tYocybnTN9MJpAEasGVaAO9IX8EZiGRHtYQVdb7ioqQv2TE166</span><span class="hljs-literal">+</span><span class="hljs-comment">J0rJgDnRMtn5qrVT31bqe2WRw4Gq311fPJuhBQ/w/OslJfJs50k9</span><span class="hljs-literal">+</span><span class="hljs-comment">CnZ36kznLaIgHTnOMeqQ65cWoaTr/69NsACWzf1NdTdjnzo4dgz2V1H7Ydea1sbn2k/1xEt5si8Ke2tUreVVg/9C6YfZWoUVQc83CkaDmO8n</span><span class="hljs-literal">+</span><span class="hljs-comment">l1mdrJNtnX11rHmeqpw8fxvrpVdD/Zhh1ozfXp6We2RntLrPf7sGNx9luADrjTw/FsZtdBiec7dG/8Rtj1vivaK2u7GeCwryhQBC6XBdMDHW0NENQDxaZK3IEdOtUc0blTJfGqNzvrmM1MKO29c7vdxzPk50yahFobuguShFYba6uHrcTW8PfjsMVG/8YTDXQnFlqVthkCgUfw7B71uFNhh8SEtG/uYMV/U0IwD/</span><span class="hljs-literal">+</span><span class="hljs-comment">4nyDCiGTD4AJmLEJYaSbIcyGJmJJuFWZHgRpUHMEQ4Bn4cOO/dy4u5GouGjkk8xQVqHa0uvFxhabaLWJSe8aUZHj467qy3leWLxlIaAj0HkJVQTGBwAxUOGmBWOVZbI1ap</span><span class="hljs-literal">+</span><span class="hljs-comment">46lELXjpI5zJev1lBQgu4N9QgnHKFCYXlZyKWQJNP3UE6PxoAJyrNQpzxQTJ4gT0KfK7TGuPnZUE4SGuvhs34lU/G1/VCCphg9MtztM4pHkXHgezdFoWKoI3o487Z0odQtgs0vGVXl9VXJrhR0V9p3f99ZuFzEEddKmgtZ7OCrf/a6mrNXN4v8c86UZ/szHAdDPCzwSJJZLsXUUYpI3BUTUPsrqkpJhwPxsFaKKVB1p</span><span class="hljs-literal">+</span><span class="hljs-comment">SEzkQEq3unzIVUDIFpzRwfcEcQk0NDVCr6vXJZCiLLoVRbp3VXapOhDfklw5Qc0QmjfTIECFWV8gHyUsBDMfVgS8Ud8xPqW4CWDclYSkZdXvquI6rOszvIm31dJvt8Qy/E0fpDDgJpfrzCOLiMIchk50V3Oxtgf1dAN0dJ946qOXB5PqEq43PMsY</span><span class="hljs-literal">+</span><span class="hljs-comment">vP6DGe3y</span><span class="hljs-literal">+</span><span class="hljs-comment">PVdKiSTp4TMOHafU3v08MZwD3ZohDY4WoY7iiQ59YLLfx</span><span class="hljs-literal">+</span><span class="hljs-comment">emlEhTsmBPDZEGf7Yd6qY0d3SGAfc10q4wH3ICmLyf1lcmYFJ0N7T3/m1l/bYCirxklueE/MGcb5ng9jcPDh09kdnOVOhqQUl7GetUW3V97SjFVA0ZS33Ik5AOxNTfO4vLgiTaZtkMkWQ2Y6</span><span class="hljs-literal">+</span><span class="hljs-comment">I75PMQnkp9Fmo732scX42PTxkEGDvJoeTOArtez4ZCNCVX9mBA0lTNBDe4SDJYdN8T2Qy57XTzZGMjJKfsQHo7ubQ676aE9fPGSfbrzSQfT972mFPR6bkJJeCDmfyCHYYMigiFCnopMiToB8WhEsgo1qOwFjVAkYPmofVOIEk8nCD0192d592Oe7Nb1xTQvZuAAlKe7</span><span class="hljs-literal">+</span><span class="hljs-comment">xvlXWt1cPfCraFU1iltpVQCEjs52ddjqPHkLS9oZMSgWSI2d5zqQ5AgpD3NR1T/mykOYCu9DUdH/Zhb6bs9ndJumulJffk8P2/</span><span class="hljs-literal">+</span><span class="hljs-comment">dJXIC6WsooHBZLiVQ//Ed6LBZT3ZEIWNE</span><span class="hljs-literal">+</span><span class="hljs-comment">Kx1Quuij4tzVFmryqCicNf/sSJnlWSyl96ZDkSkK</span>
</code></pre><p>The files saves on the sdcard but when I try to open it it says that it could not open the image file. Here is my code where I save the image. </p>
<pre><code class="hljs">Ti.App.addEventListener(<span class="hljs-string">'web:saveChanges'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-comment">// Ti.API.warn(JSON.stringify(e.blob));</span>
    <span class="hljs-keyword">var</span> Blob = e.blob;
    <span class="hljs-keyword">var</span> file = Titanium.Filesystem.getFile(Titanium.Filesystem.externalStorageDirectory,<span class="hljs-string">'image_1.png'</span>);
    <span class="hljs-keyword">if</span> (file.write(Blob)) {
        alert(<span class="hljs-string">"saved"</span>);
    } <span class="hljs-keyword">else</span> {
        alert(<span class="hljs-string">"failed"</span>);
    }

});
</code></pre><p>Thanks in advance if anyone would kindly give me a solution.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 10th 2014, 3:58:22 am">October 10th 2014</span>
				by <span class='authorname'>Kavindu Wijesuriya</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>blob</span></li>
					
						<li><span class='tagname'>file</span></li>
					
						<li><span class='tagname'>file.write(blob)</span></li>
					
						<li><span class='tagname'>save image</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-282998">
				
						<section>
							<p>I found the answer myself. Thought to share if it would be a help to anyone. You have to make changes as the following. </p>
<pre><code class="hljs">Ti.<span class="hljs-keyword">App</span>.addEventListener('saveChanges', function(<span class="hljs-keyword">e</span>) {
    <span class="hljs-keyword">var</span> Blob = <span class="hljs-keyword">e</span>.blob.<span class="hljs-keyword">toString</span>();
    Ti.API.warn(Blob);
    <span class="hljs-comment">// just have to delete the text `"data:image/png;base64,"` and just decode the blob to base64 :)</span>
    <span class="hljs-keyword">var</span> rp = Blob.<span class="hljs-keyword">replace</span>(<span class="hljs-string">"data:image/png;base64,"</span>, <span class="hljs-string">""</span>);
    Ti.API.warn(rp);
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">file</span> = Titanium.Filesystem.getFile(Titanium.Filesystem.externalStorageDirectory,'final.png');
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">file</span>.write(Ti.Utils.base64decode(rp))) {
        alert(<span class="hljs-string">"saved"</span>);
    }
    <span class="hljs-keyword">else</span> {
        alert(<span class="hljs-string">"failed"</span>);
    }

});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 10th 2014, 7:25:44 am">October 10th 2014</span>
								by <span class='authorname'>Kavindu Wijesuriya</span><br>
								<a class="icon-bg icon-link" href="question/178312/im-having-problem-in-saving-a-blob-to-sdcard-android#answer-282998" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
