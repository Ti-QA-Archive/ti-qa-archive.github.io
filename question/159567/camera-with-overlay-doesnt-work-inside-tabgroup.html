<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Camera with overlay doesnt work inside TabGroup Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Camera with overlay doesnt work inside TabGroup</h1>
		</header>
		<section>
			<p>Guys, I&#39;ve been battering on this issue and can&#39;t seem to get it working.</p>
<p>I have set a simple Alloy application that has no more than a TabGroup with a single tab (At the moment). In this tab, I define camera and overlay. Problem is, no video feed is shown when running (Android device). All inside the tab is Black. Plus, the application seems to freeze, because when I press the back button, crashes the app.</p>
<p>Here is the relevant code:</p>
<p>TabG.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TabGroup</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'tabGroup'</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"CameraTab"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">TabGroup</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>TabG.js</p>
<pre><code class="hljs">$.tabGroup.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>CameraTab.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Tab</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"cameraTab"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Augmented Reality"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"cameraWindow"</span>  &gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"cameraView"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">Tab</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>CameraTab.js</p>
<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.Media</span><span class="hljs-class">.showCamera</span>(<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">overlay</span>:<span class="hljs-value"> cameraView,
    showControls: false,
    autohide: false
</span></span></span>});
</code></pre><p>However, if I bypass the tabgroup (aka comment it) and display the cameraWindow directly, every thing goes smoothly (feed is shown, back button responds nicely).</p>
<p>What am I doing wrong?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 17th 2013, 1:56:09 pm">November 17th 2013</span>
				by <span class='authorname'>Tiago Agostinho</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>camera</span></li>
					
						<li><span class='tagname'>overlay</span></li>
					
						<li><span class='tagname'>tabgroup</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-271422">
				
						<section>
							<p>Hi,</p>
<p>you should put the below code inside your tab window instead of CameraTab.js..</p>
<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.Media</span><span class="hljs-class">.showCamera</span>(<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">overlay</span>:<span class="hljs-value"> cameraView,
    showControls: false,
    autohide: false
</span></span></span>});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 18th 2013, 10:54:01 am">November 18th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="../../question/159567/camera-with-overlay-doesnt-work-inside-tabgroup.html#answer-271422" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;m not quite sure I understand. How can i put this javascript inside the Window, when the window is in the CameraTab file?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 18th 2013, 11:09:33 am">November 18th 2013</span>
											by <span class='authorname'>Tiago Agostinho</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>you can put that code inside open event of window.</p>
<p>first, you need to create a controller for cameraWindow window.</p>
<p>cameraWindow.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"cameraWindow"</span>  <span class="hljs-attribute">onOpen</span>=<span class="hljs-value">"appOpen"</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
</code></pre><p>cameraWindow.js</p>
<pre><code class="hljs"><span class="hljs-tag">function</span> <span class="hljs-tag">appOpen</span>(){

<span class="hljs-tag">Ti</span><span class="hljs-class">.Media</span><span class="hljs-class">.showCamera</span>({
    <span class="hljs-attribute">overlay</span>: cameraView,
    <span class="hljs-attribute">showControls</span>: false,
    <span class="hljs-attribute">autohide</span>: false
});
}
</code></pre><p>and if you want to add overlay view with alloy structure then again you need to create controller for that overlay view.</p>
<p>so after creation of controller do like this..</p>
<p>cameraView.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"overlayView"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
</code></pre><p>cameraView.tss</p>
<pre><code class="hljs">"<span class="hljs-id">#overlayView</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">width </span>:<span class="hljs-value"> <span class="hljs-string">"320dp"</span>,
    height : <span class="hljs-string">"480dp"</span>
</span></span></span>}
</code></pre><p>then use this function to set overlay</p>
<p>cameraWindow.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">appOpen</span><span class="hljs-params">()</span></span>{

<span class="hljs-keyword">var</span> overlay= Alloy.createController(<span class="hljs-string">'cameraView'</span>).getView();

Ti.Media.showCamera({
    overlay: overlay,
    showControls: <span class="hljs-literal">false</span>,
    autohide: <span class="hljs-literal">false</span>
});
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 18th 2013, 11:26:12 am">November 18th 2013</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have implemented the code, but instead of     <a href="http:&#x2F;&#x2F;i.imgur.com&#x2F;sCbwLlu.png">this</a> i just get a fullscreen camera when i press the tab (aka, tab bar disappears). Plus, if i press the back button it goes to the tabbed menu again, but it wont reopen camera if i re-enter the camera tab.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 18th 2013, 3:48:36 pm">November 18th 2013</span>
											by <span class='authorname'>Tiago Agostinho</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>you can not show tab bar while camera is open. this is default behavior for android even you can not see tab bar if you open another window from tab window.</p>
<p>i just put that code on open event of window as an example that&#39;s why it opens only once but you can call that function as per your requirement.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 19th 2013, 3:31:33 am">November 19th 2013</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
