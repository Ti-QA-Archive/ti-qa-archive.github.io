<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Simple Program Flow issue » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Simple Program Flow issue</h1>
		</header>
		<section>
			<p>Hi all,</p>
<p>I&#39;m a n00b at JS so I apologise for the level of this question but I just can&#39;t figure this out?!</p>
<p>Can anyone please explain to me WHY this fails?</p>
<p>I know people prefer to use self calling functions etc but I just can&#39;t get this code to execute correctly.<br>(I also know I am using global variables and other bad practices but I have been trying to write a different program and it is the while or do-while loops that keep causing execution issues so I have written this, reduced to its most basic level, just as a code testbed)</p>
<p>I am not looking for the way I <em>ought</em> to do it per-se so much as understanding why &#x2F; how JS works so I understand why this code doesn&#39;t!</p>
<p>Many thanks in advance!</p>
<hr>
<p>This is running on an android emulator in Windows Vista (I know - ew!)<br>Titanium Studio, build: 2.0.1.201204132053.<br>Android 2.0.1GA2<br>Runtime V8</p>
<p>If the &quot;while&quot; loop is commented out, it runs and displays a blue window and the label &quot;Done!&quot;</p>
<p>WITH the while loop, all I get is the red Titanium banner page and it goes no further!</p>
<p>What don&#39;t I understand about while loops &#x2F; JavaScript flow control &#x2F; execution please?</p>
<hr>
<p>var counter = 5;</p>
<p>var win = Ti.UI.createWindow({backgroundColor:&#39;#00f&#39;});</p>
<p>var label = Ti.UI.createLabel({<br>    color:&#39;#fff&#39;,<br>    top:(Ti.Platform.displayCaps.platformHeight)&#x2F;2,<br>});</p>
<p>win.add(label);</p>
<p>win.open();</p>
<pre><code class="hljs"><span class="hljs-keyword">while</span> (counter&gt;<span class="hljs-number">0</span>);
{    
label.text=counter;
counter-=<span class="hljs-number">1</span>;
}
</code></pre><p>label.text = &#39;Done!&#39;;</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 21st 2012, 9:54:33 am">May 21st 2012</span>
				by <span class='authorname'>Robin Williams</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>loops</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>while</span></li>
					
						<li><span class='tagname'>windows</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-239086">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>I dont see any fail in the while loop, I tried to run your code in my android device and it worked after some changes.<br>you have given a semicolon after the while syntax, remove that (it may be your typo mistake)</p>
<p>here is the code which I tried and it showed me the blue screen and the label done</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> counter = 5;
<span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Ti.UI.createWindow({backgroundColor:'#00f'});
<span class="hljs-keyword">var</span> <span class="hljs-keyword">label</span> = Ti.UI.createLabel({ color:'#fff', top:(Ti.Platform.displayCaps.platformHeight)/2,height:50, width: 100 });
<span class="hljs-keyword">win</span>.add(<span class="hljs-keyword">label</span>);
<span class="hljs-keyword">win</span>.<span class="hljs-keyword">open</span>();
<span class="hljs-keyword">while</span> (counter&gt;0)
{   
<span class="hljs-keyword">label</span>.text=counter;
counter-=1;
}
<span class="hljs-keyword">label</span>.text = 'Done!';
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 21st 2012, 10:25:53 am">May 21st 2012</span>
								by <span class='authorname'>Ajeet pratap Maurya</span><br>
								<a class="icon-bg icon-link" href="question/137230/simple-program-flow-issue#answer-239086" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ajeet is right.<br>Having the semi-colon at the end on your while statement simply <em>skips</em> what&#39;s inside the brackets.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2012, 10:37:28 am">May 21st 2012</span>
											by <span class='authorname'>Christian Brousseau</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>infact The semicolon present in front of the while loop leads to the infinite loop as the value of counter is always greater than 0, and with the semicolon in front of it the while loops keeps on iterating un till that loop condition gets false.. This is the reason why you wee stuck at the appcelerator red screen.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2012, 10:47:01 am">May 21st 2012</span>
											by <span class='authorname'>Ajeet pratap Maurya</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ajeet is right.<br>Having the semi-colon at the end on your while statement simply <em>skips</em> what&#39;s inside the brackets.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2012, 10:47:06 am">May 21st 2012</span>
											by <span class='authorname'>Christian Brousseau</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-239085">
				
						<section>
							<p>Thanks for your response!</p>
<p>I see why that would work…</p>
<p>But why does the while loop fail?!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 21st 2012, 10:07:47 am">May 21st 2012</span>
								by <span class='authorname'>Robin Williams</span><br>
								<a class="icon-bg icon-link" href="question/137230/simple-program-flow-issue#answer-239085" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-239089">
				
						<section>
							<p>Thank you both so much!</p>
<p>I can&#39;t believe I missed something as obvious and simple as that!</p>
<p>I thought I was going mad! lol</p>
<p>Thanks again!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 21st 2012, 10:46:31 am">May 21st 2012</span>
								by <span class='authorname'>Robin Williams</span><br>
								<a class="icon-bg icon-link" href="question/137230/simple-program-flow-issue#answer-239089" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-239106">
				
						<section>
							<p>Thanks for your help so far guys,</p>
<p>There is definitely something I don&#39;t understand about program flow in Titanium &#x2F; JS…</p>
<p>My above typo not withstanding, when I then took the corrected version to my application, it still fails in a way I don&#39;t expect.</p>
<p>Again, here is a simplified version that behaves &#39;oddly&#39;.</p>
<p>I would have expected it to display an incredibly fast moving number that counts up to 2000.</p>
<p>Instead, it &#39;appears&#39; to do nothing (sitting on the Appcelerator banner) while counting in the background and then only displays a window with &quot;Done!&quot; at the very end.</p>
<p>Can someone please explain to me why it displays nothing until the end of the program or the loop?</p>
<p>Many thanks again!</p>
<p>(ps - again - watch out for the &quot;less-than&quot; sign in the IF statement!)</p>
<hr>
<p>var counter = 0;</p>
<p>var win = Ti.UI.createWindow({backgroundColor:&#39;#00f&#39;});</p>
<p>var label = Ti.UI.createLabel({<br>    color:&#39;#fff&#39;,<br>    text:&#39;&lt;blank&gt;&#39;,<br>    top:(Ti.Platform.displayCaps.platformHeight)&#x2F;2,<br>});</p>
<p>win.add(label);</p>
<p>win.open();    </p>
<pre><code class="hljs"><span class="hljs-keyword">do</span>
{
    counter+=<span class="hljs-number">1</span>;
    label.text=counter;
} <span class="hljs-keyword">while</span> (counter&lt;<span class="hljs-number">2000</span>);
</code></pre><p>label.text = &#39;Done!&#39;;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 21st 2012, 12:22:30 pm">May 21st 2012</span>
								by <span class='authorname'>Robin Williams</span><br>
								<a class="icon-bg icon-link" href="question/137230/simple-program-flow-issue#answer-239106" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>In your loop, try to pass a string instead of an int value :</p>
<pre><code class="hljs"><span class="hljs-keyword">label</span>.text=counter + <span class="hljs-string">''</span>;
</code></pre><p>Not sure about this but I think it&#39;s worth trying</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2012, 12:35:05 pm">May 21st 2012</span>
											by <span class='authorname'>Jb Gartner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for the suggestion. I just tried it…</p>
<p>No difference though.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2012, 12:49:10 pm">May 21st 2012</span>
											by <span class='authorname'>Robin Williams</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just tried your code, it works fine in 1.8.2 and 2.0.1</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2012, 4:52:12 pm">May 21st 2012</span>
											by <span class='authorname'>Jb Gartner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for trying it.</p>
<p>That&#39;s odd though?</p>
<p>As you said it works for you, I just installed it on my phone (S-E Xperia Arc S)  but it exhibits exactly the same behaviour - it displays nothing until it is completely finished and then just shows the blue screen with &quot;Done!&quot;</p>
<p>So you actually see it counting up to 2000 on your screen first?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 22nd 2012, 6:55:34 am">May 22nd 2012</span>
											by <span class='authorname'>Robin Williams</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oops I tried it on iPhone, not Android. So it may be related to Android OS. Can&#39;t really help you then :&#x2F; Try to delay your loop after the opening of the window, or to put your loop in your window load event listener</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 22nd 2012, 7:52:02 am">May 22nd 2012</span>
											by <span class='authorname'>Jb Gartner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Actually I had also tried the code both on iOS and android. works on iOS not android. I think the excess delay in android splash screen blocks the counting upto 2000.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 23rd 2012, 9:41:50 am">May 23rd 2012</span>
											by <span class='authorname'>Ajeet pratap Maurya</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ah, thank you!</p>
<p>So it&#39;s IDE &#x2F; SDK &#x2F; Platform related… I thought I was going mad or had a huge gap in my understanding when it came to JavaScript!</p>
<p>What an odd idiosyncrasy!</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2012, 5:27:02 am">May 24th 2012</span>
											by <span class='authorname'>Robin Williams</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-239084">
				
						<section>
							<p>Hm I dont see an error, try this:</p>
<pre><code class="hljs">for <span class="hljs-comment">(var i=counter;i&gt;0;i--)</span> {
    label.setText<span class="hljs-comment">(i)</span>;
}
label.setText<span class="hljs-comment">('DONE')</span>;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 21st 2012, 10:05:42 am">May 21st 2012</span>
								by <span class='authorname'>Rainer Schleevoigt</span><br>
								<a class="icon-bg icon-link" href="question/137230/simple-program-flow-issue#answer-239084" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
