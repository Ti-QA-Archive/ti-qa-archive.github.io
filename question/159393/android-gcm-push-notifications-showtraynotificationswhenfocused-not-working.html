<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android GCM push notifications showTrayNotificationsWhenFocused not working » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android GCM push notifications showTrayNotificationsWhenFocused not working</h1>
		</header>
		<section>
			<p>I&#39;ve been using ACS CloudPush module but right now I need showTrayNotificationsWhenFocused option to work.<br>Using the example code from the doc below, if I use lightweight window as shown in example, the behaviour is as exactly what I want (Hide tray notification while app is in foreground and fires the callback).<br>But if the app is not running, none of the callbacks got fired.<br>If I make the window heavyweight, the behaviour is other way around, it does fire the callback while app is not running but while app is in foreground tray notification is still visible)</p>
<p>Any help is appreciated.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> CloudPush = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ti.cloudpush'</span>);
CloudPush.showTrayNotification = <span class="hljs-literal">true</span>;
CloudPush.showTrayNotificationsWhenFocused = <span class="hljs-literal">false</span>;

CloudPush.retrieveDeviceToken({
        success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deviceTokenSuccess</span>(<span class="hljs-params">e</span>) </span>{
            alert(<span class="hljs-string">'Device Token: '</span> + e.deviceToken);
        },
        error: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deviceTokenError</span>(<span class="hljs-params">e</span>) </span>{
            alert(<span class="hljs-string">'Failed to register for push! '</span> + e.error);
        }
    });

<span class="hljs-keyword">var</span> enablePush = Ti.UI.createButton({
        title: <span class="hljs-string">'Enable Push Notifications'</span>
    });
    enablePush.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        CloudPush.enabled = <span class="hljs-literal">true</span>;
    });
    win.add(enablePush);
    CloudPush.addEventListener(<span class="hljs-string">'callback'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        alert(evt.payload);
    });
    CloudPush.addEventListener(<span class="hljs-string">'trayClickLaunchedApp'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        Ti.API.info(<span class="hljs-string">'Tray Click Launched App (app was not running)'</span>);
    });
    CloudPush.addEventListener(<span class="hljs-string">'trayClickFocusedApp'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        Ti.API.info(<span class="hljs-string">'Tray Click Focused App (app was already running)'</span>);
    });
    win.open();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 12th 2013, 1:50:41 pm">November 12th 2013</span>
				by <span class='authorname'>Nyein Soe Thu</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>notification</span></li>
					
						<li><span class='tagname'>push</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-271734">
				
						<section>
							<p>Hi,<br>A JIRA is already being raised for this issue. You can also followup here :</p>
<p>https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMODOPEN-301</p>
<p>Regards</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 25th 2013, 8:15:53 am">November 25th 2013</span>
								by <span class='authorname'>Rupesh Sharma</span><br>
								<a class="icon-bg icon-link" href="question/159393/android-gcm-push-notifications-showtraynotificationswhenfocused-not-working#answer-271734" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Did JIRA change project permission? I can&#39;t view threads in TIMOB for some days, always get &quot;Permission Violation&quot;.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 25th 2013, 9:29:49 am">November 25th 2013</span>
											by <span class='authorname'>Danny Pham</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
