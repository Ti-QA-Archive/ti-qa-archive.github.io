<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>[Android] Starting app from email attachment via Intent -&gt; App seems to duplicate itself Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>[Android] Starting app from email attachment via Intent -&gt; App seems to duplicate itself</h1>
		</header>
		<section>
			<p>Hello everyone,</p>
<p>What is supposed to happen:<br>1.) receive email with a custom file with extension &quot;.custom&quot;<br>2.) click on file and select &quot;open with CustomApp&quot;<br>3.) App reads file and stores the data somewhere<br>4.) Ideally the user could just continue to use the app normally </p>
<p>I have manged to setup custom filters:</p>
<pre><code class="hljs">&lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">".CustomappActivity"</span> <span class="hljs-string">android:</span>label=<span class="hljs-string">"@string/app_name"</span> <span class="hljs-string">android:</span>theme=<span class="hljs-string">"@style/Theme.Titanium"</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"keyboardHidden|orientation|screenSize"</span> <span class="hljs-string">android:</span>screenOrientation=<span class="hljs-string">"fullUser"</span>&gt;
            &lt;intent-filter&gt;
                &lt;action <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.intent.action.MAIN"</span>/&gt;
                &lt;category <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.intent.category.LAUNCHER"</span>/&gt;
            &lt;/intent-filter&gt;
            &lt;intent-filter&gt;
                &lt;action <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.intent.action.VIEW"</span>/&gt;
                &lt;category <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.intent.category.DEFAULT"</span>/&gt;
                &lt;data <span class="hljs-string">android:</span>scheme=<span class="hljs-string">"content"</span> <span class="hljs-string">android:</span>pathPattern=<span class="hljs-string">".*\\.custom"</span> <span class="hljs-string">android:</span>mimeType=<span class="hljs-string">"*/*"</span>/&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
</code></pre><p>What happens now when I open a .custom file in CustomApp?<br>It seems to me as if regardless of whether the app is currently running in the background or not a new CustomappActivity gets launched. However both activities seem to share a namespace or something, because the newly launched one is not able to get the WebView UI up and running. So this seemed to be leading me nowhere.</p>
<p>What I have now done is implement a &quot;check for intent&quot; before I start my app properly. If it was started with an intent I just store the data of the .custom file in my App.Properties and then try to close the currently running instance of the app (via <code>Ti.Android.currentActivity.finish()</code>).<br>However the Activity (or something else) seems to still be running, because when I open the app back up (even if it was running while I did the other things, once I select it in the task manager it starts up from the beginning) only bad things happen:<br>Every call from the WebView to the app and vice versa gets made more than once (depending on how often the App has been started after the first opening of the .custom file). This obviously makes the app unusable because nothing works.</p>
<p>Even killing the app in the task manager does not always reset everything so that a call only gets made once.</p>
<p>Can anyone guess what&#39;s up here?</p>
<p>Or even better give me guidelines on how to implement the use case properly?<br>While I do not fully understand the whole activity complex and how it interacts with appcelerator I&#39;d reckon that this may not happen if I wouldn&#39;t call my main launcher activity with the intent but another custom activity that&#39;s only responsible for importing the data from the .custom file and nothing else. But how does one create a custom activity with titanium?</p>
<p>Thanks for any help or nudge in the right direction!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 23rd 2015, 1:08:11 pm">September 23rd 2015</span>
				by <span class='authorname'>Marc O. Kneifel</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>activity</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>intent</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
