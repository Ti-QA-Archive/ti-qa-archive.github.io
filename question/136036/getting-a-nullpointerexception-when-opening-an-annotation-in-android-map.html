<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Getting a NullPointerException when opening an Annotation in Android Map Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Getting a NullPointerException when opening an Annotation in Android Map</h1>
		</header>
		<section>
			<p>Hello, I&#39;m trying to make an app that has a map on one of it&#39;s sections that shows some locations (well, what else could it be? haha). It works good on iPhone, but in Android, when I tap in the point, I get a NullPointerException (checked in logcat). And, in iPhone i get the custom ping  (using image) but I can&#39;t get int in Andoird.</p>
<p>Does anyone knows why this is happening?</p>
<p>I&#39;m running in Android 2.2 and Titnaium 2.1.0 </p>
<p>Here is my code: </p>
<pre><code class="hljs">        <span class="hljs-keyword">var</span> instance = Ti.UI.createWindow();

    <span class="hljs-keyword">var</span> view = Ti.UI.createView({
        width: <span class="hljs-string">'100%'</span>,
        top: <span class="hljs-string">'12%'</span>,
        height: Ti.UI.FILL
    });
    instance.add(view);

    <span class="hljs-keyword">var</span> apple = Titanium.<span class="hljs-built_in">Map</span>.createAnnotation({
        latitude:<span class="hljs-number">37.33168900</span>,
        longitude:-<span class="hljs-number">122.03073100</span>,
        title:<span class="hljs-string">"Chevrolette Zafira"</span>,
        subtitle:<span class="hljs-string">'U$D 13,900'</span>,
        image: <span class="hljs-string">'/images/a04_mapa_pin@2x.png'</span>, <span class="hljs-comment">/*ping image*/</span>
        animate:<span class="hljs-keyword">true</span>,
        rightButton: <span class="hljs-string">'/images/apple_logo.jpg'</span>,
        myid:<span class="hljs-number">1</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
    });

    <span class="hljs-keyword">var</span> mapview = Titanium.<span class="hljs-built_in">Map</span>.createView({
        mapType: Titanium.<span class="hljs-built_in">Map</span>.STANDARD_TYPE,
        region:{latitude:<span class="hljs-number">37.33168</span>, longitude:-<span class="hljs-number">122.03073</span>, latitudeDelta:<span class="hljs-number">0.5</span>, longitudeDelta:<span class="hljs-number">0.5</span>},
        animate:<span class="hljs-keyword">true</span>,
        regionFit:<span class="hljs-keyword">true</span>,
        userLocation:<span class="hljs-keyword">true</span>,
        annotations:[apple]
    });
    view.add(mapview);
    <span class="hljs-keyword">return</span> instance;
</code></pre><p>and what I get in my logcat is the following:</p>
<p>04-25 15:25:31.216: E&#x2F;TiApplication(584): (main) [5706,13012] Sending event: exception on thread: main msg:java.lang.NullPointerException; Titanium 2.1.0,2012&#x2F;04&#x2F;12 09:42,9eaf1b6<br>04-25 15:25:31.216: E&#x2F;TiApplication(584): java.lang.NullPointerException<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at ti.modules.titanium.map.TiMapView.showAnnotation(TiMapView.java:495)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at ti.modules.titanium.map.TiMapView.onTap(TiMapView.java:535)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at ti.modules.titanium.map.TiMapView$TitaniumOverlay.onTap(TiMapView.java:294)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:347)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:533)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.google.android.maps.MapView.onTouchEvent(MapView.java:647)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.view.View.dispatchTouchEvent(View.java:3766)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:897)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at ti.modules.titanium.map.TiMapView$LocalMapView.dispatchTouchEvent(TiMapView.java:127)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.app.Activity.dispatchTouchEvent(Activity.java:2086)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.os.Handler.dispatchMessage(Handler.java:99)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.os.Looper.loop(Looper.java:123)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at android.app.ActivityThread.main(ActivityThread.java:4627)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at java.lang.reflect.Method.invokeNative(Native Method)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at java.lang.reflect.Method.invoke(Method.java:521)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)<br>04-25 15:25:31.216: E&#x2F;TiApplication(584):     at dalvik.system.NativeStart.main(Native Method)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584): FATAL EXCEPTION: main<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584): java.lang.NullPointerException<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at ti.modules.titanium.map.TiMapView.showAnnotation(TiMapView.java:495)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at ti.modules.titanium.map.TiMapView.onTap(TiMapView.java:535)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at ti.modules.titanium.map.TiMapView$TitaniumOverlay.onTap(TiMapView.java:294)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:347)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:533)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.google.android.maps.MapView.onTouchEvent(MapView.java:647)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.view.View.dispatchTouchEvent(View.java:3766)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:897)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at ti.modules.titanium.map.TiMapView$LocalMapView.dispatchTouchEvent(TiMapView.java:127)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.app.Activity.dispatchTouchEvent(Activity.java:2086)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.os.Handler.dispatchMessage(Handler.java:99)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.os.Looper.loop(Looper.java:123)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at android.app.ActivityThread.main(ActivityThread.java:4627)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at java.lang.reflect.Method.invokeNative(Native Method)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at java.lang.reflect.Method.invoke(Method.java:521)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)<br>04-25 15:25:31.565: E&#x2F;AndroidRuntime(584):     at dalvik.system.NativeStart.main(Native Method)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 25th 2012, 4:34:00 pm">April 25th 2012</span>
				by <span class='authorname'>Nahuel Gabioud Fernandez</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>mapview</span></li>
					
						<li><span class='tagname'>nullpointerexception</span></li>
					
				</ul>
			

			<section>
				<h5>6 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hello,</p>
<p>does this happen if you use SDK 2.0.1GA2?</p>
<p>Best,</p>
<p>Mauro</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 25th 2012, 4:53:06 pm">April 25th 2012</span>
								by <span class='authorname'>Mauro Parra</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I don&#39;t understand what you&#39;re aksing me, I have only to SDK Mobile options:</p>
<ul>
<li>1.8.2</li>
<li>2.1.0.v20120412093932</li>
</ul>
<p>and in Android, i have the Googles Api (i am using GA 8). If that&#39;s what you meant with the &#39;GA&#39;</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 25th 2012, 5:16:51 pm">April 25th 2012</span>
								by <span class='authorname'>Nahuel Gabioud Fernandez</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I tested your code with this modification:</p>
<p>https:&#x2F;&#x2F;gist.github.com&#x2F;2492947</p>
<p>and it&#39;s working like a charm with today&#39;s 2.1. Please try with today&#39;s SDK and let me know how it goes.</p>
<p>Best,</p>
<p>Mauro</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 25th 2012, 6:08:20 pm">April 25th 2012</span>
								by <span class='authorname'>Mauro Parra</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Nahuel,</p>
<p>check for updates. You should be seeing 2.0.1GA2 as a SDK version. It&#39;s the stable one in the line 2. Or use today&#39;s build. </p>
<p>Best,</p>
<p>Mauro</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 25th 2012, 6:09:28 pm">April 25th 2012</span>
								by <span class='authorname'>Mauro Parra</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;m downloading it, I would let you know if I could get my problem solved. Thanks for replying!</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 25th 2012, 6:24:14 pm">April 25th 2012</span>
								by <span class='authorname'>Nahuel Gabioud Fernandez</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Well, I did it, the problem was the &#39;image&#39; for the icon, I don&#39;t know why, does Android supports a ping image? Is it because the image is from an unsupported format?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 25th 2012, 7:03:48 pm">April 25th 2012</span>
								by <span class='authorname'>Nahuel Gabioud Fernandez</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
