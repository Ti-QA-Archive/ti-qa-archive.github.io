<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>addEventListener(&#39;change&#39;, function(e) to set label text to Ad not working Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>addEventListener(&#39;change&#39;, function(e) to set label text to Ad not working</h1>
		</header>
		<section>
			<p>I am trying to index and pass an ad from an array, according to a match function, then change the text of a label (called &quot;ttad&quot;). It flashes the proper ad based on match, then defaults to last text in the ad array. </p>
<p>Any idea why ad not staying in &quot;ttad&quot; label?</p>
<pre><code class="hljs">var tabGroup = Ti.UI.createTabGroup();
var ui = require(<span class="hljs-string">'ui'</span>);

var listener = require(<span class="hljs-string">'co.il.webe.smslistener'</span>);
Ti.API.info(<span class="hljs-string">"module is =&gt; "</span> + listener);

var self = ui.window({
<span class="hljs-label">    title:</span><span class="hljs-string">"TexTags--You Text, Give, and Get Back"</span>,
<span class="hljs-label">    backgroundColor:</span><span class="hljs-string">'black'</span>,
<span class="hljs-label">    exitOnClose:</span><span class="hljs-literal">true</span>,
    <span class="hljs-string">windowSoftInputMode :</span> Ti.UI.Android.SOFT_INPUT_ADJUST_PAN
    });

self.layout = <span class="hljs-string">'vertical'</span>; 

    var view1 = Titanium.UI.createView({
<span class="hljs-label">        width:</span><span class="hljs-string">"100%"</span>,
<span class="hljs-label">        height:</span><span class="hljs-string">'72%'</span>,
<span class="hljs-label">        top:</span><span class="hljs-number">1</span>,
        <span class="hljs-string">windowSoftInputMode :</span> Ti.UI.Android.SOFT_INPUT_ADJUST_PAN,
<span class="hljs-label">        backgroundColor:</span><span class="hljs-string">"transparent"</span>
    });
    self.add(view1);

    var currentMessage = <span class="hljs-string">''</span>;
    var db = Titanium.Database.open(<span class="hljs-string">'messages'</span>);
    db.execute(<span class="hljs-string">'CREATE TABLE IF NOT EXISTS messages (id INTEGER PRIMARY KEY AUTOINCREMENT, message TEXT)'</span>);

    var    intentSelContact = Ti.Android.createIntent({
<span class="hljs-label">        action:</span> Ti.Android.ACTION_PICK,
<span class="hljs-label">        type:</span> <span class="hljs-string">'vnd.android.cursor.dir/person'</span>
    });

var ads = [
{<span class="hljs-string">message:</span> <span class="hljs-string">'Pacos Tacos, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">0</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Firehut Wood Fired Pizza, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">1</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span>},
{<span class="hljs-string">message:</span> <span class="hljs-string">'Ping Tsao Cantonese, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">2</span>,<span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Jewelry 4 Less, 22% off.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">3</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'NFL Footbal Game, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">4</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'College Basketball, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">5</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'ValueFashion, 15% discount.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">6</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Sports Basket, 20% discount.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">7</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Marias Swedish Massage, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">8</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Hotels 4 Less, 40% off.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">9</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Auto Repair, Free Inspection + 20% discount.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">10</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Mens Suit Store, 2 fashion suits for $99.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">11</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Bus Pass, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">12</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Subway Pass, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">13</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Sandys Sangwhiches, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">14</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Burger Castle, 3 for $10.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">015</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'VeggiLife, 2 fake burgers for the price of 4.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">16</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Sams Secondhand Shoes, 3 stinky shoes for the price of 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">17</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Jirus Japanese Jumalee Fish and Tofu Bowls, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">18</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Mac Daddy Guns, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">19</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Pho Phriends, free spring rolls with any main course purchase.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">20</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Gillians Blingy Thingys, 10% off.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">21</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'InConcert Performances, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">22</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Blinding Smiles, Free X-Rays.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">23</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Juicey Cornholios, 2 for 1.'</span>, <span class="hljs-string">id:</span><span class="hljs-number">24</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> },
{<span class="hljs-string">message:</span> <span class="hljs-string">'Stay tunded for fantastic deals in your area!'</span>, <span class="hljs-string">id:</span><span class="hljs-number">25</span>, <span class="hljs-string">latt:</span><span class="hljs-string">'34.056579'</span>, <span class="hljs-string">long:</span> <span class="hljs-string">'118.364334'</span> }
       ];

    var tf1 = Titanium.UI.createTextArea({
<span class="hljs-label">        width:</span><span class="hljs-string">'100%'</span>,
<span class="hljs-label">        height:</span><span class="hljs-string">'70%'</span>,
<span class="hljs-label">        left:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        top:</span><span class="hljs-number">40</span>,
<span class="hljs-label">        zIndex:</span> <span class="hljs-number">1</span>,
<span class="hljs-label">        verticalAlign:</span> Ti.UI.TEXT_VERTICAL_ALIGNMENT_TOP,
<span class="hljs-label">        autocorrect:</span><span class="hljs-literal">false</span>,
        <span class="hljs-string">borderStyle :</span> Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
<span class="hljs-label">        borderColor:</span><span class="hljs-string">'red'</span>,
<span class="hljs-label">        borderWidth:</span> <span class="hljs-number">4</span>,
<span class="hljs-label">        backgroundColor:</span> <span class="hljs-string">'white'</span>,
<span class="hljs-label">        keyboardType:</span> Ti.UI.KEYBOARD_DEFAULT,
        <span class="hljs-string">returnKeyType :</span> Ti.UI.RETURNKEY_DONE,
        <span class="hljs-string">softKeyboardOnFocus :</span> Titanium.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS,
<span class="hljs-label">        enabled:</span><span class="hljs-literal">true</span>,
        <span class="hljs-string">focusable :</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">        setSingleLine:</span> <span class="hljs-literal">false</span>,
<span class="hljs-label">        setEllipsize:</span> <span class="hljs-literal">null</span>,

        <span class="hljs-string">returnKeyType :</span> Titanium.UI.RETURNKEY_DONE,
        <span class="hljs-string">suppressReturn :</span> <span class="hljs-literal">false</span>,
<span class="hljs-label">        hintText:</span><span class="hljs-string">'Enter a message then click button to select contact and send your message...'</span>
    });

    var array = [
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'taco'</span>, <span class="hljs-string">index:</span><span class="hljs-number">0</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'tacos'</span>, <span class="hljs-string">index:</span><span class="hljs-number">0</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'mexican'</span>, <span class="hljs-string">index:</span><span class="hljs-number">0</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'burrito'</span>, <span class="hljs-string">index:</span><span class="hljs-number">0</span>}, 
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'pizza'</span>, <span class="hljs-string">index:</span><span class="hljs-number">1</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'italian'</span>, <span class="hljs-string">index:</span><span class="hljs-number">1</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'dentist'</span>, <span class="hljs-string">index:</span><span class="hljs-number">23</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'burritos'</span>, <span class="hljs-string">index:</span><span class="hljs-number">0</span>},   
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'chinese'</span>, <span class="hljs-string">index:</span><span class="hljs-number">2</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'asian'</span>, <span class="hljs-string">index:</span><span class="hljs-number">2</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'jewelry'</span>, <span class="hljs-string">index:</span><span class="hljs-number">3</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'basketball'</span>, <span class="hljs-string">index:</span><span class="hljs-number">5</span>},   
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'sports'</span>, <span class="hljs-string">index:</span><span class="hljs-number">7</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'fashion'</span>, <span class="hljs-string">index:</span><span class="hljs-number">6</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'clothes'</span>, <span class="hljs-string">index:</span><span class="hljs-number">6</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'massage'</span>, <span class="hljs-string">index:</span><span class="hljs-number">8</span>},   
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'hotel'</span>, <span class="hljs-string">index:</span><span class="hljs-number">9</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'auto'</span>, <span class="hljs-string">index:</span><span class="hljs-number">10</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'repair'</span>, <span class="hljs-string">index:</span><span class="hljs-number">10</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'pants'</span>, <span class="hljs-string">index:</span><span class="hljs-number">11</span>},   
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'suit'</span>, <span class="hljs-string">index:</span><span class="hljs-number">11</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'suits'</span>, <span class="hljs-string">index:</span><span class="hljs-number">11</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'bus'</span>, <span class="hljs-string">index:</span><span class="hljs-number">12</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'basketball'</span>, <span class="hljs-string">index:</span><span class="hljs-number">5</span>},   
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'hotel'</span>, <span class="hljs-string">index:</span><span class="hljs-number">9</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'repair'</span>, <span class="hljs-string">index:</span><span class="hljs-number">10</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'points'</span>, <span class="hljs-string">index:</span><span class="hljs-number">11</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'bus'</span>, <span class="hljs-string">index:</span><span class="hljs-number">12</span>},   
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'sports'</span>, <span class="hljs-string">index:</span><span class="hljs-number">7</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'subway'</span>, <span class="hljs-string">index:</span><span class="hljs-number">14</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'sandwich'</span>, <span class="hljs-string">index:</span><span class="hljs-number">14</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'sangwich'</span>, <span class="hljs-string">index:</span><span class="hljs-number">14</span>},   
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'burger'</span>, <span class="hljs-string">index:</span><span class="hljs-number">15</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'hamburger'</span>, <span class="hljs-string">index:</span><span class="hljs-number">15</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'vegi'</span>, <span class="hljs-string">index:</span><span class="hljs-number">16</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'vegitables'</span>, <span class="hljs-string">index:</span><span class="hljs-number">16</span>},   
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'vegitarian'</span>, <span class="hljs-string">index:</span><span class="hljs-number">16</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'shoes'</span>, <span class="hljs-string">index:</span><span class="hljs-number">17</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'sushi'</span>, <span class="hljs-string">index:</span><span class="hljs-number">18</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'japanese'</span>, <span class="hljs-string">index:</span><span class="hljs-number">18</span>},   
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'bat'</span>, <span class="hljs-string">index:</span><span class="hljs-number">7</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'pho'</span>, <span class="hljs-string">index:</span><span class="hljs-number">20</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'gun'</span>, <span class="hljs-string">index:</span><span class="hljs-number">19</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'bling'</span>, <span class="hljs-string">index:</span><span class="hljs-number">21</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'concert'</span>, <span class="hljs-string">index:</span><span class="hljs-number">22</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'x-rays'</span>, <span class="hljs-string">index:</span><span class="hljs-number">23</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'xrays'</span>, <span class="hljs-string">index:</span><span class="hljs-number">23</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">'juice'</span>, <span class="hljs-string">index:</span><span class="hljs-number">24</span>},
                 {<span class="hljs-string">adWord:</span><span class="hljs-string">''</span>, <span class="hljs-string">index:</span><span class="hljs-number">25</span>}
             ];

             Ti.App.Properties.setList(<span class="hljs-string">'adWords'</span>,array);

    var words = Ti.App.Properties.getList(<span class="hljs-string">'adWords'</span>);

    tf1.addEventListener(<span class="hljs-string">'change'</span>, function(e) 
{
        <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i &lt; tf1.value.length; i++)
            {

            <span class="hljs-keyword">for</span>(x=<span class="hljs-number">0</span>; x &lt; array.length; x++)
                {

                var match = tf1.value.match(<span class="hljs-keyword">new</span> RegExp(words[x].adWord,<span class="hljs-string">"gi"</span>));

                <span class="hljs-keyword">if</span>(match != <span class="hljs-literal">null</span>)
                    {
                    var index = words[x].index;

                    }
                <span class="hljs-comment">//MUST make ad stay when first word found</span>
                tf1.fireEvent(<span class="hljs-string">'myevent'</span>, ads[index]);

                }                
            }
});

    view1.add(tf1);

<span class="hljs-comment">//THIS IS WHERE AD SHOULD APPEAR IN LABEL******************************    </span>
    tf1.addEventListener(<span class="hljs-string">'myevent'</span>, function(e){

        ttAd.textUpdate(e.message);
    });

    var sendButton = Titanium.UI.createButton({
<span class="hljs-label">        title:</span><span class="hljs-string">"Send Text To:"</span>,
<span class="hljs-label">        width:</span><span class="hljs-string">'49%'</span>,
<span class="hljs-label">        height:</span><span class="hljs-number">38</span>,
<span class="hljs-label">        borderRadius:</span> <span class="hljs-number">20</span>,
<span class="hljs-label">        borderWidth:</span> <span class="hljs-number">3</span>,
<span class="hljs-label">        borderColor:</span> <span class="hljs-string">'red'</span>,
<span class="hljs-label">        backgroundColor:</span> <span class="hljs-string">'transparent'</span>,
<span class="hljs-label">        color:</span> <span class="hljs-string">'red'</span>,
<span class="hljs-label">        font:</span>  {<span class="hljs-string">fontSize:</span>  <span class="hljs-number">24</span>, <span class="hljs-string">fontstyle:</span> <span class="hljs-string">'italic'</span>, <span class="hljs-string">fontWeight:</span> <span class="hljs-string">'bold'</span>},
<span class="hljs-label">        top:</span><span class="hljs-number">2</span>,
<span class="hljs-label">        backgroundImage:</span> <span class="hljs-string">'none'</span>,
<span class="hljs-label">        zIndex:</span> <span class="hljs-number">7</span>,
<span class="hljs-label">        right:</span><span class="hljs-number">0</span>
        <span class="hljs-comment">//enabled:false</span>
    });
    view1.add(sendButton);

    tf1.softKeyboardOnFocus = Ti.UI.Android.SOFT_KEYBOARD_HIDE_ON_FOCUS;
    tf1.addEventListener(<span class="hljs-string">'click'</span>,function(e)
    {
        tf1.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS);
        tf1.focus();
    });


    var respondButton = Titanium.UI.createButton({
<span class="hljs-label">        title:</span><span class="hljs-string">"Reply to Text"</span>,
<span class="hljs-label">        width:</span><span class="hljs-string">'49%'</span>,
<span class="hljs-label">        height:</span><span class="hljs-number">38</span>,
<span class="hljs-label">        borderRadius:</span><span class="hljs-number">20</span>,
<span class="hljs-label">        borderWidth:</span> <span class="hljs-number">3</span>,
<span class="hljs-label">        backgroundColor:</span> <span class="hljs-string">'transparent'</span>,
<span class="hljs-label">        borderColor:</span> <span class="hljs-string">'blue'</span>,
<span class="hljs-label">        color:</span> <span class="hljs-string">'#3c4de2'</span>,
<span class="hljs-label">        font:</span>  {<span class="hljs-string">fontSize:</span> <span class="hljs-number">24</span>, <span class="hljs-string">fontstyle:</span> <span class="hljs-string">'italic'</span>, <span class="hljs-string">fontWeight:</span> <span class="hljs-string">'bold'</span>},
<span class="hljs-label">        backgroundImage:</span> <span class="hljs-string">'none'</span>,
<span class="hljs-label">        top:</span><span class="hljs-number">2</span>,
<span class="hljs-label">        left:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        zIndex:</span> <span class="hljs-number">2</span>

    });
    view1.add(respondButton);

    sendButton.addEventListener(<span class="hljs-string">'click'</span>, function(e){
        var    intentSendText = Ti.Android.createIntent({
<span class="hljs-label">            action:</span> Ti.Android.ACTION_SEND,
<span class="hljs-label">            type:</span> <span class="hljs-string">'text/plain'</span>
    });
        intentSendText.addCategory(Ti.Android.CATEGORY_DEFAULT);
        intentSendText.putExtra(Ti.Android.EXTRA_TEXT, tf1.value);
        Ti.Android.currentActivity.startActivity(intentSendText);
        tf1.value = <span class="hljs-string">''</span>;
    });

    tf1.hide();

    var smsInbound = Titanium.UI.createTextField({
<span class="hljs-label">        width:</span><span class="hljs-string">'100%'</span>,
<span class="hljs-label">        height:</span><span class="hljs-string">'28%'</span>,
<span class="hljs-label">        left:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        bottom:</span><span class="hljs-number">2</span>,
<span class="hljs-label">        zIndex:</span> <span class="hljs-number">1</span>,
<span class="hljs-label">        verticalAlign:</span> Ti.UI.TEXT_VERTICAL_ALIGNMENT_TOP,
<span class="hljs-label">        autocorrect:</span><span class="hljs-literal">false</span>,
        <span class="hljs-string">borderStyle :</span> Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
<span class="hljs-label">        borderColor:</span><span class="hljs-string">'blue'</span>,
<span class="hljs-label">        borderWidth:</span> <span class="hljs-number">5</span>,
<span class="hljs-label">        backgroundColor:</span> <span class="hljs-string">'white'</span>,
<span class="hljs-label">        enabled:</span><span class="hljs-literal">false</span>,
<span class="hljs-label">        keyboardType:</span> Ti.UI.KEYBOARD_DEFAULT,
<span class="hljs-label">        hintText:</span><span class="hljs-string">'Incoming messages will appear here...Enter your response below and Click button below to respond'</span>

    });
    view1.add(smsInbound);

<span class="hljs-comment">//This comes from Appcelerator purchased product</span>
    listener.ListenToSms({    
<span class="hljs-label">    callback:</span> function(message) {
        smsInbound.text =
            <span class="hljs-comment">//'Sender: ' + message.Sender + '\n' +</span>
            <span class="hljs-string">'Message: '</span> + message.Message; <span class="hljs-comment">// + '\n' +</span>
            <span class="hljs-comment">//'Timestamp: ' + message.Timestamp + '\n';</span>
    },
<span class="hljs-label">    blockDefault:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">// set this to true if you wish to block the default behavior of the device when receiving a message (defaults to false)</span>
});
listener = <span class="hljs-literal">null</span>;



    var view2 = Titanium.UI.createView({
<span class="hljs-label">        width:</span><span class="hljs-string">"100%"</span>,
<span class="hljs-label">        height:</span><span class="hljs-string">'19%'</span>,
<span class="hljs-label">        backgroundColor:</span><span class="hljs-string">"transparent"</span>
    });
    self.add(view2);

    var view3 = Titanium.UI.createView({
<span class="hljs-label">        width:</span><span class="hljs-string">"100%"</span>,
<span class="hljs-label">        height:</span><span class="hljs-string">'9%'</span>,
<span class="hljs-label">        bottom:</span><span class="hljs-number">1</span>,
<span class="hljs-label">        backgroundColor:</span><span class="hljs-string">"transparent"</span>
    });
    self.add(view3);

    var button = Ti.UI.createButton({
<span class="hljs-label">        height:</span><span class="hljs-string">'99%'</span>,
<span class="hljs-label">        width:</span><span class="hljs-string">'24%'</span>,
<span class="hljs-label">        left:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        borderRadius:</span><span class="hljs-number">2</span>,
<span class="hljs-label">        title:</span>L(<span class="hljs-string">'openWindow'</span>),
<span class="hljs-label">        font:</span>  {<span class="hljs-string">fontSize:</span>  <span class="hljs-number">18</span>},
<span class="hljs-label">        bottom:</span> <span class="hljs-number">0</span>
    });
    view3.add(button);

    var button2 = Ti.UI.createButton({
<span class="hljs-label">        height:</span><span class="hljs-string">'99%'</span>,
<span class="hljs-label">        width:</span><span class="hljs-string">'24%'</span>,
<span class="hljs-label">        center:</span><span class="hljs-string">'35.5%'</span>,
<span class="hljs-label">        borderRadius:</span><span class="hljs-number">2</span>,
<span class="hljs-label">        title:</span><span class="hljs-string">'Map Deal'</span>,
<span class="hljs-label">        font:</span>  {<span class="hljs-string">fontSize:</span>  <span class="hljs-number">18</span>},
<span class="hljs-label">        bottom:</span> <span class="hljs-number">0</span>
    });
    view3.add(button2);

    var button3 = Ti.UI.createButton({
<span class="hljs-label">        height:</span><span class="hljs-string">'99%'</span>,
<span class="hljs-label">        width:</span><span class="hljs-string">'25%'</span>,
<span class="hljs-label">        center:</span><span class="hljs-string">'59.5%'</span>,
<span class="hljs-label">        borderRadius:</span><span class="hljs-number">2</span>,
<span class="hljs-label">        title:</span>L(<span class="hljs-string">'exit'</span>),
<span class="hljs-label">        font:</span>  {<span class="hljs-string">fontSize:</span>  <span class="hljs-number">18</span>},
<span class="hljs-label">        bottom:</span> <span class="hljs-number">0</span>
    });
    view3.add(button3);

    var button4 = Ti.UI.createButton({
<span class="hljs-label">        height:</span><span class="hljs-string">'99%'</span>,
<span class="hljs-label">        width:</span><span class="hljs-string">'28%'</span>,
<span class="hljs-label">        right:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        borderRadius:</span><span class="hljs-number">2</span>,
<span class="hljs-label">        title:</span>L(<span class="hljs-string">'buy'</span>),
<span class="hljs-label">        font:</span>  {<span class="hljs-string">fontSize:</span>  <span class="hljs-number">18</span>},
<span class="hljs-label">        bottom:</span><span class="hljs-number">0</span>
    });
    view3.add(button4);


    var scrollView=Titanium.UI.createScrollView({
<span class="hljs-label">        width:</span><span class="hljs-string">'71%'</span>,
<span class="hljs-label">        right:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        top:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        backgroundColor:</span><span class="hljs-string">'transparent'</span>
    });
    view2.add(scrollView);

    var ttAd = Titanium.UI.createLabel({
        <span class="hljs-comment">//layout: 'vertical',</span>
<span class="hljs-label">        verticalAlign:</span> Ti.UI.TEXT_VERTICAL_ALIGNMENT_TOP,
<span class="hljs-label">        right:</span> <span class="hljs-number">0</span>,
<span class="hljs-label">        bottom:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        width:</span> <span class="hljs-string">'95%'</span>,
<span class="hljs-label">        height:</span> <span class="hljs-string">'100%'</span>,
<span class="hljs-label">        color:</span> <span class="hljs-string">'#ffd700'</span>,
<span class="hljs-label">          font:</span> { <span class="hljs-string">fontSize:</span><span class="hljs-number">24</span>},
<span class="hljs-label">          shadowColor:</span> <span class="hljs-string">'#aaa'</span>,
<span class="hljs-label">          shadowOffset:</span> {<span class="hljs-string">x:</span><span class="hljs-number">5</span>, <span class="hljs-string">y:</span><span class="hljs-number">5</span>},
<span class="hljs-label">        borderStyle:</span>Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
<span class="hljs-label">        text:</span><span class="hljs-string">'Tacos at Pacos, Buy 1 get 1 for free! Click "Get Deal" Button Now to add to your account.'</span>
    });
    scrollView.add(ttAd);

    ttAd.textUpdate = function(newText){
        ttAd.text = newText;
    };

    button3.addEventListener(<span class="hljs-string">'click'</span>, function() {
            var activity = Titanium.Android.currentActivity;
            activity.finish();
        });

    var tab1 = Ti.UI.createTab({
<span class="hljs-label">        title:</span> L(<span class="hljs-string">'home'</span>),
<span class="hljs-label">        icon:</span> <span class="hljs-string">'/images/people.png'</span>,
<span class="hljs-label">        window:</span> self
    });
    tabGroup.addTab(tab1);

    var win2 = Titanium.UI.createWindow({
<span class="hljs-label">        url:</span> <span class="hljs-string">'window2.js'</span>,
<span class="hljs-label">        width:</span> <span class="hljs-number">300</span>,
<span class="hljs-label">        height:</span> <span class="hljs-string">'100%'</span>,
<span class="hljs-label">        backgroundColor:</span><span class="hljs-string">'transparent'</span>,
<span class="hljs-label">        title:</span> <span class="hljs-string">'Dashboard'</span>

    });

    var tab2 = Ti.UI.createTab({
<span class="hljs-label">        title:</span> <span class="hljs-string">'Dashboard'</span>,
<span class="hljs-label">        icon:</span> <span class="hljs-string">'/images/textags.png'</span>,
<span class="hljs-label">        window:</span> win2
    });
    tabGroup.addTab(tab2);

    <span class="hljs-comment">//Need to add label</span>
    <span class="hljs-comment">//I need to change this to reveal average user ratings</span>
    var ratingView = <span class="hljs-keyword">new</span> ui.RatingView(<span class="hljs-number">4.5</span>, <span class="hljs-number">5</span>);
    ratingView.bottom = <span class="hljs-string">'70%'</span>;
    ratingView.left = <span class="hljs-number">0</span>;
    view2.add(ratingView);


    var ratingView2 = <span class="hljs-keyword">new</span> ui.RatingView2(<span class="hljs-number">4.0</span>, <span class="hljs-number">5</span>);
    ratingView2.bottom = <span class="hljs-string">'40%'</span>;
    ratingView2.right = <span class="hljs-number">0</span>;
    view2.add(ratingView2);

    ratingView2.addEventListener(<span class="hljs-string">'ratingChanged2'</span>, function(e) {
        alert(e.currentValue+ <span class="hljs-string">" "</span> + <span class="hljs-string">"New Overall Rating"</span>);
    });

    <span class="hljs-comment">//Need to add label</span>
    <span class="hljs-comment">//Need to add a function to insert my rating and then re-compute overall ratings</span>
    var btn = ui.button({
<span class="hljs-label">        bottom:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        left:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        title:</span><span class="hljs-string">'My Rating'</span>,
<span class="hljs-label">        height:</span><span class="hljs-string">'39%'</span>,
<span class="hljs-label">        width:</span><span class="hljs-string">'auto'</span>,
<span class="hljs-label">        font:</span>  {<span class="hljs-string">fontSize:</span>  <span class="hljs-number">18</span>, <span class="hljs-string">fontColor:</span> <span class="hljs-string">'red'</span>, <span class="hljs-string">fontWeight:</span>  <span class="hljs-string">'bold'</span>},
    }, function() {
        ratingView2.changeRating(<span class="hljs-number">4.5</span>);
    });
    view2.add(btn);

    <span class="hljs-comment">//this gets and copies the text from the email text box</span>
        function copyTextToClipboard() {
            Ti.UI.Clipboard.setText(tf1.value);
            copyButton.visible = <span class="hljs-literal">false</span>;
            pasteButton.visible = <span class="hljs-literal">true</span>;
            }

    tabGroup.open();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 9th 2013, 7:31:10 pm">October 9th 2013</span>
				by <span class='authorname'>Lyndon Castro</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>match textupdate eve</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Do I need a &quot;removeEventListener&quot; after </p>
<p>  tf1.addEventListener(&#39;myevent&#39;, function(e){</p>
<pre><code class="hljs">    <span class="hljs-tag">ttAd</span><span class="hljs-class">.textUpdate</span>(<span class="hljs-tag">e</span><span class="hljs-class">.message</span>);
});
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="October 9th 2013, 7:45:45 pm">October 9th 2013</span>
								by <span class='authorname'>Lyndon Castro</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
