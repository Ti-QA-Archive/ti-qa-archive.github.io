<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Image uploaded not viewable » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Image uploaded not viewable</h1>
		</header>
		<section>
			<p>Hi all,<br>I have captured image and sent to the server using following;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> imageDir = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, <span class="hljs-string">'images'</span>);
                    <span class="hljs-keyword">var</span> fread = Ti.Filesystem.getFile(imageDir.resolve(), <span class="hljs-string">'myFile001.jpeg'</span>);
                }
                <span class="hljs-keyword">var</span> imageHolder = fread.<span class="hljs-keyword">read</span>();
</code></pre><p>and the file gets uploaded to the server as a file (coz i have attached using boundary and all). But when I try to open this file (having no extension), in any viewer (previewer, browser, renaming and view as photo) the file says not proper format. And when I see its content it looks as;</p>
<pre><code class="hljs">????ExifII*    ??    z    ?1
?2?i??HsamsungSGH-I<span class="hljs-number">997I997</span>UCLB<span class="hljs-number">32013:04:25</span> 17:43:17??????"?'?'?0220?????
???
?
??    ?
?#??+?????    ??? ?<span class="hljs-keyword">A</span>{
<span class="hljs-number">2013:04:25</span> <span class="hljs-number">17:43:172013</span>:<span class="hljs-number">04:25 17:43</span>:17??d[?d_?IICSAUser commentsTBEC25
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 29th 2013, 11:18:05 am">April 29th 2013</span>
				by <span class='authorname'>sujan t</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>image</span></li>
					
						<li><span class='tagname'>photo</span></li>
					
						<li><span class='tagname'>read</span></li>
					
						<li><span class='tagname'>upload</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-261805">
				
						<section>
							<p>hi,</p>
<p>instead of <strong>imageDir.resolve()</strong> just use <strong>imageDir.nativePath</strong></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 29th 2013, 12:37:01 pm">April 29th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="../../question/151714/image-uploaded-not-viewable.html#answer-261805" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>no this isnt working. nativePath works fine for external storage. but in my case it is to extract from app directory…  resolve() is doing fine but i m just confused about the file type and why it&#39;s not opening or is there any other way to open it ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 29th 2013, 12:56:31 pm">April 29th 2013</span>
											by <span class='authorname'>sujan t</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-261808">
				
						<section>
							<p>Your code is returning a file object blob. You need to use this as the &#39;image&#39; property of an ImageView.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 29th 2013, 1:07:04 pm">April 29th 2013</span>
								by <span class='authorname'>Kosso</span><br>
								<a class="icon-bg icon-link" href="../../question/151714/image-uploaded-not-viewable.html#answer-261808" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Kosso,<br>I&#39;m not using this image in imageView in appcelerator but want to view in program explorer or picture viewer programs. Is there any way to view this kind of file in photo viewer ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 29th 2013, 1:17:19 pm">April 29th 2013</span>
											by <span class='authorname'>sujan t</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Do you mean you want to view the uploaded file on your computer &#x2F; server? (not the device?) </p>
<p>Without seeing or knowing how you have uploaded this file to your server and how you save it &#x2F; detect its format etc. (no idea why you use boundaries etc at all) then it&#39;s impossible to help you there.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 29th 2013, 1:22:09 pm">April 29th 2013</span>
											by <span class='authorname'>Kosso</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ya, I want to view this image in the server using some image viewer. I have uploaded other media as well, they are uploaded fine and can be viewed properly. The use of boundary is also for the same purpose (sending multiple media to the server). Now the only problem I have is I can&#39;t view this uploaded image.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 29th 2013, 1:50:15 pm">April 29th 2013</span>
											by <span class='authorname'>sujan t</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Well without seeing the code of how you&#39;re actually uploading and receiving the files (and how) I&#39;m afraid we can&#39;t help you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 29th 2013, 1:54:58 pm">April 29th 2013</span>
											by <span class='authorname'>Kosso</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">var imageDir = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, 'images');
                    var fread = Ti.Filesystem.getFile(imageDir.resolve(), 'myFile001.jpeg');
                <span class="hljs-special">}</span>
                var imageHolder = fread.read();

var xhr = Titanium.Network.createHTTPClient();
    var boundary = '----boundary----';
    var header = "--" + boundary + "<span class="hljs-command">\r</span><span class="hljs-command">\n</span>" + "Content-Disposition: f-data;  name=<span class="hljs-command">\"</span>user_name<span class="hljs-command">\"</span><span class="hljs-command">\r</span><span class="hljs-command">\n</span><span class="hljs-command">\r</span><span class="hljs-command">\n</span>" + serverUserName + "<span class="hljs-command">\r</span><span class="hljs-command">\n</span>";
    header += "--" + boundary + "<span class="hljs-command">\r</span><span class="hljs-command">\n</span>" + "Content-Disposition: f-data;  name=<span class="hljs-command">\"</span>user_pass<span class="hljs-command">\"</span><span class="hljs-command">\r</span><span class="hljs-command">\n</span><span class="hljs-command">\r</span><span class="hljs-command">\n</span>" + serverPassword + "<span class="hljs-command">\r</span><span class="hljs-command">\n</span>";

    header += "--" + boundary + "<span class="hljs-command">\r</span><span class="hljs-command">\n</span>";
    header += "Content-Disposition: form-data; name=<span class="hljs-command">\"</span>" + "my_file" + "<span class="hljs-command">\"</span>;";
    header += "filename=<span class="hljs-command">\"</span>" + Titanium.Platform.id + "<span class="hljs-command">\"</span><span class="hljs-command">\r</span><span class="hljs-command">\n</span>";
    header += "Content-Type: text/xml<span class="hljs-command">\r</span><span class="hljs-command">\n</span><span class="hljs-command">\r</span><span class="hljs-command">\n</span>";
    var fullContent = header + myFirstData + "<span class="hljs-command">\r</span><span class="hljs-command">\n</span>--" + boundary + "<span class="hljs-command">\r</span><span class="hljs-command">\n</span>";

    fullContent += "Content-Disposition: form-data; name=<span class="hljs-command">\"</span>" + "imageName" + "<span class="hljs-command">\"</span>;";
    fullContent += "filename=<span class="hljs-command">\"</span>" + "temp.jpeg" + "<span class="hljs-command">\"</span><span class="hljs-command">\r</span><span class="hljs-command">\n</span>";
    fullContent += "Content-Type: image/jpeg<span class="hljs-command">\r</span><span class="hljs-command">\n</span><span class="hljs-command">\r</span><span class="hljs-command">\n</span>";
    fullContent += imageHolder + "<span class="hljs-command">\r</span><span class="hljs-command">\n</span>--" + boundary + "<span class="hljs-command">\r</span><span class="hljs-command">\n</span>";

    xhr.open("POST", serverURL);
    xhr.setRequestHeader("Content-type", "multipart/form-data; boundary=<span class="hljs-command">\"</span>" + boundary + "<span class="hljs-command">\"</span>");
    xhr.setRequestHeader("Connection", "close");
    xhr.send(fullContent);
</code></pre><p>everything is fine with the variable (fullContent, myFirstData) and its data within. This is the way I am successfully uploading my image file.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 29th 2013, 2:03:42 pm">April 29th 2013</span>
											by <span class='authorname'>sujan t</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-261826">
				
						<section>
							<p>I have a similar setup and send my images to server reading from file.<br>Question, can you try to create an imageView and add that blob to the image property and see if the image shows up on the view? Im not asking you to upload the imageView.toImage(), just try to see the image on the view.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 29th 2013, 5:17:33 pm">April 29th 2013</span>
								by <span class='authorname'>Mobile Developer</span><br>
								<a class="icon-bg icon-link" href="../../question/151714/image-uploaded-not-viewable.html#answer-261826" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hello there, I have set the image to the imageView and it is displaying fine. I have done;</p>
<pre><code class="hljs">var <span class="hljs-keyword">fread</span> = Ti.Filesystem.getFile(imageDir.resolve(), curFileName);
anImageView.<span class="hljs-keyword">image</span> = <span class="hljs-keyword">fread</span>.read();
</code></pre><p>and the image is shown in the imageView. So, there is no problem with the image file.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 30th 2013, 3:14:51 am">April 30th 2013</span>
											by <span class='authorname'>sujan t</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So maybe the problem is how you are sending it.</p>
<p>try this:<br>var xhr = Titanium.Network.createHTTPClient();</p>
<p>xhr.open(&#39;POST&#39;, YOUR_URL);</p>
<p>xhr.send({media : fread.read()});</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 30th 2013, 10:51:52 am">April 30th 2013</span>
											by <span class='authorname'>Mobile Developer</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-274231">
				
						<section>
							<p>Hello Sujan dai, have you found out any solution?? :P</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 22nd 2014, 5:31:11 am">January 22nd 2014</span>
								by <span class='authorname'>Sagar Maharjan</span><br>
								<a class="icon-bg icon-link" href="../../question/151714/image-uploaded-not-viewable.html#answer-274231" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
