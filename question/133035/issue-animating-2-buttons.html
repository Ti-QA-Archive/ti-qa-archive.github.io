<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Issue animating 2 buttons. Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Issue animating 2 buttons.</h1>
		</header>
		<section>
			<p>I&#39;m using 2 buttons just for a simple test of Titanium mobile animations.</p>
<p>Basically, a button would simply just move up from it&#39;s current position and if the second button already has been moved up, it&#39;ll come back down. Clicking on the second button would move it up while the first button come back down.</p>
<p>However I encountered an issue whereby after a button has been moved up, clicking on the second button sometimes did move the button up but sometimes, the animation just shows that the button was moving to the new position but after the animation was completed, the button did not move to it&#39;s new position.</p>
<pre><code class="hljs"><span class="hljs-label">var</span> <span class="hljs-keyword">selectedButton </span>= null<span class="hljs-comment">;</span>

<span class="hljs-label">var</span> <span class="hljs-keyword">buttonOne </span>= Titanium.UI.createButton({
    title : <span class="hljs-string">"Button1"</span>,
    <span class="hljs-keyword">bottom </span>: <span class="hljs-number">0</span>,
    left : <span class="hljs-number">180</span>,
    ob : <span class="hljs-number">0</span>,
    ol : <span class="hljs-number">180</span>
})<span class="hljs-comment">;</span>

<span class="hljs-keyword">buttonOne.addEventListener("click", </span><span class="hljs-preprocessor">function</span>(e) {
    startAnimate(<span class="hljs-keyword">buttonOne);
</span>})<span class="hljs-comment">;</span>

<span class="hljs-label">var</span> <span class="hljs-keyword">buttonTwo </span>= Titanium.UI.createButton({
    title : <span class="hljs-string">"Button2"</span>,
    <span class="hljs-keyword">bottom </span>: <span class="hljs-number">0</span>,
    left : <span class="hljs-number">50</span>,
    ob : <span class="hljs-number">0</span>,
    ol : <span class="hljs-number">50</span>
})<span class="hljs-comment">;</span>

<span class="hljs-keyword">buttonTwo.addEventListener("click", </span><span class="hljs-preprocessor">function</span>(e) {
    startAnimate(<span class="hljs-keyword">buttonTwo);
</span>})<span class="hljs-comment">;</span>

<span class="hljs-label">function</span> startAnimate(<span class="hljs-keyword">button) </span>{
    <span class="hljs-preprocessor">if</span>(<span class="hljs-keyword">selectedButton </span>!= null) { //<span class="hljs-keyword">Move </span><span class="hljs-keyword">it </span><span class="hljs-keyword">back </span>down
        <span class="hljs-keyword">selectedButton.animate({
</span>            <span class="hljs-keyword">bottom </span>: <span class="hljs-number">0</span>,
            left : <span class="hljs-keyword">selectedButton.ol,
</span>            duration : <span class="hljs-number">100</span>
        }, <span class="hljs-preprocessor">function</span>() {
            <span class="hljs-keyword">selectedButton.bottom </span>= <span class="hljs-number">0</span><span class="hljs-comment">;</span>
            <span class="hljs-keyword">selectedButton.left </span>= <span class="hljs-keyword">selectedButton.ol;
</span>        })<span class="hljs-comment">;</span>
    }

    <span class="hljs-keyword">button.animate({ </span>     //<span class="hljs-keyword">Move </span><span class="hljs-keyword">it </span>up
        <span class="hljs-keyword">bottom </span>: <span class="hljs-number">100</span>,
        left : <span class="hljs-keyword">button.ol,
</span>        duration : <span class="hljs-number">100</span>
    }, <span class="hljs-preprocessor">function</span>() {
        <span class="hljs-keyword">button.bottom </span>= <span class="hljs-number">100</span><span class="hljs-comment">;</span>
        <span class="hljs-keyword">button.left </span>= <span class="hljs-keyword">button.ol;
</span>    })<span class="hljs-comment">;</span>

    <span class="hljs-keyword">selectedButton </span>= <span class="hljs-keyword">button;
</span>
}
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 1st 2012, 4:23:57 pm">March 1st 2012</span>
				by <span class='authorname'>Eric Kong</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>animate</span></li>
					
						<li><span class='tagname'>animation</span></li>
					
						<li><span class='tagname'>button</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-232069">
				
						<section>
							<p>I suggest to do the sentence <code>selectedButton = button;</code> when the animation has finished (inside the callback function). This will ensure to assign to selectedButton the instance of button you expect.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 1st 2012, 5:12:05 pm">March 1st 2012</span>
								by <span class='authorname'>Javier Rayon</span><br>
								<a class="icon-bg icon-link" href="question/133035/issue-animating-2-buttons.html#answer-232069" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-232093">
				
						<section>
							<p>Remove callbacks of the 2 button&#39;s animations would help:</p>
<pre><code class="hljs"><span class="hljs-label">function</span> startAnimate(<span class="hljs-keyword">button) </span>{
    <span class="hljs-preprocessor">if</span>(<span class="hljs-keyword">selectedButton </span>!= null) { //<span class="hljs-keyword">Move </span><span class="hljs-keyword">it </span><span class="hljs-keyword">back </span>down
        <span class="hljs-keyword">selectedButton.animate({
</span>            <span class="hljs-keyword">bottom </span>: <span class="hljs-number">0</span>,
            left : <span class="hljs-keyword">selectedButton.ol,
</span>            duration : <span class="hljs-number">100</span>
        }
        // , <span class="hljs-preprocessor">function</span>() {
            // <span class="hljs-keyword">selectedButton.bottom </span>= <span class="hljs-number">0</span><span class="hljs-comment">;</span>
            // <span class="hljs-keyword">selectedButton.left </span>= <span class="hljs-keyword">selectedButton.ol;
</span>        // }
        )<span class="hljs-comment">;</span>
    }

    <span class="hljs-keyword">button.animate({ </span>     //<span class="hljs-keyword">Move </span><span class="hljs-keyword">it </span>up
        <span class="hljs-keyword">bottom </span>: <span class="hljs-number">100</span>,
        left : <span class="hljs-keyword">button.ol,
</span>        duration : <span class="hljs-number">100</span>
    }
    // , <span class="hljs-preprocessor">function</span>() {
        // <span class="hljs-keyword">button.bottom </span>= <span class="hljs-number">100</span><span class="hljs-comment">;</span>
        // <span class="hljs-keyword">button.left </span>= <span class="hljs-keyword">button.ol;
</span>    // }
    )<span class="hljs-comment">;</span>

    <span class="hljs-keyword">selectedButton </span>= <span class="hljs-keyword">button;
</span>
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 2nd 2012, 1:47:14 am">March 2nd 2012</span>
								by <span class='authorname'>Minh Nguyen</span><br>
								<a class="icon-bg icon-link" href="question/133035/issue-animating-2-buttons.html#answer-232093" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
