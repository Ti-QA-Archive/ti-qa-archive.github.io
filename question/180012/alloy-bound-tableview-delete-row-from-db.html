<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy Bound Tableview Delete Row from DB » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy Bound Tableview Delete Row from DB</h1>
		</header>
		<section>
			<p>Seems simple enough, but I am finding it difficult to locate resources which show how to do it. We want to display list of records from the DB (alloy), provide an edit and delete button (Imageview). On click, edit opens the edit screen and delete removes the record from the database.   I added custom attribute record_id to imageview, but it does not seem to get passed in its event listener.  We are displaying the records using bound tableview.</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"saleTable"</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"Sales"</span> <span class="hljs-attribute">editable</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">editing</span>=<span class="hljs-value">"true"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">layout</span>=<span class="hljs-value">"horizontal"</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"{sale_date}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"{amount}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">ImageView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"delete"</span> <span class="hljs-attribute">record_id</span>=<span class="hljs-value">"{id}"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"deleteRow"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">ImageView</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">TableViewRow</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
</code></pre><p>The delete button does not seem to appear for lower versions of android (2.3.3) which we need to target.</p>
<p>Please help.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 2nd 2015, 2:36:24 am">January 2nd 2015</span>
				by <span class='authorname'>Anvaya Tech</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>edit</span></li>
					
						<li><span class='tagname'>row delete</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>-1 because:</p>
<ol>
<li>showing the associated TSS would have been too much to expect</li>
<li>no tooling versions</li>
<li>no environment versions</li>
<li>no details about the android 2.3.3 devices this is being tested against.</li>
</ol>
</div>
							<div class="author">
								&mdash; commented <span title="January 2nd 2015, 12:27:29 pm">January 2nd 2015</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>This is strange, instead of asking for details, you give it negative vote ?  </p>
<p>– The editing &#x2F; editable buttons work in IOS only, so taking back the android 2..3.3 issue.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 3rd 2015, 12:59:54 am">January 3rd 2015</span>
								by <span class='authorname'>Anvaya Tech</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-284888">
				
						<section>
							<p>The key issue has been to identify and pass primary key of the record to be deleted &#x2F; edited. This was solved by adding the primary key as an attribute to the tableViewRow Element:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"rowClick"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span> <span class="hljs-attribute">record_id</span>=<span class="hljs-value">"{id}"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">TableViewRow</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
</code></pre><p>And in the click event handler:</p>
<pre><code class="hljs">function rowClick(<span class="hljs-keyword">e</span>)
{
     <span class="hljs-keyword">var</span> id = <span class="hljs-keyword">e</span>.rowData.record_id;

<span class="hljs-comment">///From hereon you can build a custom alert dialog which presents options to edit / delete this row.</span>

<span class="hljs-comment">///For delete the functionality can be like this:</span>
<span class="hljs-keyword">var</span> <span class="hljs-keyword">db</span> = Ti.database.<span class="hljs-keyword">open</span>(<span class="hljs-string">"_alloy_"</span>);
<span class="hljs-keyword">db</span>.execute(<span class="hljs-string">"delete from sale where id = ?"</span>, id);
<span class="hljs-keyword">db</span>.<span class="hljs-keyword">close</span>();

}
</code></pre><p>Tested to be working in Titanium 3.4.1 GA with Android 2.3.3 Emulator.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 3rd 2015, 1:36:37 am">January 3rd 2015</span>
								by <span class='authorname'>Anvaya Tech</span><br>
								<a class="icon-bg icon-link" href="question/180012/alloy-bound-tableview-delete-row-from-db.html#answer-284888" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
