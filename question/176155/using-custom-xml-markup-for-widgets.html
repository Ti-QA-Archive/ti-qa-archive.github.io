<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Using custom XML markup for widgets Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Using custom XML markup for widgets</h1>
		</header>
		<section>
			<p>I am creating my own widget and I&#39;d like to let the developer specify the view through XML.</p>
<p>&lt;Widget src=&#39;myWidgetName&#39;&gt;<br>  &lt;CustomMarkup&gt;custom stuff&lt;&#x2F;CustomMarkup&gt;<br>&lt;&#x2F;Widget&gt;</p>
<p>Right now, this just errors out. Alloy is trying to do something with my CustomMarkup tag. I thought at first it might be calling my widget with a method createCustomMarkup, but adding that function doesn&#39;t seem to help. </p>
<p>Are there any docs for extending XML in Alloy for custom widgets and modules?</p>
<p>Thanks!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 15th 2014, 4:54:34 pm">July 15th 2014</span>
				by <span class='authorname'>Brian McBride</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>widget</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>To clarify my earlier post. I&#39;d like to use Alloy&#39;s XML style to define my widget views, from the calling XML file (say index.xml). Similar to:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Widget</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">'myWidget'</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'myMenu'</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span>&gt;</span>Maybe this is a logo, text title, whatever<span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Menu</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"First Menu Item"</span> <span class="hljs-attribute">special</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">5</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Menu</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Submenu item"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Menu</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Menu</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Second Menu Item"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Divider</span> <span class="hljs-attribute">thickness</span>=<span class="hljs-value">'5dp'</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Menu</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Settings"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Widget</span>&gt;</span>
</code></pre><p>Upon which my widget.js handles parsing all the XML (ideally passed as an object) within the &lt;Widget&gt; tags.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 16th 2014, 12:55:42 pm">July 16th 2014</span>
								by <span class='authorname'>Brian McBride</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-280733">
				
						<section>
							<p>Hi</p>
<p>Your example does not expand on what those custom mark-up elements are meant to do, but I think this is what you are after;</p>
<ul>
<li>[Custom Alloy view components](http:&#x2F;&#x2F;fokkezb.nl&#x2F;2013&#x2F;07&#x2F;14&#x2F;custom-alloy-view-components&#x2F;</li>
</ul>
<p>As you will notice in this article you can end up with things like this is you really need;</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">SomeView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"someView"</span> <span class="hljs-attribute">ns</span>=<span class="hljs-value">"require('custom')"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"standardView"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">AnotherView</span> <span class="hljs-attribute">ns</span>=<span class="hljs-value">"require('custom')"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">SomeView</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>This solution does not use Widgets, it extends Alloy by using CommonJS.</p>
<p>Happy experimenting.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 15th 2014, 6:26:03 pm">July 15th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/176155/using-custom-xml-markup-for-widgets#answer-280733" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>It shouldn&#39;t matter what the custom XML elements are meant to do. Rather, I&#39;d just like them passed to my widget to handle. </p>
<p>For instance, as you point out, you can put in a subview in an existing view. That&#39;s fine because Alloy is creating a view instance and then creating another view instance within. That said, if I define a widget in the XML, will Alloy create views within my widget if I put views in there?</p>
<p>Let&#39;s say I am going to create a widget menu that supports menu items. Now, I can, of course, go into the Widget XML and define everything there, but I don&#39;t want my developer to have to modify the core widget. Rather, I want them to maybe have a structure like this:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Widget</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">'myWidget'</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'myMenu'</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span>&gt;</span>Maybe this is a logo, text title, whatever<span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Menu</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"First Menu Item"</span> <span class="hljs-attribute">special</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">5</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Menu</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Submenu item"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Menu</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Menu</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Second Menu Item"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Divider</span> <span class="hljs-attribute">thickness</span>=<span class="hljs-value">'5dp'</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Menu</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Settings"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Widget</span>&gt;</span>
</code></pre><p>I&#39;m totally making this up, but what I am working on is more complicated and I want to keep it simple.<br>In an ideal world, everything between my &lt;Widget&gt; tags is passed to my widget so that it can deal with it. Like Alloy, I use the data to create my custom views and functionality. </p>
<p>You&#39;ll note that the support for Children also would be ideal.</p>
<p>Interestingly enough, currently anything defined in the Widget tags gets passed as an argument of children in the arguments. However, sub-children are not. You do have to use existing XML markup names. </p>
<p>In the example above, &lt;View&gt; would pass ok. &lt;Menu&gt; would likely cause an error. But if you changed everything to &lt;View&gt; tags and used an argument such as &lt;View type=&#39;menu&#39;&gt; the sub&#x2F;children XML tags seem to get lost completely.</p>
<p>Case in point, here is something similar with just views:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Widget</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"myWidget"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'mainView'</span> <span class="hljs-attribute">somevalue</span>=<span class="hljs-value">"valuePassedJustFine"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'MenuOne'</span> <span class="hljs-attribute">gsType</span>=<span class="hljs-value">'menu'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'MenuTwo'</span> <span class="hljs-attribute">gsType</span>=<span class="hljs-value">'menu'</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'SubMenu'</span> <span class="hljs-attribute">result</span>=<span class="hljs-value">'this data lost'</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'MenuThree'</span> <span class="hljs-attribute">gsType</span>=<span class="hljs-value">'menu'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'MenuFour'</span> <span class="hljs-attribute">gsType</span>=<span class="hljs-value">'menu'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Widget</span>&gt;</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 15th 2014, 8:03:30 pm">July 15th 2014</span>
											by <span class='authorname'>Brian McBride</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>There doesn&#39;t appear to be a follow up question to hang my hat on.</p>
<p>However Alloy does account for this with the optional parameter field during creation in the controller.</p>
<p>Something like this is perfectly simple;</p>
<pre><code class="hljs">var x = Alloy.createWidget(<span class="hljs-string">'something'</span>, <span class="hljs-string">'widget'</span>, [
    { <span class="hljs-string">id:</span> <span class="hljs-string">'MenuOne'</span>, <span class="hljs-string">gsType:</span> <span class="hljs-string">'menu'</span> },
    {
<span class="hljs-label">        id:</span> <span class="hljs-string">'MenuTwo'</span>,
<span class="hljs-label">        gsType:</span> <span class="hljs-string">'menu'</span>,
<span class="hljs-label">        kids:</span> [
            { <span class="hljs-string">id:</span> <span class="hljs-string">'SubMenu'</span>, <span class="hljs-string">result:</span> <span class="hljs-string">'this data lost'</span> },
        ]
    },
    { <span class="hljs-string">id:</span> <span class="hljs-string">'MenuThree'</span>, <span class="hljs-string">gsType:</span> <span class="hljs-string">'menu'</span> },
    { <span class="hljs-string">id:</span> <span class="hljs-string">'MenuFour'</span>, <span class="hljs-string">gsType:</span> <span class="hljs-string">'menu'</span> },
]);
</code></pre><p>In the controller;</p>
<pre><code class="hljs">var args = arguments[<span class="hljs-number">0</span>] || [];

<span class="hljs-number">_</span>.<span class="hljs-keyword">each</span>(args, function (item) {
    Ti.API.info(<span class="hljs-string">'item: '</span> + JSON.stringify(item));
    <span class="hljs-number">_</span>.<span class="hljs-keyword">each</span>(item.kids || [], function (<span class="hljs-sub"><span class="hljs-keyword">sub</span>) {</span>
        Ti.API.info(<span class="hljs-string">'sub: '</span> + JSON.stringify(<span class="hljs-sub"><span class="hljs-keyword">sub</span>));</span>
    }
});
</code></pre><p>This is what we do and gives us the maximum flexibility of hard-coded and dynamic options.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2014, 5:16:24 am">July 16th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>What you have is a great solution when working in a regular titanium style.</p>
<p>I am wondering if the same can be defined in the XML to follow Alloy conventions. It seems with Alloy the point is to define the views in XML and style in TSS. What you proposed is exactly what I am doing now, but looking for the &quot;Alloy&quot; way.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2014, 12:52:36 pm">July 16th 2014</span>
											by <span class='authorname'>Brian McBride</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
