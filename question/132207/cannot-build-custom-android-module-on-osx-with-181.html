<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Cannot build custom Android module on osx with 1.8.1 » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Cannot build custom Android module on osx with 1.8.1</h1>
		</header>
		<section>
			<p>I was going to build my own module on 1.8.1 and osx, but I can&#39;t even compile the example module. I have setup everything according to the guide on the wiki. But I get this error while building:</p>
<pre><code class="hljs">generate<span class="hljs-class">.rhino</span><span class="hljs-class">.bindings</span>:
     [java] java<span class="hljs-class">.util</span><span class="hljs-class">.zip</span><span class="hljs-class">.ZipException</span>: error <span class="hljs-keyword">in</span> opening zip file
...
...
     [java] Java Result: -<span class="hljs-number">1</span>

generate<span class="hljs-class">.rhino</span><span class="hljs-class">.idswitch</span>:

generate<span class="hljs-class">.v8</span><span class="hljs-class">.bindings</span>:
     [java] java<span class="hljs-class">.util</span><span class="hljs-class">.zip</span><span class="hljs-class">.ZipException</span>: error <span class="hljs-keyword">in</span> opening zip file
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 15th 2012, 6:14:54 pm">February 15th 2012</span>
				by <span class='authorname'>Tomas Persson</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>1.8.1</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>module</span></li>
					
						<li><span class='tagname'>osx</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-230425">
				
						<section>
							<p>did you take a look at the Android upgrade document. <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Android+Module+Porting+Guide+for+1.8.0.1">https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Android+Module+Porting+Guide+for+1.8.0.1</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 15th 2012, 7:30:10 pm">February 15th 2012</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/132207/cannot-build-custom-android-module-on-osx-with-181#answer-230425" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-230426">
				
						<section>
							<p>Yes I did. However, this module was created with the 1.8.1 sdk (on OSX 10.6.8) and I never modified the project except for the build.properties to point out the location of my android-sdk and ndk. <a href="http:&#x2F;&#x2F;pastebin.com&#x2F;Jekcu83Z">this</a> is the full output of my build.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 15th 2012, 7:35:24 pm">February 15th 2012</span>
								by <span class='authorname'>Tomas Persson</span><br>
								<a class="icon-bg icon-link" href="question/132207/cannot-build-custom-android-module-on-osx-with-181#answer-230426" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>since it is a test project can you post it some where and I will take a look</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 15th 2012, 7:36:09 pm">February 15th 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sure: <a href="http:&#x2F;&#x2F;dl.dropbox.com&#x2F;u&#x2F;3388041&#x2F;tester.zip">clicky</a></p>
<p>This is the out of the box project created with this command line:</p>
<pre><code class="hljs"><span class="hljs-comment">titanium</span> <span class="hljs-comment">create</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">platform=android</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">type=module</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">name=tester</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">id=net</span><span class="hljs-string">.</span><span class="hljs-comment">bajawa</span><span class="hljs-string">.</span><span class="hljs-comment">test</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">android=/Users/tomper/android</span><span class="hljs-literal">-</span><span class="hljs-comment">sdk</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 15th 2012, 8:40:28 pm">February 15th 2012</span>
											by <span class='authorname'>Tomas Persson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Specs:</p>
<ul>
<li>OSX: 10.6.8</li>
<li>Ant: 1.7.1 </li>
<li>Java: 1.6.0_29</li>
<li>Python: 2.7.2 </li>
<li>Titanium Mobile SDK: 1.8.1 (have also tried with CI builds of 1.8.2 and greater)</li>
<li>Android NDK: Revision 7b (released today Feb 16, did try with just rev.7 aswell)</li>
<li>Android sdk: All of them :) Every available package in the android sdk manager</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="February 15th 2012, 9:11:33 pm">February 15th 2012</span>
											by <span class='authorname'>Tomas Persson</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-230436">
				
						<section>
							<p>your properties file is incorrect.</p>
<p>this line is incorrect</p>
<pre><code class="hljs">titanium.platform=<span class="hljs-regexp">/Library/</span>Application Support<span class="hljs-regexp">/Titanium/m</span>obilesdk<span class="hljs-regexp">/osx/</span><span class="hljs-number">2.0</span>.<span class="hljs-number">0</span>.v20120215111634<span class="hljs-regexp">/android</span>
</code></pre><p>it should look like this</p>
<pre><code class="hljs">titanium.platform=/Library/Application Support/Titanium/mobilesdk/osx/<span class="hljs-number">1.8</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/android
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 15th 2012, 9:21:45 pm">February 15th 2012</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/132207/cannot-build-custom-android-module-on-osx-with-181#answer-230436" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i just compiled your code and it worked fine</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 15th 2012, 9:24:14 pm">February 15th 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That was because I was trying with a sdk build from the CI. I&#39;ve tried with 1.8.0.1, 1.8.1, 1.8.2 (from the CI) and 2.0.0 (from the CI) but all with the same error. I tried to do it on my work computer this morning (running ubuntu) but get the same error :(</p>
<p>Am I Doomed? :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 5:27:48 am">February 16th 2012</span>
											by <span class='authorname'>Tomas Persson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just tried to build with <a href="http:&#x2F;&#x2F;builds.appcelerator.com.s3.amazonaws.com&#x2F;mobile&#x2F;1_7_X&#x2F;mobilesdk-1.7.6.v20120116143134-linux.zip">this</a> (on my work computer running ubuntu and more or less similar versions that&#39;s on my mac at home) it&#39;s sdk version 1.7.6 from the CI server and I got a successful build (using a newly created module project with that sdk).</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 5:45:29 am">February 16th 2012</span>
											by <span class='authorname'>Tomas Persson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Does it matter which version of the sdk I build it with? Obviously I understand that if I want to use the newer features I have to use a newer sdk. But I will only be using some very basic android functions not requiring any contexts or such (for now at least).</p>
<p>So if I compile the module with, say 1.7.6, can a user that has 1.8.x install and use it?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 11:05:13 am">February 16th 2012</span>
											by <span class='authorname'>Tomas Persson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just found <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Titanium+Compatibility+Matrix#TitaniumCompatibilityMatrix-AndroidSDKManager">this</a> link that says I need to use Android SDK Tool Rev 15 (I have rev 16) and Platform-tools rev 9 (I have rev 10) that could be it I guess? Thinking of this makes me want to vomit, I&#39;m about to give up or just stick with 1.7.6 which works but won&#39;t let me be able to use in 1.8.x projects. Dilemma!</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2012, 8:40:02 pm">February 17th 2012</span>
											by <span class='authorname'>Tomas Persson</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-231298">
				
						<section>
							<p>I finally found the error!</p>
<p>In my error output I could see that the build-script could not open a zip file. So I checked the KrollBindingGenerator.java that was the culprit and added some prints to it. Then I compiled my own version of the sdk, installed it, generated the example module, started the module build and saw what was wrong. </p>
<p>This line:</p>
<pre><code class="hljs">JarFile titaniumJar = new JarFile<span class="hljs-list">(<span class="hljs-keyword">new</span> File<span class="hljs-list">(<span class="hljs-keyword">mobileAndroidDir</span>, <span class="hljs-string">"titanium.jar"</span>)</span>)</span><span class="hljs-comment">;</span>
</code></pre><p>tries to open a titanium.jar that&#39;s supposed to be in the sdk folder (and it is) but &quot;mobileAndroidDir&quot; points to &quot;&#x2F;usr&#x2F;share&#x2F;ant&#x2F;lib&quot; for some reason and that&#39;s why I get the error.</p>
<p>I then hardcoded the path to my own version of the sdk&#39;s titanium.jar, rebuilt it and viola! It builds!</p>
<p>The question now is: Why does it think &quot;mobileAndroidDir&quot; points to &quot;&#x2F;usr&#x2F;share&#x2F;ant&#x2F;lib&quot;?!</p>
<p>But I don&#39;t mind having the path hardcoded for now, hey, at least I can build my module (<a href="https:&#x2F;&#x2F;marketplace.appcelerator.com&#x2F;apps&#x2F;1978">this one</a>…shameless plug :)) for sdk&#39;s over version 1.7.6 \o&#x2F;</p>
<p>I can also begin to move forward with my other planned modules now \o&#x2F;</p>
<p>Thank you Aaron for all your help and for enduring my spam ;)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 23rd 2012, 7:42:53 am">February 23rd 2012</span>
								by <span class='authorname'>Tomas Persson</span><br>
								<a class="icon-bg icon-link" href="question/132207/cannot-build-custom-android-module-on-osx-with-181#answer-231298" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
