<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Custom Map issue on Android » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Custom Map issue on Android</h1>
		</header>
		<section>
			<p>Hello fellow community.</p>
<p>I have a window that consist of a scrollview, an imageview that is added to the scrollview and custom pins ontop.<br>This works great in iPhone.</p>
<p>However, its a different story on Android.<br>ScrollView does only support one way of scrolling.<br>So I did this:</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (Titanium.Platform.name == <span class="hljs-string">'android'</span>) {

var mapImage = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory,<span class="hljs-string">'images/floorplan.png'</span>);
var mapView = Titanium.UI.createImageView({
    <span class="hljs-built_in">image</span>: mapImage,
    backgroundColor:<span class="hljs-string">'transparent'</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-string">'auto'</span>,
      <span class="hljs-variable">width</span>: <span class="hljs-string">'auto'</span>,
    canScale: <span class="hljs-keyword">true</span>, <span class="hljs-comment">//android zoom controls</span>
    top:<span class="hljs-number">0</span>,
    left:<span class="hljs-number">0</span>
});

var webView = Titanium.UI.createWebView({
        <span class="hljs-variable">width</span>:<span class="hljs-string">'100%'</span>,
        <span class="hljs-variable">height</span>:<span class="hljs-string">'100%'</span>,
        top:<span class="hljs-number">0</span>, 
        left:<span class="hljs-number">0</span>,
        right:<span class="hljs-number">0</span>,
        bottom:<span class="hljs-number">0</span>,
        touchEnabled: <span class="hljs-keyword">true</span>,
        scalesPageToFit: <span class="hljs-keyword">true</span>
    });

    webView.<span class="hljs-built_in">add</span>(mapView);
</code></pre><p>This still does not work. The image is only half the screen of the Android due to its auto resize. And because of this resize, my annotation pins are not at the correct coordinates on the imageView… </p>
<p>What am I missing? shouldn&#39;t this be an easy task on android?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 30th 2011, 11:02:18 am">March 30th 2011</span>
				by <span class='authorname'>Mads Møller</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>imageview</span></li>
					
						<li><span class='tagname'>map</span></li>
					
						<li><span class='tagname'>scrolling</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
						<li><span class='tagname'>zoom</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-205289">
				
						<section>
							<p>Do not scale the Map and try the use of Titanium.UI.2DMatrix traslate to simulate a TouchScroll…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 30th 2011, 11:13:45 am">March 30th 2011</span>
								by <span class='authorname'>Valerio Avagliano</span><br>
								<a class="icon-bg icon-link" href="question/117930/custom-map-issue-on-android.html#answer-205289" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>How would I do that? with an eventlisenter for touch? im not following.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 30th 2011, 11:36:39 am">March 30th 2011</span>
											by <span class='authorname'>Mads Møller</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You can use the function Titanium.UI.2DMatrix.translate to move the image with the input from the touch* (move,end,start) Events of the View</p>
<p>I don&#39;t have the code, but I think that&#39;s the way<br>(I try something in the WeekEnd)</p>
<p>Explore, as usual, the examples in KitchenSink</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 30th 2011, 12:40:03 pm">March 30th 2011</span>
											by <span class='authorname'>Valerio Avagliano</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Tip: search &quot;traslate matrix&quot; in this Q&amp;A section to check some code</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 30th 2011, 12:43:08 pm">March 30th 2011</span>
											by <span class='authorname'>Valerio Avagliano</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I still dont get it.<br>I have now tried to only show in image in the html of the webview without any imageview. That makes the zoom and scroll getter. But now I do not know how to add pins?</p>
<p>I could really need some help.. :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 1st 2011, 8:52:50 pm">April 1st 2011</span>
											by <span class='authorname'>Mads Møller</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-205309">
				
						<section>
							<pre><code class="hljs"><span class="hljs-component">win.addEventListener('touchstart', function(e) {
        Ti<span class="hljs-string">.API.info('touchstart')</span>;
        offsetX = e<span class="hljs-string">.x-</span> mapView<span class="hljs-string">.left</span>;
        offsetY = e<span class="hljs-string">.y-</span> mapView<span class="hljs-string">.top</span>
    }</span>);    

<span class="hljs-component">win.addEventListener('touchmove', function(e) {

        moveX = e<span class="hljs-string">.x-offsetX</span>;
        moveY =  e<span class="hljs-string">.y-offsetY</span>;

        var i2 = Titanium<span class="hljs-string">.UI.create2DMatrix()</span>;
        i2 = i2<span class="hljs-string">.translate(moveX</span>,moveY);
        mapView<span class="hljs-string">.transform=i2</span>;


    }</span>);
</code></pre><p>does not work? </p>
<pre><code class="hljs"><span class="hljs-tag">mapView</span><span class="hljs-class">.animate</span>({<span class="hljs-tag">center</span>:{<span class="hljs-attribute">x</span>:moveX,<span class="hljs-attribute">y</span>:moveY}, <span class="hljs-attribute">duration</span>:<span class="hljs-number">0</span>});
</code></pre><p>nor do this.. any suggestions?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 30th 2011, 1:59:00 pm">March 30th 2011</span>
								by <span class='authorname'>Mads Møller</span><br>
								<a class="icon-bg icon-link" href="question/117930/custom-map-issue-on-android.html#answer-205309" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-205514">
				
						<section>
							<p>Would it be possible to maintain an imageView position within a webview, when using the inbuild zoom functionality of the webView?</p>
<p>The current status: I only have a webview and an image (with specific coordinates) </p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 2nd 2011, 9:58:19 am">April 2nd 2011</span>
								by <span class='authorname'>Mads Møller</span><br>
								<a class="icon-bg icon-link" href="question/117930/custom-map-issue-on-android.html#answer-205514" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
