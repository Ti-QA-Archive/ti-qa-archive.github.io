<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>link in webview » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>link in webview</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>i have a webview in my android app.</p>
<p>is it possible to get the link i click inside the webview and execute a specific native code ?</p>
<p>thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 19th 2013, 2:34:21 pm">April 19th 2013</span>
				by <span class='authorname'>Djamel ZAHAL</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-261136">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Have you tried out the following, please try out both local and remote resources you might be able to notice an actual difference:</p>
<h4 id="index-html">index.html</h4>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">onclick</span>=<span class="hljs-value">"Ti.App.fireEvent('app:fromWebView', { message: 'event fired from WebView, handled in Titanium' });"</span>&gt;</span>fromWebView<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre><h4 id="app-js">app.js</h4>
<pre><code class="hljs"><span class="hljs-comment">//somewhere on Titanium</span>
Ti.App.addEventListener(<span class="hljs-string">'app:fromWebView'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    alert(e.message);
        <span class="hljs-comment">//native code</span>
});
</code></pre><p>Hope hearing from you soon, thanks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 19th 2013, 5:26:11 pm">April 19th 2013</span>
								by <span class='authorname'>Eduardo Gomez</span><br>
								<a class="icon-bg icon-link" href="../../question/151247/link-in-webview.html#answer-261136" rel="permalink">permalink</a>
							</div>

							<h5>16 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Sorry, I posted another answer. I meant to respond your previous comment.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 5:27:48 pm">April 19th 2013</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>here is my html : </p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="actionscript">
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">open</span><span class="hljs-params">()</span></span>{
        alert(<span class="hljs-string">'test'</span>);
        Ti.App.fireEvent(<span class="hljs-string">'app:fromWebView'</span>, { message: <span class="hljs-string">'event fired from WebView, handled in Titanium'</span> });
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"javascript:;open()"</span>&gt;</span>open ur app<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre><p>and my js  (native code):</p>
<pre><code class="hljs">Ti.App.addEventListener(<span class="hljs-string">'app:fromWebView'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    alert(e.message);
        <span class="hljs-comment">//native code</span>
});
</code></pre><p>it doesn&#39;t work even if alert(&#39;test&#39;) is executed…so noramally the ti.APp.fireEvent should work too.</p>
<p>but my question is why do not use url scheme ? what is the difference ? in my case, i think i should url scheme because in the link of my web service provided i have : &lt;a href=&quot;myapp:&#x2F;current&quot;&gt;…&lt;&#x2F;a&gt;</p>
<p>thanks for help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 6:26:17 pm">April 19th 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You can definitely use URL property.</p>
<p>To be clear: application level events via the Ti.App module to establish bidirectional communication between <strong>local HTML</strong> in WebViews and native Titanium code.</p>
<p>If you need to interact with <strong>remote HTML content</strong> in a WebView you will have to call the evalJS() method. </p>
<p>BTW - Your html snippet has a typo after &quot;javascript:;&quot; , you may want to double check with button onclick event Ive sent you over to make sure the environment was correctly set up.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 6:36:57 pm">April 19th 2013</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>how about url scheme ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 6:48:39 pm">April 19th 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>can you show me an example of eval.js in my case.</p>
<p>when i click on a link &quot;&lt;a href=&quot;myapp:&#x2F;&#x2F;share&quot;&gt;share&lt;&#x2F;a&gt;&quot; to execute an natif code ?</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 7:14:09 pm">April 19th 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><a href="https:&#x2F;&#x2F;gist.github.com&#x2F;dawsontoth&#x2F;853084">Here you go</a></p>
<p>Hope it helps, best regards.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 12:58:55 pm">April 20th 2013</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>my question is really about url scheme…</p>
<p>my webview is dynamic, the link &quot;a&quot; can be button or any other element..</p>
<p>but the url scheme is myapp:&#x2F;&#x2F;share or ….</p>
<p>with your code, im not obliged to use url scheme myapp:&#x2F;&#x2F;…</p>
<p>but any regular expression…</p>
<p>thanks for help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 1:22:22 pm">April 20th 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The URL Schemes offer the way to communicate third-party apps with each other. Further reading: <a href="http:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;ios&#x2F;#documentation&#x2F;iphone&#x2F;conceptual&#x2F;iphoneosprogrammingguide&#x2F;AdvancedAppTricks&#x2F;AdvancedAppTricks.html#&#x2F;&#x2F;apple_ref&#x2F;doc&#x2F;uid&#x2F;TP40007072-CH7-SW50">Apple docs</a></p>
<p>I&#39;ve already told you what the implications are to get native code executed clicking a link from webView and based either on local or external resources.</p>
<p>Not sure what you are trying to do with <em>myapp:&#x2F;&#x2F;share</em> though.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 1:40:23 pm">April 20th 2013</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Eduardo, </p>
<p>the link you gave me doesn&#39;t work : https:&#x2F;&#x2F;gist.github.com&#x2F;dawsontoth&#x2F;853084</p>
<p>in my case, i have remote url : </p>
<pre><code class="hljs"><span class="hljs-variable">$.</span>offreWebView.url = myURL;
</code></pre><p>so how to adapt the code to work with remote url ?</p>
<p>i thought that evalJS work with remote url…</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 23rd 2013, 12:44:25 pm">April 23rd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Djamel,</p>
<p>The link works for me. Ive tested the code on iOS simulator without problems if thats what you mean.</p>
<p>To be on the same page: <strong>evalJS</strong> will only process short strings (which is not the same <em>executing native code</em>), e.g.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> webview = Ti.UI.createWebView({
    url: <span class="hljs-string">'http://www.google.com'</span>
});
win.add(webview);

webview.addEventListener(<span class="hljs-string">'load'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">var</span> cookies = webview.evalJS(<span class="hljs-string">"document.cookie"</span>).split(<span class="hljs-string">";"</span>); 
    Ti.API.info( <span class="hljs-string">"# of cookies -&gt; "</span> + cookies.length  );
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt;= cookies.length - <span class="hljs-number">1</span>; i++) {
            Ti.API.info( <span class="hljs-string">"cookie -&gt; "</span> + cookies[i] );
    }
});
</code></pre><p>Does that make sense, Djamel?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 23rd 2013, 12:53:00 pm">April 23rd 2013</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Here is my code :</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span> <span class="hljs-attribute">onOpen</span>=<span class="hljs-value">"open"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ActivityIndicator</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"indicator"</span> <span class="hljs-attribute">zIndex</span>=<span class="hljs-value">"1"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"containerView"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"backButton"</span> <span class="hljs-attribute">backgroundImage</span>=<span class="hljs-value">"/images/flecheRetour.png"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"close"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"retourLabel"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">WebView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"offreWebView"</span> <span class="hljs-attribute">top</span>=<span class="hljs-value">"44"</span> <span class="hljs-attribute">left</span>=<span class="hljs-value">"6"</span> <span class="hljs-attribute">right</span>=<span class="hljs-value">"6"</span> <span class="hljs-attribute">bottom</span>=<span class="hljs-value">"6"</span> <span class="hljs-attribute">enableZoomControls</span>=<span class="hljs-value">"false"</span> <span class="hljs-attribute">onLoad</span>=<span class="hljs-value">"loadWebView"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>you see onLoad event.</p>
<p>in the controller : </p>
<pre><code class="hljs">
Ti.App.addEventListener(<span class="hljs-string">'linkClicked'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
    alert(<span class="hljs-string">'You clicked: '</span> + evt.href);
});

<span class="hljs-keyword">var</span> linkJS = <span class="hljs-string">'(function(){var a=document.getElementsByTagName("a");'</span>
        + <span class="hljs-string">'for(var i=0,l=a.length;i&lt;l;i++){'</span>
        + <span class="hljs-string">'h=a[i].attributes["href"];'</span>
        + <span class="hljs-string">'h.value="javascript:Ti.App.fireEvent(\'linkClicked\',{href:\'" + h.value + "\'})"'</span>
        + <span class="hljs-string">'}'</span>
        + <span class="hljs-string">'})();'</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">open</span>(<span class="hljs-params"></span>)</span>{
    $.indicator.show();
    $.offreWebView.url = url;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadWebView</span>(<span class="hljs-params"></span>)</span>{
    $.offreWebView.evalJS(linkJS);
    $.indicator.hide();
}
</code></pre><p>if i replace webView.url by webView.html = myHTML then it works but i have a remote url..</p>
<p>any suggestions ?</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 23rd 2013, 1:14:26 pm">April 23rd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>as you see i use exactly the same code like in github…</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 23rd 2013, 1:29:35 pm">April 23rd 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@eduardo, any suggestions ?<br>as you see, i used evaljs but still doesn&#39;t work…</p>
<p>here my url example : http:&#x2F;&#x2F;www.mylittleparis.com&#x2F;mobile&#x2F;mylittleapp&#x2F;ws&#x2F;drive.html?id=32</p>
<p>i want to fireevent when the user click on special link…</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 27th 2013, 9:35:09 am">April 27th 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Send me your sample: egomez@appcelerator.com</p>
<p>Please post URL and attach actual HTML file. I will dig into it. Regards.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 30th 2013, 12:58:06 pm">April 30th 2013</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have found the solution :)</p>
<p>the solution is to get the remote html by httpClient and to do webview.html = this.reponseText.</p>
<p>and in the load event for the webView, to exectue evalJS. otherwise, it doesn&#39;t work and cant replace link by Ti.App.fireEvent.</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 30th 2013, 3:48:43 pm">April 30th 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;m glad to hear you sorted it out.</p>
<p>Best regards Djamel.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 30th 2013, 8:07:42 pm">April 30th 2013</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-261121">
				
						<section>
							<p>Hello Djamel, </p>
<p>This may help you out better: <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Communication_Between_WebViews_and_Titanium">Communication Between WebViews and Titanium</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 19th 2013, 3:00:29 pm">April 19th 2013</span>
								by <span class='authorname'>Eduardo Gomez</span><br>
								<a class="icon-bg icon-link" href="../../question/151247/link-in-webview.html#answer-261121" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i should not use url scheme ?</p>
<p>i have a webview with remote url..</p>
<p>the page loaded contains link : myapp:&#x2F;&#x2F;share&#x2F;current for example.</p>
<p>and i want to execute native code..</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 3:05:30 pm">April 19th 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks I understand. So the thing is external resources (like http:&#x2F;&#x2F;yourserver.com&#x2F;index.html) are not allowed to execute Titanium namespace by safety reasons.</p>
<p>Being said, you cannot fire events in that way. You may want to use local html pages instead or use evalJS method.</p>
<h4 id="var-results-webview-evaljs-quot-document-title-quot-">var results = webView.evalJS(&quot;document.title&quot;);</h4>
<p> <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.1&#x2F;index.html#!&#x2F;api&#x2F;Titanium.UI.WebView-method-evalJS">Further info here</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 3:25:03 pm">April 19th 2013</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>my question is :</p>
<p>here an exampls : </p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> mywebView</span> = Ti.UI.createWebView({
    url : www.page.com/index.html
});
</code></pre><p>and my index.html contains :</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
...
<span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"myapp://share/"</span>&gt;</span>share<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
<span class="hljs-tag">&lt; <span class="hljs-attribute">href</span>=<span class="hljs-value">"myapp://download/"</span>&gt;</span>download<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre><p>i head about url scheme, so how to use them to execute native code.</p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 4:39:13 pm">April 19th 2013</span>
											by <span class='authorname'>Djamel ZAHAL</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
