<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Searchbar update from textfield » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Searchbar update from textfield</h1>
		</header>
		<section>
			<p>I was trying to create a searchbar that would be updated from a separate textfield in alloy. When I try and set the &#39;value&#39; property of the searchbar, the tableview returns no results. If I type in the text to the searchbar, it works fine. The example I took was from this <a href="https:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;129716&#x2F;custom-searchbar-hack">posting</a> and modified for alloy.</p>
<p>Here is the XML:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"fEntry"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span> <span class="hljs-attribute">layout</span>=<span class="hljs-value">"vertical"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"fieldName"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">TextField</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"customSearchField"</span> <span class="hljs-attribute">top</span>=<span class="hljs-value">"0"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">TextField</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"pickList"</span> <span class="hljs-attribute">filterAttribute</span>=<span class="hljs-value">"title"</span> <span class="hljs-attribute">filterCaseInsensitive</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">top</span>=<span class="hljs-value">"0"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SearchBar</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"search"</span> <span class="hljs-attribute">autocorrect</span>=<span class="hljs-value">"false"</span> <span class="hljs-attribute">showCancel</span>=<span class="hljs-value">"false"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">SearchBar</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">TableViewSection</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"sectionFruit"</span> <span class="hljs-attribute">headerTitle</span>=<span class="hljs-value">"Fruit"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Apple"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Bananas"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">TableViewSection</span>&gt;</span>

        <span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>In my js file I have the following:</p>
<pre><code class="hljs">$.search.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    e.value;
});

$.customSearchField.addEventListener(<span class="hljs-string">'change'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

        $.search.focus();
        $.search.setValue(e.value);
        $.search.blur();
        $.customSearchField.focus();


    });
</code></pre><p>When debugging as soon as I get to the line <code>$.search.setValue(e.value);</code> the tableview returns no values. Is this a bug or am I doing something wrong?</p>
<p>Ray</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 24th 2013, 8:50:13 pm">October 24th 2013</span>
				by <span class='authorname'>Ray Belisle</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>searchbar</span></li>
					
						<li><span class='tagname'>textfield</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi Ray,<br>    in this case SearchBar change event not fired when you set it&#39;s value. try this i hope it&#39;s work but not sure.</p>
<pre><code class="hljs">$.customSearchField.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> obj = {
        value : e.value
    };
    $.search.fireEvent(<span class="hljs-string">'change'</span>,obj);
    $.search.value = e.value;
});
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="October 25th 2013, 4:06:52 am">October 25th 2013</span>
								by <span class='authorname'>Sanat Mamtora</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-270437">
				
						<section>
							<p>I would try something similar to Sanat&#39;s suggestion, but with some small changes:</p>
<pre><code class="hljs">$.customSearchField.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  $.search.value = e.value;
  $.search.fireEvent(<span class="hljs-string">'change'</span>, {
      type: <span class="hljs-string">'change'</span>,
      source: $.search
  });
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 25th 2013, 11:35:36 am">October 25th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="question/158770/searchbar-update-from-textfield.html#answer-270437" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the ideas, however this doesn&#39;t fix the problem… If I debug, as soon as you get to the line <code>$.search.value = e.value;</code> the searchbar AND the tableview <strong>DISAPPEAR</strong>… does ANYONE ELSE see this? It&#39;s driving me nuts!</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 25th 2013, 12:08:35 pm">October 25th 2013</span>
											by <span class='authorname'>Ray Belisle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Can anyone reproduce this? I can&#39;t get it NOT to disappear as mentioned above. Is this a bug I should JIRA?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 30th 2013, 5:17:15 pm">October 30th 2013</span>
											by <span class='authorname'>Ray Belisle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So, I just went ahead and got tiShadow working and thought I would attack this problem again, using TiShadow… Very nice BTW, kudos to David!</p>
<p>So, below is the code I am using (I added the close button at the top of the window so that I could close the win, change code and resend to TiShadow without layering a bunch of windows for each launch). Anyway, here is the code:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.createWindow({layout:<span class="hljs-string">'vertical'</span>});

<span class="hljs-keyword">var</span> btn = Ti.UI.createButton({title:<span class="hljs-string">'close'</span>,top:<span class="hljs-number">20</span>});
<span class="hljs-keyword">var</span> customSearchField = Ti.UI.createTextField({top:<span class="hljs-number">5</span>,
backgroundColor:<span class="hljs-string">'yellow'</span>,
width: Ti.UI.FILL
});
<span class="hljs-keyword">var</span> search = Ti.UI.createSearchBar({
autocorrect:<span class="hljs-literal">false</span>,
showcancel:<span class="hljs-literal">false</span>
});

<span class="hljs-keyword">var</span> pickList = Ti.UI.createTableView({
    filterAttribute: <span class="hljs-string">'title'</span>,    
    filterCaseInsensitive:<span class="hljs-literal">true</span>,
    data: [{title:<span class="hljs-string">'Apple'</span>},{title:<span class="hljs-string">'banana'</span>}],
    search: search
});

win.add(btn);
win.add(customSearchField);
win.add(pickList);

btn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
win.close();
});


search.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
        Ti.API.info(e);
});

customSearchField.addEventListener(<span class="hljs-string">'change'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{

  search.value = e.value;
  search.fireEvent(<span class="hljs-string">'change'</span>, {
    value: e.value,
    bubbles: <span class="hljs-literal">true</span>,
    type: <span class="hljs-string">'change'</span>,
    source: search,
    cancelBubble:<span class="hljs-literal">false</span>

  });


    });
win.open();
</code></pre><p>When you run this, what you will see is that when you enter a value into the &#39;customSearchField&#39; (yellow) the value is transferred into the searchbar and the change event fires, but the table values are never filtered. When you enter the same values into the searchbar, it seems to fire the same event, but the filtering DOES work… If anyone can cut&#x2F;paste this code and see what I am missing, that would be GREATLY appreciated! I&#39;m tired of going around and around on this one and getting nowhere.</p>
<p>Thanks,</p>
<p>Ray</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 21st 2013, 2:53:22 pm">November 21st 2013</span>
											by <span class='authorname'>Ray Belisle</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
