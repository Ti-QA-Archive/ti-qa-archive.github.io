<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Update TableView not working » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Update TableView not working</h1>
		</header>
		<section>
			<p>I&#39;m not sure what I&#39;m doing wrong here…</p>
<pre><code class="hljs">...
<span class="hljs-keyword">switch</span>.addEventListener(<span class="hljs-string">'change'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>{</span>
    var newData = buildData(params);

    table.dataSet(newData);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildData</span><span class="hljs-params">(params)</span>{</span>
    var dataSet = <span class="hljs-matrix">[]</span>;

    <span class="hljs-keyword">for</span>(<span class="hljs-built_in">i</span> = <span class="hljs-number">0</span>; <span class="hljs-built_in">i</span> &lt; <span class="hljs-number">10</span>; <span class="hljs-built_in">i</span>++)<span class="hljs-cell">{
        dataSet.push(i);
    }</span>;

    <span class="hljs-keyword">return</span> dataSet;
};
...
</code></pre><p>I&#39;m using this same logic (calling the function and then using <code>table.dataSet</code> to create the rows) with the view <code>&amp;#39;open&amp;#39;</code> event and that is working perfectly.  After the view is open however, using the function from the switch <code>&amp;#39;change&amp;#39;</code> event seems to work - once.  After that the view isn&#39;t updated ever again until closing and re-opening the view.</p>
<p>Using Ti Studio 2.0.2 (SDK 2.0.2 GA) on Mac OSX 10.7.4, Python 2.7, android SDK r17, android build target 2.2, XCode 4.2 (although iOS still won&#39;t build)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 22nd 2012, 9:49:01 pm">June 22nd 2012</span>
				by <span class='authorname'>Joe Ward</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>data</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
						<li><span class='tagname'>update</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-241678">
				
						<section>
							<p>Should be: <code>table.setData(newData);</code></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 22nd 2012, 10:03:31 pm">June 22nd 2012</span>
								by <span class='authorname'>Adam Paxton</span><br>
								<a class="icon-bg icon-link" href="question/138722/update-tableview-not-working#answer-241678" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>sorry, dyslexics untie….I do have it as <code>table.setData(newData)</code> in my live code…I mistyped in the pseudo-code above</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 22nd 2012, 10:14:55 pm">June 22nd 2012</span>
											by <span class='authorname'>Joe Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>can you post the actual code?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 22nd 2012, 10:18:13 pm">June 22nd 2012</span>
											by <span class='authorname'>Adam Paxton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sure,</p>
<pre><code class="hljs">...
<span class="hljs-comment">//switch</span>
        swDaily.addEventListener(<span class="hljs-string">'change'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
            <span class="hljs-comment">//set the state</span>
            Ti.App.Properties.setBool(<span class="hljs-string">'swDailyState'</span>,e.value);
            <span class="hljs-keyword">var</span> newData = buildTable(dataSet,switchesArray);
            table.setData(newData);        
        });

<span class="hljs-comment">//functions to build the data</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wodFilter</span><span class="hljs-params">(dataset,selections)</span></span>{ <span class="hljs-comment">//filters dataset based on switch selections for SelectWOD view</span>
    <span class="hljs-keyword">var</span> result = [];

    <span class="hljs-keyword">while</span> (dataset.isValidRow()) {  <span class="hljs-comment">//evaluate each row in the dataset</span>

            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = selections.length; i &lt; len; i++) {  <span class="hljs-comment">//do this check for each item in the selections array</span>
                <span class="hljs-keyword">var</span> select = selections[i]
                <span class="hljs-keyword">if</span>(dataset.fieldByName(<span class="hljs-string">'wodTypeID'</span>) == select){
                    result.push({
                        title: dataset.fieldByName(<span class="hljs-string">'name'</span>),
                        items: dataset.fieldByName(<span class="hljs-string">'description'</span>),
                        notes: dataset.fieldByName(<span class="hljs-string">'notes'</span>),
                        mxtype: dataset.fieldByName(<span class="hljs-string">'mxTypeID'</span>),
                        wodID: dataset.fieldByName(<span class="hljs-string">'stdWODID'</span>),
                        wodTypeID: dataset.fieldByName(<span class="hljs-string">'wodTypeID'</span>),
                        hasChild: <span class="hljs-literal">true</span>,
                        color: <span class="hljs-string">'orange'</span>        
                    });
                }
            }
    dataset.next();

    }

    <span class="hljs-keyword">return</span> result;

};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildTable</span><span class="hljs-params">(data,switches)</span></span>{


    <span class="hljs-comment">//data array for our table view</span>
    <span class="hljs-keyword">var</span> tableData = [],

    <span class="hljs-comment">//data array for the selections filter</span>
        selectionArray = [];
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>, len = switches.length; i &lt; len; i++){
            <span class="hljs-keyword">if</span>(switches[i].value==<span class="hljs-literal">true</span>){
                selectionArray.push(switches[i].wodTypeID);
            } <span class="hljs-keyword">else</span> {
                selectionArray[i] = <span class="hljs-number">0</span>;
            }
        }

    tableData = wodFilter(data, selectionArray);

    <span class="hljs-keyword">return</span> tableData;
};

<span class="hljs-comment">//the table itself</span>

    <span class="hljs-keyword">var</span> table = Ti.UI.createTableView({
        rowHeight: <span class="hljs-string">"40dp"</span>    
    });    

<span class="hljs-comment">//build the initial table    -- this works</span>
    table.setData(buildTable(dataSet, switchesArray));
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="June 22nd 2012, 10:37:41 pm">June 22nd 2012</span>
											by <span class='authorname'>Joe Ward</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-241679">
				
						<section>
							<p>I&#39;m going to try to be nice here – there is no way that somebody could figure out what&#39;s going on with your code sample.</p>
<p>You didn&#39;t show us where <code>dataset</code> came from in your swDaily change event handler.</p>
<p>Here&#39;s how this works.  Readers of this forum will try to help you, but nobody wants to debug your entire application.  You as the inquisitive Ti developer need to take your problem and boil it down to its essence.  Once you have it down to about 40-50 lines that have no external dependencies and fits nicely in a single app.js, one of three things will happen:</p>
<ul>
<li>the minimal case will work, and you will figure out what you did wrong</li>
<li>the minimal case will not work, and you will figure out what the Ti developers did wrong, and find a workaround for it</li>
<li>the minimal case will not work, and you will be totally perplexed and will post your minimal code to the forum</li>
</ul>
<p>With that minimal code example, somebody will be sure to see a mistake in your code that they&#39;ve made before and will give you guidance, or a really nice person will take your code, throw it into a new project in Ti.Studio and step through it to figure out what&#39;s going on.</p>
<p>This stuff is difficult, even for seasoned developers.  The platform inconsistencies&#x2F;quirks&#x2F;bugs will threaten to kill you, but the only way to make forward progress is to break down complex problems into simpler problems.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 22nd 2012, 11:08:59 pm">June 22nd 2012</span>
								by <span class='authorname'>Jason Priebe</span><br>
								<a class="icon-bg icon-link" href="question/138722/update-tableview-not-working#answer-241679" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I understand and appreciate all of the help on the forums, that&#39;s why I posted the &quot;minimal&quot; code set in the original question which is not working and has me perplexed. (I typed it directly rather than cut paste as I was asking the forum question on a different computer than my coding one) I wasn&#39;t asking anybody to debug my code - I was responding to the request for my &quot;actual code&quot; from Adam above.</p>
<p>So I have boiled this down to the component parts again in a simple example, cut directly from my IDE where it is not working.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> table = Ti.UI.createTableView({
        rowHeight: <span class="hljs-string">"40dp"</span>
    });    

<span class="hljs-keyword">var</span> array1 = [<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'c'</span>,<span class="hljs-string">'d'</span>,<span class="hljs-string">'e'</span>,<span class="hljs-string">'f'</span>,<span class="hljs-string">'g'</span>,<span class="hljs-string">'h'</span>,<span class="hljs-string">'i'</span>,<span class="hljs-string">'j'</span>];
<span class="hljs-keyword">var</span> array2 = [<span class="hljs-string">'aa'</span>,<span class="hljs-string">'bb'</span>,<span class="hljs-string">'cc'</span>,<span class="hljs-string">'dd'</span>,<span class="hljs-string">'ee'</span>,<span class="hljs-string">'ff'</span>,<span class="hljs-string">'gg'</span>,<span class="hljs-string">'hh'</span>,<span class="hljs-string">'ii'</span>,<span class="hljs-string">'jj'</span>];


sw1.addEventListener(<span class="hljs-string">'change'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
            <span class="hljs-keyword">var</span> newData = testBuildTable(array1); <span class="hljs-comment">//doesn't work</span>
            table.setData(newData);        
        });

sw2.addEventListener(<span class="hljs-string">'change'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
            <span class="hljs-keyword">var</span> newData = testBuildTable(array2); <span class="hljs-comment">//doesn't work</span>
            table.setData(newData);        
        });

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testBuildTable</span><span class="hljs-params">(arrayParam)</span></span>{
    <span class="hljs-keyword">var</span> data = [];

    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++){
        data.push({
            title: arrayParam[i],
            color: <span class="hljs-string">'orange'</span>
            });  
    };

    <span class="hljs-keyword">return</span> data;
};
</code></pre><p>Watching it closely, as I hit the switch in the example the table view does blink briefly</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2012, 2:15:03 am">June 23rd 2012</span>
											by <span class='authorname'>Joe Ward</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-241704">
				
						<section>
							<p>Joe,</p>
<p>I have take your code and simplified it. You can create a new project and cut and paste this code into app.js, overwriting whatever is in there. Please take a look at it and see if it helps you.</p>
<p>If you have any questions about this code, just ask. It is likely something is working in a manner different than what you expected.</p>
<p>####app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.createWindow();
<span class="hljs-keyword">var</span> table = Ti.UI.createTableView();
<span class="hljs-keyword">var</span> array1 = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'f'</span>, <span class="hljs-string">'g'</span>, <span class="hljs-string">'h'</span>, <span class="hljs-string">'i'</span>, <span class="hljs-string">'j'</span>];
<span class="hljs-keyword">var</span> array2 = [<span class="hljs-string">'aa'</span>, <span class="hljs-string">'bb'</span>, <span class="hljs-string">'cc'</span>, <span class="hljs-string">'dd'</span>, <span class="hljs-string">'ee'</span>, <span class="hljs-string">'ff'</span>, <span class="hljs-string">'gg'</span>, <span class="hljs-string">'hh'</span>, <span class="hljs-string">'ii'</span>, <span class="hljs-string">'jj'</span>];
<span class="hljs-keyword">var</span> newData = testBuildTable(array1);
table.setData(newData);
table.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">var</span> newData = testBuildTable(array2);
    table.setData(newData);
});
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testBuildTable</span><span class="hljs-params">(arrayParam)</span> </span>{
    <span class="hljs-keyword">var</span> data = [];
    <span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
        data.push({
            title : arrayParam[i],
            color : <span class="hljs-string">'orange'</span>
        });
    };
    <span class="hljs-keyword">return</span> data;
};
win.add(table);
win.open();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 23rd 2012, 4:25:32 pm">June 23rd 2012</span>
								by <span class='authorname'>Chaim Krause</span><br>
								<a class="icon-bg icon-link" href="question/138722/update-tableview-not-working#answer-241704" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
