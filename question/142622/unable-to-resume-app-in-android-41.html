<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Unable to resume app in Android 4.1 » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Unable to resume app in Android 4.1</h1>
		</header>
		<section>
			<p>I&#39;m working on an alarm clock app that uses a background service to determine whether or not the alarm should go off. The following code creates the service and tells it to fire every ten seconds.</p>
<pre><code class="hljs">var <span class="hljs-type">intent</span> = Ti.Android.createServiceIntent({
    url: <span class="hljs-string">'BackgroundService.js'</span>,
});

<span class="hljs-type">intent</span>.putExtra(<span class="hljs-string">'interval'</span>, <span class="hljs-number">10</span> * <span class="hljs-number">1000</span>);
Ti.App.mainActivity = Ti.Android.getCurrentActivity;
// <span class="hljs-keyword">Stop</span> <span class="hljs-built_in">all</span> instances of the service
Ti.Android.stopService(<span class="hljs-type">intent</span>);
Ti.Android.startService(<span class="hljs-type">intent</span>);
</code></pre><p>In the background service, when the system time has reached or surpassed the alarm time, I create an intent that resumes the app and triggers the wake up sounds.</p>
<pre><code class="hljs"><span class="hljs-component">var alarmResumeIntent = Ti.Android.createIntent({
    className: 'org<span class="hljs-string">.appcelerator.titanium.TiActivity'</span>,
    packageName: 'com<span class="hljs-string">.OurCompany.AppName'</span>,
    flags: Titanium<span class="hljs-string">.Android.FLAG_ACTIVITY_CLEAR_TOP</span> | Titanium<span class="hljs-string">.Android.FLAG_ACTIVITY_SINGLE_TOP</span>
}</span>)
Ti.Android.currentActivity.startActivity(alarmResumeIntent);
</code></pre><p>Up until now, this approach has worked great when testing on the Android 2.2 emulator. However, on devices running Android 4.1 the app never resumes if the user is sitting at the home screen. Using the console log, I can tell that the service is still running and that the timing checks all succeeded, yet something seems to be failing silently.</p>
<p>Furthermore, if you try to relaunch the app manually while the background service is running, it comes back to a black screen. Pressing back on this screen takes me to the &#39;Wake Up!&#39; window that is &#x2F;supposed&#x2F; to show when the alarm triggers.</p>
<p><strong>Application type:</strong> mobile</p>
<p><strong>Titanium SDK:</strong> 2.1.2 (08&#x2F;24&#x2F;12 14:46 ed7f777)</p>
<p><strong>Platform &amp; version:</strong> Android 4.1</p>
<p><strong>Device:</strong> Android emulator and physical device</p>
<p><strong>Host Operating System:</strong> OSX 10.7.4</p>
<p><strong>Titanium Studio:</strong> 2.1.2.201208301612</p>
<p>Any advice or suggestions would be greatly appreciated! Thanks in advance.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 24th 2012, 5:20:54 pm">September 24th 2012</span>
				by <span class='authorname'>Zach Aikman</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alarm</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>background</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>service</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-263861">
				
						<section>
							<p>I think I have the same bug, when leave my app with back button (with a debug launch) I can&#39;t relaunch it when I click on app icon, it&#39;s block on splash screen.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 5th 2013, 8:11:00 am">June 5th 2013</span>
								by <span class='authorname'>Wan Dev</span><br>
								<a class="icon-bg icon-link" href="question/142622/unable-to-resume-app-in-android-41#answer-263861" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>With android 4.1 and that work with 2.3</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 5th 2013, 8:14:10 am">June 5th 2013</span>
											by <span class='authorname'>Wan Dev</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
