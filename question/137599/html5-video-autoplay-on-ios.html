<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>HTML5 Video Autoplay on iOS » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>HTML5 Video Autoplay on iOS</h1>
		</header>
		<section>
			<p>On Safari on IOS the autoplay feature was disabled fpr HTML5 embedded videos&#x2F;sounds by Apple as described in &lt;http:&#x2F;&#x2F;flowz.com&#x2F;2011&#x2F;03&#x2F;apple-disabled-audiovideo-playback-in-html5&#x2F;&gt;. Also Javascript cannot start a video without any preceeding user interaction (e.g. onload or using timeout).</p>
<p>Can we access the setting &quot;mediaPlaybackRequiresUserAction&quot; on a webview to enable it for interactive hybrid application?</p>
<p>Perhaps there is some different solution to enable asynchronously triggered video.</p>
<p>Regards,<br>Tobias</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 30th 2012, 7:09:17 am">May 30th 2012</span>
				by <span class='authorname'>Tobias Schierge</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ipad</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>video</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-239673">
				
						<section>
							<p>As far as I know, playback of media is not possible without user interaction. I don&#39;t think there&#39;s a way around this. In fact, it&#39;s highly likely that your app would be rejected if you tried to circumvent this.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 30th 2012, 7:27:54 am">May 30th 2012</span>
								by <span class='authorname'>Kosso</span><br>
								<a class="icon-bg icon-link" href="question/137599/html5-video-autoplay-on-ios#answer-239673" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Within a purely native APP it can be achived by setting the appropiate settings on the UIWebview, therefore it seems to be possible and also allowed:</p>
<p>UIWebView.mediaPlaybackRequiresUserAction = NO;</p>
<p>I tried by hacking it into TiUIWebView.m Module File and it works, but is there a more proper solution?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 30th 2012, 1:36:56 pm">May 30th 2012</span>
											by <span class='authorname'>Tobias Schierge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Where Do you put UIWebView.mediaPlaybackRequiresUserAction = NO; in the  TiUIWebView.m file ? It&#39;s not work.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 6th 2012, 12:18:11 pm">September 6th 2012</span>
											by <span class='authorname'>jud paq</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>After the line webview.contentMode = UIViewContentModeRedraw;</p>
<p>Be sure to put the line within the original Module file where the SDK resides and not within the build folder where it is copied during App compilation.</p>
<p>Regards, Tobias</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 6th 2012, 12:34:59 pm">September 6th 2012</span>
											by <span class='authorname'>Tobias Schierge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i tried webview.mediaPlaybackRequiresUserAction = NO; but not work..</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 27th 2012, 6:16:18 am">September 27th 2012</span>
											by <span class='authorname'>Jayesh  Joshi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Me too, no result. I would love to make this work for my app.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 5th 2012, 6:13:08 pm">November 5th 2012</span>
											by <span class='authorname'>Wienke Giezeman</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-239738">
				
						<section>
							<p>When I built Ti.Media.VideoPlayer, I was unable to get autoplay working on Mobile Safari. It works just fine in most desktop browsers, but mobile devices require user interaction first. I&#39;m sure we&#39;ll revisit it again and try to figure out a solution.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 30th 2012, 3:31:25 pm">May 30th 2012</span>
								by <span class='authorname'>Chris Barber</span><br>
								<a class="icon-bg icon-link" href="question/137599/html5-video-autoplay-on-ios#answer-239738" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Maybe a possible solution would be to expose the property mediaPlaybackRequiresUserAction (IOS only) on the titanium webview type?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 31st 2012, 4:15:49 am">May 31st 2012</span>
											by <span class='authorname'>Tobias Schierge</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-274379">
				
						<section>
							<p>This seems to work (iPhone 7.0.3 with TiSDK 3.2.0.GA):</p>
<ul>
<li><p>app.js</p>
<pre><code class="hljs">var webview = Ti.UI.createWebView({
  <span class="hljs-string">top :</span> <span class="hljs-number">50</span>,
  <span class="hljs-string">left :</span> <span class="hljs-number">0</span>,
  <span class="hljs-string">fullscreen :</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">  url:</span> <span class="hljs-string">'videoTestiFrame.html'</span>,
  <span class="hljs-string">height :</span> <span class="hljs-number">240</span>,
  <span class="hljs-string">width :</span> <span class="hljs-number">320</span>
});
</code></pre></li>
<li><p>videoTestiFrame.html</p>
<pre><code class="hljs"><span class="hljs-doctype">&lt;!DOCTYPE html"&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- 1. The &lt;iframe&gt; (and video player) will replace this &lt;div&gt; tag. --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"player"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
          <span class="hljs-comment">// 2. This code loads the IFrame Player API code asynchronously.</span>
          <span class="hljs-keyword">var</span> tag = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);

          tag.src = <span class="hljs-string">"https://www.youtube.com/iframe_api"</span>;
          <span class="hljs-keyword">var</span> firstScriptTag = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'script'</span>)[<span class="hljs-number">0</span>];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          <span class="hljs-comment">// 3. This function creates an &lt;iframe&gt; (and YouTube player)</span>
          <span class="hljs-comment">//    after the API code downloads.</span>
          <span class="hljs-keyword">var</span> player;
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onYouTubeIframeAPIReady</span>(<span class="hljs-params"></span>) </span>{
              player = <span class="hljs-keyword">new</span> YT.Player(<span class="hljs-string">'player'</span>, {
                  height : <span class="hljs-string">'390'</span>,
                  width : <span class="hljs-string">'640'</span>,
                  videoId : <span class="hljs-string">'M7lc1UVf-VE'</span>,

                  playerVars : {
                      autoplay : <span class="hljs-number">1</span>
                  },
                  events : {
                      <span class="hljs-string">'onReady'</span> : onPlayerReady,
                      <span class="hljs-string">'onStateChange'</span> : onPlayerStateChange
                  }
              });
          }

          <span class="hljs-comment">// 4. The API will call this function when the video player is ready.</span>
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onPlayerReady</span>(<span class="hljs-params">event</span>) </span>{
              event.target.playVideo();
          }

          <span class="hljs-comment">// 5. The API calls this function when the player's state changes.</span>
          <span class="hljs-comment">//    The function indicates that when playing a video (state=1),</span>
          <span class="hljs-comment">//    the player should play for six seconds and then stop.</span>
          <span class="hljs-keyword">var</span> done = <span class="hljs-literal">false</span>;
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onPlayerStateChange</span>(<span class="hljs-params">event</span>) </span>{
              <span class="hljs-keyword">if</span> (event.data == YT.PlayerState.PLAYING &amp;&amp; !done) {
                  <span class="hljs-comment">//setTimeout(stopVideo, 6000);</span>
                  done = <span class="hljs-literal">true</span>;
              }
          }

          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopVideo</span>(<span class="hljs-params"></span>) </span>{
              player.stopVideo();
          }
      </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre></li>
<li><p>Do not forget to add webview.<a href="https:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;ios&#x2F;documentation&#x2F;UIKit&#x2F;Reference&#x2F;UIWebView_Class&#x2F;Reference&#x2F;Reference.html#&#x2F;&#x2F;apple_ref&#x2F;occ&#x2F;instp&#x2F;UIWebView&#x2F;mediaPlaybackRequiresUserAction">mediaPlaybackRequiresUserAction</a> = NO; into Titanium Core (Library&#x2F;Application Support&#x2F;Titanium&#x2F;mobilesdkosx&#x2F;sdk_version&#x2F;iphone&#x2F;classes&#x2F;TiUIWebView.m):</p>
<pre><code class="hljs">-(<span class="hljs-built_in">UIWebView</span>*)webview 
{
  <span class="hljs-keyword">if</span> (webview==<span class="hljs-literal">nil</span>)
  {
      <span class="hljs-comment">// we attach the XHR bridge the first time we need a webview</span>
      [[TiApp app] attachXHRBridgeIfRequired];

      webview = [[<span class="hljs-built_in">UIWebView</span> alloc] initWithFrame:<span class="hljs-built_in">CGRectMake</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>)];
      webview<span class="hljs-variable">.delegate</span> = <span class="hljs-keyword">self</span>;
      webview<span class="hljs-variable">.opaque</span> = <span class="hljs-literal">NO</span>;
      webview<span class="hljs-variable">.backgroundColor</span> = [<span class="hljs-built_in">UIColor</span> whiteColor];
      webview<span class="hljs-variable">.contentMode</span> = <span class="hljs-built_in">UIViewContentModeRedraw</span>;
      webview<span class="hljs-variable">.mediaPlaybackRequiresUserAction</span> = <span class="hljs-literal">NO</span>;
</code></pre></li>
</ul>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 25th 2014, 1:37:40 am">January 25th 2014</span>
								by <span class='authorname'>Eduardo Gomez</span><br>
								<a class="icon-bg icon-link" href="question/137599/html5-video-autoplay-on-ios#answer-274379" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Eduardo, pls how to add  webview.mediaPlaybackRequiresUserAction = NO; into Titanium Core</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 29th 2014, 2:27:28 pm">January 29th 2014</span>
											by <span class='authorname'>gabriel ogungbe</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
