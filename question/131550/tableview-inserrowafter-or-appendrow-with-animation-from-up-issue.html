<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Tableview inserRowAfter or appendRow with animation from UP issue. Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Tableview inserRowAfter or appendRow with animation from UP issue.</h1>
		</header>
		<section>
			<p>If you insert or append a row at the bottom of a table and you animate from the UP, to simulate an accordion. The animation messes up. Try it out with the code below. </p>
<p>It doesn&#39;t mess up if you add it to any other row. </p>
<p>Does anyone know a workaround for this? </p>
<pre><code class="hljs">var win = Ti.UI.createWindow({});

var tableData  = [
    {title:<span class="hljs-string">'Insert Row Above (no anim)'</span>, header:<span class="hljs-string">'Section 0'</span>},
    {title:<span class="hljs-string">'Row2'</span>},
    {title:<span class="hljs-string">'Insert Row Below - 1'</span>, name:<span class="hljs-string">'3'</span>},
];

var tableView = Ti.UI.createTableView({
        backgroundColor: <span class="hljs-string">'white'</span>,    
        separatorColor: <span class="hljs-string">'#d3d3d3'</span>,
        data:tableData
    });

tableView.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(e)
{
    var row = Ti.UI.createTableViewRow({
        backgroundColor: <span class="hljs-string">'red'</span>,
        width: <span class="hljs-string">'`100%'</span>,
        height: <span class="hljs-number">150</span>,
    });

    tableView.appendRow(row,{animationStyle:Titanium.UI.iPhone.RowAnimationStyle.DOWN});

});

win.add(tableView);
win.open()
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 2nd 2012, 1:32:21 pm">February 2nd 2012</span>
				by <span class='authorname'>Leonardo Amigoni</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>appendrow</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-229274">
				
						<section>
							<p>Hello,</p>
<p>I tried your code, but I can&#39;t see what you are telling me. So, what I should press in your example, in which order, and what it&#39;s supposed to be happening? </p>
<p>Best,</p>
<p>Mauro</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 2nd 2012, 10:37:55 pm">February 2nd 2012</span>
								by <span class='authorname'>Mauro Parra</span><br>
								<a class="icon-bg icon-link" href="question/131550/tableview-inserrowafter-or-appendrow-with-animation-from-up-issue.html#answer-229274" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ok. Sorry about that. Try this code. If you tap the row it opens a red row below. If You tap the row above again, it will close it. Notice how the animation DOWN from the top two rows is fine, but the bottom one is reversed. </p>
<pre><code class="hljs">
var win = Ti.UI.createWindow({});

var tableData  = [
    {<span class="hljs-string">title:</span><span class="hljs-string">'Row1'</span>, <span class="hljs-string">header:</span><span class="hljs-string">'Section 0'</span>, <span class="hljs-string">opened:</span> <span class="hljs-literal">false</span>},
    {<span class="hljs-string">title:</span><span class="hljs-string">'Row2'</span>, <span class="hljs-string">opened:</span> <span class="hljs-literal">false</span>},
    {<span class="hljs-string">title:</span><span class="hljs-string">'Row3'</span>, <span class="hljs-string">name:</span><span class="hljs-string">'3'</span>, <span class="hljs-string">opened:</span> <span class="hljs-literal">false</span>},
];

var tableView = Ti.UI.createTableView({
<span class="hljs-label">        backgroundColor:</span> <span class="hljs-string">'white'</span>,    
<span class="hljs-label">        separatorColor:</span> <span class="hljs-string">'#d3d3d3'</span>,
<span class="hljs-label">        data:</span>tableData,

    });

tableView.addEventListener(<span class="hljs-string">'click'</span>, function(e)
{
    var row = Ti.UI.createTableViewRow({
<span class="hljs-label">        backgroundColor:</span> <span class="hljs-string">'red'</span>,
<span class="hljs-label">        width:</span> <span class="hljs-string">'`100%'</span>,
<span class="hljs-label">        height:</span> <span class="hljs-number">150</span>,
    });

    <span class="hljs-keyword">if</span> (e.rowData.opened == <span class="hljs-literal">false</span>){
        tableView.insertRowAfter(e.index,row,{<span class="hljs-string">animationStyle:</span>Titanium.UI.iPhone.RowAnimationStyle.DOWN});
        e.rowData.opened = <span class="hljs-literal">true</span>
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.rowData.opened == <span class="hljs-literal">true</span>){
        tableView.deleteRow(e.index+<span class="hljs-number">1</span>,{<span class="hljs-string">animationStyle:</span>Titanium.UI.iPhone.RowAnimationStyle.UP});
        e.rowData.opened = <span class="hljs-literal">false</span>
    }

});

win.add(tableView);
win.open()
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2012, 6:56:46 am">February 3rd 2012</span>
											by <span class='authorname'>Leonardo Amigoni</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
