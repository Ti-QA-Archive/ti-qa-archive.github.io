<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Using require() on files in platform-specific folders » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Using require() on files in platform-specific folders</h1>
		</header>
		<section>
			<p>Hi</p>
<p>I&#39;m creating an application that&#39;s using an MVC pattern, and I&#39;m trying to separate my iPhone &#x2F; Android views in their respective platform specific folders. For example, if I had a file called AppWindow that sat in a directory called ui in both the iphone and android directories, I can use <code>require(&amp;#39;ui&amp;#x2F;AppWindow&amp;#39;)</code> in app.js and it will pick out the correct AppWindow for the correct platform. This all works fine in the simulator.</p>
<p>However, when building to iOS the app fails to load as I receive the following error (from Xcode):</p>
<pre><code class="hljs">&lt;Notice&gt;: [WARN] attempted <span class="hljs-keyword">to</span> load: TiUIWindowProxy
&lt;Notice&gt;: [ERROR] Script Error = invalid <span class="hljs-function"><span class="hljs-keyword">method</span> <span class="hljs-params">(createWindow)</span> <span class="hljs-title">passed</span> <span class="hljs-title">to</span> <span class="hljs-title">UIModule</span> <span class="hljs-params">(unknown file)</span>.</span>
</code></pre><p>The build process is obviously not including the UIModule despite the fact it is being used to create a window in my views. If I move the ui directory so that it is directly beneath Resources the error does not occur.</p>
<p>Have I misinterpreted <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Supporting+Multiple+Platforms+in+a+Single+Codebase#SupportingMultiplePlatformsinaSingleCodebase-Platformspecificresources">the guide that describes supporting multiple platforms</a> or is this a bug?</p>
<ul>
<li>Titanium SDK version: 2.0.2</li>
<li>iOS 5.1.1</li>
<li>Xcode 4.3.3</li>
</ul>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 2nd 2012, 10:54:27 am">July 2nd 2012</span>
				by <span class='authorname'>Chris Smith</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-242327">
				
						<section>
							<p>I think you may need to do … require(&#39;&#x2F;ui&#x2F;AppWindow&#39;) ….</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 2nd 2012, 11:03:39 am">July 2nd 2012</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/139115/using-require-on-files-in-platform-specific-folders.html#answer-242327" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you for your quick response but unfortunately that doesn&#39;t seem to solve the issue. I changed the code to your suggestion, gave the project a clean, but the UIModule still does not get included in the package.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 11:23:53 am">July 2nd 2012</span>
											by <span class='authorname'>Chris Smith</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Trevor,</p>
<p>I got beat up here (Q&amp;A) about 2 weeks ago for recommending the leading slash on requires.<br>I still use it because we use TiShadow for testing which does require the leading slash.</p>
<p>Just an FYI.</p>
<p>sf</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 11:50:30 am">July 2nd 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Leading slash seems to work on iOS and Android, but not on Mobile Web. According to CommonJs standard, leading slash is not allowed start of module id.</p>
<p>I also use it because of TiShadow :D</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 12:05:14 pm">July 2nd 2012</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I also have had conversations about the leading slash, and being honest at the moment it is the only way I can get it to work fully, and for me it works on IOS, Android and Mobile Web…..</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 12:57:25 pm">July 2nd 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Since we are being honest, Mobile Web does nothing for my company at the moment as the two biggest things we need (database and multimedia) don&#39;t work in it and its  pain to hack around it.</p>
<p>I was giving you a heads up lest someone from Appcel come around and slap you around too.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 2:09:13 pm">July 2nd 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>they already tried ….</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 5:33:36 pm">July 2nd 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242332">
				
						<section>
							<p>I know that this DOES work as we are using it ourselves to separate platform concerns.</p>
<p>With commonJS, always build&#x2F;clean when switching between targets.</p>
<p>In your logs, you should see where it loads the modules at runtime.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 2nd 2012, 11:48:18 am">July 2nd 2012</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/139115/using-require-on-files-in-platform-specific-folders.html#answer-242332" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I understand this will work if you also use, for example, <code>Ti.UI.createWindow()</code> outside the iphone or android directories (as Titanium then seems to pick up the UI module is required). However, this consistently fails to build correctly even for simple examples such as:</p>
<p>&#x2F;iphone&#x2F;ui&#x2F;AppWindow.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AppWindow</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createWindow({
        backgroundColor: <span class="hljs-string">'#000'</span>
    });

    <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
        text: <span class="hljs-string">'Hello World'</span>,
        color: <span class="hljs-string">'#fff'</span>
    });

    <span class="hljs-keyword">self</span>.add(label);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
}

module.exports = AppWindow;
</code></pre><p>app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> ui = <span class="hljs-built_in">require</span>(<span class="hljs-string">'/ui/AppWindow'</span>);
<span class="hljs-keyword">new</span> ui().open();
</code></pre><p>Moving the ui under Resources or using the Titanium Redux hack of giving hints in app.js </p>
<pre><code class="hljs"><span class="hljs-comment">/* Trick Titanium into including the packages we want */</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> used</span> = [Titanium.UI.createLabel, Titanium.UI.createWebView, Ti.Platform.locale];
</code></pre><p>does solve the issue.</p>
<p>However, if the example above is only happening to me I suppose I must have an environment issue.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 12:22:57 pm">July 2nd 2012</span>
											by <span class='authorname'>Chris Smith</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The way Appc examples have got around this is not to put the files into the iPhone and Android directories but to utilise them under the ui and set the path based on platform… Thus enabling it to work for mobile web and iPad specific stuff.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 12:59:25 pm">July 2nd 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
