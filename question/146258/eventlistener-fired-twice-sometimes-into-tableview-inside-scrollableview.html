<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>eventListener fired twice (sometimes) into TableView inside ScrollableView » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>eventListener fired twice (sometimes) into TableView inside ScrollableView</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I´ve got a ScrowllableView, with differents view´s in it. The first is a tableview and other are view with labels.<br>Well in tableview i´ve got a tableView.addEventListener(&#39;click&#39;,function(){});</p>
<p>Problem it´s rare, first times it´s right, i click in a row and fire eventlistener in table, but if i navigate between scrollable view pages, and then go to the first again (tableview) when i click on a row, sometimes fires twice, not happend every time, but sometimes…</p>
<p>i don´t know why…</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 29th 2012, 10:10:30 am">December 29th 2012</span>
				by <span class='authorname'>Marcos Gomez</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>event</span></li>
					
						<li><span class='tagname'>eventlistener</span></li>
					
						<li><span class='tagname'>fire</span></li>
					
						<li><span class='tagname'>scrollableview</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-253573">
				
						<section>
							<p>If you&#39;re using SDK 3.0+ then you can use this</p>
<pre><code class="hljs">tableView.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> </span>{
evt.cancelBubble = <span class="hljs-literal">true</span>;
<span class="hljs-comment">// do your thing</span>
});
</code></pre><p>In any case, you should be checking for the click event source. <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.Event">See Titanium.Event in docs</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 29th 2012, 11:45:27 am">December 29th 2012</span>
								by <span class='authorname'>Nauris Pukis</span><br>
								<a class="icon-bg icon-link" href="question/146258/eventlistener-fired-twice-sometimes-into-tableview-inside-scrollableview#answer-253573" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Nauris, im using 3.0, i put this sentence in my eventlistener but fires twice, first time when i click only fires one, then go back to tableview, i click another row and fires one again, but if i go to the first page of scrollableview and came back to tableview (it´s in last page of scrollableview) when i click in a row event fires twice…</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 30th 2012, 9:52:17 am">December 30th 2012</span>
											by <span class='authorname'>Marcos Gomez</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-253581">
				
						<section>
							<p>Hi</p>
<p>In your description you say the same event fires more than once.  It is possible you are adding the event listener more than once in your code.</p>
<p>Can you try something to see if this is the case, add this line of code inside your <strong>eventListener</strong>;</p>
<pre><code class="hljs">tableView.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
   Ti.API.info(<span class="hljs-string">'tableView.addEventListener Set'</span>);
   <span class="hljs-comment">// your normal code</span>
});
</code></pre><p>If the console log shows this entry more than once when running the app;</p>
<pre><code class="hljs"><span class="hljs-tag">tableView</span><span class="hljs-class">.addEventListener</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 29th 2012, 3:12:15 pm">December 29th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/146258/eventlistener-fired-twice-sometimes-into-tableview-inside-scrollableview#answer-253581" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I put this code and first times only fires once, then after navigate between different pages of scrollableview, when i come back to tableview (it´s in last page of scrollableview) when i click in a row event fires twice…</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 30th 2012, 9:53:27 am">December 30th 2012</span>
											by <span class='authorname'>Marcos Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you are seeing this debug line in console more than once EACH time you click a row then somehow your code is adding the event listener more than once to the table.  Check to make sure the event listener code is not being re-run each time you re-visit the window&#x2F;view with the table.</p>
<p>It is likely the first time you see the and click a row everything is normal, the second time you COME back to this view part or all of you initial set up code is run again, which adds another event listener.</p>
<p>Please note you can add more than one event listener to the same event - which is what is happening here most likely.</p>
<p>To test for this, add the first line above ANY instances of the second line </p>
<pre><code class="hljs">Ti.API.info(<span class="hljs-string">'tableView.addEventListener Create'</span>);
tableView.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
   <span class="hljs-comment">// your normal code</span>
});
</code></pre><p>If you see that console debug line you know where the problem is.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 30th 2012, 10:07:55 am">December 30th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i put info line and listener only it´s added one time, it´s impossible to code are re-runned, cause views are loaded at the beginning, and then i only navigating between scrwollable views..</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 30th 2012, 3:16:58 pm">December 30th 2012</span>
											by <span class='authorname'>Marcos Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Also comment that only fires 2 times, never 3, then i think that it´s a problem in scrollable view or something like this, but never listener is added two times…</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 30th 2012, 3:21:26 pm">December 30th 2012</span>
											by <span class='authorname'>Marcos Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Going to need to see the code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 30th 2012, 3:24:03 pm">December 30th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">    <span class="hljs-keyword">var</span> Mods = <span class="hljs-built_in">require</span>(<span class="hljs-string">'/ModulePaths'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{

   <span class="hljs-keyword">var</span> mydata = [];  
   <span class="hljs-keyword">var</span> imageUrl= [];  
   <span class="hljs-keyword">var</span> rowText = [];  

   <span class="hljs-comment">// var customText = [];  </span>
   <span class="hljs-comment">// customText = param.customText; </span>

   <span class="hljs-comment">//Building the custom row  </span>
   <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt; data.length; i++)  
   {  

     <span class="hljs-keyword">var</span> row;
     <span class="hljs-keyword">var</span> item = data[i];

     row = Ti.UI.createTableViewRow({height:<span class="hljs-string">'100dp'</span>, backgroundColor: <span class="hljs-string">'#28292c'</span>, backgroundRepeat:<span class="hljs-string">'true'</span>, data: item});

     <span class="hljs-keyword">var</span> foto = Ti.Filesystem.getFile(Mods.FOTOSNEWS, item.foto);

    reggie = <span class="hljs-regexp">/(\d{4})-(\d{2})-(\d{2})/g</span>;
     dateArray = reggie.exec(item.fecha);
     <span class="hljs-keyword">var</span> day = dateArray[<span class="hljs-number">3</span>];
     <span class="hljs-keyword">var</span> month = dateArray[<span class="hljs-number">2</span>];
     <span class="hljs-keyword">var</span> year = dateArray[<span class="hljs-number">1</span>];
     <span class="hljs-keyword">var</span> fecha = day + <span class="hljs-string">"/"</span> + month + <span class="hljs-string">"/"</span> + year;
     <span class="hljs-keyword">var</span> myimage = Ti.UI.createImageView({  
       image: foto,  
       top:<span class="hljs-string">'5dp'</span>,  
       width:<span class="hljs-string">'80dp'</span>,  
       left: <span class="hljs-string">'4dp'</span>,  
       height:<span class="hljs-string">'80dp'</span>,  
       borderColor: <span class="hljs-string">'#fff'</span>,  
       borderWidth:<span class="hljs-string">'2dp'</span>,  
       borderRadius:<span class="hljs-string">'1dp'</span>  
     });  
     <span class="hljs-keyword">var</span> rowName = Ti.UI.createLabel({  
       text: item.titular,  
       top:<span class="hljs-string">'2dp'</span>,  
       color:<span class="hljs-string">'#fff'</span>,  
       <span class="hljs-comment">//width:'auto',  </span>
       font:{fontSize:<span class="hljs-number">14</span>,fontWeight:<span class="hljs-string">'bold'</span>},  
       left:<span class="hljs-string">'90dp'</span>,
       height:<span class="hljs-string">'60dp'</span>
     });  
     <span class="hljs-keyword">var</span> rowCustomText = Ti.UI.createLabel({  
       text: fecha,  
       top:<span class="hljs-string">'70dp'</span>,  
       color:<span class="hljs-string">'#fff'</span>,  
       font:{fontSize:<span class="hljs-number">12</span>},  
       right:<span class="hljs-string">'10dp'</span>  
     });  
     row.add(myimage);  
     row.add(rowName);  
     row.add(rowCustomText);  
     row.className = <span class="hljs-string">'myData'</span>;  
     mydata[i]=row; 
   }  
   <span class="hljs-keyword">var</span> myTableView = Ti.UI.createTableView({  
     data:mydata
   });  

       <span class="hljs-comment">/*
     * LISTENERS
     */</span>

    Ti.API.info(<span class="hljs-string">'tableView.addEventListener Create'</span>);
    myTableView.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        Ti.API.info(<span class="hljs-string">'tableView.addEventListener Set'</span>);
        <span class="hljs-keyword">var</span> home = <span class="hljs-built_in">require</span>(Mods.HOME);

        <span class="hljs-keyword">var</span> ViewNew = <span class="hljs-built_in">require</span>(Mods.VIEWNEW);

        <span class="hljs-comment">// Main window</span>
        <span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
            title:e.row.data.titular,
            backgroundColor:<span class="hljs-string">'#28292c'</span>,
            barColor:<span class="hljs-string">'#638F0C'</span>
        });
        win.add(<span class="hljs-keyword">new</span> ViewNew(e.row.data));
        home.addChild(win);
    });


   <span class="hljs-keyword">return</span> myTableView;  
 }
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="December 30th 2012, 3:26:19 pm">December 30th 2012</span>
											by <span class='authorname'>Marcos Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It´s called from this scrollableviw:</p>
<pre><code class="hljs">
    <span class="hljs-keyword">var</span> Mods = <span class="hljs-built_in">require</span>(<span class="hljs-string">'/ModulePaths'</span>);

    <span class="hljs-keyword">var</span> ViewNew = <span class="hljs-built_in">require</span>(Mods.VIEWNEW);
    <span class="hljs-keyword">var</span> TableNews = <span class="hljs-built_in">require</span>(Mods.TABLENEWS);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{

    <span class="hljs-keyword">var</span> scrollView = Titanium.UI.createScrollableView({
        showPagingControl:<span class="hljs-literal">true</span>,
        overlayEnabled: <span class="hljs-literal">false</span>,
        pagingControlColor: <span class="hljs-string">'#28292c'</span>,
        showHorizontalScrollIndicator: <span class="hljs-literal">true</span>,
        contentHeight: <span class="hljs-string">'auto'</span>,
        currentPage:<span class="hljs-number">0</span>,
        scrollingEnabled: <span class="hljs-literal">true</span>
    });

    <span class="hljs-keyword">var</span> containers = [];
    <span class="hljs-keyword">var</span> tableContainer = [];
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;data.length; i++){
        <span class="hljs-keyword">if</span> (i&lt;<span class="hljs-number">5</span>)
            containers.push(<span class="hljs-keyword">new</span> ViewNew(data[i]));
        <span class="hljs-comment">//Table view; rest news</span>
        <span class="hljs-keyword">else</span>
            tableContainer.push(data[i]);
    }

    tableNews = <span class="hljs-keyword">new</span> TableNews(tableContainer);

    scrollView.views = containers;
    scrollView.addView(tableNews);

    <span class="hljs-keyword">return</span> scrollView;
}
</code></pre><p>And this scrollview it´s added to main window, that´s its inside a navigation window.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 30th 2012, 3:29:07 pm">December 30th 2012</span>
											by <span class='authorname'>Marcos Gomez</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-253584">
				
						<section>
							<p>I am not sure if I got this right, but well, just in case, before assigning your event listener make sure to check if this already exists. In this way you will rule out the possibility of assigning it twice. This has been discussed in an old thread here:</p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;127580&#x2F;possible-to-if-check-if-an-eventlistener-already-has-been-assignedexists">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;127580&#x2F;possible-to-if-check-if-an-eventlistener-already-has-been-assignedexists</a></p>
<p>hope this helps!</p>
<p>George</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 29th 2012, 3:55:29 pm">December 29th 2012</span>
								by <span class='authorname'>George Georgiou</span><br>
								<a class="icon-bg icon-link" href="question/146258/eventlistener-fired-twice-sometimes-into-tableview-inside-scrollableview#answer-253584" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i use this wrapper around eventlistener, i check that only it´s created one time, and fire one time until i navigate between my scrollableviews and come back to tableviewrow in last page of scrollableview..</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 30th 2012, 9:54:36 am">December 30th 2012</span>
											by <span class='authorname'>Marcos Gomez</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
