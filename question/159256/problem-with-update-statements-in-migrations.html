<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Problem with UPDATE statements in Migrations Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Problem with UPDATE statements in Migrations</h1>
		</header>
		<section>
			<p>I&#39;m having a problem with the update statements in my migrations.  Any alter or insert statements work properly, but the updates don&#39;t get executed for some reason even though they aren&#39;t firing errors.</p>
<p>First Migration for Machines (This one works)</p>
<pre><code class="hljs">migration.up = <span class="hljs-keyword">function</span>(db) {
    db.createTable({columns: {
        id: <span class="hljs-string">"INTEGER PRIMARY KEY AUTOINCREMENT"</span>,
        modName: <span class="hljs-string">"TEXT"</span>,
        modNum: <span class="hljs-string">"TEXT"</span>,
        modVar: <span class="hljs-string">"TEXT"</span>,
        modGroup: <span class="hljs-string">"TEXT"</span>,
        own: <span class="hljs-string">"INTEGER"</span>
    },
    defaults: {
        modName: <span class="hljs-string">"_"</span>,
        modNum: <span class="hljs-string">"0"</span>,
        modVar: <span class="hljs-string">""</span>,
        modGroup: <span class="hljs-string">"A"</span>,
        own: <span class="hljs-number">0</span>
    },
    adapter: {
        type: <span class="hljs-string">"sql"</span>,
        collection_name: <span class="hljs-string">"machines"</span>,
        idAttribute: <span class="hljs-string">"id"</span>,
        remoteBackup: true
    }});
            Ti.API.info(<span class="hljs-string">"function = machinesUp201307.js"</span>);
                Ti.API.info(<span class="hljs-string">"Alloy:Resetting the machines collection."</span>);
var newModels = [
          {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"830"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"A"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"820"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"A"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"780"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"A"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"750"</span>,
            modVar: <span class="hljs-string">"QE"</span>,
            modGroup: <span class="hljs-string">"A"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"710"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"A"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"580"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"B"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"550"</span>,
            modVar: <span class="hljs-string">"QE"</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"530"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"380"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"350"</span>,
            modVar: <span class="hljs-string">"PE"</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"330"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"B"</span>,
            modNum: <span class="hljs-string">"215"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Aurora"</span>,
            modNum: <span class="hljs-string">"450"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"B"</span>
        },
        {
            modName: <span class="hljs-string">"Aurora"</span>,
            modNum: <span class="hljs-string">"440"</span>,
            modVar: <span class="hljs-string">"QE"</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Aurora"</span>,
            modNum: <span class="hljs-string">"435"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"B"</span>
        },
        {
            modName: <span class="hljs-string">"Aurora"</span>,
            modNum: <span class="hljs-string">"430"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Artista"</span>,
            modNum: <span class="hljs-string">"730"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"A"</span>
        },
        {
            modName: <span class="hljs-string">"Artista"</span>,
            modNum: <span class="hljs-string">"640"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"B"</span>
        },
        {
            modName: <span class="hljs-string">"Artista"</span>,
            modNum: <span class="hljs-string">"635"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Artista"</span>,
            modNum: <span class="hljs-string">"630"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Artista"</span>,
            modNum: <span class="hljs-string">"200"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"B"</span>
        },
        {
            modName: <span class="hljs-string">"Artista"</span>,
            modNum: <span class="hljs-string">"185"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"B"</span>
        },
        {
            modName: <span class="hljs-string">"Artista"</span>,
            modNum: <span class="hljs-string">"180"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"B"</span>
        },
        {
            modName: <span class="hljs-string">"Artista"</span>,
            modNum: <span class="hljs-string">"170"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Artista"</span>,
            modNum: <span class="hljs-string">"165"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Virtuosa"</span>,
            modNum: <span class="hljs-string">"163"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Virtuosa"</span>,
            modNum: <span class="hljs-string">"160"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Virtuosa"</span>,
            modNum: <span class="hljs-string">"155"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Virtuosa"</span>,
            modNum: <span class="hljs-string">"153"</span>,
            modVar: <span class="hljs-string">"QE"</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Virtuosa"</span>,
            modNum: <span class="hljs-string">"153"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Virtuosa"</span>,
            modNum: <span class="hljs-string">"150"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"240"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"230"</span>,
            modVar: <span class="hljs-string">"PE"</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"220"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"210"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"145"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"145"</span>,
            modVar: <span class="hljs-string">"S"</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"141"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"140"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"135"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"135"</span>,
            modVar: <span class="hljs-string">"S"</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"125"</span>,
            modVar: <span class="hljs-string">""</span>,
            modGroup: <span class="hljs-string">"C"</span>
        },
        {
            modName: <span class="hljs-string">"Activa"</span>,
            modNum: <span class="hljs-string">"125"</span>,
            modVar: <span class="hljs-string">"S"</span>,
            modGroup: <span class="hljs-string">"C"</span>
        }
      ];
      // Add models
for(var i=<span class="hljs-number">0</span>; i &lt; newModels.length; i++) {
     db.insertRow(newModels[i]);
     Ti.API.info(<span class="hljs-string">"new modGroup ="</span>+newModels[i].modGroup+<span class="hljs-string">", modName = "</span> +newModels[i].modName+<span class="hljs-string">", id= "</span> + i + <span class="hljs-string">"+1/n"</span>);
}
};

migration.down = <span class="hljs-keyword">function</span>(db) {
    db.dropTable(<span class="hljs-string">"machines"</span>);
};
</code></pre><p>Second Migration (In this one, the alter and insert statements work, but not the updates.)</p>
<pre><code class="hljs">migration.up = <span class="hljs-keyword">function</span>(migrator) {
    Ti.API.info(<span class="hljs-string">"function = machines.js migration up 2013/09"</span>);
    var updatedModels = [
        {
            id: <span class="hljs-string">"1"</span>,
            modGroup: <span class="hljs-string">"A"</span>,
            modSort: <span class="hljs-string">"2000"</span>    
        },
        {
            id: <span class="hljs-string">"2"</span>,
            modGroup: <span class="hljs-string">"A"</span>,
            modSort: <span class="hljs-string">"3000"</span>
        },
        {
            id: <span class="hljs-string">"3"</span>,
            modGroup: <span class="hljs-string">"A"</span>,
            modSort: <span class="hljs-string">"4000"</span>
        },
        {
            id: <span class="hljs-string">"4"</span>,
            modGroup: <span class="hljs-string">"A"</span>,
            modSort: <span class="hljs-string">"5000"</span>
        },
        {
            id: <span class="hljs-string">"5"</span>,
            modGroup: <span class="hljs-string">"A"</span>,
            modSort: <span class="hljs-string">"6000"</span>
        },
        {
            id: <span class="hljs-string">"6"</span>,
            modGroup: <span class="hljs-string">"B"</span>,
            modSort: <span class="hljs-string">"7000"</span>
        },
        {
            id: <span class="hljs-string">"7"</span>,
            modGroup: <span class="hljs-string">"C"</span>,
            modSort: <span class="hljs-string">"9000"</span>
        },
        {
            id: <span class="hljs-string">"8"</span>,
            modGroup: <span class="hljs-string">"C"</span>,
            modSort: <span class="hljs-string">"10000"</span>
        },
        {
            id: <span class="hljs-string">"9"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"11000"</span>
        },
        {
            id: <span class="hljs-string">"10"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"12000"</span>
        },
        {
            id: <span class="hljs-string">"11"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"13000"</span>
        },
        {
            id: <span class="hljs-string">"12"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"14000"</span>
        },
        {
            id: <span class="hljs-string">"13"</span>,
            modGroup: <span class="hljs-string">"B"</span>,
            modSort: <span class="hljs-string">"15000"</span>
        },
        {
            id: <span class="hljs-string">"14"</span>,
            modGroup: <span class="hljs-string">"C"</span>,
            modSort: <span class="hljs-string">"16000"</span>
        },
        {
            id: <span class="hljs-string">"15"</span>,
            modGroup: <span class="hljs-string">"B"</span>,
            modSort: <span class="hljs-string">"17000"</span>
        },
        {
            id: <span class="hljs-string">"16"</span>,
            modGroup: <span class="hljs-string">"C"</span>,
            modSort: <span class="hljs-string">"18000"</span>
        },
        {
            id: <span class="hljs-string">"17"</span>,
            modGroup: <span class="hljs-string">"B"</span>,
            modSort: <span class="hljs-string">"19000"</span>
        },
        {
            id: <span class="hljs-string">"18"</span>,
            modGroup: <span class="hljs-string">"B"</span>,
            modSort: <span class="hljs-string">"20000"</span>
        },
        {
            id: <span class="hljs-string">"19"</span>,
            modGroup: <span class="hljs-string">"C"</span>,
            modSort: <span class="hljs-string">"21000"</span>
        },
        {
            id: <span class="hljs-string">"20"</span>,
            modGroup: <span class="hljs-string">"C"</span>,
            modSort: <span class="hljs-string">"22000"</span>
        },
        {
            id: <span class="hljs-string">"21"</span>,
            modGroup: <span class="hljs-string">"D"</span>,
            modSort: <span class="hljs-string">"23000"</span>
        },
        {
            id: <span class="hljs-string">"22"</span>,
            modGroup: <span class="hljs-string">"D"</span>,
            modSort: <span class="hljs-string">"24000"</span>
        },
        {
            id: <span class="hljs-string">"23"</span>,
            modGroup: <span class="hljs-string">"D"</span>,
            modSort: <span class="hljs-string">"25000"</span>
        },
        {
            id: <span class="hljs-string">"24"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"26000"</span>
        },
        {
            id: <span class="hljs-string">"25"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"27000"</span>
        },
        {
            id: <span class="hljs-string">"26"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"28000"</span>
        },
        {
            id: <span class="hljs-string">"27"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"29000"</span>
        },
        {
            id: <span class="hljs-string">"28"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"31000"</span>
        },
        {
            id: <span class="hljs-string">"29"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"32000"</span>
        },
        {
            id: <span class="hljs-string">"30"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"33000"</span>
        },
        {
            id: <span class="hljs-string">"31"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"34000"</span>
        },
        {
            id: <span class="hljs-string">"32"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"35000"</span>
        },
        {
            id: <span class="hljs-string">"33"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"36000"</span>
        },
        {
            id: <span class="hljs-string">"34"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"37000"</span>
        },
        {
            id: <span class="hljs-string">"35"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"38000"</span>
        },
        {
            id: <span class="hljs-string">"36"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"39000"</span>
        },
        {
            id: <span class="hljs-string">"37"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"40000"</span>
        },
        {
            id: <span class="hljs-string">"38"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"41000"</span>
        },
        {
            id: <span class="hljs-string">"39"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"42000"</span>
        },
        {
            id: <span class="hljs-string">"40"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"43000"</span>
        },
        {
            id: <span class="hljs-string">"41"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"44000"</span>
        },
        {
            id: <span class="hljs-string">"42"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"45000"</span>
        },
        {
            id: <span class="hljs-string">"43"</span>,
            modGroup: <span class="hljs-string">"E"</span>,
            modSort: <span class="hljs-string">"46000"</span>
        }
      ];    

// Add new modSort column to machine table
 migrator.db.execute(<span class="hljs-string">'ALTER TABLE '</span> + migrator.table +  <span class="hljs-string">' ADD COLUMN modSort INTEGER;'</span>);

 // Update the modNames to have first letter lower case
 migrator.db.execute(<span class="hljs-string">'UPDATE  '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>aurora\<span class="hljs-string">' WHERE modName LIKE \'</span>Aurora\<span class="hljs-string">';'</span>);
 migrator.db.execute(<span class="hljs-string">'UPDATE  '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>artista\<span class="hljs-string">' WHERE modName LIKE \'</span>Artista\<span class="hljs-string">';'</span>);
 migrator.db.execute(<span class="hljs-string">'UPDATE  '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>virtuosa\<span class="hljs-string">' WHERE modName LIKE \'</span>Virtuosa\<span class="hljs-string">';'</span>);
 migrator.db.execute(<span class="hljs-string">'UPDATE  '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>activa\<span class="hljs-string">' WHERE modName LIKE \'</span>Activa\<span class="hljs-string">';'</span>);

 // Add new models
migrator.db.execute(<span class="hljs-string">'INSERT INTO  '</span> + migrator.table + <span class="hljs-string">'(modName, modNum, modVar, modGroup, modSort) VALUES (\'</span>B\<span class="hljs-string">',\'</span><span class="hljs-number">880</span>\<span class="hljs-string">',\'</span>\<span class="hljs-string">',\'</span>A\<span class="hljs-string">', \'</span><span class="hljs-number">1000</span>\<span class="hljs-string">');'</span>);
migrator.db.execute(<span class="hljs-string">'INSERT INTO  '</span> + migrator.table + <span class="hljs-string">'(modName, modNum, modVar, modGroup, modSort) VALUES (\'</span>B\<span class="hljs-string">',\'</span><span class="hljs-number">560</span>\<span class="hljs-string">',\'</span>\<span class="hljs-string">',\'</span>B\<span class="hljs-string">', \'</span><span class="hljs-number">8000</span>\<span class="hljs-string">');'</span>);

// Update modGroup and add modSort to be used for sorting of models to models that were existing already
for(var i=<span class="hljs-number">0</span>; i &lt; updatedModels.length; i++) {
     migrator.db.execute(<span class="hljs-string">'UPDATE '</span> + migrator.table + <span class="hljs-string">' SET modGroup=\'' + updatedModels[i].modGroup + '</span>\<span class="hljs-string">', modSort=\'' + updatedModels[i].modSort + '</span>\<span class="hljs-string">' WHERE id = \'' + updatedModels[i].id + '</span>\<span class="hljs-string">';'</span> );
     Ti.API.info(<span class="hljs-string">"new modGroup ="</span>+updatedModels[i].modGroup+<span class="hljs-string">", modSort ="</span> +updatedModels[i].modSort+<span class="hljs-string">", id="</span> + updatedModels[i].id );
}
};

migration.down = <span class="hljs-keyword">function</span>(db) {

};
</code></pre><p>Any idea what&#39;s going on?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 8th 2013, 4:26:50 pm">November 8th 2013</span>
				by <span class='authorname'>Chris Kelly</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>migrations</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
						<li><span class='tagname'>update statements</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hmmâ¦. Has the code been redacted for security purposes ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 8th 2013, 4:28:34 pm">November 8th 2013</span>
								by <span class='authorname'>Nick Milner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>where is query ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 8th 2013, 4:30:10 pm">November 8th 2013</span>
								by <span class='authorname'>Muhammad Adnan</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>No, this forum just won&#39;t let me attach it.  Going to try without the codeblock formatting.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 8th 2013, 4:30:27 pm">November 8th 2013</span>
								by <span class='authorname'>Chris Kelly</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Just added another without the codeblocks, which unfortunately makes the code completely unreadable.  Not sure what&#39;s wrong with the forums, but it doesn&#39;t surprise me coming from Appcelerator.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 8th 2013, 4:31:49 pm">November 8th 2013</span>
								by <span class='authorname'>Chris Kelly</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Ok, this makes everything readable.  <a href="http:&#x2F;&#x2F;pastebin.com&#x2F;9pLMAmLF">http:&#x2F;&#x2F;pastebin.com&#x2F;9pLMAmLF</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="November 8th 2013, 4:42:52 pm">November 8th 2013</span>
								by <span class='authorname'>Chris Kelly</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-271049">
				
						<section>
							<p>I&#39;m having a problem with the update statements in my migrations.  Any alter or insert statements work properly, but the updates don&#39;t get executed for some reason even though they aren&#39;t firing errors.</p>
<p>First Migration for Machines (This one works)</p>
<p>migration.up = function(db) {<br>    db.createTable({columns: {<br>        id: &quot;INTEGER PRIMARY KEY AUTOINCREMENT&quot;,<br>        modName: &quot;TEXT&quot;,<br>        modNum: &quot;TEXT&quot;,<br>        modVar: &quot;TEXT&quot;,<br>        modGroup: &quot;TEXT&quot;,<br>        own: &quot;INTEGER&quot;<br>    },<br>    defaults: {<br>        modName: &quot;_&quot;,<br>        modNum: &quot;0&quot;,<br>        modVar: &quot;&quot;,<br>        modGroup: &quot;A&quot;,<br>        own: 0<br>    },<br>    adapter: {<br>        type: &quot;sql&quot;,<br>        collection_name: &quot;machines&quot;,<br>        idAttribute: &quot;id&quot;,<br>        remoteBackup: true<br>    }});<br>            Ti.API.info(&quot;function = machinesUp201307.js&quot;);<br>                Ti.API.info(&quot;Alloy:Resetting the machines collection.&quot;);<br>var newModels = [<br>          {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;830&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;A&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;820&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;A&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;780&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;A&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;750&quot;,<br>            modVar: &quot;QE&quot;,<br>            modGroup: &quot;A&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;710&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;A&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;580&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;B&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;550&quot;,<br>            modVar: &quot;QE&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;530&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;380&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;350&quot;,<br>            modVar: &quot;PE&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;330&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;B&quot;,<br>            modNum: &quot;215&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Aurora&quot;,<br>            modNum: &quot;450&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;B&quot;<br>        },<br>        {<br>            modName: &quot;Aurora&quot;,<br>            modNum: &quot;440&quot;,<br>            modVar: &quot;QE&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Aurora&quot;,<br>            modNum: &quot;435&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;B&quot;<br>        },<br>        {<br>            modName: &quot;Aurora&quot;,<br>            modNum: &quot;430&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Artista&quot;,<br>            modNum: &quot;730&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;A&quot;<br>        },<br>        {<br>            modName: &quot;Artista&quot;,<br>            modNum: &quot;640&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;B&quot;<br>        },<br>        {<br>            modName: &quot;Artista&quot;,<br>            modNum: &quot;635&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Artista&quot;,<br>            modNum: &quot;630&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Artista&quot;,<br>            modNum: &quot;200&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;B&quot;<br>        },<br>        {<br>            modName: &quot;Artista&quot;,<br>            modNum: &quot;185&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;B&quot;<br>        },<br>        {<br>            modName: &quot;Artista&quot;,<br>            modNum: &quot;180&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;B&quot;<br>        },<br>        {<br>            modName: &quot;Artista&quot;,<br>            modNum: &quot;170&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Artista&quot;,<br>            modNum: &quot;165&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Virtuosa&quot;,<br>            modNum: &quot;163&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Virtuosa&quot;,<br>            modNum: &quot;160&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Virtuosa&quot;,<br>            modNum: &quot;155&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Virtuosa&quot;,<br>            modNum: &quot;153&quot;,<br>            modVar: &quot;QE&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Virtuosa&quot;,<br>            modNum: &quot;153&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Virtuosa&quot;,<br>            modNum: &quot;150&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;240&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;230&quot;,<br>            modVar: &quot;PE&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;220&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;210&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;145&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;145&quot;,<br>            modVar: &quot;S&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;141&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;140&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;135&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;135&quot;,<br>            modVar: &quot;S&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;125&quot;,<br>            modVar: &quot;&quot;,<br>            modGroup: &quot;C&quot;<br>        },<br>        {<br>            modName: &quot;Activa&quot;,<br>            modNum: &quot;125&quot;,<br>            modVar: &quot;S&quot;,<br>            modGroup: &quot;C&quot;<br>        }<br>      ];<br>      &#x2F;&#x2F; Add models<br>for(var i=0; i &lt; newModels.length; i++) {<br>     db.insertRow(newModels[i]);<br>     Ti.API.info(&quot;new modGroup =&quot;+newModels[i].modGroup+&quot;, modName = &quot; +newModels[i].modName+&quot;, id= &quot; + i + &quot;+1&#x2F;n&quot;);<br>}<br>};</p>
<p>migration.down = function(db) {<br>    db.dropTable(&quot;machines&quot;);<br>};</p>
<p>Second Migration (In this one, the alter and insert statements work, but not the updates.)</p>
<p>migration.up = function(migrator) {<br>    Ti.API.info(&quot;function = machines.js migration up 2013&#x2F;09&quot;);<br>    var updatedModels = [<br>        {<br>            id: &quot;1&quot;,<br>            modGroup: &quot;A&quot;,<br>            modSort: &quot;2000&quot;<br>        },<br>        {<br>            id: &quot;2&quot;,<br>            modGroup: &quot;A&quot;,<br>            modSort: &quot;3000&quot;<br>        },<br>        {<br>            id: &quot;3&quot;,<br>            modGroup: &quot;A&quot;,<br>            modSort: &quot;4000&quot;<br>        },<br>        {<br>            id: &quot;4&quot;,<br>            modGroup: &quot;A&quot;,<br>            modSort: &quot;5000&quot;<br>        },<br>        {<br>            id: &quot;5&quot;,<br>            modGroup: &quot;A&quot;,<br>            modSort: &quot;6000&quot;<br>        },<br>        {<br>            id: &quot;6&quot;,<br>            modGroup: &quot;B&quot;,<br>            modSort: &quot;7000&quot;<br>        },<br>        {<br>            id: &quot;7&quot;,<br>            modGroup: &quot;C&quot;,<br>            modSort: &quot;9000&quot;<br>        },<br>        {<br>            id: &quot;8&quot;,<br>            modGroup: &quot;C&quot;,<br>            modSort: &quot;10000&quot;<br>        },<br>        {<br>            id: &quot;9&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;11000&quot;<br>        },<br>        {<br>            id: &quot;10&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;12000&quot;<br>        },<br>        {<br>            id: &quot;11&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;13000&quot;<br>        },<br>        {<br>            id: &quot;12&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;14000&quot;<br>        },<br>        {<br>            id: &quot;13&quot;,<br>            modGroup: &quot;B&quot;,<br>            modSort: &quot;15000&quot;<br>        },<br>        {<br>            id: &quot;14&quot;,<br>            modGroup: &quot;C&quot;,<br>            modSort: &quot;16000&quot;<br>        },<br>        {<br>            id: &quot;15&quot;,<br>            modGroup: &quot;B&quot;,<br>            modSort: &quot;17000&quot;<br>        },<br>        {<br>            id: &quot;16&quot;,<br>            modGroup: &quot;C&quot;,<br>            modSort: &quot;18000&quot;<br>        },<br>        {<br>            id: &quot;17&quot;,<br>            modGroup: &quot;B&quot;,<br>            modSort: &quot;19000&quot;<br>        },<br>        {<br>            id: &quot;18&quot;,<br>            modGroup: &quot;B&quot;,<br>            modSort: &quot;20000&quot;<br>        },<br>        {<br>            id: &quot;19&quot;,<br>            modGroup: &quot;C&quot;,<br>            modSort: &quot;21000&quot;<br>        },<br>        {<br>            id: &quot;20&quot;,<br>            modGroup: &quot;C&quot;,<br>            modSort: &quot;22000&quot;<br>        },<br>        {<br>            id: &quot;21&quot;,<br>            modGroup: &quot;D&quot;,<br>            modSort: &quot;23000&quot;<br>        },<br>        {<br>            id: &quot;22&quot;,<br>            modGroup: &quot;D&quot;,<br>            modSort: &quot;24000&quot;<br>        },<br>        {<br>            id: &quot;23&quot;,<br>            modGroup: &quot;D&quot;,<br>            modSort: &quot;25000&quot;<br>        },<br>        {<br>            id: &quot;24&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;26000&quot;<br>        },<br>        {<br>            id: &quot;25&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;27000&quot;<br>        },<br>        {<br>            id: &quot;26&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;28000&quot;<br>        },<br>        {<br>            id: &quot;27&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;29000&quot;<br>        },<br>        {<br>            id: &quot;28&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;31000&quot;<br>        },<br>        {<br>            id: &quot;29&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;32000&quot;<br>        },<br>        {<br>            id: &quot;30&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;33000&quot;<br>        },<br>        {<br>            id: &quot;31&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;34000&quot;<br>        },<br>        {<br>            id: &quot;32&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;35000&quot;<br>        },<br>        {<br>            id: &quot;33&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;36000&quot;<br>        },<br>        {<br>            id: &quot;34&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;37000&quot;<br>        },<br>        {<br>            id: &quot;35&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;38000&quot;<br>        },<br>        {<br>            id: &quot;36&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;39000&quot;<br>        },<br>        {<br>            id: &quot;37&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;40000&quot;<br>        },<br>        {<br>            id: &quot;38&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;41000&quot;<br>        },<br>        {<br>            id: &quot;39&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;42000&quot;<br>        },<br>        {<br>            id: &quot;40&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;43000&quot;<br>        },<br>        {<br>            id: &quot;41&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;44000&quot;<br>        },<br>        {<br>            id: &quot;42&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;45000&quot;<br>        },<br>        {<br>            id: &quot;43&quot;,<br>            modGroup: &quot;E&quot;,<br>            modSort: &quot;46000&quot;<br>        }<br>      ];    </p>
<p>&#x2F;&#x2F; Add new modSort column to machine table<br> migrator.db.execute(&#39;ALTER TABLE &#39; + migrator.table +  &#39; ADD COLUMN modSort INTEGER;&#39;);</p>
<p> &#x2F;&#x2F; Update the modNames to have first letter lower case<br> migrator.db.execute(&#39;UPDATE  &#39; + migrator.table + &#39; SET modName=\&#39;aurora\&#39; WHERE modName LIKE \&#39;Aurora\&#39;;&#39;);<br> migrator.db.execute(&#39;UPDATE  &#39; + migrator.table + &#39; SET modName=\&#39;artista\&#39; WHERE modName LIKE \&#39;Artista\&#39;;&#39;);<br> migrator.db.execute(&#39;UPDATE  &#39; + migrator.table + &#39; SET modName=\&#39;virtuosa\&#39; WHERE modName LIKE \&#39;Virtuosa\&#39;;&#39;);<br> migrator.db.execute(&#39;UPDATE  &#39; + migrator.table + &#39; SET modName=\&#39;activa\&#39; WHERE modName LIKE \&#39;Activa\&#39;;&#39;);</p>
<p> &#x2F;&#x2F; Add new models<br>migrator.db.execute(&#39;INSERT INTO  &#39; + migrator.table + &#39;(modName, modNum, modVar, modGroup, modSort) VALUES (\&#39;B\&#39;,\&#39;880\&#39;,\&#39;\&#39;,\&#39;A\&#39;, \&#39;1000\&#39;);&#39;);<br>migrator.db.execute(&#39;INSERT INTO  &#39; + migrator.table + &#39;(modName, modNum, modVar, modGroup, modSort) VALUES (\&#39;B\&#39;,\&#39;560\&#39;,\&#39;\&#39;,\&#39;B\&#39;, \&#39;8000\&#39;);&#39;);</p>
<p>&#x2F;&#x2F; Update modGroup and add modSort to be used for sorting of models to models that were existing already<br>for(var i=0; i &lt; updatedModels.length; i++) {<br>     migrator.db.execute(&#39;UPDATE &#39; + migrator.table + &#39; SET modGroup=\&#39;&#39; + updatedModels[i].modGroup + &#39;\&#39;, modSort=\&#39;&#39; + updatedModels[i].modSort + &#39;\&#39; WHERE id = \&#39;&#39; + updatedModels[i].id + &#39;\&#39;;&#39; );<br>     Ti.API.info(&quot;new modGroup =&quot;+updatedModels[i].modGroup+&quot;, modSort =&quot; +updatedModels[i].modSort+&quot;, id=&quot; + updatedModels[i].id );<br>}<br>};</p>
<p>migration.down = function(db) {</p>
<p>};</p>
<p>Any idea what&#39;s going on?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 8th 2013, 4:31:00 pm">November 8th 2013</span>
								by <span class='authorname'>Chris Kelly</span><br>
								<a class="icon-bg icon-link" href="question/159256/problem-with-update-statements-in-migrations#answer-271049" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>First Migration for Machines (This one works)</p>
<pre><code class="hljs">migration.up = function(db) {
    db.createTable({
        <span class="hljs-string">columns :</span> {
            <span class="hljs-string">id :</span> <span class="hljs-string">"INTEGER PRIMARY KEY AUTOINCREMENT"</span>,
            <span class="hljs-string">modName :</span> <span class="hljs-string">"TEXT"</span>,
            <span class="hljs-string">modNum :</span> <span class="hljs-string">"TEXT"</span>,
            <span class="hljs-string">modVar :</span> <span class="hljs-string">"TEXT"</span>,
            <span class="hljs-string">modGroup :</span> <span class="hljs-string">"TEXT"</span>,
            <span class="hljs-string">own :</span> <span class="hljs-string">"INTEGER"</span>
        },
        <span class="hljs-string">defaults :</span> {
            <span class="hljs-string">modName :</span> <span class="hljs-string">"_"</span>,
            <span class="hljs-string">modNum :</span> <span class="hljs-string">"0"</span>,
            <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
            <span class="hljs-string">modGroup :</span> <span class="hljs-string">"A"</span>,
            <span class="hljs-string">own :</span> <span class="hljs-number">0</span>
        },
        <span class="hljs-string">adapter :</span> {
            <span class="hljs-string">type :</span> <span class="hljs-string">"sql"</span>,
            <span class="hljs-string">collection_name :</span> <span class="hljs-string">"machines"</span>,
            <span class="hljs-string">idAttribute :</span> <span class="hljs-string">"id"</span>,
            <span class="hljs-string">remoteBackup :</span> <span class="hljs-literal">true</span>
        }
    });
    Ti.API.info(<span class="hljs-string">"function = machinesUp201307.js"</span>);
    Ti.API.info(<span class="hljs-string">"Alloy:Resetting the machines collection."</span>);
    var newModels = [{
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"830"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"A"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"820"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"A"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"780"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"A"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"750"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">"QE"</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"A"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"710"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"A"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"580"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"B"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"550"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">"QE"</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"530"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"380"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"350"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">"PE"</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"330"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"B"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"215"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Aurora"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"450"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"B"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Aurora"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"440"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">"QE"</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Aurora"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"435"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"B"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Aurora"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"430"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Artista"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"730"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"A"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Artista"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"640"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"B"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Artista"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"635"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Artista"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"630"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Artista"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"200"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"B"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Artista"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"185"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"B"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Artista"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"180"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"B"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Artista"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"170"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Artista"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"165"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Virtuosa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"163"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Virtuosa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"160"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Virtuosa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"155"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Virtuosa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"153"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">"QE"</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Virtuosa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"153"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Virtuosa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"150"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"240"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"230"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">"PE"</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"220"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"210"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"145"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"145"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">"S"</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"141"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"140"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"135"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"135"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">"S"</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"125"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">""</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }, {
        <span class="hljs-string">modName :</span> <span class="hljs-string">"Activa"</span>,
        <span class="hljs-string">modNum :</span> <span class="hljs-string">"125"</span>,
        <span class="hljs-string">modVar :</span> <span class="hljs-string">"S"</span>,
        <span class="hljs-string">modGroup :</span> <span class="hljs-string">"C"</span>
    }];
    <span class="hljs-comment">// Add models</span>
    <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; newModels.length; i++) {
        db.insertRow(newModels[i]);
        Ti.API.info(<span class="hljs-string">"new modGroup ="</span> + newModels[i].modGroup + <span class="hljs-string">", modName = "</span> + newModels[i].modName + <span class="hljs-string">", id= "</span> + i + <span class="hljs-string">"+1/n"</span>);
    }
}

migration.down = function(db) {
    db.dropTable(<span class="hljs-string">"machines"</span>);
};
</code></pre><p>Second Migration (In this one, the alter and insert statements work, but not the updates.)</p>
<pre><code class="hljs">migration.up = <span class="hljs-keyword">function</span> (migrator) {
    Ti.API.info(<span class="hljs-string">'function = machines.js migration up 2013/09'</span>);
    var updatedModels = [{
        id: <span class="hljs-string">'1'</span>,
        modGroup: <span class="hljs-string">'A'</span>,
        modSort: <span class="hljs-string">'2000'</span>
    }, {
        id: <span class="hljs-string">'2'</span>,
        modGroup: <span class="hljs-string">'A'</span>,
        modSort: <span class="hljs-string">'3000'</span>
    }, {
        id: <span class="hljs-string">'3'</span>,
        modGroup: <span class="hljs-string">'A'</span>,
        modSort: <span class="hljs-string">'4000'</span>
    }, {
        id: <span class="hljs-string">'4'</span>,
        modGroup: <span class="hljs-string">'A'</span>,
        modSort: <span class="hljs-string">'5000'</span>
    }, {
        id: <span class="hljs-string">'5'</span>,
        modGroup: <span class="hljs-string">'A'</span>,
        modSort: <span class="hljs-string">'6000'</span>
    }, {
        id: <span class="hljs-string">'6'</span>,
        modGroup: <span class="hljs-string">'B'</span>,
        modSort: <span class="hljs-string">'7000'</span>
    }, {
        id: <span class="hljs-string">'7'</span>,
        modGroup: <span class="hljs-string">'C'</span>,
        modSort: <span class="hljs-string">'9000'</span>
    }, {
        id: <span class="hljs-string">'8'</span>,
        modGroup: <span class="hljs-string">'C'</span>,
        modSort: <span class="hljs-string">'10000'</span>
    }, {
        id: <span class="hljs-string">'9'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'11000'</span>
    }, {
        id: <span class="hljs-string">'10'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'12000'</span>
    }, {
        id: <span class="hljs-string">'11'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'13000'</span>
    }, {
        id: <span class="hljs-string">'12'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'14000'</span>
    }, {
        id: <span class="hljs-string">'13'</span>,
        modGroup: <span class="hljs-string">'B'</span>,
        modSort: <span class="hljs-string">'15000'</span>
    }, {
        id: <span class="hljs-string">'14'</span>,
        modGroup: <span class="hljs-string">'C'</span>,
        modSort: <span class="hljs-string">'16000'</span>
    }, {
        id: <span class="hljs-string">'15'</span>,
        modGroup: <span class="hljs-string">'B'</span>,
        modSort: <span class="hljs-string">'17000'</span>
    }, {
        id: <span class="hljs-string">'16'</span>,
        modGroup: <span class="hljs-string">'C'</span>,
        modSort: <span class="hljs-string">'18000'</span>
    }, {
        id: <span class="hljs-string">'17'</span>,
        modGroup: <span class="hljs-string">'B'</span>,
        modSort: <span class="hljs-string">'19000'</span>
    }, {
        id: <span class="hljs-string">'18'</span>,
        modGroup: <span class="hljs-string">'B'</span>,
        modSort: <span class="hljs-string">'20000'</span>
    }, {
        id: <span class="hljs-string">'19'</span>,
        modGroup: <span class="hljs-string">'C'</span>,
        modSort: <span class="hljs-string">'21000'</span>
    }, {
        id: <span class="hljs-string">'20'</span>,
        modGroup: <span class="hljs-string">'C'</span>,
        modSort: <span class="hljs-string">'22000'</span>
    }, {
        id: <span class="hljs-string">'21'</span>,
        modGroup: <span class="hljs-string">'D'</span>,
        modSort: <span class="hljs-string">'23000'</span>
    }, {
        id: <span class="hljs-string">'22'</span>,
        modGroup: <span class="hljs-string">'D'</span>,
        modSort: <span class="hljs-string">'24000'</span>
    }, {
        id: <span class="hljs-string">'23'</span>,
        modGroup: <span class="hljs-string">'D'</span>,
        modSort: <span class="hljs-string">'25000'</span>
    }, {
        id: <span class="hljs-string">'24'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'26000'</span>
    }, {
        id: <span class="hljs-string">'25'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'27000'</span>
    }, {
        id: <span class="hljs-string">'26'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'28000'</span>
    }, {
        id: <span class="hljs-string">'27'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'29000'</span>
    }, {
        id: <span class="hljs-string">'28'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'31000'</span>
    }, {
        id: <span class="hljs-string">'29'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'32000'</span>
    }, {
        id: <span class="hljs-string">'30'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'33000'</span>
    }, {
        id: <span class="hljs-string">'31'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'34000'</span>
    }, {
        id: <span class="hljs-string">'32'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'35000'</span>
    }, {
        id: <span class="hljs-string">'33'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'36000'</span>
    }, {
        id: <span class="hljs-string">'34'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'37000'</span>
    }, {
        id: <span class="hljs-string">'35'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'38000'</span>
    }, {
        id: <span class="hljs-string">'36'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'39000'</span>
    }, {
        id: <span class="hljs-string">'37'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'40000'</span>
    }, {
        id: <span class="hljs-string">'38'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'41000'</span>
    }, {
        id: <span class="hljs-string">'39'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'42000'</span>
    }, {
        id: <span class="hljs-string">'40'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'43000'</span>
    }, {
        id: <span class="hljs-string">'41'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'44000'</span>
    }, {
        id: <span class="hljs-string">'42'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'45000'</span>
    }, {
        id: <span class="hljs-string">'43'</span>,
        modGroup: <span class="hljs-string">'E'</span>,
        modSort: <span class="hljs-string">'46000'</span>
    }];

    // Add new modSort column to machine table 
    migrator.db.execute(<span class="hljs-string">'ALTER TABLE '</span> + migrator.table + <span class="hljs-string">' ADD COLUMN modSort INTEGER;'</span>);

    // Update the modNames to have first letter lower case 
    migrator.db.execute(<span class="hljs-string">'UPDATE '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>aurora\<span class="hljs-string">' WHERE modName LIKE \'</span>Aurora\<span class="hljs-string">';'</span>);
    migrator.db.execute(<span class="hljs-string">'UPDATE '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>artista\<span class="hljs-string">' WHERE modName LIKE \'</span>Artista\<span class="hljs-string">';'</span>);
    migrator.db.execute(<span class="hljs-string">'UPDATE '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>virtuosa\<span class="hljs-string">' WHERE modName LIKE \'</span>Virtuosa\<span class="hljs-string">';'</span>);
    migrator.db.execute(<span class="hljs-string">'UPDATE '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>activa\<span class="hljs-string">' WHERE modName LIKE \'</span>Activa\<span class="hljs-string">';'</span>);

    // Add new models 
    migrator.db.execute(<span class="hljs-string">'INSERT INTO '</span> + migrator.table + <span class="hljs-string">'(modName, modNum, modVar, modGroup, modSort) VALUES (\'</span>B\<span class="hljs-string">',\'</span><span class="hljs-number">880</span>\<span class="hljs-string">',\'</span>\<span class="hljs-string">',\'</span>A\<span class="hljs-string">', \'</span><span class="hljs-number">1000</span>\<span class="hljs-string">');'</span>);
    migrator.db.execute(<span class="hljs-string">'INSERT INTO '</span> + migrator.table + <span class="hljs-string">'(modName, modNum, modVar, modGroup, modSort) VALUES (\'</span>B\<span class="hljs-string">',\'</span><span class="hljs-number">560</span>\<span class="hljs-string">',\'</span>\<span class="hljs-string">',\'</span>B\<span class="hljs-string">', \'</span><span class="hljs-number">8000</span>\<span class="hljs-string">');'</span>);

    // Update modGroup and add modSort to be used for sorting of models to models that were existing already 
    for (var i = <span class="hljs-number">0</span>; i &lt; updatedModels.length; i++) {
        migrator.db.execute(<span class="hljs-string">'UPDATE '</span> + migrator.table + <span class="hljs-string">' SET modGroup=\'' + updatedModels[i].modGroup + '</span>\<span class="hljs-string">', modSort=\'' + updatedModels[i].modSort + '</span>\<span class="hljs-string">' WHERE id = \'' + updatedModels[i].id + '</span>\<span class="hljs-string">';'</span>);
        Ti.API.info(<span class="hljs-string">'new modGroup ='</span> + updatedModels[i].modGroup + <span class="hljs-string">', modSort ='</span> + updatedModels[i].modSort + <span class="hljs-string">', id='</span> + updatedModels[i].id);
    }
};

migration.down = <span class="hljs-keyword">function</span> (db) {

};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 8th 2013, 4:44:15 pm">November 8th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just thought i&#39;d clean that upâ¦</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2013, 4:45:38 pm">November 8th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;m glad you were able to make it work.  For some reason it didn&#39;t like it on mine.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2013, 4:54:48 pm">November 8th 2013</span>
											by <span class='authorname'>Chris Kelly</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Looking at the UPDATE statements and the seeded data you show</p>
<pre><code class="hljs"> migrator.db.<span class="hljs-built_in">execute</span>(<span class="hljs-string">'UPDATE  '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>aurora\<span class="hljs-string">' WHERE modName LIKE \'</span>Aurora\<span class="hljs-string">';'</span>)<span class="hljs-comment">;</span>
</code></pre><p>Why use a LIKE operator without any wilidcard if the string is the same ? </p>
<pre><code class="hljs"> migrator.db.<span class="hljs-built_in">execute</span>(<span class="hljs-string">'UPDATE  '</span> + migrator.table + <span class="hljs-string">' SET modName=\'</span>aurora\<span class="hljs-string">' WHERE modName = \'</span>Aurora\<span class="hljs-string">';'</span>)<span class="hljs-comment">;</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 8th 2013, 5:03:00 pm">November 8th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Because the person who wrote that part doesn&#39;t know SQL properly.  I&#39;ll change that to =, but the real problem is with the updates on the models.  None of the modSort fields have a value, they&#39;re all null.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2013, 5:06:54 pm">November 8th 2013</span>
											by <span class='authorname'>Chris Kelly</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
