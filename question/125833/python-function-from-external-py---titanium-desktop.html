<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Python function from external .py - Titanium Desktop » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Python function from external .py - Titanium Desktop</h1>
		</header>
		<section>
			<p>Hi everyone, i created a simple desktop app that use a function in an external .py file. if i launch the external function using &quot;IDLE (Python GUI)&quot;, it&#39;s run and return me the right value. If i use it from my index.html,app crash when in the line &quot;import libraryname&quot; into my script. This is my script in index.html:</p>
<p>&lt;script type=&quot;text&#x2F;python&quot;&gt;</p>
<p>def connetti():</p>
<p>import libraryname</p>
<pre><code class="hljs">window.alert(libraryname.<span class="hljs-literal">result</span>)
</code></pre><p>&lt;&#x2F;script&gt;</p>
<p>Thank for your help, i&#39;am new in python and Titanium too.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 20th 2011, 4:34:40 pm">September 20th 2011</span>
				by <span class='authorname'>Francesco Boccacci</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>1.1 sdk</span></li>
					
						<li><span class='tagname'>desktop</span></li>
					
						<li><span class='tagname'>python</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>10 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Please provide more info. Unfortunately I haven&#39;t completed the &quot;read your mind&quot; API. Please look at guides.appcelerator.com for info on using Titanium with PHP.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 20th 2011, 4:37:16 pm">September 20th 2011</span>
								by <span class='authorname'>Alan DuBoff</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>In my index.html page use this:<br>&lt;input type=&quot;submit&quot; id=&quot;button2&quot; value=&quot;Sql&quot; onClick=&quot;connetti()&quot;<br>and this is the script:<br>&lt;script type=&quot;text&#x2F;python&quot;&gt;<br>def connetti():<br>    import mylibrary<br>    window.alert(mylibrary.torna())<br>&lt;&#x2F;script&gt;</p>
<p>I have the mylibrary.pl with this:<br>def torna():<br>    import pyodbc<br>    connection = pyodbc.connect(&#39;DRIVER={SQL Server};SERVER=Portatile;DATABASE=GAMMASV;UID=sa;PWD=&#39;)<br>    cur = connection.cursor()<br>    cur.execute(&quot;SELECT count(*) as numero FROM DO11_DOCTESTATA WHERE DO11_DITTA_CG18=321&quot;)<br>    rows = cur.fetchone()<br>    return rows.numero</p>
<p>if i go in python gui and write:<br>&gt;&gt;&gt; import mylibrary<br>&gt;&gt;&gt; print connette.torna<br>391 &#39;this is the righe result</p>
<p>but when i launch the Titanium project and click on the button nothing. I see don&#39;t pass the import mylibrary statement.</p>
<p>Thanks for your answer</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 20th 2011, 8:10:36 pm">September 20th 2011</span>
								by <span class='authorname'>Francesco Boccacci</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Repost formatting text</p>
<p>In my index.html page i use this: </p>
<p>&lt;input type=&quot;submit&quot; id=&quot;button2&quot; value=&quot;Sql&quot; onClick=&quot;connetti()&quot; \&gt;</p>
<p>and this is the script: </p>
<p>&lt;script type=&quot;text&#x2F;python&quot;&gt; </p>
<p>def connetti():<br>    import mylibrary </p>
<pre><code class="hljs">window.<span class="hljs-function"><span class="hljs-title">alert</span><span class="hljs-params">(mylibrary.torna()</span></span>) 
</code></pre><p>&lt;&#x2F;script&gt;</p>
<p>I have the mylibrary.pl with this: </p>
<p>def torna(): </p>
<pre><code class="hljs">import pyodbc connection = pyodbc.<span class="hljs-function"><span class="hljs-title">connect</span><span class="hljs-params">(<span class="hljs-string">'DRIVER={SQL Server};SERVER=Portatile;DATABASE=GAMMASV;UID=sa;PWD='</span>)</span></span>

cur = connection.<span class="hljs-function"><span class="hljs-title">cursor</span><span class="hljs-params">()</span></span>

cur.<span class="hljs-function"><span class="hljs-title">execute</span><span class="hljs-params">(<span class="hljs-string">"SELECT count(*) as numero FROM DO11_DOCTESTATA WHERE DO11_DITTA_CG18=321"</span>)</span></span> 

rows = cur.<span class="hljs-function"><span class="hljs-title">fetchone</span><span class="hljs-params">()</span></span> 

return rows.numero
</code></pre><p>if i go in python gui and write: </p>
<p>&gt;&gt;&gt; import mylibrary </p>
<p>&gt;&gt;&gt; print connette.torna </p>
<p>391 &#39;this is the righe result</p>
<p>but when i launch the Titanium project and click on the button nothing. I see don&#39;t pass the import mylibrary statement.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 20th 2011, 8:19:07 pm">September 20th 2011</span>
								by <span class='authorname'>Francesco Boccacci</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Francesco,</p>
<p>I need to know what platform, version of SDK, and even version of Studio.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 20th 2011, 8:26:02 pm">September 20th 2011</span>
								by <span class='authorname'>Alan DuBoff</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Different versions of the SDK require different conventions. Please check this document on guides.appcelerator.com:</p>
<p><a href="http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Using+Titanium+Desktop+with+Python">Using Titanium Desktop with Python</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="September 20th 2011, 8:30:51 pm">September 20th 2011</span>
								by <span class='authorname'>Alan DuBoff</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>platform=windows 7</p>
<p>SDK=1.1.0</p>
<p>Titanium Studio, build: 1.0.4.201108101535<br>(c) Copyright 2011 by Appcelerator, Inc.  All rights reserved.</p>
<p>Build: jenkins-titanium-rcp-master-40 (origin&#x2F;master)<br>Date: 10 August 2011, 15:39:05</p>
<p>python=2.7</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 20th 2011, 8:38:53 pm">September 20th 2011</span>
								by <span class='authorname'>Francesco Boccacci</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Francesco,</p>
<p>Studio should be update to BETA as there was some problems importing desktop projects and&#x2F;or creating them. It was fixed in 1.0.5.</p>
<p>Docs on how to update should be located here: </p>
<p><a href="http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;tis&#x2F;Changing+the+Update+Type">Changing the Update Type</a></p>
<p>The update link  you should be using is: </p>
<p><a href="http:&#x2F;&#x2F;preview.appcelerator.com&#x2F;appcelerator&#x2F;studio&#x2F;standalone&#x2F;update&#x2F;beta&#x2F;">http:&#x2F;&#x2F;preview.appcelerator.com&#x2F;appcelerator&#x2F;studio&#x2F;standalone&#x2F;update&#x2F;beta&#x2F;</a></p>
<p>The 1.1 SDK required the older calling convention.</p>
<p>Also, if you have a file your including with a .pl extension, that might be the problem, please rename that to a .py and retest.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 20th 2011, 10:17:29 pm">September 20th 2011</span>
								by <span class='authorname'>Alan DuBoff</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Disregard that last comment about renaming your file, although I&#39;m really not clear on what your doing…it looks like your using the old convention. But I&#39;m not clear what exactly your code is doing.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 20th 2011, 10:21:06 pm">September 20th 2011</span>
								by <span class='authorname'>Alan DuBoff</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>def connetti(): import mylibrary</p>
<p>Is the line that it doesn&#39;t like. I&#39;m not a good enough Python programming to know if that is correct syntax or not. You have a .pl extension on that, I don&#39;t think it likes that syntax with that file. Is the .pl a perl script?</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 20th 2011, 10:29:11 pm">September 20th 2011</span>
								by <span class='authorname'>Alan DuBoff</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thank you Alan for your interest.</p>
<p>The extension .pl is an error i have to write .py</p>
<p>My script is in python so as you can see:</p>
<p>def torna():  &#39; i define a function to return a value</p>
<pre><code class="hljs">import pyodbc ' i <span class="hljs-operator"><span class="hljs-keyword">use</span> pyodbc <span class="hljs-keyword">module</span>

pyodbc.<span class="hljs-keyword">connect</span>..... <span class="hljs-string">' connection to a MSSQL server

cur=connection.cursor '</span> <span class="hljs-keyword">i</span> <span class="hljs-keyword">define</span> a <span class="hljs-keyword">cursor</span> <span class="hljs-keyword">variable</span>

cur.<span class="hljs-keyword">execute</span>...... <span class="hljs-string">' select record count from a specific table in a database

rows = cur.fetchone() '</span> <span class="hljs-keyword">move</span> recordset <span class="hljs-keyword">in</span> <span class="hljs-keyword">variable</span>

<span class="hljs-keyword">return</span> <span class="hljs-keyword">rows</span>.numero <span class="hljs-string">' exit function with the field "numero" value.</span></span>
</code></pre><p>i repeat you this .py file is ok. if i run it from &quot;python gui&quot; it return 391 (the righ number of records)</p>
<p>my problem is call this function from the index.html of the Titanium project.</p>
<p>I write a script to use with onclick event of button:</p>
<p>&lt;script type=&quot;text&#x2F;python&quot;&gt;  &#39;declare a script python</p>
<p>def connetti():  &#39;i define a function name to call</p>
<pre><code class="hljs">import mylibrary  <span class="hljs-comment">' i use the previous script python</span>

window.alert(mylibrary.torna())  <span class="hljs-comment">' i show rows.number of the function</span>
</code></pre><p>&lt;&#x2F;script&gt;</p>
<p>In my Titanium project index.html stop on &quot;import mylibrary&quot; statement and do </p>
<p>nothing. Attention, if i use &quot;import calendar&quot; rather than &quot;import mylibrary&quot; </p>
<p>index.html don&#39;t stop. I&#39;m using wrong sintax in mylibrary.py? </p>
<p>Thank you again and sorry for my bad english but i&#39;m italian.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 21st 2011, 6:18:45 am">September 21st 2011</span>
								by <span class='authorname'>Francesco Boccacci</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
