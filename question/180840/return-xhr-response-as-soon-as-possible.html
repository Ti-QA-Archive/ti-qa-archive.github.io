<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Return xhr response as soon as Possible Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Return xhr response as soon as Possible</h1>
		</header>
		<section>
			<p>I have four function at web services login ,and function1 , function2, function3 depend on login function<br>when i logined in i  pass parameter  username to the three function to display data at service window but the data doesn&#39;t display data to service window until to return to home screen and then go back again to service window</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 13th 2015, 1:48:50 pm">February 13th 2015</span>
				by <span class='authorname'>Hussein Elganzory</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>application</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi</p>
<p>If you provide us with some of your code we might be able to identify the problem easier.</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 13th 2015, 2:38:07 pm">February 13th 2015</span>
								by <span class='authorname'>Luke Taylor</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>&#x2F;**</p>
<ul>
<li>@author Administrator<br>*&#x2F;<br>var BusyLoading = require(&#39;&#x2F;ui&#x2F;common&#x2F;utils&#x2F;BusyLoading&#39;);<br>var topLevelWindow = null;<br>var view = require(&#39;ui&#x2F;common&#x2F;controls&#x2F;view&#39;);<br>var imageview = require(&#39;ui&#x2F;common&#x2F;controls&#x2F;imageview&#39;);<br>var textfield = require(&#39;ui&#x2F;common&#x2F;controls&#x2F;textfield&#39;);<br>&#x2F;&#x2F;var dataTotalPaid = require(&#39;ui&#x2F;common&#x2F;function&#x2F;dataTotalPaid&#39;);<br>var view = require(&#39;ui&#x2F;common&#x2F;controls&#x2F;view&#39;);<br>var openwindow = require(&#39;ui&#x2F;common&#x2F;function&#x2F;openwindow&#39;);</li>
</ul>
<p>function sidfwinAndroidLogin() {</p>
<pre><code class="hljs">function callbackpaid(<span class="hljs-built_in">data</span>) {

    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">data</span> != <span class="hljs-built_in">null</span> <span class="hljs-subst">||</span> <span class="hljs-built_in">data</span> === <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-comment">//    alert(data.length);</span>
<span class="hljs-comment">//data1 = data;</span>
        Titanium<span class="hljs-built_in">.</span>App<span class="hljs-built_in">.</span>Properties<span class="hljs-built_in">.</span>setList(<span class="hljs-string">'paid'</span>, <span class="hljs-built_in">data</span>);
    }


}


function callbackfuf(<span class="hljs-built_in">data</span>) {
    <span class="hljs-comment">// alert(r.length);</span>

    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">data</span> != <span class="hljs-built_in">null</span> <span class="hljs-subst">||</span> <span class="hljs-built_in">data</span> === <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-comment">//alert(data.length);</span>
    <span class="hljs-comment">//    data2 = data;</span>
        Titanium<span class="hljs-built_in">.</span>App<span class="hljs-built_in">.</span>Properties<span class="hljs-built_in">.</span>setList(<span class="hljs-string">'fuf'</span>, <span class="hljs-built_in">data</span>);

        <span class="hljs-comment">//Ti.App.fuf=data;</span>
    }
}

function callbackpayment(<span class="hljs-built_in">data</span>) {
    <span class="hljs-comment">//alert(r.length);</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">data</span> != <span class="hljs-built_in">null</span> <span class="hljs-subst">||</span> <span class="hljs-built_in">data</span> === <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-comment">//    alert(data.length);</span>
    <span class="hljs-comment">//    data3 = data;</span>
        Titanium<span class="hljs-built_in">.</span>App<span class="hljs-built_in">.</span>Properties<span class="hljs-built_in">.</span>setList(<span class="hljs-string">'payment'</span>, <span class="hljs-built_in">data</span>);
        <span class="hljs-comment">//Ti.App.payment=data;</span>
    }
}
</code></pre><p>Ti.App.Properties.count=0;<br>    function dataTotalPaidLogin(un, username, password) {<br>        url = &#39;https:&#x2F;&#x2F;eservices.sidf.gov.sa&#x2F;LoanInquiry_mobile&#x2F;SIDFMobile.asmx&#39;;<br>        var dataTotalPaidar = new Array();<br>        &#x2F;&#x2F;dataTotalPaidar = [];<br>        &#x2F;&#x2F; var un = Titanium.App.Properties.getString(&#39;usrnm&#39;);<br>        &#x2F;&#x2F; var username = Titanium.App.Properties.getString(&#39;username&#39;);<br>        &#x2F;&#x2F; var password = Titanium.App.Properties.getString(&#39;pswd&#39;);<br>        if (un === username) {<br>            &#x2F;&#x2F;    resetStaticValues();<br>            var xhr = Ti.Network.createHTTPClient({</p>
<pre><code class="hljs">            onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

                un = Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>);
                <span class="hljs-keyword">var</span> str = <span class="hljs-keyword">this</span>.responseText;
                <span class="hljs-comment">//alert(str);</span>
                <span class="hljs-keyword">var</span> finalData = str.replace(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">""</span>);
                <span class="hljs-comment">//    alert(str);</span>
                <span class="hljs-keyword">var</span> newStr = finalData.slice(<span class="hljs-number">6</span>, finalData.length - <span class="hljs-number">3</span>);
                <span class="hljs-comment">//    alert(newStr);</span>
                <span class="hljs-keyword">if</span> (newStr !== <span class="hljs-string">' ]'</span>) {

                    <span class="hljs-comment">//Slice String</span>
</code></pre><p>Ti.App.Properties.count++;<br>                        dataTotalPaidar = JSON.parse(&#39;&#39; + newStr + &#39;&#39;);</p>
<pre><code class="hljs">                    <span class="hljs-keyword">if</span> (dataTotalPaidar !== <span class="hljs-literal">null</span> || dataTotalPaidar === <span class="hljs-string">'undfined'</span>)
                        callbackpaid(dataTotalPaidar);
                }


            },
            onerror : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
                Titanium.API.error(<span class="hljs-string">'Status: '</span> + <span class="hljs-keyword">this</span>.status);
                Titanium.API.error(<span class="hljs-string">'ResponseText: '</span> + <span class="hljs-keyword">this</span>.responseText);
                Titanium.API.error(<span class="hljs-string">'connectionType: '</span> + <span class="hljs-keyword">this</span>.connectionType);
                Titanium.API.error(<span class="hljs-string">'location: '</span> + <span class="hljs-keyword">this</span>.location);

            },
            ondatastream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>

            },
            onsendstream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
            },
            onreadystatechange : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">switch</span>(<span class="hljs-keyword">this</span>.readyState) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    <span class="hljs-comment">// after HTTPClient declared, prior to open()</span>
                    <span class="hljs-comment">// though Ti won't actually report on this readyState</span>
                    Ti.API.info(<span class="hljs-string">'case 0, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    <span class="hljs-comment">// open() has been called, now is the time to set headers</span>
                    Ti.API.info(<span class="hljs-string">'case 1, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    <span class="hljs-comment">// headers received, xhr.status should be available now</span>
                    Ti.API.info(<span class="hljs-string">'case 2, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                    <span class="hljs-comment">// data is being received, onsendstream/ondatastream being called now</span>
                    Ti.API.info(<span class="hljs-string">'case 3, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                    <span class="hljs-comment">// done, onload or onerror should be called now</span>
                    Ti.API.info(<span class="hljs-string">'case 4, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                }

            },
            timeout : <span class="hljs-number">35000</span>
        });
        <span class="hljs-comment">//</span>
        <span class="hljs-keyword">var</span> us = <span class="hljs-built_in">JSON</span>.stringify(username);
        <span class="hljs-keyword">var</span> pd = <span class="hljs-built_in">JSON</span>.stringify(password);
        <span class="hljs-comment">//</span>
        xhr.open(<span class="hljs-string">'GET'</span>, url + <span class="hljs-string">'/totalPaidPastDue?username='</span> + us + <span class="hljs-string">'&amp;'</span> + <span class="hljs-string">'password='</span> + pd);
        xhr.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json; charset=utf-8"</span>);
        <span class="hljs-comment">//</span>
        xhr.send();
        <span class="hljs-comment">//BusyLoading.hide();</span>
        <span class="hljs-keyword">return</span> dataTotalPaidar;
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dataPaymentDateLogin</span>(<span class="hljs-params">un, username, password</span>) </span>{
    <span class="hljs-comment">/********
     * Payment Date
     ********/</span>
    <span class="hljs-keyword">var</span> dataPaymentDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
    <span class="hljs-comment">//dataPaymentDate = [];</span>
    url = <span class="hljs-string">'https://eservices.sidf.gov.sa/LoanInquiry_mobile/SIDFMobile.asmx'</span>;
    <span class="hljs-keyword">var</span> un = Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>);
    <span class="hljs-keyword">var</span> username = Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>);
    <span class="hljs-keyword">var</span> password = Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>);
    <span class="hljs-keyword">if</span> (un == username) {
        <span class="hljs-comment">//resetStaticValues();</span>
        <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({

            onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

                un = Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>);

                <span class="hljs-comment">//if (un === username) {</span>
                <span class="hljs-comment">//    var dataPaymentDate = null;</span>
                <span class="hljs-keyword">var</span> str = <span class="hljs-keyword">this</span>.responseText;

                <span class="hljs-comment">//Slice String</span>
                <span class="hljs-keyword">var</span> finalData = str.replace(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">""</span>);
                <span class="hljs-keyword">var</span> newStr = finalData.slice(<span class="hljs-number">6</span>, finalData.length - <span class="hljs-number">2</span>);
                <span class="hljs-keyword">if</span> (newStr != <span class="hljs-string">' ]'</span>) {
</code></pre><p>Ti.App.Properties.count++;<br>                        dataPaymentDate = JSON.parse(&#39;&#39; + newStr + &#39;&#39;);</p>
<pre><code class="hljs">                    <span class="hljs-keyword">if</span> (dataPaymentDate !== <span class="hljs-literal">null</span> || dataPaymentDate === <span class="hljs-string">'undfined'</span>)
                        callbackpayment(dataPaymentDate);

                    <span class="hljs-comment">//    Titanium.App.Properties.setList('payment',dataPaymentDate);</span>

                    dataPaymentDate = <span class="hljs-literal">null</span>;
                }

                <span class="hljs-comment">//}</span>

            },
            onerror : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
                Titanium.API.error(<span class="hljs-string">'Status: '</span> + <span class="hljs-keyword">this</span>.status);
                Titanium.API.error(<span class="hljs-string">'ResponseText: '</span> + <span class="hljs-keyword">this</span>.responseText);
                Titanium.API.error(<span class="hljs-string">'connectionType: '</span> + <span class="hljs-keyword">this</span>.connectionType);
                Titanium.API.error(<span class="hljs-string">'location: '</span> + <span class="hljs-keyword">this</span>.location);

            },
            ondatastream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>

            },
            onsendstream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
            },
            onreadystatechange : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">switch</span>(<span class="hljs-keyword">this</span>.readyState) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    <span class="hljs-comment">// after HTTPClient declared, prior to open()</span>
                    <span class="hljs-comment">// though Ti won't actually report on this readyState</span>
                    Ti.API.info(<span class="hljs-string">'case 0, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    <span class="hljs-comment">// open() has been called, now is the time to set headers</span>
                    Ti.API.info(<span class="hljs-string">'case 1, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    <span class="hljs-comment">// headers received, xhr.status should be available now</span>
                    Ti.API.info(<span class="hljs-string">'case 2, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                    <span class="hljs-comment">// data is being received, onsendstream/ondatastream being called now</span>
                    Ti.API.info(<span class="hljs-string">'case 3, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                    <span class="hljs-comment">// done, onload or onerror should be called now</span>
                    Ti.API.info(<span class="hljs-string">'case 4, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                }

                <span class="hljs-comment">//activityIndicator.hide();</span>

            },
            timeout : <span class="hljs-number">35000</span>
        });
        <span class="hljs-comment">//</span>
        <span class="hljs-keyword">var</span> us = <span class="hljs-built_in">JSON</span>.stringify(username);
        <span class="hljs-keyword">var</span> pd = <span class="hljs-built_in">JSON</span>.stringify(password);

        xhr.open(<span class="hljs-string">'GET'</span>, url + <span class="hljs-string">'/Paymentdate?username='</span> + us + <span class="hljs-string">'&amp;'</span> + <span class="hljs-string">'password='</span> + pd);
        xhr.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json; charset=utf-8"</span>);
        <span class="hljs-comment">//</span>
        xhr.send();
        <span class="hljs-keyword">return</span> dataPaymentDate;
        <span class="hljs-comment">//</span>
    }

}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dataFufFeeLogin</span>(<span class="hljs-params">un, username, password</span>) </span>{

    <span class="hljs-comment">/*******
     * Fuf
     *********/</span>

    <span class="hljs-keyword">var</span> dataFufFeeBlnc = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();;
    <span class="hljs-comment">//dataFufFeeBlnc = [];</span>
    url = <span class="hljs-string">'https://eservices.sidf.gov.sa/LoanInquiry_mobile/SIDFMobile.asmx'</span>;
    <span class="hljs-keyword">var</span> un = Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>);
    <span class="hljs-keyword">var</span> username = Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>);
    <span class="hljs-keyword">var</span> password = Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>);

    <span class="hljs-keyword">if</span> (un == username) {
        <span class="hljs-comment">//resetStaticValues();</span>
        <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({
            <span class="hljs-comment">//</span>
            onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//    var dataFufFeeBlnc=null;</span>

                <span class="hljs-comment">//alert(un);</span>
                un = Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>);
                <span class="hljs-comment">//Slice String</span>
                <span class="hljs-keyword">var</span> str = <span class="hljs-keyword">this</span>.responseText;
                <span class="hljs-keyword">var</span> finalData = str.replace(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">""</span>);
                <span class="hljs-keyword">var</span> newStr = finalData.slice(<span class="hljs-number">6</span>, finalData.length - <span class="hljs-number">2</span>);
                <span class="hljs-comment">// alert(str);</span>
                <span class="hljs-comment">// alert(finalData);</span>
                <span class="hljs-comment">// alert(newStr);</span>
                <span class="hljs-comment">//    if (un === username) {</span>
                <span class="hljs-keyword">if</span> (newStr !== <span class="hljs-string">']'</span>) {
</code></pre><p>Ti.App.Properties.count++;<br>                        dataFufFeeBlnc = JSON.parse(&#39;&#39; + newStr + &#39;&#39;);</p>
<pre><code class="hljs">                    <span class="hljs-keyword">if</span> (dataFufFeeBlnc !== <span class="hljs-literal">null</span> || dataFufFeeBlnc === <span class="hljs-string">'undfined'</span>)
                        callbackfuf(dataFufFeeBlnc);

                    <span class="hljs-comment">//Titanium.App.Properties.setList('fuf',dataFufFeeBlnc);</span>
                    <span class="hljs-comment">// lblLoanNumberValue.text = dataFufFeeBlnc[i].loanNo;</span>
                    <span class="hljs-comment">//lblTotalPastDuesValue.text = dataFufFeeBlnc[i].FufFeeBlnc;</span>

                    dataFufFeeBlnc = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-comment">/*
                var header= getTableHeader('Follow up fees',followUpFeesTableContainer,false );
                scrollView.add(header);
                scrollView.add(followUpFeesTableContainer);
                */</span>
                <span class="hljs-comment">//}</span>

            },
            onerror : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
                Titanium.API.error(<span class="hljs-string">'Status: '</span> + <span class="hljs-keyword">this</span>.status);
                Titanium.API.error(<span class="hljs-string">'ResponseText: '</span> + <span class="hljs-keyword">this</span>.responseText);
                Titanium.API.error(<span class="hljs-string">'connectionType: '</span> + <span class="hljs-keyword">this</span>.connectionType);
                Titanium.API.error(<span class="hljs-string">'location: '</span> + <span class="hljs-keyword">this</span>.location);

            },
            ondatastream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>

            },
            onsendstream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
            },
            onreadystatechange : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">switch</span>(<span class="hljs-keyword">this</span>.readyState) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    <span class="hljs-comment">// after HTTPClient declared, prior to open()</span>
                    <span class="hljs-comment">// though Ti won't actually report on this readyState</span>
                    Ti.API.info(<span class="hljs-string">'case 0, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    <span class="hljs-comment">//open() has been called, now is the time to set headers</span>
                    Ti.API.info(<span class="hljs-string">'case 1, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    <span class="hljs-comment">// headers received, xhr.status should be available now</span>
                    Ti.API.info(<span class="hljs-string">'case 2, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                    <span class="hljs-comment">// data is being received, onsendstream/ondatastream being called now</span>
                    Ti.API.info(<span class="hljs-string">'case 3, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                    <span class="hljs-comment">// done, onload or onerror should be called now</span>
                    Ti.API.info(<span class="hljs-string">'case 4, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                }

                <span class="hljs-comment">//activityIndicator.hide();</span>

            },
            timeout : <span class="hljs-number">35000</span>
        });
        <span class="hljs-comment">//</span>
        <span class="hljs-keyword">var</span> us = <span class="hljs-built_in">JSON</span>.stringify(username);
        <span class="hljs-keyword">var</span> pd = <span class="hljs-built_in">JSON</span>.stringify(password);

        xhr.open(<span class="hljs-string">'GET'</span>, url + <span class="hljs-string">'/FufFeeBlnc?username='</span> + us + <span class="hljs-string">'&amp;'</span> + <span class="hljs-string">'password='</span> + pd);
        xhr.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json; charset=utf-8"</span>);

        xhr.send();
        <span class="hljs-keyword">return</span> dataFufFeeBlnc;
    }

};

<span class="hljs-keyword">var</span> SupportedLanguages = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/common/settings/LanguageSettings'</span>);

<span class="hljs-keyword">var</span> ImageView_1;
ImageView_1 = Titanium.UI.createImageView({
    name : <span class="hljs-string">'ImageView_1'</span>,
    autoCreate : <span class="hljs-literal">true</span>,
    <span class="hljs-comment">//height : '30%',</span>
    height : (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) ? <span class="hljs-string">'15%'</span> : <span class="hljs-string">'20%'</span>,
    left : <span class="hljs-string">'5%'</span>,
    <span class="hljs-comment">//right : '5%',</span>
    top : <span class="hljs-string">'9%'</span>,
    <span class="hljs-comment">//width : '40%',</span>
    image : <span class="hljs-string">'/images/Logo.png'</span>,
    <span class="hljs-comment">//width:'15%'</span>
});

<span class="hljs-keyword">var</span> ImageView_profile = <span class="hljs-keyword">new</span> imageview(<span class="hljs-string">'/images/Blue-profile-pic.png'</span>, <span class="hljs-string">'15%'</span>, <span class="hljs-string">'40%'</span>, <span class="hljs-string">'47%'</span>, <span class="hljs-string">'42%'</span>, <span class="hljs-string">''</span>);

<span class="hljs-keyword">var</span> SupportedLanguages = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/common/settings/LanguageSettings'</span>);
<span class="hljs-keyword">var</span> isEnglish = SupportedLanguages.isEnglish();
<span class="hljs-comment">/********
 * TextField Username
 ********/</span>
<span class="hljs-keyword">var</span> txtUsername = <span class="hljs-keyword">new</span> textfield( isEnglish ? <span class="hljs-string">'Enter Your Username'</span> : <span class="hljs-string">'???? ??? ????????'</span>, Titanium.UI.TEXT_ALIGNMENT_CENTER, <span class="hljs-string">'40%'</span>, (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) ? <span class="hljs-string">'1cm'</span> : <span class="hljs-string">'auto'</span>, <span class="hljs-string">'46%'</span>, <span class="hljs-string">'30%'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'black'</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);

<span class="hljs-comment">/********
 * TextField Password
 ********/</span>
<span class="hljs-keyword">var</span> txtPassword = <span class="hljs-keyword">new</span> textfield( isEnglish ? <span class="hljs-string">'Enter Your Password'</span> : <span class="hljs-string">'???? ???? ??????'</span>, Titanium.UI.TEXT_ALIGNMENT_CENTER, <span class="hljs-string">'40%'</span>, (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) ? <span class="hljs-string">'1cm'</span> : <span class="hljs-string">'auto'</span>, <span class="hljs-string">'57%'</span>, <span class="hljs-string">'30%'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'black'</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">//txtPassword.addEventListener('focus',function(e){txtPassword.value=''});</span>
<span class="hljs-keyword">if</span> (SupportedLanguages.isEnglish()) {
    <span class="hljs-keyword">var</span> View_2;
    View_2 = Titanium.UI.createView({
        name : <span class="hljs-string">'View_2'</span>,
        autoCreate : <span class="hljs-literal">true</span>,
        height : <span class="hljs-string">'40%'</span>,
        left : <span class="hljs-string">'0%'</span>,
        top : <span class="hljs-string">'0%'</span>,
        width : <span class="hljs-string">'100%'</span>,
    });

    <span class="hljs-keyword">var</span> vw = Titanium.UI.createView({
        top : <span class="hljs-string">'0%'</span>,
        height : <span class="hljs-string">'0.7cm'</span>,
        width : <span class="hljs-string">'100%'</span>,
        backgroundColor : <span class="hljs-string">'#eaeff3'</span>,
        borderColor : <span class="hljs-string">'black'</span>
    });
    <span class="hljs-comment">//</span>
    <span class="hljs-keyword">var</span> button = Titanium.UI.createButton({
        bottom : <span class="hljs-string">'0'</span>,
        title : <span class="hljs-string">'Back'</span>,
        left : <span class="hljs-string">'2%'</span>,
        font : {
            fontSize : <span class="hljs-number">20</span>
        }
    });
    button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        sidfwinAndroidLogin.close();
        <span class="hljs-comment">//alert('sd');</span>
    });

    vw.add(button);
    <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>)
        View_2.add(vw);

    <span class="hljs-comment">/********
     * Button Login
     ********/</span>
    <span class="hljs-keyword">var</span> btnLogin;
    btnLogin = Titanium.UI.createButton({
        name : <span class="hljs-string">'Button_1'</span>,
        autoCreate : <span class="hljs-literal">true</span>,
        height : (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) ? <span class="hljs-string">'1cm'</span> : <span class="hljs-string">'8%'</span>,
        left : <span class="hljs-string">'30%'</span>,
        title : <span class="hljs-string">'Sign In'</span>,
        top : (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) ? <span class="hljs-string">'66%'</span> : <span class="hljs-string">'70%'</span>,
        width : <span class="hljs-string">'40%'</span>,
        backgroundImage : <span class="hljs-string">'/images/Log-in-box.png'</span>,
        backgroundSelectedImage : <span class="hljs-string">'/images/Selected-Log-in.png'</span>
    });

    <span class="hljs-comment">//(width,heigth,top,left,backgroundImage,BackgroundSelectedImage,title)</span>

    Titanium.App.Properties.btnEnLogin = btnLogin;
    <span class="hljs-keyword">var</span> un = <span class="hljs-string">''</span>;
    btnLogin.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-comment">// btnLogin.touchEnabled=false;</span>
        Titanium.App.fireEvent(<span class="hljs-string">'refresh'</span>);
        Titanium.App.Properties.btnEnLogin.touchEnabled = <span class="hljs-literal">false</span>;

        Titanium.App.Properties.winLogin = sidfwinAndroidLogin;
        Ti.App.Properties.TabGroup.close();
        Titanium.App.fireEvent(<span class="hljs-string">'closeWin'</span>);
        <span class="hljs-keyword">var</span> username = txtUsername.value;
        <span class="hljs-keyword">var</span> password = txtPassword.value;

        <span class="hljs-keyword">if</span> (txtUsername.value == <span class="hljs-literal">null</span> || txtUsername.value == <span class="hljs-string">''</span>) {
            <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                message : <span class="hljs-string">'Username Required'</span>,
                ok : <span class="hljs-string">'Ok'</span>,
                title : <span class="hljs-string">'Error'</span>
            });
            dialog.show();
            txtUsername.focus();
            Titanium.App.Properties.btnEnLogin.touchEnabled = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">if</span> (txtPassword.value == <span class="hljs-literal">null</span> || txtPassword.value == <span class="hljs-string">''</span>) {
            <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                message : <span class="hljs-string">'Password Required'</span>,
                ok : <span class="hljs-string">'OK'</span>,
                title : <span class="hljs-string">'Error'</span>
            });
            dialog.show();
            txtPassword.focus();
            Titanium.App.Properties.btnEnLogin.touchEnabled = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">if</span> (Titanium.Network.networkType === Titanium.Network.NETWORK_NONE) {
            Titanium.API.info(<span class="hljs-string">' no connection '</span>);
            <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                message : <span class="hljs-string">'No Internet Connection '</span>,
                ok : <span class="hljs-string">'Ok'</span>,
                title : <span class="hljs-string">'Message'</span>
            });
            dialog.show();
            Titanium.App.Properties.btnEnLogin.touchEnabled = <span class="hljs-literal">true</span>;

        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">/********
             * SIDF Mobile Web Service
             ********/</span>
            Titanium.App.fireEvent(<span class="hljs-string">'closeWin'</span>);
            BusyLoading.show(topLevelWindow);
            url = <span class="hljs-string">'https://eservices.sidf.gov.sa/LoanInquiry_mobile/SIDFMobile.asmx'</span>;
            <span class="hljs-keyword">var</span> un = <span class="hljs-string">''</span>;
            <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({

                onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

                    <span class="hljs-keyword">var</span> obj = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
                    <span class="hljs-comment">//alert(obj.d);</span>
                    un = obj.d;
                    Titanium.App.Properties.setString(<span class="hljs-string">'usrnm'</span>, un);

                    <span class="hljs-keyword">if</span> (un === username) {


                        Titanium.App.Properties.setString(<span class="hljs-string">'username'</span>, username);
                        Titanium.App.Properties.setString(<span class="hljs-string">'pswd'</span>, password);

                        <span class="hljs-keyword">var</span> dataPaid = [];
                        dataPaid = dataTotalPaidLogin(Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>));

                        <span class="hljs-keyword">var</span> dataFuf = [];
                        dataFuf = dataFufFeeLogin(Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>));

                        <span class="hljs-keyword">var</span> dataPayment = [];
                        dataPayment = dataPaymentDateLogin(Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>));

                    Ti.App.Properties.count++;

                        (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-comment">//render appropriate components based on the platform and form factor</span>
                            <span class="hljs-keyword">var</span> osname = Ti.Platform.osname,
                                version = Ti.Platform.version,
                                height = Ti.Platform.displayCaps.platformHeight,
                                width = Ti.Platform.displayCaps.platformWidth;

                            <span class="hljs-comment">//considering tablets to have width over 720px and height over 600px - you can define your own</span>
                            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkTablet</span>(<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">var</span> platform = Ti.Platform.osname;

                                <span class="hljs-keyword">switch</span> (platform) {
                                <span class="hljs-keyword">case</span> <span class="hljs-string">'ipad'</span>:
                                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                                <span class="hljs-keyword">case</span> <span class="hljs-string">'android'</span>:
                                    <span class="hljs-keyword">var</span> psc = Ti.Platform.Android.physicalSizeCategory;
                                    <span class="hljs-keyword">var</span> tiAndroid = Ti.Platform.Android;
                                    <span class="hljs-keyword">return</span> psc === tiAndroid.PHYSICAL_SIZE_CATEGORY_LARGE || psc === tiAndroid.PHYSICAL_SIZE_CATEGORY_XLARGE;
                                <span class="hljs-keyword">default</span>:
                                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.min(Ti.Platform.displayCaps.platformHeight, Ti.Platform.displayCaps.platformWidth) &gt;= <span class="hljs-number">400</span>
                                }
                            }

                            <span class="hljs-keyword">var</span> isTablet = checkTablet();
                            <span class="hljs-built_in">console</span>.log(isTablet);

                            <span class="hljs-keyword">var</span> Window;
                            <span class="hljs-keyword">var</span> TabGroup = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/Navigation/TabGroupTablet'</span>);

                            <span class="hljs-keyword">if</span> (isTablet) {

                                Window = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/Navigation/TabGroupTablet'</span>);
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-comment">// Android uses platform-specific properties to create windows.</span>
                                <span class="hljs-comment">// All other platforms follow a similar UI pattern.</span>

                                Window = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/handheld/android/sidfwinAndroidServices'</span>);

                            }

                            <span class="hljs-keyword">var</span> TabGroup = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/Navigation/TabGroupTablet'</span>);

                            <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) {
                                <span class="hljs-keyword">new</span> TabGroup(Window).open({
                                    animated : <span class="hljs-literal">true</span>
                                });
                                sidfwinAndroidLogin.close();
                            } <span class="hljs-keyword">else</span> {
                                <span class="hljs-keyword">new</span> TabGroup(Window).open({
                                    activityEnterAnimation : Ti.Android.R.anim.slide_out_left,
                                    activityExitAnimation : Ti.Android.R.anim.side_out_right
                                });
                                sidfwinAndroidLogin.close();

                            }

                            BusyLoading.hide();

                        })();

                    } <span class="hljs-keyword">else</span> {
                        BusyLoading.hide();
                        txtUsername.focus();
                        Titanium.App.Properties.btnEnLogin.touchEnabled = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                            message : <span class="hljs-string">'Invalid Username Or password'</span>,
                            ok : <span class="hljs-string">'OK'</span>,
                            title : <span class="hljs-string">'Error'</span>
                        });

                        dialog.show();
                    };

                },
                onerror : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    BusyLoading.hide();
                    <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
                    Titanium.API.error(<span class="hljs-string">'Status: '</span> + <span class="hljs-keyword">this</span>.status);
                    Titanium.API.error(<span class="hljs-string">'ResponseText: '</span> + <span class="hljs-keyword">this</span>.responseText);
                    Titanium.API.error(<span class="hljs-string">'connectionType: '</span> + <span class="hljs-keyword">this</span>.connectionType);
                    Titanium.API.error(<span class="hljs-string">'location: '</span> + <span class="hljs-keyword">this</span>.location);
                    Titanium.App.Properties.btnEnLogin.touchEnabled = <span class="hljs-literal">true</span>;

                },
                ondatastream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>

                },
                onsendstream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
                },
                onreadystatechange : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-keyword">switch</span>(<span class="hljs-keyword">this</span>.readyState) {
                    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                        <span class="hljs-comment">// after HTTPClient declared, prior to open()</span>
                        <span class="hljs-comment">// though Ti won't actually report on this readyState</span>
                        Ti.API.info(<span class="hljs-string">'case 0, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                        <span class="hljs-comment">// open() has been called, now is the time to set headers</span>
                        Ti.API.info(<span class="hljs-string">'case 1, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                        <span class="hljs-comment">// headers received, xhr.status should be available now</span>
                        Ti.API.info(<span class="hljs-string">'case 2, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                        <span class="hljs-comment">// data is being received, onsendstream/ondatastream being called now</span>
                        Ti.API.info(<span class="hljs-string">'case 3, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                        <span class="hljs-comment">// done, onload or onerror should be called now</span>
                        Ti.API.info(<span class="hljs-string">'case 4, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    }

                    <span class="hljs-comment">//activityIndicator.hide();</span>

                },
                timeout : <span class="hljs-number">35000</span>
            });

            <span class="hljs-keyword">var</span> us = <span class="hljs-built_in">JSON</span>.stringify(txtUsername.value);
            <span class="hljs-keyword">var</span> pd = <span class="hljs-built_in">JSON</span>.stringify(txtPassword.value);

            xhr.open(<span class="hljs-string">'GET'</span>, url + <span class="hljs-string">'/login?username='</span> + us + <span class="hljs-string">'&amp;'</span> + <span class="hljs-string">'password='</span> + pd);
            xhr.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json; charset=utf-8"</span>);
            <span class="hljs-comment">//</span>
            <span class="hljs-keyword">try</span> {
                xhr.send();
            } <span class="hljs-keyword">catch</span>(e) {
                alert(<span class="hljs-string">"error =&gt;"</span> + e);
            }

            Ti.App.fireEvent(<span class="hljs-string">'itemSelected'</span>, {Id:<span class="hljs-number">1</span>});

        }

    });

    <span class="hljs-keyword">var</span> lblForgetPassowrd;
    lblForgetPassowrd = Titanium.UI.createLabel({
        name : <span class="hljs-string">'lblForgetPassowrd'</span>,
        autoCreate : <span class="hljs-literal">true</span>,
        color : <span class="hljs-string">'#0122fe'</span>,
        backgroundSelectedColor : <span class="hljs-string">'white'</span>,
        left : <span class="hljs-string">'36%'</span>,
        text : <span class="hljs-string">'Forget Your Password?'</span>,
        textAlign : Titanium.UI.TEXT_ALIGNMENT_CENTER,
        top : <span class="hljs-string">'80%'</span>,
        width : <span class="hljs-string">'30%'</span>,
    });

    <span class="hljs-comment">/********
     * Label Froget Password
     ********/</span>

    lblForgetPassowrd.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (Titanium.Network.networkType === Titanium.Network.NETWORK_NONE) {
            Titanium.API.info(<span class="hljs-string">' no connection '</span>);
            <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                message : <span class="hljs-string">'No Internet Connection '</span>,
                ok : <span class="hljs-string">'Ok'</span>,
                title : <span class="hljs-string">'Message'</span>
            });
            dialog.show();

        } <span class="hljs-keyword">else</span> {
            Ti.Platform.openURL(<span class="hljs-string">'https://eservices.sidf.gov.sa/LoanInquiry/UI/RecoverPass.aspx'</span>);
        }

    });

    <span class="hljs-comment">/********
     * Label Register
     ********/</span>
    <span class="hljs-keyword">var</span> lblRegister;
    lblRegister = Titanium.UI.createButton({

        name : <span class="hljs-string">'lblRegister'</span>,
        autoCreate : <span class="hljs-literal">true</span>,
        color : <span class="hljs-string">'#0501fd'</span>,
        font : {
            fontFamily : <span class="hljs-string">'Courier'</span>,
            fontSize : <span class="hljs-string">'15'</span>,
            fontStyle : <span class="hljs-string">'bold'</span>,
            fontWeight : <span class="hljs-string">'normal'</span>,
        },
        backgroundImage : <span class="hljs-string">'/images/Register-button.png'</span>,

        left : <span class="hljs-string">'44%'</span>,
        title : <span class="hljs-string">'Register'</span>,
        height : (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) ? <span class="hljs-string">'0.7cm'</span> : <span class="hljs-string">'6%'</span>,
        textAlign : Titanium.UI.TEXT_ALIGNMENT_CENTER,
        top : <span class="hljs-string">'85%'</span>,
        width : <span class="hljs-string">'15%'</span>,

    });

    lblRegister.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-comment">//Ti.Platform.openURL('https://eservices.sidf.gov.sa/Loanapplication/UI/ClientRegister.aspx');</span>
        <span class="hljs-comment">//lblRegister.color='orange';</span>

        <span class="hljs-keyword">if</span> (Titanium.Network.networkType === Titanium.Network.NETWORK_NONE) {
            Titanium.API.info(<span class="hljs-string">' no connection '</span>);
            <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                message : <span class="hljs-string">'?? ???? ???? ?? ??????? ????????? '</span>,
                ok : <span class="hljs-string">'?????'</span>,
                title : <span class="hljs-string">'?????'</span>
            });
            dialog.show();
        } <span class="hljs-keyword">else</span> {

            <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) {
                <span class="hljs-keyword">var</span> webview = Titanium.UI.createWebView({
                    url : <span class="hljs-string">'https://eservices.sidf.gov.sa/Loanapplication/UI/ClientRegister.aspx'</span>
                });
                <span class="hljs-keyword">var</span> <span class="hljs-built_in">window</span> = Titanium.UI.createWindow();
                <span class="hljs-built_in">window</span>.add(webview);
                <span class="hljs-comment">// window.open({</span>
                <span class="hljs-comment">// //modal : true,</span>
                <span class="hljs-comment">// fullscreen:true</span>
                <span class="hljs-comment">// });</span>

                <span class="hljs-keyword">var</span> leftNavButton = Ti.UI.createButton({
                    title : <span class="hljs-string">"Back"</span>
                });

                leftNavButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

                    <span class="hljs-keyword">if</span> (Ti.App.Properties.tab == <span class="hljs-literal">null</span>) {
                        <span class="hljs-comment">//Ti.App.Properties.tab.close({transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN});</span>
                        navGroup.close({
                            transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
                        });
                        sidfwinAndroidLogin.close({
                            transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
                        });
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">//    Ti.App.Properties.tab.close({transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN});</span>
                        navGroup.close({
                            transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
                        });
                        <span class="hljs-built_in">window</span>.close({
                            transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
                        });
                    }
                });

                <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'open'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-built_in">window</span>.leftNavButton = leftNavButton;
                    Titanium.App.Properties.btnEnLogin.touchEnabled = <span class="hljs-literal">true</span>;
                });

                <span class="hljs-comment">//create iOS specific NavGroup UI</span>
                <span class="hljs-keyword">var</span> navGroup = Ti.UI.iOS.createNavigationWindow({
                    <span class="hljs-built_in">window</span> : <span class="hljs-built_in">window</span>
                });

                navGroup.open();
            } <span class="hljs-keyword">else</span> {

                <span class="hljs-keyword">var</span> webview = Titanium.UI.createWebView({
                    url : <span class="hljs-string">'https://eservices.sidf.gov.sa/Loanapplication/UI/ClientRegister.aspx'</span>
                });
                <span class="hljs-keyword">var</span> <span class="hljs-built_in">window</span> = Titanium.UI.createWindow();
                <span class="hljs-built_in">window</span>.add(webview);
                <span class="hljs-built_in">window</span>.open({
                    modal : <span class="hljs-literal">true</span>
                });
            }
        }
    });

    <span class="hljs-keyword">var</span> View_1;
    View_1 = Titanium.UI.createView({
        name : <span class="hljs-string">'View_1'</span>,
        autoCreate : <span class="hljs-literal">true</span>,
        height : <span class="hljs-string">'100%'</span>,
        width : <span class="hljs-string">'100%'</span>,
        backgroundColor : <span class="hljs-string">'transpernt'</span>
    });
    <span class="hljs-keyword">var</span> sidfwinAndroidLogin = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> navGroup = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) {

        sidfwinAndroidLogin = Titanium.UI.createWindow({
            name : <span class="hljs-string">'sidfwinAndroidLogin'</span>,
            backgroundImage : <span class="hljs-string">'/images/Background.png'</span>,
            fullscreen : <span class="hljs-literal">true</span>,
            orientationModes : [Ti.UI.PORTRAIT]

        });

        <span class="hljs-keyword">var</span> leftNavButton = Ti.UI.createButton({
            title : <span class="hljs-string">"Back"</span>
        });

        leftNavButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

            sidfwinAndroidLogin.close({
                transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
            });
            navGroup.close({
                transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
            });
            <span class="hljs-comment">// if(Ti.App.Properties.tab!=null)</span>
            <span class="hljs-comment">// Ti.App.Properties.tab.close({transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN});</span>
            <span class="hljs-comment">// sidfwinAndroidLogin.setVisible(false);</span>
            <span class="hljs-comment">// navGroup.setVisible(false);</span>
        });

        sidfwinAndroidLogin.addEventListener(<span class="hljs-string">'open'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            sidfwinAndroidLogin.leftNavButton = leftNavButton;
            <span class="hljs-keyword">var</span> dataPaid = [];
            dataPaid = dataTotalPaidLogin(Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>));

            dataFufFeeLogin(Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>));

            dataPaymentDateLogin(Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>));

        });

        <span class="hljs-comment">//create iOS specific NavGroup UI</span>
        navGroup = Ti.UI.iOS.createNavigationWindow({
            <span class="hljs-built_in">window</span> : sidfwinAndroidLogin
        });

        sidfwinAndroidLogin.addEventListener(<span class="hljs-string">'close'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            Titanium.App.Properties.setString(<span class="hljs-string">'usrnm'</span>, un);

        });

    } <span class="hljs-keyword">else</span> {

        sidfwinAndroidLogin = Titanium.UI.createWindow({
            name : <span class="hljs-string">'sidfwinAndroidLogin'</span>,
            backgroundImage : <span class="hljs-string">'/images/Background.png'</span>,
            fullscreen : <span class="hljs-literal">true</span>,
            orientationModes : [Ti.UI.LANDSCAPE_LEFT]

        });

    }

    sidfwinAndroidLogin.addEventListener(<span class="hljs-string">'close'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        Titanium.App.Properties.setString(<span class="hljs-string">'usrnm'</span>, un);
        <span class="hljs-comment">//Ti.App.Properties.winTabServices.close();</span>
        <span class="hljs-comment">//Ti.App.Properties.tabServices.close();</span>
        <span class="hljs-comment">//Ti.App.fireEvent('closeServiceDetailView');</span>

    });

    sidfwinAndroidLogin.addEventListener(<span class="hljs-string">'android:back'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        Titanium.App.fireEvent(<span class="hljs-string">'closeWin'</span>);
        Ti.App.Properties.TabGroup.close();
        sidfwinAndroidLogin.close();
    });

    topLevelWindow = sidfwinAndroidLogin;

    <span class="hljs-comment">// Startup - GUI DO NOT TOUCH</span>
    View_2.add(ImageView_1);
    <span class="hljs-comment">//View_2.add(ImageView_2);</span>
    View_1.add(View_2);
    View_1.add(txtUsername);
    View_1.add(txtPassword);
    View_1.add(btnLogin);
    View_1.add(lblForgetPassowrd);
    View_1.add(lblRegister);
    sidfwinAndroidLogin.add(View_1);
    View_2.add(ImageView_profile);
    <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) {
        <span class="hljs-keyword">return</span> sidfwinAndroidLogin;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> sidfwinAndroidLogin;
    }
} <span class="hljs-keyword">else</span> {

    <span class="hljs-keyword">var</span> ImageView_2;
    ImageView_2 = Titanium.UI.createImageView({
        autoCreate : <span class="hljs-literal">true</span>,
        height : <span class="hljs-string">'40%'</span>,
        <span class="hljs-comment">//height : '10%',</span>
        left : <span class="hljs-string">'42%'</span>,
        right : <span class="hljs-string">'7%'</span>,
        top : <span class="hljs-string">'47%'</span>,
        width : <span class="hljs-string">'30%'</span>,
        image : <span class="hljs-string">'/images/Blue-profile-pic.png'</span>,
        width : <span class="hljs-string">'15%'</span>,
    });

    <span class="hljs-keyword">var</span> View_2;
    View_2 = Titanium.UI.createView({
        name : <span class="hljs-string">'View_2'</span>,
        autoCreate : <span class="hljs-literal">true</span>,
        height : <span class="hljs-string">'40%'</span>,
        left : <span class="hljs-string">'0%'</span>,
        top : <span class="hljs-string">'0%'</span>,
        width : <span class="hljs-string">'100%'</span>,
    });

    <span class="hljs-keyword">var</span> vw = Titanium.UI.createView({
        top : <span class="hljs-string">'0%'</span>,
        height : <span class="hljs-string">'0.7cm'</span>,
        width : <span class="hljs-string">'100%'</span>,
        backgroundColor : <span class="hljs-string">'#eaeff3'</span>,
        borderColor : <span class="hljs-string">'black'</span>
    });
    <span class="hljs-comment">//</span>
    <span class="hljs-keyword">var</span> button = Titanium.UI.createButton({
        bottom : <span class="hljs-string">'0'</span>,
        title : <span class="hljs-string">'????'</span>,
        left : <span class="hljs-string">'2%'</span>,
        font : {
            fontSize : <span class="hljs-number">20</span>
        }
    });
    button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        sidfwinAndroidLogin.close();
        <span class="hljs-comment">//alert('sd');</span>
    });

    vw.add(button);
    <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>)
        View_2.add(vw);

    <span class="hljs-comment">/********
     * Button Login
     ********/</span>
    <span class="hljs-keyword">var</span> btnLogin;
    btnLogin = Titanium.UI.createButton({
        name : <span class="hljs-string">'btnLogin'</span>,

        autoCreate : <span class="hljs-literal">true</span>,
        height : (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) ? <span class="hljs-string">'1cm'</span> : <span class="hljs-string">'8%'</span>,
        left : <span class="hljs-string">'30%'</span>,

        top : (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) ? <span class="hljs-string">'66%'</span> : <span class="hljs-string">'70%'</span>,
        width : <span class="hljs-string">'40%'</span>,
        backgroundImage : <span class="hljs-string">'/images/Log-in-un-selected-button.png'</span>,
        backgroundSelectedImage : <span class="hljs-string">'/images/Login-selected-button.png'</span>
    });

    Titanium.App.Properties.btnArLogin = btnLogin;

    <span class="hljs-keyword">var</span> un = <span class="hljs-string">''</span>;
    btnLogin.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-comment">//Ti.App.Properties.winTabServices.close();</span>
        Titanium.App.Properties.btnArLogin.touchEnabled = <span class="hljs-literal">false</span>;

        Ti.App.Properties.TabGroup.close();
        Titanium.App.fireEvent(<span class="hljs-string">'closeWin'</span>);
        <span class="hljs-keyword">var</span> username = txtUsername.value;
        <span class="hljs-keyword">var</span> password = txtPassword.value;

        <span class="hljs-keyword">if</span> (txtUsername.value == <span class="hljs-literal">null</span> || txtUsername.value == <span class="hljs-string">''</span>) {
            <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                message : <span class="hljs-string">'???? ??? ????????'</span>,
                ok : <span class="hljs-string">'?????'</span>,
                title : <span class="hljs-string">'?????'</span>
            });
            dialog.show();
            txtUsername.focus();
            Titanium.App.Properties.btnArLogin.touchEnabled = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">if</span> (txtPassword.value == <span class="hljs-literal">null</span> || txtPassword.value == <span class="hljs-string">''</span>) {
            <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                message : <span class="hljs-string">'???? ???? ?????? '</span>,
                ok : <span class="hljs-string">'?????'</span>,
                title : <span class="hljs-string">'?????'</span>
            });
            txtPassword.focus();
            dialog.show();

            Titanium.App.Properties.btnArLogin.touchEnabled = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">return</span>;
        }

        BusyLoading.show(topLevelWindow);
        <span class="hljs-comment">/********
         * SIDF Mobile Web Service
         ********/</span>
        url = <span class="hljs-string">'https://eservices.sidf.gov.sa/LoanInquiry_mobile/SIDFMobile.asmx'</span>;

        <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({
            onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

                <span class="hljs-keyword">var</span> obj = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
                <span class="hljs-comment">//alert(obj.d);</span>
                un = obj.d;

                <span class="hljs-keyword">if</span> (un === username) {

                    Titanium.App.Properties.setString(<span class="hljs-string">'usrnm'</span>, un);
                    <span class="hljs-comment">//1</span>
                    Titanium.App.Properties.setString(<span class="hljs-string">'username'</span>, username);
                    Titanium.App.Properties.setString(<span class="hljs-string">'pswd'</span>, password);

                    dataTotalPaidLogin(Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>));

                    dataFufFeeLogin(Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>));

                    dataPaymentDateLogin(Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'username'</span>), Titanium.App.Properties.getString(<span class="hljs-string">'pswd'</span>));

                    (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                        <span class="hljs-comment">//render appropriate components based on the platform and form factor</span>
                        <span class="hljs-keyword">var</span> osname = Ti.Platform.osname,
                            version = Ti.Platform.version,
                            height = Ti.Platform.displayCaps.platformHeight,
                            width = Ti.Platform.displayCaps.platformWidth;

                        <span class="hljs-comment">//considering tablets to have width over 720px and height over 600px - you can define your own</span>
                        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkTablet</span>(<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">var</span> platform = Ti.Platform.osname;

                            <span class="hljs-keyword">switch</span> (platform) {
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'ipad'</span>:
                                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">'android'</span>:
                                <span class="hljs-keyword">var</span> psc = Ti.Platform.Android.physicalSizeCategory;
                                <span class="hljs-keyword">var</span> tiAndroid = Ti.Platform.Android;
                                <span class="hljs-keyword">return</span> psc === tiAndroid.PHYSICAL_SIZE_CATEGORY_LARGE || psc === tiAndroid.PHYSICAL_SIZE_CATEGORY_XLARGE;
                            <span class="hljs-keyword">default</span>:
                                <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.min(Ti.Platform.displayCaps.platformHeight, Ti.Platform.displayCaps.platformWidth) &gt;= <span class="hljs-number">400</span>
                            }
                        }

                        <span class="hljs-keyword">var</span> isTablet = checkTablet();
                        <span class="hljs-built_in">console</span>.log(isTablet);

                        <span class="hljs-keyword">var</span> Window;
                        <span class="hljs-keyword">var</span> TabGroup = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/Navigation/TabGroupTablet'</span>);

                        <span class="hljs-keyword">if</span> (isTablet) {

                            Window = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/tablet/sidfwinAndroidServicesAr'</span>);
                        } <span class="hljs-keyword">else</span> {

                            Window = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/handheld/android/sidfwinAndroidServicesAr'</span>);

                        }

                        <span class="hljs-keyword">var</span> TabGroup = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/Navigation/TabGroupTablet'</span>);
                        <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> 
                        || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) {
                            <span class="hljs-keyword">new</span> TabGroup(Window).open();

                            sidfwinAndroidLogin.close();
                            Ti.App.Properties.login.close();
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">new</span> TabGroup(Window).open({
                                activityEnterAnimation : Ti.Android.R.anim.slide_out_left,
                                activityExitAnimation : Ti.Android.R.anim.side_out_right
                            });

                            sidfwinAndroidLogin.close();
                            Ti.App.Properties.login.close();
                        }
                        <span class="hljs-comment">//new TabGroup(Window).setActiveTab(2);</span>

                    })();

                    BusyLoading.hide();
                    Ti.App.fireEvent(<span class="hljs-string">'itemSelected'</span>, {Id:<span class="hljs-number">1</span>});
                } <span class="hljs-keyword">else</span> {
                    Titanium.App.Properties.btnArLogin.touchEnabled = <span class="hljs-literal">true</span>;
                    BusyLoading.hide();
                    <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                        message : <span class="hljs-string">'?? ???? ???? ?? ????? ?? ???? ??????'</span>,
                        ok : <span class="hljs-string">'?????'</span>,
                        title : <span class="hljs-string">'?????'</span>
                    });
                    <span class="hljs-comment">//Titanium.App.Properties.btnArLogin.touchEnabled=true;</span>
                    dialog.show();
                }

            },
            onerror : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                BusyLoading.hide();
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
                Titanium.API.error(<span class="hljs-string">'Status: '</span> + <span class="hljs-keyword">this</span>.status);
                Titanium.API.error(<span class="hljs-string">'ResponseText: '</span> + <span class="hljs-keyword">this</span>.responseText);
                Titanium.API.error(<span class="hljs-string">'connectionType: '</span> + <span class="hljs-keyword">this</span>.connectionType);
                Titanium.API.error(<span class="hljs-string">'location: '</span> + <span class="hljs-keyword">this</span>.location);
                Titanium.App.Properties.btnEnLogin.touchEnabled = <span class="hljs-literal">true</span>;

            },
            ondatastream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>

            },
            onsendstream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
            },
            onreadystatechange : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">switch</span>(<span class="hljs-keyword">this</span>.readyState) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    <span class="hljs-comment">// after HTTPClient declared, prior to open()</span>
                    <span class="hljs-comment">// though Ti won't actually report on this readyState</span>
                    Ti.API.info(<span class="hljs-string">'case 0, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    <span class="hljs-comment">// open() has been called, now is the time to set headers</span>
                    Ti.API.info(<span class="hljs-string">'case 1, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    <span class="hljs-comment">// headers received, xhr.status should be available now</span>
                    Ti.API.info(<span class="hljs-string">'case 2, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                    <span class="hljs-comment">// data is being received, onsendstream/ondatastream being called now</span>
                    Ti.API.info(<span class="hljs-string">'case 3, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                    <span class="hljs-comment">// done, onload or onerror should be called now</span>
                    Ti.API.info(<span class="hljs-string">'case 4, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                    <span class="hljs-keyword">break</span>;
                }

                <span class="hljs-comment">//activityIndicator.hide();</span>

            },
            timeout : <span class="hljs-number">35000</span>
        });

        <span class="hljs-keyword">var</span> us = <span class="hljs-built_in">JSON</span>.stringify(txtUsername.value);
        <span class="hljs-keyword">var</span> pd = <span class="hljs-built_in">JSON</span>.stringify(txtPassword.value);

        xhr.open(<span class="hljs-string">'GET'</span>, url + <span class="hljs-string">'/login?username='</span> + us + <span class="hljs-string">'&amp;'</span> + <span class="hljs-string">'password='</span> + pd);
        xhr.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json; charset=utf-8"</span>);
        <span class="hljs-comment">//</span>
        <span class="hljs-keyword">try</span> {
            xhr.send();
        } <span class="hljs-keyword">catch</span>(e) {
            alert(<span class="hljs-string">"error =&gt;"</span> + e);
        }

    });

    <span class="hljs-keyword">var</span> lblForgetPassowrd;
    lblForgetPassowrd = Titanium.UI.createLabel({
        name : <span class="hljs-string">'lblForgetPassowrd'</span>,
        autoCreate : <span class="hljs-literal">true</span>,
        color : <span class="hljs-string">'blue'</span>,
        height : <span class="hljs-string">'9%'</span>,
        font : {
            fontSize : <span class="hljs-string">'15'</span>,
            fontWeight : <span class="hljs-string">'bold'</span>
        },
        text : <span class="hljs-string">'???? ??????? ????? ?'</span>,
        left : <span class="hljs-string">'36%'</span>,
        <span class="hljs-comment">//backgroundImage:'/images/Forget-passward.png',</span>
        textAlign : Titanium.UI.TEXT_ALIGNMENT_CENTER,
        top : <span class="hljs-string">'80%'</span>,
        width : <span class="hljs-string">'30%'</span>,
    });

    <span class="hljs-comment">/********
     * Label Froget Password
     ********/</span>

    lblForgetPassowrd.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (Titanium.Network.networkType === Titanium.Network.NETWORK_NONE) {
            Titanium.API.info(<span class="hljs-string">' no connection '</span>);
            <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                message : <span class="hljs-string">'?? ???? ???? ?? ??????? ????????? '</span>,
                ok : <span class="hljs-string">'?????'</span>,
                title : <span class="hljs-string">'?????'</span>
            });
            dialog.show();

        } <span class="hljs-keyword">else</span> {
            Ti.Platform.openURL(<span class="hljs-string">'https://eservices.sidf.gov.sa/BankInquiry/UI/Public/ResetPassword.aspx'</span>);
        }

    });

    <span class="hljs-comment">/********
     * Label Register
     ********/</span>
    <span class="hljs-keyword">var</span> lblRegister;
    lblRegister = Titanium.UI.createLabel({
        name : <span class="hljs-string">'lblRegister'</span>,
        autoCreate : <span class="hljs-literal">true</span>,
        color : <span class="hljs-string">'#0501fd'</span>,

        height : (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) ? <span class="hljs-string">'0.7cm'</span> : <span class="hljs-string">'6%'</span>,
        backgroundImage : <span class="hljs-string">'/images/New-register-unselected-button.png'</span>,
        backgroundSelectedImage : <span class="hljs-string">'/images/New-register-selected-button.png'</span>,
        left : <span class="hljs-string">'44%'</span>,

        textAlign : Titanium.UI.TEXT_ALIGNMENT_CENTER,
        top : <span class="hljs-string">'89%'</span>,
        width : <span class="hljs-string">'15%'</span>,
    });

    lblRegister.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

        <span class="hljs-keyword">if</span> (Titanium.Network.networkType === Titanium.Network.NETWORK_NONE) {
            Titanium.API.info(<span class="hljs-string">' no connection '</span>);
            <span class="hljs-keyword">var</span> dialog = Ti.UI.createAlertDialog({
                message : <span class="hljs-string">'???? ?? ??????? ????????? '</span>,
                ok : <span class="hljs-string">'?????'</span>,
                title : <span class="hljs-string">'???'</span>,

            });
            dialog.show();
        } <span class="hljs-keyword">else</span> {

            <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) {
                <span class="hljs-keyword">var</span> webview = Titanium.UI.createWebView({
                    url : <span class="hljs-string">'https://eservices.sidf.gov.sa/Loanapplication/UI/ClientRegister.aspx'</span>
                });
                <span class="hljs-keyword">var</span> <span class="hljs-built_in">window</span> = Titanium.UI.createWindow();
                <span class="hljs-built_in">window</span>.add(webview);

                <span class="hljs-keyword">var</span> leftNavButton = Ti.UI.createButton({
                    title : <span class="hljs-string">"Back"</span>
                });

                leftNavButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

                    <span class="hljs-keyword">if</span> (Ti.App.Properties.tab == <span class="hljs-literal">null</span>) {
                        <span class="hljs-comment">//Ti.App.Properties.tab.close({transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN});</span>
                        navGroup.close({
                            transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
                        });
                        sidfwinAndroidLogin.close({
                            transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
                        });
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">//    Ti.App.Properties.tab.close({transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN});</span>
                        navGroup.close({
                            transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
                        });
                        <span class="hljs-built_in">window</span>.close({
                            transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
                        });
                    }
                });

                <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'open'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-built_in">window</span>.leftNavButton = leftNavButton;
                    Titanium.App.Properties.btnArLogin.touchEnabled = <span class="hljs-literal">true</span>;
                });

                <span class="hljs-comment">//create iOS specific NavGroup UI</span>
                <span class="hljs-keyword">var</span> navGroup = Ti.UI.iOS.createNavigationWindow({
                    <span class="hljs-built_in">window</span> : <span class="hljs-built_in">window</span>
                });

                navGroup.open();
            } <span class="hljs-keyword">else</span> {

                <span class="hljs-keyword">var</span> webview = Titanium.UI.createWebView({
                    url : <span class="hljs-string">'https://eservices.sidf.gov.sa/Loanapplication/UI/ClientRegister.aspx'</span>
                });
                <span class="hljs-keyword">var</span> <span class="hljs-built_in">window</span> = Titanium.UI.createWindow();
                <span class="hljs-built_in">window</span>.add(webview);
                <span class="hljs-built_in">window</span>.open({
                    modal : <span class="hljs-literal">true</span>
                });
            }
        }
    });

    <span class="hljs-keyword">var</span> View_1;
    View_1 = Titanium.UI.createView({
        name : <span class="hljs-string">'View_1'</span>,
        autoCreate : <span class="hljs-literal">true</span>,
        height : <span class="hljs-string">'100%'</span>,
        width : <span class="hljs-string">'100%'</span>,
        backgroundColor : <span class="hljs-string">'transpernt'</span>
    });

    <span class="hljs-keyword">var</span> sidfwinAndroidLogin = <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) {

        sidfwinAndroidLogin = Titanium.UI.createWindow({
            name : <span class="hljs-string">'sidfwinAndroidLogin'</span>,
            backgroundImage : <span class="hljs-string">'/images/Background.png'</span>,
            fullscreen : <span class="hljs-literal">true</span>,
            orientationModes : [Ti.UI.PORTRAIT]

        });

        Ti.App.Properties.login = sidfwinAndroidLogin;

        <span class="hljs-keyword">var</span> leftNavButton = Ti.UI.createButton({
            title : <span class="hljs-string">"????"</span>
        });

        leftNavButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

            sidfwinAndroidLogin.close({
                transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
            });
            navGroup.close({
                transition : Ti.UI.iPhone.AnimationStyle.CURL_DOWN
            });

        });

        sidfwinAndroidLogin.addEventListener(<span class="hljs-string">'open'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            sidfwinAndroidLogin.leftNavButton = leftNavButton;

        });
        <span class="hljs-comment">//create iOS specific NavGroup UI</span>
        navGroup = Ti.UI.iOS.createNavigationWindow({
            <span class="hljs-built_in">window</span> : sidfwinAndroidLogin
        });
    } <span class="hljs-keyword">else</span> {

        sidfwinAndroidLogin = Titanium.UI.createWindow({
            name : <span class="hljs-string">'sidfwinAndroidLogin'</span>,
            backgroundImage : <span class="hljs-string">'/images/Background.png'</span>,
            fullscreen : <span class="hljs-literal">true</span>,
            orientationModes : [Ti.UI.LANDSCAPE_LEFT, Ti.UI.LANDSCAPE_RIGHT]

        });

        Ti.App.Properties.login = sidfwinAndroidLogin;

    }
    topLevelWindow = sidfwinAndroidLogin;

    sidfwinAndroidLogin.addEventListener(<span class="hljs-string">'close'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        Titanium.App.Properties.setString(<span class="hljs-string">'usrnm'</span>, un);
    });

    sidfwinAndroidLogin.addEventListener(<span class="hljs-string">'android:back'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        Titanium.App.fireEvent(<span class="hljs-string">'closeWin'</span>);
        Ti.App.Properties.TabGroup.close();
        sidfwinAndroidLogin.close();
    });

    View_2.add(ImageView_1);
    View_2.add(ImageView_2);
    View_1.add(View_2);
    View_1.add(txtUsername);
    View_1.add(txtPassword);
    View_1.add(btnLogin);
    View_1.add(lblForgetPassowrd);
    View_1.add(lblRegister);
    sidfwinAndroidLogin.add(View_1);

    <span class="hljs-keyword">if</span> (Titanium.Platform.osname == <span class="hljs-string">'ipad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad'</span> || Titanium.Platform.osname == <span class="hljs-string">'iPad 2'</span> || Titanium.Platform.osname == <span class="hljs-string">'x86_64'</span>) {
        <span class="hljs-keyword">return</span> sidfwinAndroidLogin;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> sidfwinAndroidLogin;
    }
}
</code></pre><p>};<br>module.exports = sidfwinAndroidLogin;</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 13th 2015, 2:54:38 pm">February 13th 2015</span>
								by <span class='authorname'>Hussein Elganzory</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>service window</p>
<p>&#x2F;&#x2F;resetStaticValues();<br>        &#x2F;&#x2F;topLevelWindow = mainView;<br>        var scrollView = Ti.UI.createScrollView({<br>            contentWidth : &#39;auto&#39;,<br>            contentHeight : &#39;auto&#39;,<br>            layout : &#39;vertical&#39;,<br>            showVerticalScrollIndicator : true,<br>            height : &quot;70%&quot;,<br>            width : &#39;100%&#39;</p>
<pre><code class="hljs">    });

    Titanium.App.Properties.scroll = scrollView;

<span class="hljs-comment">//    if (Titanium.App.Properties.getString('usrnm') !== null) {</span>
        <span class="hljs-comment">//alert(Titanium.App.Properties.getList('paid').length);</span>

        Titanium.App.fireEvent(<span class="hljs-string">'addpaid'</span>);
        <span class="hljs-keyword">if</span> (Titanium.App.Properties.getList(<span class="hljs-string">'paid'</span>) !== <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">//if (Titanium.App.paid !== null) {</span>
            <span class="hljs-comment">//    alert(Titanium.App.Properties.getList('paid'));</span>
            var dataTotalPaid = [];
            dataTotalPaid = Titanium.App.Properties.getList(<span class="hljs-string">'paid'</span>);
            <span class="hljs-comment">//alert(Titanium.App.Properties.getList('paid').length);</span>
            var pastDueInstallmentSummary = [];
            <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; dataTotalPaid.length; i++) {

                pastDueInstallmentSummary.push({
                    <span class="hljs-string">loanNumber :</span> (dataTotalPaid[i].loanNO),
                    <span class="hljs-string">totalPastDues :</span> (dataTotalPaid[i].TotalPaidPastDue)
                });
            }

            var pastDueInstallmentSummaryTable = createTableView(pastDueInstallmentSummary);

            var pastDueInstallmentSummaryTableContainer = createTableWithHeader({
                <span class="hljs-string">tableView :</span> pastDueInstallmentSummaryTable,
                <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
                <span class="hljs-string">nextRepaymentAmount :</span> <span class="hljs-literal">false</span>
            });

            pastDueTableRef = pastDueInstallmentSummaryTableContainer;
            inflateTables(scrollView);
            dataTotalPaid = <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">else</span> {

            var dataTotalPaid = [<span class="hljs-string">"None"</span>];
            <span class="hljs-comment">//dataTotalPaid = Titanium.App.Properties.getList('paid');</span>
            <span class="hljs-comment">//alert(Titanium.App.Properties.getList('paid').length);</span>
            var pastDueInstallmentSummary = [];
            <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; dataTotalPaid.length; i++) {

                pastDueInstallmentSummary.push({
                    <span class="hljs-string">loanNumber :</span> (<span class="hljs-string">"None"</span>),
                    <span class="hljs-string">totalPastDues :</span> (<span class="hljs-string">"None"</span>)
                });
            }

            var pastDueInstallmentSummaryTable = createTableView(pastDueInstallmentSummary);

            var pastDueInstallmentSummaryTableContainer = createTableWithHeader({
                <span class="hljs-string">tableView :</span> pastDueInstallmentSummaryTable,
                <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
                <span class="hljs-string">nextRepaymentAmount :</span> <span class="hljs-literal">false</span>
            });

            pastDueTableRef = pastDueInstallmentSummaryTableContainer;
            inflateTables(scrollView);

        }

        <span class="hljs-keyword">if</span> (Titanium.App.Properties.getList(<span class="hljs-string">'fuf'</span>) !== <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">//if (Titanium.App.fuf !== null) {</span>
            var dataFufFeeBlnc = [];
            dataFufFeeBlnc = Titanium.App.Properties.getList(<span class="hljs-string">'fuf'</span>);

            var followUpFees = [];
            <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; dataFufFeeBlnc.length; i++) {
                followUpFees.push({
                    <span class="hljs-string">loanNumber :</span> <span class="hljs-string">''</span> + (dataFufFeeBlnc[i].loanNo),
                    <span class="hljs-string">totalPastDues :</span> <span class="hljs-string">''</span> + (dataFufFeeBlnc[i].FufFeeBlnc)
                });
            }

            var followUpFeesTable = createTableView(followUpFees);
            var followUpFeesTableContainer = createTableWithHeader({
                <span class="hljs-string">tableView :</span> followUpFeesTable,
                <span class="hljs-string">bottom :</span> <span class="hljs-string">'40%'</span>,
                <span class="hljs-string">nextRepaymentAmount :</span> <span class="hljs-literal">false</span>,

            });

            followUpFeesTableRef = followUpFeesTableContainer;

            inflateTables(scrollView);
            dataFufFeeBlnc = <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">else</span> {
            var dataFufFeeBlnc = [<span class="hljs-string">"None"</span>];
            <span class="hljs-comment">//dataFufFeeBlnc = Titanium.App.Properties.getList('fuf');</span>

            var followUpFees = [];
            <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; dataFufFeeBlnc.length; i++) {
                followUpFees.push({
                    <span class="hljs-string">loanNumber :</span> <span class="hljs-string">"None"</span>,
                    <span class="hljs-string">totalPastDues :</span> <span class="hljs-string">"None"</span>
                });
            }

            var followUpFeesTable = createTableView(followUpFees);
            var followUpFeesTableContainer = createTableWithHeader({
                <span class="hljs-string">tableView :</span> followUpFeesTable,
                <span class="hljs-string">bottom :</span> <span class="hljs-string">'40%'</span>,
                <span class="hljs-string">nextRepaymentAmount :</span> <span class="hljs-literal">false</span>,

            });

            followUpFeesTableRef = followUpFeesTableContainer;

            inflateTables(scrollView);
            dataFufFeeBlnc = <span class="hljs-literal">null</span>;
        }

        <span class="hljs-keyword">if</span> (Titanium.App.Properties.getList(<span class="hljs-string">'payment'</span>) !== <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">//if (Titanium.App.payment !== null) {</span>
            var dataPaymentDate = [];
            dataPaymentDate = Titanium.App.Properties.getList(<span class="hljs-string">'payment'</span>);

            var nextRepayment = [];
            <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; dataPaymentDate.length; i++) {
                nextRepayment.push({
                    <span class="hljs-string">nextRepaymentAmout :</span> <span class="hljs-string">''</span> + dataPaymentDate[i].installed_Amount,
                    <span class="hljs-string">loanNumber :</span> <span class="hljs-string">''</span> + (dataPaymentDate[i].loanNO),
                    <span class="hljs-string">totalPastDues :</span> <span class="hljs-string">''</span> + (dataPaymentDate[i].installed_date)
                });
            }

            var nextRepaymentTable = createTableView(nextRepayment);
            var nextRepaymentTableContainer = createTableWithHeader({
                <span class="hljs-string">tableView :</span> nextRepaymentTable,
                <span class="hljs-string">bottom :</span> <span class="hljs-string">'30%'</span>,
                <span class="hljs-string">nextRepaymentAmount :</span> <span class="hljs-literal">true</span>
            });

            nextRepaymentTableRef = nextRepaymentTableContainer;
            inflateTables(scrollView);

            dataPaymentDate = <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">else</span> {
            var dataPaymentDate = [<span class="hljs-string">"None"</span>];
            <span class="hljs-comment">//dataPaymentDate = Titanium.App.Properties.getList('payment');</span>

            var nextRepayment = [];
            <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; dataPaymentDate.length; i++) {
                nextRepayment.push({
                    <span class="hljs-string">nextRepaymentAmout :</span> <span class="hljs-string">"None"</span>,
                    <span class="hljs-string">loanNumber :</span> <span class="hljs-string">"None"</span>,
                    <span class="hljs-string">totalPastDues :</span> <span class="hljs-string">"None"</span>
                });
            }

            var nextRepaymentTable = createTableView(nextRepayment);
            var nextRepaymentTableContainer = createTableWithHeader({
                <span class="hljs-string">tableView :</span> nextRepaymentTable,
                <span class="hljs-string">bottom :</span> <span class="hljs-string">'30%'</span>,
                <span class="hljs-string">nextRepaymentAmount :</span> <span class="hljs-literal">true</span>
            });

            nextRepaymentTableRef = nextRepaymentTableContainer;
            inflateTables(scrollView);

            dataPaymentDate = <span class="hljs-literal">null</span>;
        }
<span class="hljs-comment">//    }</span>
    <span class="hljs-keyword">return</span> scrollView;
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="February 13th 2015, 2:58:52 pm">February 13th 2015</span>
								by <span class='authorname'>Hussein Elganzory</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Acting as the moderator here;</p>
<p>You were asked for a code example, however you have provided too much code and not focussed on ONLY the specific part anyone offering help needs to know about.</p>
<p>Please try again and provide a much smaller snippet of the specific area of code related to the xhr topic only.  When you do make sure you use the correct code insert tags so it appears correctly formatted.</p>
<pre><code class="hljs"><span class="hljs-comment">// it should</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">look</span><span class="hljs-params">()</span> </span>{
   alert(<span class="hljs-string">'like this'</span>);
}
</code></pre><p>Instructions are available on the markdown editor tool bar - just click the code link to see.</p>
<p>I am going to delete your &quot;answer&quot; which you had also provided in an attempt to provide code - it failed as this also had way too much code inside.</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 13th 2015, 3:26:39 pm">February 13th 2015</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dataTotalPaidLogin</span>(<span class="hljs-params">un, username, password</span>) </span>{
        url = <span class="hljs-string">'https://eservices.sidf.gov.sa/LoanInquiry_mobile/SIDFMobile.asmx'</span>;
        <span class="hljs-keyword">var</span> dataTotalPaidar = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
        <span class="hljs-comment">//dataTotalPaidar = [];</span>
        <span class="hljs-comment">// var un = Titanium.App.Properties.getString('usrnm');</span>
        <span class="hljs-comment">// var username = Titanium.App.Properties.getString('username');</span>
        <span class="hljs-comment">// var password = Titanium.App.Properties.getString('pswd');</span>
        <span class="hljs-keyword">if</span> (un === username) {
            <span class="hljs-comment">//    resetStaticValues();</span>
            <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({

                onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

                    un = Titanium.App.Properties.getString(<span class="hljs-string">'usrnm'</span>);
                    <span class="hljs-keyword">var</span> str = <span class="hljs-keyword">this</span>.responseText;
                    <span class="hljs-comment">//alert(str);</span>
                    <span class="hljs-keyword">var</span> finalData = str.replace(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">""</span>);
                    <span class="hljs-comment">//    alert(str);</span>
                    <span class="hljs-keyword">var</span> newStr = finalData.slice(<span class="hljs-number">6</span>, finalData.length - <span class="hljs-number">3</span>);
                    <span class="hljs-comment">//    alert(newStr);</span>
                    <span class="hljs-keyword">if</span> (newStr !== <span class="hljs-string">' ]'</span>) {

                        <span class="hljs-comment">//Slice String</span>
Ti.App.Properties.count++;
                        dataTotalPaidar = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-string">''</span> + newStr + <span class="hljs-string">''</span>);

                        <span class="hljs-keyword">if</span> (dataTotalPaidar !== <span class="hljs-literal">null</span> || dataTotalPaidar === <span class="hljs-string">'undfined'</span>)
                            callbackpaid(dataTotalPaidar);
                    }


                },
                onerror : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
                    Titanium.API.error(<span class="hljs-string">'Status: '</span> + <span class="hljs-keyword">this</span>.status);
                    Titanium.API.error(<span class="hljs-string">'ResponseText: '</span> + <span class="hljs-keyword">this</span>.responseText);
                    Titanium.API.error(<span class="hljs-string">'connectionType: '</span> + <span class="hljs-keyword">this</span>.connectionType);
                    Titanium.API.error(<span class="hljs-string">'location: '</span> + <span class="hljs-keyword">this</span>.location);

                },
                ondatastream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>

                },
                onsendstream : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-comment">//un=JSON.parse(this.responseText);</span>
                },
                onreadystatechange : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-keyword">switch</span>(<span class="hljs-keyword">this</span>.readyState) {
                    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                        <span class="hljs-comment">// after HTTPClient declared, prior to open()</span>
                        <span class="hljs-comment">// though Ti won't actually report on this readyState</span>
                        Ti.API.info(<span class="hljs-string">'case 0, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                        <span class="hljs-comment">// open() has been called, now is the time to set headers</span>
                        Ti.API.info(<span class="hljs-string">'case 1, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                        <span class="hljs-comment">// headers received, xhr.status should be available now</span>
                        Ti.API.info(<span class="hljs-string">'case 2, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                        <span class="hljs-comment">// data is being received, onsendstream/ondatastream being called now</span>
                        Ti.API.info(<span class="hljs-string">'case 3, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                        <span class="hljs-comment">// done, onload or onerror should be called now</span>
                        Ti.API.info(<span class="hljs-string">'case 4, readyState = '</span> + <span class="hljs-keyword">this</span>.readyState);
                        <span class="hljs-keyword">break</span>;
                    }

                },
                timeout : <span class="hljs-number">35000</span>
            });
            <span class="hljs-comment">//</span>
            <span class="hljs-keyword">var</span> us = <span class="hljs-built_in">JSON</span>.stringify(username);
            <span class="hljs-keyword">var</span> pd = <span class="hljs-built_in">JSON</span>.stringify(password);
            <span class="hljs-comment">//</span>
            xhr.open(<span class="hljs-string">'GET'</span>, url + <span class="hljs-string">'/totalPaidPastDue?username='</span> + us + <span class="hljs-string">'&amp;'</span> + <span class="hljs-string">'password='</span> + pd);
            xhr.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json; charset=utf-8"</span>);
            <span class="hljs-comment">//</span>
            xhr.send();
            <span class="hljs-comment">//BusyLoading.hide();</span>
            <span class="hljs-keyword">return</span> dataTotalPaidar;
        }
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="February 13th 2015, 4:58:10 pm">February 13th 2015</span>
								by <span class='authorname'>Hussein Elganzory</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-285851">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>This code has so many issues I will not be detailing all of them, but you really need to go away and rethink what you have written and how.  You have so many assumptions and misunderstandings of how things work - it makes the whole thing very messy and clearly fails.</p>
<p>There are two obvious issues that might move you along - however you MUST go and read up on xhr, callbacks async and basically anything to do with network calls as this code appears to have been cut&#x2F;copy&#x2F;pasted rather than written with any real design or direction.</p>
<p>This will never work as xhr is meant to be async code - the results will appear when they are gained NOT when your function has terminated.</p>
<pre><code class="hljs"><span class="hljs-comment">// pointless</span>
<span class="hljs-keyword">return</span> dataTotalPaidar;
</code></pre><p>This part was better as at least you gave it a callback</p>
<pre><code class="hljs">callbackpaid<span class="hljs-list">(<span class="hljs-keyword">dataTotalPaidar</span>)</span><span class="hljs-comment">;</span>
</code></pre><p>But you pass it to a function that contains no actions beyond storing the data.</p>
<p>If you want to create something that sends data to an api and then the interface or choice of where to go next is based on the response - you have to wait for the response callback and then update the display or choice when it is processed.  You are not doing this as I have mentioned, you callback code is the place to start - but you need to learn to trace the flow of the code you have written - once you do it will be obvious.</p>
<p>You should also learn how Properties work as this line is just wrong;</p>
<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.App</span><span class="hljs-class">.Properties</span><span class="hljs-class">.count</span>++;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 15th 2015, 10:12:53 am">February 15th 2015</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/180840/return-xhr-response-as-soon-as-possible.html#answer-285851" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>how to make window not open until all webserivce return data</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2015, 9:20:14 am">February 17th 2015</span>
											by <span class='authorname'>Hussein Elganzory</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you are opening a window to see the results of this information wait until the callback is activated and then open the window.  If the window is already open then add a progress indicator to show something is happening and hide (or cover) anything already displayed.  remove the progress indicator once the callback has succeeded or any errors occurred.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2015, 9:31:10 am">February 17th 2015</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
