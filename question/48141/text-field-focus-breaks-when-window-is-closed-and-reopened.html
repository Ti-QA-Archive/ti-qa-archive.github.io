<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Text Field Focus Breaks When Window is Closed and Reopened » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Text Field Focus Breaks When Window is Closed and Reopened</h1>
		</header>
		<section>
			<p>I was silently hoping this would get fixed by 1.4 but it didn&#39;t. I don&#39;t usually bother submitting bug reports anymore because they get no attention but I guess 50k &#39;active&#39; developers didn&#39;t see this one…or something.</p>
<p>This is reproducible in two apps that make use of textField.focus().</p>
<p>Create a window with a text field in it.<br>Slap a &#39;focus&#39; or &#39;open&#39; event listener on the window that forces focus on the testField.<br>Open this window.</p>
<p>The first time, the text field will have focus and show the keyboard.</p>
<p>Close the window.</p>
<p>Open the window.</p>
<p>The second time, the text field will ignore focus.</p>
<p>The event listener definitely fires. Focus simply gets ignored. I even went so far as to add a button that calls focus() on the text field…tapping the button does nothing.</p>
<p>At this point, it is impossible to programatically give focus to the text field…the only way is to manually tap the text field. A tap on the text field will give it focus and bring up the keyboard…but nothing else will.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 29th 2010, 10:51:05 pm">July 29th 2010</span>
				by <span class='authorname'>Marc Boucher</span>
			</div>

			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-93751">
				
						<section>
							<p>Put a small delay between the focus of the textField and the opening of the window.</p>
<pre><code class="hljs">the_win.addEventListener(<span class="hljs-string">'open'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{<span class="hljs-title">the_text_field</span>.<span class="hljs-title">focus</span><span class="hljs-params">()</span>} ,  50 );</span>
})
</code></pre><p>This worked for me on an iPad popover that had a textarea in it.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 30th 2010, 8:45:03 am">July 30th 2010</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/48141/text-field-focus-breaks-when-window-is-closed-and-reopened.html#answer-93751" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Delay or no delay, it doesn&#39;t work…when the window is closed, and this same window is reopened, focus() just doesn&#39;t work. It doesn&#39;t work with zero delay…it doesn&#39;t work with a delay…it doesn&#39;t work if you call in 2000 times in a loop, it doesn&#39;t work if you call it in a click event on a button.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 31st 2010, 2:32:54 pm">July 31st 2010</span>
											by <span class='authorname'>Marc Boucher</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-94751">
				
						<section>
							<p>In fact, there&#39;s a number of things that simply stopped working between 1.3.2 (the 1.4 RC1 release) and 1.4. How the crap does a &#39;release candidate&#39; change so much as to break things? It&#39;s a release candidate!</p>
<p>One thing&#39;s for sure, the Appcelerator guys keep me on my toes, constantly rewriting code to circumvent new SDK bugs. Unfortunately, this sometimes involves less than adequate solutions which forces me to rewrite when (if) the bug is fixed in later versions.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 1st 2010, 10:13:12 pm">August 1st 2010</span>
								by <span class='authorname'>Marc Boucher</span><br>
								<a class="icon-bg icon-link" href="question/48141/text-field-focus-breaks-when-window-is-closed-and-reopened.html#answer-94751" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-94771">
				
						<section>
							<p>Maybe the 50k active developers didn&#39;t see this one, because it&#39;s not happening to them? Could be easier to troubleshoot if you posted a piece of code that reproduces the bug :)</p>
<p>How are you creating the new window, is it running in the same context or in a separate .js file? Do you use a tab group, navigation group?</p>
<p>I created a small sample to try and reproduce the bug, but the text field focuses reliably every time, no matter how many times I close and reopen the window.</p>
<p>I&#39;m using SDK 4.0.1, tested on Titanium 1.4.0 and 1.4.1 continuous build.</p>
<p>Code: <a href="http:&#x2F;&#x2F;www.pastie.org&#x2F;1070547">app.js</a>, <a href="http:&#x2F;&#x2F;www.pastie.org&#x2F;1070548">newWindow.js</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 2nd 2010, 4:27:33 am">August 2nd 2010</span>
								by <span class='authorname'>Goran Skledar</span><br>
								<a class="icon-bg icon-link" href="question/48141/text-field-focus-breaks-when-window-is-closed-and-reopened.html#answer-94771" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p><em>sigh</em></p>
<p>var window = Titanium.UI.currentWindow;<br>var button = Titanium.UI.createButton({top:0,left:0,height:50,width:150,title:&#39;Open&#39;});<br>button.addEventListener(&#39;click&#39;,function() {<br>    window2.open();<br>});<br>window.add(button);</p>
<p>var window2 = Titanium.UI.createWindow();<br>var button2 = Titanium.UI.createButton({top:0,left:0,height:50,width:150,title:&#39;Close&#39;});<br>button2.addEventListener(&#39;click&#39;,function() {<br>    window2.close();<br>});<br>window2.add(button2);<br>var textField = Titanium.UI.createTextField({top:50,left:0,height:50,width:150});<br>window2.addEventListener(&#39;focus&#39;,function() {<br>    textField.focus();<br>});<br>window2.add(textField);</p>
<p>It doesn&#39;t get any simpler than this code…this code will work on 1.3.2 and early and not in 1.4 or later (1.4.1 builds). </p>
<p>focus() works the first time the window is opened and is broken on any other subsequent open. Obviously closing the window is doing something weird.</p>
<p>This bug&#x2F;problem happens when run in &#39;the same context&#39; (as my snippet shows)…but also happens when running in separate .js files (as my apps are coded). It happens if you put it on a timer.</p>
<p>It happens any time focus is programatically called.</p>
<p>I call bullcrap on anyone that says it works…even on a timer. Anyone copy and paste this simple code and witness 1.4 and 1.4.1 break under what is basic programming.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 2nd 2010, 8:55:56 am">August 2nd 2010</span>
											by <span class='authorname'>Marc Boucher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>BTW, now it&#39;s your turn to show your snippet that supposedly works.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 2nd 2010, 8:57:44 am">August 2nd 2010</span>
											by <span class='authorname'>Marc Boucher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have the same problem, very time update the sdk, it took a lot of time to debug and change the code, and many crash without any error information.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 2nd 2010, 10:36:26 am">August 2nd 2010</span>
											by <span class='authorname'>lan sheng</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Goran…let&#39;s go…show us something that works that isn&#39;t cheating – like creating a new window each time you click on the &#39;Open&#39; button (of course this will work…focus() works only the first time a window is opened…if you create a new window every time, it&#39;s going to work every time.)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 2nd 2010, 9:22:51 pm">August 2nd 2010</span>
											by <span class='authorname'>Marc Boucher</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yeah, I had a feeling Goran would run away.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2010, 6:18:16 am">August 5th 2010</span>
											by <span class='authorname'>Marc Boucher</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-143631">
				
						<section>
							<p>This is broke for me as well, did you ever figure out a work around?  I am developing for android, 1.2.1 and 1.4.2</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 15th 2010, 4:34:20 am">November 15th 2010</span>
								by <span class='authorname'>Anthony Webb</span><br>
								<a class="icon-bg icon-link" href="question/48141/text-field-focus-breaks-when-window-is-closed-and-reopened.html#answer-143631" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
