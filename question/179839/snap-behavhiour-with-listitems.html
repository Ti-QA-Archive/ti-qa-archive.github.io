<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Snap behavhiour with ListItems » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Snap behavhiour with ListItems</h1>
		</header>
		<section>
			<p>Is it possible to create a snapping effect (at least in iOS) in an alloy listview?</p>
<p>i have a listview and only 1 item is showing at a time. when the user scrolls down, the next list item should snap to the top of the listview.</p>
<p>something similar has been asked here (with a scrollview) but no answer.<br>http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;118902&#x2F;scrollview-to-snap-views</p>
<p>google and stackoverflow didnot come up with anything useful either.</p>
<p>i found only the specs (that do not metion alloy either)<br>http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;platform&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.iOS.SnapBehavior.</p>
<p>any tipps are very appreciated!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 24th 2014, 6:14:40 am">December 24th 2014</span>
				by <span class='authorname'>markus schneider</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>listview</span></li>
					
						<li><span class='tagname'>snap</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-284705">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>You have not provided an example of exactly what you are trying to achieve - plus I am a little confused as to how if you have only one item on the screen at any time how the user is either scroll or know to scroll for more items.</p>
<p>However if you mean something like the section header that lock to the top edge of the ListView (example shown in Apple Contacts - the a-z sections) then this is very possible.</p>
<p>Just create your list with sections inside - the section itself can contain a section header (and also footer) the content of this will stay at the top of the ListView until the next section appears when it is moved out by the next one - this then stays in place and so on.  You can see this by using the contacts app and seeing the letter bars.</p>
<p>You can have either a simple text bar (like contacts) by using;</p>
<ul>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.ListSection-property-headerTitle">headerTitle</a></li>
</ul>
<p>Or something you can control the entire look and feel including height with;</p>
<ul>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.ListSection-property-headerView">headerView</a></li>
</ul>
<p>The <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;platform&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.iOS.SnapBehavior">SnapBehavior</a> may share a similar name to the action you are looking for but has no relationship to the problem I think you are trying to solve.</p>
<p>If none of this is related - please provide a name of an app or a link to a screenshot where an example can easily be seen.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 24th 2014, 6:27:12 am">December 24th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/179839/snap-behavhiour-with-listitems.html#answer-284705" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I am still not sure the end goal here.  This is partly due to your references to using a ListView which would imply the user would be view more than one row at any one time.  However each of your explanations suggest only one &quot;thing&#x2F;entry&quot; is being displayed on the display.</p>
<p>So my question here becomes - why would you use a ListView if you are only ever going to have one item on the screen at a time?</p>
<p>I really need to understand the relationship between the green section (that you say only has one entry) and the single picture that is affected by the users action on the green section.</p>
<p>I am thinking this is your goal;</p>
<ul>
<li>Picture at the top</li>
<li>Comment below</li>
<li>The comment view ONLY shows one comment at a time</li>
<li>The user interacts with the comment to slide it up, once a trigger point is reached the NEXT item is shown on the screen in place of the previously displayed comment</li>
</ul>
<p>Is this closer to what you are thinking?  Talk less about ListViews, ImageViews and more about goals and things.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2014, 8:07:49 am">December 24th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanks for your time on this issue!</p>
<p>yes, the four points you mention are exactly what i would like to implement. everything is working now, but when i slide the comment up, the scroll does not stop at the top of the listview but keeps on scrolling for a moment or stops too early depending on the length of the user input. i &quot;just&quot; would like to have the scroll stop at the top of the listview window. </p>
<p>reason why i am using a listview is because im receiving mulitple comments making a GET REQUEST (JSON) from a REST server. im using listviews quite a lot in the app (and i do like them), and i am trying to reuse code. plus, i like to minimize the GET requests and load all comments to the image at once and put them in a listview. </p>
<p>so the workflow is like this: </p>
<ol>
<li>One GET REQUEST to the server is made which gets all comments of the picture,</li>
<li>those comments are pushed to the listview.section array (so all comments are in the listview, but the dimensions of the listview and itemrow are so designed that only first comment (and perhaps a bit of the second comment below) is shown in the &quot;listview window&quot;). </li>
<li>when the first comment is active&#x2F;selected (green background indicates a selected listitem&#x2F;comment), the slider gets the comment ID and some other values (and has the same (green) color like the selected comment indicating the comment that is being voted on)</li>
<li>when the user touchends the slider to vote on the comment, the slider passes the required data (e.g. comment ID) to the vote function which sends it back to the server</li>
<li>other comments, which are not selected (with an olive background), are below the active&#x2F;selected comment.</li>
</ol>
<p>hope this helps!</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2014, 8:49:28 am">December 24th 2014</span>
											by <span class='authorname'>markus schneider</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Last questions (I think) does the user have to vote or at least see each comment in turn?</p>
<p>For example; there are 10 comments, the first one is shown initially the user scrolls up so the next one is revealed.  Does this next one (#2 in this case) HAVE to snap to the top or can the user scroll on a bit more so #3 is shown instead?</p>
<p>With the limited space I am guessing the user has to see all ten comments (each snapped into place) even if the they choose not to vote on each (or they are required to vote - either way).</p>
<p>So in summary;</p>
<ul>
<li>If there were 10 comments do ALL ten have to be shown one after the other?</li>
<li>Can any comment be visually skipped - by not being snapped?</li>
<li>If every comment has to be acted on - is swiping the correct action?  Would the act of voting then snap the next comment into place not be a better more obvious UX?</li>
</ul>
<p>I am not just throwing out questions BTW, I will help you solve this.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2014, 9:04:01 am">December 24th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>There is a way to achieve this using the ListView - it seems more complicated than it really is.</p>
<ul>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.ListView-method-scrollToItem">scrollToItem</a> method</li>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.ListView-event-marker">marker</a> event</li>
<li><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.ListView-method-setMarker">setMarker</a></li>
</ul>
<p>The idea is that you set a <strong>marker</strong> on each row, then listen for the <strong>marker event</strong> and call the <strong>scrollToItem</strong> method to snap to that entry.  The <strong>marker</strong> event passes back the source - from this you should be able to gain the values to pass to the <strong>setMarker</strong> method.</p>
<p>Now the <em>slightly</em> annoying part; the markers are designed to let you trigger things to act when you scroll down are actually expire once that event is fired.  So they are actually a one time use.  HOWEVER you just call the <strong>setMarker</strong> method again with the same details INSIDE the <strong>marker event</strong>.  This was the <strong>marker</strong> event continues to trigger.</p>
<hr>
<p>There are more complicated solutions to solve the same problem, but require UI and VIEW choice changes.  Play with this and see if it gets close or matches your needs.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2014, 9:21:03 am">December 24th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>im still not 100% sure about everything so your questions and input are greatly appreciated, Malcolm.</p>
<p>regarding the scrolling: id like to make it conveniant for the user - so ideally, the user initially gets comment1 (default selected). he can drag&#x2F;slide up comment2, then comment2 snaps to the top of the listview (and gets selected). when he scrolls further (and slides up comment 3), the next comment3 snaps to the listview top (triggerpoint is perhaps 1&#x2F;2 or 2&#x2F;3 of the parent listview). the user does not need to vote - the goal is to make navigation as easy as possible with a nice snap effet.</p>
<p>so all comments should automatically initally snap to the top of the listview and the user needs to slide it again if he wants to skip it.</p>
<p>i dont think the user would like to have to vote on all comments. so i guess this is the answer to your last question - making voting to cause the snap behaviour?</p>
<p>in order to handle the user navigation and making it a bit more userfriendly im testing this:</p>
<ol>
<li>the comment&#x2F;listItem that has been voted on is marked after the vote with a black background color, </li>
<li>then this comment&#x2F;listItem is appended,</li>
<li>and finally removed from the itemIndex 1 so its not duplicated. </li>
</ol>
<p>so all comments that the user has voted on are at the end with a black backgroundColor. but i need to test how good this works and how intuitive this is for the user when the comments list from the server is loaded again.</p>
<p>the user should also not be able to vote twice (even though there is a check on the server for that, i like to have this validation done in the app) so im testing the backgroundColor = black check. </p>
<p>if you think there is interest and if this gets eventually solved, i can write some documentation on this so it can be added it to the  excellent listview guide one here https:&#x2F;&#x2F;github.com&#x2F;appcelerator-services&#x2F;ElementsOfListView.</p>
<p>anyways, thanks for your great support. i need to hop on to my bike - there is this day today…</p>
<p>merry christmas!</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2014, 9:46:56 am">December 24th 2014</span>
											by <span class='authorname'>markus schneider</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>just saw your reply! thanks a lot. ill have a look at it tomorrow!</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2014, 9:47:43 am">December 24th 2014</span>
											by <span class='authorname'>markus schneider</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>im working on your suggested solution - indeed, it seems rather straightforward and i think it matches all the needs.</p>
<p>is there a way to set the marker in the xml file and the ListItemTemplate in particular (as it is affecting every listview item)? </p>
<p>or do i have to set it in the controller file something similar to this?</p>
<p>$.infiniteList.setMarker({sectionIndex:0,itemIndex:100});</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 25th 2014, 8:26:40 am">December 25th 2014</span>
											by <span class='authorname'>markus schneider</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You can only set this in the controller as of now.  So you will need to create a loop and simply set each marker.  Then in the marker event re-create the same marker so it gets triggered next time you pass it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 25th 2014, 8:52:48 am">December 25th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setMarker</span>(<span class="hljs-params"></span>)</span>{

    <span class="hljs-keyword">var</span> all_items = $.hm_comments_section.getItems();
    <span class="hljs-comment">//console.log(JSON.stringify(all_items) + " all_items");</span>

    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i&lt;all_items.length; i++) {
    $.hm_channel_comments.setMarker({sectionIndex:<span class="hljs-number">0</span>,itemIndex:i});
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"marker set at "</span>  +  i);
    }
}
</code></pre><p>im having some problem with getting the itemIndex number that i need to pass to the scrollToItem method. Ive attached the onMarker Event on the listview - but the e.itemIndex is undefined</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> markerReached = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    alert(<span class="hljs-string">"marker"</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">JSON</span>.stringify(e.source) + <span class="hljs-string">" JSON.stringify e.source"</span>);
    <span class="hljs-built_in">console</span>.log(e.itemIndex + <span class="hljs-string">" e.itemIndex"</span>);
    <span class="hljs-keyword">var</span> next_comment = e.itemIndex + <span class="hljs-number">1</span>;
    <span class="hljs-built_in">console</span>.log(next_comment);
    $.hm_channel_comments.scrollToItem(<span class="hljs-number">0</span>,next_comment);
    setMarker();

};
</code></pre><pre><code class="hljs">&lt;ListView <span class="hljs-property">id</span>=<span class="hljs-string">"hm_channel_comments"</span> defaultItemTemplate=<span class="hljs-string">"hm_commentTemplate"</span> onMarker=<span class="hljs-string">"markerReached"</span>&gt;
</code></pre><p>Any idea what I am doing wrong here?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 25th 2014, 11:14:46 am">December 25th 2014</span>
											by <span class='authorname'>markus schneider</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>the next_comment is wrong - it should be the same comment.</p>
<pre><code class="hljs">$.hm_channel_comments.scrollToItem(<span class="hljs-number">0</span>,e.itemIndex);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="December 25th 2014, 11:32:17 am">December 25th 2014</span>
											by <span class='authorname'>markus schneider</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-284709">
				
						<section>
							<p>hello Malcolm,</p>
<p>Many thanks for the fast response. Sorry for being unclear.</p>
<p>I have added a screenshot - the listview covers only some part of the screen (this listview window is marked with a thick dar red rectangle in the screenshot) and shows comments below an image. when the user clicks&#x2F;drags the listitem the listviewitem should behave like a normal one in a listview and scroll.</p>
<p>![snap effect] (http:&#x2F;&#x2F;s23.postimg.org&#x2F;d1ggun8u3&#x2F;snap_listview.png)</p>
<p>what i would like to implement is a &quot;snap-effect&quot; - so when the user has scrolled up a bit (say when the next listitem row has passed 2&#x2F;3 of the &quot;listview window&quot;) the next item&#x2F;comment (backgroundColor = olive in the example below) the next item should snap to the top of the listview window. if this is not clear, just please let me know.</p>
<p>i have to think about a good way to let the user know that he needs to scroll down. perhaps making the listItem row slightly smaller than the listview window, so the user sees that there is another comment. or an icon…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 24th 2014, 7:10:36 am">December 24th 2014</span>
								by <span class='authorname'>markus schneider</span><br>
								<a class="icon-bg icon-link" href="question/179839/snap-behavhiour-with-listitems.html#answer-284709" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Quick tip; next time - please do not create a new answer when your contribution is actually a comment - it confuses things in the future when trying to work out relevance, simply add a comment to the answer it is related to, or if the additional information is a follow up to the question or general information then add it as a comment to your own question at the top.  You are NOT being told off.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2014, 8:01:32 am">December 24th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>yeah, i saw that after i made the posting but couldnt delete it. i thought i would leave it there at the incorrect spot rather then posting the same comment twice. sorry!</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 24th 2014, 8:13:05 am">December 24th 2014</span>
											by <span class='authorname'>markus schneider</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
