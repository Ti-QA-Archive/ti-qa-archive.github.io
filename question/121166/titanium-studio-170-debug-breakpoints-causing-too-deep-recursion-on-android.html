<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium studio 1.7.0: debug breakpoints causing &#34;too deep recursion&#34; on android » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium studio 1.7.0: debug breakpoints causing &#34;too deep recursion&#34; on android</h1>
		</header>
		<section>
			<p>Hello,<br>while using the new TitaniumStudio debugger I&#39;m been quite frustrated by the</p>
<pre><code class="hljs"><span class="hljs-tag">msg</span><span class="hljs-pseudo">:org</span><span class="hljs-class">.mozilla</span><span class="hljs-class">.javascript</span><span class="hljs-class">.EvaluatorException</span>: <span class="hljs-tag">Too</span> <span class="hljs-tag">deep</span> <span class="hljs-tag">recursion</span> <span class="hljs-tag">while</span> <span class="hljs-tag">parsing</span>
</code></pre><p>error when placing breakpoints in my code and debugging it on the android simulator.<br>It doesn&#39;t happen with iOS.</p>
<p>I even tried setting the stack size to ridiculously large values</p>
<pre><code class="hljs">&lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"ti.android.threadstacksize"</span> type=<span class="hljs-string">"int"</span>&gt;<span class="hljs-number">2097152</span>&lt;/<span class="hljs-keyword">property</span>&gt;
</code></pre><p>but didn&#39;t really help :&#x2F;</p>
<p>any suggestion?</p>
<p>thx<br>lucio</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 16th 2011, 12:31:46 pm">June 16th 2011</span>
				by <span class='authorname'>lucio lucio</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>debugger</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>tatnium studio</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-211858">
				
						<section>
							<p>this thing is VERY annoying… Placing a breakpoint in whatever code that is not totally trivial will just break up everything ending up in that too-deep recursion error…<br>What&#39;s the point of a debugger that breaks you code while trying to debug it? :&#x2F;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 30th 2011, 11:51:58 am">June 30th 2011</span>
								by <span class='authorname'>lucio lucio</span><br>
								<a class="icon-bg icon-link" href="question/121166/titanium-studio-170-debug-breakpoints-causing-too-deep-recursion-on-android#answer-211858" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-210491">
				
						<section>
							<p>Lucio</p>
<p>Please take note of this advice in the docs:<br><a href="http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;JavaScript+Best+Practices#JavaScriptBestPractices-Avoiddeepnesting">Avoid deep nesting</a></p>
<p>Setting <code>threadstacksize</code> to very large values is likely to cause problems; 128K or lower is recommended.</p>
<p>Hope this helps</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 16th 2011, 1:08:06 pm">June 16th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/121166/titanium-studio-170-debug-breakpoints-causing-too-deep-recursion-on-android#answer-210491" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-210498">
				
						<section>
							<p>Hi paul,<br>thx for aswering :)</p>
<p>I&#39;m not really deep nesting: it&#39;s just a webView in a modal window opening upon click on an advertising banner. The app is tabbed base. This code use to work fine on 1.6.2 but now crashes the app on android (titanium 1.7.0) for some reason, no problems on iOS. I was trying to find the reason and placed 2 break points hoping the new debugger could help me figure out what&#39;s going on<br>Here&#39;s the code:</p>
<pre><code class="hljs">(banner <span class="hljs-keyword">is</span> an imageView displaying a PNG)
  banner.addEventListener(<span class="hljs-string">'click'</span>, __bind(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">var</span> closeBtn, landingPageWin, webView;
    landingPageWin = Ti.UI.createWindow({
      backgroundColor: <span class="hljs-string">'white'</span>,
      navBarHidden: <span class="hljs-literal">false</span>,
      tabBarHidden: <span class="hljs-literal">true</span>,
      orientationModes: [Ti.UI.PORTRAIT, Ti.UI.UPSIDE_PORTRAIT, Ti.UI.LANDSCAPE_LEFT, Ti.UI.LANDSCAPE_RIGHT]
    });
    <span class="hljs-keyword">if</span> (bz.os !== <span class="hljs-string">'android'</span>) {
      closeBtn = Ti.UI.createButton({
        title: <span class="hljs-string">"Chiudi"</span>
      });
      closeBtn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> landingPageWin.close();
      });
      landingPageWin.leftNavButton = closeBtn;
    } <span class="hljs-keyword">else</span> {
      landingPageWin.addEventListener(<span class="hljs-string">'android:back'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> landingPageWin.close();
      });
    }
    webView = Ti.UI.createWebView({
      url: e.source.clickURL,
      touchEnabled: <span class="hljs-literal">true</span>
    });
    landingPageWin.add(webView);  <span class="hljs-comment">// break point 1</span>
    landingPageWin.open({ <span class="hljs-comment">// break point 2</span>
      modal: <span class="hljs-literal">true</span>
    });
  }, <span class="hljs-keyword">this</span>));
}
</code></pre><p>I&#39;m aware of the stack size :)<br>I was setting those insane values trying to get passed that &quot;recursion&quot; error, but it didin&#39;t help at all and I&#39;m pretty much still stucked there</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 16th 2011, 1:44:00 pm">June 16th 2011</span>
								by <span class='authorname'>lucio lucio</span><br>
								<a class="icon-bg icon-link" href="question/121166/titanium-studio-170-debug-breakpoints-causing-too-deep-recursion-on-android#answer-210498" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Lucio</p>
<p>I can investigate this, but would you first amend your code so that it will run?  Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 4:59:06 pm">June 16th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>mmm my code is actually running now.<br>After testing it on real devices turned out to be my simulators acting up :&#x2F;<br>I will check if even the break points issue is due to the simulator, but I&#39;ll have to wait until tomorrow to get my hand on another simulator.<br>I&#39;ll keep you updated</p>
<p>thx for help<br>lucio</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 5:04:27 pm">June 16th 2011</span>
											by <span class='authorname'>lucio lucio</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hi paul,<br>I just finished a test-run on colleagues&#39; emulators and it does crash on their machines as well.<br>here&#39;s the stackTrace we&#39;re getting:</p>
<pre><code class="hljs">W/dalvikvm(  482): threadid=14: thread exiting with uncaught exception (group=0x4001d800)
<span class="hljs-keyword">E</span>/TiUncaughtHandler(  482): (kroll<span class="hljs-label">$3</span>) [61,20339] Sending event: exception <span class="hljs-keyword">on</span> thread: kroll<span class="hljs-label">$3</span> msg:java.lang.NullPointerException; Titanium 1.7.0,2011/06/06 18:05,4155ee
<span class="hljs-keyword">E</span>/TiUncaughtHandler(  482): java.lang.NullPointerException
<span class="hljs-keyword">E</span>/TiUncaughtHandler(  482):     at ti.modules.titanium.debug.DebugServer.<span class="hljs-literal">e</span>(Unknown Source)
<span class="hljs-keyword">E</span>/TiUncaughtHandler(  482):     at ti.modules.titanium.debug.DebugServer.a(Unknown Source)
<span class="hljs-keyword">E</span>/TiUncaughtHandler(  482):     at ti.modules.titanium.debug.<span class="hljs-keyword">g</span>.threadStarted(Unknown Source)
<span class="hljs-keyword">E</span>/TiUncaughtHandler(  482):     at org.appcelerator.titanium.kroll.KrollContext.initContext(KrollContext.java:178)
<span class="hljs-keyword">E</span>/TiUncaughtHandler(  482):     at org.appcelerator.titanium.kroll.KrollHandlerThread.onLooperPrepared(KrollHandlerThread.java:74)
<span class="hljs-keyword">E</span>/TiUncaughtHandler(  482):     at org.appcelerator.titanium.kroll.KrollHandlerThread.<span class="hljs-keyword">run</span>(KrollHandlerThread.java:85)
<span class="hljs-keyword">E</span>/AndroidRuntime(  482): FATAL EXCEPTION: kroll<span class="hljs-label">$3</span>
<span class="hljs-keyword">E</span>/AndroidRuntime(  482): java.lang.NullPointerException
<span class="hljs-keyword">E</span>/AndroidRuntime(  482):     at ti.modules.titanium.debug.DebugServer.<span class="hljs-literal">e</span>(Unknown Source)
<span class="hljs-keyword">E</span>/AndroidRuntime(  482):     at ti.modules.titanium.debug.DebugServer.a(Unknown Source)
<span class="hljs-keyword">E</span>/AndroidRuntime(  482):     at ti.modules.titanium.debug.<span class="hljs-keyword">g</span>.threadStarted(Unknown Source)
<span class="hljs-keyword">E</span>/AndroidRuntime(  482):     at org.appcelerator.titanium.kroll.KrollContext.initContext(KrollContext.java:178)
<span class="hljs-keyword">E</span>/AndroidRuntime(  482):     at org.appcelerator.titanium.kroll.KrollHandlerThread.onLooperPrepared(KrollHandlerThread.java:74)
<span class="hljs-keyword">E</span>/AndroidRuntime(  482):     at org.appcelerator.titanium.kroll.KrollHandlerThread.<span class="hljs-keyword">run</span>(KrollHandlerThread.java:85)
W/ActivityManager(   60):   Force finishing activity it.banzai.liquida.liquida.<span class="hljs-keyword">test</span>/ti.modules.titanium.ui.TiTabActivity
<span class="hljs-keyword">D</span>/TiHttpClient(  482): (TiHttpClient-9) [165,20504] Setting ready state to 2
<span class="hljs-keyword">D</span>/TiHttpClient(  482): (TiHttpClient-9) [2,20506] Setting ready state to 3
<span class="hljs-keyword">D</span>/TiHttpClient(  482): (TiHttpClient-9) [19,20525] Setting ready state to 4
W/iPhone  (  482): (kroll<span class="hljs-label">$1</span>: <span class="hljs-keyword">app</span>:<span class="hljs-comment">//app.js) [130,20655] UI.iPhone.TableViewCellSelectionStyle.NONE property isn't supported on Android</span>
W/iPhone  (  482): (kroll<span class="hljs-label">$1</span>: <span class="hljs-keyword">app</span>:<span class="hljs-comment">//app.js) [86,20741] UI.iPhone.TableViewCellSelectionStyle.NONE property isn't supported on Android</span>
W/ActivityManager(   60): Activity <span class="hljs-keyword">pause</span> timeout <span class="hljs-keyword">for</span> HistoryRecord{451a9b20 it.banzai.liquida.liquida.<span class="hljs-keyword">test</span>/ti.modules.titanium.ui.TiTabActivity}
I/Process (  482): Sending signal. PID: 482 SIG: 9
I/ActivityManager(   60): Process it.banzai.liquida.liquida.<span class="hljs-keyword">test</span> (pid 482) has died.
I/WindowManager(   60): <span class="hljs-keyword">WIN</span> DEATH: <span class="hljs-keyword">Window</span>{4509f1b0 it.banzai.liquida.liquida.<span class="hljs-keyword">test</span>/it.banzai.liquida.liquida.<span class="hljs-keyword">test</span>.LiquidaActivity paused=false}
I/WindowManager(   60): <span class="hljs-keyword">WIN</span> DEATH: <span class="hljs-keyword">Window</span>{450bf0d0 it.banzai.liquida.liquida.<span class="hljs-keyword">test</span>/ti.modules.titanium.ui.TiTabActivity paused=false}
I/UsageStats(   60): Unexpected resume of com.android.launcher <span class="hljs-keyword">while</span> already resumed <span class="hljs-keyword">in</span> it.banzai.liquida.liquida.<span class="hljs-keyword">test</span>
W/InputManagerService(   60): Got RemoteException sending setActive(false) notification to pid 482 uid 10040
</code></pre><p>cheers<br>lucio</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 17th 2011, 7:56:30 am">June 17th 2011</span>
											by <span class='authorname'>lucio lucio</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-210505">
				
						<section>
							<p>Is it possible that you simply have a bug in that the closeBtn has not been created on &#39;android&#39;?</p>
<pre><code class="hljs">    <span class="hljs-keyword">if</span> (bz.<span class="hljs-built_in">os</span> !== <span class="hljs-string">'android'</span>) {
      closeBtn = Ti.UI.createButton({
        title: <span class="hljs-string">"Chiudi"</span>
      });
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 16th 2011, 2:40:29 pm">June 16th 2011</span>
								by <span class='authorname'>James Pereira</span><br>
								<a class="icon-bg icon-link" href="question/121166/titanium-studio-170-debug-breakpoints-causing-too-deep-recursion-on-android#answer-210505" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>mmm nope, the close button is just for iOS, android should react on the android:back event.<br>And it works fine on 1.6.2</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 2:43:28 pm">June 16th 2011</span>
											by <span class='authorname'>lucio lucio</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Guess I should have asked…are you sure that bz.os has the correct value :(</p>
<p>Also, note the docs say… It is recommended that you only have one handler per heavyweight window (Android Only)… is this a possibility…</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 3:04:05 pm">June 16th 2011</span>
											by <span class='authorname'>James Pereira</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>bz.os is just a macro for Ti.Platform.osname, and yes it has a value :)<br>Also the only handler for the modal window is the android:back one.</p>
<p>Thx for your help :)</p>
<p>It turned out to be my android simulator acting up -_- (still no idea on what&#39;s going on there)<br>Testing the app on real devices shows everything working fine (compiling with 1.7.0 as well)</p>
<p>Anyway the point of this post wasn&#39;t my (stupid) problem, it was more about the impossibility to use the debugger due to the recursion error which, one the other hand, seems to be caused by what is been &quot;added&quot; to the code upon breakpoint (possibly JSON.stringify()s to inspect the objects&#39; content?)</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 4:36:23 pm">June 16th 2011</span>
											by <span class='authorname'>lucio lucio</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Again, lucio, if you can provide me with a reliable and complete usecase, I will investigate it.</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 30th 2011, 4:29:12 pm">June 30th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
