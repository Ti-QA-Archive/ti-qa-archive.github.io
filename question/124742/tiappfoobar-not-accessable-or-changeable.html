<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Ti.App.Foo.bar[] not accessable or changeable » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Ti.App.Foo.bar[] not accessable or changeable</h1>
		</header>
		<section>
			<p>Hello everybody</p>
<p>We are working on an iPad application with Appcelerator. Ipad hast ios 4.3.5 and titanium sdk is 1.7.2.<br>We got a problem with global data storage. We recieve information from the internet and need to get access to this data in every .js file we use, thats why we decided to work with Ti.App.*<br>The problem is, that we can change and access normal single data like </p>
<pre><code class="hljs">Ti.<span class="hljs-keyword">App</span>.foo = <span class="hljs-string">"bar"</span>;
info( Ti.<span class="hljs-keyword">App</span>.foo ) ;
<span class="hljs-comment">// shows bar in console</span>

Ti.<span class="hljs-keyword">App</span>.foo = <span class="hljs-string">"someThing"</span>;
info( Ti.<span class="hljs-keyword">App</span>.foo ) ;
<span class="hljs-comment">// shows someThing in console</span>
</code></pre><p>but if we try to work with arrays it is not possible to work correctly.</p>
<p>At the moment we need to iterate through the complete Array we saved in Ti.App save this objects in a new array, change the one object in the array we want to change, and then assign the new array to our Ti.App property… thats awful</p>
<p>Is there any solution or workaround to work with arrays and get the possiblity to access single objects and change a single propertie</p>
<p>Example:</p>
<pre><code class="hljs">Ti.App.objects = {};

//recieve<span class="hljs-instruction"> and </span>array(with objects<span class="hljs-function">)</span> from the proxy/file<span class="hljs-instruction"> or </span>something

Ti.App.objects = newObject 
//works fine

//now change single object in this<span class="hljs-instruction"> array </span>with the property name

Ti.App.objects<span class="hljs-keyword">[</span>2].name = <span class="hljs-string">"foo"</span>;

info( Ti.App.objects <span class="hljs-function">)</span>
// nothing changed....
</code></pre><p>Thanks for every reply.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 25th 2011, 8:21:56 am">August 25th 2011</span>
				by <span class='authorname'>Peter Liebig</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>bug</span></li>
					
						<li><span class='tagname'>data</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-217417">
				
						<section>
							<p>You want to be using <code>Titanium.App.Properties</code> to store your session data. Here&#39;s a few links to get you going with them:</p>
<ul>
<li><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.App.Properties-module">Titanium.App.Properties API docs</a></li>
<li><a href="http:&#x2F;&#x2F;vimeopro.com&#x2F;appcelerator&#x2F;building-native-mobile-applications&#x2F;video&#x2F;26414892">Free training video discussing Titanium.App.Properties usage</a></li>
</ul>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 25th 2011, 11:21:51 am">August 25th 2011</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="../../question/124742/tiappfoobar-not-accessable-or-changeable.html#answer-217417" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-217421">
				
						<section>
							<p>You <em>really</em> want to rethink your paradigm of using Ti.App.* as a pseudo-global way to store data or objects.  Not only does it not support arrays (as you have found), but consider what Appcelerator said in a comment in <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;122275&#x2F;global-variable---again#212575">this</a> thread:</p>
<p>  &quot;Adding variables to Ti.App is not recommended and is not or soon will be not permitted.&quot;</p>
<p>So while it still seems to work for simple variables (and even objects), it may only be a matter of time until you pull a SDK update and it quits working altogether.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 25th 2011, 11:47:05 am">August 25th 2011</span>
								by <span class='authorname'>Doug Handy</span><br>
								<a class="icon-bg icon-link" href="../../question/124742/tiappfoobar-not-accessable-or-changeable.html#answer-217421" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>First, get over the fact polluting Ti.App.* with an array does not work.  It not only does not work with an array of objects, it does not work with an array of strings.</p>
<p>Don&#39;t look for Appcelerator to enhance Ti.App.<em> usage to allow you do to that either.  As I pointed out in my first reply, you don&#39;t want to use Ti.App.</em> for ANYTHING of yours, even though it appears to work with simple data types for now.  That could change at any time.</p>
<p>Second, realize that Ti.App.Properties.setList must work with JSON serializable data only.  That is, you can&#39;t store an object like a window, but you can store a JSON object.</p>
<p>That&#39;s because Ti.App.Properties.* stores its data in a plist dictionary of key &#x2F; value pairs.  You can examine the contents under iOS by looking at a location such as:</p>
<pre><code class="hljs"><span class="hljs-regexp">/Users/</span>(username)<span class="hljs-regexp">/Library/</span>Application Support<span class="hljs-regexp">/iPhone Simulator/</span>(<span class="hljs-number">4</span>.x.x.)<span class="hljs-regexp">/Application Support/</span>(guid)<span class="hljs-regexp">/Library/</span>Preferences<span class="hljs-regexp">/(appid).plist</span>
</code></pre><p>Once you understand how the stuff is stored, you should have a better understanding of how to manipulate it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 12:24:33 pm">August 25th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Try:</p>
<pre><code class="hljs">Ti.App.Properties.setList(<span class="hljs-string">'tasks'</span>, <span class="hljs-keyword">array</span>)
<span class="hljs-comment">// now i want to change the status for the task with id 3</span>

<span class="hljs-keyword">var</span> newArray = Ti.App.Properties.getList(<span class="hljs-string">'tasks'</span>)
newArray[<span class="hljs-number">3</span>].status = <span class="hljs-string">"choosen"</span>; 
Ti.App.Properties.setList(<span class="hljs-string">'tasks'</span>, newArray)
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 12:32:26 pm">August 25th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-217422">
				
						<section>
							<p>Thx for the reply so far. The problem with the Titanium.App.properties is nearly the same as in Ti.App</p>
<p>If i have an Array&#x2F;Object for example with several single objects in, and i want to change just 1 propertie of one element, i need to iterate through the complete array (in this case with Ti.App.Properties.getList(&quot;Foo&quot;)) till i found the element, change the element, but i cant set only a single propertie or value in this Array&#x2F;Object.</p>
<p>Know what i mean?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 25th 2011, 11:56:05 am">August 25th 2011</span>
								by <span class='authorname'>Peter Liebig</span><br>
								<a class="icon-bg icon-link" href="../../question/124742/tiappfoobar-not-accessable-or-changeable.html#answer-217422" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Can you give a small working example of what you are trying to do? </p>
<p>Also, please use the comments as opposed to creating another answer (unless of course you find your answer). It makes the conversation easier to follow.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 12:01:16 pm">August 25th 2011</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok i am sorry for that, normally i dont need to ask, cause i just try to find the answer by myself :)</p>
<p>Ok here some sample what i want to doo</p>
<pre><code class="hljs">var array = [
{<span class="hljs-string">ID:</span><span class="hljs-number">0</span>, <span class="hljs-string">name:</span> <span class="hljs-string">"task 1"</span>, <span class="hljs-string">status:</span><span class="hljs-string">""</span>, <span class="hljs-string">isRunning:</span> <span class="hljs-literal">false</span>},
{<span class="hljs-string">ID:</span><span class="hljs-number">1</span>, <span class="hljs-string">name:</span> <span class="hljs-string">"task 2"</span>, <span class="hljs-string">status:</span><span class="hljs-string">"choosen"</span>, <span class="hljs-string">isRunning:</span> <span class="hljs-literal">false</span>},
{<span class="hljs-string">ID:</span><span class="hljs-number">2</span>, <span class="hljs-string">name:</span> <span class="hljs-string">"task 3"</span>, <span class="hljs-string">status:</span><span class="hljs-string">"normal"</span>, <span class="hljs-string">isRunning:</span> <span class="hljs-literal">false</span>},
{<span class="hljs-string">ID:</span><span class="hljs-number">3</span>, <span class="hljs-string">name:</span> <span class="hljs-string">"task 4"</span>, <span class="hljs-string">status:</span><span class="hljs-string">""</span>, <span class="hljs-string">isRunning:</span> <span class="hljs-literal">false</span>}]

<span class="hljs-comment">// sample array which i recieved from the a request</span>
<span class="hljs-comment">// Now save it to Properties</span>

Ti.App.Properties.setList(<span class="hljs-string">'tasks'</span>, array)
<span class="hljs-comment">// everything fine </span>
<span class="hljs-comment">// now i want to change the status for the task with id 3</span>

var newArray = Ti.App.Properties.getList(<span class="hljs-string">'tasks'</span>)
<span class="hljs-keyword">for</span>(var i <span class="hljs-keyword">in</span> newArray){
    <span class="hljs-comment">//if id of a button for example is the same id of the task change the status</span>
    <span class="hljs-keyword">if</span>(e.id = newArray[i].ID)
    {
        newArray[i].status = <span class="hljs-string">"choosen"</span>;
    }
}

Ti.App.Properties.setList(<span class="hljs-string">'tasks'</span>, newArray)
<span class="hljs-comment">// while writing this i get an idea what to do :) thx</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 12:16:23 pm">August 25th 2011</span>
											by <span class='authorname'>Peter Liebig</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You don&#39;t want to do this in javascript:</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span><span class="hljs-comment">(e.id = newArray[i].ID)</span>
</code></pre><p>You want to use === and not =, because = does not test equality.  You are setting e.id to newArray[i].ID then seeing if that result is true.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 12:28:09 pm">August 25th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-217431">
				
						<section>
							<p>If you need global variable … create one!</p>
<pre><code class="hljs"><span class="hljs-comment">//app.js</span>
var MyNamespace = {};

<span class="hljs-comment">//in somefile.js store whatever you want:</span>
MyNamespace.myArray = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span> ];
</code></pre><p>Note that this will work if you&#39;re not creating new contexts (you don&#39;t create windows with &quot;url&quot; property).</p>
<p>If you&#39;re using new contexts, you need to pass namespace variable to the new contexts (but don&#39;t create new contexts). ;)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 25th 2011, 12:35:07 pm">August 25th 2011</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="../../question/124742/tiappfoobar-not-accessable-or-changeable.html#answer-217431" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>The caveat here is exactly what you said:  it only works when using a single context model.  I made the assumption here he was using multiple contexts.  Otherwise I see no reason for him to try using Ti.App.* in the first place as everything would already be globally available.</p>
<p>As for passing a namespace to the new contexts, correct me if I&#39;m wrong, but won&#39;t the new contexts get a COPY of the namespace and not really share the original namespace?</p>
<p>That is, if you try this:</p>
<ul>
<li>Create namespace in app.js</li>
<li>Create window with url *.js and pass the namespace</li>
<li>In the new window, make a change to a property in the namespace</li>
<li>Close the window</li>
<li>Examine the property you tried to change in the new window</li>
</ul>
<p>I think what you will find is the original namespace did not update.  That is, the new window modified only its local copy of the namespace.</p>
<p>Hence the need to use Ti.App.Properties which &quot;shares&quot; data across contexts by reading&#x2F;writing a *.plist file in the app sandbox.  Or by putting stuff in a database or whatever.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 12:47:30 pm">August 25th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That didn&#39;t format right; sorry.</p>
<p>Anyway my point was I think you can use a namespace to pass things TO another context, but not back.</p>
<p>And looking at the original question, it is clear he is using multiple contexts:</p>
<p>  &quot;We recieve information from the internet and need to get access to this data in every .js file we use, thats why we decided to work with Ti.App.*&quot;</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 12:52:16 pm">August 25th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;m not so sure that he is using multiple contexts, because different JS files can be included, so I don&#39;t see the connection between multiple JS files and multiple contexts. :)</p>
<p>Ti.App.* shouldn&#39;t be used in any case.</p>
<p>As for namespace object passing, I would expect that object&#39;s reference copy is being passed to new context, because that is in the nature of JavaScript language (objects as arguments are passed by reference copy). Do some testing and see that object isn&#39;t being copied and that you can make modifications to the original object in new context.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 1:13:46 pm">August 25th 2011</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Maybe I am jumping to a conclusion when inferring that wanting &quot;access to this data in every .js file we use&quot; coupled with using Ti.App.* means a multiple context application.  I guess Peter needs to clear that up instead of continued speculation.</p>
<p>As to the pass by reference, I&#39;d have to run some tests.  But is this how you&#39;d pass your namespace to a new window using a url?</p>
<pre><code class="hljs"><span class="hljs-comment">// in app.js</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> MyNamespace</span> = {};
MyNamespace.myArray = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span> ];
<span class="hljs-variable"><span class="hljs-keyword">var</span> newWindow</span> = Ti.UI.createWindow({
    url: someOther.js,
    namespace: MyNamespace
});

<span class="hljs-comment">// in someOther.js</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> win</span> = Ti.UI.currentWindow();
<span class="hljs-variable"><span class="hljs-keyword">var</span> MyNamespace</span> = win.MyNamespace;
Ti.API.info(MyNamespace.myArray.length);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 1:39:35 pm">August 25th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No. You need to use property name and not variable name (you probably accidently wrote variable name instead of property name) in other context.</p>
<p>Try this (you made some minor mistakes that I corrected):</p>
<pre><code class="hljs"><span class="hljs-comment">// in app.js</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> MyNamespace</span> = {};
MyNamespace.myArray = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span> ];
<span class="hljs-variable"><span class="hljs-keyword">var</span> newWindow</span> = Ti.UI.createWindow({
    url: 'someOther.js',
    Ns: MyNamespace
});
newWindow.<span class="hljs-keyword">open</span>();
setTimeout(function() { Ti.API.info(MyNamespace.myArray.length) }, <span class="hljs-number">500</span>);

<span class="hljs-comment">// in someOther.js</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> win</span> = Ti.UI.currentWindow;
<span class="hljs-variable"><span class="hljs-keyword">var</span> MyNamespace</span> = win.Ns;
MyNamespace.myArray.push(<span class="hljs-number">42</span>);
win.close();
</code></pre><p>You should get 5 in console (didn&#39;t test).</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 3:41:42 pm">August 25th 2011</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes, I missed quoting the js name.  Sorry, I was just typing into the message some sample code.  If that gets passed by reference, then it is for sure the best way to retrofit existing multiple context code which is trying to use Ti.App.* to store objects or data.</p>
<p>But we have yet to hear from Peter again about his actual project and if it is indeed multiple contexts…</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 4:02:06 pm">August 25th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
