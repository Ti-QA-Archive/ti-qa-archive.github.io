<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy - Label not changing text » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy - Label not changing text</h1>
		</header>
		<section>
			<p>I have no idea what i&#39;m doing wrong, perhaps it&#39;s that I&#39;m trying to change it in the exports, but this works on other required views, just not this one?</p>
<p>view - spinner.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ImageView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"spinner"</span> <span class="hljs-attribute">image</span>=<span class="hljs-value">"/images/transparent_logo.png"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"spinnerText"</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>controller - index.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> spinner = Alloy.createController(<span class="hljs-string">'spinner'</span>);
$.<span class="hljs-keyword">index</span>.<span class="hljs-keyword">add</span>(spinner.getView());
spinner.spinTheSpinner(<span class="hljs-string">'Loading Profile Data...'</span>);
</code></pre><p>controller - spinner.js</p>
<pre><code class="hljs">exports.spinTheSpinner = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">loadText</span>)</span>{
    $.spinner.show();
    <span class="hljs-built_in">console</span>.info($.spinnerText.text);
    $.spinnerText.text=loadText;
    <span class="hljs-built_in">console</span>.info($.spinnerText.text);
    $.spinnerText.show();
    <span class="hljs-built_in">console</span>.info(<span class="hljs-string">'spinning'</span>);
};
</code></pre><p>console</p>
<pre><code class="hljs">[<span class="hljs-name">INFO</span>] :   <span class="hljs-name">Loading</span>...
[<span class="hljs-name">INFO</span>] :   <span class="hljs-name">Loading</span> <span class="hljs-name">Profile</span> <span class="hljs-name">Data</span>...
[<span class="hljs-name">INFO</span>] :   <span class="hljs-atom">spinning</span>
</code></pre><p>So according to console, it is changing the text, but alas in my view the text never changes.  Another thing, if I hide the label it will not show when calling .show();  But the ImageView (spinner) will.  This was all working before when I just hardcoded it into each view that I needed it in, but I was trying to follow best practices and make this a reusable part of my app (I use it 4 different places in my app).</p>
<p>Any insight would be much appreciated.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 20th 2013, 3:55:07 am">April 20th 2013</span>
				by <span class='authorname'>Thomas Stalcup Jr</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>exports</span></li>
					
						<li><span class='tagname'>label</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I tested this code on iPhone and it is showing &quot;loading profile data&quot; in the label. Where is the problem ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 20th 2013, 4:59:20 am">April 20th 2013</span>
								by <span class='authorname'>Hani Hamadeh</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thanks for your help Hani, turns out I wasn&#39;t calling both views :P</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 20th 2013, 2:46:46 pm">April 20th 2013</span>
								by <span class='authorname'>Thomas Stalcup Jr</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-261168">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>hi,</p>
<p>try this one</p>
<p>spinner.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view1'</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">'red'</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ImageView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"spinner"</span> <span class="hljs-attribute">image</span>=<span class="hljs-value">"/images/transparent_logo.png"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"spinnerText"</span> <span class="hljs-attribute">width</span>=<span class="hljs-value">'200'</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">'30'</span> <span class="hljs-attribute">top</span>=<span class="hljs-value">'50'</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>spinner.js</p>
<pre><code class="hljs">exports.spinTheSpinner = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">loadText</span>) </span>{

    $.spinner.show();
    <span class="hljs-built_in">console</span>.info($.spinnerText.text);
    $.spinnerText.text=loadText;
    <span class="hljs-built_in">console</span>.info($.spinnerText.text);
    $.spinnerText.show();
    <span class="hljs-built_in">console</span>.info(<span class="hljs-string">'spinning'</span>);
};
</code></pre><p>index.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> spinner = Alloy.createController(<span class="hljs-string">'view1'</span>);
$.index.add(spinner.getView());
<span class="hljs-keyword">var</span> btn = Ti.UI.createButton({
    title : <span class="hljs-string">'change'</span>,
    width : <span class="hljs-number">80</span>,
    height : <span class="hljs-number">40</span>
});

btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    spinner.spinTheSpinner(<span class="hljs-string">'Loading Profile Data...'</span>);
});

$.index.add(btn);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 20th 2013, 4:51:31 am">April 20th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/151270/alloy---label-not-changing-text#answer-261168" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Mitul is right. He&#39;s got the code to get you there, but the explanation is that <code>spinner.getView()</code> is returning the first top-level view from the controller, not all the top-level views. In your case the &quot;spinner&quot; controller contains 2 top-level views and the getView() call is only returning the first one, the &lt;ImageView&gt;, hence why you can&#39;t seem to get the second one, the &lt;Label&gt;, to work. All your operations are working, you just haven&#39;t actually added the &lt;Label&gt; to the view hierarchy.</p>
<p>You can use Mitul&#39;s solution above by wrapping the 2 views in a single top-level view, or of you prefer to keep the XML structure and reduce the overal number of views you use (always good for performance), you can modify your index.js like this:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> spinner = Alloy.createController(<span class="hljs-string">'spinner'</span>);
$.<span class="hljs-keyword">index</span>.<span class="hljs-keyword">add</span>(spinner.getView(<span class="hljs-string">'spinner'</span>));
$.<span class="hljs-keyword">index</span>.<span class="hljs-keyword">add</span>(spinner.getView(<span class="hljs-string">'spinnerText'</span>));
spinner.spinTheSpinner(<span class="hljs-string">'Loading Profile Data...'</span>);
</code></pre><p>The trick here is that you can use the default getView() without arguments to get the first top-level view, or you can get any IDed view in your controller by giving the ID to getView().</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 11:39:57 am">April 20th 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks so much Tony and Mitul, that did the trick. I&#39;m loving Alloy, and I appreciate all of your help in getting us n00bs up and running, and on a weekend too :)  Have a good one.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 2:46:25 pm">April 20th 2013</span>
											by <span class='authorname'>Thomas Stalcup Jr</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Tony : thanks Tony to explain on behalf of me.</p>
<p>@Thomas : welcome :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 5:23:05 am">April 22nd 2013</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
