<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>MapView coordinates on click » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>MapView coordinates on click</h1>
		</header>
		<section>
			<p>I&#39;m having an issue with an &#39;click&#39; event on a map annotation.  I saw on another post saying that the event listener for a &#39;click&#39; should be on the mapview itself, not the annotation.  I did that, and the handler function is triggering fine (i&#39;m using the titanium studio debugger to test it, so therefore Ti API 1.7.0)</p>
<p><strong>My problem is this:</strong>  The documentation says that the click event passed to the handler should come with an X, Y, and globalPoint so that i know where i clicked on the map… but these values not there!  I want to use them to set up a popup view when the user clicks an annotation.  </p>
<p>Does anyone know how to do this?  I couldn&#39;t get the &#39;leftView&#39; or &#39;rightView&#39; working on the annotation so i figured i would force it by creating my own popup.  If you know how to get those working, even better!</p>
<p>i&#39;m working on the iPad right now, but i would like to have it work on the android as well.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 9th 2011, 12:58:46 pm">May 9th 2011</span>
				by <span class='authorname'>Matthew Pickell</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-208119">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi Matt, just an update, it looks like the Appcelerator team decided that they can&#39;t support events on the map – only on overlays (this is apparently an issue with iOS 3.1x). You can get more details on this ticket http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-1104</p>
<p>Hopefully someone will update the docs soon!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 19th 2011, 2:57:25 pm">May 19th 2011</span>
								by <span class='authorname'>brian kurzius</span><br>
								<a class="icon-bg icon-link" href="question/119447/mapview-coordinates-on-click#answer-208119" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Yes. Just tested this. No more &#39;click&#39; events. regionChanged works though.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 19th 2011, 3:08:36 pm">May 19th 2011</span>
											by <span class='authorname'>Kosso</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207506">
				
						<section>
							<p>Hi Matthew, So if I understand you have a map with annotations already and you want to be able to click on the annotation and create a new popup window – is that right?</p>
<p>If so, you can set the rightButton or leftButton of the annotation and then the map will respond to those clicks and you can access the annotation properties. I&#39;m not sure that the right or left views will fire click events:</p>
<pre><code class="hljs">
map.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">if</span>(e.clicksource === <span class="hljs-string">'rightButton'</span>){
         Titanium.API.info(<span class="hljs-string">"The annotation has been clicked: "</span> + e.annotation.title);
    }
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 9th 2011, 4:50:52 pm">May 9th 2011</span>
								by <span class='authorname'>brian kurzius</span><br>
								<a class="icon-bg icon-link" href="question/119447/mapview-coordinates-on-click#answer-207506" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Brian,  thanks for getting back to me.</p>
<p>I am getting access to the annotation from the event – that&#39;s not a problem.  But I couldn&#39;t get leftView or rightView to work on the Annotation, so I thought I would create my own Ti.UI.View, and set the &#39;right&#39; and &#39;bottom&#39; parameters based on the X and Y coordinates that I clicked on.  Then I would have my &quot;popup.&quot;</p>
<p>The documentation says that the X and Y should be part of the event that is passed to the &#39;click&#39; handler, but they are not there when i look for them in the Titanium Studio debugger.  That&#39;s my issue.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 9th 2011, 5:54:41 pm">May 9th 2011</span>
											by <span class='authorname'>Matthew Pickell</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207516">
				
						<section>
							<p>Looks like the missing properties of that event is a known bug: http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-2199</p>
<p>I was able to get the leftView with just Ti.UI.createView() – but on iPhone the annotation does not expand to a size to fit the view so its probably not what you were hoping for.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 9th 2011, 7:59:00 pm">May 9th 2011</span>
								by <span class='authorname'>brian kurzius</span><br>
								<a class="icon-bg icon-link" href="question/119447/mapview-coordinates-on-click#answer-207516" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Do you have example code for leftView?  I tried to put a view into it and nothing happened.  Maybe I set it up wrong.</p>
<p>What do you mean the annotation does not expand?  Can&#39;t a size be set on the leftView?</p>
<p>Any ideas on how else to get dynamic information to show up?  I guess I could get even more complicated and overlay a transparent view over the map and handle clicks in that…  but I am hoping not to go there.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 10th 2011, 10:09:45 am">May 10th 2011</span>
											by <span class='authorname'>Matthew Pickell</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I just did:</p>
<pre><code class="hljs">var myView = Ti.UI.createView({
    <span class="hljs-variable">height</span>:<span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">10</span>,
    backgroundColor: <span class="hljs-string">'#ffffff'</span>
});
var myLabel = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>: <span class="hljs-string">'1'</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">'#000000'</span>
});
myView.<span class="hljs-built_in">add</span>(myLabel);
</code></pre><p>and then assigned that to the leftView property.</p>
<p>As far as expanding it, it seems that iOS has a predefined height – whereas Android does not. The view can be whatever height but it expands beyond the size of the annotation and so looks very odd. What about just creating an overlay on the map and have your detail info appear in that – like an html modal window?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 10th 2011, 11:17:08 am">May 10th 2011</span>
											by <span class='authorname'>brian kurzius</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yeah, that overlay may be the best bet.  maybe i can scroll the window at the same time in a way does obscure the annotation, and gives the appearance of a popup.</p>
<p>Thanks for your help!</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 10th 2011, 1:57:57 pm">May 10th 2011</span>
											by <span class='authorname'>Matthew Pickell</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>..in a way that doesn&#39;t obscure the annotation…</p>
<p>mistyped..</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 10th 2011, 1:58:36 pm">May 10th 2011</span>
											by <span class='authorname'>Matthew Pickell</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
