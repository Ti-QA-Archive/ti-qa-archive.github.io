<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Adding multiple root-level emelents to index.xml view based on platform » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Adding multiple root-level emelents to index.xml view based on platform</h1>
		</header>
		<section>
			<p>It would be great if the alloy compiler let me add multiple root-level elements to the index view when these elements have the platform property.</p>
<p>####index.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">NavigationGroup</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"navgroup"</span> <span class="hljs-attribute">platform</span>=<span class="hljs-value">"ios,mobileweb"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"home"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">NavigationGroup</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"home"</span> <span class="hljs-attribute">platform</span>=<span class="hljs-value">"android"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>####home.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">RightNavButton</span> <span class="hljs-attribute">platform</span>=<span class="hljs-value">"ios"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"handleNewEvent"</span>&gt;</span>new<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">RightNavButton</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span>&gt;</span>This is the view<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>At least for me this way I can reuse more code and I find it very clean.<br>May be there is other way,</p>
<p>thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 3rd 2013, 4:03:06 pm">January 3rd 2013</span>
				by <span class='authorname'>Juan Ignacio Donoso</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-253863">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>What version of Alloy are you using? I just tested your markup and it works fine with Alloy 0.3.4, allowing for multiple top-level elements. One thing you need to fix with your markup is that the &lt;NavigationGroup&gt; must be contained in a &lt;Window&gt;. That might be the source of your problem. Here&#39;s your slightly modified markup that works just fine on iOS and Android.</p>
<h3 id="index-xml">index.xml</h3>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">NavigationGroup</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"navgroup"</span> <span class="hljs-attribute">platform</span>=<span class="hljs-value">"ios,mobileweb"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"home"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">NavigationGroup</span>&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"home"</span> <span class="hljs-attribute">platform</span>=<span class="hljs-value">"android"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><h3 id="home-xml">home.xml</h3>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">RightNavButton</span> <span class="hljs-attribute">platform</span>=<span class="hljs-value">"ios"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"handleNewEvent"</span>&gt;</span>new<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">RightNavButton</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span>&gt;</span>This is the view<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><h3 id="index-js">index.js</h3>
<pre><code class="hljs"><span class="hljs-variable">$.</span><span class="hljs-keyword">index</span>.<span class="hljs-keyword">open</span>();
</code></pre><h3 id="home-js">home.js</h3>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleNewEvent</span><span class="hljs-params">()</span> </span>{
    alert(<span class="hljs-string">'handled'</span>);    
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 4th 2013, 2:54:00 pm">January 4th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="question/146414/adding-multiple-root-level-emelents-to-indexxml-view-based-on-platform#answer-253863" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>you&#39;re right, my mistake was that I thought that the Ti.UI.navigationGroup was one of the elements that where allowed as root elements.  My bad, sorry.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 4th 2013, 4:02:44 pm">January 4th 2013</span>
											by <span class='authorname'>Juan Ignacio Donoso</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tryied to implement your example but I found a problem.</p>
<p>This is how it worked for me.</p>
<p>####index.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">platform</span>=<span class="hljs-value">"ios,mobileweb"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">NavigationGroup</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"navgroup"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"home"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">NavigationGroup</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"home"</span> <span class="hljs-attribute">platform</span>=<span class="hljs-value">"android"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>note that I move the platform property from the NavigationGroup to the Window element, without this change, when I do <code>$.index.open()</code> in the controller on android I get the window that wrap the navigationGroup intead the one in the the home.xml</p>
<p>also I had to do this on the index controller to work on both platforms.</p>
<h4 id="index-js">index.js</h4>
<pre><code class="hljs">var parentView = (<span class="hljs-type">OS_IOS</span> || <span class="hljs-type">OS_MOBILEWEB</span>)? $.getView<span class="hljs-literal">()</span> : $.getTopLevelViews<span class="hljs-literal">()</span>[<span class="hljs-number">0</span>].getView<span class="hljs-literal">()</span>;
parentView.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>instead of $.index.open(); I really don&#39;t know why.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 4th 2013, 7:46:28 pm">January 4th 2013</span>
											by <span class='authorname'>Juan Ignacio Donoso</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>you&#39;re right, my mistake on the location of the platform attribute</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 4th 2013, 8:36:39 pm">January 4th 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-253845">
				
						<section>
							<p>I think enforcing a single top-level UI element in the index.xml may be a little too restrictive. The intention was to make sure developers used the appropriate views when creating the initial container for their app, but as you are experiencing, it comes with some unfortunate limitations. </p>
<p>Can you create a <a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC">Titanium Community Jira ticket</a> for this and I&#39;ll see if I can squeeze it into the next development cycle for Alloy? Make sure to use the <strong>alloy</strong> label on the ticket. Thanks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 4th 2013, 12:47:41 pm">January 4th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="question/146414/adding-multiple-root-level-emelents-to-indexxml-view-based-on-platform#answer-253845" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>First ticket ever…  I hope is ok<br><a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC-1708">TC-1708</a>    :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 4th 2013, 1:03:17 pm">January 4th 2013</span>
											by <span class='authorname'>Juan Ignacio Donoso</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
