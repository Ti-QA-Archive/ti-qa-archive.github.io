<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Call Facebook.authorize() from alert dialog » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Call Facebook.authorize() from alert dialog</h1>
		</header>
		<section>
			<p>Since I upgraded from 1.6.x to 1.7.x functionality with regards calling <code>Ti.Facebook.authorize()</code> refuses to work.</p>
<p>When functionality is clicked that requires a facebook login I present a alert dialog. The user can choose to decline or to login to facebook. When the user selects to login I call <code>Ti.Facebook.authorize()</code>. Previously this opened the Facebook dialog. Now I see the facebook popup swiftly before it disappears without any error logging.</p>
<p>When I use the facebook login button in another screen it works but from the alert dialog it fails.</p>
<p>Any idea&#39;s on how to solve this?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 14th 2011, 7:50:47 am">August 14th 2011</span>
				by <span class='authorname'>Wienke Giezeman</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alert dialog</span></li>
					
						<li><span class='tagname'>authorize</span></li>
					
						<li><span class='tagname'>facebook</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Please post the code within the clicklistener on the alert dialog.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 14th 2011, 8:13:10 am">August 14th 2011</span>
								by <span class='authorname'>Chris Magnussen</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I use this function below when a tab is clicked when that need a facebook login.</p>
<pre><code class="hljs">facebookNotConnected = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span> (Ti.Facebook.loggedIn) {
        <span class="hljs-keyword">var</span> alertDialog = Titanium.UI.createAlertDialog({
            title: <span class="hljs-string">'Facebook'</span>,
            message: <span class="hljs-string">'To use this functionality you need to login with Facebook'</span>,
            buttonNames: [<span class="hljs-string">'Login Facebook'</span>,<span class="hljs-string">'No Thanks'</span>]
        });
        alertDialog.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
            <span class="hljs-keyword">if</span> (e.index === <span class="hljs-number">0</span>) {
                Ti.API.info(<span class="hljs-string">'user wants to login to facebook'</span>);
                Titanium.Facebook.authorize();
            };
        });
        alertDialog.show();
    }
}
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="August 14th 2011, 8:24:55 am">August 14th 2011</span>
								by <span class='authorname'>Wienke Giezeman</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Chris, any thoughts on this yet?</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 16th 2011, 4:50:35 am">August 16th 2011</span>
								by <span class='authorname'>Wienke Giezeman</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-216614">
				
						<section>
							<p>The facebook login button &quot;works&quot; (aka the window pops up) regardless of if the appid and permissions are set, the authorize method will cause the window to pop up but immediately close without these being set.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 16th 2011, 10:41:43 am">August 16th 2011</span>
								by <span class='authorname'>Matt Apperson</span><br>
								<a class="icon-bg icon-link" href="question/124236/call-facebookauthorize-from-alert-dialog#answer-216614" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>set the app_id correctly in the code and in the tiapp.xml. In 1.6.x this was working. The facebook app showed up and I was able to login.</p>
<p>Is this a bug or should? Any directions on how I could investigate this issue?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 21st 2011, 1:55:03 pm">August 21st 2011</span>
											by <span class='authorname'>Wienke Giezeman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>did you set the permissions? I dont think this to be a bug in the SDK… but thats what I am trying to make sure of… if you have set permissions… could you provide a code sample?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 21st 2011, 4:41:43 pm">August 21st 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Matt,</p>
<p>See the code below.</p>
<pre><code class="hljs">Titanium.Facebook.appid =  <span class="hljs-string">"181219095251677"</span>;
Titanium.Facebook.permissions = [<span class="hljs-string">'publish_stream'</span>, <span class="hljs-string">'read_stream'</span>, <span class="hljs-string">'offline_access'</span>];

facebookNotConnected = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span>(Ti.Facebook.loggedIn === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">var</span> alertDialog = Titanium.UI.createAlertDialog({
            title : <span class="hljs-string">'Facebook'</span>,
            message : <span class="hljs-string">'You need to login with Facebook'</span>,
            buttonNames : [<span class="hljs-string">'Login Facebook'</span>, <span class="hljs-string">'No Thanks'</span>]
        });
        alertDialog.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
            <span class="hljs-keyword">if</span>(e.index === <span class="hljs-number">0</span>) {
                Ti.API.info(<span class="hljs-string">'user wants to login to facebook'</span>);
                Titanium.Facebook.authorize();

            };
        });
        alertDialog.show();
    }
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 21st 2011, 5:36:19 pm">August 21st 2011</span>
											by <span class='authorname'>Wienke Giezeman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Matt, any conclusions on this yet?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 23rd 2011, 6:36:22 pm">August 23rd 2011</span>
											by <span class='authorname'>Wienke Giezeman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hmmm this does in fact look like a bug… I recommend you post a bug ticket to jira and past the link back here for others to find. The ticket should contain all needed code to just paste into app.js and show the bug, but should have as little code as you can to do that.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 23rd 2011, 8:52:43 pm">August 23rd 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>As a note, I have found that if you wrap the authorize call in a setTimout with a value of over 100 (1 tenth of a second) all works well… just a workaround till this bug is reported and fixed :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 24th 2011, 9:27:15 am">August 24th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>added the ticket to jira http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC-226</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 24th 2011, 11:08:01 am">August 24th 2011</span>
											by <span class='authorname'>Wienke Giezeman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This will not be fixed:</p>
<p>&quot;Launching a dialog from another dialog is not supported and not generally a good idea. Consider hiding the dialog and using an app level event to launch the FB dialog.&quot;</p>
<p>I will try this suggested solution</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 23rd 2011, 4:41:52 pm">November 23rd 2011</span>
											by <span class='authorname'>Wienke Giezeman</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-240780">
				
						<section>
							<p>In my app I&#39;m not launching the facebook login from a dialog and it does the same thing: the window disappears after a second. However I noticed that it begun to work well after I installed the official facebook app on the iPhone.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 13th 2012, 9:36:21 am">June 13th 2012</span>
								by <span class='authorname'>Damiano Gui</span><br>
								<a class="icon-bg icon-link" href="question/124236/call-facebookauthorize-from-alert-dialog#answer-240780" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
