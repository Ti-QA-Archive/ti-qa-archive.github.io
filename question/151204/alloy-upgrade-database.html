<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy upgrade Database » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy upgrade Database</h1>
		</header>
		<section>
			<p>How to force reinstall database every time open my app, with Alloy Framework?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 18th 2013, 9:17:10 pm">April 18th 2013</span>
				by <span class='authorname'>Alejandro Alfonso Oropeza López</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
				</ul>
			

			<section>
				<h5>9 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>why do you want to do this?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 2:07:18 pm">April 19th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>@Alejandro Alfonso Oropeza López : <strong>Your question is short but not clear . clear it first so any one can give you best suggestion or answer :(</strong></p>
</div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 2:13:46 pm">April 19th 2013</span>
								by <span class='authorname'>Dharmik Patel</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Well, i want update my database from db1.sql to db2.sqlite, they both have the same structure, but different datas. Thanks for you interest</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 2:14:47 pm">April 19th 2013</span>
								by <span class='authorname'>Alejandro Alfonso Oropeza López</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>what platforms? Please give more details.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 2:24:03 pm">April 19th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Plataform iOS<br>The use case is when you have an update from the app store. we want to update all data in the database, we want to make a replacement for the database, to install a new one with updated information. Not want to use update on specific rows (UPDATE SET WHERE), because we do not know exactly, what is the information that change, so we want to replace the file from the database. Thanks, for the support</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 2:30:44 pm">April 19th 2013</span>
								by <span class='authorname'>Alejandro Alfonso Oropeza López</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Please provide some code so we can try to find the problem or solve the problem in your code.</p>
<p>Thanks<br>Jigar</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 2:42:04 pm">April 19th 2013</span>
								by <span class='authorname'>Jigar Maheshwari</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>This is the behavior we need, but with Alloy Framework (Models, Migrations, etc …)</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> dbOLD = Titanium.Database.install(<span class="hljs-string">'db1.sqlite'</span>, <span class="hljs-string">'dbInstalled'</span>);
dbOLD.<span class="hljs-keyword">remove</span>();
<span class="hljs-keyword">var</span> db = Titanium.Database.install(<span class="hljs-string">'db2.sqlite'</span>, <span class="hljs-string">'dbInstalled'</span>);
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 2:49:55 pm">April 19th 2013</span>
								by <span class='authorname'>Alejandro Alfonso Oropeza López</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>is the structure of the database remaining the same though? Just the data is changing?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 2:52:59 pm">April 19th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>That&#39;s right, any suggestions?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 2:58:23 pm">April 19th 2013</span>
								by <span class='authorname'>Alejandro Alfonso Oropeza López</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-261123">
				
						<section>
							<p>I would suggest doing almost exactly what you just posted in the app&#x2F;alloy.js file:</p>
<h3 id="app-x2f-alloy-js">app&#x2F;alloy.js</h3>
<pre><code class="hljs"><span class="hljs-comment">// assuming the name of the existing database is "myDatabase"</span>
<span class="hljs-keyword">var</span> <span class="hljs-keyword">db</span> = Ti.Database.<span class="hljs-keyword">open</span>(<span class="hljs-string">"myDatabase"</span>);
<span class="hljs-keyword">db</span>.remove();
Titanium.Database.install('db2.sqlite', 'myDatabase');
</code></pre><p>Though you&#39;ll need to test this. I&#39;m not sure off hand if swapping the DB out from under Alloy will work right out of the box like that.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 19th 2013, 3:34:30 pm">April 19th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="../../question/151204/alloy-upgrade-database.html#answer-261123" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>exactly, and try in this way, but without any good result.. Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 4:44:10 pm">April 19th 2013</span>
											by <span class='authorname'>Alejandro Alfonso Oropeza López</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
