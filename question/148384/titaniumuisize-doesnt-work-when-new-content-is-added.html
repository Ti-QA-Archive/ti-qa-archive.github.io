<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium.UI.SIZE doesn&#39;t work when new content is added Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium.UI.SIZE doesn&#39;t work when new content is added</h1>
		</header>
		<section>
			<p>Hi guys. I&#39;m having trouble when adding content to an existent view. I found a solution, but it doesn&#39;t always work. To illustrate the problem here is an example. The following code creates a long view that exceeds the height  of the window. Inside the view there is a table and a button. A new row is added to the table when the button is clicked. You will see two problems when running this code, the table expands itself to cover only one row, and the general view doesn&#39;t expand enough to fit the new content, so the last button is hidden.</p>
<p>Tested in Titanium: 3.0.0, iPhone Simulator (also with previous Titanium)</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'#FFFFFF'</span>
});

var scrollview = Ti.UI.createScrollView({
    top: <span class="hljs-number">0</span>,
    left: <span class="hljs-number">0</span>,
    contentWidth: <span class="hljs-string">'auto'</span>,
    contentHeight: <span class="hljs-string">'auto'</span>
 });

var container = Ti.UI.createView({
    top: <span class="hljs-number">10</span>,
    left: <span class="hljs-number">10</span>,
    right: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: Ti.UI.FILL,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    borderWidth: <span class="hljs-number">1</span>,
    borderColor: <span class="hljs-string">'#000000'</span>,
    layout: <span class="hljs-string">'vertical'</span>
});

var table = Ti.UI.createTableView({
    data: [],
    <span class="hljs-variable">width</span>: Ti.UI.FILL,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE
});
container.<span class="hljs-built_in">add</span>(table);

var button = Ti.UI.createButton({
    title: <span class="hljs-string">' Add Row '</span>,
    top: <span class="hljs-number">5</span>,
    bottom: <span class="hljs-number">5</span>,
    right: <span class="hljs-number">5</span>,
    <span class="hljs-variable">width</span>: Ti.UI.SIZE,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE
});
button.addEventListener(<span class="hljs-string">'click'</span>, function(){
    var row = Ti.UI.createTableViewRow({
        title: <span class="hljs-string">'New Row'</span>,
        backgroundColor: <span class="hljs-string">'#CCCCCC'</span>
    });
    table.appendRow(row);
});
container.<span class="hljs-built_in">add</span>(button);

<span class="hljs-keyword">for</span>(var f = <span class="hljs-number">0</span>; f &lt; <span class="hljs-number">10</span>; f++){
    var label = Ti.UI.createLabel({
        top: <span class="hljs-number">15</span>,
        bottom: <span class="hljs-number">15</span>,
        left: <span class="hljs-number">15</span>,
        <span class="hljs-variable">height</span>: Ti.UI.SIZE,
        <span class="hljs-built_in">text</span>: <span class="hljs-string">'label number '</span> + f,
        font: {fontFamily: <span class="hljs-string">'Arial'</span>, fontSize: <span class="hljs-number">20</span>, fontWeight:<span class="hljs-string">'bold'</span>}
     });
     container.<span class="hljs-built_in">add</span>(label);
}

scrollview.<span class="hljs-built_in">add</span>(container);
win.<span class="hljs-built_in">add</span>(scrollview);
win.<span class="hljs-built_in">open</span>();
</code></pre><p>OK. That example shows the problems I&#39;m having. The next code solves those issues assigning a new value to the height property of the container every time a new row is added to the table:</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'#FFFFFF'</span>
});

var scrollview = Ti.UI.createScrollView({
    top: <span class="hljs-number">0</span>,
    left: <span class="hljs-number">0</span>,
    contentWidth: <span class="hljs-string">'auto'</span>,
    contentHeight: <span class="hljs-string">'auto'</span>
 });

var container = Ti.UI.createView({
    top: <span class="hljs-number">10</span>,
    left: <span class="hljs-number">10</span>,
    right: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: Ti.UI.FILL,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    borderWidth: <span class="hljs-number">1</span>,
    borderColor: <span class="hljs-string">'#000000'</span>,
    layout: <span class="hljs-string">'vertical'</span>
});

var table = Ti.UI.createTableView({
    data: [],
    <span class="hljs-variable">width</span>: Ti.UI.FILL,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE
});
container.<span class="hljs-built_in">add</span>(table);

var button = Ti.UI.createButton({
    title: <span class="hljs-string">' Add Row '</span>,
    top: <span class="hljs-number">5</span>,
    bottom: <span class="hljs-number">5</span>,
    right: <span class="hljs-number">5</span>,
    <span class="hljs-variable">width</span>: Ti.UI.SIZE,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE
});
button.addEventListener(<span class="hljs-string">'click'</span>, function(){
    var row = Ti.UI.createTableViewRow({
        title: <span class="hljs-string">'New Row'</span>,
        backgroundColor: <span class="hljs-string">'#CCCCCC'</span>
    });
    table.appendRow(row);

    scrollview.<span class="hljs-variable">height</span> = Ti.UI.SIZE;
});
container.<span class="hljs-built_in">add</span>(button);

<span class="hljs-keyword">for</span>(var f = <span class="hljs-number">0</span>; f &lt; <span class="hljs-number">10</span>; f++){
    var label = Ti.UI.createLabel({
        top: <span class="hljs-number">15</span>,
        bottom: <span class="hljs-number">15</span>,
        left: <span class="hljs-number">15</span>,
        <span class="hljs-variable">height</span>: Ti.UI.SIZE,
        <span class="hljs-built_in">text</span>: <span class="hljs-string">'label number '</span> + f,
        font: {fontFamily: <span class="hljs-string">'Arial'</span>, fontSize: <span class="hljs-number">20</span>, fontWeight:<span class="hljs-string">'bold'</span>}
     });
     container.<span class="hljs-built_in">add</span>(label);
}

scrollview.<span class="hljs-built_in">add</span>(container);
win.<span class="hljs-built_in">add</span>(scrollview);
win.<span class="hljs-built_in">open</span>();
</code></pre><p>Only the line &quot;scrollview.height = Ti.UI.SIZE;&quot; was added to the previous code. The problem with this solution is that it doesn&#39;t work in my app (the scroll view doesn&#39;t scroll anymore when I do this). This doesn&#39;t work in Android either, but I only tried in the emulator (after a few rows are added, the content begins to disappear). It doesn&#39;t seems to be the right solution, but I don&#39;t know what else to try.</p>
<p>I tried different approaches, but I always have one problem or another. It&#39;s driving me crazy. It looks like it is almost impossible to add new content to a view without having some kind of issue. Any help will be appreciated. </p>
<p>Thanks<br>JD</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 17th 2013, 7:54:31 am">February 17th 2013</span>
				by <span class='authorname'>John Gauchat</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>size</span></li>
					
						<li><span class='tagname'>ui.size</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-2</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-256957">
				
						<section>
							<p>Hi</p>
<p>I am only going to look at the first block of code as you say the second block is an attempt to fix the first block.</p>
<p>The problem you have is not with <strong>Ti.UI.SIZE</strong>, it is working exactly as it should.  The problem is with what you are trying to create and more importantly the mixing of two different scrolling views without understanding fully how each works.</p>
<p>So before I can provide you with a concise answer I need you to confirm your intended structure as the logic of it is somewhat surprising to me.</p>
<pre><code class="hljs">Window
  Scroll view
    Table
      Row 1
      Row x
    Button
    <span class="hljs-built_in">Label</span> <span class="bash"><span class="hljs-number">1</span>
</span>    <span class="hljs-built_in">Label</span> <span class="bash"><span class="hljs-number">2</span>
</span>    <span class="hljs-built_in">Label</span> <span class="bash">...
</span>    <span class="hljs-built_in">Label</span> <span class="bash"><span class="hljs-number">10</span></span>
</code></pre><p>When you press the button you want another row and everything below it should move down to accommodate it?</p>
<ul>
<li>why are you adding a <strong>tableView</strong> to a scrollView?</li>
<li>why are you adding 10 dummy labels underneath?</li>
<li>are the labels actually going to be used in your app or designed to test the table expansion?</li>
<li>is this in fact your intended layout?</li>
</ul>
<p>Once you have answered all these I should be able to provide you with a solution, but I will need to understand the logic behind your need to make it fit.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 17th 2013, 10:21:48 am">February 17th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/148384/titaniumuisize-doesnt-work-when-new-content-is-added#answer-256957" rel="permalink">permalink</a>
							</div>

							<h5>16 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Malcolm. This is just an example to demonstrate the issues I was having (that&#39;s why the dummy labels). I need to insert a tableView inside a scrollView because I&#39;m creating an invoice. It is a big form where the users can insert all the information of the invoice, including a list of the items sold. The table is used to insert the items sold, and it grows according to the items added by the user from a semi modal window. Below the table are other input fields to insert values and taxes for the invoice and also a button to save the invoice. What disappears in my app is usually the Save button (But only when the first row is added. When a second or third rows are added, the container is expanded correctly and the Save button is still visible). This erratic behaviour made me look for solutions, but I couldn&#39;t find any.</p>
<p>It looks like no matter what, the size of the containers are not calculate right when a table grows inside.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2013, 5:53:10 pm">February 17th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You need to think a little differently in how you build the table.  You want to have a table of rows but also allow for items both above and below.  Also when you add rows those items below must move the items below the other rows down enough so all rows can be seen and not covered.</p>
<p>This can be achieved in a number of ways, the simplest of which is shown below.  It uses header and footer views, these will be positioned above and below ALL rows and scrolls along with them.  </p>
<p>Additionally if you add the rows in a section you can also gain the benefit of another set of header and footer - this set a float above and below the rows, however if the total height of all rows exceed the visible portal view then the section header and footer fix to the top and bottom of the portal as required.</p>
<p>The section headers give your specific need an additional benefit, you can use them to show column headers and total rows.</p>
<p>I have created a full test to illustrate what I mean, this add each of the header and footer view and section header and section footer views.  Inside each of these you can add as many other views, text fields and buttons as you require.</p>
<p>One important note; section headers and footer REQUIRE a fixed height - you cannot use Ti.UI.SIZE.  You can change the height later but it cannot be automatically dynamic.</p>
<p>Let me know what you think;</p>
<pre><code class="hljs">var intRow = <span class="hljs-number">0</span>, intMax = <span class="hljs-number">5</span>;
var intLastItem = <span class="hljs-number">0</span>;
var viewHeader = Ti.UI.createView({
    backgroundColor: <span class="hljs-string">'#eee'</span>,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    <span class="hljs-variable">width</span>: Ti.UI.FILL    
});
var lblHeader = Ti.UI.createLabel({
    bottom: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">'#000099'</span>,
    font: {
        fontSize: <span class="hljs-number">12</span>
    },
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    left: <span class="hljs-number">10</span>,
    right: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">'Header'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">'left'</span>,
    top: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: Ti.UI.SIZE
});
viewHeader.<span class="hljs-built_in">add</span>(lblHeader);
var viewSectionHeader = Ti.UI.createView({
    backgroundColor: <span class="hljs-string">'#ddd'</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>, <span class="hljs-comment">// cannot be Ti.UI.SIZE</span>
    <span class="hljs-variable">width</span>: Ti.UI.FILL    
});
var lblSectionHeader = Ti.UI.createLabel({
    bottom: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">'#009900'</span>,
    font: {
        fontSize: <span class="hljs-number">12</span>
    },
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    left: <span class="hljs-number">10</span>,
    right: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">'Section Header'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">'left'</span>,
    top: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: Ti.UI.SIZE
});
viewSectionHeader.<span class="hljs-built_in">add</span>(lblSectionHeader);
var viewSectionFooter = Ti.UI.createView({
    backgroundColor: <span class="hljs-string">'#ddd'</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>, <span class="hljs-comment">// cannot be Ti.UI.SIZE</span>
    <span class="hljs-variable">width</span>: Ti.UI.FILL    
});
var lblSectionFooter = Ti.UI.createLabel({
    bottom: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">'#009900'</span>,
    font: {
        fontSize: <span class="hljs-number">12</span>
    },
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    left: <span class="hljs-number">10</span>,
    right: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">'Section Footer'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">'left'</span>,
    top: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: Ti.UI.SIZE
});
viewSectionFooter.<span class="hljs-built_in">add</span>(lblSectionFooter);
var section = Ti.UI.createTableViewSection({
    footerView: viewSectionFooter,
    headerView: viewSectionHeader
});
<span class="hljs-keyword">for</span> (intRow = <span class="hljs-number">0</span>; intRow &lt; intMax; intRow = intRow + <span class="hljs-number">1</span>) {
    section.<span class="hljs-built_in">add</span>(Ti.UI.createTableViewRow({ title: <span class="hljs-string">'Row '</span> + (intRow + <span class="hljs-number">1</span>) }));
}
intLastItem = intRow;
var viewFooter = Ti.UI.createView({
    backgroundColor: <span class="hljs-string">'#eee'</span>,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    <span class="hljs-variable">width</span>: Ti.UI.FILL    
});
var lblFooter = Ti.UI.createLabel({
    bottom: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">'#000099'</span>,
    font: {
        fontSize: <span class="hljs-number">12</span>
    },
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    left: <span class="hljs-number">10</span>,
    right: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">'Footer'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">'left'</span>,
    top: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: Ti.UI.SIZE
});
viewFooter.<span class="hljs-built_in">add</span>(lblFooter);
var tbl = Ti.UI.createTableView({
    data: [section],
    footerView: viewFooter,
    headerView: viewHeader,
    <span class="hljs-variable">height</span>: Ti.UI.FILL,
    <span class="hljs-variable">width</span>: Ti.UI.FILL
});
win.<span class="hljs-built_in">add</span>(tbl); <span class="hljs-comment">// uses win - change as required</span>
var btnAdd = Ti.UI.createButton({
    title: <span class="hljs-string">'Add'</span>
});
win.setRightNavButton(btnAdd); <span class="hljs-comment">// uses win - change as required</span>
btnAdd.addEventListener(<span class="hljs-string">'click'</span>, function (e) {
    intLastItem = intLastItem + <span class="hljs-number">1</span>;
    tbl.appendRow(Ti.UI.createTableViewRow({ title: <span class="hljs-string">'Row '</span> + intLastItem }));
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 17th 2013, 7:14:40 pm">February 17th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcolm. Thanks, but it is far away from what I need. First, the headers and footers have to be of a fixed size, and that&#39;s impossible to determine in my application, for example, I don&#39;t know how many lines the name of the client is going to occupy at the top because it depends on how long it is. There are other fields like the name of the category, for instance, that can also occupy one or two lines, depending on the category selected. I need to set the size automatically for several fields in the form. Another problem I found is that the header doesn&#39;t scroll with the table, it is preserved at the top of the window (the same happens with the footer). This will corrupt my layout (the table is just another element of the invoice, but not the most important), and it is also impossible to work with when they are too big (try to define a size of 400 units for the header, for example, and you will understand). I&#39;m thinking about replacing the table by a group of views (instead of inserting a new row I insert a new view), but it is going to be a mess because I have to reproduce the behaviour of the table for every view, and I still don&#39;t know if it is going to work fine. What do you think?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2013, 8:33:27 pm">February 17th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I think you will agree that given the very little detail about what you want and how you want it, with the code you provided that does not come close to helping me to guess - that anything I provide is simply showing you how to do things, not showing you how to do your specific thing.</p>
<p>Whilst I understand you are trying to get a solution and am not sure you are trying to help me (and anyone else) by providing sufficient information with which an actual answer can be provided.</p>
<p>The code I supplied (which was fully tested BTW) provided you with knowledge of several places you can put the extra fields.  It was not a solution for your exact needs- still do not know what those are.  Plus not sure if the aim here is to provide such detail.</p>
<p>I would suggest you create some form of mock-up or picture to provide an indication of where your problems are.  Remember I am smart but not a mind-reader, there is no app for that.</p>
<p>As the great Stephen Feather says; help us to help you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2013, 10:22:48 pm">February 17th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcolm. I&#39;m sorry, by your previous explanation I thought you got it. To make it easy for you, I recorded this video. In the video I show you the view with all the fields for the invoice, and I add two new items to the invoice (table). After adding these items I also show how the Save button at the bottom of the invoice disappear. That is what I&#39;m trying to avoid and I can&#39;t find the way to do it. I think maybe creating the list of items with views instead of a table will solve the issue, but it take a lot of work and I want to be sure that that&#39;s the right solution.</p>
<p>http:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=2F1CigRhiyQ</p>
<p>Thanks<br>JD</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2013, 10:59:38 pm">February 17th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcolm. I tried replacing the table with a group of views, and it&#39;s working exactly as I expected, so I think I&#39;m going to take that approach. The problem is just with tables, apparently. Titanium doesn&#39;t calculate the new height correctly when new rows are added to a table, but there is no problem with views. Here is the code I used to test it. It works perfectly on iPhone simulator and Android emulator:</p>
<pre><code class="hljs">var counter = <span class="hljs-number">1</span>;

var createrow = function(<span class="hljs-built_in">text</span>){
    var view = Ti.UI.createView({
        top: <span class="hljs-number">0</span>,
        left: <span class="hljs-number">0</span>,
        <span class="hljs-variable">width</span>: Ti.UI.FILL,
        <span class="hljs-variable">height</span>: Ti.UI.SIZE
    });
    var label = Ti.UI.createLabel({
        <span class="hljs-built_in">text</span>: <span class="hljs-built_in">text</span>,
        font: { fontSize: <span class="hljs-number">18</span>, fontWeight: <span class="hljs-string">'bold'</span> },
    });
    view.<span class="hljs-built_in">add</span>(label);

    <span class="hljs-keyword">return</span> view;
};

var win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'#FFFFFF'</span>
});

var scrollview = Ti.UI.createScrollView({
    top: <span class="hljs-number">0</span>,
    left: <span class="hljs-number">0</span>,
    contentWidth: <span class="hljs-string">'auto'</span>,
    contentHeight: <span class="hljs-string">'auto'</span>
 });

var container = Ti.UI.createView({
    top: <span class="hljs-number">10</span>,
    left: <span class="hljs-number">10</span>,
    right: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: Ti.UI.FILL,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    borderWidth: <span class="hljs-number">1</span>,
    borderColor: <span class="hljs-string">'#000000'</span>,
    layout: <span class="hljs-string">'vertical'</span>
});

var table = Ti.UI.createView({
    <span class="hljs-variable">width</span>: Ti.UI.FILL,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    layout: <span class="hljs-string">'vertical'</span>
});
container.<span class="hljs-built_in">add</span>(table);

var button = Ti.UI.createButton({
    title: <span class="hljs-string">' Add Row '</span>,
    top: <span class="hljs-number">5</span>,
    bottom: <span class="hljs-number">5</span>,
    right: <span class="hljs-number">5</span>,
    <span class="hljs-variable">width</span>: Ti.UI.SIZE,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE
});
button.addEventListener(<span class="hljs-string">'click'</span>, function(){
    var row = createrow(<span class="hljs-string">'New row '</span> + counter);
    table.<span class="hljs-built_in">add</span>(row);
    counter++;
});
container.<span class="hljs-built_in">add</span>(button);

<span class="hljs-keyword">for</span>(var f = <span class="hljs-number">0</span>; f &lt; <span class="hljs-number">10</span>; f++){
    var label = Ti.UI.createLabel({
        top: <span class="hljs-number">15</span>,
        bottom: <span class="hljs-number">15</span>,
        left: <span class="hljs-number">15</span>,
        <span class="hljs-variable">height</span>: Ti.UI.SIZE,
        <span class="hljs-built_in">text</span>: <span class="hljs-string">'label number '</span> + f,
        font: {fontFamily: <span class="hljs-string">'Arial'</span>, fontSize: <span class="hljs-number">20</span>, fontWeight:<span class="hljs-string">'bold'</span>}
     });
     container.<span class="hljs-built_in">add</span>(label);
}

scrollview.<span class="hljs-built_in">add</span>(container);
win.<span class="hljs-built_in">add</span>(scrollview);
win.<span class="hljs-built_in">open</span>();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 1:04:12 am">February 18th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You could have achieved everything in your video with the code I gave you and using just the header and footer views which auto size.  In your previous example you said you needed a section to be fixed, but your own example has no fixed section except for the top part which is outside of the table.</p>
<p>Shame you would have had a VERY simple implementation giving you everything you needed and all adhering to the iOS UI style guide at the same time.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 8:46:34 am">February 18th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Malcolm. As I said, your code changes my design, but I gave it another try, and I tried to adapt it to my design and my app, and it didn&#39;t work. It&#39;s like headers and footers have a maximum size or something, so they don&#39;t adapt automatically to the content. I think headers and footers were not ment to be used the way you proposed, with so much content inside. But anyway, I need to wrap the table in a view with a border, to differentiate the field from the rest, and I can&#39;t do that with your code. One way or another, your example doesn&#39;t apply to what I want to do. Doesn&#39;t matter if it adheres to the style guides or not, I can&#39;t achieve the same design making everything part of the table as you proposed. The table is just another element of the form, not the form itself.</p>
<p>Here is the code I used to test your implementation. I had to erase sections because they were making things even worse, as I explained in a previous message:</p>
<pre><code class="hljs">var intLastItem = <span class="hljs-number">0</span>;
var win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'#FFFFFF'</span>
});

var viewHeader = Ti.UI.createView({
    backgroundColor: <span class="hljs-string">'#eee'</span>,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    <span class="hljs-variable">width</span>: Ti.UI.FILL    
});
var lblHeader = Ti.UI.createLabel({
    bottom: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">'#000099'</span>,
    font: {
        fontSize: <span class="hljs-number">12</span>
    },
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    left: <span class="hljs-number">10</span>,
    right: <span class="hljs-number">10</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">'Header'</span>,
    <span class="hljs-built_in">textAlign</span>: <span class="hljs-string">'left'</span>,
    top: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: Ti.UI.SIZE
});
viewHeader.<span class="hljs-built_in">add</span>(lblHeader);

var viewFooter = Ti.UI.createView({
    backgroundColor: <span class="hljs-string">'#eee'</span>,
    <span class="hljs-variable">height</span>: Ti.UI.SIZE,
    <span class="hljs-variable">width</span>: Ti.UI.FILL,
    layout: <span class="hljs-string">'vertical'</span>
});
var btnAdd = Ti.UI.createButton({
    title: <span class="hljs-string">'Add'</span>
});
btnAdd.addEventListener(<span class="hljs-string">'click'</span>, function (e) {
    intLastItem = intLastItem + <span class="hljs-number">1</span>;
    tbl.appendRow(Ti.UI.createTableViewRow({ title: <span class="hljs-string">'Row '</span> + intLastItem }));
});
viewFooter.<span class="hljs-built_in">add</span>(btnAdd);

<span class="hljs-keyword">for</span>(var f = <span class="hljs-number">0</span>; f &lt; <span class="hljs-number">10</span>; f++){
    var label = Ti.UI.createLabel({
        top: <span class="hljs-number">15</span>,
        bottom: <span class="hljs-number">15</span>,
        left: <span class="hljs-number">15</span>,
        <span class="hljs-variable">height</span>: Ti.UI.SIZE,
        <span class="hljs-built_in">text</span>: <span class="hljs-string">'label number '</span> + f,
        font: {fontFamily: <span class="hljs-string">'Arial'</span>, fontSize: <span class="hljs-number">20</span>, fontWeight:<span class="hljs-string">'bold'</span>}
     });
     viewFooter.<span class="hljs-built_in">add</span>(label);
}

var tbl = Ti.UI.createTableView({
    data: [{title: <span class="hljs-string">'Row 1'</span>}],
    footerView: viewFooter,
    headerView: viewHeader,
    <span class="hljs-variable">height</span>: Ti.UI.FILL,
    <span class="hljs-variable">width</span>: Ti.UI.FILL
});
win.<span class="hljs-built_in">add</span>(tbl);

win.<span class="hljs-built_in">open</span>();
</code></pre><p>As you can see if you run this code, the footer has a maximum size, so some of the lines just disappear (which is what I was trying to avoid in the first place).</p>
<p>You mentioned that there are other ways to do it. What are those other ways? It is using views to create a table instead of a tableview? Because that&#39;s the only way I found so far. Titanium does not calculate the size of the table right, but it does it well with views.</p>
<p>JD</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 9:18:01 pm">February 18th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oh, and it was a misunderstanding, when I said &quot;the headers and footers have to be of a fixed size&quot; I was referring to the headers and footers of YOUR code, not my app. My content is flexible and I need flexible views.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 9:28:24 pm">February 18th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I am not sure if I want to provide you with an answer as so far your attitude has been less than appropriate and you appear to have made your mind up that your way is best and that all faults lay with Titanium.</p>
<p>Your overly elongated layout is causing many of the problems.  You do not have the knowledge to work around the restrictions that you think exist.  You decide that the help of others is useless unless it miraculously solves your exact needs on the first go and before you have provided sufficient information to have helped.</p>
<p>There are always solutions - even ones that work with your layout despite my own concerns with it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 10:22:41 pm">February 18th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oh man, your ego turns you into a horrible piece of crap. I&#39;m not going to apply a solution that DOESN&#39;T work just because it comes from you! I explained why your solution was not what I was looking for, and why it didn&#39;t solve the problem caused by the miscalculation of Titanium (that exist, it is there, whether you like it or not). I NEVER mistreated you or undervalued your help. I explained EVERYTHING with detail. I really don&#39;t know what the fuck is your problem, man. But you need help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 10:33:21 pm">February 18th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I did not ask you to apply a solution that does not work.  I provided you with a framework to place your fields into, I pointed out that some parts were optional.</p>
<p>You immediately decided that as it did not actually solve your problem first time you would find faults with it based on factors you had not originally disclosed and that dis not appear or were even mentioned in your own code snippet.</p>
<p>I asked you to explain your actual needs further as they differed greatly from the original information.  You provided a video.  Before I had time to watch the video you had decided to go your own route.  I pointed out that was shame as there was a simpler route.</p>
<p>You decided to provide a modified version of my code framework (taking time to criticise it again - despite you not understanding it) and thought it best to show me that there was an apparent limitation of Titanium.</p>
<p>You then jumped back in with another clarification loaded up with another complaint.</p>
<p>All this time I have not been able to provide you with a revised version of the framework as you had allowed any time between providing the code that you believe shows there is a problem with my solution (which you had not actually received yet) and actually receiving a revised version.</p>
<p>As I said previously it was a shame as I have an answer and I had spent time checking it.</p>
<p>Just because you believe Titanium is miscalculating something does not mean it is.  It is clear you have not needed to solve this problem before so you assumed there was a fault and you assumed it was with Titanium.</p>
<p>You believe I have an ego turns me into a horrible <em>**</em>.  I give my time freely to any and all who come by here, I provide answers to questions, small snippets of code, libraries, modules and full solutions where required.  I have no ego but I do ask that people do not disrespect me or others that have to read your bad language.</p>
<p>As I said I had provided you with a framework for you to hang your code on.  You had dismissed it before I could work with you on it.  I tried again to point out there was a solution and you dismissed it again - thinking the original framework was it, I never once said it was.</p>
<p>I would suggest you refrain from the use of bad language - even if you think I deserve it as it will only serve to give yourself a bad name and could even have you blocked from the Q&amp;A.</p>
<p>Contrary to what you believe - it is not I that needs help but rather you, as I am not the one who asked the question just the one who tried several times to provide you with the help to answer your question.</p>
<p>As I say - shame, I had the answer you just did not let me provide it.  But you know best of course.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 11:07:03 pm">February 18th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>my, my, my. Tremendous ego you have there. You presumed a LOT of things. I didn&#39;t even try to apply &quot;my&quot; solution to my app, I was just showing what I found in case that help you and others find a solution. But you presumed that I was going my own way and ignoring your contribution. That&#39;s the product of an egocentric personality. I NEVER dismiss your framework, as it is CLEARLY used to provide the last example and try to make it work. But for the reasons I already explained again and again, it doesn&#39;t apply to my app (your ego didn&#39;t let you see the reasons). So I was proposing other approaches, but you still insist that the only way to go is YOUR way, which is another sign of a tremendous ego. I NEVER insulted anyone, until last time, when I discovered what a horrible person you are. I rather have to resctructure my whole app to have to tolerate your bad treatment and judgment.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 11:24:21 pm">February 18th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">Oh man, your ego turns you <span class="hljs-keyword">into</span> <span class="hljs-operator">a</span> horrible piece <span class="hljs-operator">of</span> crap.
</code></pre><p>John,</p>
<p>There is no cause for this kind of personal abuse in this forum particularly towards a member of the community that has tried over a number of days to explain why the problem exists, why your layout style contributes to what you are experiencing, and has offered a work around.  Kindly refrain from this uncivil level of behavior in the future should you wish to continue using this forum.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 19th 2013, 1:15:00 am">February 19th 2013</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Stephen. I&#39;m sorry but he didn&#39;t try to help, he tried to impose his point of view. I did all I could to explain the problem, I wrote codes, recorded a video and even try to come up with different solutions to contribute with his efforts and he just treated me like crap &quot;if you don&#39;t use this solution then you don&#39;t deserve my attention&quot;. He was EXTREMELY rude and NEVER explained to me why the problem existed (as you mentioned) That NEVER happened. You just have to read my messages. I NEVER mistreated him or insulted him or even ignored his contributions. It was just his tremendous ego that made him think that. He doesn&#39;t have the right to treat me like that and I won&#39;t tolerate that. I understand you point of view, please understand mine.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 19th 2013, 1:35:04 am">February 19th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Can you believe this guyâ¦</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 19th 2013, 7:52:28 am">February 19th 2013</span>
											by <span class='authorname'>Christian Brousseau</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-256954">
				
						<section>
							<p>Please try this pattern:</p>
<pre><code class="hljs">exports.create = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createScrollView({
            top: <span class="hljs-number">0</span>,
            left: <span class="hljs-number">0</span>,
            contentWidth: Ti.UI.FILL,
            contentHeight: Ti.UI.SIZE,
        width : Ti.UI.FILL,
        height : Ti.UI.FILL,
        layout :<span class="hljs-string">'vertical'</span>    <span class="hljs-comment">// &lt;== it is the new property</span>
     });
    <span class="hljs-keyword">self</span>.tableview = Ti.UI.createtableView({top:<span class="hljs-number">0</span>});
    <span class="hljs-keyword">self</span>.add(<span class="hljs-keyword">self</span>.tableview);
    / * filling of view: */
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 17th 2013, 8:47:36 am">February 17th 2013</span>
								by <span class='authorname'>Rainer Schleevoigt</span><br>
								<a class="icon-bg icon-link" href="question/148384/titaniumuisize-doesnt-work-when-new-content-is-added#answer-256954" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Rainer whilst this pattern is good it has two problems;</p>
<ul>
<li>you are assigning the result of the tableView create to the scrollView as a reference and then adds it to the scrollView as a view, you have now created a reference which is simply not required.</li>
<li>the solution goes nowhere near actually addressing any of the issues that John has created trying to solve his problem.</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2013, 10:26:00 am">February 17th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I think: if I kill (=null) self, then self.tableview is also killed.If I use a new variable like &#39;var tableview&#39; then the object leaves in memory. Is it right?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2013, 10:36:06 am">February 17th 2013</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Rainer as you are creating the table inside the CommonJS export function and the table should only be accessible within that function.  Adding it to the scrollView means it is returned externally at the same time as the scrollView, this is unnecessary and stops the true nature of the CommonJS where everything is sectioned off and nothing that is not specifically exported should be available.</p>
<p>The variable method and the custom property of the scrollView have the same end result;</p>
<ul>
<li>they both have a memory assignment</li>
<li>neither will be released until the variable assigned to the require is disposed of either automatically or by your own choice</li>
<li>they have the same memory requirements</li>
</ul>
<p>The variable being slightly better (in my opinion) due to;</p>
<ul>
<li>the disassociation from the returned object</li>
<li>not accidentally choosing a name that is reserved either currently or in the future</li>
<li>the cleaner declaration in scope</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2013, 4:11:28 pm">February 17th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Rainer. I tried to configure the scrollview the way you proposed but it doesn&#39;t change anything. The size of the table is not properly calculated by Titanium and the container of my form is not resized. Thanks anyway. I think I&#39;m going to replace the table by views, because Titanium has a lot of problems with tables.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 9:24:59 pm">February 18th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
