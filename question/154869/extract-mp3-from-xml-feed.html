<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>extract mp3 from xml feed Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>extract mp3 from xml feed</h1>
		</header>
		<section>
			<p>Hi all, I am trying to extract the following tag from an xml feed:</p>
<pre><code class="hljs">&lt;enclosure url=<span class="hljs-string">"http://www.highlandradio.com/wp-content/uploads/2013/07/flac830.mp3"</span> length=<span class="hljs-string">"209736"</span> <span class="hljs-class"><span class="hljs-keyword">type</span></span>=<span class="hljs-string">"audio/mpeg"</span>/&gt;
</code></pre><p>So I was using the same method as with all my other tags:</p>
<pre><code class="hljs">items.<span class="hljs-function"><span class="hljs-title">item</span><span class="hljs-params">(i)</span></span>.<span class="hljs-function"><span class="hljs-title">getElementsByTagName</span><span class="hljs-params">(<span class="hljs-string">"enclosure"</span>)</span></span>.<span class="hljs-function"><span class="hljs-title">item</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>.text
</code></pre><p>What am I doing wrong? Is the issue because the tag isn&#39;t exactly like : &lt;enclosure&gt;xxx&lt;&#x2F;enclosure&gt;</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 15th 2013, 7:23:05 am">July 15th 2013</span>
				by <span class='authorname'>user 4683</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>enclosure</span></li>
					
						<li><span class='tagname'>mp3</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-265906">
				
						<section>
							<p>This is how you get attributes from a node:</p>
<pre><code class="hljs">items.<span class="hljs-property">item</span>(i).getElementsByTagName(<span class="hljs-string">"enclosure"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"url"</span>);
</code></pre><p>I&#39;m not sure if the first part with items.item(i) is correct though, I don&#39;t know your xml structure.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 15th 2013, 8:00:36 am">July 15th 2013</span>
								by <span class='authorname'>Alberto Marcone</span><br>
								<a class="icon-bg icon-link" href="question/154869/extract-mp3-from-xml-feed#answer-265906" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Alberto Marcone, this is causing the app to crash. I am getting the blue arrow beside this line indicating I need to debug.The xml structure can be found here: www.highlandradio.com&#x2F;feed My loop for accessing the title of each news article is </p>
<pre><code class="hljs">items.<span class="hljs-function"><span class="hljs-title">item</span><span class="hljs-params">(i)</span></span>.<span class="hljs-function"><span class="hljs-title">getElementsByTagName</span><span class="hljs-params">(<span class="hljs-string">"enclosure"</span>)</span></span>.<span class="hljs-function"><span class="hljs-title">item</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>.text
</code></pre><p>and this is returning the correct data</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 15th 2013, 11:42:30 am">July 15th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>edit: I meant </p>
<pre><code class="hljs">items.<span class="hljs-function"><span class="hljs-title">item</span><span class="hljs-params">(i)</span></span><span class="hljs-class">.getElementsBy</span> <span class="hljs-function"><span class="hljs-title">TagName</span><span class="hljs-params">(<span class="hljs-string">"title"</span>)</span></span>.<span class="hljs-function"><span class="hljs-title">item</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>.text
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 16th 2013, 7:26:40 am">July 16th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>there&#39;s a bit of a mess here.</p>
<p>You&#39;re working with the enclosure tag, the title is something else.<br>What you should do is the following:</p>
<pre><code class="hljs">currNode = items.<span class="hljs-property">item</span>(i).getElementsByTagName(<span class="hljs-string">"enclosure"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>);

console.<span class="hljs-command">log</span>(currNode.getAttribute(<span class="hljs-string">"url"</span>));
console.<span class="hljs-command">log</span>(currNode.getAttribute(<span class="hljs-string">"length"</span>));
console.<span class="hljs-command">log</span>(currNode.getAttribute(<span class="hljs-string">"type"</span>));
</code></pre><p>if this is not working, you&#39;re doing something wrong somewhere else. There&#39;s still the other option suggested by Malcolm. I struggled with android and xml parsing too, so this could be a good solution to this problem.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2013, 7:35:41 am">July 16th 2013</span>
											by <span class='authorname'>Alberto Marcone</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Alberto Marcone I am using enclose, I was just explaining that </p>
<pre><code class="hljs">items.<span class="hljs-function"><span class="hljs-title">item</span><span class="hljs-params">(i)</span></span><span class="hljs-class">.getElementsBy</span> <span class="hljs-function"><span class="hljs-title">TagName</span><span class="hljs-params">(<span class="hljs-string">"title"</span>)</span></span>.<span class="hljs-function"><span class="hljs-title">item</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>.text
</code></pre><p>returne the correct result. I just tested:</p>
<pre><code class="hljs">console.<span class="hljs-function"><span class="hljs-title">log</span><span class="hljs-params">(items.item(i)</span></span>.<span class="hljs-function"><span class="hljs-title">getElementsByTagName</span><span class="hljs-params">(<span class="hljs-string">"enclosure"</span>)</span></span>.<span class="hljs-function"><span class="hljs-title">item</span><span class="hljs-params">(o)</span></span>)
</code></pre><p>and it returned null for some and [object element] for others. I will try what you&#39;ve posted above but it doesn&#39;t seem much different to what I already tried yesterday. Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2013, 7:40:24 am">July 16th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Alberto yep it&#39;s crashing at </p>
<pre><code class="hljs">console.<span class="hljs-command">log</span>(currNode.getAttribute(<span class="hljs-string">"url"</span>));
</code></pre><p>I commented that line out and ran the app again and it crashed at:</p>
<pre><code class="hljs">console.<span class="hljs-command">log</span>(currNode.getAttribute(<span class="hljs-string">"length"</span>));
</code></pre><p>And the same for &#39;type&#39;.<br>I think there&#39;s something going on with getAttribute. Is there a reg ex I could use to search for the url?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2013, 7:49:42 am">July 16th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Albert Marcone I tried getElementsByTagName on another tag i.e.</p>
<pre><code class="hljs">        var str2=items.<span class="hljs-property">item</span>(i).getElementsByTagName(<span class="hljs-string">"guid"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"isPermaLink"</span>);
</code></pre><p>And the app is not crashing however, </p>
<pre><code class="hljs">        console.<span class="hljs-command">log</span>(<span class="hljs-string">"GUID TEST---------------------- "</span>+ str2);
</code></pre><p>is printing</p>
<pre><code class="hljs">GUID TEST<span class="hljs-comment">---------------</span>
</code></pre><p>in the console with nothing after it. </p>
<p>Any ideas what&#39;s going on? This is the last bit of parsing I&#39;ve to do so I&#39;d prefer not to switch to JSON now</p>
<p>Note: See full feed here:</p>
<pre><code class="hljs">www<span class="hljs-class">.highlandradio</span><span class="hljs-class">.com</span>/feed
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 16th 2013, 8:09:02 am">July 16th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Albert Marcone Also        </p>
<pre><code class="hljs">currNode = items.<span class="hljs-property">item</span>(i).getElementsByTagName(<span class="hljs-string">"enclosure"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>);
</code></pre><p>console.log(&quot;currnode testâââ-&quot;+ currNode) is returning 0 in the console</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2013, 8:39:37 am">July 16th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Albert Marcone I&#39;ve just realised that I&#39;m getting an error to debig on the line where i declare str3, HOWEVER, the console IS printing the correct data?? How could this be?</p>
<pre><code class="hljs">var str3=items.<span class="hljs-property">item</span>(i).getElementsByTagName(<span class="hljs-string">"enclosure"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"url"</span>);

console.<span class="hljs-command">log</span>(<span class="hljs-string">"MP3 TEST 2-------------"</span>+str3);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 17th 2013, 12:00:56 pm">July 17th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265912">
				
						<section>
							<p>Hi</p>
<p>I noticed you have another related question to this and have tried using regular expressions.  I suspect that you are not comfortable with XML (not a fan myself either).</p>
<p>I would suggest you take a look the <a href="https:&#x2F;&#x2F;github.com&#x2F;dbankier&#x2F;XMLTools-For-Appcelerator-Titanium">XML Tools library form David Bankier</a>, this includes a xml2json method that converts your XML into JSON making it much easier to navigate.</p>
<p>The <strong>app.js</strong> file from the link above shows you how to take a XML string (which can come from a returned <strong>httpClient</strong> returned string and convert it to JSON.</p>
<p>I would certainly take a look.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 15th 2013, 9:21:26 am">July 15th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/154869/extract-mp3-from-xml-feed#answer-265912" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Me also not comfortable with xml but would this not effect the app performance as we are adding an other process ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 15th 2013, 9:40:33 am">July 15th 2013</span>
											by <span class='authorname'>Muhammad Wahhab Mirza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Muhammad, everything we do adds a little time, the question is how much, here we are talking about ms rather than seconds and only parsing once not in a loop.</p>
<p>However I believe that XML takes much longer to parse than JSON as it has to traverse the object through each node to get where you want and even the best cached accessed XML traversal has to go through nodes that are unrelated in memory before it provide the answer back.  Whereas JSON is a simple node reference.</p>
<p>There is a perceived trade of between having to hold the JSON object in memory - but you were also holding the XML object in memory so no real difference there, plus the XML document is almost certainly larger in raw none translated bytes.</p>
<p>Add to this is vastly improved ease of use and interoperability of JSON both internally and externally with almost every modern API either adopting JSON and dropping XML or offering both - I would always opt for JSON in all but the most basic interactions.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 15th 2013, 9:48:19 am">July 15th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Malcolm Hollingsworth This is the last bit of parsing I&#39;ve to do so I&#39;d prefer not to switch to JSON now. Because I haven&#39;t much experience with that either. If you have a chance could you talk a look at my latest comments to Albert Marcone and see if you can spot the issue?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 16th 2013, 9:29:20 am">July 16th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
