<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alternatives for openTok » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alternatives for openTok</h1>
		</header>
		<section>
			<p>Hi *,<br>last days I tried to implement <a href="https:&#x2F;&#x2F;github.com&#x2F;opentok&#x2F;opentok-titanium-mobile">openTok</a> for peer2peer video streaming. It makes trouble during compiling&#x2F;linking. The linker gives me the message <code>symbol(s) not found for architecture i386</code>. Here the full <a href="https:&#x2F;&#x2F;github.com&#x2F;AppWerft&#x2F;AgilentService&#x2F;blob&#x2F;master&#x2F;linker.error">error log</a>. Maybe the problem is related to limitation of architecure. opentok doesn&#39;t work an arm7s and I dont know, how I can restrict the architecture in tiapp.xml.</p>
<p>Anyway – does anybody knows alternatives to opentok (hangout?) </p>
<p>PS I have compiled the module from github against 3.2.0 from edge and also I have build the app against  this newest version &#39;3.2.0.v20130607162444&#39;.</p>
<p>Here the first lines of error:</p>
<pre><code class="hljs">Undefined symbols <span class="hljs-keyword">for</span> architecture i386:
  <span class="hljs-string">"_CVPixelBufferCreate"</span>, referenced from:
      -[AVCEncoder prepareEncoder] <span class="hljs-keyword">in</span> libcom<span class="hljs-class">.tokbox</span><span class="hljs-class">.ti</span><span class="hljs-class">.opentok</span><span class="hljs-class">.a</span>(AVCEncoder.o)
  <span class="hljs-string">"_CVPixelBufferCreateWithBytes"</span>, referenced from:
      -[OTVideoSynthesizer tick] <span class="hljs-keyword">in</span> libcom<span class="hljs-class">.tokbox</span><span class="hljs-class">.ti</span><span class="hljs-class">.opentok</span><span class="hljs-class">.a</span>(OTVideoSynthesizer.o)
....
</code></pre><p>I think a header is missing ..</p>
<p>Best regards and a nice rest of weekend</p>
<p>Rainer</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 9th 2013, 6:29:11 am">June 9th 2013</span>
				by <span class='authorname'>Rainer Schleevoigt</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>hangout</span></li>
					
						<li><span class='tagname'>opentok</span></li>
					
						<li><span class='tagname'>videostreaming</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-264008">
				
						<section>
							<p>If you scroll down to the Requirements section of the README on github it states;</p>
<pre><code class="hljs">Opentok.framework requires projects <span class="hljs-keyword">to</span> <span class="hljs-keyword">be</span> built <span class="hljs-keyword">for</span> <span class="hljs-keyword">only</span> i386 (simulator) <span class="hljs-built_in">and</span> armv7 (device); armv6 <span class="hljs-built_in">and</span> armv7s are not supported.
</code></pre><p>So you need to modify your xCode project file to specify armv7 as a supported architecture</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 9th 2013, 6:38:54 am">June 9th 2013</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="../../question/153409/alternatives-for-opentok.html#answer-264008" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Exactly this I have made in xcode. But in xcode comes after this modification same error.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 6:51:47 am">June 9th 2013</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Well, I just downloaded the source via the zip file option in github. Navigated to the folder. Executed build.py and it has created the output file com.tokbox.ti.opentok-iphone-0.2.2-alpha.zip without any problem. There must be a problem with your xcode installation</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 7:02:41 am">June 9th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I see so. But ist is first time to have problem with this sdk. Ist it possible to repaire or to deinstall and install again?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 8:00:11 am">June 9th 2013</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Perhaps just re-download the zip file from github and start again (perhaps you changed an xCode setting by mistake)</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 9:30:17 am">June 9th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have tested a lot of variants. (0.2.1&#x2F;0.2.2) against 2.<em> and 3.</em> SDK version. In all cases came the error with missing symbols.</p>
<p>In the instruction of module I found the second possibility to avoid wrong architectures (modifying of builder.py). But this instruction for older version 2.* and the line doesn&#39;t exist in current builder.py.</p>
<p>Here the info-version of log:</p>
<pre><code class="hljs">Titanium Command-Line Interface, CLI version 3.1.0, Titanium SDK version 3.2.0.v20130607162444
Copyright (c) 2012-2013, Appcelerator, Inc.  All Rights Reserved.
Please report bugs to http://jira.appcelerator.org/
[INFO] :   Deploy type: development
[INFO] :   Building for target: simulator
[INFO] :   Building using iOS SDK: 6.1
[INFO] :   Building for iOS iPhone Simulator: 6.1
[INFO] :   Building for device family: iphone
[INFO] :   Minimum iOS version: 5.0
[INFO] :   Debugging disabled
[INFO] :   Profiler disabled
[INFO] :   Initiating <span class="hljs-operator"><span class="hljs-keyword">prepare</span> phase
[INFO] :   Forcing <span class="hljs-keyword">rebuild</span>: modules <span class="hljs-keyword">hash</span> <span class="hljs-keyword">changed</span> since <span class="hljs-keyword">last</span> <span class="hljs-keyword">build</span>
[INFO] :     Was: <span class="hljs-number">23</span>b8209f5b5eeb3b48776df96d1b4a10
[INFO] :     <span class="hljs-keyword">Now</span>: <span class="hljs-number">1</span>c230f4aab6ca3da0df5e8e7228b64e7
[INFO] :   <span class="hljs-keyword">Found</span> Titanium <span class="hljs-keyword">module</span> <span class="hljs-keyword">id</span>=com.pspdfkit <span class="hljs-keyword">version</span>=latest platform=iphone deploy-<span class="hljs-keyword">type</span>=development
[INFO] :   <span class="hljs-keyword">Found</span> Titanium <span class="hljs-keyword">module</span> <span class="hljs-keyword">id</span>=com.tokbox.ti.opentok <span class="hljs-keyword">version</span>=<span class="hljs-number">0.2</span><span class="hljs-number">.2</span>-alpha platform=iphone deploy-<span class="hljs-keyword">type</span>=development
[INFO] :   Detected third-party <span class="hljs-keyword">native</span> iOS <span class="hljs-keyword">module</span>: com.pspdfkit <span class="hljs-keyword">version</span> <span class="hljs-number">2.14</span><span class="hljs-number">.0</span>
[INFO] :   Detected third-party <span class="hljs-keyword">native</span> iOS <span class="hljs-keyword">module</span>: com.tokbox.ti.opentok <span class="hljs-keyword">version</span> <span class="hljs-number">0.2</span><span class="hljs-number">.2</span>-alpha
[INFO] :   Forcing <span class="hljs-keyword">rebuild</span>: <span class="hljs-keyword">native</span> modules <span class="hljs-keyword">hash</span> <span class="hljs-keyword">changed</span> since <span class="hljs-keyword">last</span> <span class="hljs-keyword">build</span>
[INFO] :     Was: b48d94442952c9fc8ba627b937540381
[INFO] :     <span class="hljs-keyword">Now</span>: <span class="hljs-number">09839014</span>ef32672710bb36cabb92a214
[INFO] :   Cleaning <span class="hljs-keyword">old</span> <span class="hljs-keyword">build</span> <span class="hljs-keyword">directory</span>
[INFO] :   Performing <span class="hljs-keyword">full</span> <span class="hljs-keyword">rebuild</span>
[INFO] :   Copying Xcode iOS files
[INFO] :   Creating Xcode <span class="hljs-keyword">project</span> <span class="hljs-keyword">directory</span>: /<span class="hljs-keyword">Users</span>/rainerschleevoigt/Documents/Titanium Studio Workspace/AgilentService/<span class="hljs-keyword">build</span>/iphone/AgilentService.xcodeproj
[INFO] :   Writing Xcode <span class="hljs-keyword">project</span> <span class="hljs-keyword">data</span> <span class="hljs-keyword">file</span>: Titanium.xcodeproj/<span class="hljs-keyword">project</span>.pbxproj
[INFO] :   Writing Xcode <span class="hljs-keyword">project</span> configuration: <span class="hljs-keyword">project</span>.xcconfig
[INFO] :   Writing Xcode <span class="hljs-keyword">module</span> configuration: <span class="hljs-keyword">module</span>.xcconfig
[INFO] :   Creating symlinks <span class="hljs-keyword">for</span> simulator <span class="hljs-keyword">build</span>
[INFO] :   Injecting <span class="hljs-keyword">native</span> libraries <span class="hljs-keyword">into</span> Xcode <span class="hljs-keyword">project</span> <span class="hljs-keyword">file</span>
[INFO] :   Forcing <span class="hljs-keyword">rebuild</span>: ApplicationDefaults.<span class="hljs-keyword">m</span> has <span class="hljs-keyword">changed</span> since <span class="hljs-keyword">last</span> <span class="hljs-keyword">build</span>
[INFO] :   Writing properties <span class="hljs-keyword">to</span> ApplicationDefaults.<span class="hljs-keyword">m</span>
[INFO] :   Copying <span class="hljs-keyword">module</span> resources
[INFO] :   <span class="hljs-keyword">No</span> CommonJS modules <span class="hljs-keyword">to</span> copy
[INFO] :   Invoking xcodebuild
[<span class="hljs-keyword">ERROR</span>] :  ** <span class="hljs-keyword">BUILD</span> <span class="hljs-keyword">FAILED</span> **
[<span class="hljs-keyword">ERROR</span>] :  The <span class="hljs-keyword">following</span> <span class="hljs-keyword">build</span> commands <span class="hljs-keyword">failed</span>:
[<span class="hljs-keyword">ERROR</span>] :      Ld <span class="hljs-keyword">build</span>/Debug-iphonesimulator/AgilentService.app/AgilentService <span class="hljs-keyword">normal</span> i386
[<span class="hljs-keyword">ERROR</span>] :  (<span class="hljs-number">1</span> <span class="hljs-keyword">failure</span>)</span>
</code></pre><p>Module I have copied in project folder.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 10:58:54 am">June 9th 2013</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have more then one macbooks. Now I have installed the project on a blood young mac and I get the same issue.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 11:36:54 am">June 9th 2013</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hmmm… That&#39;s really strange. Did you say you used &#39;builder.py&#39; ? to build.  I just used &#39;build.py&#39;</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 12:04:06 pm">June 9th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The only other thing - I included the module in a test project and did an Adhoc build (ie not for simulator)</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 12:10:52 pm">June 9th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>for compiling of a module I&#39;am use build.py – thats right.But in sdk (in folder iphone) I found a script named builder.py. In this script I found a snippet like:</p>
<pre><code class="hljs"># <span class="hljs-type">No</span> armv6 support above <span class="hljs-number">4.3</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">with</span> <span class="hljs-number">6.0</span>+ <span class="hljs-type">SDK</span>
                <span class="hljs-keyword">if</span> min_ver &gt;= <span class="hljs-number">4.3</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">float</span>(link_version) &gt;= <span class="hljs-number">6.0</span>:
                    valid_archs = <span class="hljs-symbol">'armv7</span> i386'
                <span class="hljs-keyword">else</span>:
                    valid_archs = <span class="hljs-symbol">'armv6</span> armv7 i386'
</code></pre><p>I dont found line with arm7s. In this <a href="https:&#x2F;&#x2F;github.com&#x2F;opentok&#x2F;opentok-titanium-mobile&#x2F;wiki&#x2F;Removing-armv6-from-your-Titanium-Project">faq</a> I found this text:</p>
<pre><code class="hljs">Now, <span class="hljs-built_in">open</span> up <span class="hljs-operator">the</span> builder.py <span class="hljs-built_in">file</span> <span class="hljs-operator">in</span> your favorite <span class="hljs-keyword">text</span> editor. In <span class="hljs-built_in">version</span> <span class="hljs-number">2.1</span><span class="hljs-number">.0</span>.GA <span class="hljs-operator">the</span> <span class="hljs-built_in">line</span> we want <span class="hljs-built_in">to</span> change is <span class="hljs-number">1198</span> <span class="hljs-operator">and</span> looks like this:

extra_args = [<span class="hljs-string">"VALID_ARCHS=armv6 armv7 i386"</span>]

Remove armv6 <span class="hljs-built_in">from</span> this <span class="hljs-built_in">line</span> so that <span class="hljs-keyword">it</span> instead looks like this:

extra_args = [<span class="hljs-string">"VALID_ARCHS=armv7 i386"</span>]

Lastly, save <span class="hljs-operator">the</span> <span class="hljs-built_in">file</span>. This may <span class="hljs-built_in">require</span> sudo <span class="hljs-keyword">if</span> your Titanium SDK is <span class="hljs-operator">not</span> <span class="hljs-operator">in</span> your home <span class="hljs-built_in">directory</span>. Go back <span class="hljs-built_in">to</span> your project <span class="hljs-built_in">directory</span> <span class="hljs-operator">and</span> <span class="hljs-built_in">delete</span> <span class="hljs-operator">the</span> build <span class="hljs-built_in">directory</span>. Now you should be able <span class="hljs-built_in">to</span> build <span class="hljs-keyword">for</span> <span class="hljs-operator">a</span> device straight <span class="hljs-built_in">from</span> Titanium Studio.
</code></pre><p>As you can see in docu we have extra_args and in current version we have valid_args.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 12:13:58 pm">June 9th 2013</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You mean in comment before I should compile direct for device?I will try. In video &quot;Hello World&quot; the coder first compile for simulator, the he modified in xcode and then he compiled for device.</p>
<p>Here the result in <a href="https:&#x2F;&#x2F;github.com&#x2F;AppWerft&#x2F;AgilentService&#x2F;blob&#x2F;master&#x2F;errorlog_device.text">my log after compiling for device</a>.</p>
<p>As you can see, the script tries<br><code>Building for the following architectures: armv7 armv7s i386</code></p>
<p> I think armv7s is wrong and I asked me, why the script uses this architecture. &#39;armv7&#39; isn&#39;t in this python-script</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 12:46:23 pm">June 9th 2013</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Perhaps I used a wrong receipt. My SDK is living in &#x2F;Library&#x2F; …</p>
<ul>
<li>getting the zip from github</li>
<li>unzipp,</li>
<li><p>modifying titanium.xconfig </p>
<pre><code class="hljs"><span class="hljs-constant">TITANIUM_SDK_VERSION</span> = 3.2.0.v20130607162444
<span class="hljs-constant">TITANIUM_SDK</span> = /Library/Application Support/Titanium/mobilesd/osx/<span class="hljs-variable">$(TITANIUM_SDK_VERSION)</span>
<span class="hljs-constant">TITANIUM_BASE_SDK</span> = "<span class="hljs-variable">$(TITANIUM_SDK)</span>/iphone/include"
<span class="hljs-constant">TITANIUM_BASE_SDK2</span> = "<span class="hljs-variable">$(TITANIUM_SDK)</span>/iphone/include/TiCore"
<span class="hljs-constant">HEADER_SEARCH_PATHS</span>= <span class="hljs-variable">$(TITANIUM_BASE_SDK)</span> <span class="hljs-variable">$(TITANIUM_BASE_SDK2)</span>
</code></pre></li>
<li><p>python build.py</p>
</li>
<li>unzip the new zip (com.tokbox.ti.opentok-iphone-0.2.2-alpha.zip)</li>
<li>copy of module folder to &#x2F;Library&#x2F; …</li>
</ul>
<p>Best regards<br>Rainer</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 9th 2013, 4:20:03 pm">June 9th 2013</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
