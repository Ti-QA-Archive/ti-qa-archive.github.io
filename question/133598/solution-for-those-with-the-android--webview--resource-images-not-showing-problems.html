<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Solution for those with the &#34;Android + Webview = Resource Images Not Showing&#34; Problems » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Solution for those with the &#34;Android + Webview = Resource Images Not Showing&#34; Problems</h1>
		</header>
		<section>
			<p>Hey guys,</p>
<p>Thought I&#39;d share this since I spent hours pulling my hair out (until 6am) and trawling through dozens of the same questions posted here over the last 2 years. I slept on it and came up with a solution today.</p>
<p>As some of you will know, having images in the resources folder (or sub-folders thereof) show up in a HTML page on an Android webview is problematic. It may work fine in the emulator, and it may work debugging on the device, but once packaged up it won&#39;t show any images at all. I found this the hard way after already putting my app on the market. Silly me for not testing after packaging. </p>
<p>So basically - any image in Resources won&#39;t show in Android webviews. No matter if you put the native path as assigned by Titanium, or app:&#x2F;&#x2F;, relative, or whatever - it won&#39;t show up. I&#39;ve read so many posts on this and none worked, so people blindly suggesting the above only cause more frustration :P</p>
<p>Well, finally, this morning after a cold shower, I found a way to get all my Resources files (css, javascript and images) to actually work within the HTML after being packaged.</p>
<p>First, for the webview URL use the usual format: </p>
<p>app:&#x2F;&#x2F;whatever.html</p>
<p>However, within your HTML itself use absolute paths for all assets as follows; </p>
<p>file:&#x2F;&#x2F;&#x2F;android_asset&#x2F;Resources&#x2F;someimage.png<br>file:&#x2F;&#x2F;&#x2F;android_asset&#x2F;Resources&#x2F;path&#x2F;to&#x2F;someimage.png </p>
<p>Note the file:&#x2F;&#x2F;&#x2F; has 3 slashes, not 2.</p>
<p>Within my stylesheets the paths for background images are relative (from a sub-folder) so they work, but I recommend for stylesheets in the root Resources folder to use the absolute path for background images just in case. Of course, if you have javascript that assigns image src or div background urls - use the absolute path too!</p>
<p>Maybe I&#39;m the only person who needed to solve this. But if it helps someone else, it&#39;s worth posting. Might save you programming heartache.</p>
<p>Have fun developing!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 11th 2012, 12:48:55 pm">March 11th 2012</span>
				by <span class='authorname'>Phil Carty</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>images</span></li>
					
						<li><span class='tagname'>path</span></li>
					
						<li><span class='tagname'>resources</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Great find!</p>
<p>Another one of those stumbling blocks I was bound to run into sooner or later.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 11th 2012, 1:12:54 pm">March 11th 2012</span>
								by <span class='authorname'>Esben Maaløe</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>This drove me crazy trying to reference rgraph libraries from within generated HTML - it would work on MobileWeb but not on Android. Works like a charm now.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 2nd 2012, 5:04:09 pm">September 2nd 2012</span>
								by <span class='authorname'>Richard Johnson</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>20</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-264533">
				
						<section>
							<p>YOU are my savior! Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 19th 2013, 9:50:13 pm">June 19th 2013</span>
								by <span class='authorname'>Adriano Massi</span><br>
								<a class="icon-bg icon-link" href="question/133598/solution-for-those-with-the-android--webview--resource-images-not-showing-problems#answer-264533" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-275506">
				
						<section>
							<p>Anyone has a sample ?</p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 20th 2014, 8:16:13 pm">February 20th 2014</span>
								by <span class='authorname'>Rene Gade</span><br>
								<a class="icon-bg icon-link" href="question/133598/solution-for-those-with-the-android--webview--resource-images-not-showing-problems#answer-275506" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Have you found a sample?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 26th 2014, 9:40:03 am">February 26th 2014</span>
											by <span class='authorname'>Ivana Miserda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>What exactly do you need a sample of? The post simply explained how to specify the URL of assets within a HTML webview - there&#39;s nothing more than that to sample!</p>
<p>That said, I have no idea if it&#39;s still even a problem in 3.2.x. This post is 2 years old and in new apps I&#39;ve not had to contend with the same quirks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 26th 2014, 9:47:31 am">February 26th 2014</span>
											by <span class='authorname'>Phil Carty</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have a problem with it , and i am using 3.2.1.<br>Image shows if it is called from javascript, but not if from html.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 26th 2014, 10:09:50 am">February 26th 2014</span>
											by <span class='authorname'>Ivana Miserda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Have you tried as suggested? For example;</p>
<p>&lt;img src=&quot;file:&#x2F;&#x2F;&#x2F;android_asset&#x2F;Resources&#x2F;path&#x2F;to&#x2F;someimage.png&quot; &#x2F;&gt;</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 26th 2014, 1:39:16 pm">February 26th 2014</span>
											by <span class='authorname'>Phil Carty</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-279812">
				
						<section>
							<p>2 years passed, the problem is still there. </p>
<p>I think the problem is caused by Android WebView. If you google it you will find native Android developers also recommend using file:&#x2F;&#x2F;&#x2F; rather than relative path.</p>
<p><strong>However</strong> while my developing with file:&#x2F;&#x2F;&#x2F; solution, I noticed Ti WebView has a method <strong>setHtml</strong> which allows you passing <strong>baseURL</strong>. So I tried set baseURL to a local folder, </p>
<p><code>setHtml( text, {baseURL:&amp;#39;file:&amp;#x2F;&amp;#x2F;&amp;#x2F;webContents&amp;#x2F;&amp;#39;});</code></p>
<p>Then I tried use relative url in html to refer some image</p>
<p>&lt;img src=&quot;img&#x2F;pic_1.png&quot; &#x2F;&gt;<br>&lt;img src=&quot;.&#x2F;img&#x2F;pic_1.png&quot; &#x2F;&gt;</p>
<p>Then wolla, thanks God I saw those images.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 15th 2014, 6:11:48 am">June 15th 2014</span>
								by <span class='authorname'>John Caveman</span><br>
								<a class="icon-bg icon-link" href="question/133598/solution-for-those-with-the-android--webview--resource-images-not-showing-problems#answer-279812" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-286658">
				
						<section>
							<p>how to do that with my code?</p>
<pre><code class="hljs">
<span class="hljs-keyword">if</span> (Titanium.Platform.name == <span class="hljs-string">'android'</span> &amp;&amp; Titanium.Filesystem.isExternalStoragePresent()) {
    <span class="hljs-comment">// Android with SD</span>
    var filename = Titanium.Filesystem.externalStorageDirectory + <span class="hljs-string">"/"</span> + e.row.file + <span class="hljs-string">".jpg"</span>;
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// iOS and w/o SD</span>
    var filename = Titanium.Filesystem.applicationDataDirectory + <span class="hljs-string">"/"</span> + e.row.file + <span class="hljs-string">".jpg"</span>;
}

var winf = Ti.UI.createWindow({
<span class="hljs-label">    backgroundColor:</span> <span class="hljs-string">"white"</span>,
});

var imgview = Ti.UI.createWebView({<span class="hljs-string">width:</span><span class="hljs-string">'100%'</span>, <span class="hljs-string">top:</span> <span class="hljs-string">"60dp"</span>, <span class="hljs-string">bottom:</span> <span class="hljs-string">"0dp"</span>, <span class="hljs-string">scalesPageToFit:</span><span class="hljs-literal">true</span>});

imgview.setHtml(<span class="hljs-string">'&lt;html&gt;&lt;body&gt;&lt;img src="'</span>+filename+<span class="hljs-string">'" /&gt;&lt;/body&gt;&lt;/html&gt;'</span>);

winf.add(imgview);
winf.open({<span class="hljs-string">modal:</span><span class="hljs-literal">true</span>});

Ti.API.info(<span class="hljs-string">"filename: "</span> + filename);
</code></pre><p>the console give me:<br><code>filename: appdata:&amp;#x2F;&amp;#x2F;&amp;#x2F;nameOfTheFile.jpg</code></p>
<p>it don&#39;t work also if I manually set:<br><code>filename = &amp;#39;file:&amp;#x2F;&amp;#x2F;&amp;#x2F;nameOfTheFile.jpg&amp;#39;;</code></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 24th 2015, 12:08:19 pm">March 24th 2015</span>
								by <span class='authorname'>Andrea Taggiasco</span><br>
								<a class="icon-bg icon-link" href="question/133598/solution-for-those-with-the-android--webview--resource-images-not-showing-problems#answer-286658" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
