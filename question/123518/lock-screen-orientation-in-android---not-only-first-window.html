<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Lock screen orientation in Android - Not only first window Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Lock screen orientation in Android - Not only first window</h1>
		</header>
		<section>
			<p>I know this has been brought up countless of times already, but i&#39;m stuck. I am using tiapp.xml to force portrait orientation of all activities. This works, but only for the <em>first</em> window. When opening up additional windows screen orientation is no longer locked.<br>Is a new activity triggered when opening a window? If yes, how do I get the name of this activity?</p>
<p>This is my code:</p>
<p>tiapp.xml</p>
<pre><code class="hljs">    <span class="hljs-tag">&lt;<span class="hljs-title">android</span> &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">manifest</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">supports-screens</span> <span class="hljs-attribute">android:anyDensity</span>=<span class="hljs-value">"false"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">application</span> <span class="hljs-attribute">android:debuggable</span>=<span class="hljs-value">"false"</span>&gt;</span>

                <span class="hljs-comment">&lt;!-- TI_APPLICATION --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:configChanges</span>=<span class="hljs-value">"keyboardHidden|orientation"</span> <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"My app"</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".MyAppActivity"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@style/Theme.Titanium"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.MAIN"</span>/&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.LAUNCHER"</span>/&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span>


                <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:configChanges</span>=<span class="hljs-value">"keyboardHidden|orientation"</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"ti.modules.titanium.media.TiCameraActivity"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@android:style/Theme.Translucent.NoTitleBar.Fullscreen"</span>/&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:configChanges</span>=<span class="hljs-value">"keyboardHidden|orientation"</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"org.appcelerator.titanium.TiActivity"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:configChanges</span>=<span class="hljs-value">"keyboardHidden|orientation"</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"org.appcelerator.titanium.TiTranslucentActivity"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@android:style/Theme.Translucent"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:configChanges</span>=<span class="hljs-value">"keyboardHidden|orientation"</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"org.appcelerator.titanium.TiModalActivity"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@android:style/Theme.Translucent"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:configChanges</span>=<span class="hljs-value">"keyboardHidden|orientation"</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"ti.modules.titanium.ui.TiTabActivity"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"ti.modules.titanium.ui.android.TiPreferencesActivity"</span> <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span>/&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">service</span> <span class="hljs-attribute">android:exported</span>=<span class="hljs-value">"false"</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"org.appcelerator.titanium.analytics.TiAnalyticsService"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">application</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">manifest</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">activities</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> <span class="hljs-attribute">url</span>=<span class="hljs-value">"activity.js"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">activities</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">android</span>&gt;</span>
</code></pre><p>app.js</p>
<pre><code class="hljs">    var mainWindow = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createWindow({
        title:<span class="hljs-symbol">'My</span> app',
        tabBarHidden:<span class="hljs-literal">true</span>,
        url:<span class="hljs-symbol">'main_windows</span>/login.js'
    });
    var mainTab = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTab({
        title:<span class="hljs-string">"My app"</span>,
        window:mainWindow
    });
    tabGroup.addTab(mainTab);
    tabGroup.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>login.js</p>
<pre><code class="hljs">    var newWindow = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createWindow({
        title:<span class="hljs-symbol">'App</span> name',
        tabBarHidden:<span class="hljs-literal">true</span>,
        backgroundColor:<span class="hljs-symbol">'transparent'</span>,
        backgroundImage:<span class="hljs-symbol">'main_bg</span>.png',
        url:<span class="hljs-symbol">'main_windows</span>/start_inside.js'
    });
    <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.currentTab.<span class="hljs-keyword">open</span>(newWindow);
</code></pre><p>So, the problem occurrs in the last window, start_inside.js. The login window forces screen orientation as expected. Thank you for your help.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 1st 2011, 3:09:47 am">August 1st 2011</span>
				by <span class='authorname'>Adam Smith</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>activity</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>orientation</span></li>
					
						<li><span class='tagname'>screen</span></li>
					
						<li><span class='tagname'>windows</span></li>
					
				</ul>
			

			<section>
				<h5>6 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi Adam, I am trying to do the same thing as well. I created a whole new project and basically copy and paste everything in your very first post. And the EVERY single window rotates. I wonder the parameters in your tiapp.xml, such as &quot;android:label=&quot;My app&quot; &quot;, &quot;android:name=&quot;.MyAppActivity&quot; &quot;, &quot; &lt;activity url=&quot;activity.js&quot;&#x2F;&gt;&quot;  all have special meanings? Do they refer to the actual files in your project?  Thanks a lot!!</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 8th 2011, 7:09:28 pm">August 8th 2011</span>
								by <span class='authorname'>Sihang H</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Shane,<br>Well I did leave out some code to keep focus on the main issue, so I&#39;m not sure you can copy the post above right off. Also, as you said you will need to set the correct activity name in android:name - If you don&#39;t know the name I think you can check the class name in \build\android\bin\classes\com\mycompany\myapp (where you replace mycompany and myapp with your names of course). Should be something like <em>*</em>Activity.class</p>
<p>Here is my complete tiapp.xml: (you will probably need the latest version of titanium to use this, and remember to replace mycompany and myapp with your info) http:&#x2F;&#x2F;pastie.org&#x2F;2342891</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 1:29:06 am">August 9th 2011</span>
								by <span class='authorname'>Adam Smith</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Adam, thank you so much for your reply. I have been working on this for the whole morning and I get clues from androidmanifest so activity name shouldn&#39;t be the problem. I double-check the name with your method just now(\bin\classes\com\mycompany\myapp) and it&#39;s the same with that in androidmanifest file. But still I cannot force the screen to portrait. This is really giving me a headache. Any ideas? Thanks!</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 1:33:32 pm">August 9th 2011</span>
								by <span class='authorname'>Sihang H</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hmm can&#39;t really say why it&#39;s not working then. To use the custom androidmanifest you will need the latest version of titanium though, so double-check that. Otherwise I think you&#39;ll have to paste your complete code in pastebin if you want me to look at it..</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 1:38:17 pm">August 9th 2011</span>
								by <span class='authorname'>Adam Smith</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Ok, I have put together the structure I&#39;m using and has been tested and working on my end. If it&#39;s not working for you I believe it&#39;s an issue with your Titanium version. Download here: http:&#x2F;&#x2F;www.speedyshare.com&#x2F;files&#x2F;29788805&#x2F;App_Structure.rar</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 3:26:00 pm">August 9th 2011</span>
								by <span class='authorname'>Adam Smith</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Glad there are ways to set orientation on a per window basis (see answer below) But how do you (or can you) set the orientation for the entire app (all windows) or do you have to find every window you make and set it individually? Is there no way to set a default?</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 21st 2013, 1:50:11 pm">August 21st 2013</span>
								by <span class='authorname'>Devin Weaver</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-215039">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Can you user the orientationModes property of the window?</p>
<pre><code class="hljs">win.orientationModes = Titanium.UI.PORTRAIT<span class="hljs-comment">;</span>
</code></pre><p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.UI.Window-object">Window API Docs</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 1st 2011, 3:40:59 am">August 1st 2011</span>
								by <span class='authorname'>Martin Slater</span><br>
								<a class="icon-bg icon-link" href="question/123518/lock-screen-orientation-in-android---not-only-first-window#answer-215039" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Well, that gave an error but thanks for a push in the right direction!<br>This fixed the problem:</p>
<pre><code class="hljs">var newWindow = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createWindow({
    title:<span class="hljs-symbol">'My</span> app',
    tabBarHidden:<span class="hljs-literal">true</span>,
    backgroundColor:<span class="hljs-symbol">'transparent'</span>,
    backgroundImage:<span class="hljs-symbol">'main_bg</span>.png',
    url:<span class="hljs-symbol">'main_windows</span>/start_inside.js',
    orientationModes : [
        <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.<span class="hljs-type">PORTRAIT</span>
    ]
});
</code></pre><p>Along with:<br><code>Titanium.UI.orientation = Titanium.UI.PORTRAIT;</code><br>in start_inside.js</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 1st 2011, 4:02:47 am">August 1st 2011</span>
											by <span class='authorname'>Adam Smith</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It should be an Array:<br>var win = Titanium.UI.currentWindow;<br>win.orientationModes = [Titanium.UI.PORTRAIT];</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 3rd 2011, 2:28:55 pm">November 3rd 2011</span>
											by <span class='authorname'>Ted Sundin</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No documentation found describes <code>Titanium.UI.orientation</code> this is a misleading and incorrect API. So far All I can find is documentation that tells how to set orientation mode on a per window basis (as described above).</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 21st 2013, 1:48:56 pm">August 21st 2013</span>
											by <span class='authorname'>Devin Weaver</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>4</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
