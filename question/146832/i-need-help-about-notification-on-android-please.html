<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>I need help about notification on android! Please! » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>I need help about notification on android! Please!</h1>
		</header>
		<section>
			<p>I am developing software on android, my software structure as follows</p>
<p>app.js —-&gt; TOP —-&gt; Webview.js<br>                        —-&gt; abc.js<br>                        —-&gt; xyz.js</p>
<p>I using GCM push notification, now I use an intent to assign the notification to open the software, however I can only open is app.js —&gt; TOP. I want to open the page within eg Webview.js or abc.js how to do?</p>
<p>If you know, please help me, I urgently needs to be solved immediately. THANK ALL SO MUCH!</p>
<p>code app.js</p>
<pre><code class="hljs"><span class="hljs-comment">//bootstrap and check dependencies</span>
<span class="hljs-keyword">if</span> (Ti.version &lt; <span class="hljs-number">1.8</span>) {
    alert(<span class="hljs-string">'Sorry - this application template requires Titanium Mobile SDK 1.8 or later'</span>);
}

<span class="hljs-comment">// This is a single context application with mutliple windows in a stack</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> osname = Ti.Platform.osname;
    <span class="hljs-comment">//install database</span>
    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
        <span class="hljs-built_in">require</span>(<span class="hljs-string">"dbNAPS"</span>).createDb(osname);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// install database</span>
        <span class="hljs-keyword">var</span> db = Ti.Database.install(<span class="hljs-string">'vehicle.sqlite'</span>, <span class="hljs-string">'vehicle'</span>);
    }

    <span class="hljs-comment">//for push notification of Android</span>
    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
        Ti.UI.createWindow().open();
        <span class="hljs-keyword">var</span> push = <span class="hljs-built_in">require</span>(<span class="hljs-string">'PushNotification'</span>);
        push.pushNotification();
    }
    <span class="hljs-comment">//for push notification of iOS</span>
        <span class="hljs-keyword">if</span> (Titanium.Platform.name == <span class="hljs-string">'iPhone OS'</span>) {
        <span class="hljs-keyword">var</span> data = [{title:<span class="hljs-string">'Push Notifications'</span>, hasChild:<span class="hljs-literal">true</span>, test:<span class="hljs-string">'ui/ios_push_notification'</span>}];
    }

    Ti.App.categoryname = <span class="hljs-string">''</span>;

    <span class="hljs-comment">//determine platform and form factor and render approproate components</span>
    <span class="hljs-keyword">var</span> osname = Ti.Platform.osname, version = Ti.Platform.version, height = Ti.Platform.displayCaps.platformHeight, width = Ti.Platform.displayCaps.platformWidth;
    Ti.App.getLogin = <span class="hljs-string">''</span>;

    <span class="hljs-keyword">var</span> aP001_Top = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/window/AP001_Top'</span>).AP001_Top;

    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
        <span class="hljs-keyword">var</span> navGroup = Ti.UI.iPhone.createNavigationGroup();
        navGroup.window = <span class="hljs-keyword">new</span> aP001_Top(navGroup);
        <span class="hljs-keyword">var</span> main = Ti.UI.createWindow();
        main.add(navGroup);
        main.open();
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">new</span> aP001_Top().open();
    }

    <span class="hljs-comment">//install database</span>
    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
        db.close();
    }
})();
</code></pre><p>code pushnotification.js</p>
<pre><code class="hljs">exports.pushNotification = function(navGroup) {
    <span class="hljs-keyword">var</span> hostURL = <span class="hljs-string">""</span>;

    <span class="hljs-keyword">var</span> gcm = require('com.activate.gcm');
    <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info('module gcm <span class="hljs-keyword">is</span> =&gt; ' + gcm);

    <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info('<span class="hljs-type">Registering</span>...');

    gcm.registerC2dm({
        success : function(e) {
            <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.error('success');

            <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info('<span class="hljs-type">JS</span> registration success event: ' + e.registrationId);
            //                alert('<span class="hljs-type">Yeah</span> <span class="hljs-type">JS</span> registration success event: ' + e.registrationId);
            //                alert('<span class="hljs-type">Sender</span> <span class="hljs-type">ID</span>:' + gcm.getSenderId());
            //                alert('<span class="hljs-type">Registration</span> <span class="hljs-type">ID</span>:' + gcm.getRegistrationId());
            <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.notice_device_id = gcm.getRegistrationId();

            <span class="hljs-keyword">var</span> appName = <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.name;
            <span class="hljs-keyword">var</span> appVersion = <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.version;

            <span class="hljs-keyword">var</span> deviceUUID = <span class="hljs-type">Ti</span>.<span class="hljs-type">Platform</span>.macaddress;
            // <span class="hljs-type">Ti</span>.<span class="hljs-type">Network</span>.remoteDeviceUUID;
            <span class="hljs-keyword">var</span> deviceName = <span class="hljs-type">Ti</span>.<span class="hljs-type">Platform</span>.username;
            <span class="hljs-keyword">var</span> deviceModel = <span class="hljs-type">Ti</span>.<span class="hljs-type">Platform</span>.model;
            <span class="hljs-keyword">var</span> deviceSystemVersion = <span class="hljs-type">Ti</span>.<span class="hljs-type">Platform</span>.version;
            <span class="hljs-keyword">var</span> deviceToken = e.deviceToken;
            <span class="hljs-keyword">var</span> regId = e.registrationId;

            //deviceUUID = deviceUUID.replace(/-/ig,'');
            //deviceToken = deviceToken.replace(/&lt;&gt;/ig, '');

            <span class="hljs-keyword">var</span> host = hostURL;
            <span class="hljs-keyword">var</span> urlString = host;
            /*urlString += <span class="hljs-string">"&amp;appname="</span> + appName;
             urlString += <span class="hljs-string">"&amp;appversion="</span> + appVersion;
             urlString += <span class="hljs-string">"&amp;deviceuid="</span> + deviceUUID;
             urlString += <span class="hljs-string">"&amp;devicetoken="</span> + deviceToken;
             urlString += <span class="hljs-string">"&amp;devicename="</span> + deviceName;
             urlString += <span class="hljs-string">"&amp;devicemodel="</span> + deviceModel;
             urlString += <span class="hljs-string">"&amp;deviceversion="</span> + deviceSystemVersion;*/
            urlString += <span class="hljs-string">"regId="</span> + regId;

            <span class="hljs-keyword">var</span> loader = <span class="hljs-type">Ti</span>.<span class="hljs-type">Network</span>.createHTTPClient();
            loader.setTimeout(<span class="hljs-number">60000</span>);

            loader.onload = function(evt) {
                alert(evt);
                <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.error('evt' + evt);
                <span class="hljs-type">Titanium</span>.<span class="hljs-type">Platform</span>.openURL('google.com.vn');
            }

            loader.open('<span class="hljs-type">GET</span>', urlString, <span class="hljs-literal">false</span>);
            loader.send();

        },
        error : function(e) {
            <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.error(<span class="hljs-string">"Error during registration : "</span> + e.error);
            //alert(<span class="hljs-string">"Error during registration : "</span> + e.error);

            <span class="hljs-keyword">var</span> message;
            <span class="hljs-keyword">if</span> (e.error == <span class="hljs-string">"ACCOUNT_MISSING"</span>) {
                message = <span class="hljs-string">"No Google account found; you will need to add on in order to activate notifications"</span>;
            }

            <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createAlertDialog({
                title : '<span class="hljs-type">Push</span> <span class="hljs-type">Notification</span> <span class="hljs-type">Setup</span>',
                message : '<span class="hljs-type">Google</span>????????????????',
                buttonNames : ['<span class="hljs-type">OK</span>']
            }).show();
        },
        callback : function(e)// called <span class="hljs-keyword">when</span> a push notification <span class="hljs-keyword">is</span> received
        {
            <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info('<span class="hljs-type">JS</span> message event: ' + <span class="hljs-type">JSON</span>.stringify(e.data));

            /*<span class="hljs-type">Get</span> <span class="hljs-type">Url</span> on push notification*/
            //get notification (message + url)
            <span class="hljs-keyword">var</span> str_url = e.data.message;
            //split <span class="hljs-type">string</span> <span class="hljs-keyword">with</span> ','
            <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = [];
            <span class="hljs-literal">result</span> = str_url.split(<span class="hljs-string">","</span>);

            //get location <span class="hljs-keyword">of</span> url
            <span class="hljs-keyword">var</span> i = <span class="hljs-literal">result</span>.length - <span class="hljs-number">1</span>;

            <span class="hljs-keyword">var</span> message = '';

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; i; j++) {
                <span class="hljs-keyword">if</span> (j == i - <span class="hljs-number">1</span>)
                    message += <span class="hljs-literal">result</span>[j];
                <span class="hljs-keyword">else</span>
                    message += <span class="hljs-literal">result</span>[j] + ', ';
            }

            <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.pushurl = <span class="hljs-literal">result</span>[i];

            //get url
            <span class="hljs-keyword">var</span> result_url = <span class="hljs-literal">result</span>[i];

            <span class="hljs-keyword">var</span> intent = <span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.createIntent({
                className : 'com.napsjp.<span class="hljs-type">TestActivity</span>',
                packageName : 'com.napsjp',
                action : <span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.<span class="hljs-type">ACTION_MAIN</span>,
                                flags : <span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.<span class="hljs-type">FLAG_ACTIVITY_RESET_TASK_IF_NEEDED</span> | <span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.<span class="hljs-type">FLAG_ACTIVITY_SINGLE_TOP</span>
            });
            intent.addCategory(<span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.<span class="hljs-type">CATEGORY_ALTERNATIVE</span>);

            // <span class="hljs-type">This</span> <span class="hljs-keyword">is</span> fairly <span class="hljs-keyword">static</span>: <span class="hljs-type">Not</span> much need to be altered here
            <span class="hljs-keyword">var</span> pending = <span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.createPendingIntent({
                activity : <span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.currentActivity,
                intent : intent,
                <span class="hljs-keyword">type</span> : <span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.<span class="hljs-type">PENDING_INTENT_FOR_ACTIVITY</span>,
            });

            <span class="hljs-keyword">var</span> notification = <span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.createNotification({
                icon : <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.<span class="hljs-type">Android</span>.R.drawable.appicon,
                contentIntent : pending,
                contentTitle : '<span class="hljs-type">Naps</span> <span class="hljs-type">Message</span>',
                contentText : message,
                flags : <span class="hljs-type">Titanium</span>.<span class="hljs-type">Android</span>.<span class="hljs-type">ACTION_DEFAULT</span> | <span class="hljs-type">Titanium</span>.<span class="hljs-type">Android</span>.<span class="hljs-type">FLAG_AUTO_CANCEL</span> | <span class="hljs-type">Titanium</span>.<span class="hljs-type">Android</span>.<span class="hljs-type">FLAG_SHOW_LIGHTS</span>,
                tickerText : <span class="hljs-string">"BR Viet Nam"</span>
            });

            <span class="hljs-type">Ti</span>.<span class="hljs-type">Android</span>.<span class="hljs-type">NotificationManager</span>.notify(<span class="hljs-number">1</span>, notification);
        }
    });

}
</code></pre><p>code TOP.js</p>
<pre><code class="hljs">Ti.include(<span class="hljs-string">'/ui/common/ServiceRequestServer.js'</span>);
exports.AP001_Top = function(navGroup) {

    var listCategory = [];

    listCategory[<span class="hljs-number">0</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'01'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'?????'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'1'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });
    listCategory[<span class="hljs-number">1</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'05'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'?????'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'2'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });
    listCategory[<span class="hljs-number">2</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'10'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'????&amp;??????'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'3'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });
    listCategory[<span class="hljs-number">3</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'04'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'?????&amp;??·???'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'4'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });
    listCategory[<span class="hljs-number">4</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'02'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'???????·????'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'5'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });
    listCategory[<span class="hljs-number">5</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'03'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'?????&amp;????'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'6'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });
    listCategory[<span class="hljs-number">6</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'06'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'??/DVD&amp;??'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'7'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });
    listCategory[<span class="hljs-number">7</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'07'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'??????&amp;???·????'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'8'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });
    listCategory[<span class="hljs-number">8</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'11'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'??&amp;??????'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'9'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });
    listCategory[<span class="hljs-number">9</span>] = ( {
        <span class="hljs-string">id :</span> <span class="hljs-string">'08'</span>,
        <span class="hljs-string">name :</span> <span class="hljs-string">'???'</span>,
        <span class="hljs-string">decription :</span> <span class="hljs-string">'description'</span>,
        <span class="hljs-string">image :</span> <span class="hljs-string">'image'</span>,
        <span class="hljs-string">time :</span> <span class="hljs-string">'10'</span>,
        <span class="hljs-string">initial :</span> <span class="hljs-string">'true'</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-string">'false'</span>
    });

    var height = <span class="hljs-number">0.0</span>;

    var tableDataCustom = [];
    var tableViewParentData = [];

    <span class="hljs-comment">// Get utils</span>
    var utils = require(<span class="hljs-string">'/ui/common/Util'</span>);

    var heightDevice = Ti.Platform.displayCaps.platformHeight;
    var widthDevice = Ti.Platform.displayCaps.platformWidth;
    var osname = Ti.Platform.osname;

    <span class="hljs-comment">//TODO</span>
    <span class="hljs-keyword">if</span> (widthDevice &gt; <span class="hljs-number">650</span>) {
        var arrow_image = <span class="hljs-string">'/common/images/arrow_40.png'</span>;
    } <span class="hljs-keyword">else</span> {
        var arrow_image = <span class="hljs-string">'/common/images/arrow_05.png'</span>;
    }

    <span class="hljs-comment">// Create the window as container controls</span>
    var self = Ti.UI.createWindow({
        <span class="hljs-comment">//exitOnClose: true,</span>
        <span class="hljs-string">title :</span> L(<span class="hljs-string">"titleBarBikeSelect"</span>),
        <span class="hljs-string">tabBarHidden :</span> <span class="hljs-literal">true</span>,
        <span class="hljs-string">navBarHidden :</span> <span class="hljs-literal">true</span>,
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'white'</span>
    });
    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
        self.addEventListener(<span class="hljs-string">'android:back'</span>, function() {

            <span class="hljs-comment">// Create new an AlertDialog to display error message</span>
            var confirm = Ti.UI.createAlertDialog({
                <span class="hljs-string">title :</span> <span class="hljs-string">''</span>,
                <span class="hljs-string">message :</span> L(<span class="hljs-string">'closeAPP'</span>),
                <span class="hljs-string">font :</span> {
                    <span class="hljs-string">fontSize :</span> widthDevice * <span class="hljs-number">0.18</span> * (<span class="hljs-number">20</span> / <span class="hljs-number">100</span>)
                },
                <span class="hljs-string">buttonNames :</span> [L(<span class="hljs-string">'mgsYes'</span>), L(<span class="hljs-string">'Cancel'</span>)]
            });
            confirm.show();

            <span class="hljs-comment">// Set EventListener for AlertDialog</span>
            confirm.addEventListener(<span class="hljs-string">'click'</span>, function(e) {

                <span class="hljs-comment">// If [??]button is clicked, insert data to DB</span>
                <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">0</span>) {
                    Ti.API.info(<span class="hljs-string">"status: "</span> + e.index);

                    var activity = Titanium.Android.currentActivity;

                    <span class="hljs-comment">//self.close();</span>

                    activity.finish();
                }
            });

        });
    }
</code></pre><pre><code class="hljs">
    <span class="hljs-comment">// Create loading</span>
    <span class="hljs-keyword">var</span> toolActInd = Titanium.UI.createActivityIndicator({
        color : <span class="hljs-string">"black"</span>,
        message : <span class="hljs-string">"Loading"</span>,
        font : {
            fontFamily : <span class="hljs-string">'Helvetica Neue'</span>,
            fontSize : <span class="hljs-number">15</span>
        },
        width : <span class="hljs-number">210</span>,
        top : widthDevice * <span class="hljs-number">0.5</span>,
    });

    <span class="hljs-keyword">if</span> (Ti.Platform.osname === <span class="hljs-string">'iphone'</span>) {
        toolActInd.style = Titanium.UI.iPhone.ActivityIndicatorStyle.DARK;
    }

    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
        toolActInd.setTop(<span class="hljs-string">'50%'</span>);
        <span class="hljs-keyword">self</span>.add(toolActInd);
    };

    toolActInd.show();

    <span class="hljs-comment">// Create table contain the control on form</span>
    <span class="hljs-keyword">var</span> scrollWin = Titanium.UI.createScrollView({
        showVerticalScrollIndicator : <span class="hljs-keyword">true</span>,
        showHorizontalScrollIndicator : <span class="hljs-keyword">false</span>,
    });

    <span class="hljs-comment">// Add header and button login</span>
    <span class="hljs-keyword">var</span> titleBar = <span class="hljs-keyword">require</span>(<span class="hljs-string">'ui/common/TitleBar'</span>).TitleBar(L(<span class="hljs-string">'TitleTop'</span>), <span class="hljs-keyword">self</span>, navGroup, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>, <span class="hljs-string">'Top'</span>, <span class="hljs-keyword">false</span>, <span class="hljs-string">'Top'</span>);
    <span class="hljs-keyword">self</span>.add(titleBar);

    scrollWin.setTop(titleBar.height);

    <span class="hljs-comment">// Add footer view</span>
    <span class="hljs-keyword">var</span> eventTitle = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    };
    <span class="hljs-keyword">var</span> footerView = <span class="hljs-keyword">require</span>(<span class="hljs-string">'ui/common/FooterView'</span>).FooterView(L(<span class="hljs-string">'TitleTop'</span>), eventTitle, navGroup, <span class="hljs-keyword">self</span>);

    cachedImageView = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(imageDirectoryName, url, imageViewObject)</span> </span>{

        <span class="hljs-comment">// Grab the filename</span>
        <span class="hljs-keyword">var</span> filename = url.split(<span class="hljs-string">'/'</span>);

        filename = filename[filename.length - <span class="hljs-number">1</span>];
        <span class="hljs-comment">// Try and get the file that has been previously cached</span>

        <span class="hljs-keyword">var</span> file = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, imageDirectoryName, filename);

        <span class="hljs-keyword">if</span> (file.exists()) {
            <span class="hljs-comment">// If it has been cached, assign the local asset path to the image view object.</span>
            imageViewObject.image = file.nativePath;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// If it hasn't been cached, grab the directory it will be stored in.</span>
            <span class="hljs-keyword">var</span> g = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, imageDirectoryName);

            <span class="hljs-keyword">if</span> (!g.exists()) {
                <span class="hljs-comment">// If the directory doesn't exist, make it</span>
                g.createDirectory();
            };

            <span class="hljs-comment">// Create the HTTP client to download the asset.</span>
            <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
            xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
                <span class="hljs-keyword">if</span> (xhr.status == <span class="hljs-number">200</span>) {
                    <span class="hljs-comment">// On successful load, take that image file we tried to grab before and</span>
                    <span class="hljs-comment">// save the remote image data to it.</span>
                    file.write(xhr.responseData);
                    <span class="hljs-comment">// Assign the local asset path to the image view object.</span>
                    imageViewObject.image = file.nativePath;
                };
            };
            <span class="hljs-comment">// Issuing a GET request to the remote URL</span>
            xhr.open(<span class="hljs-string">'GET'</span>, url);
            <span class="hljs-comment">// Finally, sending the request out.</span>
            xhr.send();
        };
    };

    <span class="hljs-keyword">var</span> scrollingView = Titanium.UI.createScrollableView({
        height : widthDevice * (<span class="hljs-number">200</span> / <span class="hljs-number">640</span>),
        width : <span class="hljs-string">'100%'</span>,
        top : <span class="hljs-number">0</span>
    });

    <span class="hljs-keyword">var</span> api = <span class="hljs-keyword">new</span> ServiceRequestServer();
    <span class="hljs-comment">// Get data from server</span>
    api.requestMethodPost(<span class="hljs-string">""</span>);

    <span class="hljs-comment">// Array images</span>
    <span class="hljs-keyword">var</span> arrImage = [];
</code></pre><pre><code class="hljs">
    <span class="hljs-comment">// Handle response from server</span>
    Ti.App.addEventListener(<span class="hljs-string">'getTopBanner'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetBanner</span><span class="hljs-params">(data)</span> </span>{
        Ti.API.info(<span class="hljs-string">'Status image BANNER: '</span> + data.status);
        <span class="hljs-comment">// Get json from response from server.createActivityIndicator</span>

        <span class="hljs-keyword">if</span> (data.status === <span class="hljs-string">'NG'</span>) {

        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.status === <span class="hljs-string">'OK'</span>) {
            <span class="hljs-keyword">var</span> json = data.json[<span class="hljs-number">1</span>];

            <span class="hljs-keyword">if</span> (data.status === <span class="hljs-string">'OK'</span> &amp;&amp; json[<span class="hljs-string">'banner'</span>].length &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; json[<span class="hljs-string">'banner'</span>].length; i++) {
                    <span class="hljs-keyword">var</span> bannerimage = json[<span class="hljs-string">'banner'</span>][i].img_url.substr(<span class="hljs-number">0</span>, <span class="hljs-number">7</span>) + json[<span class="hljs-string">'banner'</span>][i].img_url.substr(<span class="hljs-number">7</span>, <span class="hljs-number">100</span>);

                    Ti.API.info(<span class="hljs-string">"bannerimage: "</span> + bannerimage);

                    <span class="hljs-keyword">var</span> banner = Ti.UI.createImageView();

                    cachedImageView(<span class="hljs-string">'localimages'</span> + i, bannerimage, banner);

                    banner.url = json[<span class="hljs-string">'banner'</span>][i].url;

                    banner.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
                        Titanium.Platform.openURL(e.source.url);
                    });

                    arrImage.push(banner);
                };

                scrollingView.views = arrImage;
            }
        }

        <span class="hljs-comment">//Ti.App.removeEventListener('getTopBanner', GetBanner);</span>
    });

    <span class="hljs-comment">//Set timer change image every 2 second</span>
    <span class="hljs-keyword">var</span> countCurrentImage = <span class="hljs-number">0</span>;
    <span class="hljs-comment">// scrollingView.setCurrentPage(countCurrentImage);</span>

    Ti.App.timer = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        scrollingView.scrollToView(countCurrentImage);
        countCurrentImage++;
        <span class="hljs-keyword">if</span> (countCurrentImage &gt;= arrImage.length) {
            countCurrentImage = <span class="hljs-number">0</span>;
        }
    }, <span class="hljs-number">3500</span>);
</code></pre><pre><code class="hljs">    <span class="hljs-comment">/*
    var btnTest = Ti.UI.createButton({
    title : L("For_Test"),
    height : '5%',
    width : '80%',
    font : {
    fontSize : '20%'
    },
    top : 0,
    backgroundImage : '/common/images/btn_cancel_03.png'
    });

    btnTest.addEventListener('click', function()
    {
    var image = require('ui/window/image2').image;
    // Check the osname to be android or iphone
    if (osname === 'android')
    {
    new image(navGroup).open();
    } else if (osname === 'iphone') {
    navGroup.open(new image(navGroup));
    }
    });
    self.add(btnTest);
    */</span>

    <span class="hljs-comment">// Create the table parent to container child</span>
    var tableViewParent = Ti.UI.createTableView({
        <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>,
    });

    <span class="hljs-comment">// Create the table view row to insert into tableViewParent</span>
    var tableViewRowChild = Ti.UI.createTableViewRow({
    });

    <span class="hljs-comment">// Create a array of controls.</span>
    var controlList = [];

    var table = Ti.UI.createTableView({
        <span class="hljs-string">top :</span> scrollingView.height,
        <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>,
    });

    <span class="hljs-comment">//some dummy data for our table view</span>
    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
        var tableData = [{
            <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/tablemenubg.jpg'</span>,
            <span class="hljs-string">title :</span> <span class="hljs-string">'      '</span> + L(<span class="hljs-string">'WebSearch'</span>),
            <span class="hljs-string">id :</span> <span class="hljs-string">'1'</span>,
            <span class="hljs-string">height :</span> widthDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>),
            <span class="hljs-string">font :</span> {
                <span class="hljs-string">fontSize :</span> widthDevice * <span class="hljs-number">0.26</span> * (<span class="hljs-number">20</span> / <span class="hljs-number">100</span>)
            },
            <span class="hljs-string">leftImage :</span> <span class="hljs-string">'/common/images/search_icon.png'</span>,
            <span class="hljs-string">rightImage :</span> arrow_image,
            <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>
        }, {
            <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/tablemenubg.jpg'</span>,
            <span class="hljs-string">title :</span> <span class="hljs-string">'      '</span> + L(<span class="hljs-string">'ShopSearch'</span>),
            <span class="hljs-string">id :</span> <span class="hljs-string">'2'</span>,
            <span class="hljs-string">height :</span> widthDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>),
            <span class="hljs-string">font :</span> {
                <span class="hljs-string">fontSize :</span> widthDevice * <span class="hljs-number">0.26</span> * (<span class="hljs-number">20</span> / <span class="hljs-number">100</span>)
            },
            <span class="hljs-string">leftImage :</span> <span class="hljs-string">'/common/images/branch_search_icon.png'</span>,
            <span class="hljs-string">rightImage :</span> arrow_image,
            <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>
        }, {
            <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/tablemenubg.jpg'</span>,
            <span class="hljs-string">title :</span> <span class="hljs-string">'      '</span> + L(<span class="hljs-string">'FuelCalculator'</span>),
            <span class="hljs-string">id :</span> <span class="hljs-string">'3'</span>,
            <span class="hljs-string">height :</span> widthDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>),
            <span class="hljs-string">font :</span> {
                <span class="hljs-string">fontSize :</span> widthDevice * <span class="hljs-number">0.26</span> * (<span class="hljs-number">20</span> / <span class="hljs-number">100</span>)
            },
            <span class="hljs-string">leftImage :</span> <span class="hljs-string">'/common/images/gas_icon.png'</span>,
            <span class="hljs-string">rightImage :</span> arrow_image,
            <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>
        }, {
            <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/tablemenubg.jpg'</span>,
            <span class="hljs-string">title :</span> <span class="hljs-string">'      '</span> + L(<span class="hljs-string">'Maintenance'</span>),
            <span class="hljs-string">id :</span> <span class="hljs-string">'4'</span>,
            <span class="hljs-string">height :</span> widthDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>),
            <span class="hljs-string">font :</span> {
                <span class="hljs-string">fontSize :</span> widthDevice * <span class="hljs-number">0.26</span> * (<span class="hljs-number">20</span> / <span class="hljs-number">100</span>)
            },
            <span class="hljs-string">leftImage :</span> <span class="hljs-string">'/common/images/setting_icon.png'</span>,
            <span class="hljs-string">rightImage :</span> arrow_image,
            <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>
        }];
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
        var tableData = [{
            <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/tablemenubg.jpg'</span>,
            <span class="hljs-string">title :</span> L(<span class="hljs-string">'WebSearch'</span>),
            <span class="hljs-string">id :</span> <span class="hljs-string">'1'</span>,
            <span class="hljs-string">height :</span> heightDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>),
            <span class="hljs-string">leftImage :</span> <span class="hljs-string">'/common/images/search_icon.png'</span>,
            <span class="hljs-string">rightImage :</span> arrow_image,
            <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
            <span class="hljs-string">font :</span> {
                <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15'</span>
            }
        }, {
            <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/tablemenubg.jpg'</span>,
            <span class="hljs-string">title :</span> L(<span class="hljs-string">'ShopSearch'</span>),
            <span class="hljs-string">id :</span> <span class="hljs-string">'2'</span>,
            <span class="hljs-string">height :</span> heightDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>),
            <span class="hljs-string">leftImage :</span> <span class="hljs-string">'/common/images/branch_search_icon.png'</span>,
            <span class="hljs-string">rightImage :</span> arrow_image,
            <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
            <span class="hljs-string">font :</span> {
                <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15'</span>
            }
        }, {
            <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/tablemenubg.jpg'</span>,
            <span class="hljs-string">title :</span> L(<span class="hljs-string">'FuelCalculator'</span>),
            <span class="hljs-string">id :</span> <span class="hljs-string">'3'</span>,
            <span class="hljs-string">height :</span> heightDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>),
            <span class="hljs-string">leftImage :</span> <span class="hljs-string">'/common/images/gas_icon.png'</span>,
            <span class="hljs-string">rightImage :</span> arrow_image,
            <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
            <span class="hljs-string">font :</span> {
                <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15'</span>
            }
        }, {
            <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/tablemenubg.jpg'</span>,
            <span class="hljs-string">title :</span> L(<span class="hljs-string">'Maintenance'</span>),
            <span class="hljs-string">id :</span> <span class="hljs-string">'4'</span>,
            <span class="hljs-string">height :</span> heightDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>),
            <span class="hljs-string">leftImage :</span> <span class="hljs-string">'/common/images/setting_icon.png'</span>,

            <span class="hljs-string">rightImage :</span> arrow_image,
            <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
            <span class="hljs-string">font :</span> {
                <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15'</span>
            }
        }];
    }
</code></pre><pre><code class="hljs">
    <span class="hljs-keyword">var</span> tableMenu = Ti.UI.createTableView({
        backgroundColor : <span class="hljs-string">'transparent'</span>,
        scrollable : <span class="hljs-literal">false</span>,
        data : tableData,
        height : (widthDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>)) * <span class="hljs-number">5</span>,
        top : <span class="hljs-number">0</span>,
        font : {
            fontSize : <span class="hljs-string">'12'</span>,
        }
    });

    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>)
        tableMenu.height = (widthDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>)) * <span class="hljs-number">6</span>;
    <span class="hljs-keyword">else</span>
        tableMenu.height = (widthDevice * (<span class="hljs-number">10</span> / <span class="hljs-number">100</span>)) * <span class="hljs-number">4</span>;

    <span class="hljs-comment">//add behavior</span>
    tableMenu.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

        <span class="hljs-keyword">if</span> (e.rowData.id === <span class="hljs-string">"1"</span>) {
            <span class="hljs-keyword">var</span> WebSearch = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/window/AP201_WebSearch'</span>).WebSearch;
            <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                <span class="hljs-comment">//Push window navigation group</span>
                navGroup.open(<span class="hljs-keyword">new</span> WebSearch(navGroup));
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                <span class="hljs-comment">//Open Activity</span>
                <span class="hljs-keyword">new</span> WebSearch(navGroup).open();
            }
        }
        <span class="hljs-comment">//HungDang</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.rowData.id === <span class="hljs-string">"2"</span>) {
            <span class="hljs-keyword">var</span> aP301_ShopSearch = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/window/AP301_ShopSearch'</span>).AP301_ShopSearch;
            <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                <span class="hljs-comment">//Push window navigation group</span>
                navGroup.open(<span class="hljs-keyword">new</span> aP301_ShopSearch(navGroup));
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                <span class="hljs-comment">//Open Activity</span>
                <span class="hljs-keyword">new</span> aP301_ShopSearch(navGroup).open();
            }
        }

        <span class="hljs-comment">// AP401</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.rowData.id === <span class="hljs-string">"3"</span>) {
            <span class="hljs-keyword">var</span> aP401_BikeSelect = <span class="hljs-built_in">require</span>(<span class="hljs-string">"/ui/window/AP401_BikeSelect"</span>).AP401_BikeSelect;
            <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                <span class="hljs-comment">//Push window navigation group</span>
                navGroup.open(<span class="hljs-keyword">new</span> aP401_BikeSelect(navGroup));
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                <span class="hljs-comment">//Open Activity</span>
                <span class="hljs-keyword">new</span> aP401_BikeSelect(navGroup).open();
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.rowData.id === <span class="hljs-string">"4"</span>) {
            <span class="hljs-keyword">var</span> aP401_BikeSelect = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/window/AP401_BikeSelect'</span>).AP401_BikeSelect;
            <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                <span class="hljs-comment">//Push window navigation group</span>
                navGroup.open(<span class="hljs-keyword">new</span> aP401_BikeSelect(navGroup));
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                <span class="hljs-comment">//Open Activity</span>
                <span class="hljs-keyword">new</span> aP401_BikeSelect(navGroup).open();
            }
        }
    });
</code></pre><pre><code class="hljs">
    <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {

        var row = Ti.UI.createTableViewRow({
            <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/tablemenubg.jpg'</span>,
            <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'white'</span>,
            <span class="hljs-string">height :</span> widthDevice * <span class="hljs-number">0.5</span> * (<span class="hljs-number">47</span> / <span class="hljs-number">155</span>),
            <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
            <span class="hljs-string">id :</span> listCategory[i].id,
            <span class="hljs-string">bottom :</span> listCategory[i].bottom,
            <span class="hljs-string">name :</span> listCategory[i].name,
        });

        <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
            var lblTitle = Ti.UI.createLabel({
                <span class="hljs-string">text :</span> listCategory[i].name,
                <span class="hljs-string">font :</span> {
                    <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15'</span>,
                    <span class="hljs-string">fontWeight :</span> <span class="hljs-string">'bold'</span>
                },
                <span class="hljs-string">height :</span> <span class="hljs-number">20</span>,
                <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
                <span class="hljs-string">left :</span> row.height * (<span class="hljs-number">86</span> / <span class="hljs-number">100</span>) + <span class="hljs-number">12</span>,
                <span class="hljs-string">top :</span> <span class="hljs-string">'4%'</span>,
                <span class="hljs-string">color :</span> <span class="hljs-string">'#000'</span>,
                <span class="hljs-string">touchEnabled :</span> <span class="hljs-literal">true</span>
            });

            var lbldecription = Ti.UI.createLabel({
                <span class="hljs-string">text :</span> listCategory[i].decription,
                <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>,
                <span class="hljs-string">left :</span> row.height * (<span class="hljs-number">86</span> / <span class="hljs-number">100</span>) + <span class="hljs-number">11</span>,
                <span class="hljs-string">top :</span> <span class="hljs-string">'30%'</span>,
                <span class="hljs-string">font :</span> {
                    <span class="hljs-string">fontSize :</span> <span class="hljs-string">'12'</span>
                }
            });
            var img1 = Ti.UI.createImageView({
                <span class="hljs-string">left :</span> <span class="hljs-string">'0%'</span>,
                <span class="hljs-string">width :</span> <span class="hljs-string">'50%'</span>,
                <span class="hljs-string">height :</span> row.height,
                <span class="hljs-string">image :</span> <span class="hljs-string">'/common/images/'</span> + listCategory[i].id + <span class="hljs-string">'.jpg'</span>,
                <span class="hljs-string">id :</span> listCategory[i].id,
                <span class="hljs-string">bottom :</span> listCategory[i].bottom,
                <span class="hljs-string">name :</span> listCategory[i].name
            });

            row.add(img1);

            img1.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
                <span class="hljs-comment">//alert(e.source.id);</span>

                var aP101_Category2Selection = require(<span class="hljs-string">'ui/window/AP101_Category2Selection'</span>).AP101_Category2Selection;

                <span class="hljs-keyword">if</span> (e.source.lenght != <span class="hljs-number">6</span>) {

                    <span class="hljs-comment">//Check OS</span>
                    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                        <span class="hljs-comment">//Push window navigation group</span>
                        navGroup.open(<span class="hljs-keyword">new</span> aP101_Category2Selection(navGroup, <span class="hljs-literal">null</span>, e.source.id, e.source.name));
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                        <span class="hljs-comment">//Open Activity</span>
                        <span class="hljs-keyword">new</span> aP101_Category2Selection(navGroup, <span class="hljs-literal">null</span>, e.source.id, e.source.name).open();
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// the AP301_ShopSearch Screen</span>
                    var searchList = require(<span class="hljs-string">'ui/window/AP101_Category2Selection'</span>).AP101_Category2Selection;
                    var dataCondition = [];
                    dataCondition.push({
                        <span class="hljs-string">keyword :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">category :</span> e.source.id,
                        <span class="hljs-string">categoryText :</span> e.source.name,
                        <span class="hljs-string">genre :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">genreText :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">price :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">priceText :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">sort :</span> <span class="hljs-string">'1'</span>,
                        <span class="hljs-string">sortText :</span> <span class="hljs-string">'????'</span>,
                        <span class="hljs-string">inventory :</span> <span class="hljs-string">''</span>
                    });
                    <span class="hljs-comment">// Check OS</span>
                    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                        <span class="hljs-comment">// Open in IOS</span>
                        navGroup.open(<span class="hljs-keyword">new</span> searchList(navGroup, <span class="hljs-literal">null</span>, e.source.id, <span class="hljs-literal">null</span>, e.source.name, dataCondition));
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                        <span class="hljs-comment">// Open in android</span>
                        <span class="hljs-keyword">new</span> searchList(navGroup, <span class="hljs-literal">null</span>, e.source.id, <span class="hljs-literal">null</span>, e.source.name, dataCondition).open();
                    }
                }

            });
</code></pre><pre><code class="hljs">
            var j = ++i;
            <span class="hljs-keyword">if</span> (j &lt; listCategory.length) {
                var img2 = Ti.UI.createImageView({
                    <span class="hljs-string">left :</span> <span class="hljs-string">'50%'</span>,
                    <span class="hljs-string">width :</span> <span class="hljs-string">'50%'</span>,
                    <span class="hljs-string">height :</span> row.height,
                    <span class="hljs-string">image :</span> <span class="hljs-string">'/common/images/'</span> + listCategory[i].id + <span class="hljs-string">'.jpg'</span>,
                    <span class="hljs-string">id :</span> listCategory[j].id,
                    <span class="hljs-string">bottom :</span> listCategory[j].bottom,
                    <span class="hljs-string">name :</span> listCategory[j].name
                });
                row.add(img2);

                img2.addEventListener(<span class="hljs-string">'click'</span>, function(e) {

                    var aP101_Category2Selection = require(<span class="hljs-string">'ui/window/AP101_Category2Selection'</span>).AP101_Category2Selection;

                    <span class="hljs-keyword">if</span> (e.source.lenght != <span class="hljs-number">6</span>) {

                        <span class="hljs-comment">//Check OS</span>
                        <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                            <span class="hljs-comment">//Push window navigation group</span>
                            navGroup.open(<span class="hljs-keyword">new</span> aP101_Category2Selection(navGroup, <span class="hljs-literal">null</span>, e.source.id, e.source.name));
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                            <span class="hljs-comment">//Open Activity</span>
                            <span class="hljs-keyword">new</span> aP101_Category2Selection(navGroup, <span class="hljs-literal">null</span>, e.source.id, e.source.name).open();
                        }
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// the MB202_Product_List Screen</span>
                        var searchList = require(<span class="hljs-string">'ui/window/MB202_Product_List'</span>).MB202_Product_List;
                        var dataCondition = [];
                        dataCondition.push({
                            <span class="hljs-string">keyword :</span> <span class="hljs-string">''</span>,
                            <span class="hljs-string">category :</span> e.source.id,
                            <span class="hljs-string">categoryText :</span> e.source.name,
                            <span class="hljs-string">genre :</span> <span class="hljs-string">''</span>,
                            <span class="hljs-string">genreText :</span> <span class="hljs-string">''</span>,
                            <span class="hljs-string">price :</span> <span class="hljs-string">''</span>,
                            <span class="hljs-string">priceText :</span> <span class="hljs-string">''</span>,
                            <span class="hljs-string">sort :</span> <span class="hljs-string">'1'</span>,
                            <span class="hljs-string">sortText :</span> <span class="hljs-string">'????'</span>,
                            <span class="hljs-string">inventory :</span> <span class="hljs-string">''</span>
                        });
                        <span class="hljs-comment">// Check OS</span>
                        <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                            <span class="hljs-comment">// Open in IOS</span>
                            navGroup.open(<span class="hljs-keyword">new</span> searchList(navGroup, <span class="hljs-literal">null</span>, e.source.id, <span class="hljs-literal">null</span>, e.source.name, dataCondition));
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                            <span class="hljs-comment">// Open in android</span>
                            <span class="hljs-keyword">new</span> searchList(navGroup, <span class="hljs-literal">null</span>, e.source.id, <span class="hljs-literal">null</span>, e.source.name, dataCondition).open();
                        }
                    }

                });
            }

        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
            <span class="hljs-comment">// Create the ImageView to view image</span>
            var image1 = Ti.UI.createImageView({
                <span class="hljs-string">left :</span> <span class="hljs-string">'0%'</span>,
                <span class="hljs-string">width :</span> <span class="hljs-string">'50%'</span>,
                <span class="hljs-string">height :</span> row.height,
                <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/common/images/'</span> + listCategory[i].id + <span class="hljs-string">'.jpg'</span>,
                <span class="hljs-string">id :</span> listCategory[i].id,
                <span class="hljs-string">bottom :</span> listCategory[i].bottom,
                <span class="hljs-string">name :</span> listCategory[i].name
            });
            row.add(image1);

            image1.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
                <span class="hljs-comment">//alert(e.source.id);</span>

                var aP101_Category2Selection = require(<span class="hljs-string">'ui/window/AP101_Category2Selection'</span>).AP101_Category2Selection;

                <span class="hljs-keyword">if</span> (e.source.lenght != <span class="hljs-number">6</span>) {

                    <span class="hljs-comment">//Check OS</span>
                    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                        <span class="hljs-comment">//Push window navigation group</span>
                        navGroup.open(<span class="hljs-keyword">new</span> aP101_Category2Selection(navGroup, <span class="hljs-literal">null</span>, e.source.id, e.source.name));
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                        <span class="hljs-comment">//Open Activity</span>
                        <span class="hljs-keyword">new</span> aP101_Category2Selection(navGroup, <span class="hljs-literal">null</span>, e.source.id, e.source.name).open();
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// the MB202_Product_List Screen</span>
                    var searchList = require(<span class="hljs-string">'ui/window/MB202_Product_List'</span>).MB202_Product_List;
                    var dataCondition = [];
                    dataCondition.push({
                        <span class="hljs-string">keyword :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">category :</span> e.source.id,
                        <span class="hljs-string">categoryText :</span> e.source.name,
                        <span class="hljs-string">genre :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">genreText :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">price :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">priceText :</span> <span class="hljs-string">''</span>,
                        <span class="hljs-string">sort :</span> <span class="hljs-string">'1'</span>,
                        <span class="hljs-string">sortText :</span> <span class="hljs-string">'????'</span>,
                        <span class="hljs-string">inventory :</span> <span class="hljs-string">''</span>
                    });
                    <span class="hljs-comment">// Check OS</span>
                    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                        <span class="hljs-comment">// Open in IOS</span>
                        navGroup.open(<span class="hljs-keyword">new</span> searchList(navGroup, <span class="hljs-literal">null</span>, e.source.id, <span class="hljs-literal">null</span>, e.source.name, dataCondition));
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                        <span class="hljs-comment">// Open in android</span>
                        <span class="hljs-keyword">new</span> searchList(navGroup, <span class="hljs-literal">null</span>, e.source.id, <span class="hljs-literal">null</span>, e.source.name, dataCondition).open();
                    }
                }

            });
</code></pre><pre><code class="hljs">
            <span class="hljs-comment">// Create the label</span>
            var lblTitle = Ti.UI.createLabel({
                <span class="hljs-built_in">text</span> : utils.subStringLength(listCategory[i].name, <span class="hljs-number">30</span>),
                font : {
                    fontSize : <span class="hljs-string">'15%'</span>,
                    fontWeight : <span class="hljs-string">'bold'</span>
                },
                <span class="hljs-variable">height</span> : row.<span class="hljs-variable">height</span> * (<span class="hljs-number">25</span> / <span class="hljs-number">100</span>),
                <span class="hljs-variable">width</span> : widthDevice * (<span class="hljs-number">60</span> / <span class="hljs-number">100</span>),
                left : row.<span class="hljs-variable">height</span> * (<span class="hljs-number">95</span> / <span class="hljs-number">100</span>),
                top : <span class="hljs-string">'4%'</span>,
                <span class="hljs-built_in">color</span> : <span class="hljs-string">'#000'</span>,
                touchEnabled : <span class="hljs-keyword">true</span>
            });

            var j = ++i;
            <span class="hljs-keyword">if</span> (j &lt; listCategory.length) {
                var image2 = Ti.UI.createImageView({
                    left : <span class="hljs-string">'50%'</span>,
                    <span class="hljs-variable">width</span> : <span class="hljs-string">'50%'</span>,
                    <span class="hljs-variable">height</span> : row.<span class="hljs-variable">height</span>,
                    <span class="hljs-built_in">image</span> : <span class="hljs-string">'/common/images/'</span> + listCategory[i].id + <span class="hljs-string">'.jpg'</span>,
                    id : listCategory[j].id,
                    bottom : listCategory[j].bottom,
                    name : listCategory[j].name
                });
                row.<span class="hljs-built_in">add</span>(image2);

                image2.addEventListener(<span class="hljs-string">'click'</span>, function(e) {

                    var aP101_Category2Selection = require(<span class="hljs-string">'ui/window/AP101_Category2Selection'</span>).AP101_Category2Selection;

                    <span class="hljs-keyword">if</span> (e.source.lenght != <span class="hljs-number">6</span>) {

                        <span class="hljs-comment">//Check OS</span>
                        <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                            <span class="hljs-comment">//Push window navigation group</span>
                            navGroup.<span class="hljs-built_in">open</span>(<span class="hljs-keyword">new</span> aP101_Category2Selection(navGroup, <span class="hljs-keyword">null</span>, e.source.id, e.source.name));
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                            <span class="hljs-comment">//Open Activity</span>
                            <span class="hljs-keyword">new</span> aP101_Category2Selection(navGroup, <span class="hljs-keyword">null</span>, e.source.id, e.source.name).<span class="hljs-built_in">open</span>();
                        }
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// the MB202_Product_List Screen</span>
                        var searchList = require(<span class="hljs-string">'ui/window/MB202_Product_List'</span>).MB202_Product_List;
                        var dataCondition = [];
                        dataCondition.push({
                            keyword : <span class="hljs-string">''</span>,
                            category : e.source.id,
                            categoryText : e.source.name,
                            genre : <span class="hljs-string">''</span>,
                            genreText : <span class="hljs-string">''</span>,
                            price : <span class="hljs-string">''</span>,
                            priceText : <span class="hljs-string">''</span>,
                            <span class="hljs-built_in">sort</span> : <span class="hljs-string">'1'</span>,
                            sortText : <span class="hljs-string">'????'</span>,
                            inventory : <span class="hljs-string">''</span>
                        });
                        <span class="hljs-comment">// Check OS</span>
                        <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
                            <span class="hljs-comment">// Open in IOS</span>
                            navGroup.<span class="hljs-built_in">open</span>(<span class="hljs-keyword">new</span> searchList(navGroup, <span class="hljs-keyword">null</span>, e.source.id, <span class="hljs-keyword">null</span>, e.source.name, dataCondition));
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'android'</span>) {
                            <span class="hljs-comment">// Open in android</span>
                            <span class="hljs-keyword">new</span> searchList(navGroup, <span class="hljs-keyword">null</span>, e.source.id, <span class="hljs-keyword">null</span>, e.source.name, dataCondition).<span class="hljs-built_in">open</span>();
                        }
                    }

                });
            }
        }

        <span class="hljs-variable">height</span> += row.getHeight();
        tableDataCustom.push(row);
    };

    table.<span class="hljs-variable">height</span> = <span class="hljs-variable">height</span>;
    table.setData(tableDataCustom);

    tableViewRowChild.<span class="hljs-built_in">add</span>(table);

    tableMenu.top = scrollingView.<span class="hljs-variable">height</span> + table.<span class="hljs-variable">height</span>;

    tableViewRowChild.<span class="hljs-built_in">add</span>(tableMenu);

    tableViewParentData.push(tableViewRowChild);

    tableViewParent.setData(tableViewParentData);

    scrollWin.<span class="hljs-built_in">add</span>(tableViewParent);

    scrollWin.<span class="hljs-built_in">add</span>(scrollingView);

    <span class="hljs-comment">//scrollWin.add(table);</span>

    self.<span class="hljs-built_in">add</span>(scrollWin);

    scrollWin.setBottom(footerView.<span class="hljs-variable">height</span>);

    self.<span class="hljs-built_in">add</span>(footerView);

    toolActInd.hide();
    <span class="hljs-keyword">if</span> (osname === <span class="hljs-string">'iphone'</span>) {
        self.remove(toolActInd);
    }
    <span class="hljs-keyword">return</span> self;
};
</code></pre><p>code webview.js</p>
<pre><code class="hljs">Ti.<span class="hljs-keyword">include</span>(<span class="hljs-string">'/ui/common/ClientRequestService.js'</span>);
exports.WebView2 = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(navGroup)</span> </span>{
    <span class="hljs-keyword">var</span> utils = <span class="hljs-keyword">require</span>(<span class="hljs-string">'/ui/common/Util'</span>);
    <span class="hljs-keyword">var</span> osname = Ti.Platform.osname;
    <span class="hljs-keyword">var</span> widthDevice = Ti.Platform.displayCaps.platformWidth;

    Ti.App.addEventListener(<span class="hljs-string">'clearInterval'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        clearInterval(Ti.App.timer);
    });

    <span class="hljs-keyword">var</span> fontSize = <span class="hljs-string">'17%'</span>;

    <span class="hljs-keyword">var</span> height = <span class="hljs-string">'10%'</span>;

    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createWindow({
        title : L(<span class="hljs-string">''</span>),
        font : {
            fontSize : fontSize,
            fontWeight : <span class="hljs-string">'normal'</span>,
            fontFamily : <span class="hljs-string">'Arial'</span>
        },
        navBarHidden : <span class="hljs-keyword">true</span>,
        modal : <span class="hljs-keyword">true</span>,
        fullscreen : <span class="hljs-keyword">false</span>,
    });


    <span class="hljs-keyword">var</span> current_url = <span class="hljs-string">"http://www.eigyo.cc/yamaniha/Test.htm"</span>;
    Ti.API.info(<span class="hljs-string">'URL'</span>+current_url);
    <span class="hljs-keyword">var</span> webwindow = Ti.UI.createWebView();
    <span class="hljs-comment">//self.add(webwindow);</span>

    <span class="hljs-comment">//if(osname === 'android')</span>
        <span class="hljs-comment">//utils.openWebsite_android(self,webwindow,navGroup,current_url);</span>
    <span class="hljs-comment">//else if(osname === 'iphone')</span>
        utils.openWebsite_iphone(<span class="hljs-keyword">self</span>,webwindow,navGroup,current_url);

    <span class="hljs-keyword">self</span>.add(webwindow);

    <span class="hljs-keyword">var</span> eventTitle = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    };
    <span class="hljs-keyword">var</span> footerView = <span class="hljs-keyword">require</span>(<span class="hljs-string">'ui/common/FooterView'</span>).FooterView(L(<span class="hljs-string">'TitleTop'</span>), eventTitle, navGroup, <span class="hljs-keyword">self</span>);
    webwindow.setBottom(footerView.height);
    <span class="hljs-keyword">self</span>.add(footerView);

    <span class="hljs-keyword">var</span> back_button = Titanium.UI.createButton({
        title : <span class="hljs-string">'Back'</span>,
        style : Titanium.UI.iPhone.SystemButtonStyle.PLAIN
    });

    <span class="hljs-keyword">self</span>.setLeftNavButton(back_button);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
}
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 14th 2013, 6:24:54 am">January 14th 2013</span>
				by <span class='authorname'>Vinh Nguyen</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>app</span></li>
					
						<li><span class='tagname'>notification</span></li>
					
						<li><span class='tagname'>push</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hello Vinh,</p>
<p>Maybe my assumption is wrong, but it looks as if you posted your entire project in this post. This makes the whole thing unreadable, thus minimizing your chances of people helping you out.</p>
<p>Might I suggest that you try to post a more <strong>concise</strong> example that reproduces your problem.  Also, when posting big chink of code like that, you really should use a specialized service such as <a href="http:&#x2F;&#x2F;www.pastie.org">pastie</a>.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 14th 2013, 8:09:06 am">January 14th 2013</span>
								by <span class='authorname'>Christian Brousseau</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
