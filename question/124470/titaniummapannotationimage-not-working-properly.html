<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium.Map.Annotation.image not working properly » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium.Map.Annotation.image not working properly</h1>
		</header>
		<section>
			<p>Hello</p>
<p>There seems to be a problem with the Titanium.Map.Annotation.image property, or the documentation thereof. The documentation states the property is an ImageView, but also a string: <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.Map.Annotation.image-property.html">documentation</a></p>
<p>It seems the latter is true, as I am able to display an image file as a pin:</p>
<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.Map</span><span class="hljs-class">.createAnnotation</span>({
  <span class="hljs-attribute">latitude</span>: lat,
  <span class="hljs-attribute">longitude</span>: lng,
  <span class="hljs-attribute">title</span>: <span class="hljs-string">'test'</span>,
  <span class="hljs-attribute">image</span>: <span class="hljs-string">'/path/to/image.png'</span>
});
</code></pre><p>but if I reference an ImageView object instead, the annotation doesn&#39;t show up.<br>It would be great if it were possible to use an ImageView object as an annotation image instead, this would offer us much more possibilities.</p>
<p>I tried creating the ImageView I wanted, then saving it to file and referencing that instead. This would work, except that an ImageView combined of multiple ImageView objects looks different when saved to file (ImageView.toBlob()) than on the screen.. but that&#39;s another issue.</p>
<p>Any help on this? I&#39;ve seen the other topics on the pinimage matter, but they seem outdated, as the property was then only available on Android.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 19th 2011, 5:03:40 am">August 19th 2011</span>
				by <span class='authorname'>Chris Leuenberger</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>annotation</span></li>
					
						<li><span class='tagname'>imageview</span></li>
					
						<li><span class='tagname'>mapview</span></li>
					
						<li><span class='tagname'>pinimage</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-216906">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Unfortunately the image property of a map annotation can only be a local path. In a project I extended the Ti sdk for allowing remote urls for image annotations. Enabling the use of proper views would require a similar effort…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 19th 2011, 6:06:22 am">August 19th 2011</span>
								by <span class='authorname'>Olivier Morandi</span><br>
								<a class="icon-bg icon-link" href="question/124470/titaniummapannotationimage-not-working-properly.html#answer-216906" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Olivier,<br>Thanks for your reply. Could you point me in the direction of how to go about doing this? Unfortunately I don&#39;t have any experience in extending the Ti sdk.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 6:39:36 am">August 19th 2011</span>
											by <span class='authorname'>Chris Leuenberger</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>In this case you should put your hand in the sdk source. First thing you need is to understand how to develop native modules. Ti sdk internals follow the same principles. In your case you&#39;d want also to have a look at the ios mapkit sdk <a href="http:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;ios&#x2F;#documentation&#x2F;UserExperience&#x2F;Conceptual&#x2F;LocationAwarenessPG&#x2F;Introduction&#x2F;Introduction.html">http:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;ios&#x2F;#documentation&#x2F;UserExperience&#x2F;Conceptual&#x2F;LocationAwarenessPG&#x2F;</a> and how the Ti.Map module is currently implemented. Actually the key portion of code you&#39;d want to focus on is at line 642 of <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;blob&#x2F;master&#x2F;iphone&#x2F;Classes&#x2F;TiMapView.m">https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;blob&#x2F;master&#x2F;iphone&#x2F;Classes&#x2F;TiMapView.m</a> there is where annotation views are provided when they need to be displayed on the currently visible portion of the map. Actually it&#39;s a bit difficult giving more details in a comment. Just drop me a line if you need more ;-)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 7:38:54 am">August 19th 2011</span>
											by <span class='authorname'>Olivier Morandi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for the tips. I&#39;ll have a look, but I&#39;m not very confident as I have have absolutely no objective C knowledge.. :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 9:50:09 am">August 19th 2011</span>
											by <span class='authorname'>Chris Leuenberger</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve actually experienced something weird. If I set the image property of an annotation to a URL it doesn&#39;t load but if I go to a new view that loads that same image from a URL and then go back to the map view where the annotation is, it now shows the pin as my customized image from a URL.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 12:19:53 pm">August 19th 2011</span>
											by <span class='authorname'>Aaron Benzick</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Try this, haven&#39;t checked but seems a valid answer. I will need this later today maybe i can confirm later.</p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;8101&#x2F;can-i-display-an-external-image-in-mapview-annotation">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;8101&#x2F;can-i-display-an-external-image-in-mapview-annotation</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 12:28:03 pm">August 19th 2011</span>
											by <span class='authorname'>Pablo Liz</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-216948">
				
						<section>
							<p>I&#39;ve found a way to load a remote image as the custom pin easily. It actually makes sense to do it this way as well. Simply use Kevin Hopkins image caching functions found here:</p>
<p>http:&#x2F;&#x2F;kevin.h-pk-ns.com&#x2F;2011&#x2F;03&#x2F;11&#x2F;image-views-in-titanium-how-to-deal-with-caching&#x2F;</p>
<p>Once you import his library, you call the function:<br>cachedImageView(&#39;imageDirectoryName&#39;, &#39;http:&#x2F;&#x2F;MyRemoteServer.com&#x2F;public&#x2F;images&#x2F;1.png&#39;, imgMyImage);</p>
<p>Replace imgMyImage with the name of your pin and it works great. The cachedImageView just sets the &quot;image&quot; property of whatever resource you pass to it in that 3rd parameter so it doesn&#39;t have to be an imageview. It can be an annotation since it uses the same &#39;image&#39; property name.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 19th 2011, 1:00:30 pm">August 19th 2011</span>
								by <span class='authorname'>Aaron Benzick</span><br>
								<a class="icon-bg icon-link" href="question/124470/titaniummapannotationimage-not-working-properly.html#answer-216948" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
