<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>HTTPClient this.responseText return empty string on Appcelerator Mobile but it works on browsers! » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>HTTPClient this.responseText return empty string on Appcelerator Mobile but it works on browsers!</h1>
		</header>
		<section>
			<p>Hi all, I&#39;ve been trying to solve a mystery issue here. While i view http:&#x2F;&#x2F;www.ravesquare.com&#x2F;merchants&#x2F;testing, it shows the result in json. However, when I go back to my app, this.responseText return nothing but empty spaces.</p>
<p>Here&#39;s my code:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> url = <span class="hljs-string">'http://www.ravesquare.com/merchants/testing'</span>;
Ti.API.info(url);
<span class="hljs-keyword">var</span> xhr_merchants = Ti.Network.createHTTPClient({
    onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    Ti.API.info(<span class="hljs-string">"RESULT: "</span>+<span class="hljs-keyword">this</span>.responseText); <span class="hljs-comment">//Only show "RESULT: " without the result</span>
    <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText.trim());
    displayMerchantsByIndustrytype(json);

    },onerror : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    alert(<span class="hljs-string">"error"</span>);
    },timeout : <span class="hljs-number">3000</span>
});
xhr_merchants.open(<span class="hljs-string">'GET'</span>, url, <span class="hljs-literal">false</span>);
xhr_merchants.send();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 2nd 2012, 1:57:00 am">March 2nd 2012</span>
				by <span class='authorname'>Bryan Chua</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>application</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-232096">
				
						<section>
							<p>Hi Bryan</p>
<p>First of all the Ti.API.info have some problem showing the multiline data and might be your json is not showing out. </p>
<p>Can you try this.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> jsonData = <span class="hljs-type">JSON</span>.parse(this.responseText); 
<span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info(<span class="hljs-string">"RESULT: "</span>+jsonData); //<span class="hljs-type">Only</span> show <span class="hljs-string">"RESULT: "</span> <span class="hljs-keyword">without</span> the <span class="hljs-literal">result</span>
</code></pre><p>Though i am also testing the service in the short time and give you the perfect output.</p>
<p>Regards</p>
<p>Nikunj</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 2nd 2012, 2:29:58 am">March 2nd 2012</span>
								by <span class='authorname'>Nikunj Sakhrelia</span><br>
								<a class="icon-bg icon-link" href="question/133051/httpclient-thisresponsetext-return-empty-string-on-appcelerator-mobile-but-it-works-on-browsers#answer-232096" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Nikunj, I did try to JSON.parse before displaying it. The function stopped working at that line &quot;jsonData = JSON.parse(this.responseText);&quot;. So, i believe the real problem lies with &quot;this.responseText&quot;..</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 2:32:37 am">March 2nd 2012</span>
											by <span class='authorname'>Bryan Chua</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Bryan </p>
<p>I have just tested your json data on this site http:&#x2F;&#x2F;jsonformat.com&#x2F;#jsondataurllabel but its show an error parsing the data, please check the format of the data, seems like not an standard format of JSON.</p>
<p>Regards</p>
<p>Nikunj</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 2:39:46 am">March 2nd 2012</span>
											by <span class='authorname'>Nikunj Sakhrelia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Your current Output to the JSON on this <a href="http:&#x2F;&#x2F;www.ravesquare.com&#x2F;merchants&#x2F;testing">link</a>  is this </p>
<pre><code class="hljs">{"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-string">"1"</span></span>,"<span class="hljs-attribute">username</span>":<span class="hljs-value"><span class="hljs-string">"bob"</span></span>,"<span class="hljs-attribute">password</span>":<span class="hljs-value"><span class="hljs-string">"test"</span></span>,"<span class="hljs-attribute">email</span>":<span class="hljs-value"><span class="hljs-string">"test@test.com"</span></span>,"<span class="hljs-attribute">lastlogin</span>":<span class="hljs-value"><span class="hljs-string">"2010-10-12 16:25:45"</span></span>,"<span class="hljs-attribute">lastdraftid</span>":<span class="hljs-value"><span class="hljs-string">"0"</span></span>,"<span class="hljs-attribute">success</span>":<span class="hljs-value"><span class="hljs-literal">true</span></span>,"<span class="hljs-attribute">mysqli</span>":<span class="hljs-value"><span class="hljs-literal">null</span></span>,"<span class="hljs-attribute">currentseat</span>":<span class="hljs-value"><span class="hljs-number">1</span></span>}
</code></pre><p>It should be like this </p>
<pre><code class="hljs">{"<span class="hljs-attribute">info</span>":<span class="hljs-value">{"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-string">"1"</span></span>,"<span class="hljs-attribute">username</span>":<span class="hljs-value"><span class="hljs-string">"bob"</span></span>,"<span class="hljs-attribute">password</span>":<span class="hljs-value"><span class="hljs-string">"test"</span></span>,"<span class="hljs-attribute">email</span>":<span class="hljs-value"><span class="hljs-string">"test@test.com"</span></span>,"<span class="hljs-attribute">lastlogin</span>":<span class="hljs-value"><span class="hljs-string">"2010-10-12 16:25:45"</span></span>,"<span class="hljs-attribute">lastdraftid</span>":<span class="hljs-value"><span class="hljs-string">"0"</span></span>,"<span class="hljs-attribute">success</span>":<span class="hljs-value"><span class="hljs-literal">true</span></span>,"<span class="hljs-attribute">mysqli</span>":<span class="hljs-value"><span class="hljs-literal">null</span></span>,"<span class="hljs-attribute">currentseat</span>":<span class="hljs-value"><span class="hljs-number">1</span></span>}</span>}
</code></pre><p>Regards</p>
<p>Nikunj</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 2:42:50 am">March 2nd 2012</span>
											by <span class='authorname'>Nikunj Sakhrelia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Nikunj, I validated the json via http:&#x2F;&#x2F;jsonlint.com&#x2F; and it is showing valid result. </p>
<p>this is the json:<br>{&quot;id&quot;:&quot;1&quot;,&quot;username&quot;:&quot;bob&quot;,&quot;password&quot;:&quot;test&quot;,&quot;email&quot;:&quot;test@test.com&quot;,&quot;lastlogin&quot;:&quot;2010-10-12 16:25:45&quot;,&quot;lastdraftid&quot;:&quot;0&quot;,&quot;success&quot;:true,&quot;mysqli&quot;:null,&quot;currentseat&quot;:1}</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 2:43:37 am">March 2nd 2012</span>
											by <span class='authorname'>Bryan Chua</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Nikunj, I have altered the result as what you indicated. But it is still not showing anything. I copied the exact same json from another website http:&#x2F;&#x2F;www.jamespwright.com&#x2F;magic&#x2F;loginasuser.php?username=bob&amp;password=test and it works if I used his. What is wrong here?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 2:49:02 am">March 2nd 2012</span>
											by <span class='authorname'>Bryan Chua</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Bryan </p>
<p>I got this result from the link you have with JSON output.</p>
<pre><code class="hljs">?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????{<span class="hljs-string">"info"</span>:{<span class="hljs-string">"id"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-string">"username"</span>:<span class="hljs-string">"bob"</span>,<span class="hljs-string">"password"</span>:<span class="hljs-string">"test"</span>,<span class="hljs-string">"email"</span>:<span class="hljs-string">"test@test.com"</span>,<span class="hljs-string">"lastlogin"</span>:<span class="hljs-string">"2010-10-12 16:25:45"</span>,<span class="hljs-string">"lastdraftid"</span>:<span class="hljs-string">"0"</span>,<span class="hljs-string">"success"</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">"mysqli"</span>:<span class="hljs-literal">null</span>,<span class="hljs-string">"currentseat"</span>:<span class="hljs-number">1</span>}}
</code></pre><p>Please check that the URL with JSON data not return any spaces </p>
<p>Regards</p>
<p>Nikunj</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 2:50:50 am">March 2nd 2012</span>
											by <span class='authorname'>Nikunj Sakhrelia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>this is the <a href="http:&#x2F;&#x2F;www.jamespwright.com&#x2F;magic&#x2F;loginasuser.php?username=bob&amp;password=test">link</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 2:54:57 am">March 2nd 2012</span>
											by <span class='authorname'>Bryan Chua</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Nikunj, how is it? Do you manage to see what&#39;s the problem? :) I am wondering if it could be a server issue?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 3:02:06 am">March 2nd 2012</span>
											by <span class='authorname'>Bryan Chua</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes Bryan </p>
<p>this is a server issue as it sending the JSON with some blank space in the starting. Check on the server side for sending the proper format.</p>
<p>Regards</p>
<p>Nikunj</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 3:10:19 am">March 2nd 2012</span>
											by <span class='authorname'>Nikunj Sakhrelia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>There are a lot of white spaces when I checked with jsonlint.com … I am using cakePHP on my backend. How do I remove those spaces?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 3:29:49 am">March 2nd 2012</span>
											by <span class='authorname'>Bryan Chua</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-232097">
				
						<section>
							<p>For some reasons on server return this:</p>
<pre><code class="hljs">"responseText":"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-command">\u</span>0000<span class="hljs-special">{</span><span class="hljs-command">\"</span>id<span class="hljs-command">\"</span>:<span class="hljs-command">\"</span>1<span class="hljs-command">\"</span>,<span class="hljs-command">\"</span>username<span class="hljs-command">\"</span>:<span class="hljs-command">\"</span>bob<span class="hljs-command">\"</span>,<span class="hljs-command">\"</span>password<span class="hljs-command">\"</span>:<span class="hljs-command">\"</span>test<span class="hljs-command">\"</span>,<span class="hljs-command">\"</span>email<span class="hljs-command">\"</span>:<span class="hljs-command">\"</span>test@test.com<span class="hljs-command">\"</span>,<span class="hljs-command">\"</span>lastlogin<span class="hljs-command">\"</span>:<span class="hljs-command">\"</span>2010-10-12 16:25:45<span class="hljs-command">\"</span>,<span class="hljs-command">\"</span>lastdraftid<span class="hljs-command">\"</span>:<span class="hljs-command">\"</span>0<span class="hljs-command">\"</span>,<span class="hljs-command">\"</span>success<span class="hljs-command">\"</span>:true,<span class="hljs-command">\"</span>mysqli<span class="hljs-command">\"</span>:null,<span class="hljs-command">\"</span>currentseat<span class="hljs-command">\"</span>:1<span class="hljs-special">}</span>","status":200<span class="hljs-special">}</span>
</code></pre><p>Here&#39;s my test code:</p>
<pre><code class="hljs">onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    alert(<span class="hljs-keyword">this</span>.responseText);<span class="hljs-comment">// Works</span>
    Ti.API.info(<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText.trim());<span class="hljs-comment">// This wont work</span>
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 2nd 2012, 2:39:53 am">March 2nd 2012</span>
								by <span class='authorname'>Minh Nguyen</span><br>
								<a class="icon-bg icon-link" href="question/133051/httpclient-thisresponsetext-return-empty-string-on-appcelerator-mobile-but-it-works-on-browsers#answer-232097" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>There&#39;re lots of <code>\u0000</code> in your response.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 2:40:28 am">March 2nd 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes, I understand. But if you go directly to the url http:&#x2F;&#x2F;www.ravesquare.com&#x2F;merchants&#x2F;testing, the result is what I want!</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 2:46:14 am">March 2nd 2012</span>
											by <span class='authorname'>Bryan Chua</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Can you post some code on the backend?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 4:15:14 am">March 2nd 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Did you use PHP - json_encode()? Make sure character sets are UTF-8. This <a href="http:&#x2F;&#x2F;php.net&#x2F;manual&#x2F;en&#x2F;function.json-encode.php">link</a> may help you out (search \u0000 ).</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 4:23:57 am">March 2nd 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hihi, I&#39;ve removed the spaces in the response but it still does not work.</p>
<p>http:&#x2F;&#x2F;www.ravesquare.com&#x2F;merchants&#x2F;testing</p>
<p>On my backend, I used cakePHP:</p>
<pre><code class="hljs"><span class="hljs-keyword">function</span> get_merchant(id){
    <span class="hljs-variable">$this-</span>&gt;autoRender = FALSE; 
    <span class="hljs-variable">$merchant</span> = <span class="hljs-variable">$this-</span>&gt;Merchant-&gt;findById(id);
    echo json_encode(<span class="hljs-variable">$merchant</span>);
}
</code></pre><p>Is there anything wrong in the backend? I&#39;ve saved the php file in UTF-8 before this.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 6:02:36 am">March 2nd 2012</span>
											by <span class='authorname'>Bryan Chua</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>In CakePHP, Try this:</p>
<pre><code class="hljs"><span class="hljs-keyword">function</span> get_merchant(id){
        <span class="hljs-variable">$this-</span>&gt;layout = <span class="hljs-string">'ajax'</span>;
        <span class="hljs-variable">$this-</span>&gt;autoRender = FALSE; 
        <span class="hljs-variable">$merchant</span> = <span class="hljs-variable">$this-</span>&gt;Merchant-&gt;findById(id);
        echo json_encode(<span class="hljs-variable">$merchant</span>);
}
</code></pre><p><strong>&#x2F;app&#x2F;views&#x2F;layouts&#x2F;ajax.ctp</strong></p>
<pre><code class="hljs"><span class="php"><span class="hljs-preprocessor">&lt;?php</span>
    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$content_for_layout</span>;
    Configure::write(<span class="hljs-string">'debug'</span>, <span class="hljs-number">0</span>);  
<span class="hljs-preprocessor">?&gt;</span></span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 6:10:29 am">March 2nd 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Nguyen, I copied yours into mine and it doesn&#39;t work. :&#39;(</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 6:28:10 am">March 2nd 2012</span>
											by <span class='authorname'>Bryan Chua</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK this should work</p>
<pre><code class="hljs">onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"[\\u0000]"</span>, [<span class="hljs-string">"g"</span>]);    
    <span class="hljs-keyword">var</span> res = <span class="hljs-keyword">this</span>.responseText.trim().replace(regex, <span class="hljs-string">''</span>);
    Ti.API.info( res );
    <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(res);    
    alert(json.email);
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 7:44:23 am">March 2nd 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry regular expression should be: </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"[\u0000]"</span>, [<span class="hljs-string">"g"</span>]);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 2nd 2012, 7:47:38 am">March 2nd 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-248569">
				
						<section>
							<p>I found a way around this in Android: </p>
<pre><code class="hljs">getClientInfo = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ClntID,_cb</span>) </span>{
        <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
        xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            Ti.API.info(<span class="hljs-keyword">this</span>.responseText);
            _cb(<span class="hljs-keyword">this</span>.responseText);
        };
        <span class="hljs-keyword">var</span> url = <span class="hljs-string">"URL?getClientINfo&amp;cnt_id="</span>+ClntID;
        Ti.API.info(url);
        xhr.open(<span class="hljs-string">"GET"</span>,url);
        xhr.send();
    };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_cb</span>(<span class="hljs-params">r</span>)</span>{
   <span class="hljs-keyword">var</span> r = <span class="hljs-built_in">JSON</span>.parse(rt);
  <span class="hljs-comment">// now I can use it</span>
}
</code></pre><p>_cb is a callback function that takes the responseText and parses it, by appling  JSON.parse()</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 3rd 2012, 4:28:46 pm">October 3rd 2012</span>
								by <span class='authorname'>Gary Stock</span><br>
								<a class="icon-bg icon-link" href="question/133051/httpclient-thisresponsetext-return-empty-string-on-appcelerator-mobile-but-it-works-on-browsers#answer-248569" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
