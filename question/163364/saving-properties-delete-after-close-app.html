<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Saving properties delete after close app Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Saving properties delete after close app</h1>
		</header>
		<section>
			<p>Hi, when i start the app I have the following code:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> opened = Ti.App.Properties.getBool(<span class="hljs-string">'appLaunch'</span>);
<span class="hljs-keyword">if</span>(!opened){
    Ti.App.Properties.setBool(<span class="hljs-string">"appLogin"</span>, <span class="hljs-literal">false</span>);
    Ti.App.Properties.setBool(<span class="hljs-string">"appLaunch"</span>, <span class="hljs-literal">true</span>);
}
</code></pre><p>Later after login : </p>
<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.App</span><span class="hljs-class">.Properties</span><span class="hljs-class">.setBool</span>("<span class="hljs-tag">appLogin</span>", <span class="hljs-tag">true</span>);
</code></pre><p>I am getting the resulting error: </p>
<pre><code class="hljs">[WARN] :   SharedPreferencesImpl: writeToFile: Got exception:
[WARN] :   SharedPreferencesImpl: java<span class="hljs-class">.io</span><span class="hljs-class">.IOException</span>: java<span class="hljs-class">.nio</span><span class="hljs-class">.charset</span><span class="hljs-class">.CoderResult</span>[Malformed-<span class="hljs-tag">input</span> error with erroneous <span class="hljs-tag">input</span> length <span class="hljs-number">1</span>]
[WARN] :   SharedPreferencesImpl:     at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.util</span><span class="hljs-class">.FastXmlSerializer</span><span class="hljs-class">.flush</span>(FastXmlSerializer<span class="hljs-class">.java</span>:<span class="hljs-number">245</span>)
[WARN] :   SharedPreferencesImpl:     at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.util</span><span class="hljs-class">.FastXmlSerializer</span><span class="hljs-class">.append</span>(FastXmlSerializer<span class="hljs-class">.java</span>:<span class="hljs-number">92</span>)
[WARN] :   SharedPreferencesImpl:     at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.util</span><span class="hljs-class">.FastXmlSerializer</span><span class="hljs-class">.escapeAndAppendString</span>(FastXmlSerializer<span class="hljs-class">.java</span>:<span class="hljs-number">141</span>)
[WARN] :   SharedPreferencesImpl:     at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.util</span><span class="hljs-class">.FastXmlSerializer</span><span class="hljs-class">.text</span>(FastXmlSerializer<span class="hljs-class">.java</span>:<span class="hljs-number">391</span>)
[WARN] :   SharedPreferencesImpl:     at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.util</span><span class="hljs-class">.XmlUtils</span><span class="hljs-class">.writeValueXml</span>(XmlUtils<span class="hljs-class">.java</span>:<span class="hljs-number">421</span>)
[WARN] :   SharedPreferencesImpl:     at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.util</span><span class="hljs-class">.XmlUtils</span><span class="hljs-class">.writeMapXml</span>(XmlUtils<span class="hljs-class">.java</span>:<span class="hljs-number">241</span>)
[WARN] :   SharedPreferencesImpl:     at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.util</span><span class="hljs-class">.XmlUtils</span><span class="hljs-class">.writeMapXml</span>(XmlUtils<span class="hljs-class">.java</span>:<span class="hljs-number">181</span>)
[WARN] :   SharedPreferencesImpl:     at android<span class="hljs-class">.app</span><span class="hljs-class">.SharedPreferencesImpl</span><span class="hljs-class">.writeToFile</span>(SharedPreferencesImpl<span class="hljs-class">.java</span>:<span class="hljs-number">596</span>)
[WARN] :   SharedPreferencesImpl:     at android<span class="hljs-class">.app</span><span class="hljs-class">.SharedPreferencesImpl</span><span class="hljs-class">.access</span>$<span class="hljs-number">800</span>(SharedPreferencesImpl<span class="hljs-class">.java</span>:<span class="hljs-number">52</span>)
[WARN] :   SharedPreferencesImpl:     at android<span class="hljs-class">.app</span><span class="hljs-class">.SharedPreferencesImpl</span>$<span class="hljs-number">2</span>.<span class="hljs-function"><span class="hljs-title">run</span><span class="hljs-params">(SharedPreferencesImpl.java:<span class="hljs-number">511</span>)</span></span>
[WARN] :   SharedPreferencesImpl:     at android<span class="hljs-class">.app</span><span class="hljs-class">.SharedPreferencesImpl</span><span class="hljs-class">.enqueueDiskWrite</span>(SharedPreferencesImpl<span class="hljs-class">.java</span>:<span class="hljs-number">532</span>)
[WARN] :   SharedPreferencesImpl:     at android<span class="hljs-class">.app</span><span class="hljs-class">.SharedPreferencesImpl</span><span class="hljs-class">.access</span>$<span class="hljs-number">100</span>(SharedPreferencesImpl<span class="hljs-class">.java</span>:<span class="hljs-number">52</span>)
[WARN] :   SharedPreferencesImpl:     at android<span class="hljs-class">.app</span><span class="hljs-class">.SharedPreferencesImpl</span><span class="hljs-variable">$EditorImpl</span>.<span class="hljs-function"><span class="hljs-title">commit</span><span class="hljs-params">(SharedPreferencesImpl.java:<span class="hljs-number">454</span>)</span></span>
[WARN] :   SharedPreferencesImpl:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.TiProperties</span><span class="hljs-class">.setBool</span>(TiProperties<span class="hljs-class">.java</span>:<span class="hljs-number">284</span>)
[WARN] :   SharedPreferencesImpl:     at ti<span class="hljs-class">.modules</span><span class="hljs-class">.titanium</span><span class="hljs-class">.app</span><span class="hljs-class">.properties</span><span class="hljs-class">.PropertiesModule</span><span class="hljs-class">.setBool</span>(PropertiesModule<span class="hljs-class">.java</span>:<span class="hljs-number">85</span>)
[WARN] :   SharedPreferencesImpl:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.kroll</span><span class="hljs-class">.runtime</span><span class="hljs-class">.v8</span><span class="hljs-class">.V8Object</span><span class="hljs-class">.nativeFireEvent</span>(Native Method)
[WARN] :   SharedPreferencesImpl:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.kroll</span><span class="hljs-class">.runtime</span><span class="hljs-class">.v8</span><span class="hljs-class">.V8Object</span><span class="hljs-class">.fireEvent</span>(V8Object<span class="hljs-class">.java</span>:<span class="hljs-number">64</span>)
[WARN] :   SharedPreferencesImpl:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.kroll</span><span class="hljs-class">.KrollProxy</span><span class="hljs-class">.doFireEvent</span>(KrollProxy<span class="hljs-class">.java</span>:<span class="hljs-number">884</span>)
[WARN] :   SharedPreferencesImpl:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.kroll</span><span class="hljs-class">.KrollProxy</span><span class="hljs-class">.handleMessage</span>(KrollProxy<span class="hljs-class">.java</span>:<span class="hljs-number">1107</span>)
[WARN] :   SharedPreferencesImpl:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.proxy</span><span class="hljs-class">.TiViewProxy</span><span class="hljs-class">.handleMessage</span>(TiViewProxy<span class="hljs-class">.java</span>:<span class="hljs-number">327</span>)
[WARN] :   SharedPreferencesImpl:     at android<span class="hljs-class">.os</span><span class="hljs-class">.Handler</span><span class="hljs-class">.dispatchMessage</span>(Handler<span class="hljs-class">.java</span>:<span class="hljs-number">98</span>)
[WARN] :   SharedPreferencesImpl:     at android<span class="hljs-class">.os</span><span class="hljs-class">.Looper</span><span class="hljs-class">.loop</span>(Looper<span class="hljs-class">.java</span>:<span class="hljs-number">136</span>)
[WARN] :   SharedPreferencesImpl:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.kroll</span><span class="hljs-class">.KrollRuntime</span><span class="hljs-variable">$KrollRuntimeThread</span>.<span class="hljs-function"><span class="hljs-title">run</span><span class="hljs-params">(KrollRuntime.java:<span class="hljs-number">112</span>)</span></span>
</code></pre><p>If i close the app and re enter there isn&#39;t saved properties. Maybe i am doing something wrong? Any help. Thanks</p>
<p>Application type: mobile<br>Titanium SDK: 3.2.1<br>Platform &amp; version: Android 4.0<br>Device: Amazon Kindle Fire, alcatel OT, Genymotion emulator<br>Host Operating System: Windows</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 10th 2014, 3:34:00 pm">March 10th 2014</span>
				by <span class='authorname'>carlos jimenez</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>properties</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-276270">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<pre><code class="hljs"><span class="hljs-keyword">var</span> opened = Ti.App.Properties.getBool(<span class="hljs-string">'appLaunch'</span>);
<span class="hljs-keyword">if</span>(!opened){
    Ti.App.Properties.setBool(<span class="hljs-string">"appLogin"</span>, <span class="hljs-literal">false</span>);
    Ti.App.Properties.setBool(<span class="hljs-string">"appLaunch"</span>, <span class="hljs-literal">true</span>);
}
</code></pre><p>Ok, tested your code snippet, no crash:<br><em>(sdk 3.2.1, genymotion 4.2.2, device 4.0.4)</em></p>
<p>app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> opened = Ti.App.Properties.getBool(<span class="hljs-string">'appLaunch'</span>);
<span class="hljs-keyword">if</span>(!opened){
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'We have no appLaunch'</span>);
    Ti.App.Properties.setBool(<span class="hljs-string">"appLogin"</span>, <span class="hljs-literal">false</span>);
    Ti.App.Properties.setBool(<span class="hljs-string">"appLaunch"</span>, <span class="hljs-literal">true</span>);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'We have appLaunch'</span>);
}

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'appLogin: '</span>, Ti.App.Properties.getBool(<span class="hljs-string">"appLogin"</span>, <span class="hljs-literal">false</span>));
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'appLaunch'</span>, Ti.App.Properties.getBool(<span class="hljs-string">"appLaunch"</span>, <span class="hljs-literal">true</span>));
</code></pre><p>Output: </p>
<pre><code class="hljs"><span class="hljs-string">[INFO]</span>  We have no appLaunch
<span class="hljs-string">[INFO]</span>  appLogin:  false
<span class="hljs-string">[INFO]</span>  appLaunch true
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 10th 2014, 9:35:09 pm">March 10th 2014</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/163364/saving-properties-delete-after-close-app.html#answer-276270" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>NOW, that being said, this:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> opened = Ti.App.Properties.getBool(<span class="hljs-string">'appLaunch'</span>);
</code></pre><p>is anti-pattern.  You are looking for a truthy&#x2F;falsy value</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">if</span><span class="hljs-params">(!opened)</span></span>
</code></pre><p>yet if &#39;appLaunch&#39; has not been set, you are actually getting</p>
<pre><code class="hljs"><span class="hljs-string">[INFO]</span>  null
</code></pre><p>The use of <code>hasProperty</code> might be judicious.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 10th 2014, 9:41:17 pm">March 10th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>AND, properties persisted across app force close&#x2F;restart</p>
<pre><code class="hljs"><span class="hljs-string">[INFO]</span>  true
<span class="hljs-string">[INFO]</span>  We have appLaunch
<span class="hljs-string">[INFO]</span>  appLogin:  false
<span class="hljs-string">[INFO]</span>  appLaunch true
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 10th 2014, 9:43:05 pm">March 10th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-276266">
				
						<section>
							<p>try another name properties, android is very jealous with the names of variables, do not forget then when no longer use the variables, either by closing the app or logout always deletes the properties, not to leave hanging memory, remember to use prefixes to delete all your properties without any problem.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanProperties</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> props = Ti.App.Properties.listProperties();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; props.length; i++) {
        <span class="hljs-keyword">var</span> property = props[i];
        <span class="hljs-keyword">var</span> value = Ti.App.Properties.getString(property);
        <span class="hljs-keyword">if</span> (property.substring(<span class="hljs-number">0</span>, <span class="hljs-number">9</span>) == <span class="hljs-string">'myappcfg_'</span> || property.substring(<span class="hljs-number">0</span>, <span class="hljs-number">9</span>) == <span class="hljs-string">'myappvar_'</span>) {
            Ti.App.Properties.setString(property, <span class="hljs-literal">null</span>); <span class="hljs-comment">// or another propertie types</span>
        }
    }

}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 10th 2014, 9:01:59 pm">March 10th 2014</span>
								by <span class='authorname'>Francisco Alejandro Cruz</span><br>
								<a class="icon-bg icon-link" href="question/163364/saving-properties-delete-after-close-app.html#answer-276266" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>-1 because that in no way address&#39; the man&#39;s problem of his properties not persisting.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 10th 2014, 9:25:11 pm">March 10th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>infact doesn&#39;t this defeat the object of properties by being persistant ?.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 10th 2014, 9:50:03 pm">March 10th 2014</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-3</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
