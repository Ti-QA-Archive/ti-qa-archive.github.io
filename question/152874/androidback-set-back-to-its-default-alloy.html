<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android:back set back to its default (Alloy) Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android:back set back to its default (Alloy)</h1>
		</header>
		<section>
			<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">openColorPicker</span>(<span class="hljs-params"></span>)</span>{
     $.index.addEventListener(<span class="hljs-string">"android:back"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
         closeColorPicker();
     })
}
</code></pre><p>I use above code to prevent main window from closing but will close color picker view instead. How to put back the android:back event where it will close apps by default? Below code still does not work.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closeColorPicker</span>(<span class="hljs-params"></span>)</span>{
    $.index.addEventListener(<span class="hljs-string">"android:back"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $.index.exitOnClose = <span class="hljs-literal">true</span>;
    })
}
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 27th 2013, 7:18:11 am">May 27th 2013</span>
				by <span class='authorname'>archileus tee</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>android:back</span></li>
					
						<li><span class='tagname'>eventlistener</span></li>
					
						<li><span class='tagname'>main window</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-263424">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hello,</p>
<p>if you don&#39;t want to modify the androidback event, remove the event listener. Read more about this <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.Proxy-method-removeEventListener">here</a>. </p>
<p>Just be careful. If you do:</p>
<pre><code class="hljs">win.addEventListener(<span class="hljs-string">'androidback'</span>,callbackfunctionname);
</code></pre><p>you need  to do:</p>
<pre><code class="hljs">win.removeEventListener(<span class="hljs-string">'androidback'</span>,callbackfunctionname);
</code></pre><p>and the android back button will recover the usual behavior. </p>
<p>Best,</p>
<p>Mauro</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 28th 2013, 12:00:38 am">May 28th 2013</span>
								by <span class='authorname'>Mauro Parra</span><br>
								<a class="icon-bg icon-link" href="../../question/152874/androidback-set-back-to-its-default-alloy.html#answer-263424" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks, it works.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2013, 2:02:41 am">May 28th 2013</span>
											by <span class='authorname'>archileus tee</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just a follow up question if you dont mind, how to check if a eventlistener with that callbackfunction has already exist? User can accidentally click open colorpicker twice, that means it registered the eventlistener twice. When using androidback button once, it closes colorpicker view nicely, but click androidback button again will not longer close the apps. So the default close app failed again.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2013, 8:40:08 am">May 28th 2013</span>
											by <span class='authorname'>archileus tee</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-263378">
				
						<section>
							<p>Hi</p>
<p>I am not sure exactly what you are trying to achieve, so some more details would be very helpful.</p>
<p>You say you are trying to prevent the main window from closing in your first code example - but your second code example appears to try to set the main window to exit if the back button is pressed.</p>
<p>A couple of important things to note;</p>
<ul>
<li>You CANNOT set <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.Window-property-exitOnClose">exitOnClose</a> after the window has been created, it is a creation-only property.  This mean you MUST include it in the original window definition or it does nothing.</li>
<li>The android back button works with windows that are <strong>heavyweight</strong>, so you must trigger the heavyweight state of the window id you want the back button to close the picker before then next button closes the app.</li>
</ul>
<p>Extract from the documentation;</p>
<p><em>The createWindow call creates a heavyweight window if any of the following properties are true on creation:</em></p>
<ul>
<li><em>fullscreen</em></li>
<li><em>navBarHidden</em></li>
<li><em>modal</em></li>
<li><em>windowSoftInputMode</em></li>
</ul>
<p><em>A heavyweight window is always created when you open a new window from inside a TabGroup.</em></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 27th 2013, 7:50:54 am">May 27th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/152874/androidback-set-back-to-its-default-alloy.html#answer-263378" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>The colorpicker is a view, when its &quot;open&quot;, I want  the android:back event close that view first, not the whole app. Once the view is closed, the &quot;android:back&quot; event should now behave as usual (close the app)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 27th 2013, 8:01:23 am">May 27th 2013</span>
											by <span class='authorname'>archileus tee</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Quick note; <strong>android:back</strong> has been renamed to <strong>androidback</strong> (no colon).</p>
<p>By attaching an event to the <strong>androidback</strong> event you turn off the default use of the back button and you will need to manage it yourself.</p>
<p>So you determine if the picker view is displayed - it it is then you manually hide&#x2F;remove it.  If the picker is not displayed then you close the window yourself.</p>
<p>More information can be found in the <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.Window-event-androidback">androidback</a> documentation.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 27th 2013, 8:08:51 am">May 27th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
