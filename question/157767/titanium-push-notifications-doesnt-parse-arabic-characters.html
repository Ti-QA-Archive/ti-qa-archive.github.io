<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium Push Notifications doesn&#39;t parse Arabic characters » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium Push Notifications doesn&#39;t parse Arabic characters</h1>
		</header>
		<section>
			<p>I&#39;ve implemented Push notifications for 3 of my apps and they were all working just fine until about 2 days ago. For some of the apps, I send through the console and I usually send Arabic characters with the notifications, and they parse just fine and appear just fine in the notifications tray (Android and iOS)</p>
<p>As of 2 days ago, the Arabic characters (even if I send bare Arabic words from the console) no longer appear properly, they are all appearing in the form of endless question marks (unrecognized). No code was changed, nothing whatsoever and we&#39;ve done our thorough testing to make sure and pin down the issue.</p>
<p>Can someone please look into this? My team and I would really appreciate it and thank you for all your efforts so far.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 27th 2013, 1:34:11 pm">September 27th 2013</span>
				by <span class='authorname'>Oday Maleh</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>arabic</span></li>
					
						<li><span class='tagname'>notification</span></li>
					
						<li><span class='tagname'>push</span></li>
					
						<li><span class='tagname'>utf-8</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hello,</p>
<p>please send me a mail to mpmiranda@appcelerator.com so we can talk with the Cloud team (I assume you are using ACS to do the push). </p>
<p>Best,</p>
<p>Mauro</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 27th 2013, 3:37:29 pm">September 27th 2013</span>
								by <span class='authorname'>Mauro Parra</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-269297">
				
						<section>
							<p>hi Oday, could you give me some your example of push messages which include Arabic characters?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 28th 2013, 5:14:07 am">September 28th 2013</span>
								by <span class='authorname'>Zhang XueFeng</span><br>
								<a class="icon-bg icon-link" href="question/157767/titanium-push-notifications-doesnt-parse-arabic-characters#answer-269297" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269303">
				
						<section>
							<p>We&#39;re using Latest (marked as * ) for the Cloud module and 2.2.0  (because that&#39;s the only version that I was able to work with for push notifications, otherwise I just cannot receive notifications at all..)</p>
<p>####A sample of what we send when we&#39;re at the Advanced tab inside the Push Console:</p>
<pre><code class="hljs">{"<span class="hljs-attribute">badge</span>":<span class="hljs-value"><span class="hljs-number">1</span></span>,"<span class="hljs-attribute">alert</span>":<span class="hljs-value"><span class="hljs-string">"News from Almada"</span></span>,"<span class="hljs-attribute">title</span>":<span class="hljs-value"><span class="hljs-string">"Almada.org:????? ?????? ?? ??? ?? ???????? ???? ???"</span></span>,"<span class="hljs-attribute">articleID</span>":<span class="hljs-value"><span class="hljs-string">"32834"</span></span>,"<span class="hljs-attribute">icon</span>":<span class="hljs-value"><span class="hljs-string">"appicon"</span></span>}
</code></pre><h4 id="another-example-of-what-we-send-through-an-automated-script-">Another example of what we send through an automated script:</h4>
<p>The script gets the alert text and converts it to the following:</p>
<pre><code class="hljs"><span class="hljs-special">{</span>"badge":1,"title":"News from Almada","alert":"Almada.org: <span class="hljs-command">\u</span>062d<span class="hljs-command">\u</span>0645<span class="hljs-command">\u</span>0627<span class="hljs-command">\u</span>0633 <span class="hljs-command">\u</span>062a<span class="hljs-command">\u</span>0633<span class="hljs-command">\u</span>062a<span class="hljs-command">\u</span>0639<span class="hljs-command">\u</span>064a<span class="hljs-command">\u</span>062f <span class="hljs-command">\u</span>0646<span class="hljs-command">\u</span>0634<span class="hljs-command">\u</span>0627<span class="hljs-command">\u</span>0637<span class="hljs-command">\u</span>0647<span class="hljs-command">\u</span>0627 <span class="hljs-command">\u</span>0641<span class="hljs-command">\u</span>064a <span class="hljs-command">\u</span>0645<span class="hljs-command">\u</span>062e<span class="hljs-command">\u</span>064a<span class="hljs-command">\u</span>0645<span class="hljs-command">\u</span>0627<span class="hljs-command">\u</span>062a <span class="hljs-command">\u</span>0644<span class="hljs-command">\u</span>0628<span class="hljs-command">\u</span>0646<span class="hljs-command">\u</span>0627<span class="hljs-command">\u</span>0646<span class="hljs-command">\u</span>061f","articleID":"32824","icon":"appicon","vibrate":"true","sound":"default"<span class="hljs-special">}</span>
</code></pre><p>The reason why these Arabic characters are turning up as question marks is because somewhere at Appcelerator, they are being converted to ISO5989-1 (or Latin1), not sure of the specific number of ISO standard but we&#39;ve tried to convert them manually with that format set as desired output, and they all turned up as question marks.</p>
<p>Thank you for your help so far..hope this can resolved quickly as I&#39;m sure others will face this pretty soon.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 28th 2013, 6:27:32 am">September 28th 2013</span>
								by <span class='authorname'>Oday Maleh</span><br>
								<a class="icon-bg icon-link" href="question/157767/titanium-push-notifications-doesnt-parse-arabic-characters#answer-269303" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;m sorry, that probably should have been a comment under the question Zhang XueFeng asked above..</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 28th 2013, 6:28:36 am">September 28th 2013</span>
											by <span class='authorname'>Oday Maleh</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269312">
				
						<section>
							<p>&quot;Another example of what we send through an automated script:</p>
<p>The script gets the alert text and converts it to the following:<br>{&quot;badge&quot;:1,&quot;title&quot;:&quot;News from Almada&quot;,&quot;alert&quot;:&quot;Almada.org: \u062d\u0645\u0627\u0633 \u062a\u0633\u062a\u0639\u064a\u062f \u0646\u0634\u0627\u0637\u0647\u0627 \u0641\u064a \u0645\u062e\u064a\u0645\u0627\u062a \u0644\u0628\u0646\u0627\u0646\u061f&quot;,&quot;articleID&quot;:&quot;32824&quot;,&quot;icon&quot;:&quot;appicon&quot;,&quot;vibrate&quot;:&quot;true&quot;,&quot;sound&quot;:&quot;default&quot;}&quot;</p>
<p>could you give me your automated script?</p>
<p>i use the following java code to test your original arabic string, it works fine:</p>
<pre><code class="hljs">    <span class="hljs-keyword">String</span> arab_text = <span class="hljs-string">"Almada.org:????? ?????? ?? ??? ?? ???????? ???? ???"</span>;
    <span class="hljs-keyword">String</span> escape_arab_text = StringEscapeUtils.escapeJava(arab_text);
    System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"arab_text =&gt; "</span> + arab_text);
    System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"escape_arab_text =&gt; "</span> + escape_arab_text);

    <span class="hljs-keyword">String</span> unescape_arab_text = StringEscapeUtils.unescapeJava(escape_arab_text);
    System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"unescape_arab_text =&gt; "</span> + unescape_arab_text);    
</code></pre><p>here is the output:</p>
<p>$ java -cp .:.&#x2F;commons-lang-2.5.jar genBase64<br>arab_text =&gt; Almada.org:????? ?????? ?? ??? ?? ???????? ???? ???<br>escape_arab_text =&gt; Almada.org:\u00FF\u00DF\u0178\u00D1\u00FF\u00A8\u0178\u00E4\u00FF\u00A5 \u00FF\u00DF\u0178\u00D1\u00FF\u2265\u0178\u00E0\u00FF\u00B1\u0178\u00E4 \u0178\u00E4\u0178\u00DC \u00FF\u00A5\u00FF\u00B1\u0178\u00C7 \u00FF\u00A3\u0178\u00D6 \u00FF\u00DF\u0178\u00D1\u00FF\u00D8\u00FF\u00AE\u00FF\u00DF\u00FF\u00AE\u0178\u00E4\u00FF\u00B1 \u00FF\u00AE\u00FF\u00B1\u0178\u00E4\u0178\u00C5 \u00FF\u2260\u0178\u00D6\u00FF\u00B5<br>unescape_arab_text =&gt; Almada.org:????? ?????? ?? ??? ?? ???????? ???? ??</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 28th 2013, 2:24:42 pm">September 28th 2013</span>
								by <span class='authorname'>Zhang XueFeng</span><br>
								<a class="icon-bg icon-link" href="question/157767/titanium-push-notifications-doesnt-parse-arabic-characters#answer-269312" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269525">
				
						<section>
							<p>We are having a hard time reproducing the issue you are seeing. Can you please provide some info such as what OS you are on and how you input the arabic characters?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 2nd 2013, 8:10:03 pm">October 2nd 2013</span>
								by <span class='authorname'>Wei Kong</span><br>
								<a class="icon-bg icon-link" href="question/157767/titanium-push-notifications-doesnt-parse-arabic-characters#answer-269525" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>It has not shown up since the day after this ticket was posted, Wei.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2013, 8:19:44 pm">October 2nd 2013</span>
											by <span class='authorname'>Oday Maleh</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The issue has started showing up again, exactly the same issue, as of yesterday (Saturday) morning. Whatever was changed at this time (I&#39;m completely guessing here) concerning Cloudpush must be the cause of this issue.</p>
<p>For the same Arabic messages that were being sent prior to Saturday and were showing up correctly, now they have started showing up as question marks again. Please advise, and thank you for all your efforts so far! :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 13th 2013, 7:38:15 am">October 13th 2013</span>
											by <span class='authorname'>Oday Maleh</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Concerning your question, Wei…I usually send the Arabic characters through the ACS console, I write them in plain Arabic (as is, no unicode or anything). I&#39;m on a Mac (Mountain Lion).</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 14th 2013, 10:53:57 am">October 14th 2013</span>
											by <span class='authorname'>Oday Maleh</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>To reproduce, do an example using the normal guidelines on the cloudPush help page and enable the notifications in the app then send this message from the titanium My Apps&#x2F;&lt;app name&gt;&#x2F;Push Notification</p>
<p>{&quot;badge&quot;:1,&quot;title&quot;:&quot;News from test&quot;,&quot;alert&quot;:&quot;\u0631\u0641\u0639\u062a \u0639\u064a\u062f: \u0645\u0627 \u064a\u062c\u0631\u064a \u0627\u0644\u064a\u0648\u0645\u060c \u0627\u0646 \u0647\u0646\u0627\u0643 \u0645\u0639\u0631\u0643\u0629 \u062c\u062f\u064a\u062f\u0629 \u0641\u064a \u0633\u0648\u0631\u064a\u0627 \u0647\u064a \u0645\u0639\u0631\u0643\u0629 \u0627\u0644\u0642\u0644\u0645\u0648\u0646 \u0628\u0627\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629 \u0648\u0647\u064a \u062a\u0631\u0633\u0644 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u0649 \u062d\u0632\u0628 \u0627\u0644\u0644\u0647&quot;,&quot;articleID&quot;:&quot;36074&quot;,&quot;icon&quot;:&quot;appicon&quot;,&quot;vibrate&quot;:&quot;true&quot;,&quot;sound&quot;:&quot;default&quot;}</p>
<p>or this message<br>{&quot;badge&quot;:&quot;158&quot;,&quot;alert&quot;:&quot;News from test&quot;,&quot;title&quot;:&quot;????? ?????? ?????? ????? ????? ??????? ????? ?????? ?????????&quot;,&quot;articleID&quot;:&quot;28075&quot;,&quot;icon&quot;:&quot;appicon&quot;,&quot;vibrate&quot;:true,&quot;sound&quot;:&quot;default&quot;}</p>
<p>The notification are received on Android but the message shows as &quot;???…&quot; instead of the clear correct character and on iOS it is never received.</p>
<p>Note: this happened two weeks ago then solved by itself the next day but happened again. We need to know what is the reason of this. Less likely to be something related to the way we send. Could it be a regression from ACS platform?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 14th 2013, 11:52:52 am">October 14th 2013</span>
											by <span class='authorname'>Oday Maleh</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Note that the ??? in the json messages are arabic characters but when we post the review it changes to the wrong encoding</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 14th 2013, 1:37:29 pm">October 14th 2013</span>
											by <span class='authorname'>Oday Maleh</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-270015">
				
						<section>
							<p>Are you using Andriod? we can&#39;t seem to reproduce it on ios but on Andriod</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 15th 2013, 3:13:00 pm">October 15th 2013</span>
								by <span class='authorname'>Wei Kong</span><br>
								<a class="icon-bg icon-link" href="question/157767/titanium-push-notifications-doesnt-parse-arabic-characters#answer-270015" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>It has stopped showing as of yesterday morning. When it was happening, Android used to show a question mark for each character sent. On iOS it used to show only 1 question mark. We use both.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 15th 2013, 8:47:20 pm">October 15th 2013</span>
											by <span class='authorname'>Oday Maleh</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>are you sending it from admin console? are you on windows? what kind of browser?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 16th 2013, 4:29:10 pm">October 16th 2013</span>
											by <span class='authorname'>Wei Kong</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Wei, we used the admin console and directly issuing the request via curl from php scripts. As what OS&#x2F;Browser we are using, we used Windows 7 and OS X with Firefox and Chrome. </p>
<p>Note that browser&#x2F;OS is not the issue. we used to send the notification with non latin-1 characters and it worked fine but there are few times (reported above in that thread) where it stop working with non latin-1 characters. We tried that same scenario via using characters belonging to French (aka accentuated chars) and it failed the same way.</p>
<p>We believe that the handling of encoding of the UTF-8 chars in the notification was messed up during the period when the above two incidents were reported. </p>
<p>Note: in reply to your question about &quot;you able to reproduce only on Android&quot;: Yes. it happens on Android. As on iOS when this issue starts to happen the notification fails to be delivered to the iOS</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 16th 2013, 6:25:59 pm">October 16th 2013</span>
											by <span class='authorname'>Oday Maleh</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks can you please confirm that you are seeing this issue when you try to send notification from all OSes, browsers or pHP?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 16th 2013, 11:10:43 pm">October 16th 2013</span>
											by <span class='authorname'>Wei Kong</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This issue is happening gain. it happens if we send from any browser. there is nothing changed from our side. it happens suddenly then get solved by itself.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2013, 9:57:11 am">November 9th 2013</span>
											by <span class='authorname'>Oday Maleh</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
