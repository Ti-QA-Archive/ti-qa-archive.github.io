<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android - add option for toolbar » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android - add option for toolbar</h1>
		</header>
		<section>
			<p>Hi, I have a menu used in all views, and I would like also add option to the Action Bar. Here&#39;s my code.</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (OS_ANDROID) {
  <span class="hljs-keyword">var</span> actionBar;

  $.win.addEventListener(<span class="hljs-string">"open"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    actionBar = $.win.activity.actionBar;
    <span class="hljs-keyword">if</span> (actionBar) {
      actionBar.title = <span class="hljs-string">""</span>;
      actionBar.onHomeIconItemSelected = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        goIndex();
      }
    }
  });

  $.win.activity.onCreateOptionsMenu = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> menu = e.menu;

    <span class="hljs-keyword">var</span> menuItem1 = menu.add({
      title : <span class="hljs-string">"Back"</span>,
      itemId: <span class="hljs-number">123</span>,
      showAsAction: Ti.Android.SHOW_AS_ACTION_ALWAYS
    });
    menuItem1.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
      doSomething();
    });
  }

  $.win.activity.onPrepareOptionsMenu = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> menu = e.menu;
    menu.findItem(<span class="hljs-number">123</span>).setVisible(<span class="hljs-literal">true</span>);
  };

}
</code></pre><p>Problem is that item is added, but I&#39;m loosing bottom menu. That one triggered with phone bottom left button.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 27th 2014, 11:31:50 am">May 27th 2014</span>
				by <span class='authorname'>Artur Sz</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>actionbar</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>menu</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-279149">
				
						<section>
							<p>Hi</p>
<p>Using a menu inside the action bar means that previous hardware (now software) button accessed menu no longer functions.</p>
<p>There is only one menu object, so if you use it with the actionbar that is now the only place in this app for that window tabgroup that it can be used.  You cannot have both.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 28th 2014, 4:32:01 am">May 28th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/174587/android---add-option-for-toolbar.html#answer-279149" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>As I said you cannot use both, either the menu items are added as a traditional android menu OR added into the actionbar - this is automatic and out of your control.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2014, 5:20:22 am">May 28th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>so how is it possible that for example Facebook app on Android. If you go to some friends&#39; profile. At the top there is an Action Bar with user name, seach button and button with some options like poke etc… and menu from device menu button still works.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2014, 5:27:06 am">May 28th 2014</span>
											by <span class='authorname'>Artur Sz</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Having never used the facebook app - I would need a screenshot to see what looks like specifically when displayed in order to answer that.  If you have one or can point me to a link I would be grateful. However it could be;</p>
<ul>
<li>They fake one or the other menu</li>
<li>They have access to more than we do</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2014, 6:43:09 am">May 28th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Makes sense. Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2014, 6:45:37 am">May 28th 2014</span>
											by <span class='authorname'>Artur Sz</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>here is an example for a fanpage, with Action Bar with some actions and menu opened.<br>https:&#x2F;&#x2F;www.evernote.com&#x2F;shard&#x2F;s174&#x2F;sh&#x2F;5c47d0cf-e095-48c8-9cf4-e721638aa8c5&#x2F;4f527f8182fe514b59a862adb0428e0a</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2014, 6:52:09 am">May 28th 2014</span>
											by <span class='authorname'>Artur Sz</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Cheers.</p>
<p>The bottom menu is faked, that is not a standard menu panel.  I am not sure how they detect the difference as the menu button (either software or hardware) should display the action bar menu if there is one.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2014, 6:57:36 am">May 28th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-279156">
				
						<section>
							<p>thank you, is there some other option to add some buttons to the Action Bar and keep menu ?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 28th 2014, 5:03:15 am">May 28th 2014</span>
								by <span class='authorname'>Artur Sz</span><br>
								<a class="icon-bg icon-link" href="question/174587/android---add-option-for-toolbar.html#answer-279156" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Quick tip; you created an answer when you should have added a comment to the answer provided.  Only create an answer of your own if it is really an answer.  You are not being told off.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 28th 2014, 5:22:29 am">May 28th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
