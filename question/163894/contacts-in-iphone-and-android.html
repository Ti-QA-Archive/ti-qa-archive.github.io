<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Contacts in iPhone and android » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Contacts in iPhone and android</h1>
		</header>
		<section>
			<p>Hi Everyone,</p>
<pre><code class="hljs">            I am fetching contacts using `Ti.contact ` api . In android <span class="hljs-keyword">it</span> <span class="hljs-keyword">is</span> working very well , <span class="hljs-keyword">but</span> <span class="hljs-keyword">in</span> iPhone <span class="hljs-keyword">it</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> fetching contact. I am posting <span class="hljs-keyword">my</span> code , please <span class="hljs-keyword">tell</span> <span class="hljs-keyword">me</span> <span class="hljs-keyword">if</span> there any mistake <span class="hljs-keyword">or</span> i've forgot something.
</code></pre><p> and please tell me what should i try to do this?</p>
<pre><code class="hljs">function reloadContacts(param) {

    <span class="hljs-keyword">if</span> (param == <span class="hljs-string">''</span>) {
        var contacts = Ti.Contacts.getAllPeople();
        renderContacts(contacts);


    } <span class="hljs-keyword">else</span> {
        var contacts = Ti.Contacts.getPeopleWithName(param);
        renderContacts(contacts);

    }
}

var data = [];
var contactName;
var row;
function renderContacts(contacts) {
    data = [];

    <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; contacts.length; i++) {
        alert(contacts[i]);
        var title = contacts[i].fullName;
        <span class="hljs-keyword">if</span> (!title || title.length === <span class="hljs-number">0</span>) {
            title = <span class="hljs-string">"(no name)"</span>;
        }
        row = Ti.UI.createTableViewRow({
            <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'White'</span>,
            <span class="hljs-string">left :</span> <span class="hljs-number">0</span>,
            <span class="hljs-string">height :</span> <span class="hljs-string">'45dp'</span>,
            <span class="hljs-string">selectedColor :</span> <span class="hljs-string">'white'</span>,
            <span class="hljs-string">title :</span> title
        });
        var contactImage = Ti.UI.createImageView({

            <span class="hljs-string">left :</span> <span class="hljs-string">'10dp'</span>,
            <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'white'</span>,
            <span class="hljs-string">id :</span> <span class="hljs-string">'contactName'</span>,
            <span class="hljs-string">height :</span> <span class="hljs-string">'30dp'</span>,
            <span class="hljs-string">width :</span> <span class="hljs-string">'30dp'</span>,
        });
        <span class="hljs-keyword">if</span> (contacts[i].image != <span class="hljs-literal">null</span>) {

            var avatar = contacts[i].image;
            avatar = avatar.imageWithRoundedCorner(<span class="hljs-number">15</span>);
            contactImage.image = avatar;

        } <span class="hljs-keyword">else</span> {
            contactImage.image = <span class="hljs-string">'images/about_icon.png'</span>;
        }
        contactName = Ti.UI.createLabel({
            <span class="hljs-string">text :</span> title,
            <span class="hljs-string">color :</span> <span class="hljs-string">'#42B4E6'</span>,
            <span class="hljs-string">left :</span> <span class="hljs-string">'50dp'</span>,
            <span class="hljs-string">id :</span> <span class="hljs-string">'contactName'</span>,
            <span class="hljs-string">width :</span> <span class="hljs-string">'68%'</span>,
            <span class="hljs-string">ellipsize :</span> <span class="hljs-literal">true</span>,
            <span class="hljs-string">wordWrap :</span> <span class="hljs-literal">false</span>

        });
        });

        row.add(contactImage);
        row.add(contactName);
        data.push(row);
    }
    contact.table.data = data;

}
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 25th 2014, 4:25:05 am">March 25th 2014</span>
				by <span class='authorname'>Gagan Tiwari</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>contact</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-276944">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hello  Gagan ,</p>
<p>For IOS, to safely access the address book given iOS new security model which is missing in your code. You need to accept this security authentication by adding security authentication code. Please check my code and test it. I hope it’s solving your problem. </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> contact = Ti.UI.createWindow({
    backgroundColor : <span class="hljs-string">'white'</span>
});

<span class="hljs-keyword">var</span> table = Ti.UI.createTableView();

contact.add(table);

<span class="hljs-keyword">var</span> addressBookDisallowed = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
};
<span class="hljs-keyword">if</span> (Ti.Contacts.contactsAuthorization == Ti.Contacts.AUTHORIZATION_AUTHORIZED) {
    renderContacts();
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Ti.Contacts.contactsAuthorization == Ti.Contacts.AUTHORIZATION_UNKNOWN) {
    Ti.Contacts.requestAuthorization(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">if</span> (e.success) {
            renderContacts();
        } <span class="hljs-keyword">else</span> {
            addressBookDisallowed();
        }
    });
} <span class="hljs-keyword">else</span> {
    addressBookDisallowed();
}

<span class="hljs-keyword">var</span> data = [];

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderContacts</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> contacts = Ti.Contacts.getAllPeople();
    data = [];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; contacts.length; i++) {
        <span class="hljs-comment">//alert(contacts[i]);</span>
        <span class="hljs-keyword">var</span> title = contacts[i].fullName;
        <span class="hljs-keyword">if</span> (!title || title.length === <span class="hljs-number">0</span>) {
            title = <span class="hljs-string">"(no name)"</span>;
        }
        <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({
            backgroundColor : <span class="hljs-string">'White'</span>,
            left : <span class="hljs-number">0</span>,
            height : <span class="hljs-string">'45dp'</span>,
            selectedColor : <span class="hljs-string">'white'</span>,
            title : title
        });
        <span class="hljs-keyword">var</span> contactImage = Ti.UI.createImageView({

            left : <span class="hljs-string">'10dp'</span>,
            backgroundColor : <span class="hljs-string">'white'</span>,
            id : <span class="hljs-string">'contactName'</span>,
            height : <span class="hljs-string">'30dp'</span>,
            width : <span class="hljs-string">'30dp'</span>,
        });
        <span class="hljs-keyword">if</span> (contacts[i].image != <span class="hljs-literal">null</span>) {

            <span class="hljs-keyword">var</span> avatar = contacts[i].image;
            avatar = avatar.imageWithRoundedCorner(<span class="hljs-number">15</span>);
            contactImage.image = avatar;

        } <span class="hljs-keyword">else</span> {
            contactImage.image = <span class="hljs-string">'images/about_icon.png'</span>;
        }
        <span class="hljs-keyword">var</span> contactName = Ti.UI.createLabel({
            text : title,
            color : <span class="hljs-string">'#42B4E6'</span>,
            left : <span class="hljs-string">'50dp'</span>,
            id : <span class="hljs-string">'contactName'</span>,
            width : <span class="hljs-string">'68%'</span>,
            ellipsize : <span class="hljs-literal">true</span>,
            wordWrap : <span class="hljs-literal">false</span>

        });

        row.add(contactImage);
        row.add(contactName);
        data.push(row);
    }

    table.setData(data);
    <span class="hljs-comment">// = data;</span>
}

contact.open();
</code></pre><p>For more information please visit <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.Contacts">Titanium.Contacts</a></p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 25th 2014, 5:03:36 am">March 25th 2014</span>
								by <span class='authorname'>Md. Mostafizur Rahman</span><br>
								<a class="icon-bg icon-link" href="question/163894/contacts-in-iphone-and-android#answer-276944" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>if it is not authorizing on iOS cause i am using iOs 7.0 , then what is the procedure ? can you provide me some code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 25th 2014, 5:28:38 am">March 25th 2014</span>
											by <span class='authorname'>Gagan Tiwari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hello Gogon, my above code is tested on IOS 7. Please check it on iOS 7 device. It will works.  Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 25th 2014, 6:20:52 am">March 25th 2014</span>
											by <span class='authorname'>Md. Mostafizur Rahman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>its GAGAN….:|</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 25th 2014, 6:34:57 am">March 25th 2014</span>
											by <span class='authorname'>Gagan Tiwari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks Mostafizur…….i forgot to use method requestAuthorization in my code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 25th 2014, 8:17:21 am">March 25th 2014</span>
											by <span class='authorname'>Gagan Tiwari</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
