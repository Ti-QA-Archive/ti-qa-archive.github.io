<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>email dialog Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>email dialog</h1>
		</header>
		<section>
			<p>Hi all. I have a few text fields and an email dialog. I basically want the text fields to be the subject and messageBody of an email. So when a user clicks the send button, an email dialog is opened and everything is filled out. At the minute, anything which is a variable is not coming out in the email dialog. The code will illustrate what I mean</p>
<pre><code class="hljs">var messageTxt = Titanium.UI.createTextArea({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#336699'</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">120</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">250</span>,
    top:<span class="hljs-string">"50%"</span>,
    hintText:<span class="hljs-string">'Your song request'</span>,
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'left'</span>
    });


var nameTxt = Titanium.UI.createTextField({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#336699'</span>,
    top:<span class="hljs-string">'30%'</span>,
    align: <span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">250</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">60</span>,
    hintText:<span class="hljs-string">'Name'</span>
});
var emailDialog = Titanium.UI.createEmailDialog();
        <span class="hljs-keyword">if</span> (!emailDialog.isSupported()) {
            Ti.UI.createAlertDialog({
                title:<span class="hljs-string">'Error'</span>,
                message:<span class="hljs-string">'Email not available'</span>
            }).show();
        <span class="hljs-keyword">return</span>;
        }

        emailDialog.setSubject(<span class="hljs-string">"Song requested by &lt;b&gt;"</span>+nameTxt.getValue()+<span class="hljs-string">"&lt;/b&gt;"</span>);
        emailDialog.setToRecipients([<span class="hljs-string">'roseannecarroll123@hotmail.com'</span>]);

        emailDialog.setHtml(<span class="hljs-keyword">true</span>);
        emailDialog.setMessageBody(messageTxt.value)
</code></pre><p>I tried both value and getValue but they are not working. Also.. note in the subject field, I am getting the string &quot;Song requested by&quot;. Also note that in the send btn event listener, I also have an alert of nameTxt.value and nameTxt.getValue() and both are returning the right variables there so it is not that they are undefined. Also, if I add in a value property, from the start then that value is entered in the email dialog. So it seems they aren&#39;t being updated? Any way to fix this?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 12th 2013, 8:09:57 am">September 12th 2013</span>
				by <span class='authorname'>user 4683</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>email dialog</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>please provide more code.<br>it seems you are directly open it .</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 12th 2013, 10:43:08 am">September 12th 2013</span>
								by <span class='authorname'>Jayesh  Joshi</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>@Jayesh Joshi I open the emaildialog on an event listener for a button click</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 12th 2013, 11:38:37 am">September 12th 2013</span>
								by <span class='authorname'>user 4683</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-268463">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>var win = Titanium.UI.createWindow();</p>
<p>var sendButton = Titanium.UI.createButton({</p>
<pre><code class="hljs"><span class="hljs-string">title :</span> <span class="hljs-string">'Send'</span>,
<span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
<span class="hljs-string">top :</span> <span class="hljs-number">230</span>,
<span class="hljs-string">height :</span> <span class="hljs-number">30</span>,
<span class="hljs-string">width :</span> <span class="hljs-number">60</span>
</code></pre><p>});</p>
<p>var messageTxt = Titanium.UI.createTextArea({</p>
<pre><code class="hljs"><span class="hljs-string">color :</span> <span class="hljs-string">'#336699'</span>,
<span class="hljs-string">height :</span> <span class="hljs-number">120</span>,
<span class="hljs-string">top :</span> <span class="hljs-number">10</span>,
<span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
<span class="hljs-string">width :</span> <span class="hljs-number">250</span>,
<span class="hljs-string">hintText :</span> <span class="hljs-string">'Your song request'</span>,
<span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>,
<span class="hljs-string">borderColor :</span> <span class="hljs-string">'red'</span>
</code></pre><p>});</p>
<p>var nameTxt = Titanium.UI.createTextField({</p>
<pre><code class="hljs"><span class="hljs-string">color :</span> <span class="hljs-string">'#336699'</span>,
<span class="hljs-string">top :</span> <span class="hljs-number">150</span>,
<span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
<span class="hljs-string">width :</span> <span class="hljs-number">250</span>,
<span class="hljs-string">height :</span> <span class="hljs-number">60</span>,
<span class="hljs-string">hintText :</span> <span class="hljs-string">'Name'</span>,
<span class="hljs-string">borderColor :</span> <span class="hljs-string">'green'</span>
</code></pre><p>});</p>
<p>sendButton.addEventListener(&#39;click&#39;, function(e) {</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (Titanium.Network.online) {

    <span class="hljs-keyword">var</span> emailDialog = Titanium.UI.createEmailDialog({
        barColor : (Titanium.Platform.osname != <span class="hljs-string">"android"</span>) ? <span class="hljs-string">"black"</span> : <span class="hljs-string">""</span>
    });
    <span class="hljs-keyword">if</span> (!emailDialog.isSupported()) {

        <span class="hljs-keyword">var</span> dbp = Ti.UI.createAlertDialog({
            title : <span class="hljs-string">"email"</span>,
            message : <span class="hljs-string">"Please configure your email account."</span>,
            buttonNames : [<span class="hljs-string">'OK'</span>]
        });
        dbp.show();
        <span class="hljs-keyword">return</span>;
    }

    emailDialog.setSubject(<span class="hljs-string">"Song requested by "</span> + nameTxt.<span class="hljs-keyword">value</span>);
    emailDialog.toRecipients = [<span class="hljs-string">'jnj.idr@gmail.com'</span>];
    emailDialog.setHtml(<span class="hljs-keyword">true</span>);
    emailDialog.setMessageBody(messageTxt.<span class="hljs-keyword">value</span>);
    emailDialog.open();
}
</code></pre><p>});</p>
<p>win.add(sendButton);</p>
<p>win.add(messageTxt);</p>
<p>win.add(nameTxt);</p>
<p>win.open();</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 12th 2013, 11:31:38 am">September 12th 2013</span>
								by <span class='authorname'>Jayesh  Joshi</span><br>
								<a class="icon-bg icon-link" href="question/157101/email-dialog.html#answer-268463" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Jayesh Joshi Thanks. It seems I needed to create the email dialog within the send event listener!</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 12th 2013, 12:02:16 pm">September 12th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>how can you provide values of message and name text if you directly open emailDialog?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2013, 2:07:48 am">September 13th 2013</span>
											by <span class='authorname'>Jayesh  Joshi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Jayesh Joshi Maybe I&#39;m not fully understanding you but as I already said &#39;I only open the emaildialog on an event listener for a button click&#39;. The problem was I needed to create the email dialog and assign values inside that same event listener</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2013, 6:14:36 am">September 13th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>if you wright emaildialog open out side button click eventListener than it open emaildialog with your window open .. directly.. first you have to set values for textfields and than on send button click you should open email dialogâ¦.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2013, 6:29:35 am">September 13th 2013</span>
											by <span class='authorname'>Jayesh  Joshi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That is what I did. You don&#39;t seem to get what I was trying to say. CODE HERE: </p>
<pre><code class="hljs">sendBtn.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span></span>{
emailDialog.open();
}
</code></pre><p>It&#39;s fixed now anyway since I accepted your answer</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2013, 6:47:43 am">September 13th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>NO.. This is not good..The entire thing i wrote in addEventListener in answer that way is correct.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2013, 7:02:23 am">September 13th 2013</span>
											by <span class='authorname'>Jayesh  Joshi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Yes I realised that and said thanks yesterday and accepted the answer. I am only showing you what I did because you have said multiple times that I directly opened the emailDialog</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2013, 7:06:07 am">September 13th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Generally it&#39;s Good to check Titanium.Network.online and emailDialog.isSupported() before we open it</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2013, 7:16:19 am">September 13th 2013</span>
											by <span class='authorname'>Jayesh  Joshi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Jayesh Joshi OK good to know</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2013, 7:19:05 am">September 13th 2013</span>
											by <span class='authorname'>user 4683</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
