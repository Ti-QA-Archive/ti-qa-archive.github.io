<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android titanium com.activate.gcm Module Issues » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android titanium com.activate.gcm Module Issues</h1>
		</header>
		<section>
			<p>Hello Everyone,</p>
<p>Its urgent to help me that i am using the module of com.activate.gcm module for the purpose os push Notification..<br>So i am using to this following steps:—-&gt;<br>1).I am generating a sender Id, API Key with the help of my email id.and save a api key to the server.<br>with the help of http:&#x2F;&#x2F;developer.android.com&#x2F;google&#x2F;gcm&#x2F;gs.html#create-proj.</p>
<p>2).these sender id i have to used in tiapp.xml..</p>
<p> &lt;property name=&quot;com.activate.gcm.sender_id&quot; type=&quot;string&quot;&gt;759989341661 &lt;&#x2F;property&gt;<br>    &lt;!– put your sender_id here –&gt;<br>    &lt;!–&lt;property name=&quot;com.activate.gcm.icon&quot; type=&quot;int&quot;&gt;2130837504&lt;&#x2F;property&gt;     get this from R.java, but converted to decimal, 0x7f020000 give you 2130837504 (type &quot;0x7f020000 to decimal&quot; in google) –&gt;<br>    &lt;property name=&quot;com.activate.gcm.component&quot; type=&quot;string&quot;&gt;gcm.gcm&#x2F;gcm.gcm.GcmActivity&lt;&#x2F;property&gt;</p>
<p>3).Then in my application when the open the window of chat screen then i used this code with 5 functions<br>:——————-&gt;<br>registerC2dm<br>success<br>error<br>callback<br>unregister<br>unregister</p>
<p>registerC2dm<br>success<br>error—————&gt;these three functions are working well,———–&gt; but if i gave only the single alert under callback, then it never work, i dont know what the exact problem exist here .</p>
<p>I want only the implement functionaltity that when the two users are goiing to be chat with each othere then when the first user do a chat then the messages shown on the left . and when the messages came from the friends the it shows on the right .</p>
<p>i am using this following code for cloud messaging. please check it an dprovide me a solution that why the callback function is not executing.</p>
<p>var gcm = require(&#39;com.activate.gcm&#39;);<br>            &#x2F;&#x2F; alert(gcm);<br>             var pendingData = gcm.data;<br>                if (pendingData &amp;&amp; pendingData !== null) {<br>                    Ti.API.info(&#39;<strong><em>*</em></strong> data (started) &#39; + JSON.stringify(pendingData));<br>                }<br>                    Ti.API.info(&#39;module gcm is =&gt; &#39; + gcm);<br>                   Ti.API.info(&#39;Registering…&#39;);<br>                 &#x2F;&#x2F;  alert(&#39;Registering…&#39;);<br>              gcm.registerC2dm({<br>                         success:function(e)<br>                     {<br>                          &#x2F;&#x2F;alert(&#39;1&#39;);<br>                        Ti.API.info(&#39;JS registration success event: &#39; + e.registrationId);<br>                           alert(&#39;JS registration success event: &#39; + e.registrationId);<br>                        Ti.API.info(&#39;Sender ID:&#39; + gcm.getSenderId());<br>                          alert(&#39;Sender ID:&#39; + gcm.getSenderId());<br>                        &#x2F;&#x2F; &#x2F;&#x2F; &#x2F;&#x2F;saveAndroidDeviceToken(e.registrationId);<br>                      },<br>                         error:function(e)<br>                    {<br>                        Ti.API.error(&quot;Error during registration : &quot; + e.error);<br>                        &#x2F;&#x2F;alert(&quot;Error during registration : &quot; + e.error);<br>                        var message;<br>                        if(e.error == &quot;ACCOUNT_MISSING&quot;)<br>                        {<br>                            message = &quot;No Google account found; you will need to add on in order to activate notifications&quot;;<br>                        }<br>                        Titanium.UI.createAlertDialog({<br>                                title:&#39;Push Notification Setup&#39;,<br>                                message:message,<br>                                buttonNames:[&#39;OK&#39;]<br>                            }).show();<br>                    },<br>        &#x2F;&#x2F; &#x2F;&#x2F;&#x2F;————when the app is foreground————-&#x2F;&#x2F;&#x2F;&#x2F;<br>              callback:function(e)<br>              {<br>                alert(&#39;working&#39;);<br>                &#x2F;&#x2F; alert(e.data);<br>               Ti.API.info(&quot;push notification received&quot;+JSON.stringify(e.data));<br>               alert(&quot;push notification received&quot;+JSON.stringify(e.data));<br>               Titanium.Media.vibrate();<br>                var user_message =e.data.message;<br>                &#x2F;&#x2F; var deviceid=e.data.from;<br>                &#x2F;&#x2F; var wholedata=user_message+&#39; &#39;+deviceid;<br>                &#x2F;&#x2F; var msgArr =user_message.split(&quot;::::&quot;);<br>&#x2F;&#x2F;<br>             &#x2F;&#x2F; &#x2F;&#x2F;&#x2F;——————updated by supriya in chat 3rd august 113————&#x2F;&#x2F;&#x2F;&#x2F;<br>                 var intent = Ti.Android.createIntent({<br>                        action : Ti.Android.ACTION_MAIN,<br>                        flags : Ti.Android.FLAG_ACTIVITY_NEW_TASK | Ti.Android.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED,<br>                        className : &#39;com.apphomeSNS.LINKME.LinkmeActivity&#39;,<br>                        packageName : &#39;com.apphomeSNS.LINKME&#39;<br>                    });<br>                   &#x2F;&#x2F; alert(intent);<br>                    intent.addCategory(Ti.Android.CATEGORY_LAUNCHER);<br>                      &#x2F;&#x2F; This is fairly static: Not much need to be altered here<br>                    var pending = Ti.Android.createPendingIntent({<br>                        activity : Ti.Android.currentActivity,<br>                        intent : intent,<br>                        type : Ti.Android.PENDING_INTENT_FOR_ACTIVITY,<br>                    });</p>
<pre><code class="hljs">                <span class="hljs-keyword">var</span> notification = Ti.Android.createNotification({
                    contentIntent : pending,
                    contentTitle : <span class="hljs-string">'New message'</span>,
                    contentText : e.data.message,
                    tickerText : <span class="hljs-string">"New message"</span>
                });
               <span class="hljs-comment">// /// alert(notification.contentText);</span>
                  Ti.Android.NotificationManager.notify(<span class="hljs-number">1</span>, notification);

                <span class="hljs-keyword">var</span> toast = Ti.UI.createNotification({
                     message:e.data,
                     duration: Ti.UI.NOTIFICATION_DURATION_LONG
                 });
                 toast.show();
                <span class="hljs-keyword">if</span>(msgArr[<span class="hljs-number">1</span>] == <span class="hljs-string">"friend_request"</span>){

                }
                <span class="hljs-keyword">else</span>{
                         <span class="hljs-keyword">var</span> thisRow = Ti.UI.createTableViewRow();
                         thisRow.selectedColor =<span class="hljs-string">'transparent'</span>;
                          <span class="hljs-keyword">var</span> user_pic =Titanium.App.Properties.getString(<span class="hljs-string">'friend_image'</span>);
                           <span class="hljs-keyword">if</span>(user_pic !=<span class="hljs-literal">null</span> &amp;&amp; user_pic !=<span class="hljs-literal">undefined</span> &amp;&amp; user_pic !=<span class="hljs-string">''</span>){

                             <span class="hljs-keyword">var</span> pic_src = Ti.Utils.base64decode(user_pic);
                           }
                           <span class="hljs-keyword">else</span>{

                             <span class="hljs-keyword">var</span> pic_src = <span class="hljs-string">'images/user_profile.png'</span>;
                           }


                           <span class="hljs-keyword">var</span> invitefriend_image = Titanium.UI.createImageView({
                                    image:pic_src,
                                 top:<span class="hljs-number">20</span>,
                                 width:<span class="hljs-string">'16%'</span>,
                                 height:<span class="hljs-number">50</span>,
                                 borderColor:<span class="hljs-string">'#fff'</span>,
                                 borderRadius:<span class="hljs-number">5</span>,
                                 borderWidth:<span class="hljs-number">1</span>,
                                 right:<span class="hljs-string">'0%'</span>,
                                 zIndex:<span class="hljs-number">100</span>
                          });
                          <span class="hljs-keyword">var</span> invitefriend_dynamicview = Titanium.UI.createView({
                                 top:<span class="hljs-number">30</span>,
                                 backgroundColor:<span class="hljs-string">'#ead8b4'</span>,
                                 width:<span class="hljs-number">230</span>,
                                 height:<span class="hljs-number">75</span>,
                                 borderColor:<span class="hljs-string">'#ead8b4'</span>,
                                 borderRadius:<span class="hljs-number">5</span>,
                                 borderWidth:<span class="hljs-number">2</span>,
                                 right:<span class="hljs-string">'20%'</span>
                          });
                          <span class="hljs-keyword">var</span> invitefriend_user_name = Ti.UI.createLabel({
                                    color: <span class="hljs-string">'#000'</span>,
                                    font: { 
                                     fontSize:<span class="hljs-number">16</span>,
                                     fontWeight: <span class="hljs-string">'bold'</span>,
                                     fontFamily:<span class="hljs-string">'ThisApp.FONTBOLD'</span>,
                                     },
                                    text: <span class="hljs-string">'hello'</span>,
                                    right:<span class="hljs-string">'2%'</span>,
                                    top:<span class="hljs-number">2</span>,
                                    width: <span class="hljs-string">'auto'</span>, 
                                    height: <span class="hljs-number">30</span>,
                                    backgroundImage:<span class="hljs-string">'none'</span>
                             });
                             thisRow.add(invitefriend_image);
                             invitefriend_dynamicview.add(invitefriend_user_name);
                             invitefriend_dynamicview.height=invitefriend_user_name.height+<span class="hljs-number">10</span>;
                             thisRow.add(invitefriend_dynamicview);
                             searchData.push(thisRow);
                             tableview.setData(searchData);
                     }
                   },

            unregister: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">ev</span>) </span>{
                <span class="hljs-comment">//alert('unregister');</span>
                <span class="hljs-comment">// on unregister </span>
                Ti.API.info(<span class="hljs-string">'******* unregister, '</span> + ev.deviceToken);
            },
            data: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
                <span class="hljs-comment">// if we're here is because user has clicked on the notification</span>
                <span class="hljs-comment">// and we set extras in the intent </span>
                <span class="hljs-comment">// and the app WAS RUNNING (=&gt; RESUMED)</span>
                <span class="hljs-comment">// (again don't worry, we'll see more of this later)</span>
                Ti.API.info(<span class="hljs-string">'******* data (resumed) '</span> + <span class="hljs-built_in">JSON</span>.stringify(data));
                <span class="hljs-comment">//alert('******* data (resumed) ' + JSON.stringify(data));</span>
            }
     });
});
</code></pre><p>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;————-the right view for when the messages came from friends….</p>
<p>thanks,<br>supriya</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 5th 2014, 10:21:31 am">March 5th 2014</span>
				by <span class='authorname'>supriya pandey</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>fg</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-2</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
