<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Ti.Storekit 1.5 verification of receipt is not consistant » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Ti.Storekit 1.5 verification of receipt is not consistant</h1>
		</header>
		<section>
			<p>I have my storekit set up and it works about 50% -75% of the time.  When I am trying to verify the receipt of a auto-renew subscription that is active, it will usually work, but if the subscription expires then it will only work about 50% of the time.  It will try to verify the receipt and half the time it will come back as not valid, but the other half of the time it will just sit there with the activity indicator showing it is transferring data on the web, and then it will crash.  Does anyone else have any suggestions or best practices of how to verify receipts?</p>
<p>Using 1.8.2 with xcode 4.2.1 and iOS simulator 5.</p>
<p>example of verification:</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> obj = {receipt:db.getReceipt(),
       <span class="hljs-keyword">callback</span>:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span></span>{

Ti.API.log(evt);

          <span class="hljs-keyword">if</span>(!evt.success){
        lblInfo.setText(<span class="hljs-string">"cannot be verified at this time."</span>);

          }

          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(evt.valid){                                     
        lblInfo.setText(<span class="hljs-string">"active."</span>);


          }
          <span class="hljs-keyword">else</span>{
           lblInfo.setText(<span class="hljs-string">"not active."</span>);

          }
       },
       sandbox:<span class="hljs-literal">true</span>,
       sharedSecret:secret};

Storekit.verifyReceipt(obj);
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 12th 2012, 12:26:51 pm">April 12th 2012</span>
				by <span class='authorname'>Digs Jones</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>in app purchase</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>receipt</span></li>
					
						<li><span class='tagname'>storekit</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
