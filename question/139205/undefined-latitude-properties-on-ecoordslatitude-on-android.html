<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>undefined latitude properties on e.coords.latitude on android » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>undefined latitude properties on e.coords.latitude on android</h1>
		</header>
		<section>
			<p>var judul = Titanium.UI.createLabel({<br>    color:&#39;#fff&#39;,<br>    text:&quot;Track Mall&quot;,<br>    font:{fontSize:40,fontFamily:&#39;Helvetica Neue&#39;},<br>    top:210,<br>});</p>
<p>var btn_start = Titanium.UI.createButton({<br>   title:&quot;Tracking&quot;,<br>   width: 150<br>});</p>
<p>var btn_shmap = Titanium.UI.createButton({<br>   title:&quot;Map&quot;,<br>   top: 520,<br>   width: 150<br>});</p>
<p>win.add(judul);<br>win.add(btn_start);<br>win.add(btn_shmap);</p>
<p>btn_shmap.addEventListener(&#39;click&#39;, function(){<br>    var mapview = Titanium.Map.createView({ &#x2F;&#x2F;fungsi menampilkan map<br>    mapType: Titanium.Map.STANDARD_TYPE,<br>    animate:true,<br>    region: {latitude:latit, longitude:longit, latitudeDelta:0.1, longitudeDelta:0.1},    &#x2F;&#x2F;region yang ditampilkan awal2 di map<br>    regionFit:true,<br>    userLocation:true,<br>    visible: true<br>});</p>
<pre><code class="hljs"><span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Plaza_Surabaya</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Galaxy_Mall</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Tunjungan_Plaza</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Grand_City</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Golden_City_Mall</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Supermall_Pakuwon_Indah</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Surabaya_Town_Square</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Hi_Tech_Mall</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">City_of_Tomorrow</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Royal_Plaza</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">BG_Junction</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Darmo_Trade_Center</span>);
    <span class="hljs-tag">mapview</span><span class="hljs-class">.addAnnotation</span>(<span class="hljs-tag">Pasar_Atom_Mall</span>);
    <span class="hljs-tag">win</span><span class="hljs-class">.add</span>(<span class="hljs-tag">mapview</span>);
    <span class="hljs-tag">win</span><span class="hljs-class">.open</span>(); 
</code></pre><p>});<br>btn_start.addEventListener(&#39;click&#39;, function(){<br>    &#x2F;&#x2F;——-<br>    function getLocation(){</p>
<p>&#x2F;&#x2F;Get the current position and set it to the mapview<br>var aaa = Titanium.Geolocation.getCurrentPosition(function(e){<br>    &#x2F;&#x2F;console.log(e);   &#x2F;&#x2F;buat debug isi e object di web<br>    Ti.API.info(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; : &quot; + JSON.stringify(aaa));</p>
<pre><code class="hljs">latit = e.coords.latitude;
longit = e.coords.longitude;
alti = e.coords.altitude;
altiacc = e.coords.altitudeAccuracy;
head = e.coords.heading;
spit = e.coords.speed;



var latitude2 = [-<span class="hljs-number">7.263415</span>, -<span class="hljs-number">7.276016</span>, -<span class="hljs-number">7.264889</span>, -<span class="hljs-number">7.344966</span>, -<span class="hljs-number">7.261805</span>, -<span class="hljs-number">7.289388</span>, -<span class="hljs-number">7.242427</span>, -<span class="hljs-number">7.299301</span>, -<span class="hljs-number">7.246003</span>, -<span class="hljs-number">7.288574</span>, -<span class="hljs-number">7.305942</span>
, -<span class="hljs-number">7.250261</span>, -<span class="hljs-number">7.293427</span>];  
var longitude2 = [<span class="hljs-number">112.739993</span>, <span class="hljs-number">112.782016</span>, <span class="hljs-number">112.748466</span>, <span class="hljs-number">112.728824</span>, <span class="hljs-number">112.750802</span>, <span class="hljs-number">112.675963</span>, <span class="hljs-number">112.744568</span>, <span class="hljs-number">112.738581</span>, <span class="hljs-number">112.735119</span>, <span class="hljs-number">112.706308</span>
, <span class="hljs-number">112.734804</span>, <span class="hljs-number">112.749581</span>, <span class="hljs-number">112.730362</span>];

var name_mall2 = [<span class="hljs-string">"Tunjungan Plasa"</span>, <span class="hljs-string">"Galaxy Mall"</span>, <span class="hljs-string">"Plasa Surabaya"</span>, <span class="hljs-string">"City of Tommorow"</span>, <span class="hljs-string">"Grand City"</span>, <span class="hljs-string">"Supermal Pakuwon Indah"</span>
, <span class="hljs-string">"Pasar Atom Mall"</span>, <span class="hljs-string">"Darmo Trade Center"</span>, <span class="hljs-string">"BG Junction"</span>, <span class="hljs-string">"Golden City Mall"</span>, <span class="hljs-string">"Royal Plasa"</span>, <span class="hljs-string">"Hitech Mall"</span>, <span class="hljs-string">"SUTOS"</span>];
<span class="hljs-comment">// var latitude2 = -7.263415;</span>
<span class="hljs-comment">// var longitude2 = 112.739993;</span>
</code></pre><p>&#x2F;&#x2F;     </p>
<pre><code class="hljs">    var lokasimu={
        latitude: -<span class="hljs-number">7.287243</span>,
        longitude: <span class="hljs-number">112.739048</span>,
        animate:<span class="hljs-literal">true</span>,
        latitudeDelta:<span class="hljs-number">0.001</span>,
        longitudeDelta:<span class="hljs-number">0.001</span>
    };


    <span class="hljs-comment">/*

  points = [    //buat kasi router
 {latitude:e.coords.latitude,longitude:e.coords.longitude},
 {latitude:-7.263415,longitude:112.739993},
]

     var routee = {
     name:"rute ke tp",
     points:points,
     color:"#00f",
     width:2
    }; */</span> 
</code></pre><p>(function() {<br>  &#x2F;&#x2F; default 4 sig figs reflects typical 0.3% accuracy of spherical model<br>  if (typeof precision == &#39;undefined&#39;) precision = 4;<br>   Number.prototype.toRad = function() {<br>  &#x2F;&#x2F;this dsini mengarah ke var latlon latlon2<br>         return this * Math.PI &#x2F; 180;</p>
<pre><code class="hljs">  }<span class="hljs-comment">//fungsi radius</span>
</code></pre><p>  var R = 6371;<br>  var jarak = new Array();</p>
<p>  var lat1 = latit.toRad(), lon1 = longit.toRad();<br>  for(var i=0; i&lt;13; i++)<br>  {<br>    var lat2 = latitude2[i].toRad(), lon2 = longitude2[i].toRad(), na_mal = name_mall2[i];<br>&#x2F;&#x2F;     alert(lat1 + &quot; : &quot; + lon1 + &quot;\n&quot; + lat2 + &quot; : &quot; + lon2); &#x2F;&#x2F;buat ngecek hasil for aja<br>  var dLat = lat2 - lat1;<br>  var dLon = lon2 - lon1;<br>  var a = Math.sin(dLat&#x2F;2) <em> Math.sin(dLat&#x2F;2) +<br>          Math.cos(lat1) </em> Math.cos(lat2) <em><br>          Math.sin(dLon&#x2F;2) </em> Math.sin(dLon&#x2F;2);<br>  var c = 2 <em> Math.atan2(Math.sqrt(a), Math.sqrt(1-a));<br>  var d = R </em> c;<br>  var pembulatan = Math.round(d<em>10)&#x2F;10;<br>  jarak[i] = pembulatan;<br>    &#x2F;</em>alert(&quot;aku_latitude: &quot;+ latitude +&quot;\n&quot;+<br>            &quot;aku_longitude:&quot;+ longitude +&quot;\n&quot;+<br>            &quot;TP_lat : &quot; + latitude2 + &quot;\n&quot;+<br>            &quot;TP_lon :&quot; + longitude2 + &quot;\n&quot;+<br>            &quot;dLAT : &quot; + dLat + &quot;\n&quot;+<br>            &quot;dLON : &quot; + dLon + &quot;\n&quot;+<br>            &quot;a : &quot; + a + &quot;\n&quot;+<br>            &quot;c : &quot; + c + &quot;\n&quot;+</p>
<pre><code class="hljs">        <span class="hljs-string">"jarak ke "</span> + n<span class="hljs-built_in">a_mal</span> +  <span class="hljs-string">" (km):"</span> + pembulatan + <span class="hljs-string">"\n"</span>
  )<span class="hljs-comment">;*/</span>
</code></pre><p>  }</p>
<p> &#x2F;&#x2F; for(var k=0; k&lt;13; k++){<br>            &#x2F;&#x2F; document.write(&quot;jarak &quot;+ name_mall2[k] + &quot; : &quot; +jarak[k] + &quot;\n&quot;);<br>    &#x2F;&#x2F; }<br>    alert(<br>        &quot;Anda berada di posisi : &quot; + latit + &quot; ; &quot; + longit + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[0] + &quot; : &quot; +jarak[0] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[1] + &quot; : &quot; +jarak[1] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[2] + &quot; : &quot; +jarak[2] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[3] + &quot; : &quot; +jarak[3] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[4] + &quot; : &quot; +jarak[4] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[5] + &quot; : &quot; +jarak[5] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[6] + &quot; : &quot; +jarak[6] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[7] + &quot; : &quot; +jarak[7] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[8] + &quot; : &quot; +jarak[8] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[9] + &quot; : &quot; +jarak[9] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[10] + &quot; : &quot; +jarak[10] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[11] + &quot; : &quot; +jarak[0] + &quot;\n&quot; +<br>        &quot;jarak &quot;+ name_mall2[12] + &quot; : &quot; +jarak[0] + &quot;\n&quot;<br>    );</p>
<pre><code class="hljs"><span class="hljs-keyword">return</span>;
</code></pre><p>})();   &#x2F;&#x2F;fungsi perhitungan jarak               </p>
<pre><code class="hljs"> /<span class="hljs-regexp">/   mapview.addRoute(routee);/</span><span class="hljs-regexp">/menampilkan rute cat :hanya untuk di web mobile 
  /</span><span class="hljs-regexp">/  mapview.setLocation(lokasimu);/</span><span class="hljs-regexp">/untuk menset map langsung di zoom didaerah mu saat itu juga
   /</span><span class="hljs-regexp">/ alert("latitude : " + e.coords.latitude + "longitude : " + e.coords.longitude);</span>
</code></pre><p>});<br>}</p>
<pre><code class="hljs">      <span class="hljs-keyword">var</span> locationCallback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
</code></pre><p>};</p>
<p>setInterval(function()<br>{</p>
<pre><code class="hljs">    Titanium.Geolocation.removeEventListener('location',locationCallback)<span class="hljs-comment">;</span>
    Titanium.Geolocation.addEventListener('location',locationCallback)<span class="hljs-comment">;</span>
getLocation()<span class="hljs-comment">;</span>
</code></pre><p>},5000);</p>
<pre><code class="hljs"><span class="hljs-comment">//-------</span>
</code></pre><p>});&#x2F;&#x2F;click listener<br>win.open();&#x2F;&#x2F; window open buat button</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 4th 2012, 7:11:52 am">July 4th 2012</span>
				by <span class='authorname'>evan hutomo eka putranto</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>e.coords.latitude</span></li>
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>undefined</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I run on web browser, and it work. but I tried on android device, it doesn&#39;t work.<br>It tells me that my latitude is undefined.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 4th 2012, 8:40:24 am">July 4th 2012</span>
								by <span class='authorname'>evan hutomo eka putranto</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Can you post again in code block so we may get help from this code?.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 4th 2012, 8:42:00 am">July 4th 2012</span>
								by <span class='authorname'>Nitin Chavda</span>
							</div>
						</li>
					
						<li class="comment">
							<div><pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.createWindow({
    title:<span class="hljs-string">"uye"</span>,
    backgroundColor:<span class="hljs-string">"#000"</span>
});


Titanium.Geolocation.purpose = <span class="hljs-string">"Recieve User Location"</span>;
Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST;
Ti.Geolocation.frequency = <span class="hljs-number">1</span>;
Ti.Geolocation.preferredProvider = Ti.Geolocation.PROVIDER_NETWORK;
 <span class="hljs-keyword">if</span>( Titanium.Geolocation.locationServicesEnabled === <span class="hljs-literal">false</span> ) {
    Ti.API.debug(<span class="hljs-string">'Your device has GPS turned off. Please turn it on.'</span>);
}
<span class="hljs-comment">// Set Distance filter. This dictates how often an event fires based on the distance the device moves. This value is in meters.</span>
Titanium.Geolocation.distanceFilter = <span class="hljs-number">5</span>;
<span class="hljs-comment">//set the mapview with the current location</span>
<span class="hljs-comment">//-----------------------------------------------------------------------------------------------------------------------------</span>
<span class="hljs-keyword">var</span> Tunjungan_Plaza = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">1</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> Galaxy_Mall = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">2</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> Plaza_Surabaya = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">3</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> City_of_Tomorrow = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">4</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});


<span class="hljs-keyword">var</span> Grand_City = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">5</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> Supermall_Pakuwon_Indah = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">6</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});


<span class="hljs-keyword">var</span> Pasar_Atom_Mall = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">7</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> Darmo_Trade_Center = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">8</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> BG_Junction = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">9</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> Golden_City_Mall = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">10</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> Royal_Plaza = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">11</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> Hi_Tech_Mall = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">12</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});

<span class="hljs-keyword">var</span> Surabaya_Town_Square = Titanium.Map.createAnnotation({
    pincolor:Titanium.Map.ANNOTATION_GREEN,
    animate:<span class="hljs-literal">true</span>,
    myid:<span class="hljs-number">13</span> <span class="hljs-comment">// CUSTOM ATTRIBUTE THAT IS PASSED INTO EVENT OBJECTS</span>
});
<span class="hljs-comment">//-----------------------------------------------------------------------------------------------------------------------------</span>
     Titanium.Geolocation.getCurrentPosition(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
        latit = e.coords.latitude;
        longit = e.coords.longitude;
     });
<span class="hljs-comment">//     </span>

<span class="hljs-keyword">var</span> judul = Titanium.UI.createLabel({
    color:<span class="hljs-string">'#fff'</span>,
    text:<span class="hljs-string">"Track Mall"</span>,
    font:{fontSize:<span class="hljs-number">40</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    top:<span class="hljs-number">210</span>,
});

<span class="hljs-keyword">var</span> btn_start = Titanium.UI.createButton({
   title:<span class="hljs-string">"Tracking"</span>,
   width: <span class="hljs-number">150</span>
});

<span class="hljs-keyword">var</span> btn_shmap = Titanium.UI.createButton({
   title:<span class="hljs-string">"Map"</span>,
   top: <span class="hljs-number">520</span>,
   width: <span class="hljs-number">150</span>
});

win.add(judul);
win.add(btn_start);
win.add(btn_shmap);


btn_shmap.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> isAndroid = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">if</span>(Titanium.Platform.name == <span class="hljs-string">'android'</span>){
    isAndroid = <span class="hljs-literal">true</span>;
}


    <span class="hljs-keyword">var</span> mapview = Titanium.Map.createView({ <span class="hljs-comment">//fungsi menampilkan map</span>
    mapType: Titanium.Map.STANDARD_TYPE,
    animate:<span class="hljs-literal">true</span>,
    region: {latitude:latit, longitude:longit, latitudeDelta:<span class="hljs-number">0.1</span>, longitudeDelta:<span class="hljs-number">0.1</span>},    <span class="hljs-comment">//region yang ditampilkan awal2 di map</span>
    regionFit:<span class="hljs-literal">true</span>,
    userLocation:<span class="hljs-literal">true</span>,
    visible: <span class="hljs-literal">true</span>
});

<span class="hljs-keyword">if</span>(!isAndroid){
    mapview.addAnnotation(Plaza_Surabaya);
        mapview.addAnnotation(Galaxy_Mall);
        mapview.addAnnotation(Tunjungan_Plaza);
        mapview.addAnnotation(Grand_City);
        mapview.addAnnotation(Golden_City_Mall);
        mapview.addAnnotation(Supermall_Pakuwon_Indah);
        mapview.addAnnotation(Surabaya_Town_Square);
        mapview.addAnnotation(Hi_Tech_Mall);
        mapview.addAnnotation(City_of_Tomorrow);
        mapview.addAnnotation(Royal_Plaza);
        mapview.addAnnotation(BG_Junction);
        mapview.addAnnotation(Darmo_Trade_Center);
        mapview.addAnnotation(Pasar_Atom_Mall);
        win.add(mapview);
        win.open();
}


});
btn_start.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">//-------</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLocation</span>(<span class="hljs-params"></span>)</span>{

<span class="hljs-comment">//Get the current position and set it to the mapview</span>
<span class="hljs-keyword">var</span> aaa = Titanium.Geolocation.getCurrentPosition(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    <span class="hljs-comment">//console.log(e);   //buat debug isi e object di web </span>
    Ti.API.info(<span class="hljs-string">"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; : "</span> + <span class="hljs-built_in">JSON</span>.stringify(aaa));

    latit = e.coords.latitude;
    longit = e.coords.longitude;


    <span class="hljs-keyword">var</span> latitude2 = [-<span class="hljs-number">7.263415</span>, -<span class="hljs-number">7.276016</span>, -<span class="hljs-number">7.264889</span>, -<span class="hljs-number">7.344966</span>, -<span class="hljs-number">7.261805</span>, -<span class="hljs-number">7.289388</span>, -<span class="hljs-number">7.242427</span>, -<span class="hljs-number">7.299301</span>, -<span class="hljs-number">7.246003</span>, -<span class="hljs-number">7.288574</span>, -<span class="hljs-number">7.305942</span>
    , -<span class="hljs-number">7.250261</span>, -<span class="hljs-number">7.293427</span>];  
    <span class="hljs-keyword">var</span> longitude2 = [<span class="hljs-number">112.739993</span>, <span class="hljs-number">112.782016</span>, <span class="hljs-number">112.748466</span>, <span class="hljs-number">112.728824</span>, <span class="hljs-number">112.750802</span>, <span class="hljs-number">112.675963</span>, <span class="hljs-number">112.744568</span>, <span class="hljs-number">112.738581</span>, <span class="hljs-number">112.735119</span>, <span class="hljs-number">112.706308</span>
    , <span class="hljs-number">112.734804</span>, <span class="hljs-number">112.749581</span>, <span class="hljs-number">112.730362</span>];

    <span class="hljs-keyword">var</span> name_mall2 = [<span class="hljs-string">"Tunjungan Plasa"</span>, <span class="hljs-string">"Galaxy Mall"</span>, <span class="hljs-string">"Plasa Surabaya"</span>, <span class="hljs-string">"City of Tommorow"</span>, <span class="hljs-string">"Grand City"</span>, <span class="hljs-string">"Supermal Pakuwon Indah"</span>
    , <span class="hljs-string">"Pasar Atom Mall"</span>, <span class="hljs-string">"Darmo Trade Center"</span>, <span class="hljs-string">"BG Junction"</span>, <span class="hljs-string">"Golden City Mall"</span>, <span class="hljs-string">"Royal Plasa"</span>, <span class="hljs-string">"Hitech Mall"</span>, <span class="hljs-string">"SUTOS"</span>];
    <span class="hljs-comment">// var latitude2 = -7.263415;</span>
    <span class="hljs-comment">// var longitude2 = 112.739993;</span>
<span class="hljs-comment">//     </span>



        <span class="hljs-keyword">var</span> lokasimu={
            latitude: -<span class="hljs-number">7.287243</span>,
            longitude: <span class="hljs-number">112.739048</span>,
            animate:<span class="hljs-literal">true</span>,
            latitudeDelta:<span class="hljs-number">0.001</span>,
            longitudeDelta:<span class="hljs-number">0.001</span>
        };


        <span class="hljs-comment">/*

      points = [    //buat kasi router
     {latitude:e.coords.latitude,longitude:e.coords.longitude},
     {latitude:-7.263415,longitude:112.739993},
    ]

         var routee = {
         name:"rute ke tp",
         points:points,
         color:"#00f",
         width:2
        }; */</span> 

(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// default 4 sig figs reflects typical 0.3% accuracy of spherical model</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> precision == <span class="hljs-string">'undefined'</span>) precision = <span class="hljs-number">4</span>;  
   <span class="hljs-built_in">Number</span>.prototype.toRad = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">//this dsini mengarah ke var latlon latlon2</span>
         <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span> * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>;

      }<span class="hljs-comment">//fungsi radius</span>


  <span class="hljs-keyword">var</span> R = <span class="hljs-number">6371</span>;
  <span class="hljs-keyword">var</span> jarak = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();

  <span class="hljs-keyword">var</span> lat1 = latit.toRad(), lon1 = longit.toRad();
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">13</span>; i++)
  { 
    <span class="hljs-keyword">var</span> lat2 = latitude2[i].toRad(), lon2 = longitude2[i].toRad(), na_mal = name_mall2[i];      
<span class="hljs-comment">//     alert(lat1 + " : " + lon1 + "\n" + lat2 + " : " + lon2); //buat ngecek hasil for aja</span>
  <span class="hljs-keyword">var</span> dLat = lat2 - lat1;
  <span class="hljs-keyword">var</span> dLon = lon2 - lon1;
  <span class="hljs-keyword">var</span> a = <span class="hljs-built_in">Math</span>.sin(dLat/<span class="hljs-number">2</span>) * <span class="hljs-built_in">Math</span>.sin(dLat/<span class="hljs-number">2</span>) +
          <span class="hljs-built_in">Math</span>.cos(lat1) * <span class="hljs-built_in">Math</span>.cos(lat2) * 
          <span class="hljs-built_in">Math</span>.sin(dLon/<span class="hljs-number">2</span>) * <span class="hljs-built_in">Math</span>.sin(dLon/<span class="hljs-number">2</span>);
  <span class="hljs-keyword">var</span> c = <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.atan2(<span class="hljs-built_in">Math</span>.sqrt(a), <span class="hljs-built_in">Math</span>.sqrt(<span class="hljs-number">1</span>-a));
  <span class="hljs-keyword">var</span> d = R * c;
  <span class="hljs-keyword">var</span> pembulatan = <span class="hljs-built_in">Math</span>.round(d*<span class="hljs-number">10</span>)/<span class="hljs-number">10</span>;
  jarak[i] = pembulatan;
    <span class="hljs-comment">/*alert("aku_latitude: "+ latitude +"\n"+
            "aku_longitude:"+ longitude +"\n"+
            "TP_lat : " + latitude2 + "\n"+
            "TP_lon :" + longitude2 + "\n"+
            "dLAT : " + dLat + "\n"+
            "dLON : " + dLon + "\n"+
            "a : " + a + "\n"+
            "c : " + c + "\n"+


            "jarak ke " + na_mal +  " (km):" + pembulatan + "\n"
      );*/</span>
  }


 <span class="hljs-comment">// for(var k=0; k&lt;13; k++){</span>
            <span class="hljs-comment">// document.write("jarak "+ name_mall2[k] + " : " +jarak[k] + "\n");</span>
    <span class="hljs-comment">// }</span>
    alert(
        <span class="hljs-string">"Anda berada di posisi : "</span> + latit + <span class="hljs-string">" ; "</span> + longit + <span class="hljs-string">"\n"</span> + 
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">0</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">0</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">1</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">1</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">2</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">2</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">3</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">3</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">4</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">4</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">5</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">5</span>] + <span class="hljs-string">"\n"</span> +        
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">6</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">6</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">7</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">7</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">8</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">8</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">9</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">9</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">10</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">10</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">11</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">0</span>] + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">"jarak "</span>+ name_mall2[<span class="hljs-number">12</span>] + <span class="hljs-string">" : "</span> +jarak[<span class="hljs-number">0</span>] + <span class="hljs-string">"\n"</span> 
    );



    <span class="hljs-keyword">return</span>;
})();   <span class="hljs-comment">//fungsi perhitungan jarak               </span>


     <span class="hljs-comment">//   mapview.addRoute(routee);//menampilkan rute cat :hanya untuk di web mobile </span>
      <span class="hljs-comment">//  mapview.setLocation(lokasimu);//untuk menset map langsung di zoom didaerah mu saat itu juga</span>
       <span class="hljs-comment">// alert("latitude : " + e.coords.latitude + "longitude : " + e.coords.longitude);</span>
});
}



          <span class="hljs-keyword">var</span> locationCallback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

};



setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
</span>{

        Titanium.Geolocation.removeEventListener(<span class="hljs-string">'location'</span>,locationCallback);
        Titanium.Geolocation.addEventListener(<span class="hljs-string">'location'</span>,locationCallback);
    getLocation();
},<span class="hljs-number">5000</span>);

    <span class="hljs-comment">//-------</span>
});<span class="hljs-comment">//click listener</span>
win.open();<span class="hljs-comment">// window open buat button</span>
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="July 4th 2012, 8:52:11 am">July 4th 2012</span>
								by <span class='authorname'>evan hutomo eka putranto</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p><a href="http:&#x2F;&#x2F;pastebin.com&#x2F;0CxUqTfm">here</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="July 4th 2012, 8:54:24 am">July 4th 2012</span>
								by <span class='authorname'>evan hutomo eka putranto</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>@Nitin Chavda : sorry, for the bad post. Im new in titanium. I apreciate if you got the bug on my code. thanks :)</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 4th 2012, 8:59:28 am">July 4th 2012</span>
								by <span class='authorname'>evan hutomo eka putranto</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-242461">
				
						<section>
							<p>Hi evan hutomo eka putranto,</p>
<p>if you work in emulator then you need to set static latitude and longitude in ddms.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 4th 2012, 8:35:14 am">July 4th 2012</span>
								by <span class='authorname'>Nitin Chavda</span><br>
								<a class="icon-bg icon-link" href="question/139205/undefined-latitude-properties-on-ecoordslatitude-on-android#answer-242461" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>hello, thanks for reply,  but I tried run on android device, its still have the same error.<br>How it can be?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 4th 2012, 8:38:36 am">July 4th 2012</span>
											by <span class='authorname'>evan hutomo eka putranto</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi,</p>
<p>For storing of latitude and longitude variable May be you have not declared i.e.<strong>latit</strong> and <strong>longit</strong>.You need do declare it on the top below your window creation code.</p>
<pre><code class="hljs">latit = e.coords.latitude<span class="hljs-comment">;</span>
longit = e.coords.longitude<span class="hljs-comment">;</span>
</code></pre><p>try to put this code and test it</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> latit</span> = <span class="hljs-string">""</span>;
<span class="hljs-variable"><span class="hljs-keyword">var</span> longit</span> = <span class="hljs-string">""</span>;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 4th 2012, 9:09:24 am">July 4th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I get an error like this on console</p>
<pre><code class="hljs">[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">GeolocationModule(  312)</span>] (KrollRuntimeThread) [511,3332] unable to get current position, location is null
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiJSError(  312)</span>] (main) [176,3508] ----- Titanium Javascript Runtime Error -----
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiJSError(  312)</span>] (main) [1,3509] - In app.js:152,25
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiJSError(  312)</span>] (main) [0,3509] - Message: Uncaught TypeError: Cannot read property 'latitude' of undefined
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiJSError(  312)</span>] (main) [0,3509] - Source:         latit = e.coords.latitude;
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">V8Exception(  312)</span>] Exception occurred at app.js:152: Uncaught TypeError: Cannot read property 'latitude' of undefined
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 4th 2012, 9:16:16 am">July 4th 2012</span>
											by <span class='authorname'>evan hutomo eka putranto</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You have to just set this after your window creation code.</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> latit</span> = <span class="hljs-string">""</span>;
<span class="hljs-variable"><span class="hljs-keyword">var</span> longit</span> = <span class="hljs-string">""</span>;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 4th 2012, 9:23:59 am">July 4th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>stile got error like this<br>Uncaught TypeError: Cannot read property &#39;latitude&#39; of undefined.<br>I think, the problem is the latitude are not the properties of e.coords. But I cant how to fix it</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 4th 2012, 1:48:53 pm">July 4th 2012</span>
											by <span class='authorname'>evan hutomo eka putranto</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No they are there.. theres some other problem which even i am encountering evan</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 17th 2012, 6:39:36 am">July 17th 2012</span>
											by <span class='authorname'>Abhishek Shah</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi  Abhishek,</p>
<p>Have you check whether below permission is available in androidMenfiest file or not.</p>
<pre><code class="hljs">&lt;uses-permission android:<span class="hljs-property">name</span>=<span class="hljs-string">"android.permission.ACCESS_WIFI_STATE"</span>/&gt;

    &lt;uses-permission android:<span class="hljs-property">name</span>=<span class="hljs-string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;

    &lt;uses-permission android:<span class="hljs-property">name</span>=<span class="hljs-string">"android.permission.ACCESS_MOCK_LOCATION"</span>/&gt;

    &lt;uses-permission android:<span class="hljs-property">name</span>=<span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;

    &lt;uses-permission android:<span class="hljs-property">name</span>=<span class="hljs-string">"android.permission.INTERNET"</span>/&gt;

    &lt;uses-permission android:<span class="hljs-property">name</span>=<span class="hljs-string">"android.permission.ACCESS_FINE_LOCATION"</span>/&gt;

        &lt;uses-permission android:<span class="hljs-property">name</span>=<span class="hljs-string">"android.permission.ACCESS_COARSE_LOCATION"</span>/&gt;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 17th 2012, 6:43:28 am">July 17th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
