<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Model-TableView binding with onClick » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Model-TableView binding with onClick</h1>
		</header>
		<section>
			<p>I&#39;m using a TableView to display a collection using the markup:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"artist"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"artist_row"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"test"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"location"</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"{location}"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"fans"</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"{fans}"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"name"</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"{name}"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">TableViewRow</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
</code></pre><p>This works fine without the onClick event on the View but as soon as the onClick is defined the execution fails. The problem is with the compilation. The above compiles to:</p>
<pre><code class="hljs">    <span class="hljs-keyword">var</span> __alloyId20 = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">var</span> models = Alloy.Collections.artist.models, len = models.length, rows = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
            <span class="hljs-keyword">var</span> __alloyId10 = models[i];
            __alloyId10.__transform = {};
            <span class="hljs-keyword">var</span> __alloyId11 = Ti.UI.createTableViewRow({
                id: <span class="hljs-string">"__alloyId9"</span>
            });
            rows.push(__alloyId11);
            <span class="hljs-keyword">var</span> __alloyId13 = Ti.UI.createView({
                id: <span class="hljs-string">"__alloyId12"</span>
            });
            __alloyId11.add(__alloyId13);
            test ? $.__views.__alloyId12.addEventListener(<span class="hljs-string">"click"</span>, test) : __defers[<span class="hljs-string">"$.__views.__alloyId12!click!test"</span>] = !<span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> __alloyId15 = Ti.UI.createLabel({
                text: <span class="hljs-keyword">typeof</span> __alloyId10.__transform.location != <span class="hljs-string">"undefined"</span> ? __alloyId10.__transform.location : __alloyId10.<span class="hljs-keyword">get</span>(<span class="hljs-string">"location"</span>),
                id: <span class="hljs-string">"__alloyId14"</span>
            });
            __alloyId13.add(__alloyId15);
            <span class="hljs-keyword">var</span> __alloyId17 = Ti.UI.createLabel({
                text: <span class="hljs-keyword">typeof</span> __alloyId10.__transform.fans != <span class="hljs-string">"undefined"</span> ? __alloyId10.__transform.fans : __alloyId10.<span class="hljs-keyword">get</span>(<span class="hljs-string">"fans"</span>),
                id: <span class="hljs-string">"__alloyId16"</span>
            });
            __alloyId13.add(__alloyId17);
            <span class="hljs-keyword">var</span> __alloyId19 = Ti.UI.createLabel({
                text: <span class="hljs-keyword">typeof</span> __alloyId10.__transform.name != <span class="hljs-string">"undefined"</span> ? __alloyId10.__transform.name : __alloyId10.<span class="hljs-keyword">get</span>(<span class="hljs-string">"name"</span>),
                id: <span class="hljs-string">"__alloyId18"</span>
            });
            __alloyId13.add(__alloyId19);
        }
        $.__views.artistslist.setData(rows);
    };
</code></pre><p>The problem is that the &#39;click&#39; event listener is added to the view identified by <strong>alloyId12 whereas the row was created as </strong>alloyId13. I&#39;m not sure why the Views Ids are set differently to the actual id:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> __alloyId13</span> = Ti.UI.createView({id: <span class="hljs-string">"__alloyId12"</span>});
</code></pre><p>Are there any workarounds for this miscompilation?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 21st 2013, 10:01:15 pm">February 21st 2013</span>
				by <span class='authorname'>Mike Diplock</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy, model</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Have you updated it to the 3.0.2?</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 21st 2013, 10:02:25 pm">February 21st 2013</span>
								by <span class='authorname'>Muhammad Wahhab Mirza</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-257311">
				
						<section>
							<p>@Mike Here is your <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;148514&#x2F;updated-to-titanium-302-error-in-alloycreatecontroller#answer-257175">solution</a> and i am assuming that you are using ti 3.0.2 right now</p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 21st 2013, 10:08:23 pm">February 21st 2013</span>
								by <span class='authorname'>Muhammad Wahhab Mirza</span><br>
								<a class="icon-bg icon-link" href="question/148642/model-tableview-binding-with-onclick#answer-257311" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-257330">
				
						<section>
							<p>Thanks Muhammad but that is not the problem here. The compiled code uses addEventListener as expected (and not &#39;on&#39;). The problem is the allocation of ids in the compilation.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 22nd 2013, 4:56:16 am">February 22nd 2013</span>
								by <span class='authorname'>Mike Diplock</span><br>
								<a class="icon-bg icon-link" href="question/148642/model-tableview-binding-with-onclick#answer-257330" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Mike, I would like to suggest you to please use the comment facility for the discussion purpose to maintain forum standard. Thanks !</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 22nd 2013, 7:00:28 am">February 22nd 2013</span>
											by <span class='authorname'>Sarafaraz Babi</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-257499">
				
						<section>
							<p>The workaround I&#39;m using for now is to put the onClick event on the TableView which does seem to compile correctly. Then use e.source.index in the click event handler to determine the table row and then use the x co-ordinate to determine the row element that was clicked.</p>
<p>It would, however, still be good to be able to declare separate event handlers in each row element.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 25th 2013, 12:22:53 pm">February 25th 2013</span>
								by <span class='authorname'>Mike Diplock</span><br>
								<a class="icon-bg icon-link" href="question/148642/model-tableview-binding-with-onclick#answer-257499" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-261200">
				
						<section>
							<p>i also has this problem . it maybe a bug.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 21st 2013, 10:59:41 am">April 21st 2013</span>
								by <span class='authorname'>freemem xiao</span><br>
								<a class="icon-bg icon-link" href="question/148642/model-tableview-binding-with-onclick#answer-261200" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
