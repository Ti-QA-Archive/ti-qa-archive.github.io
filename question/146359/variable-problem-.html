<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Variable Problem ? Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Variable Problem ?</h1>
		</header>
		<section>
			<p>Hi there,<br>  my alert doesn&#39;t work, i have missed something :( i can&#39;t find it :( what should i do?</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lat1;
<span class="hljs-keyword">var</span> lon1;

<span class="hljs-keyword">var</span> myLocation = function(latitude,longitude){
    lat1 = latitude;
    lon1 = longitude;

}

alert(lat1+<span class="hljs-string">"-"</span>+lon1);
Titanium.Geolocation.getCurrentPosition(function(<span class="hljs-keyword">e</span>)
            {
                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">e</span>.success || <span class="hljs-keyword">e</span>.<span class="hljs-keyword">error</span>)
                {
                    currentLocation.text = '<span class="hljs-keyword">error</span>: ' + JSON.stringify(<span class="hljs-keyword">e</span>.<span class="hljs-keyword">error</span>);
                    Ti.API.info(<span class="hljs-string">"Code translation: "</span>+translateErrorCode(<span class="hljs-keyword">e</span>.code));
                    alert('<span class="hljs-keyword">error</span> ' + JSON.stringify(<span class="hljs-keyword">e</span>.<span class="hljs-keyword">error</span>));
                    <span class="hljs-keyword">return</span>;
                }

                <span class="hljs-keyword">var</span> longitude = <span class="hljs-keyword">e</span>.coords.longitude;

                <span class="hljs-keyword">var</span> latitude = <span class="hljs-keyword">e</span>.coords.latitude;

                <span class="hljs-keyword">var</span> altitude = <span class="hljs-keyword">e</span>.coords.altitude;
                <span class="hljs-keyword">var</span> heading = <span class="hljs-keyword">e</span>.coords.heading;
                <span class="hljs-keyword">var</span> accuracy = <span class="hljs-keyword">e</span>.coords.accuracy;
                <span class="hljs-keyword">var</span> speed = <span class="hljs-keyword">e</span>.coords.speed;
                <span class="hljs-keyword">var</span> timestamp = <span class="hljs-keyword">e</span>.coords.timestamp;
                <span class="hljs-keyword">var</span> altitudeAccuracy = <span class="hljs-keyword">e</span>.coords.altitudeAccuracy;
                Ti.API.info('speed ' + speed);
                <span class="hljs-comment">//currentLocation.text = 'long:' + longitude + ' lat: ' + latitude;</span>

                Titanium.API.info('geo - current location: ' + new <span class="hljs-literal">Date</span>(timestamp) + ' long ' + longitude + ' lat ' + latitude + ' accuracy ' + accuracy);

                myLocation(latitude+<span class="hljs-string">"/"</span>+longitude);


            });
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 2nd 2013, 12:35:00 pm">January 2nd 2013</span>
				by <span class='authorname'>Graham Jeffrey</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>variable</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Missing from you question are several pieces of information that will help you obtain a speedy and accurate answer;</p>
<ul>
<li>Titanium SDK Version?</li>
<li>Primary Target Platform; Android, iOS or both?</li>
<li>Which alert; you have two</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="January 2nd 2013, 12:38:28 pm">January 2nd 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>i am using TiSDK 3.0, for ios , i have this alert </p>
<pre><code class="hljs">alert<span class="hljs-list">(<span class="hljs-keyword">lat1+</span><span class="hljs-string">"-"</span>+lon1)</span><span class="hljs-comment">;</span>
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="January 2nd 2013, 12:48:01 pm">January 2nd 2013</span>
								by <span class='authorname'>Graham Jeffrey</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Gurkan, alert is not working means, you are not getting alert at all or it is giving undefined values.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 3rd 2013, 4:23:48 am">January 3rd 2013</span>
								by <span class='authorname'>Ashish Nigam</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-253733">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>This may be your problem if it is the success alert that is failing;</p>
<p>Change this;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> myLocation = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(latitude,longitude)</span></span>{
    lat1 = latitude;
    lon1 = longitude;

}

alert(lat1+<span class="hljs-string">"-"</span>+lon1);
</code></pre><p>To this;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> myLocation = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(latitude,longitude)</span></span>{
    lat1 = latitude;
    lon1 = longitude;

    alert(lat1+<span class="hljs-string">"-"</span>+lon1);
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 2nd 2013, 12:39:27 pm">January 2nd 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/146359/variable-problem-.html#answer-253733" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i know that works inside of the function but i want to use is outside of the function, i need to pass variablles to the lat1, lon1.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2013, 12:49:14 pm">January 2nd 2013</span>
											by <span class='authorname'>Graham Jeffrey</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>As you have not made it clear which function you are referring too I am guessing the problem lies here;</p>
<pre><code class="hljs">...
<span class="hljs-tag">myLocation</span>(latitude, longitude);
</code></pre><p>Your function is expecting TWO variables and you passed a SINGLE string.</p>
<p>Note the use of the comma between your two variables when you call this function;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> myLocation = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(latitude,longitude)</span> </span>{
...
</code></pre><p>Between <strong>latitude</strong> &amp; <strong>longitude</strong>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2013, 1:17:59 pm">January 2nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Malcolm thanks for your help but these are not working :(<br>let me explain;<br>first i am writing the lat and lon like this </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lat;
<span class="hljs-keyword">var</span> lon;
</code></pre><p>as an empty variables, and then in my geolocation function i can get the latitude and longitude, i want to make my lat and lon values like as geolcation values, so i can use them below of my codes, i can&#39;t share all my codes :( because too long :(<br>i have remembered you, you helped me very much before thanks again :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2013, 1:38:26 pm">January 2nd 2013</span>
											by <span class='authorname'>Graham Jeffrey</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK, try this</p>
<pre><code class="hljs"><span class="hljs-tag">function</span> <span class="hljs-tag">getCurrectLocation</span>(obj) {
    <span class="hljs-tag">Ti</span><span class="hljs-class">.Geolocation</span><span class="hljs-class">.getCurrentPosition</span>(function (e) {
        <span class="hljs-tag">if</span> (!e.success || e.error) {
            <span class="hljs-tag">if</span> (obj.error) {
                <span class="hljs-tag">obj</span><span class="hljs-class">.error</span>({
                    <span class="hljs-attribute">error</span>: e.error,
                    <span class="hljs-attribute">code</span>: e.code
                });
            }
        } <span class="hljs-tag">else</span> {
            <span class="hljs-tag">if</span> (obj.success) {
                <span class="hljs-tag">obj</span><span class="hljs-class">.success</span>({
                    <span class="hljs-attribute">coords</span>: e.coords
                });
            }
        }
    });
}
</code></pre><p>This creates a re-usable function that will process the hard work and respond to callbacks</p>
<p>You call it like this;</p>
<pre><code class="hljs">getCurrectLocation<span class="hljs-list">({
    success: function <span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> {
        alert<span class="hljs-list">(<span class="hljs-keyword">JSON</span>.stringify<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span>)</span><span class="hljs-comment">;</span>
    },
    error: function <span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> {
        alert<span class="hljs-list">(<span class="hljs-keyword">JSON</span>.stringify<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span>)</span><span class="hljs-comment">;</span>
    }
})</span><span class="hljs-comment">;</span>
</code></pre><p>The full code for testing and using your own lat&#x2F;lon variables is below.</p>
<p>Run this and you will see EVERYTHING passes through and you most recent lat and lon are cached in the variables you mentioned, plus you have access to the other parameters as well.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lat1 = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> lon1 = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> btn = Ti.UI.createButton({
    title: <span class="hljs-string">'Geo'</span>,
    top: <span class="hljs-number">10</span>
});
win.add(btn);
btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    getCurrectLocation({
        success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            lat1 = e.coords.latitude;
            lon1 = e.coords.longitude;
            alert(<span class="hljs-built_in">JSON</span>.stringify(e));
        },
        error: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            alert(<span class="hljs-built_in">JSON</span>.stringify(e));
        }
    });
});
</code></pre><p>You can call the function <strong>getCurrectLocation</strong> as often as you like.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2013, 2:04:49 pm">January 2nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So just to confirm you should call the <strong>getCurrectLocation</strong> function when it is needed, an example would be;</p>
<pre><code class="hljs">getCurrectLocation({
    success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span></span> {
        lat1 = e.coords.latitude;
        lon1 = e.coords.longitude;
        httpClient.send({
            start: params.start,
            <span class="hljs-keyword">end</span>: params.limit,
            lat: lat1,
            lon: lon1,
            radius: <span class="hljs-number">10</span>
        });
    },
    <span class="hljs-built_in">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span></span> {
        alert(<span class="hljs-string">'there was a problem'</span>);
    }
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2013, 6:24:19 pm">January 2nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Malcolm thanks for your help it works great</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 3rd 2013, 8:00:26 am">January 3rd 2013</span>
											by <span class='authorname'>Graham Jeffrey</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-253735">
				
						<section>
							<p>Your alert-functions runs long time before you get your position. Please try a commonJS pattern like this:</p>
<pre><code class="hljs"><span class="hljs-comment">// geoloc.js:</span>
exports.<span class="hljs-keyword">get</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_callback)</span> </span>{
    Ti.Geolocation.getCurrentPosition(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        _callback(e.success) ? e.coords : <span class="hljs-literal">null</span>;
    });
}

<span class="hljs-comment">// app.js:</span>
require(<span class="hljs-string">'geoloc'</span>).<span class="hljs-keyword">get</span>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_data)</span></span>{
    <span class="hljs-keyword">if</span> (_data != <span class="hljs-literal">null</span>) {
        alert(<span class="hljs-string">'My position'</span> + _data.latitude + <span class="hljs-string">'/'</span> + _data.longitude);
    }
})
</code></pre><p>Hope this helps.</p>
<p>Rainer</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 2nd 2013, 1:08:22 pm">January 2nd 2013</span>
								by <span class='authorname'>Rainer Schleevoigt</span><br>
								<a class="icon-bg icon-link" href="question/146359/variable-problem-.html#answer-253735" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Rainer thanks for your help but i didn&#39;t understand your code this is because i have not much knowledge like you:( i have no idea how to put these codes in my app.js and geloc.js , i have looked at your portfolio and i am trying to make ( which is very simple then yours ) POI application. Thanks again</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 2nd 2013, 1:42:13 pm">January 2nd 2013</span>
											by <span class='authorname'>Graham Jeffrey</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
