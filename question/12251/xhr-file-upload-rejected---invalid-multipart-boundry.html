<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>xhr file upload rejected - invalid multipart boundry » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>xhr file upload rejected - invalid multipart boundry</h1>
		</header>
		<section>
			<p>Hello, I&#39;m having problems getting an xhr file upload to work using the kitchen sink sample code. works ok to my localhost but on the live server it is being rejected by apache mod_security due to a malformed multipart boundry which results in a 400 bad request error being returned.</p>
<p>This is from the server error log…</p>
<pre><code class="hljs">[<span class="hljs-number">05</span>/Apr/<span class="hljs-number">2010</span>:<span class="hljs-number">14</span>:<span class="hljs-number">16</span>:<span class="hljs-number">40</span> +<span class="hljs-number">0100</span>] [www<span class="hljs-class">.domain</span><span class="hljs-class">.com</span>/sid<span class="hljs-hexcolor">#1e4c8e</span>90][rid<span class="hljs-hexcolor">#1f99d2</span>18][/php/post.php][<span class="hljs-number">2</span>] Multipart parsing error (init): Multipart: Invalid boundary <span class="hljs-keyword">in</span> C-T (malformed).
[<span class="hljs-number">05</span>/Apr/<span class="hljs-number">2010</span>:<span class="hljs-number">14</span>:<span class="hljs-number">16</span>:<span class="hljs-number">44</span> +<span class="hljs-number">0100</span>] [www<span class="hljs-class">.domain</span><span class="hljs-class">.com</span>/sid<span class="hljs-hexcolor">#1e4c8e</span>90][rid<span class="hljs-hexcolor">#1f99d2</span>18][/php/post.php][<span class="hljs-number">1</span>] Access denied with <span class="hljs-tag">code</span> <span class="hljs-number">400</span> (phase <span class="hljs-number">2</span>). Match of <span class="hljs-string">"eq 0"</span> against <span class="hljs-string">"REQBODY_PROCESSOR_ERROR"</span> required. [file <span class="hljs-string">"/usr/local/apache/conf/modsec/modsecurity_crs_20_protocol_violations.conf"</span>] [line <span class="hljs-string">"31"</span>] [id <span class="hljs-string">"960912"</span>] [msg <span class="hljs-string">"Request Body Parsing Failed. Multipart: Invalid boundary in C-T (malformed)."</span>] [severity <span class="hljs-string">"CRITICAL"</span>]
</code></pre><p>is this a bug or something i can work around?<br>any help much appreciated.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 6th 2010, 10:34:38 am">April 6th 2010</span>
				by <span class='authorname'>Simon Rabjohns</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>bad</span></li>
					
						<li><span class='tagname'>multipart</span></li>
					
						<li><span class='tagname'>request</span></li>
					
						<li><span class='tagname'>upload</span></li>
					
						<li><span class='tagname'>xhr</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-36451">
				
						<section>
							<p>just for info i got round this by moving the website to another host. it looked like a problem with modsecurity which i couldn&#39;t easily work around. </p>
<p>whilst looking for a solution i came accross others who have had similar issues with multipart posts from applications where modsecurity threw the error because it didn&#39;t expect the charset property in the content-type header. Might that be the case with the way titanium generates the multipart headers? </p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 14th 2010, 5:02:57 pm">April 14th 2010</span>
								by <span class='authorname'>Simon Rabjohns</span><br>
								<a class="icon-bg icon-link" href="../../question/12251/xhr-file-upload-rejected---invalid-multipart-boundry.html#answer-36451" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242027">
				
						<section>
							<p>(2 years later… ;-)</p>
<p>We had the same issue and this solved it: http:&#x2F;&#x2F;www.nimrodgat.com&#x2F;2010&#x2F;05&#x2F;iphone-image-upload-modsecurity.html</p>
<p>Hope that can help some of you guys.</p>
<p>Cheers</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 27th 2012, 10:49:38 am">June 27th 2012</span>
								by <span class='authorname'>Robin D. (Perspecteev)</span><br>
								<a class="icon-bg icon-link" href="../../question/12251/xhr-file-upload-rejected---invalid-multipart-boundry.html#answer-242027" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>so how you fix it,how to remove the charset properties?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2015, 4:31:05 am">May 5th 2015</span>
											by <span class='authorname'>ardy wongso</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
