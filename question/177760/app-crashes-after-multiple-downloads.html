<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>App Crashes after multiple downloads » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>App Crashes after multiple downloads</h1>
		</header>
		<section>
			<p>I&#39;ve been having an issue with my app crashing while a download is in progress within the app. This started with SDK 3.3.0 and has continued now to 3.4.0.v20140917120000</p>
<p>Evertthing in the app works fine when I use it I can run many downloads but after a bit of time it will just crash and give me the error below. Does anyone know how to fix this or what is causing it or maybe some tips of places to look to figure out whats going on?</p>
<p>There is this issue that I discovered with multiple onreadystatechanges being called and I&#39;m not sure if its related to that: https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-17704</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  The application has crashed with an uncaught exception <span class="hljs-variable">'NSInvalidArgumentException</span><span class="hljs-variable">'.</span>
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   download thread <span class="hljs-number">2</span>: <span class="hljs-number">0.3705732822418213</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  Reason:
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  *** NSAllocateMemoryPages<span class="hljs-list">(<span class="hljs-keyword">43459736</span>)</span> failed
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  Stack trace:
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">0</span>   CoreFoundation                      <span class="hljs-number">0</span>x04e9ddda __exceptionPreprocess + <span class="hljs-number">154</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">1</span>   libobjc.A.dylib                     <span class="hljs-number">0</span>x04a60a97 objc_exception_throw + <span class="hljs-number">44</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">2</span>   CoreFoundation                      <span class="hljs-number">0</span>x04e9dd1d +<span class="hljs-list">[<span class="hljs-keyword">NSException</span> raise:format:] + <span class="hljs-number">141</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">3</span>   Foundation                          <span class="hljs-number">0</span>x01f75cfc NSAllocateMemoryPages + <span class="hljs-number">106</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">4</span>   Foundation                          <span class="hljs-number">0</span>x01e84323 _NSDataCreateVMDispatchData + <span class="hljs-number">34</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">5</span>   Foundation                          <span class="hljs-number">0</span>x01e8251a -<span class="hljs-list">[<span class="hljs-keyword">_NSPlaceholderData</span> initWithBytes:length:copy:deallocator:] + <span class="hljs-number">252</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">6</span>   Foundation                          <span class="hljs-number">0</span>x01e8240d -<span class="hljs-list">[<span class="hljs-keyword">NSData</span><span class="hljs-list">(<span class="hljs-keyword">NSData</span>)</span> initWithBytes:length:copy:freeWhenDone:bytesAreVM:] + <span class="hljs-number">92</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">7</span>   Foundation                          <span class="hljs-number">0</span>x01edefb3 -<span class="hljs-list">[<span class="hljs-keyword">NSData</span><span class="hljs-list">(<span class="hljs-keyword">NSData</span>)</span> copyWithZone:] + <span class="hljs-number">144</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">8</span>   libobjc.A.dylib                     <span class="hljs-number">0</span>x04a76b45 -<span class="hljs-list">[<span class="hljs-keyword">NSObject</span> copy] + <span class="hljs-number">41</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">9</span>   Speedtest X                         <span class="hljs-number">0</span>x003038ef -<span class="hljs-list">[<span class="hljs-keyword">APSHTTPResponse</span> responseData] + <span class="hljs-number">48</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">10</span>  Speedtest X                         <span class="hljs-number">0</span>x003039d6 -<span class="hljs-list">[<span class="hljs-keyword">APSHTTPResponse</span> responseLength] + <span class="hljs-number">218</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">11</span>  Speedtest X                         <span class="hljs-number">0</span>x00306540 -<span class="hljs-list">[<span class="hljs-keyword">APSHTTPRequest</span> connection:didReceiveData:] + <span class="hljs-number">327</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">12</span>  CFNetwork                           <span class="hljs-number">0</span>x039704a1 ___ZL30_NSURLConnectionDidReceiveDataP16_CFURLConnectionPK8__CFDatalPKv_block_invoke + <span class="hljs-number">51</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">13</span>  CFNetwork                           <span class="hljs-number">0</span>x03987f99 __65-<span class="hljs-list">[<span class="hljs-keyword">NSURLConnectionInternal</span> _withConnectionAndDelegate:onlyActive:]_block_invoke + <span class="hljs-number">83</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">14</span>  Foundation                          <span class="hljs-number">0</span>x01f71365 __NSBLOCKOPERATION_IS_CALLING_OUT_TO_A_BLOCK__ + <span class="hljs-number">12</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">15</span>  Foundation                          <span class="hljs-number">0</span>x01e97e45 -<span class="hljs-list">[<span class="hljs-keyword">NSBlockOperation</span> main] + <span class="hljs-number">99</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">16</span>  Foundation                          <span class="hljs-number">0</span>x01e77247 -<span class="hljs-list">[<span class="hljs-keyword">__NSOperationInternal</span> _start:] + <span class="hljs-number">700</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">17</span>  Foundation                          <span class="hljs-number">0</span>x01e76f79 -<span class="hljs-list">[<span class="hljs-keyword">NSOperation</span> start] + <span class="hljs-number">83</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">18</span>  Foundation                          <span class="hljs-number">0</span>x01e76dc3 __NSOQSchedule_f + <span class="hljs-number">237</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">19</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x0581d03f _dispatch_client_callout + <span class="hljs-number">14</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">20</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x05805d86 _dispatch_queue_drain + <span class="hljs-number">690</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">21</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x05805976 _dispatch_queue_invoke + <span class="hljs-number">197</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">22</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x05807a07 _dispatch_root_queue_drain + <span class="hljs-number">374</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">23</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x0580899d _dispatch_worker_thread3 + <span class="hljs-number">108</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">24</span>  libsystem_pthread.dylib             <span class="hljs-number">0</span>x05b72296 _pthread_wqthread + <span class="hljs-number">724</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">25</span>  libsystem_pthread.dylib             <span class="hljs-number">0</span>x05b6feea start_wqthread + <span class="hljs-number">30</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre><pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-number">2014</span><span class="hljs-number">-09</span><span class="hljs-number">-18</span> <span class="hljs-number">00</span>:53:44.669 Speedtest X<span class="hljs-list">[<span class="hljs-keyword">21696:1665754</span>] *** Terminating app due to uncaught exception <span class="hljs-variable">'NSInvalidArgumentException</span>', reason: <span class="hljs-variable">'***</span> NSAllocateMemoryPages<span class="hljs-list">(<span class="hljs-keyword">43459736</span>)</span> failed'
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  *** First throw call stack:
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-list">(
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">0</span>   CoreFoundation                      <span class="hljs-number">0</span>x04e9ddf6 __exceptionPreprocess + <span class="hljs-number">182</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">1</span>   libobjc.A.dylib                     <span class="hljs-number">0</span>x04a60a97 objc_exception_throw + <span class="hljs-number">44</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">2</span>   CoreFoundation                      <span class="hljs-number">0</span>x04e9dd1d +<span class="hljs-list">[<span class="hljs-keyword">NSException</span> raise:format:] + <span class="hljs-number">141</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">3</span>   Foundation                          <span class="hljs-number">0</span>x01f75cfc NSAllocateMemoryPages + <span class="hljs-number">106</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">4</span>   Foundation                          <span class="hljs-number">0</span>x01e84323 _NSDataCreateVMDispatchData + <span class="hljs-number">34</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">5</span>   Foundation                          <span class="hljs-number">0</span>x01e8251a -<span class="hljs-list">[<span class="hljs-keyword">_NSPlaceholderData</span> initWithBytes:length:copy:deallocator:] + <span class="hljs-number">252</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">6</span>   Foundation                          <span class="hljs-number">0</span>x01e8240d -<span class="hljs-list">[<span class="hljs-keyword">NSData</span><span class="hljs-list">(<span class="hljs-keyword">NSData</span>)</span> initWithBytes:length:copy:freeWhenDone:bytesAreVM:] + <span class="hljs-number">92</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">7</span>   Foundation                          <span class="hljs-number">0</span>x01edefb3 -<span class="hljs-list">[<span class="hljs-keyword">NSData</span><span class="hljs-list">(<span class="hljs-keyword">NSData</span>)</span> copyWithZone:] + <span class="hljs-number">144</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">8</span>   libobjc.A.dylib                     <span class="hljs-number">0</span>x04a76b45 -<span class="hljs-list">[<span class="hljs-keyword">NSObject</span> copy] + <span class="hljs-number">41</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">9</span>   Speedtest X                         <span class="hljs-number">0</span>x003038ef -<span class="hljs-list">[<span class="hljs-keyword">APSHTTPResponse</span> responseData] + <span class="hljs-number">48</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">10</span>  Speedtest X                         <span class="hljs-number">0</span>x003039d6 -<span class="hljs-list">[<span class="hljs-keyword">APSHTTPResponse</span> responseLength] + <span class="hljs-number">218</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">11</span>  Speedtest X                         <span class="hljs-number">0</span>x00306540 -<span class="hljs-list">[<span class="hljs-keyword">APSHTTPRequest</span> connection:didReceiveData:] + <span class="hljs-number">327</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">12</span>  CFNetwork                           <span class="hljs-number">0</span>x039704a1 ___ZL30_NSURLConnectionDidReceiveDataP16_CFURLConnectionPK8__CFDatalPKv_block_invoke + <span class="hljs-number">51</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">13</span>  CFNetwork                           <span class="hljs-number">0</span>x03987f99 __65-<span class="hljs-list">[<span class="hljs-keyword">NSURLConnectionInternal</span> _withConnectionAndDelegate:onlyActive:]_block_invoke + <span class="hljs-number">83</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">14</span>  Foundation                          <span class="hljs-number">0</span>x01f71365 __NSBLOCKOPERATION_IS_CALLING_OUT_TO_A_BLOCK__ + <span class="hljs-number">12</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">15</span>  Foundation                          <span class="hljs-number">0</span>x01e97e45 -<span class="hljs-list">[<span class="hljs-keyword">NSBlockOperation</span> main] + <span class="hljs-number">99</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">16</span>  Foundation                          <span class="hljs-number">0</span>x01e77247 -<span class="hljs-list">[<span class="hljs-keyword">__NSOperationInternal</span> _start:] + <span class="hljs-number">700</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">17</span>  Foundation                          <span class="hljs-number">0</span>x01e76f79 -<span class="hljs-list">[<span class="hljs-keyword">NSOperation</span> start] + <span class="hljs-number">83</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">18</span>  Foundation                          <span class="hljs-number">0</span>x01e76dc3 __NSOQSchedule_f + <span class="hljs-number">237</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">19</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x0581d03f _dispatch_client_callout + <span class="hljs-number">14</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">20</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x05805d86 _dispatch_queue_drain + <span class="hljs-number">690</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">21</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x05805976 _dispatch_queue_invoke + <span class="hljs-number">197</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">22</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x05807a07 _dispatch_root_queue_drain + <span class="hljs-number">374</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">23</span>  libdispatch.dylib                   <span class="hljs-number">0</span>x0580899d _dispatch_worker_thread3 + <span class="hljs-number">108</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">24</span>  libsystem_pthread.dylib             <span class="hljs-number">0</span>x05b72296 _pthread_wqthread + <span class="hljs-number">724</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      <span class="hljs-number">25</span>  libsystem_pthread.dylib             <span class="hljs-number">0</span>x05b6feea start_wqthread + <span class="hljs-number">30</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  )
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  libc++abi.dylib: terminating with uncaught exception of type NSException
-- End simulator log ---------------------------------------------------------</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 18th 2014, 3:09:02 am">September 18th 2014</span>
				by <span class='authorname'>donovan lewis</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>3.4.0</span></li>
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>ios 8</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I believe we are having a similar issue although I have yet to capture this error directly in the debugger.  We have compiled with both 3.4.0, 3.4.1 and 3.5.0 and are experiencing random crashes that, according to our NewRelic crash detection, always stem from: APSHTTPResponse.m line 89 in [APSHTTPResponse responseData]</p>
<p>I have not been able to find a way to reproduce the error, it happens in what appears to be a random place and time every time.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 3rd 2015, 6:23:08 pm">March 3rd 2015</span>
								by <span class='authorname'>Mike Kazmier</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
