<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Weird behaviour when getting top &amp; height Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Weird behaviour when getting top &amp; height</h1>
		</header>
		<section>
			<p>I&#39;m having some pretty weird troubles when i&#39;m trying to get the top and the height from a label.</p>
<p>Bassicly I have 2 labels, I want them both to be positioned under each other.</p>
<pre><code class="hljs">var infoTxt = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>: module.getInfo(),
    top: <span class="hljs-number">35</span>,
    left: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">300</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-string">"auto"</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#666666"</span>,
    font: {fontSize: <span class="hljs-number">12</span>,
           fontFamily: <span class="hljs-string">"Helvetica"</span>}
});
window.<span class="hljs-built_in">add</span>(infoTxt);


var tempTop = infoTxt.top + infoTxt.<span class="hljs-variable">height</span>;
Ti.API.info(tempTop); <span class="hljs-comment">// returns 125</span>

var tempLabel = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"test"</span>,
    top: tempTop,
    left: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">300</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-string">"auto"</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#666666"</span>,
    font: {fontSize: <span class="hljs-number">12</span>,
           fontFamily: <span class="hljs-string">"Helvetica"</span>}
});
window.<span class="hljs-built_in">add</span>(tempLabel);
</code></pre><p>tempTop returns 125, which seems pretty good, but now my infoTxt label is gone, when I remove the calculation, It&#39;s back again.<br>Also, my tempLabel is positioned correctly.</p>
<p>So the problem must be somewhere in this code:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> tempTop</span> = infoTxt.top + infoTxt.height;
Ti.API.info(tempTop); <span class="hljs-comment">// returns 125</span>
</code></pre><p>I have no idea what can go wrong with this, but it&#39;s (re)moving my other label.</p>
<p>I&#39;m using Titanium Developer 1.2.2, and SDK 1.5.1 (iPhone 4)</p>
<p>EDIT: After testing some more, the problem only appears to happen when I tried to get the height of my label.  (only on a label with height: &quot;auto&quot;)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 17th 2010, 11:25:31 am">December 17th 2010</span>
				by <span class='authorname'>Wouter De Loose</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>label</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>After testing some more, the problem only appears to happen when I tried to get the height of my label.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 17th 2010, 12:35:51 pm">December 17th 2010</span>
								by <span class='authorname'>Wouter De Loose</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>In the end this solved my problem: http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;6841&#x2F;label-w-auto-height-disappears</p>
<p>But i&#39;m still curious what&#39;s causing this strange behaviour.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 17th 2010, 2:05:00 pm">December 17th 2010</span>
								by <span class='authorname'>Wouter De Loose</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-164571">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>If you would like to use the vertical layout on the container (the window), then it will also work, with the advantage that you can set the height property with an auto value:</p>
<pre><code class="hljs">var window = Ti.UI.createWindow({  
    backgroundColor:<span class="hljs-string">'#ddd'</span>,
    layout:<span class="hljs-string">"vertical"</span>
});

var infoTxt = Ti.UI.createLabel({
    backgroundColor:<span class="hljs-string">"red"</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"This is infoTxt"</span>,
    top: <span class="hljs-number">35</span>,
    left: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">300</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-string">"auto"</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#666"</span>,
    font: {fontSize: <span class="hljs-number">12</span>,
           fontFamily: <span class="hljs-string">"Helvetica"</span>}
});
window.<span class="hljs-built_in">add</span>(infoTxt);

Ti.API.info(<span class="hljs-string">"infoTxt.height = "</span>+infoTxt.<span class="hljs-variable">height</span>);

var tempLabel = Ti.UI.createLabel({
    backgroundColor:<span class="hljs-string">"green"</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"This is tempLabel"</span>,
    top: <span class="hljs-number">0</span>,
    left: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">300</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-string">"auto"</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#666"</span>,
    font: {fontSize: <span class="hljs-number">12</span>,
           fontFamily: <span class="hljs-string">"Helvetica"</span>}
});
window.<span class="hljs-built_in">add</span>(tempLabel);

window.<span class="hljs-built_in">open</span>();
</code></pre><p>This is the result:</p>
<p><img src="http:&#x2F;&#x2F;img152.imageshack.us&#x2F;img152&#x2F;4660&#x2F;screenshot047.png" alt="screenshot"></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 17th 2010, 2:12:10 pm">December 17th 2010</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/91171/weird-behaviour-when-getting-top--height.html#answer-164571" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>That would be a much better solutions then mine, thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 17th 2010, 3:12:02 pm">December 17th 2010</span>
											by <span class='authorname'>Wouter De Loose</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-164441">
				
						<section>
							<p>Wrap this 2 labels into a view that has <strong>layout:&#39;vertical&#39;</strong>.<br>It will take care of putting the labels the right way.<br>And <strong>top</strong> becomes relative to the previous element.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 17th 2010, 12:37:00 pm">December 17th 2010</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/91171/weird-behaviour-when-getting-top--height.html#answer-164441" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;ve just tried it and checked the documentation, but the view doesn&#39;t have a layout property.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 17th 2010, 12:47:09 pm">December 17th 2010</span>
											by <span class='authorname'>Wouter De Loose</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-164531">
				
						<section>
							<p>Wouter</p>
<p>The problem is that the height of infoTxt is a string &quot;auto&quot;, therefore the following label&#39;s height cannot be calculated from it. It needs to be a number.  Hence the following code works:</p>
<pre><code class="hljs">var window = Ti.UI.createWindow({  
    backgroundColor:<span class="hljs-string">'#ddd'</span>
});


var infoTxt = Ti.UI.createLabel({
    backgroundColor:<span class="hljs-string">"red"</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"This is infoTxt"</span>,
    top: <span class="hljs-number">35</span>,
    left: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">300</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">40</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#666"</span>,
    font: {fontSize: <span class="hljs-number">12</span>,
           fontFamily: <span class="hljs-string">"Helvetica"</span>}
});
window.<span class="hljs-built_in">add</span>(infoTxt);

Ti.API.info(<span class="hljs-string">"infoTxt.height = "</span>+infoTxt.<span class="hljs-variable">height</span>);

var tempLabel = Ti.UI.createLabel({
    backgroundColor:<span class="hljs-string">"green"</span>,
    <span class="hljs-built_in">text</span>: <span class="hljs-string">"This is tempLabel"</span>,
    top: infoTxt.top + infoTxt.<span class="hljs-variable">height</span>,
    left: <span class="hljs-number">10</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">300</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-string">"auto"</span>,
    <span class="hljs-built_in">color</span>: <span class="hljs-string">"#666"</span>,
    font: {fontSize: <span class="hljs-number">12</span>,
           fontFamily: <span class="hljs-string">"Helvetica"</span>}
});
window.<span class="hljs-built_in">add</span>(tempLabel);

window.<span class="hljs-built_in">open</span>();
</code></pre><p>See the following screenshot:</p>
<p><img src="http:&#x2F;&#x2F;img37.imageshack.us&#x2F;img37&#x2F;3525&#x2F;screenshot046g.png" alt="screenshot"></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 17th 2010, 2:06:27 pm">December 17th 2010</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/91171/weird-behaviour-when-getting-top--height.html#answer-164531" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Giving the label an absolute height does work, but the length of the text is variable, so it&#39;s not really an option for me.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 17th 2010, 3:10:52 pm">December 17th 2010</span>
											by <span class='authorname'>Wouter De Loose</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
