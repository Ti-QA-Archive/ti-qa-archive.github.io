<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Single View - passing data between views Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Single View - passing data between views</h1>
		</header>
		<section>
			<p>Hi, </p>
<p>I am new to Appcelertator and so far it looks pretty rad. I have been mucking around with a few bits and  have got a little stuck. </p>
<p>Essentially I am looking to create 2 views with buttons inside them to affect the navigation (this may not be best practice, however its more to learn more about how I can call&#x2F; access data from different states etc)</p>
<p>So I have a few of files I am using: ui&#x2F;common&#x2F;firstview.js, ui&#x2F;common&#x2F;secondview.js and  &#x2F;ui&#x2F;handheld&#x2F;applicationWindow.js</p>
<p>In firstview I create a button, from which I can tell a view to do some thing like animate a  new view into place. My problem is how would I do this?  I would presume usually that the event listener would need to be added to the view in which the button is instantiated, in which case I don&#39;t know how to then call the window object in order to do something.</p>
<p>Likewise if I added the listener at window level, how would I access the button from within the view </p>
<p>First View</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FirstView</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createView();
    <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
        color:<span class="hljs-string">'#000000'</span>,
        text:String.format(L(<span class="hljs-string">'welcome'</span>),<span class="hljs-string">'Titanium'</span>),
        height:<span class="hljs-string">'auto'</span>,
        width:<span class="hljs-string">'auto'</span>
    });
    <span class="hljs-keyword">self</span>.add(label);

    <span class="hljs-keyword">var</span> button = Titanium.UI.createButton({
        title : <span class="hljs-string">'Hello'</span>,
        top : <span class="hljs-number">10</span>,
        width : <span class="hljs-number">100</span>,
        height : <span class="hljs-number">50</span>
    });
    <span class="hljs-keyword">self</span>.add(button);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;

    button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        Titanium.API.info(<span class="hljs-string">'It would be cool if I could tell my parent window to animate a new view'</span>);
    });
}

module.exports = FirstView;
</code></pre><p>applicationWindow.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ApplicationWindow</span><span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> FirstView = <span class="hljs-keyword">require</span>(<span class="hljs-string">'ui/common/FirstView'</span>);        

    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createWindow({
        backgroundColor:<span class="hljs-string">'#ffffff'</span>
    });

    <span class="hljs-keyword">var</span> firstView = <span class="hljs-keyword">new</span> FirstView();
    <span class="hljs-keyword">self</span>.add(firstView);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
}


module.exports = ApplicationWindow;
</code></pre><p>I know that this would be easily achievable in a tab view, however I am trying to understand how things can be passed between views and how listeners should be used, any pointers would be greatly appreciated</p>
<p>Russ</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 17th 2013, 1:16:02 pm">January 17th 2013</span>
				by <span class='authorname'>Russ Freeman</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>animation</span></li>
					
						<li><span class='tagname'>eventlistener</span></li>
					
						<li><span class='tagname'>scope</span></li>
					
						<li><span class='tagname'>transitions</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-254807">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>There are several ways to achieve your goal, each have their merits and each have problems.  Adopting only one technique can be limiting - so the idea is to find the best solution for your needs.</p>
<p>First though I want to fix your first code as your return line is leaving the code below it un-executed &quot;sorry grammar police&quot;.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FirstView</span>(<span class="hljs-params"></span>) </span>{
...
    <span class="hljs-keyword">return</span> self;

    button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        Titanium.API.info(<span class="hljs-string">'It would be cool if I could tell my parent window to animate a new view'</span>);
    });
}

<span class="hljs-built_in">module</span>.exports = FirstView;
</code></pre><p>Swap these two blocks around;</p>
<pre><code class="hljs">...
button.addEventListener(<span class="hljs-symbol">'click'</span>, <span class="hljs-keyword">function</span>(e) {
    <span class="hljs-type">Titanium</span>.<span class="hljs-type">API</span>.info(<span class="hljs-symbol">'It</span> would be cool <span class="hljs-keyword">if</span> <span class="hljs-type">I</span> could tell my parent window <span class="hljs-keyword">to</span> animate a <span class="hljs-keyword">new</span> view');
});
return self;
...
</code></pre><p>Otherwise code below the return will never be called.</p>
<p>So here are a couple of techniques;</p>
<p><strong>Callbacks</strong></p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FirstView</span>(<span class="hljs-params">obj</span>) </span>{
...
    button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">if</span> (obj.action) {
            obj.action({
                field1: <span class="hljs-string">'value1'</span>,
                field2: <span class="hljs-string">'value2'</span>
            });
        }
    });
    <span class="hljs-keyword">return</span> self;
}
<span class="hljs-built_in">module</span>.exports = FirstView;
</code></pre><p>This allow the view to pass-back parameters from within a function back to the calling function.  You can add as many of these as you wish and use them within your code wherever you wish and send back as many or few parameters.</p>
<p>You would use it as follows;</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ApplicationWindow</span>(<span class="hljs-params"></span>) </span>{
...
    <span class="hljs-keyword">var</span> firstView = <span class="hljs-keyword">new</span> FirstView({
        action: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            alert(<span class="hljs-built_in">JSON</span>.stringify(e));
        }
    });
    self.add(firstView);
...
} 
<span class="hljs-built_in">module</span>.exports = ApplicationWindow;
</code></pre><p>This is where you use receive back the results of the call-back from within your code.</p>
<p><strong>fireEvent&#x2F;addEventListener</strong></p>
<p>This will let you add your own custom events to objects and views and then respond to them.  Caution you can add these events to the global location, this seems great but in reality this should be used with caution, only if absolutely and cleaned up when no longer required within your app.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FirstView</span>(<span class="hljs-params">obj</span>) </span>{
...
    button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        Ti.App.fireEvent(<span class="hljs-string">'action'</span>, {
            field1: <span class="hljs-string">'value1'</span>,
            field2: <span class="hljs-string">'value2'</span>
        });
    });
    <span class="hljs-keyword">return</span> self;
}
<span class="hljs-built_in">module</span>.exports = FirstView;
</code></pre><p>And usage as follows;</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ApplicationWindow</span>(<span class="hljs-params"></span>) </span>{
...
    <span class="hljs-keyword">var</span> firstView = <span class="hljs-keyword">new</span> FirstView();
    Ti.App.addEventListener(<span class="hljs-string">'action'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
        alert(<span class="hljs-built_in">JSON</span>.stringify(e));
    });
    self.add(firstView);
...
} 
<span class="hljs-built_in">module</span>.exports = ApplicationWindow;
</code></pre><p>These should get you started - there are many others and as I say, good ways have bad points and bad ways have good points.  Aim for the best you can have and clean up as you go.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 17th 2013, 6:07:42 pm">January 17th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/147049/single-view---passing-data-between-views.html#answer-254807" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Did this help answer your question?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 22nd 2013, 7:52:32 pm">January 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-254791">
				
						<section>
							<p>Really, in order to so what you want in the way you&#39;re talking about it, you would use fireEvent from firstView and add an event listener in  ApplicationWindow to listen for the callâ¦ Again, not best practice, but it would work.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 17th 2013, 2:51:18 pm">January 17th 2013</span>
								by <span class='authorname'>Ray Belisle</span><br>
								<a class="icon-bg icon-link" href="../../question/147049/single-view---passing-data-between-views.html#answer-254791" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
