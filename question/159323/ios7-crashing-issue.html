<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>iOS7 Crashing Issue Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>iOS7 Crashing Issue</h1>
		</header>
		<section>
			<p>Hi,<br>I am working on titanium Mobile.<br>I am facing a problem that my app is crashing on iOS 7 but working perfectly on iOS6.<br>Here is my stack trace.</p>
<pre><code class="hljs">
[ERROR] The application has crashed with an uncaught exception <span class="hljs-string">'NSRangeException'</span>.
<span class="hljs-label">Reason:</span>
*** -[__NSArrayM objectAtIndex:]: index <span class="hljs-number">29</span> beyond bounds [<span class="hljs-number">0</span> .. <span class="hljs-number">28</span>]
Stack trace:
<span class="hljs-number">0</span>   CoreFoundation                      <span class="hljs-number">0x043ab5c8</span> __exceptionPreprocess + <span class="hljs-number">152</span>
<span class="hljs-number">1</span>   libobjc.A.dylib                     <span class="hljs-number">0x03eb58b6</span> objc_exception_throw + <span class="hljs-number">44</span>
<span class="hljs-number">2</span>   CoreFoundation                      <span class="hljs-number">0x0434c4e6</span> -[__NSArrayM objectAtIndex:] + <span class="hljs-number">246</span>
<span class="hljs-number">3</span>   SpotLight                           <span class="hljs-number">0x0007c9b0</span> -[TiViewProxy insertSubview:forProxy:] + <span class="hljs-number">1520</span>
<span class="hljs-number">4</span>   SpotLight                           <span class="hljs-number">0x0007d22b</span> -[TiViewProxy relayout] + <span class="hljs-number">2075</span>
<span class="hljs-number">5</span>   SpotLight                           <span class="hljs-number">0x0007bcd3</span> -[TiViewProxy refreshView:] + <span class="hljs-number">675</span>
<span class="hljs-number">6</span>   SpotLight                           <span class="hljs-number">0x0007d543</span> -[TiViewProxy layoutChildrenIfNeeded] + <span class="hljs-number">259</span>
<span class="hljs-number">7</span>   SpotLight                           <span class="hljs-number">0x001faba7</span> +[TiLayoutQueue layoutProxy:] + <span class="hljs-number">87</span>
<span class="hljs-number">8</span>   SpotLight                           <span class="hljs-number">0x001fa972</span> performLayoutRefresh + <span class="hljs-number">530</span>
<span class="hljs-number">9</span>   CoreFoundation                      <span class="hljs-number">0x04369bd6</span> __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + <span class="hljs-number">22</span>
<span class="hljs-number">10</span>  CoreFoundation                      <span class="hljs-number">0x043695bd</span> __CFRunLoopDoTimer + <span class="hljs-number">1181</span>
<span class="hljs-number">11</span>  CoreFoundation                      <span class="hljs-number">0x04351628</span> __CFRunLoopRun + <span class="hljs-number">1816</span>
<span class="hljs-number">12</span>  CoreFoundation                      <span class="hljs-number">0x04350ac3</span> CFRunLoopRunSpecific + <span class="hljs-number">467</span>
<span class="hljs-number">13</span>  CoreFoundation                      <span class="hljs-number">0x043508db</span> CFRunLoopRunInMode + <span class="hljs-number">123</span>
<span class="hljs-number">14</span>  GraphicsServices                    <span class="hljs-number">0x046059e2</span> GSEventRunModal + <span class="hljs-number">192</span>
<span class="hljs-number">15</span>  GraphicsServices                    <span class="hljs-number">0x04605809</span> GSEventRun + <span class="hljs-number">104</span>
<span class="hljs-number">16</span>  UIKit                               <span class="hljs-number">0x01b5fd3b</span> UIApplicationMain + <span class="hljs-number">1225</span>
<span class="hljs-number">17</span>  SpotLight                           <span class="hljs-number">0x000042a8</span> main + <span class="hljs-number">456</span>
<span class="hljs-number">18</span>  SpotLight                           <span class="hljs-number">0x00002bf5</span> start + <span class="hljs-number">53</span>
<span class="hljs-number">19</span>  ???                                 <span class="hljs-number">0x00000001</span> <span class="hljs-number">0x0</span> + <span class="hljs-number">1</span>
</code></pre><p>what is the problem ?<br>Any help will be appreciated.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 11th 2013, 8:52:10 am">November 11th 2013</span>
				by <span class='authorname'>Muhammad Burhan</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios7</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>App is working perfectly in first two iterations but crashing on third :(</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 11th 2013, 8:54:29 am">November 11th 2013</span>
								by <span class='authorname'>Muhammad Burhan</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Maybe you could include some code from where you think this error is coming from. It would be helpful to figure out what is going on.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 11th 2013, 2:24:50 pm">November 11th 2013</span>
								by <span class='authorname'>Stevo Perisic</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Here is my working Code</p>
<pre><code class="hljs">rowCity.addEventListener('click',function(e){

    var index = e.rowData.rowIndex<span class="hljs-comment">;</span>

        var q = businessId[index]<span class="hljs-comment">;     // Business Id is an array containing the Id's for businesses retrieved from web service.</span>

    businessIdHome = q<span class="hljs-comment">;</span>

        likeBusinessId = businessId[index]<span class="hljs-comment">;</span>


        if(chooseFav == 1){

           var xhr = Titanium.Network.createHTTPClient()<span class="hljs-comment">;</span>

                xhr.open('GET', 'http://abc.net/splweb/spl/like.php?user_id=' +logIn_user_id+'&amp;business_id='+likeBusinessId)<span class="hljs-comment">;</span>

                //alert('http://abc.net/splweb/spl/like.php?user_id=' +logIn_user_id+'&amp;business_id='+likeBusinessId)<span class="hljs-comment">;</span>

                 xhr.send()<span class="hljs-comment">;</span>

                xhr.onload = function() {

                    var likeStatus = JSON.parse(this.responseText)<span class="hljs-comment">;</span>
                    var msgLikeStatus = likeStatus[0].msg<span class="hljs-comment">;</span>
                    var likedStatus = likeStatus[0].status<span class="hljs-comment">;</span>
                    var like_count = likeStatus[0].count<span class="hljs-comment">;</span>


                    if(likedStatus == 0){
                         imgLikeDesc.image = 'appImages/likeUn.png'<span class="hljs-comment">;</span>
                           mainViewMyLights.show()<span class="hljs-comment">;</span>
                           myLightsScrollMenu.show()<span class="hljs-comment">;</span>
                           Ti.API.info(chooseFav)<span class="hljs-comment">;</span>
                           mainTableViewCitylights.hide()<span class="hljs-comment">;</span>
                           lblBusinessDescription.hide()<span class="hljs-comment">;</span>
                           imgLikeDesc.hide()<span class="hljs-comment">;</span>
                           lblBusinessNameDesc.hide()<span class="hljs-comment">;</span>
                           subTableViewCitylights.hide()<span class="hljs-comment">;</span>
                           viewCitySubMenu.hide()<span class="hljs-comment">;</span>
                    }
                    else if (likedStatus == 1){
                    imgLikeDesc.image = 'appImages/like.png'<span class="hljs-comment">;</span>

                       mainViewMyLights.show()<span class="hljs-comment">;</span>
                       myLightsScrollMenu.show()<span class="hljs-comment">;</span>
                       Ti.API.info(chooseFav)<span class="hljs-comment">;</span>
                       mainTableViewCitylights.hide()<span class="hljs-comment">;</span>
                       lblBusinessDescription.hide()<span class="hljs-comment">;</span>
                       imgLikeDesc.hide()<span class="hljs-comment">;</span>
                       lblBusinessNameDesc.hide()<span class="hljs-comment">;</span>
                       subTableViewCitylights.hide()<span class="hljs-comment">;</span>
                       viewCitySubMenu.hide()<span class="hljs-comment">;</span>
                                }

                 else{

                    var confirmDial= Titanium.UI.createAlertDialog({
                                        title: 'Confirmation',
                                        message: 'Are you sure to purchse next 3 businesses for $.99?',
                                        buttonNames: ['No', 'Yes'],
                                        cancel : 0,
                                    })<span class="hljs-comment">; </span>
                                    confirmDial.show()<span class="hljs-comment">;</span>
                                 confirmDial.addEventListener('click',function(e){

                                     if(e.index == 1){

                                           in_app_purchase()<span class="hljs-comment">;</span>


                                     }
                                     else{

                                     }

                                 })<span class="hljs-comment">; </span>

                 }

                }<span class="hljs-comment">;</span>

        }

        else{


         for(i = 0<span class="hljs-comment">;i&lt;imageLikeCity.length; i++){</span>
         imageLikeCity[i].hide()<span class="hljs-comment">;</span>
         }


        var url = 'http://abc.net/splweb/spl/like_status.php?user_id='<span class="hljs-comment">;</span>
        var data = logIn_user_id + '&amp;business_id=' + likeBusinessId<span class="hljs-comment">;</span>
        var furl = url + data<span class="hljs-comment">;</span>
        //alert(furl)<span class="hljs-comment">;</span>
      var xhr = Titanium.Network.createHTTPClient()<span class="hljs-comment">;</span>

                xhr.open('GET', furl)<span class="hljs-comment">;</span>

                xhr.send()<span class="hljs-comment">;</span>

                xhr.onload = function() {

                    var likesStatus = JSON.parse(this.responseText)<span class="hljs-comment">;</span>
                    var msgLikeStatus = likesStatus[0].msg<span class="hljs-comment">;</span>
                    var likedStatus = likesStatus[0].status<span class="hljs-comment">;</span>

                    if(likedStatus == 0){
                         imgLikeDesc.image = 'appImages/likeUn.png'<span class="hljs-comment">;</span>

                    }
                    else{
                         imgLikeDesc.image = 'appImages/like.png'<span class="hljs-comment">;</span>

                    }

                }<span class="hljs-comment">;</span>


 var xhr = Titanium.Network.createHTTPClient()<span class="hljs-comment">;</span>


 var url = 'http://abc.net/spl/description.php?q='<span class="hljs-comment">;</span>

 var furl = url+q<span class="hljs-comment">;</span>


 xhr.open('GET', furl)<span class="hljs-comment">;</span>
 xhr.send()<span class="hljs-comment">;</span>

 xhr.onload = function() {

     Ti.API.info(this.responseText)<span class="hljs-comment">;</span>

      var jsonObject = JSON.parse(this.responseText)<span class="hljs-comment">;</span>

      for ( i = 0<span class="hljs-comment">; i &lt; jsonObject.length; i++) {</span>

         var name = jsonObject[i].business_name<span class="hljs-comment">;</span>
         var desc = jsonObject[i].description<span class="hljs-comment">;</span>

         }

         lblBusinessNameDesc.text = name<span class="hljs-comment">;</span>
         lblBusinessDescription.text = desc<span class="hljs-comment">;</span>

          scrolldescription.show()<span class="hljs-comment">;</span>
         lblBusinessNameDesc.show()<span class="hljs-comment">;</span>
 }<span class="hljs-comment">;</span>


        viewCitySubMenu.hide()<span class="hljs-comment">; </span>


        imgLikeDesc.show()<span class="hljs-comment">;</span>
        slider_right.show()<span class="hljs-comment">;</span>
        cityBusinessMenu.show()<span class="hljs-comment">;</span>
       scrollCityBusinessMenu.show()<span class="hljs-comment">;</span>
       menuPointer.show()<span class="hljs-comment">;</span>
        mainTableViewCitylights.hide()<span class="hljs-comment">;</span>
   }


        })<span class="hljs-comment">; </span>


        }

       //idString.length = 0<span class="hljs-comment">; </span>

    mainTableViewCitylights.data = tableDataBusinesses<span class="hljs-comment">;</span>


         winCityLights.add(mainTableViewCitylights)<span class="hljs-comment">;</span>
        mainTableViewCitylights.show()<span class="hljs-comment">;</span>

}<span class="hljs-comment">;          </span>



})<span class="hljs-comment">;</span>
</code></pre><p>Kindly take a look and find where is something wrong ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 12th 2013, 3:55:33 am">November 12th 2013</span>
								by <span class='authorname'>Muhammad Burhan</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-271465">
				
						<section>
							<p>I get the same error when resuming my App a couple of times (i.e. pressing the Home button and then resuming). I found that it occurs (in my case) when the App try to show an ActivityIndicator (that was created once as a child of app.window and used with show&#x2F;hide here and there). If I take it off, the crash does not occur.<br>Hope this is useful to  you.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 19th 2013, 5:13:03 am">November 19th 2013</span>
								by <span class='authorname'>giorgio di falco</span><br>
								<a class="icon-bg icon-link" href="question/159323/ios7-crashing-issue.html#answer-271465" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I was wrong: the problem was not in the ActivityIndicator, but in the fact that I added <strong>twice</strong> the same view to a window.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2013, 4:37:48 am">November 20th 2013</span>
											by <span class='authorname'>giorgio di falco</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks For your reply giorgio di falco. Tried the both scenarios but still issue is there. Is there any other way to tackle this ??</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 29th 2013, 11:21:18 am">November 29th 2013</span>
											by <span class='authorname'>Muhammad Burhan</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-271916">
				
						<section>
							<p>I can only say that in my case the error appeared as caused by an element (the activity indicator)  while it was really responsibility of another element (a normal view). I think that when adding twice the same view to a window, the system then &quot;garbages&quot; its internal arrays with a result that is not apparently related to the originating cause. You might therefore search for a similar situation (double add) anywhere in your program, because the effect could be far from its cause.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 29th 2013, 11:47:43 am">November 29th 2013</span>
								by <span class='authorname'>giorgio di falco</span><br>
								<a class="icon-bg icon-link" href="question/159323/ios7-crashing-issue.html#answer-271916" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Well. After All I have the Issue. It was because of Admob :( I don&#39;t know why it was so. It was working very well on iOS6 but got crashed in  iOS7. I have commented the code for iOS7 and the issue resolved :). Thanks For Your Support  giorgio di falco.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 9th 2013, 9:04:54 am">December 9th 2013</span>
											by <span class='authorname'>Muhammad Burhan</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
