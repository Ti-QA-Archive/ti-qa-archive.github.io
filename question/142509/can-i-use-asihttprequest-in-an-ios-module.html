<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Can I use ASIHTTPRequest in an ios module » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Can I use ASIHTTPRequest in an ios module</h1>
		</header>
		<section>
			<p>Hi, </p>
<p>I&#39;m trying to build a module which is pulling in an existing xcode project. For it need to use (or would certainly like to) ASIHTTPRequest.</p>
<p>However as soon as I pull in the files I can no longer run the module. </p>
<p>Just to clarify, </p>
<ul>
<li>I create a new module and use &quot;titanium run&quot; to build and run the project in the simulator and it works fine.</li>
<li>If I then add all the frameworks (including libz.dylib) that I require (through Link Binary with Libraries) and add the frameworks to module.xconfig I can still run successfully. </li>
<li>If I then add the ASIHTTPRequest files to my project (without referencing them at all) it still builds in xcode and with build.py, but when I try to run the project on simulator or phone it fails with the following message in titanium:</li>
</ul>
<pre><code class="hljs">[ERROR] clang: error: linker command failed with exit code 1 (<span class="hljs-operator"><span class="hljs-keyword">use</span> -v <span class="hljs-keyword">to</span> see invocation)
[<span class="hljs-keyword">ERROR</span>]
[<span class="hljs-keyword">ERROR</span>] <span class="hljs-keyword">Error</span>: Traceback (most recent <span class="hljs-keyword">call</span> <span class="hljs-keyword">last</span>):
[DEBUG] <span class="hljs-keyword">File</span> <span class="hljs-string">"/Users/me/Library/Application Support/Titanium/mobilesdk/osx/2.1.2.GA/iphone/builder.py"</span>, line <span class="hljs-number">1311</span>, <span class="hljs-keyword">in</span> <span class="hljs-keyword">main</span>
[DEBUG] execute_xcode(<span class="hljs-string">"iphonesimulator%s"</span> % link_version,[<span class="hljs-string">"GCC_PREPROCESSOR_DEFINITIONS=__LOG__ID__=%s DEPLOYTYPE=development TI_DEVELOPMENT=1 DEBUG=1 TI_VERSION=%s %s %s"</span> % (log_id,sdk_ver
sion,debugstr,kroll_coverage)],<span class="hljs-literal">False</span>)
[DEBUG] <span class="hljs-keyword">File</span> <span class="hljs-string">"/Users/me/Library/Application Support/Titanium/mobilesdk/osx/2.1.2.GA/iphone/builder.py"</span>, line <span class="hljs-number">1217</span>, <span class="hljs-keyword">in</span> execute_xcode
[DEBUG] <span class="hljs-keyword">output</span> = run.run(args,<span class="hljs-literal">False</span>,<span class="hljs-literal">False</span>,o)
[DEBUG] <span class="hljs-keyword">File</span> <span class="hljs-string">"/Users/me/Library/Application Support/Titanium/mobilesdk/osx/2.1.2.GA/iphone/run.py"</span>, line <span class="hljs-number">41</span>, <span class="hljs-keyword">in</span> run
[DEBUG] <span class="hljs-keyword">sys</span>.<span class="hljs-keyword">exit</span>(rc)
[DEBUG] SystemExit: <span class="hljs-number">65</span>
[<span class="hljs-keyword">ERROR</span>] <span class="hljs-keyword">Build</span> <span class="hljs-keyword">Failed</span>. See: /<span class="hljs-keyword">var</span>/folders/t2/g3d6_1p97_j75q139nky34t00000gn/<span class="hljs-keyword">T</span>/mxXMilxti/xxmodule/<span class="hljs-keyword">build</span>/iphone/<span class="hljs-keyword">build</span>/<span class="hljs-keyword">build</span>.<span class="hljs-keyword">log</span></span>
</code></pre><p>I added a &quot;print args&quot; to builder.py to see what was happening in execute_xcode:</p>
<pre><code class="hljs">[DEBUG] args
[<span class="hljs-string">'xcodebuild'</span>, <span class="hljs-string">'-target'</span>, <span class="hljs-string">u'xxmodule'</span>, <span class="hljs-string">'-configuration'</span>, <span class="hljs-string">'Debug'</span>, <span class="hljs-string">'-sdk'</span>, <span class="hljs-string">u'iphonesimulator5.1'</span>, <span class="hljs-string">u'GCC_PREPROCESSOR_DEFINITIONS=__LOG__ID__=6a50690b-fae6-403c-af23-00fda8a98811 DEPLOYTYPE=d
evelopment TI_DEVELOPMENT=1 DEBUG=1 TI_VERSION=2.1.2.GA  '</span>, <span class="hljs-string">'IPHONEOS_DEPLOYMENT_TARGET=4.0'</span>, <span class="hljs-string">'TARGETED_DEVICE_FAMILY=1'</span>]
</code></pre><p>Doesn&#39;t mean much to me I&#39;m afaid</p>
<ul>
<li><p>If I remove the ASIHTTPRequest files it works again.</p>
</li>
<li><p>I&#39;m not sure if I need to add libz to module.config and if so how would I do that? I tried </p>
<pre><code class="hljs"><span class="hljs-constant">OTHER_LDFLAGS</span>=<span class="hljs-variable">$(inherited)</span> -framework libz
</code></pre><p>but that caused the same error as above.</p>
</li>
</ul>
<p>I&#39;m pretty new to native ios and xcode development, so maybe I&#39;m missing something obvious. Any pointers greatly appreciated!<br>Thanks,<br>Bill</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 21st 2012, 9:32:17 am">September 21st 2012</span>
				by <span class='authorname'>Billy Cahill</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>asihttprequest</span></li>
					
						<li><span class='tagname'>linker error</span></li>
					
						<li><span class='tagname'>module</span></li>
					
						<li><span class='tagname'>titanium-module</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hmmm… would it be because ASIHTTPRequest is already part of Titanium and it&#39;s causing a clash?</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 21st 2012, 9:33:37 am">September 21st 2012</span>
								by <span class='authorname'>Billy Cahill</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p><code>[ERROR] clang: error: linker command failed with exit code 1 (use -v to see invocation)</code></p>
<p>Go back further in your log to see where it failed to link and which symbols are missing</p>
<p>Yes, it is possible that you cannot add a newer version of the ASIHTTPREquest library because an older one already exists in the end project.  Might be able to do some name changing to work around that though.</p>
<p>Or, if you are taking this much time, possibly consider putting that time towards updating the ASIHC library in Titanium itself and submitting the update to the project on github.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 21st 2012, 9:47:42 am">September 21st 2012</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;ve had this before it is because Ti SDK is using the ASIHttpRequest library already (a heavily modified one).<br>Why don&#39;t you try just adding the header file <code>ASIHTTPRequest.h</code> from the Ti Mobile SDK to your Xcode project. Use the methods out of there?  It should compile OK then.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 21st 2012, 3:45:58 pm">September 21st 2012</span>
								by <span class='authorname'>Byron Davies</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thanks for the comments. I tried just importing the ASIHTTPRequest.h without adding any of the files locally, but I still get the same duplicate symbol messages. Commenting out this line it&#39;s fine again. </p>
<pre><code class="hljs"><span class="hljs-id">#import</span> <span class="hljs-string">"ASIHTTPRequest.h"</span>
</code></pre><p>The module itself compiles and builds. It&#39;s just when I try to compile the module into a project that the problems arise.</p>
<p>I&#39;m going to try another approach although I&#39;m still curious what I&#39;m doing wrong. I&#39;m sure it&#39;s something really simple.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 24th 2012, 7:25:53 am">September 24th 2012</span>
								by <span class='authorname'>Billy Cahill</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-247790">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi Billy, ASIHTTP classes are already used by titanium and do not add them again, as it will be duplicity of symbols. and thats why you are getting this error.</p>
<pre><code class="hljs">you can verify <span class="hljs-keyword">by</span> opening this <span class="hljs-built_in">file</span>, <span class="hljs-keyword">at</span> <span class="hljs-operator">the</span> <span class="hljs-function"><span class="hljs-keyword">end</span> <span class="hljs-title">you</span> <span class="hljs-title">your</span> <span class="hljs-title">log</span> <span class="hljs-title">message</span>.</span>
/var/<span class="hljs-built_in">folders</span>/t2/g3d6_1p97_j75q139nky34t00000gn/T/mxXMilxti/xxmodule/build/iphone/build/build.<span class="hljs-built_in">log</span>
</code></pre><p><strong>Solution</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> you need them <span class="hljs-operator">the</span> just go <span class="hljs-built_in">to</span> your header search path <span class="hljs-operator">and</span> <span class="hljs-operator">in</span> X-Code target your module.
<span class="hljs-operator">and</span> <span class="hljs-built_in">put</span> <span class="hljs-built_in">tick</span> mark <span class="hljs-keyword">for</span> titanium SDK <span class="hljs-built_in">directories</span>, already there <span class="hljs-operator">with</span> Variable name.
</code></pre><p><strong>In Header Search Path, you have to double click and the tick mark the SDK</strong><br>you will be able to use the ASIHTTP.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 21st 2012, 4:02:40 pm">September 21st 2012</span>
								by <span class='authorname'>Ashish Nigam</span><br>
								<a class="icon-bg icon-link" href="question/142509/can-i-use-asihttprequest-in-an-ios-module#answer-247790" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>do not add external ASIHTTP files, As already there and titanium uses those.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 4:03:23 pm">September 21st 2012</span>
											by <span class='authorname'>Ashish Nigam</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks Ashish, I&#39;m not entirely sure what you mean. My header search path already includes the Titanium include paths. I assume this means I should be able to reference the ASIHTTPRequest.h… hmmm I notice it&#39;s in the ASI folder of the include path.<br>And, sure enough this seems to work:</p>
<pre><code class="hljs"><span class="hljs-preprocessor">#import <span class="hljs-title">&lt;ASI/ASIHTTPRequest.h&gt;</span></span>
</code></pre><p>I&#39;ll mark this as best answer. Thanks very much Byron, and Stephen also.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 24th 2012, 7:36:29 am">September 24th 2012</span>
											by <span class='authorname'>Billy Cahill</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I Billy, thanks for marking my answer as best one, and you got it right, i was trying to explain the same thing.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 24th 2012, 11:47:17 am">September 24th 2012</span>
											by <span class='authorname'>Ashish Nigam</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>#import &lt;ASI&#x2F;ASIHTTPRequest.h&gt;</p>
<p>Working….</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 3rd 2014, 10:14:44 am">May 3rd 2014</span>
											by <span class='authorname'>Jayesh  Joshi</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-274034">
				
						<section>
							<p>importing the header in xcode works fine using</p>
<pre><code class="hljs"><span class="hljs-preprocessor">#import <span class="hljs-title">&lt;ASI/ASIHTTPRequest.h&gt;</span></span>
</code></pre><p>xcode is compiling fine. ti module packaging is fine.</p>
<p>but when i&#39;m using this module in a ti mobile project i get the following error on compiling:</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">TRACE</span>] :  Undefined symbols for architecture i386:
<span class="hljs-list">[<span class="hljs-keyword">TRACE</span>] :    <span class="hljs-string">"_OBJC_CLASS_$_ASIHTTPRequest"</span>, referenced from:
<span class="hljs-list">[<span class="hljs-keyword">TRACE</span>] :        objc-class-ref in libcom.xyz.xyz.a<span class="hljs-list">(<span class="hljs-keyword">ComXYZDownloaderModule.o</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">TRACE</span>] :  ld: symbol<span class="hljs-list">(<span class="hljs-keyword">s</span>)</span> not found for architecture i386
<span class="hljs-list">[<span class="hljs-keyword">TRACE</span>] :  clang: error: linker command failed with exit code <span class="hljs-number">1</span> <span class="hljs-list">(<span class="hljs-keyword">use</span> -v to see invocation)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  ** BUILD FAILED **

<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  The following build commands failed:
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :      Ld build/Debug-iphonesimulator/test.app/test normal i386
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  <span class="hljs-list">(<span class="hljs-keyword">1</span> failure)</span></span></span></span></span></span></span></span></span></span>
</code></pre><p>any ideas?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 17th 2014, 8:47:16 am">January 17th 2014</span>
								by <span class='authorname'>Jens F.</span><br>
								<a class="icon-bg icon-link" href="question/142509/can-i-use-asihttprequest-in-an-ios-module#answer-274034" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
