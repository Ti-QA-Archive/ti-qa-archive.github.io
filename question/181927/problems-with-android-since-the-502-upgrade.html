<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Problems with Android since the 5.0.2 upgrade » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Problems with Android since the 5.0.2 upgrade</h1>
		</header>
		<section>
			<p>Hello.</p>
<p>We released an app last summer (both ios and android) and it&#39;s been working just fine.<br>It&#39;s a quiz-app which is mostly just a client which talks to a server etc. Nothing too interesting or unusual, again it&#39;s been working just fine.</p>
<p>A month ago we did some minor updates (changing a hardcoded IP-adress to a domain-name, and adding a banner in the beginning) and everything worked fine. That was until the client (it was an ordered job) started to complain that the &quot;couldnt log in&quot; anymore.</p>
<p>I downloaded the app myself and yes, it froze on the login-screen and crashed after a while.</p>
<p>I launch titanium and build the app again (last build was 18th mars and it worked just fine on my phone back then) and I seem to have the same problem…. </p>
<p>The log keeps pumping out &quot;not enough memory&quot;-messages and after a while it crashes.</p>
<p>This seems weird since first of all we do have a lot of views but they don&#39;t contain much. I tried disabling loading profile images of the player and his&#x2F;her friends etc, but still the same thing.</p>
<p>I managed to half go-around the problem by hiding views that are not in use and adding them only when the user needs to see them etc, but it has little effect. If the user keeps going back and forth between for example the welcome-screen and the highscore-list the app WILL crash eventually.</p>
<p>My test-device is a Sony Xperia Z3 which should have way enough memory to run this app. I also tested on Samsung Galaxy S4 and it behave the same way. </p>
<p>The thing is, since the app RAN JUST FINE before I find it hard that the &quot;running out of memory&quot;-problem is actually about the app running out of memory. Something has changed.</p>
<hr>
<p>I then started to download the latest Android SDKs but I can not get the app to run with anything higher than &quot;19&quot;.</p>
<p>21 just keeps crashing after about 4-5 seconds after the app started, I&#39;ve commented out everything to find out where it crashes but it doesn&#39;t seem to matter. I can go into the mainview and then do nothing more and 4-5 seconds later it says &quot;unfornately THE APP has crashed blabla&quot;.</p>
<p>One interesting thing with this is that the app actually DO continue to work in the background for a while after the &quot;unfornately&quot;-message has been popped.</p>
<p>With SDK 22 I can&#39;t even build, I get a &quot;&lt;declare-stylable android:preserveIconSpacing was not found&quot; or similar. I&#39;ve googled this error message and found like 2-3 articles that didn&#39;t help me solve my problem (both unrelated to Titanium Appcelerator). Am I really the only one who gets this error message or is SDK 22 simply not supported by Titanium? Anyway ….</p>
<p>I&#39;m in kind of deep trouble here since the client wants the app out asap and I feel like a complete fool not kknowing what&#39;s wrong… any help will be deeply appreciated.</p>
<p>I&#39;m using Ti SDK 3.5.1 GA, but I also tried lower versions with the same result.</p>
<p>Here&#39;s an example of one of the many memory-related error-messages I get:<br>art: Clamp target GC heap from 205MB to 192MB<br>[INFO] :   art: Alloc concurrent mark sweep GC freed 4(128B) AllocSpace objects, 0(0B) LOS objects, 1% free, 189MB&#x2F;192MB, paused 662us total 28.508ms<br>[ERROR] :  art: Throwing OutOfMemoryError &quot;Failed to allocate a 6046092 byte allocation with 2138260 free bytes and 2MB until OOM&quot;</p>
<p>And here&#39;s the exact message what happens when I try to build with SDK 22:</p>
<p>&quot;ERROR: In &lt;declare-styleable&gt; MenuView, unable to find attribute android:preserveIconSpacing&quot;</p>
<p>Best Regards: Albin - A super-frustrated TI-developer.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 9th 2015, 7:51:39 am">April 9th 2015</span>
				by <span class='authorname'>Albin Larsson</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>android 5.0.2</span></li>
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>declare-stylable</span></li>
					
						<li><span class='tagname'>memory</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>So I got the &quot;nightly build&quot; of Titanium SDK 4.0 BETA2.<br>Now I can build with Android SDK 22, but it behaves the exact same way as with SDK 21. It crashes after a few seconds in the app …. FML</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 9th 2015, 8:44:16 am">April 9th 2015</span>
								by <span class='authorname'>Albin Larsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>More progress:</p>
<p>The backgroundImage-property is broken. After I removed all backgroundImage-properties on my views I no longer get error-messages. (from this thread: http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;181515&#x2F;art-throwing-outofmemoryerror-failed-to-allocate-a-2657292-byte-allocation-with-872626-free-bytes-and-852kb-until-oom )</p>
<p>My &#39;crashes after a few seconds on startup&#39;-problem is caused by Google Analytics. But AFAIK this is still &quot;version 1.0&quot; …. Anyone knows anythings about this?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 9th 2015, 11:55:36 am">April 9th 2015</span>
								by <span class='authorname'>Albin Larsson</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-286965">
				
						<section>
							<p>I solved all my problems by upgrading Google Analytics, downgrading Facebook, and removing all backgroundImage-properties. I&#39;m running Android 5.0.2, with Android SDK 22 and Titanium SDK 4.1.xxxxxx.</p>
<p>I hope this will help someone in the future with similiar problems.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 10th 2015, 6:05:09 am">April 10th 2015</span>
								by <span class='authorname'>Albin Larsson</span><br>
								<a class="icon-bg icon-link" href="question/181927/problems-with-android-since-the-502-upgrade#answer-286965" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Albin, sorry the below answer was supposed to be a comment, how are you finding Titanium SDK 4.1?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 24th 2015, 2:23:08 pm">April 24th 2015</span>
											by <span class='authorname'>anx patel</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hello. sorry for a late answer. I got the 4.1 build from http:&#x2F;&#x2F;builds.appcelerator.com.s3.amazonaws.com&#x2F;index.html and i must say i find it pretty stable, however as stated in my answer what really solved my problems was removing the background-image attribute.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 20th 2015, 5:28:25 pm">May 20th 2015</span>
											by <span class='authorname'>Albin Larsson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Albin, I encounter the same problems with upgrading to android 5.0.2. Do you mean backgroundImage property? or ( backgroundImage ,backgroundSelectedImage and backgroundDisabledImage)?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 7th 2015, 1:45:31 am">August 7th 2015</span>
											by <span class='authorname'>xizhe zhang</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-287146">
				
						<section>
							<p>Hi Albin, how stable are you finding Titanium SDK 4.1?  It&#39;s a nightly build right?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 23rd 2015, 8:05:57 pm">April 23rd 2015</span>
								by <span class='authorname'>anx patel</span><br>
								<a class="icon-bg icon-link" href="question/181927/problems-with-android-since-the-502-upgrade#answer-287146" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
