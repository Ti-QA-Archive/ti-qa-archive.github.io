<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>oauth adapter for android? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>oauth adapter for android?</h1>
		</header>
		<section>
			<p>Anyone get the oauth adapter thats in the forums working on android?  I get a 404 when I use it in the android emulator, works fine on iOS.</p>
<p>If not, anyone have a quick and dirty way to post to Twitter?  I already have my Twitter keys and everything setup.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 10th 2011, 1:11:00 pm">March 10th 2011</span>
				by <span class='authorname'>Josh Lewis</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>oauth</span></li>
					
						<li><span class='tagname'>twitter</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>what oAuth adapter are you using?</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 11th 2011, 11:16:55 am">March 11th 2011</span>
								by <span class='authorname'>Aaron Saunders</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;m having the exact same issue!</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 18th 2011, 12:33:38 pm">March 18th 2011</span>
								by <span class='authorname'>Joe iEntry</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;m using the latest oauth adapter (rev 4–<a href="http:&#x2F;&#x2F;code.google.com&#x2F;p&#x2F;oauth-adapter&#x2F;source&#x2F;detail?r=4">source</a>), Titan 1.2.2, Android 1.6.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 18th 2011, 12:35:34 pm">March 18th 2011</span>
								by <span class='authorname'>Joe iEntry</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Aaron, using 1.6, latest and greatest.  Works fine in iOS, but not Android.  Its the only issue keeping me from posting to the marketplace.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 18th 2011, 12:38:07 pm">March 18th 2011</span>
								by <span class='authorname'>Josh Lewis</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>7</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>7 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-206546">
				
						<section>
							<p>OAuth Adapter does not work for Android. As a workaround you can check out Ketan&#39;s fork of oauth-adapter below, or check out BirdHouse:</p>
<p><strong>Cross-Platform Support &amp; Up-to-Date:</strong> BirdHouse has been tested on Android with Linux and Mac as well as on iPhone, both using the latest Titanium Mobile SDK (1.6.2). It has been tested by others and is being maintained to fix any issues.</p>
<p><strong>Go <a href="http:&#x2F;&#x2F;github.com&#x2F;jpurcell&#x2F;birdhouse">here for the code</a> and go <a href="https:&#x2F;&#x2F;github.com&#x2F;jpurcell&#x2F;birdhouseapp">here for the test app</a>.</strong></p>
<p><strong>About:</strong> The script can send tweets, retrieve tweets, authenticate, &quot;deauthenticate&quot;, and send custom API calls to Twitter. For sending tweets, a custom UI popup appears. It is designed to work similar to Titanium&#39;s Facebook module.</p>
<p>David Riccitelli&#39;s oauth-adapter doesn&#39;t work on Android, but some have forked it to work, such as Ketan Majmudar (<a href="http:&#x2F;&#x2F;github.com&#x2F;stereoket">go here for his code</a>), I have tried other OAuth scripts as well, but I have been more successful with BirdHouse.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 19th 2011, 6:35:41 pm">April 19th 2011</span>
								by <span class='authorname'>Joe iEntry</span><br>
								<a class="icon-bg icon-link" href="../../question/117053/oauth-adapter-for-android.html#answer-206546" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-204569">
				
						<section>
							<p>####Intro:</p>
<p>It appears many are having the issue of Oauth Adapter not working on Android. It&#39;s not working for me and I have the latest version of Oauth Adapter (r4), Titan 1.2.2, and Android 1.6. Notice the responses on the <a href="http:&#x2F;&#x2F;code.google.com&#x2F;p&#x2F;oauth-adapter&#x2F;wiki&#x2F;UsageManualR4">Usage Manual</a> for Oauth Adapter–there are a ton of comments saying it does not work in Android.</p>
<p>However, in the comments someone claims to have made a patch for it, you can see his specific comments <a href="http:&#x2F;&#x2F;code.google.com&#x2F;u&#x2F;@WBFRR1JWAxBAWAF7&#x2F;updates">here</a> and <a href="http:&#x2F;&#x2F;code.google.com&#x2F;u&#x2F;@VRFeQFdSAxJEXQF4&#x2F;updates">here</a>. This is what he says to do:</p>
<p>####Fixes:</p>
<ol>
<li>It doesn&#39;t work with TitaniumMobile1.5.1. You have to use the version which has https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;commit&#x2F;c84d12e41cedeba00f5fd825ca21fd evalJS() fix.</li>
<li>In auth_adapter.js, you need window.open(); just after window.add(view); so that password confirmation won&#39;t show up behind the dialog after clicking &#39;Allow&#39; link.</li>
<li>In auth_adapter.js, I put some bugs in onerror handlers.</li>
<li>twitter_api.js, init() needs to be fixed to handle async flow properly.</li>
</ol>
<p>Then in a later post after some complaints about it not working he says he&#39;s going to release a new patch with the following additional changes:</p>
<ol>
<li>Titanium.Network doesn&#39;t seem to work in synchronous mode in Android, had to modify the adapter to use callbacks instead of returns.</li>
<li>The number to string conversion for timestamps in client.send() went into float format, so Twitter couldn&#39;t recognize the timestamp. Put in a .toFixed(0) before it was sent.</li>
<li>webView.html does not get populated on Android, so used the work-around posted here: http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;102231&#x2F;android-sees-tiuiwebviewhtml-as-undefined</li>
<li>Had trouble getting the source that was fetched with the work-around to parse in the XML utility, so I used a regex instead.</li>
<li>Als noticed that the regex on Android+Titanium doesn&#39;t seem to populate captures if there&#39;s more than one capture defined.</li>
</ol>
<p>####Patches:<br>This is his first patch: <a href="http:&#x2F;&#x2F;www.exilis.org&#x2F;uploads&#x2F;0001-now-it-runs-on-Android.patch">link</a><br>And this is his second (updated) patch: <a href="http:&#x2F;&#x2F;www.exilis.org&#x2F;uploads&#x2F;0001-interim-fix.patch">link</a></p>
<p>####Conclusion:</p>
<p>His first comment says:</p>
<p>&quot;@maki.mik great catch! hi @ghes, hope this helpes. <a href="http:&#x2F;&#x2F;www.exilis.org&#x2F;uploads&#x2F;0001-now-it-runs-on-Android.patch">http:&#x2F;&#x2F;www.exilis.org&#x2F;uploads&#x2F;0001-now-it-runs-on-Android.patch</a> This is a patch for <a href="https:&#x2F;&#x2F;github.com&#x2F;mogya&#x2F;tm_twitter_api">https:&#x2F;&#x2F;github.com&#x2F;mogya&#x2F;tm_twitter_api</a> .&quot;</p>
<p>I don&#39;t know what he&#39;s saying, and I haven&#39;t attempted to put all this together, but hopefully Josh or someone can put all this together and let us all know how to resolve this issue.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 18th 2011, 1:21:57 pm">March 18th 2011</span>
								by <span class='authorname'>Joe iEntry</span><br>
								<a class="icon-bg icon-link" href="../../question/117053/oauth-adapter-for-android.html#answer-204569" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I used the tm_twitter_api code on github and I still get &quot;This page does not exist!&quot; from Twitter when the UI window opens.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2011, 1:45:17 pm">March 18th 2011</span>
											by <span class='authorname'>Joe iEntry</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-204577">
				
						<section>
							<p>###Solution:</p>
<p>I was able to get this code to work:</p>
<p><a href="https:&#x2F;&#x2F;github.com&#x2F;jeremyspouken&#x2F;Titanium-OAuth-Client?utm_source=twitterfeed&amp;utm_medium=twitter">https:&#x2F;&#x2F;github.com&#x2F;jeremyspouken&#x2F;Titanium-OAuth-Client?utm_source=twitterfeed&amp;utm_medium=twitter</a></p>
<p>###Modification:</p>
<p>Note that I had to modify line 74 of titanium_oauth.js from: </p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (e.<span class="hljs-keyword">source</span>.html != <span class="hljs-string">'undefined'</span>) {
</code></pre><p>to</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (typeof(e.<span class="hljs-keyword">source</span>.html) != <span class="hljs-string">'undefined'</span> &amp;&amp; e.<span class="hljs-keyword">source</span>.html!=<span class="hljs-keyword">null</span>) {
</code></pre><p>Because of this popup error:</p>
<pre><code class="hljs"><span class="hljs-constant">Wrapped</span> java.lang.<span class="hljs-constant">ClassCastException</span>: org.appcelerator.kroll.<span class="hljs-constant">KrollProxy</span><span class="hljs-variable">$1</span> (<span class="hljs-symbol">file:</span>/<span class="hljs-regexp">//android</span>_asset/<span class="hljs-constant">Resources</span>/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">titanium_oauth</span>.<span class="hljs-title">js</span><span class="hljs-comment">#74)</span></span>
</code></pre><p>Which is not very helpful, but this is in the TRACE:</p>
<pre><code class="hljs">[<span class="hljs-constant">TRACE</span>] <span class="hljs-constant">E</span>/<span class="hljs-constant">TiJSError</span>( <span class="hljs-number">220</span>): (kroll<span class="hljs-variable">$3</span>: <span class="hljs-symbol">app:</span>/<span class="hljs-regexp">/views/link</span>.js) [<span class="hljs-number">93</span>,<span class="hljs-number">57718</span>] ----- <span class="hljs-constant">Titanium</span> <span class="hljs-constant">Javascript</span> <span class="hljs-constant">Runtime</span> <span class="hljs-constant">Error</span> -----
[<span class="hljs-constant">TRACE</span>] <span class="hljs-constant">E</span>/<span class="hljs-constant">TiJSError</span>( <span class="hljs-number">220</span>): (kroll<span class="hljs-variable">$3</span>: <span class="hljs-symbol">app:</span>/<span class="hljs-regexp">/views/link</span>.js) [<span class="hljs-number">2</span>,<span class="hljs-number">57720</span>] - <span class="hljs-constant">In</span> <span class="hljs-symbol">file:</span>/<span class="hljs-regexp">//android</span>_asset/<span class="hljs-constant">Resources</span>/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">titanium_oauth</span>.<span class="hljs-title">js</span>:74,0</span>
[<span class="hljs-constant">TRACE</span>] <span class="hljs-constant">E</span>/<span class="hljs-constant">TiJSError</span>( <span class="hljs-number">220</span>): (kroll<span class="hljs-variable">$3</span>: <span class="hljs-symbol">app:</span>/<span class="hljs-regexp">/views/link</span>.js) [<span class="hljs-number">16</span>,<span class="hljs-number">57736</span>] - <span class="hljs-constant">Message</span>: <span class="hljs-constant">Wrapped</span> java.lang.<span class="hljs-constant">ClassCastException</span>: org.appcelerator.kroll.<span class="hljs-constant">KrollProxy</span><span class="hljs-variable">$1</span> (<span class="hljs-symbol">file:</span>/<span class="hljs-regexp">//android</span>_asset/<span class="hljs-constant">Resources</span>/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">titanium_oauth</span>.<span class="hljs-title">js</span><span class="hljs-comment">#74)</span></span>
[<span class="hljs-constant">TRACE</span>] <span class="hljs-constant">E</span>/<span class="hljs-constant">TiJSError</span>( <span class="hljs-number">220</span>): (kroll<span class="hljs-variable">$3</span>: <span class="hljs-symbol">app:</span>/<span class="hljs-regexp">/views/link</span>.js) [<span class="hljs-number">2</span>,<span class="hljs-number">57738</span>] - <span class="hljs-constant">Source</span>: null
</code></pre><p>###Issues:</p>
<p>I only tried authenticating, and it appeared to work. The WebView that opens up doesn&#39;t automatically close after authenticating, but that can be tweaked. I haven&#39;t done thorough testing, so I can&#39;t confirm that anything else works. Please comment if you can confirm.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 18th 2011, 2:35:57 pm">March 18th 2011</span>
								by <span class='authorname'>Joe iEntry</span><br>
								<a class="icon-bg icon-link" href="../../question/117053/oauth-adapter-for-android.html#answer-204577" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>So far no luck in getting it to post status updates.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2011, 2:51:34 pm">March 18th 2011</span>
											by <span class='authorname'>Joe iEntry</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The issue I&#39;m having is that the titanium_oauth.js is looking for an HTML tag of id &quot;oauth_pin&quot; which doesn&#39;t exist in the DOM, so that&#39;s why there&#39;s the e.source.html undefined&#x2F;null error. I&#39;m still working on this.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2011, 5:29:02 pm">March 18th 2011</span>
											by <span class='authorname'>Joe iEntry</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yea, I gave up on Jeremy&#39;s script</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 22nd 2011, 3:21:48 pm">March 22nd 2011</span>
											by <span class='authorname'>Joe iEntry</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-204742">
				
						<section>
							<p>It looks like Ketan Majmudar is working on fixing the Oauth Adapter for Android, see:</p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;103071&#x2F;cant-get-twitter-working-on-android#204736">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;103071&#x2F;cant-get-twitter-working-on-android#204736</a></p>
<p>He has a version right now posted at:</p>
<p><a href="https:&#x2F;&#x2F;github.com&#x2F;stereoket&#x2F;oauth-adapter">https:&#x2F;&#x2F;github.com&#x2F;stereoket&#x2F;oauth-adapter</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 21st 2011, 12:43:20 pm">March 21st 2011</span>
								by <span class='authorname'>Joe iEntry</span><br>
								<a class="icon-bg icon-link" href="../../question/117053/oauth-adapter-for-android.html#answer-204742" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I have my script working on android - webview closes down on android and iOS. The odd thing is that it doesn&#39;t work as expected in the emulator, but functions as expected on a device.  not sure what the reasoning is behind this, it looks like api.twitter.com and the HTTP_Network_Client are causing an emulator bug.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 24th 2011, 8:47:35 am">March 24th 2011</span>
											by <span class='authorname'>Ketan Majmudar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ketan, so you&#39;re saying it works fine on the device now?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 28th 2011, 11:49:37 am">March 28th 2011</span>
											by <span class='authorname'>Josh Lewis</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Josh, I have it working on device and emulator now it seems, one more local test and I will see if there are any diffs and will push that to the repo.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 28th 2011, 12:35:51 pm">March 28th 2011</span>
											by <span class='authorname'>Ketan Majmudar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I get an error in this file @ var xmlDocument = Ti.XML.parseString(e.source.html);</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 20th 2011, 12:05:00 am">September 20th 2011</span>
											by <span class='authorname'>Rafael de la Sierra</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-205879">
				
						<section>
							<p>Delete me please</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 8th 2011, 9:23:45 am">April 8th 2011</span>
								by <span class='authorname'>Guillaume LA</span><br>
								<a class="icon-bg icon-link" href="../../question/117053/oauth-adapter-for-android.html#answer-205879" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-205883">
				
						<section>
							<p>Hi !</p>
<p>README says you need to include sha1.js and oauth.js but I can&#39;t find these files. And what about the patches of Joe iEntry : have they been committed to github ?</p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 8th 2011, 9:55:16 am">April 8th 2011</span>
								by <span class='authorname'>Guillaume LA</span><br>
								<a class="icon-bg icon-link" href="../../question/117053/oauth-adapter-for-android.html#answer-205883" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-206101">
				
						<section>
							<p>Has anyone figured out this &quot;This page does not exist!&quot; error yet. I am using 1.6.1</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 12th 2011, 6:02:27 pm">April 12th 2011</span>
								by <span class='authorname'>David Q</span><br>
								<a class="icon-bg icon-link" href="../../question/117053/oauth-adapter-for-android.html#answer-206101" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
