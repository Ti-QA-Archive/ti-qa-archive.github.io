<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Sending device info from Android/iOS in a WebView Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Sending device info from Android/iOS in a WebView</h1>
		</header>
		<section>
			<p>Hello,</p>
<p>I&#39;m currently developing a webapp in Titanium for Android and iOS using a webview.<br>I basically link the webview to a particular page on my wordpress website.</p>
<p>I&#39;m trying to make it so only titanium apps have access to this page. At first this worked by customizing the user agent:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> webview</span> = $.webview;

<span class="hljs-variable"><span class="hljs-keyword">var</span> newUserAgent</span> =  webview.userAgent + <span class="hljs-string">"!"</span> + <span class="hljs-string">"APP"</span> + <span class="hljs-string">"|IP: "</span> + Titanium.Platform.address + <span class="hljs-string">"|Mac: "</span> + Titanium.Platform.macaddress + <span class="hljs-string">"|UUID: "</span> + Titanium.Platform.id + <span class="hljs-string">"|OS: "</span> + osname;
</code></pre><p>On the server end I basically split the user agent from the ! and take the second half and split that up with the &quot;|&quot; delegate to get the info I want from the device.</p>
<p>Also to restrict access, I check if &quot;APP&quot; is in that string when I split it up, and if not I redirect them to a page that says &quot;Only Titanium can access this page sorry&quot;.</p>
<p>This works fine until I try it on iOS because on iOS I need to use a custom module someone made (tv.harukaze.ti.webviewuseragent) however on some iOS devices titanium can&#39;t find the module for some reason. There&#39;s also a problem when trying to login to facebook when using a custom user agent on iOS, kept getting a &quot;Frame load interrupted&quot; error. Removing the custom user agent string I appended fixes that.<br>There&#39;s also that issue with even finding the module on iOS devices so I don&#39;t think I should be customizing the user-agent at all.</p>
<p>I thought about sending this information just through the URL and access it using $_GET but then anyone would be able to do this and access the app on their desktop browser for example just from editing the URL, so that&#39;s not good for security.</p>
<p>If I just send the un-modified user agent, it sends the exact same user agent as if it were a mobile browser, it doesn&#39;t send anything specific to titanium.</p>
<p>TL;DR;  How do I both send my device info and make sure only titanium apps can access that part of my website? Is it possible to send some sort of custom header before loading the webview? I couldn&#39;t find a function in the docs that could do this with a webview.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 21st 2015, 5:45:42 pm">January 21st 2015</span>
				by <span class='authorname'>Res Trund</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>header</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>user-agent</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-285326">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>You could set a custom header or you set a cookie inside the app. For both you need a module.   Look at http:&#x2F;&#x2F;gitt.io&#x2F;search?q=WebView</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 21st 2015, 7:31:02 pm">January 21st 2015</span>
								by <span class='authorname'>Christopher Koye</span><br>
								<a class="icon-bg icon-link" href="question/180372/sending-device-info-from-androidios-in-a-webview#answer-285326" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>What custom header module is there? I couldn&#39;t find one from the link unless I looked wrong.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2015, 10:42:27 pm">January 21st 2015</span>
											by <span class='authorname'>Tens Pardun</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><strong>iOS:</strong></p>
<p>NappUI - does much more than custom headers (64bit): <a href="https:&#x2F;&#x2F;github.com&#x2F;viezel&#x2F;NappUI">https:&#x2F;&#x2F;github.com&#x2F;viezel&#x2F;NappUI</a></p>
<p>agentswitcher : <a href="http:&#x2F;&#x2F;gitt.io&#x2F;component&#x2F;com.amido.agentswitcher">http:&#x2F;&#x2F;gitt.io&#x2F;component&#x2F;com.amido.agentswitcher</a></p>
<p>TiWebview: <a href="http:&#x2F;&#x2F;gitt.io&#x2F;component&#x2F;com.mobmaxime.TiWebview">http:&#x2F;&#x2F;gitt.io&#x2F;component&#x2F;com.mobmaxime.TiWebview</a></p>
<p><a href="http:&#x2F;&#x2F;gitt.io&#x2F;component&#x2F;tv.harukaze.ti.webview.useragent.ios">http:&#x2F;&#x2F;gitt.io&#x2F;component&#x2F;tv.harukaze.ti.webview.useragent.ios</a></p>
<p><strong>Android:</strong></p>
<p><a href="http:&#x2F;&#x2F;gitt.io&#x2F;component&#x2F;tv.harukaze.ti.webview.useragent.android">http:&#x2F;&#x2F;gitt.io&#x2F;component&#x2F;tv.harukaze.ti.webview.useragent.android</a></p>
<p>I didn&#39;t try them. Maybe you must compile some of them to 64bit (iOS) on your own.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 22nd 2015, 3:57:21 pm">January 22nd 2015</span>
											by <span class='authorname'>Christopher Koye</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 22nd 2015, 4:21:04 pm">January 22nd 2015</span>
											by <span class='authorname'>Res Trund</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
