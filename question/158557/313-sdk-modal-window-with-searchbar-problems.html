<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>3.1.3 SDK Modal Window with SearchBar Problems Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>3.1.3 SDK Modal Window with SearchBar Problems</h1>
		</header>
		<section>
			<p>I am having a problem as I am preparing for IOS7 using the 3.1.3 sdk.</p>
<p>I am using this example for doing a modal window with a proper title and nav buttons.</p>
<p>http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;iOS_7_Migration_Guide-section-37533766_iOS7MigrationGuide-ModalWindows</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'blue'</span>,
    titleControl: Ti.UI.createLabel({
        text: <span class="hljs-string">'Enable feature?'</span>,
        shadowColor: <span class="hljs-string">'gray'</span>,
        shadowOffset: {x: <span class="hljs-number">2</span>, y: <span class="hljs-number">2</span>}
    })
});

<span class="hljs-keyword">var</span> navWin = Ti.UI.iOS.createNavigationWindow({
    modal: <span class="hljs-keyword">true</span>,
    <span class="hljs-built_in">window</span>: win
});
navWin.open();
</code></pre><p>I added a &#39;Return&#39; button into the nav.</p>
<p>Works ok but my window contains a searchbar within a view positioned at the top of the window followed by a tableview which should take the remaining space just below the searchbar. </p>
<p>My problem is that the searchbar somehow stops getting any touch events the next time I open the navWin.</p>
<p>First time its opened it behaves perfect. </p>
<p>Next time, I cannot click the cancel button or click on the &#39;x&#39; to clear the previous text.</p>
<p>I did notice a few other odd things occuring on the 2nd time opening the window.</p>
<p>When I added a click event listener on win and clicked on the searchbar I was getting the info message &#39;WIN CLICK&#39;. I did not get this the first time the window was opened.</p>
<pre><code class="hljs">win.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    Ti.API.info(<span class="hljs-string">"---- WIN CLICK"</span>);
    });
</code></pre><p>Also win I changed the background color of the tableview I noticed first time opening the window it filled the entire height of the device. On the 2nd open, its height shortened and seemed to be less the height of the TabBar from my TabGroup.</p>
<p>My initial thought was that its a layer issue but I can&#39;t seem to fix this issue with setting of the zindex for the search bar.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 19th 2013, 4:32:34 am">October 19th 2013</span>
				by <span class='authorname'>Dave R</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios7</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>searchbar</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hello, Can you post your code with Search Bar? It will help to solve your problem.</p>
<p>Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 20th 2013, 9:02:41 am">October 20th 2013</span>
								by <span class='authorname'>Md. Mostafizur Rahman</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>oops think I posted a response as an answer not as a comment.</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 20th 2013, 11:00:01 pm">October 20th 2013</span>
								by <span class='authorname'>Dave R</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-270173">
				
						<section>
							<p>Thanks. My code looks like this.</p>
<pre><code class="hljs">    var _win = Ti.UI.createWindow({
        <span class="hljs-string">title :</span> title,
        <span class="hljs-string">barColor :</span> <span class="hljs-string">'black'</span>,
    });

    var navWin = Ti.UI.iOS.createNavigationWindow({
<span class="hljs-label">            modal:</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">        window:</span> _win,
    });

    Ti.App.addEventListener(<span class="hljs-string">'search_open'</span>, function(e) {
        navWin.open();
    });

    var closeBtn = Ti.UI.createButton({
        <span class="hljs-string">title :</span> <span class="hljs-string">'Return'</span>
    });
    closeBtn.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
        navWin.close();
    });

    _win.setRightNavButton(closeBtn);

    var searchView = Titanium.UI.createView({
        <span class="hljs-string">height :</span> <span class="hljs-number">42</span>,
        <span class="hljs-string">width :</span> Ti.UI.SIZE,
        <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
        <span class="hljs-string">left :</span> <span class="hljs-number">0</span>,
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#00ff00'</span>,
        <span class="hljs-string">zIndex :</span> <span class="hljs-number">1</span>,
    });

    var search = Titanium.UI.createSearchBar({
        <span class="hljs-string">showCancel :</span> <span class="hljs-literal">false</span>,
        <span class="hljs-string">hintText :</span> <span class="hljs-string">'Search keyword'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
        <span class="hljs-string">barColor :</span> <span class="hljs-string">'#000'</span>,
<span class="hljs-label">        left:</span><span class="hljs-number">0</span>,
    });

    searchView.add(search);

    _win.add(searchView);


    tableview = Titanium.UI.createTableView({
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'transparent'</span>,
        <span class="hljs-string">separatorColor :</span> <span class="hljs-string">'#333'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-number">42</span>,
    });

    var tblFooterView = Ti.UI.createView({
        <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
        <span class="hljs-string">height :</span> <span class="hljs-number">1</span>,
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#000000'</span>
    });

    tableview.footerView = tblFooterView;

    _win.add(tableview);
</code></pre><p>I also have an activity indicator and a listener to populate the table with data.</p>
<p>So for new search request I hide the table and show the indicator and do a scroll to the top of the table, then repopulate with data.</p>
<pre><code class="hljs">        <span class="hljs-tag">tableview</span><span class="hljs-class">.hide</span>();
        _<span class="hljs-tag">actInd</span><span class="hljs-class">.show</span>();

        <span class="hljs-tag">tableview</span><span class="hljs-class">.scrollToIndex</span>(0, <span class="hljs-rules">{
            <span class="hljs-rule"><span class="hljs-attribute">animated </span>:<span class="hljs-value"> false,
            position : Ti.UI.iPhone.TableViewScrollPosition.TOP
        </span></span></span>})
</code></pre><p>So after getting the data and populating the table I do</p>
<pre><code class="hljs"><span class="hljs-tag">tableview</span><span class="hljs-class">.show</span>();
_<span class="hljs-tag">actInd</span><span class="hljs-class">.hide</span>();
</code></pre><p>Basically everything is fine the first time this window is opened and the data for the table populated. When I click the &quot;Return&quot; button and later just open the search window again with the &quot;search_open&quot; listener, the searchbar becomes non responsive.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 20th 2013, 10:58:29 pm">October 20th 2013</span>
								by <span class='authorname'>Dave R</span><br>
								<a class="icon-bg icon-link" href="question/158557/313-sdk-modal-window-with-searchbar-problems.html#answer-270173" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
