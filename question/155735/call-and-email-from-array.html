<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Call and Email from array » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Call and Email from array</h1>
		</header>
		<section>
			<p>I have an app for both Android and iPhone that has data coming from an external database. How can I make it so that I make this clickable. When they click the phone it opens the call feature, or when they click email it opens up the native email program?</p>
<pre><code class="hljs">var emp_number = Ti.UI.createLabel({
    <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">text :</span> array.phone,
    <span class="hljs-string">textAlign :</span> Ti.UI.TEXT_ALIGNMENT_CENTER,
    <span class="hljs-string">top :</span> <span class="hljs-number">70</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">width :</span> Ti.UI.SIZE,
    <span class="hljs-string">height :</span> Ti.UI.SIZE
});
</code></pre><p>and</p>
<pre><code class="hljs">var emp_email = Ti.UI.createLabel({
    <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
    },
    <span class="hljs-string">text :</span> array.email,
    <span class="hljs-string">textAlign :</span> Ti.UI.TEXT_ALIGNMENT_CENTER,
    <span class="hljs-string">top :</span> <span class="hljs-number">110</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
    <span class="hljs-string">width :</span> Ti.UI.SIZE,
    <span class="hljs-string">height :</span> Ti.UI.SIZE
});
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 6th 2013, 11:15:56 pm">August 6th 2013</span>
				by <span class='authorname'>F. F.</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>dynamic, call, email</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-266915">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>var contactArray= [{&quot;phone&quot;:&quot;123&quot;, &quot;email&quot;:&quot;xyz@xyz.com&quot;}, {&quot;phone&quot;:&quot;123&quot;, &quot;email&quot;:&quot;xyz@xyz.com&quot;}, {&quot;phone&quot;:&quot;123&quot;,&quot;email&quot;:&quot;xyz@xyz.com&quot;}, {&quot;phone&quot;:&quot;123&quot;, &quot;email&quot;:&quot;xyz@xyz.com&quot;}, {&quot;phone&quot;:&quot;123&quot;, &quot;email&quot;:&quot;xyz@xyz.com&quot;}];</p>
<pre><code class="hljs"> //<span class="hljs-keyword">assume</span> data <span class="hljs-keyword">is</span> coming <span class="hljs-keyword">from</span> remote server <span class="hljs-keyword">and</span> has above format
</code></pre><p>var inputData = [];<br>for(var count=0; count &lt; contactArray.length; count++){</p>
<pre><code class="hljs">    <span class="hljs-comment">//create dynamic tableviewrows and add your label to row</span>

    var row = Ti.UI.createTableViewRow();

    row.height =<span class="hljs-number">150</span>;

    var emp_number = Ti.UI.createLabel({
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
        },
        <span class="hljs-string">text :</span> contactArray[count].phone,<span class="hljs-comment">//this is dynamic phone number</span>
        <span class="hljs-string">top :</span> <span class="hljs-number">70</span>,
        <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
        <span class="hljs-string">width :</span> Ti.UI.SIZE,
        <span class="hljs-string">height :</span> Ti.UI.SIZE,
        <span class="hljs-string">clickName :</span><span class="hljs-string">'Phone'</span>
    });

    var emp_email = Ti.UI.createLabel({
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-number">14</span>
        },
        <span class="hljs-string">text :</span> contactArray[count].email,<span class="hljs-comment">//this is dynamic email</span>
        <span class="hljs-string">top :</span> <span class="hljs-number">70</span>,
        <span class="hljs-string">right :</span> <span class="hljs-number">10</span>,
        <span class="hljs-string">width :</span> Ti.UI.SIZE,
        <span class="hljs-string">height :</span> Ti.UI.SIZE,
        <span class="hljs-string">clickName :</span> <span class="hljs-string">'Email'</span>
    });

row.add(emp_number);
row.add(emp_email);
inputData.push(row);
</code></pre><p>}</p>
<p>var Tableview = Titanium.UI.createTableView();</p>
<p>Tableview.setData(inputData);</p>
<p>Tableview.addEventListener(&#39;click&#39;, function(e) {</p>
<pre><code class="hljs"> <span class="hljs-keyword">if</span>(e.<span class="hljs-keyword">source</span>.ClickName == <span class="hljs-string">"Phone"</span>){
     var tel_number =e.<span class="hljs-keyword">source</span>.<span class="hljs-keyword">text</span>;
     Titanium.Platform.openURL(<span class="hljs-string">'tel:'</span>+tel_number);
 }
 <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-keyword">source</span>.ClickName == <span class="hljs-string">"Email"</span>){
      var email =e.<span class="hljs-keyword">source</span>.<span class="hljs-keyword">text</span>;
     openEmailDialog(email);
 }
 <span class="hljs-keyword">else</span>{
     <span class="hljs-comment">//no label clicked</span>
 }
</code></pre><p>});</p>
<p>function openEmailDialog(email){</p>
<pre><code class="hljs">var emailDialog = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createEmailDialog<span class="hljs-literal">()</span>;

emailDialog.subject = <span class="hljs-string">"Test Email"</span>;

emailDialog.toRecipients = [email];

emailDialog.messageBody = <span class="hljs-symbol">'Hi</span>, <span class="hljs-type">I</span> am just testing mail';

emailDialog.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>}</p>
<p>&#x2F;&#x2F;add your tableview to view or window</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 7th 2013, 9:36:40 am">August 7th 2013</span>
								by <span class='authorname'>jitendra kumar</span><br>
								<a class="icon-bg icon-link" href="question/155735/call-and-email-from-array#answer-266915" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266897">
				
						<section>
							<p>Dear Flores,</p>
<p>To open Email please refer below link</p>
<p>http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.UI.EmailDialog<br>you need to create a function which will open native EmailDialog and pass user email as argument to this function.</p>
<p>To open call feature you need to invoke</p>
<p>Titanium.Platform.openURL(&#39;tel:&#39;+put_your_number_here);</p>
<p>If you have any problem to implement both then i can write code for you.</p>
<p>Thanks,<br>Jitendra</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 7th 2013, 4:22:30 am">August 7th 2013</span>
								by <span class='authorname'>jitendra kumar</span><br>
								<a class="icon-bg icon-link" href="question/155735/call-and-email-from-array#answer-266897" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>how to have an call and sms option to a number.If the user clicks on a number he can either call or send sms to that number.can you help me pls.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 20th 2014, 12:07:50 pm">May 20th 2014</span>
											by <span class='authorname'>Aparna M</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266898">
				
						<section>
							<p>I&#39;ve only worked with iOS, so I don&#39;t know if this works on Android.</p>
<p>For phone you&#39;re looking for <code>Ti.Platform.openURL</code></p>
<p>If phone number is not formatted properly, and to be safe, I&#39;d remove all non numbers like so:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> handlePlacePhone = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">phone</span>) </span>{
    <span class="hljs-keyword">var</span> phone_number = phone.replace(<span class="hljs-regexp">/[^0-9]+/g</span>, <span class="hljs-string">''</span>);
    Ti.Platform.openURL(<span class="hljs-string">'tel:'</span> + phone_number);
};
</code></pre><p>For email you need something like this:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> emailDialog = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createEmailDialog();
<span class="hljs-comment">//all fields are optional</span>
emailDialog.toRecipients = [<span class="hljs-symbol">'email1</span><span class="hljs-annotation">@example</span>.com', <span class="hljs-symbol">'email2</span><span class="hljs-annotation">@example</span>.com'];
emailDialog.subject = <span class="hljs-string">"This is an email subject"</span>;
emailDialog.messageBody = <span class="hljs-symbol">'Hi</span>,\n\nThis is a prefilled email body';
emailDialog.open();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 7th 2013, 4:29:52 am">August 7th 2013</span>
								by <span class='authorname'>Zhenya Kogan</span><br>
								<a class="icon-bg icon-link" href="question/155735/call-and-email-from-array#answer-266898" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266908">
				
						<section>
							<p>Thank you for your suggestions, however, as I mentioned the phone and email are dynamic (or virtual). They come from an external source (they are not hardcoded) and they are not always the same phone number or email. Notice on code: text : array.phone,</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 7th 2013, 7:18:07 am">August 7th 2013</span>
								by <span class='authorname'>F. F.</span><br>
								<a class="icon-bg icon-link" href="question/155735/call-and-email-from-array#answer-266908" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hello Flores,<br>In which format data is coming from remote and how your are creating dynamic label.<br>you are using listview or tableview to display remote data.<br>Please explain or share your source code for this feature.<br>It is pretty simple to make process dynamic.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 7th 2013, 8:37:37 am">August 7th 2013</span>
											by <span class='authorname'>jitendra kumar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I am using a php file that is calling the data from MYSQL</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 7th 2013, 12:16:39 pm">August 7th 2013</span>
											by <span class='authorname'>F. F.</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Maybe I&#39;m not understanding something, but I&#39;m not sure what the dilemma is… just send emp_number.getText() to the function that I provided above or directly to Ti.Platform.openURL<br>so either</p>
<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.Platform</span><span class="hljs-class">.openURL</span>(<span class="hljs-tag">emp_number</span><span class="hljs-class">.getText</span>());
</code></pre><p>or</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> handlePhone = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">phone</span>) </span>{
    <span class="hljs-keyword">var</span> phone_number = phone.replace(<span class="hljs-regexp">/[^0-9]+/g</span>, <span class="hljs-string">''</span>);
    Ti.Platform.openURL(<span class="hljs-string">'tel:'</span> + phone_number);
};
handlePhone(emp_number.getText());
</code></pre><p>As far as the email example, plug in your dynamic values instead of what I &quot;hardcoded&quot; as an example in my answer. Like this:</p>
<pre><code class="hljs">var emailDialog = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createEmailDialog<span class="hljs-literal">()</span>;
emailDialog.toRecipients = [emp_email.getText<span class="hljs-literal">()</span>];
emailDialog.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 8th 2013, 5:04:34 am">August 8th 2013</span>
											by <span class='authorname'>Zhenya Kogan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Or what jitendra wrote in the other answer.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 8th 2013, 5:06:03 am">August 8th 2013</span>
											by <span class='authorname'>Zhenya Kogan</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
