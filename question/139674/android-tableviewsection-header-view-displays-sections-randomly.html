<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android tableViewSection Header View displays Sections Randomly » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android tableViewSection Header View displays Sections Randomly</h1>
		</header>
		<section>
			<p>In the following code I am sorting through an array of names, and placing them into table view sections.  The sections are split up alphabetically and the sections contain a view to display the alphabet the section refers to.  On iOS this work perfectly, however on android the sections start out normally but when scrolling the section labels start to get mixed up randomly.  Scrolling up and down appears to change the label of the sections.  This may sound confusing, so I am including some code and a screenshot.  Has anyone experienced this?  SDK v2.1.0.GA</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> sectionData</span> = [
    <span class="hljs-string">"Adam1"</span>,
    <span class="hljs-string">"Adam2"</span>,
    <span class="hljs-string">"Adam3"</span>,
    <span class="hljs-string">"Ben1"</span>,
    <span class="hljs-string">"Ben2"</span>,
    <span class="hljs-string">"Chris1"</span>,
    <span class="hljs-string">"Chris2"</span>,
    <span class="hljs-string">"Chris3"</span>,
    <span class="hljs-string">"Chris4"</span>,
    <span class="hljs-string">"Erin1"</span>,
    <span class="hljs-string">"Erin2"</span>,
    <span class="hljs-string">"Erin3"</span>,
    <span class="hljs-string">"Erin4"</span>,
    <span class="hljs-string">"Frank1"</span>,
    <span class="hljs-string">"Frank2"</span>,
    <span class="hljs-string">"Grant1"</span>,
    <span class="hljs-string">"Henry1"</span>,
    <span class="hljs-string">"Ivan1"</span>,
    <span class="hljs-string">"Ivan2"</span>,
    <span class="hljs-string">"Ivan3"</span>,
    <span class="hljs-string">"James1"</span>,
    <span class="hljs-string">"James2"</span>,
    <span class="hljs-string">"Ken1"</span>,
    <span class="hljs-string">"Liam1"</span>,
    <span class="hljs-string">"Liam2"</span>,
    <span class="hljs-string">"Mike1"</span>,
    <span class="hljs-string">"Mike2"</span>,
    <span class="hljs-string">"Mike3"</span>,
    <span class="hljs-string">"Mike4"</span>,
    <span class="hljs-string">"Mike5"</span>,
    <span class="hljs-string">"Mike6"</span>,
    <span class="hljs-string">"Nancy1"</span>,
    <span class="hljs-string">"Nancy2"</span>,
    <span class="hljs-string">"Paul1"</span>,
    <span class="hljs-string">"Sam1"</span>,
    <span class="hljs-string">"Sam2"</span>,
    <span class="hljs-string">"Sam3"</span>,
    <span class="hljs-string">"Turk1"</span>,
    <span class="hljs-string">"Vick1"</span>,
    <span class="hljs-string">"Vick2"</span>,
    <span class="hljs-string">"William1"</span>,
    <span class="hljs-string">"William2"</span>,
    <span class="hljs-string">"William3"</span>,
    <span class="hljs-string">"William4"</span>,
    <span class="hljs-string">"Zebra1"</span>
];

<span class="hljs-variable"><span class="hljs-keyword">var</span> sortedSections</span> = {};

<span class="hljs-comment">// sort the sections</span>
<span class="hljs-keyword">for</span> (<span class="hljs-variable"><span class="hljs-keyword">var</span> data in sectionData) {
    <span class="hljs-keyword">var</span> value</span> = sectionData[data];
    <span class="hljs-variable"><span class="hljs-keyword">var</span> sectionHeaderValue</span> = value.charAt(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">if</span> (!sortedSections[sectionHeaderValue]) {
        sortedSections[sectionHeaderValue] = {};
    };

    sortedSections[sectionHeaderValue][value] = value;
};

<span class="hljs-comment">// create the rows and sections</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> tableSections</span> = [];

<span class="hljs-keyword">for</span> (<span class="hljs-variable"><span class="hljs-keyword">var</span> sectionKey in sortedSections) {
    <span class="hljs-keyword">var</span> items</span> = sortedSections[sectionKey]; 

    <span class="hljs-variable"><span class="hljs-keyword">var</span> sectionView</span> = Ti.UI.createView({
        backgroundColor: <span class="hljs-string">"blue"</span>,
        height: '<span class="hljs-number">25</span>dp'
    });

    <span class="hljs-variable"><span class="hljs-keyword">var</span> sectionLabel</span> = Ti.UI.createLabel({
        text: sectionKey,
        top: <span class="hljs-number">0</span>,
        bottom: <span class="hljs-number">0</span>,
        left: <span class="hljs-number">5</span>,
        font:{
                fontSize: '<span class="hljs-number">12</span>dp',
                fontWeight :<span class="hljs-string">"bold"</span>},
        color: '#FFFFFF',
        textAlign: 'left'
    });

    sectionView.add(sectionLabel);

    <span class="hljs-variable"><span class="hljs-keyword">var</span> section</span> = Ti.UI.createTableViewSection({
        headerView: sectionView,
    });

    <span class="hljs-comment">// create the rows for each section</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-variable"><span class="hljs-keyword">var</span> itemKey in items) {
        <span class="hljs-keyword">var</span> item</span> = items[itemKey];

        <span class="hljs-variable"><span class="hljs-keyword">var</span> tableRow</span> = Ti.UI.createTableViewRow({
            backgroundColor: 'white',
            title: item
        });

        section.add(tableRow);
    };

    <span class="hljs-comment">// add section to tableSections array</span>
    tableSections.push(section);
};

<span class="hljs-comment">// create the table and set data</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> tableView</span> = Ti.UI.createTableView({
    data: tableSections
});

<span class="hljs-comment">// create window</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> win</span> = Ti.UI.createWindow({});

win.add(tableView);
win.<span class="hljs-keyword">open</span>();



Ti.API.info(JSON.stringify(sortedSections));
</code></pre><p><img src="http:&#x2F;&#x2F;dl.dropbox.com&#x2F;u&#x2F;11943&#x2F;2012-07-13%2012.24.28%20pm.png" alt="Screenshot"></p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 13th 2012, 3:36:06 pm">July 13th 2012</span>
				by <span class='authorname'>Frodeaux *</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>5</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-243098">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>I hit this it is a bug…</p>
<p>You cannot use a view for the section heading in Android, you have to use the title parameter while creating the section.</p>
<p>Makes it look different between the two devices, but it does work.</p>
<p>Hope this helps t…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 13th 2012, 5:34:25 pm">July 13th 2012</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/139674/android-tableviewsection-header-view-displays-sections-randomly#answer-243098" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>thanks for your suggestion, hope this will be fixed soon :(</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 20th 2012, 6:45:58 am">July 20th 2012</span>
											by <span class='authorname'>Quang Pham</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>sample fix? tks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 30th 2012, 9:14:40 pm">July 30th 2012</span>
											by <span class='authorname'>Richard Frank</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It seems that there is a JIRA ticket opened for this bug <a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-10087?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel">here</a></p>
<p>This was quite a simple case to test before releasing such a feature on Android…</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2012, 5:54:33 am">August 10th 2012</span>
											by <span class='authorname'>Arnaud Besnier</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-256728">
				
						<section>
							<p>Any update?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 13th 2013, 3:36:01 pm">February 13th 2013</span>
								by <span class='authorname'>Clément Blanco</span><br>
								<a class="icon-bg icon-link" href="question/139674/android-tableviewsection-header-view-displays-sections-randomly#answer-256728" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
