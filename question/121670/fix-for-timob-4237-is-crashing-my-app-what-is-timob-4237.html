<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Fix for TIMOB-4237 is crashing my app. What is TIMOB-4237? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Fix for TIMOB-4237 is crashing my app. What is TIMOB-4237?</h1>
		</header>
		<section>
			<p>With the 1.7.0 SDK, I have been getting plenty of crashes, I narrowed down what was causing most of them and even found the <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;commit&#x2F;7b69fb278dd04a9fc91909640d72de0cdf492e0a#iphone&#x2F;Classes&#x2F;TiNetworkHTTPClientResultProxy.m">code change in github</a> that is causing it.</p>
<p>However, there is no record of a TIMOB-4237 in JIRA. I have searched &amp; searched, but have no idea what this was trying to fix. Can anyone offer any assistance? Was this change really necessary?</p>
<p>In case someone from Appcelerator is willing to look twice at this change, here are the crash details. Occurring from Cross Context Network Client calls (using callbacks).</p>
<pre><code class="hljs">Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at <span class="hljs-number">0x0000000000000008</span>

Thread <span class="hljs-number">14</span> Crashed:
<span class="hljs-number">0</span>   libobjc.A.dylib                   <span class="hljs-number">0x0249409b</span> objc_msgSend + <span class="hljs-number">15</span>
<span class="hljs-number">1</span>   ???                               <span class="hljs-number">0x0c5a4810</span> <span class="hljs-number">0</span> + <span class="hljs-number">207243280</span>
<span class="hljs-number">2</span>   LA Fitness                        <span class="hljs-number">0x000a6585</span> -[TiNetworkHTTPClientResultProxy initWithDelegate:] + <span class="hljs-number">84</span> (TiNetworkHTTPClientResultProxy.m:<span class="hljs-number">59</span>)
<span class="hljs-number">3</span>   LA Fitness                        <span class="hljs-number">0x000a81d0</span> -[TiNetworkHTTPClientProxy _fireReadyStateChange:failed:] + <span class="hljs-number">366</span> (TiNetworkHTTPClientProxy.m:<span class="hljs-number">276</span>)
<span class="hljs-number">4</span>   LA Fitness                        <span class="hljs-number">0x000aa30d</span> -[TiNetworkHTTPClientProxy requestFinished:] + <span class="hljs-number">52</span> (TiNetworkHTTPClientProxy.m:<span class="hljs-number">555</span>)
<span class="hljs-number">5</span>   LA Fitness                        <span class="hljs-number">0x00013bd8</span> -[ASIHTTPRequest requestFinished] + <span class="hljs-number">421</span> (ASIHTTPRequest.m:<span class="hljs-number">1603</span>)
<span class="hljs-number">6</span>   LA Fitness                        <span class="hljs-number">0x00019679</span> -[ASIHTTPRequest handleStreamComplete] + <span class="hljs-number">2391</span> (ASIHTTPRequest.m:<span class="hljs-number">2739</span>)
<span class="hljs-number">7</span>   LA Fitness                        <span class="hljs-number">0x00018142</span> -[ASIHTTPRequest handleNetworkEvent:] + <span class="hljs-number">236</span> (ASIHTTPRequest.m:<span class="hljs-number">2514</span>)
<span class="hljs-number">8</span>   LA Fitness                        <span class="hljs-number">0x0000b0ff</span> ReadStreamClientCallBack + <span class="hljs-number">43</span> (ASIHTTPRequest.m:<span class="hljs-number">52</span>)
<span class="hljs-number">9</span>   CoreFoundation                    <span class="hljs-number">0x022dd953</span> _signalEventSync + <span class="hljs-number">99</span>
<span class="hljs-number">10</span>  CoreFoundation                    <span class="hljs-number">0x022dd8be</span> _cfstream_shared_signalEventSync + <span class="hljs-number">334</span>
<span class="hljs-number">11</span>  CoreFoundation                    <span class="hljs-number">0x0230f8ff</span> __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + <span class="hljs-number">15</span>
<span class="hljs-number">12</span>  CoreFoundation                    <span class="hljs-number">0x0226d88b</span> __CFRunLoopDoSources0 + <span class="hljs-number">571</span>
<span class="hljs-number">13</span>  CoreFoundation                    <span class="hljs-number">0x0226cd86</span> __CFRunLoopRun + <span class="hljs-number">470</span>
<span class="hljs-number">14</span>  CoreFoundation                    <span class="hljs-number">0x0226c840</span> CFRunLoopRunSpecific + <span class="hljs-number">208</span>
<span class="hljs-number">15</span>  CoreFoundation                    <span class="hljs-number">0x0226c761</span> CFRunLoopRunInMode + <span class="hljs-number">97</span>
<span class="hljs-number">16</span>  Foundation                        <span class="hljs-number">0x00639115</span> -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + <span class="hljs-number">295</span>
<span class="hljs-number">17</span>  LA Fitness                        <span class="hljs-number">0x00010d68</span> -[ASIHTTPRequest startRequest] + <span class="hljs-number">8471</span> (ASIHTTPRequest.m:<span class="hljs-number">1080</span>)
<span class="hljs-number">18</span>  LA Fitness                        <span class="hljs-number">0x0000ddfb</span> -[ASIHTTPRequest main] + <span class="hljs-number">1130</span> (ASIHTTPRequest.m:<span class="hljs-number">658</span>)
<span class="hljs-number">19</span>  LA Fitness                        <span class="hljs-number">0x0000d744</span> -[ASIHTTPRequest startAsynchronous] + <span class="hljs-number">354</span> (ASIHTTPRequest.m:<span class="hljs-number">570</span>)
<span class="hljs-number">20</span>  Foundation                        <span class="hljs-number">0x00602cf4</span> -[NSThread main] + <span class="hljs-number">81</span>
<span class="hljs-number">21</span>  Foundation                        <span class="hljs-number">0x00602c80</span> __NSThread__main__ + <span class="hljs-number">1387</span>
<span class="hljs-number">22</span>  libSystem.B.dylib                 <span class="hljs-number">0x92fb37fd</span> _pthread_start + <span class="hljs-number">345</span>
<span class="hljs-number">23</span>  libSystem.B.dylib                 <span class="hljs-number">0x92fb3682</span> thread_start + <span class="hljs-number">34</span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 27th 2011, 2:54:37 pm">June 27th 2011</span>
				by <span class='authorname'>Mike Robinson</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
						<li><span class='tagname'>httpclient result</span></li>
					
						<li><span class='tagname'>jira</span></li>
					
						<li><span class='tagname'>timob-4237</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-211535">
				
						<section>
							<p>The jira id is an internal ticket reference which has since been re-opened and is currently being worked on.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 27th 2011, 4:02:18 pm">June 27th 2011</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/121670/fix-for-timob-4237-is-crashing-my-app-what-is-timob-4237.html#answer-211535" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Is there anyways I can be informed when the fix has been made? With no open ticket that I have access to….it is hard to monitor.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 27th 2011, 5:00:16 pm">June 27th 2011</span>
											by <span class='authorname'>Mike Robinson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve subscribed to the issue and the best I can do is update this answer once I get an update from the ticket. If you stay subscribed to this question, you will get the update once its made.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 27th 2011, 5:14:35 pm">June 27th 2011</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanks for your help. i&#39;m having the same error crash as well, however the stacktrace is different as some other folks reported <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;121492&#x2F;170171-memory-protection-error-bus-error-10">here</a>, but i&#39;m pretty sure the root problem is exactly the same for both.</p>
<p>i&#39;ve tried all i&#39;m able to think, including:</p>
<ol>
<li>rewrite all the code to pass from 4 execution context to single one</li>
<li>avoid Ti.App.addEventListener&#x2F;fireEvent<br>and i still having the same crashes. </li>
</ol>
<p>today i found that there&#39;s another ticket, opened by appcelerator team, and i guess it&#39;s all about javascriptcore, <a href="http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-4523?page=com.atlassian.jira.plugin.system.issuetabpanels%3Achangehistory-tabpanel">see</a></p>
<p>let&#39;s keep our fingers crossed!</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 3rd 2011, 5:49:04 pm">July 3rd 2011</span>
											by <span class='authorname'>jordi domenech</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211548">
				
						<section>
							<p>Mike</p>
<p>The ticket is not publicly-viewable because it contains details describing one of our customer&#39;s edge-case issues.</p>
<p>The reason for your problems is that cross-context calls are no longer allowed (in 1.7.0 onward), due to the requirements of the new memory management system in iOS. This will be resolved when we move to a single-execution context, but your approach for the moment should be to avoid passing functions between contexts.</p>
<p>Hope this helps</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 27th 2011, 6:21:02 pm">June 27th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/121670/fix-for-timob-4237-is-crashing-my-app-what-is-timob-4237.html#answer-211548" rel="permalink">permalink</a>
							</div>

							<h5>12 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Paul, can you elaborate on exactly what should be avoided so there are no &quot;cross-context calls&quot;?  If you use multiple windows each with their own url (and thus multiple contexts), can one context safely fire an event to another window and have that window run a function in its own *.js code?</p>
<p>Are you saying just don&#39;t pass a function as a property in the event object but it is safe to pass variables or literals&#x2F;constants?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 4th 2011, 10:35:50 am">July 4th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Paul, can you clarify for me what you meant by your answer and exactly what we need to avoid in 1.7.0 onward?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 12:39:30 pm">July 7th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Doug, the user was using &quot;Cross Context Network Client&quot; and hence passing functions between contexts. This is not supported in 1.7.0+</p>
<p>Does that make it clearer?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 1:26:05 pm">July 7th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hi Paul! I think we understand what is a cross context call (Ti.App.fireEvent&#x2F;Ti.App.addEventListener), but we&#39;re not understanding -at least I do not- what is a cross context network client. Is it call a fireEvent or something inside the callback of a network operation? Could you please provide a simple example? Really appreciate it! Thanks in advance</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 1:31:55 pm">July 7th 2011</span>
											by <span class='authorname'>jordi domenech</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Are you referring to the sourceforge project <a href="http:&#x2F;&#x2F;crosscontext.sourceforge.net&#x2F;">CrossContext</a>?</p>
<p>Specifically, I guess I wonder about the technique Jordi described below where you have multiple windows using their own url (and thus multiple contexts) and fire events to cause another window to take some action.  I only pass simple variables or JSON serializable objects in my event object.</p>
<p>Should that sill work the same in 1.7.x?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 1:37:25 pm">July 7th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Doug, certainly your approach (as always) is the recommended one. I&#39;m sorry the information in this thread was not clear before. I have created ticket <a href="http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-4618">TIMOB-4618</a> to resolve the current APIDocs error.</p>
<p>Thanks for pressing me on this issue - it was beneficial to get to the bottom of it.</p>
<p>Cheers</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 5:29:25 pm">July 7th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Paul, thanks for letting me keep pressing you. :)  So you are saying as long as I don&#39;t pass functions by reference in the event object (which I never did), then using multiple windows with a url and firing events between them will still be supported behavior in 1.7.x and onward?</p>
<p>If I need to regroup and change my projects, it will be a major paradigm change and I need to rethink my approach.</p>
<p>If it is still supported, any idea what Jordi was running into in his reply?  His reply made me nervous, which is why I was pushing for a clarification.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 5:40:06 pm">July 7th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>heh, honestly Doug, you are doing it the correct way - continue as usual! ;)</p>
<p>If other users were using the other approach and encounter problems as a consequence of refactoring their code, then they will need to open a fresh question.</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 5:59:14 pm">July 7th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for setting me at ease.  It isn&#39;t clear what is in e.someData in Jordi&#39;s sample code, or what doSomething() does.  But if he is having trouble, I&#39;ll let him address that in a fresh question.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 6:17:55 pm">July 7th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>What I was trying to explain is that I also had crashes like Mike explains in the first message in this thread. Yes, that EXC_BAD_ACCESS (SIGBUS) and KERN_PROTECTION_FAILURE. If you all read my comment on the first answer (the third comment) you&#39;ll see that some other users reported similar crashes, maybe with different stacktrace, so I found interesting write here, and say what I&#39;m still thinking: both crashes are related. After hundred of tests, theories, tries and retries, I realized that avoiding fireEvent&#x2F;addEventListener helped me a lot. I consider useless opening another ticket without a valid usecase… I did my best to did it, but the crashes are random. After a few days but tons of hours studying why my app has these crashes I just can say that it seems it still has to do with fireEvent&#x2F;addEventListener and network async operations.<br>Paul, as I said previously I will really appreciate if you explain what is a &#39;cross context network client&#39;. Thanks in advance.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 9th 2011, 1:38:29 pm">July 9th 2011</span>
											by <span class='authorname'>jordi domenech</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Jordi</p>
<p>For my projects, avoiding the use of <code>fireEvent&amp;#x2F;addEventListener</code> would be impossible. That&#39;s not what this thread was about.</p>
<p>As I have already stated, <a href="http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-4618">TIMOB-4618</a> explains what you cannot do on iOS at the moment, and what causes the crash. It is unlikely to cause problems on Android but, still, this approach will never be recommended practice. Thus, don&#39;t do it!</p>
<p>I am sorry, but I am not prepared to speculate about what is causing problems with your app, without seeing some code. You are welcome to open a new question about it, though.</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 10th 2011, 9:03:30 am">July 10th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Paul, I am currently getting the EXC_BAD_BUS errors also. At one point in my app i pass the window into the child window, then once again that window into the child window. This is so when the user clicks save I can close all the windows (via the navgroup i am also passing) and the user would end up back at the first window. Could this be causing that error and if so do you have any other possible solutions?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 21st 2011, 10:53:10 pm">July 21st 2011</span>
											by <span class='authorname'>Andrew Royce</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-212131">
				
						<section>
							<p>i think what he says is avoid this, for example:</p>
<pre><code class="hljs"><span class="hljs-comment">// context 1</span>
Ti.App.fireEvent(<span class="hljs-string">'dataToContext2'</span>, {e: someData});

<span class="hljs-comment">// context 2 (another windo)</span>
Ti.App.addEventListener(<span class="hljs-string">'dataToContext2'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
doSomething();
});
</code></pre><p>i&#39;ve playing around, and what i can say is that fireEvent&#x2F;addEventListener has something to do with these crashes. i&#39;ve removed all my custom events fired&#x2F;catched that way and my app doesn&#39;t crash. i&#39;d say that changing GUI elements on addEventListener function is what is causing all this mess.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 4th 2011, 10:48:34 am">July 4th 2011</span>
								by <span class='authorname'>jordi domenech</span><br>
								<a class="icon-bg icon-link" href="question/121670/fix-for-timob-4237-is-crashing-my-app-what-is-timob-4237.html#answer-212131" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>In your example, if doSometing() is defined within context 2 and e.someData was just a simple variable as opposed to a function encapulated in an object?</p>
<p>Is using Ti.App the problem here?  If the context 2 app listener was on its own window objec instead of Ti.App, and context one had a reference to the to that object so it could fire the event without using Ti.App, would that help?</p>
<p>Not being able to fire events in another window would be an absolute show stopper for me, though I don&#39;t need to &quot;pass functions&quot; as I would define passing functions – I only need to pass simple variables or at most JSON serializeable objects.</p>
<p>Rewriting to a single window or recoding to avoid events I can fire from another window would decimate some of my projects.  I really hope that isn&#39;t what Paul meant…</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 4th 2011, 11:15:43 am">July 4th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hope it doesn&#39;t! :) finger crossed.<br>as the crashes are random it&#39;s very difficult to say what works well and what does not, just what seems to work after error and try…. so, i tried to share my experience, but maybe i am wrong!<br>hope Paul answer your question, pretty sure he&#39;ll do better than me :D<br>happy independece day!</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 4th 2011, 11:41:39 am">July 4th 2011</span>
											by <span class='authorname'>jordi domenech</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Jordi</p>
<p>Listen to Doug - he is correct. As long as <code>doSomething()</code> is defined in context 2, your example is precisely the right way to do it.</p>
<p>Cheers</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 10th 2011, 8:55:24 am">July 10th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
