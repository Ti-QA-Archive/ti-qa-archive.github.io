<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>var.addEventListener() undefined var - cannot call method addEventListener of undefined. Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>var.addEventListener() undefined var - cannot call method addEventListener of undefined.</h1>
		</header>
		<section>
			<p>I posted this same issue two days ago with sample code. You folks found no error. I suppose somehow by taking a small excerpt of the code inadvertently removed the problem. I posted a &quot;comment&quot; in which I added the code below, to which I received no responses. I&#39;m thinking most folks don&#39;t look at those comments. Anyway, I&#39;m submitting here with basically all of the one .js file causing the error to hopefully get noticed. If this process of resubmitting after a comment is not acceptable, please let me know. </p>
<p>Anyway, I&#39;m getting &quot;cannot call method addEventListener of undefined. This was working about a week ago so I&#39;ve probably changed something during that time. However, I&#39;ve looked through the code relative to the variable &#39;entryCodeTest&#39; and cannot find anything wrong. Any suggestions will be appreciated.<br>Win 7. Android 4.2. Ti3.0</p>
<pre><code class="hljs"><span class="hljs-comment">//app.js-checkid2test</span>
<span class="hljs-comment">//900pm</span>
var exitCode = <span class="hljs-number">0</span>;
var win = Titanium.UI.createWindow({
<span class="hljs-comment">//    exitOnClose:true</span>
});  <span class="hljs-comment">//try if 'finish()' doesn't work</span>
Titanium.UI.setBackgroundColor(<span class="hljs-string">'black'</span>);
var mod=require(<span class="hljs-string">"/functions"</span>);
var mod1=require(<span class="hljs-string">"/mainScreen"</span>);


Ti.API.info(<span class="hljs-string">"program begin"</span>);
<span class="hljs-comment">//test if correct passcode entered and file exists already</span>
        var fHandle = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,<span class="hljs-string">"pc.txt"</span>);

        var fileContents = fHandle.read();
        var readText = fileContents.<span class="hljs-built_in">text</span>
        <span class="hljs-keyword">if</span>(readText.<span class="hljs-built_in">text</span> = <span class="hljs-string">"File Exists"</span>)
        {
            Ti.API.info(<span class="hljs-string">"fhandle exists"</span>);
            exitCode = <span class="hljs-number">1</span>;

        }

<span class="hljs-comment">// make necessary labels and fields</span>
    <span class="hljs-keyword">if</span>(exitCode == <span class="hljs-number">0</span>)
    {
        var signInLabel = Titanium.UI.createLabel({
            top: <span class="hljs-number">50</span>,
            left: <span class="hljs-number">0</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">300</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">60</span>,
            font:{fontSize:<span class="hljs-number">50</span>},
            <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
            <span class="hljs-built_in">text</span>: <span class="hljs-string">'Sign In'</span>
        });
<span class="hljs-comment">//label to display program generated numeric code</span>
        var  autoCodeLabel = Titanium.UI.createLabel({
            top: <span class="hljs-number">120</span>,
            left: <span class="hljs-number">0</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">400</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">100</span>,
            font: {fontSize:<span class="hljs-number">40</span>},
            <span class="hljs-built_in">color</span>: <span class="hljs-string">'#777'</span>,
            <span class="hljs-built_in">text</span>: <span class="hljs-string">'Auto Code'</span>
            <span class="hljs-comment">//editable: false</span>

        });
<span class="hljs-comment">// Label to inform user that a numeric code generated based</span>
<span class="hljs-comment">//based on the program generated code above</span>
<span class="hljs-comment">// is to be entered into the field that follows this label</span>

        var entryCodeLabel = Titanium.UI.createLabel({
            top: <span class="hljs-number">230</span>,
            left: <span class="hljs-number">0</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">300</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">60</span>,
            <span class="hljs-built_in">color</span>: <span class="hljs-string">'white'</span>,
            font:{fontSize:<span class="hljs-number">50</span>},
            <span class="hljs-built_in">text</span>: <span class="hljs-string">'PassCode'</span>
        });
<span class="hljs-comment">//field to enter corresponding numeric code mentioned above</span>
        var entryCodeText = Titanium.UI.createTextField({
            top: <span class="hljs-number">300</span>,
            left: <span class="hljs-number">0</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">400</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">100</span>,
            <span class="hljs-built_in">color</span>: <span class="hljs-string">'#777'</span>,
            font:{fontSize:<span class="hljs-number">40</span>},
            hintText: <span class="hljs-string">'Enter Passcode'</span>
        });
        var debugText = Titanium.UI.createLabel({
            top: <span class="hljs-number">600</span>,
            left: <span class="hljs-number">0</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">500</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">100</span>,
            <span class="hljs-built_in">color</span>: <span class="hljs-string">'#777'</span>,
            font:{fontSize:<span class="hljs-number">40</span>},
            hintText: <span class="hljs-string">'decode text'</span>
        });
    <span class="hljs-comment">//cardSwipeButton below simulates a card swipe for now</span>
    <span class="hljs-comment">//pressing the button is replacing the card swipe event</span>
        var cardSwipeButton = Titanium.UI.createButton({
            title: <span class="hljs-string">'Card Swipe'</span>,
            <span class="hljs-variable">width</span>: <span class="hljs-number">60</span>,
            <span class="hljs-variable">height</span>: <span class="hljs-number">60</span>,
            top: <span class="hljs-number">800</span>,
            left: <span class="hljs-number">0</span>
        });


    <span class="hljs-comment">//add labels and fields to window</span>
        win.<span class="hljs-built_in">add</span>(signInLabel);
        win.<span class="hljs-built_in">add</span>(autoCodeLabel);
        win.<span class="hljs-built_in">add</span>(entryCodeLabel);
        win.<span class="hljs-built_in">add</span>(entryCodeText);
        win.<span class="hljs-built_in">add</span>(debugText);
        win.<span class="hljs-built_in">add</span>(cardSwipeButton);
        win.<span class="hljs-built_in">open</span>();

    } <span class="hljs-comment">//end of exitCode == 0 if</span>
<span class="hljs-comment">//*********************************************************</span>
<span class="hljs-comment">//setup and prompt for passcode with addEventListener</span>

        entryCodeText.addEventListener(<span class="hljs-string">"return"</span>,function(e)
        {
            <span class="hljs-comment">//compute firsthalf code</span>

            var firstHalf;
            var secondHalf;
            var mm;
            var sec;
            var hr;

            myDate = <span class="hljs-keyword">new</span> Date();
            mm = myDate.getMinutes() +<span class="hljs-number">1</span>;
            sec = myDate.getSeconds() + <span class="hljs-number">1</span>;
            hr = myDate.getHours() + <span class="hljs-number">1</span>;

            firstHalf = Math.<span class="hljs-built_in">abs</span>(sec*sec + sec*mm*hr/<span class="hljs-number">4</span>);

            firstHalf = Math.<span class="hljs-built_in">floor</span>(firstHalf);
            autoCodeLabel.value = firstHalf;
            autoCodeLabel.focus();
            <span class="hljs-comment">//Ti.API.info("firsthalf = " + firstHalf);</span>
            debugDisplay(<span class="hljs-string">"firstHalf = "</span> + firstHalf);
            autoCodeLabel.<span class="hljs-built_in">text</span> = firstHalf;
            <span class="hljs-comment">//debugText.text = "computed firstHalf";</span>
            entryCodeText.<span class="hljs-built_in">text</span> = <span class="hljs-string">""</span>;
            entryCodeText.focus();

            <span class="hljs-comment">//compute code and magic number (answer)</span>
            <span class="hljs-keyword">if</span>(computeCode(entryCodeText.value)&lt; <span class="hljs-number">0</span>)
            {
                debugText.<span class="hljs-built_in">text</span> = <span class="hljs-string">"failed computecode"</span>;
                Ti.API.info(<span class="hljs-string">'failed computecode()'</span>);
                exitCode = <span class="hljs-number">0</span>;

            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-comment">//debugtext = "passed computeCode()";</span>
                Ti.API.info(<span class="hljs-string">'passed computeCode()'</span>);
                alert(<span class="hljs-string">"welcome"</span>);

                fHandle.write(<span class="hljs-string">"File Exists"</span>);
                fHandle.close();
                exitCode = <span class="hljs-number">1</span>;

            }
        });

<span class="hljs-comment">//*****************************************************************</span>
<span class="hljs-comment">//event to simulate a card swipe event. Will be replaced by same</span>

        cardSwipeButton.addEventListener(<span class="hljs-string">"click"</span>,function(e)
        {
            <span class="hljs-comment">//mod.clearDisplayValues();</span>
            win.close();

            <span class="hljs-comment">//var errorFlag = mod1.mainScreen();</span>
            <span class="hljs-keyword">if</span>(errorFlag&gt;=<span class="hljs-number">0</span>)
            {
            <span class="hljs-comment">//    errorFlag = mod.parseT1();</span>
                <span class="hljs-keyword">if</span>(errorFlag&gt;= <span class="hljs-number">0</span>)
                {
            <span class="hljs-comment">//        errorFlag = mod.parseT2();</span>
                    <span class="hljs-keyword">if</span>(errorFlag&gt;= <span class="hljs-number">0</span>)
                    {
            <span class="hljs-comment">//            errorFlag = mod.testDates();</span>
                        <span class="hljs-keyword">if</span>(errorFlag&gt;=<span class="hljs-number">0</span>)
                        {
            <span class="hljs-comment">//                errorFlag = mod.computeAge    ();</span>
                            <span class="hljs-keyword">if</span>(errorFlag&gt;=<span class="hljs-number">0</span>)
                            {
                                displayResults();
                            }
                        }
                    }
                }
            }
            <span class="hljs-keyword">if</span>(errorFlag &lt; <span class="hljs-number">0</span>)
            {
                errorDisplay();
            }
            });




<span class="hljs-comment">//compute code - function to create code to be matched to entered</span>
<span class="hljs-comment">// number.</span>
function computeCode(pcEntry)
{
    <span class="hljs-comment">//Ti.API.info('computeCode');</span>
    var pc = firstHalf * <span class="hljs-number">101</span>;
    pc = pc + <span class="hljs-number">17</span>;
    pc = Math.<span class="hljs-built_in">floor</span>(pc /<span class="hljs-number">7</span>);
    pc = pc +<span class="hljs-number">2345</span>;
    pc = pc + Math.<span class="hljs-built_in">floor</span>(firstHalf/<span class="hljs-number">100</span>);
    pc = pc + firstHalf%<span class="hljs-number">4</span>;
    Ti.API.info(<span class="hljs-string">"final pc = "</span> + pc);
    secondHalf = pc;
    <span class="hljs-comment">// test for match so user may continue</span>
    <span class="hljs-keyword">if</span>(pcEntry == secondHalf)
    {
        Ti.API.info(<span class="hljs-string">'got a match'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">else</span>
    {
        Ti.API.info(<span class="hljs-string">"Invalid Entry"</span>);
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
} <span class="hljs-comment">//end of function compute</span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 20th 2013, 9:35:23 pm">March 20th 2013</span>
				by <span class='authorname'>Doc Jump</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>win7,ti3,andr4.2</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>You have tried posting too much code as the code window has failed, try again with less code (more focused on the specifics).</p>
<p>Place a link to the original question.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 20th 2013, 9:43:39 pm">March 20th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>BTW judging by your original question, the reason you got no follow up comments is because those who answered found no errors with your code as you had originally supplied it.</p>
<p>The code you provided as a additional information (which should have been added as a comment to the original question) failed to display as it has again - use the preview button to check before posting to confirm what will actually display.</p>
<p>Also your previous question was asked yesterday and people DO review questions and follow ups, there is no need to re-post, but there is to check what you actually post.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 20th 2013, 9:48:39 pm">March 20th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thanks for the information Malcolm.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 20th 2013, 10:00:53 pm">March 20th 2013</span>
								by <span class='authorname'>Doc Jump</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>use pastie.org for pasting a lot of code.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 20th 2013, 10:38:26 pm">March 20th 2013</span>
								by <span class='authorname'>Mauro Parra</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-259041">
				
						<section>
							<p>You should be, if possible, declaring your eventListeners before they are added to a parent.</p>
<p>And honestly, needing to go back to your other unlinked question was a pain in the arse.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 20th 2013, 10:50:48 pm">March 20th 2013</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/149827/varaddeventlistener-undefined-var---cannot-call-method-addeventlistener-of-undefined#answer-259041" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
