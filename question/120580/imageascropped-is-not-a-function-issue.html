<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>imageAsCropped is not a function issue » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>imageAsCropped is not a function issue</h1>
		</header>
		<section>
			<p>I&#39;m having a problem with cropping an image and am getting this error:</p>
<pre><code class="hljs">
message = "Result of expression 'shotFile2.imageAsCropped' [undefined] is not a function."<span class="hljs-comment">;</span>
name = TypeError<span class="hljs-comment">;</span>
sourceId = <span class="hljs-number">240111808</span><span class="hljs-comment">;</span>
</code></pre><p>i&#39;ve done research with the problem and have cleaned the build&#x2F;iphone&#x2F;build numerous times including in the Application Support path but even though the function is there, it still won&#39;t recognise it. </p>
<p>Any help greatly appreciated.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 5th 2011, 10:26:25 pm">June 5th 2011</span>
				by <span class='authorname'>Miles Savelli-Holt</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>crop</span></li>
					
						<li><span class='tagname'>function</span></li>
					
						<li><span class='tagname'>image</span></li>
					
						<li><span class='tagname'>imageascropped</span></li>
					
						<li><span class='tagname'>recognise</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-209284">
				
						<section>
							<p>You need to use crop module by Kosso: https:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;90691&#x2F;cropclip-image-module-from-kosso-</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 6th 2011, 5:12:42 am">June 6th 2011</span>
								by <span class='authorname'>Gennadiy Potapov</span><br>
								<a class="icon-bg icon-link" href="../../question/120580/imageascropped-is-not-a-function-issue.html#answer-209284" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This is already in place</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 6th 2011, 3:23:38 pm">June 6th 2011</span>
											by <span class='authorname'>Miles Savelli-Holt</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-209304">
				
						<section>
							<p>I believe imageAsCropped has been in the official build for some time now. At least since 1.6.0 onwards (I think) </p>
<p>But they modified it a bit to use a single dictionary argument eg: <code>theImageBlob.imageAsCropped({x:10,y:10,width:100,height:200})</code>  , rather than 4 arguments for x, y, width, height as I had originally done it eg: <code>theImageBlob.imageAsCropped(10,10,100,200)</code></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 6th 2011, 8:46:52 am">June 6th 2011</span>
								by <span class='authorname'>Kosso</span><br>
								<a class="icon-bg icon-link" href="../../question/120580/imageascropped-is-not-a-function-issue.html#answer-209304" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Yes it was having errors with &quot;NDictionary&quot; so I reverted back to the original &quot;4 arguments&quot;, but now it says it cant recognise the function. The module is in place but no luck with it being found anymore.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 6th 2011, 3:23:07 pm">June 6th 2011</span>
											by <span class='authorname'>Miles Savelli-Holt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><code>theImageBlob.imageAsCropped({x:10,y:10,width:100,height:200})</code></p>
<p>Worked smoothly for me</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 18th 2011, 12:03:31 pm">October 18th 2011</span>
											by <span class='authorname'>Joseandro Luiz</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-209368">
				
						<section>
							<p>this is the code i am using at the moment</p>
<pre><code class="hljs">Titanium.Media.takeScreenshot(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span></span>{
    <span class="hljs-comment">// get the image blob of the screenshot</span>
    <span class="hljs-keyword">var</span> screenShot = event.media;
    <span class="hljs-comment">// I want to save it, so lets create a file</span>
    <span class="hljs-keyword">var</span> shotFile2 = Ti.Filesystem.getFile(<span class="hljs-keyword">parent</span> + <span class="hljs-string">'/Images2'</span> + <span class="hljs-string">'/test3.png'</span>).toBlob;
    <span class="hljs-comment">// I only want one of these ever, so delete any old one</span>
    <span class="hljs-keyword">if</span>(shotFile2.exists()){
        shotFile2.deleteFile();
    }
    <span class="hljs-comment">// perform imageAsCropped on the blob with arguments:  x, y, width, height (where x,y is from the top left corner) </span>
    <span class="hljs-keyword">var</span> cropped = shotFile2.imageAsCropped(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">200</span>,<span class="hljs-number">200</span>);
    <span class="hljs-keyword">var</span> croImg = Ti.UI.createImageView({
    image: shotFile2,
    top:<span class="hljs-number">20</span>,
    left:<span class="hljs-number">20</span>,
    width:<span class="hljs-number">290</span>,
    height:<span class="hljs-number">232</span>
});
    win.add(croImg);
    <span class="hljs-comment">// save the new file</span>
    <span class="hljs-comment">// shotFile2.write(croImg);</span>

    imageView.image = screenShot;

});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 6th 2011, 3:30:03 pm">June 6th 2011</span>
								by <span class='authorname'>Miles Savelli-Holt</span><br>
								<a class="icon-bg icon-link" href="../../question/120580/imageascropped-is-not-a-function-issue.html#answer-209368" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-209403">
				
						<section>
							<p>Hi,</p>
<p>I&#39;m not sure if this will solve it, but here&#39;s my two cents:</p>
<p>You&#39;re checking for the creation of your file (and deleting it if it exists already), but when you&#39;re calling imageAsCropped(), you haven&#39;t written to the file yet. You can solve this by calling the imageAsCropped() method on the screenShot image blob, rather than on the file handle.</p>
<p>This would be my process…</p>
<p>1) call imageAsCropped on the original image blob</p>
<p>2) After creating new file (and deleting existing if necessary) write the newly cropped blob to file</p>
<p>3) create the new imageView using the new cropped image blob as the &quot;image&quot; property</p>
<p>I&#39;m not sure what you&#39;re doing with imageView..</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 7th 2011, 12:05:43 am">June 7th 2011</span>
								by <span class='authorname'>Joshua Nicholson</span><br>
								<a class="icon-bg icon-link" href="../../question/120580/imageascropped-is-not-a-function-issue.html#answer-209403" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I wasn&#39;t clear, but I meant to say that shotFile2 is a file, not a Blob, so imageAsCropped() shouldn&#39;t work on it. My process above addresses this. Good Luck</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 7th 2011, 12:08:03 am">June 7th 2011</span>
											by <span class='authorname'>Joshua Nicholson</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-209522">
				
						<section>
							<p>hey thanks for all your help guys, because of that I&#39;ve sorted it now. Here was the code that worked: </p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;

        web = Titanium.UI.createWebView({
            url: <span class="hljs-string">'http://yahoo.com'</span>,
            top:<span class="hljs-number">0</span>,
            left:<span class="hljs-number">0</span>,
            width:<span class="hljs-number">320</span>,
            height:<span class="hljs-number">200</span>
        });

        button = Ti.UI.createButton({
            title: <span class="hljs-string">'make image'</span>,
            width:<span class="hljs-number">120</span>,
            height:<span class="hljs-number">20</span>,
            top:<span class="hljs-number">200</span>
        });

button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    Titanium.Media.takeScreenshot(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span></span>{
    <span class="hljs-comment">// get the image blob of the screenshot</span>
    <span class="hljs-keyword">var</span> screenShot = event.media;
    <span class="hljs-keyword">parent</span> = Ti.Filesystem.getresourcesDirectory();
    <span class="hljs-comment">// I want to save it, so lets create a file</span>
    <span class="hljs-keyword">var</span> shotFile = Ti.Filesystem.getFile(<span class="hljs-keyword">parent</span> + <span class="hljs-string">'/Images2'</span> + <span class="hljs-string">'/web_screenshot.png'</span>);
    <span class="hljs-comment">// I only want one of these ever, so delete any old one</span>
    <span class="hljs-keyword">if</span>(shotFile.exists()){
        shotFile.deleteFile();
    }
    <span class="hljs-comment">// perform imageAsCropped on the blob with arguments:  x, y, width, height (where x,y   is from the top left corner) </span>
    <span class="hljs-keyword">var</span> cropped = screenShot.imageAsCropped(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">200</span>,<span class="hljs-number">200</span>);

        <span class="hljs-comment">// save the new file</span>
    shotFile.write(cropped);   
    });

});

win.add(web);
win.add(button);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 7th 2011, 4:02:50 pm">June 7th 2011</span>
								by <span class='authorname'>Miles Savelli-Holt</span><br>
								<a class="icon-bg icon-link" href="../../question/120580/imageascropped-is-not-a-function-issue.html#answer-209522" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-217566">
				
						<section>
							<p>For those stumbling, this is <em>only</em> on ios (not android) on 1.7.2 (android 1.6, ios 4.3)</p>
<ul>
<li>the correct arguments are a single dict with variables <code>{x:.., y:..., width:..., height:...}</code> as mentioned by Kosso</li>
<li>you should call directly on the TiBlob directly, not on TiBlob.media</li>
<li>you don&#39;t need to have the imageView actually shown for the above to work</li>
</ul>
<p>No solution found for android, but these inconsistencies (and undocumented functions) are a little frustrating.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 27th 2011, 10:01:52 am">August 27th 2011</span>
								by <span class='authorname'>Eric Z</span><br>
								<a class="icon-bg icon-link" href="../../question/120580/imageascropped-is-not-a-function-issue.html#answer-217566" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Just commented on another thread with some code for android to resize and crop images.  See <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;64491&#x2F;please-post-working-code-for-android-image-resize.html#answer-217953">this android code</a> for getting started with a custom module.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 1st 2011, 2:02:26 pm">September 1st 2011</span>
											by <span class='authorname'>Eric Z</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
