<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Ti.App.Properties Doesn&#39;t Work!! Help T_T.. » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Ti.App.Properties Doesn&#39;t Work!! Help T_T..</h1>
		</header>
		<section>
			<p>&#39;app.js&#39;</p>
<pre><code class="hljs">Ti.UI.iPhone.setStatusBarStyle(Titanium.UI.iPhone.StatusBar.OPAQUE_BLACK);
Ti.UI.setBackgroundColor(<span class="hljs-string">'#FFF'</span>);

<span class="hljs-keyword">var</span> tabGroup = Ti.UI.createTabGroup();

<span class="hljs-keyword">var</span> main = Ti.UI.createWindow({
    url:<span class="hljs-string">'main.js'</span>
});

<span class="hljs-keyword">var</span> friend_list = Ti.UI.createWindow({
    url:<span class="hljs-string">'list.js'</span>
});

<span class="hljs-keyword">var</span> friend_add = Ti.UI.createWindow({
    url:<span class="hljs-string">'add,js'</span>
});

<span class="hljs-keyword">var</span> setting = Ti.UI.createWindow({
    url:<span class="hljs-string">'setting.js'</span>
});

<span class="hljs-keyword">var</span> tab1 = Ti.UI.createTab({
    icon:<span class="hljs-string">'./images/main.png'</span>,
    title:<span class="hljs-string">'????'</span>,
    <span class="hljs-built_in">window</span>:main
});

<span class="hljs-keyword">var</span> tab2 = Ti.UI.createTab({
    icon:<span class="hljs-string">'./images/list.png'</span>,
    title:<span class="hljs-string">'????'</span>,
    <span class="hljs-built_in">window</span>:friend_list
});

<span class="hljs-keyword">var</span> tab3 = Ti.UI.createTab({
    icon:<span class="hljs-string">'./images/add.png'</span>,
    title:<span class="hljs-string">'????'</span>,
    <span class="hljs-built_in">window</span>:friend_add
});

<span class="hljs-keyword">var</span> tab4 = Ti.UI.createTab({
    icon:<span class="hljs-string">'./images/setting.png'</span>,
    title:<span class="hljs-string">'??'</span>,
    <span class="hljs-built_in">window</span>:setting
});

tabGroup.addTab(tab1);
tabGroup.addTab(tab2);
tabGroup.addTab(tab3);
tabGroup.addTab(tab4);

<span class="hljs-keyword">if</span> (Ti.App.Properties.getInt(<span class="hljs-string">'authentication'</span>) != <span class="hljs-number">1</span>)
{
    <span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
        backgroundColor:<span class="hljs-string">'#FFF'</span>
    });

    <span class="hljs-keyword">var</span> logo = Ti.UI.createView ({
        backgroundImage:<span class="hljs-string">'./images/logo.png'</span>,
        width:<span class="hljs-number">320</span>,
        height:<span class="hljs-number">100</span>,
        top:<span class="hljs-number">10</span>
    });
    win.add(logo);

    <span class="hljs-keyword">var</span> id = Ti.UI.createTextField ({
        color:<span class="hljs-string">'#336699'</span>,
        top:<span class="hljs-number">120</span>,
        left:<span class="hljs-number">10</span>,
        width:<span class="hljs-number">300</span>,
        height:<span class="hljs-number">35</span>,
        hintText:<span class="hljs-string">'??'</span>,
        keyboardType:Ti.UI.KEYBOARD_NUMBERS_PUNCTUATION,
        returnKeyType:Ti.UI.RETURNKEY_DONE,
        borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED
    });
    win.add(id);

    <span class="hljs-keyword">var</span> pw = Ti.UI.createTextField ({
        color:<span class="hljs-string">'#336699'</span>,
        top:<span class="hljs-number">165</span>,
        left:<span class="hljs-number">10</span>,
        width:<span class="hljs-number">300</span>,
        height:<span class="hljs-number">35</span>,
        hintText:<span class="hljs-string">'????'</span>,
        passwordMark:<span class="hljs-literal">true</span>,
        keyboardType:Ti.UI.KEYBOARD_DEFAULT,
        returnKeyType:Ti.UI.RETURNKEY_DONE,
        borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED
    });
    win.add(pw);

    <span class="hljs-keyword">var</span> joinBtn = Ti.UI.createButton({
        top:<span class="hljs-number">205</span>,
        left:<span class="hljs-number">5</span>,
        width:<span class="hljs-number">100</span>,
        height:<span class="hljs-number">40</span>,
        backgroundImage:<span class="hljs-string">'./images/joinBtn.png'</span>,
        borderWidth:<span class="hljs-number">0</span>
    })
    win.add(joinBtn);

    <span class="hljs-keyword">var</span> loginBtn = Ti.UI.createButton({
        top:<span class="hljs-number">205</span>,
        left:<span class="hljs-number">110</span>,
        width:<span class="hljs-number">100</span>,
        height:<span class="hljs-number">40</span>,
        backgroundImage:<span class="hljs-string">'./images/loginBtn.png'</span>,
        bordeWidth:<span class="hljs-number">0</span>
    });
    win.add(loginBtn);

    <span class="hljs-keyword">var</span> findBtn = Ti.UI.createButton({
        top:<span class="hljs-number">205</span>,
        left:<span class="hljs-number">215</span>,
        width:<span class="hljs-number">100</span>,
        height:<span class="hljs-number">40</span>,
        backgroundImage:<span class="hljs-string">'./images/findBtn.png'</span>,
        borderWidth:<span class="hljs-number">0</span>
    })
    win.add(findBtn);
    win.open();
    id.focus();

    <span class="hljs-keyword">var</span> loginReq = Ti.Network.createHTTPClient();

    loginBtn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{
        <span class="hljs-keyword">if</span>(id.value != <span class="hljs-string">''</span> &amp;&amp; pw.value != <span class="hljs-string">''</span>)
        {
            loginReq.open(<span class="hljs-string">"POST"</span>, <span class="hljs-string">"http://yoobato.com/dev/rufree/json_login.php"</span>);
            <span class="hljs-keyword">var</span> params = {
                id:id.value,
                pw:pw.value
            };
            loginReq.send(params);
        }
        <span class="hljs-keyword">else</span>
        {
            alert(<span class="hljs-string">'??, ????? ??????.'</span>);
        }
    });

    loginReq.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-keyword">var</span> json = <span class="hljs-keyword">this</span>.responseText;
            <span class="hljs-keyword">var</span> response = <span class="hljs-built_in">JSON</span>.parse(json);

            <span class="hljs-keyword">if</span>(response.logged != <span class="hljs-literal">false</span>) {
                Ti.App.Properties.setBool(<span class="hljs-string">'authentication'</span>, <span class="hljs-number">1</span>);
                Ti.App.Properties.setString(<span class="hljs-string">'name'</span>,response.name);
                Ti.App.Properties.setString(<span class="hljs-string">'sid'</span>,response.sid);
                alert(<span class="hljs-string">'????????.'</span>);
                win.close();
                tabGroup.open();
            } <span class="hljs-keyword">else</span> {
                alert(response.message);
            }
        }
        <span class="hljs-keyword">catch</span>(E)
        {
            <span class="hljs-comment">//alert(E);</span>
        }
    };
} <span class="hljs-keyword">else</span> {
    tabGroup.open();
}
</code></pre><p>&#39;main.js&#39;</p>
<pre><code class="hljs">var mainWin = Ti.UI.currentWindow;

mainWin.title = <span class="hljs-string">"????"</span>;
mainWin.barColor = <span class="hljs-string">"#115838"</span>;
mainWin.backgroundColor = <span class="hljs-string">"#FFF"</span>;

var informView = Ti.UI.createView({
    top:<span class="hljs-number">0</span>,
    width:<span class="hljs-number">320</span>,
    height:<span class="hljs-number">75</span>,
    backgroundColor:<span class="hljs-string">'#CCC'</span>
});

<span class="hljs-keyword">if</span> (Ti.App.Properties.getBool(<span class="hljs-string">'authentication'</span>) != <span class="hljs-number">1</span>)

var name = Ti.App.Properties.getString(<span class="hljs-string">'name'</span>);
var sid = Ti.App.Properties.getString(<span class="hljs-string">'sid'</span>);

alert(<span class="hljs-string">"?? : "</span> + sid);

mainWin.add(informView);

<span class="hljs-keyword">function</span> loadpeople()
{
    var data = [];
    var loader = Ti.Network.createHTTPClient();
    loader.open(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"http://yoobato.com/dev/rufree/main.php"</span>);
    var params = {
        sid:sid
    };

    loader.send(params);
    loader.onload = function()
    {
        try {
            var profile = eval(<span class="hljs-string">'('</span>+this.responseText+<span class="hljs-string">')'</span>);
            if(profile.length == <span class="hljs-number">0</span>) {
                data[<span class="hljs-number">0</span>] = <span class="hljs-string">"??? ??? ????."</span>
                var tableView = Ti.UI.createTableView({
                    top:<span class="hljs-number">75</span>,
                    data:data
                });
            } else {
                for(var i=<span class="hljs-number">0</span>;i&lt;profile.length;i++)
                {
                    var major = profile[i].major;
                    var sid = profile[i].sid;
                    var name = profile[i].name;
                    var phone = profile[i].phone;
                    var psid = sid.substr(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>);

                    var row = Ti.UI.createTableViewRow ({
                        phone:phone,
                        height:<span class="hljs-string">'auto'</span>,
                        backgroundColor:<span class="hljs-string">'#FFF'</span>,
                        selectionStyle:Ti.UI.iPhone.TableViewCellSelectionStyle.BLUE,
                        hasChild:false
                    });

                    var profileLabel = Ti.UI.createLabel ({
                        text:major+<span class="hljs-string">" | "</span>+psid+<span class="hljs-string">" | "</span>+name,
                        color:<span class="hljs-string">'#000'</span>,
                        font:{fontSize:<span class="hljs-number">18</span>, fontWeight:<span class="hljs-string">'normal'</span>},
                        left:<span class="hljs-number">5</span>,
                        top:<span class="hljs-number">5</span>,
                        height:<span class="hljs-number">40</span>
                    });
                    row.add(profileLabel);
                    data[i] = row;
                }
                var tableView = Ti.UI.createTableView({
                    top:<span class="hljs-number">75</span>,
                    data:data
                });
            }
            mainWin.add(tableView);

            tableView.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
                var url = <span class="hljs-string">'tel:'</span>+e.rowData.phone;

                if(Ti.Platform.canOpenURL(url)) {
                    Ti.Platform.openURL(url);
                } else {
                    alert(<span class="hljs-string">'???? ?? ??????.'</span>);
                }
            });
        } catch(E) {
            alert(E);
        }
    };
};

<span class="hljs-keyword">function</span> loadtime()
{
    var errdata = [];
    var loader = Ti.Network.createHTTPClient();
    loader.open(<span class="hljs-string">"POST"</span>, <span class="hljs-string">"http://yoobato.com/dev/rufree/time_json.php"</span>);
    loader.send();

    loader.onload = function()
    {
        try
        //echo <span class="hljs-string">'[{"day":"'</span>.<span class="hljs-variable">$day</span>.<span class="hljs-string">'", "hour":"'</span>.<span class="hljs-variable">$hour</span>.<span class="hljs-string">'", "min":"'</span>.<span class="hljs-variable">$min</span>.<span class="hljs-string">'","period":"'</span>.<span class="hljs-variable">$period</span>.<span class="hljs-string">'","rest":"'</span>.<span class="hljs-variable">$rest</span>.<span class="hljs-string">'", "error":"'</span>.<span class="hljs-variable">$err</span>.<span class="hljs-string">'"}]'</span>;
        {
            var json = this.responseText;
            var response = JSON.parse(json);

            alert(response.day + <span class="hljs-string">"?"</span> + response.hour+ <span class="hljs-string">"?"</span> + response.min + <span class="hljs-string">"?"</span> + response.period);

            if(response.error == <span class="hljs-number">1</span>) {
                alert(<span class="hljs-string">'???? : ????? ??????.'</span>);
            } else {
                if(response.day == <span class="hljs-string">"?"</span>) {
                    errdata[<span class="hljs-number">0</span>] = <span class="hljs-string">"?? ???."</span>;
                    var tableView = Ti.UI.createTableView({
                        top:<span class="hljs-number">75</span>,
                        data:errdata
                    });
                } else {
                    if(response.period == <span class="hljs-number">0</span>) {
                        errdata[<span class="hljs-number">0</span>] = <span class="hljs-string">"??????? ????."</span>;
                        var tableView = Ti.UI.createTableView({
                            top:<span class="hljs-number">75</span>,
                            data:errdata
                        });
                    } else {
                        loadpeople();
                    }
                }
            }
        }
        catch(E)
        {
            alert(E);
        }
    };
};
loadtime();

var refreshBtn = Ti.UI.createButton ({
    systemButton:Ti.UI.iPhone.SystemButton.REFRESH
});
refreshBtn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>()
{
    loadtime();
});
mainWin.rightNavButton = refreshBtn;
</code></pre><p>If Authentication (App properties) is &#39;0&#39; then open the login window,<br>and if login succeed, save authentication inform (to 1), id, name in<br>app properties…</p>
<p>But in main.js authentication, name are open successfully but… sid<br>returns undefined…;;</p>
<p>I&#39;ve tried many ways.. but not working… does my code has problem…?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 26th 2012, 11:18:11 pm">March 26th 2012</span>
				by <span class='authorname'>Daeyeol Ryu</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>app properites</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>iphone4</span></li>
					
						<li><span class='tagname'>properties</span></li>
					
						<li><span class='tagname'>ti.app.properties</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-234453">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi Daeyeol</p>
<p>The Ti.App.Properties saves the value as string and you are comparing as integer might me that was the problem. Try comparing that as String too and check if its working or not.</p>
<p>Regards</p>
<p>nikunj</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 27th 2012, 2:39:15 am">March 27th 2012</span>
								by <span class='authorname'>Nikunj Sakhrelia</span><br>
								<a class="icon-bg icon-link" href="question/134443/tiappproperties-doesnt-work-help-tt.html#answer-234453" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;ve tried… but not working.</p>
<p>I think this is titanium&#39;s error;;;<br>because if i try save the sid to (Ti.App.Properties.setString(&#39;name&#39;,response.sid&#39;) it works…;; (but name is not working…)</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2012, 11:17:30 pm">March 27th 2012</span>
											by <span class='authorname'>Daeyeol Ryu</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oh… I&#39;ve solve this…<br>I just change the name…</p>
<p>var sid = Ti.App.Properties.getString(&#39;sid&#39;)</p>
<p>to</p>
<p>var sname = Ti.App.Properties.getString(&#39;sid&#39;)</p>
<p>and it works…</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2012, 11:45:22 pm">March 27th 2012</span>
											by <span class='authorname'>Daeyeol Ryu</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-234456">
				
						<section>
							<p>Hi Daeyeol,</p>
<p>I have tried like this using Ti.App.Properties.setInt in SDK 1.8.0. and IOS 5.0.it works for me.</p>
<pre><code class="hljs"><span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.<span class="hljs-type">Properties</span>.setInt(<span class="hljs-symbol">'ang'</span>,<span class="hljs-number">1</span>);

<span class="hljs-keyword">if</span>(<span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.<span class="hljs-type">Properties</span>.getInt(<span class="hljs-symbol">'ang'</span>))
    {
        alert(<span class="hljs-symbol">'Testing</span> <span class="hljs-keyword">of</span> int');
    }
</code></pre><p>Try this that may help you.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 27th 2012, 3:17:51 am">March 27th 2012</span>
								by <span class='authorname'>Nitin Chavda</span><br>
								<a class="icon-bg icon-link" href="question/134443/tiappproperties-doesnt-work-help-tt.html#answer-234456" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Daeyeol,</p>
<p>Are you sure you get response from <strong>response.sid</strong>  ?.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2012, 4:02:02 am">March 27th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve tried already.. but not working…;; T_T</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2012, 11:18:00 pm">March 27th 2012</span>
											by <span class='authorname'>Daeyeol Ryu</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oh… I&#39;ve solve this…<br>I just change the name…</p>
<p>var sid = Ti.App.Properties.getString(&#39;sid&#39;)</p>
<p>to</p>
<p>var sname = Ti.App.Properties.getString(&#39;sid&#39;)</p>
<p>and it works…</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2012, 11:45:43 pm">March 27th 2012</span>
											by <span class='authorname'>Daeyeol Ryu</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-234481">
				
						<section>
							<p>hi Daeyeol,</p>
<p>make sure that you are getting the response from the webService after authentication</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 27th 2012, 6:59:27 am">March 27th 2012</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/134443/tiappproperties-doesnt-work-help-tt.html#answer-234481" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>What&#39;s that mean…?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2012, 11:18:21 pm">March 27th 2012</span>
											by <span class='authorname'>Daeyeol Ryu</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oh… I&#39;ve solve this…<br>I just change the name…</p>
<p>var sid = Ti.App.Properties.getString(&#39;sid&#39;)</p>
<p>to</p>
<p>var sname = Ti.App.Properties.getString(&#39;sid&#39;)</p>
<p>and it works…</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2012, 11:45:31 pm">March 27th 2012</span>
											by <span class='authorname'>Daeyeol Ryu</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>greate</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 28th 2012, 6:32:50 am">March 28th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
