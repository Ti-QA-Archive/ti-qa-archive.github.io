<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Back button pressing on camera screen with overlay » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Back button pressing on camera screen with overlay</h1>
		</header>
		<section>
			<p>Hi everyone.<br>I have next problem: I&#39;m using camera overlay on both platforms. Camera is opening by pressing button. The problem is when I&#39;m pressing hardware back button on Android, app is closing overlay and showing me black screen, which is closing after second back button pressing. Is there any way to avoid this and close window immediately?<br>Adding &#39;androidback&#39; listener to current window also does nothing, becuase it works only on second pressing.<br>Opening camera:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.createWindow({
    url : <span class="hljs-string">'camera.js'</span>,
    navBarHidden: <span class="hljs-literal">true</span>
});
win.addEventListener(<span class="hljs-string">'androidback'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    Ti.API.info(<span class="hljs-string">"---------------------Back button pressed"</span>);
})
win.open();
</code></pre><p>App starts logging only after second back button pressing.<br>If I add property <code>modal: true</code> to window, it will close immediately, but listener also will not work and second button pressing will not display camera.<br>I&#39;m using Titanium version 3.1.0 GA.<br>Any advices or ideas?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 8th 2013, 7:40:09 am">May 8th 2013</span>
				by <span class='authorname'>Roman Velikodanov</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>android:back</span></li>
					
						<li><span class='tagname'>camera</span></li>
					
						<li><span class='tagname'>overlay</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Why do you open a new window? It should work when you open the camera directly.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 8th 2013, 7:50:34 am">May 8th 2013</span>
								by <span class='authorname'>Manuel Lehner</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-262355">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Roman</p>
<p>A couple of issues.</p>
<p>1) Your using URL on the create window. Not really good, but if you need to ??.</p>
<p>2) On IOS the default back button will close the window before going back to the previous one.<br>    On Android if your capturing the back event then it won&#39;t … so just do a win.close(); on the event handler.</p>
<p>Hopefully this will solve it, if not may need more info.</p>
<p>T.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 8th 2013, 9:26:30 am">May 8th 2013</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/152112/back-button-pressing-on-camera-screen-with-overlay.html#answer-262355" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-262359">
				
						<section>
							<p>I&#39;m using URL because of creating several instances of the same button, which one is opening different windows, which URL&#39;s are passing to function as parameters. So I used Kitchen Sink example.<br>Howbeit, I&#39;ve worked a bit on changing logic and opening camera without creating new window and the problem is gone.<br>Thanks Manuel for advice and Trevor for answer.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 8th 2013, 10:28:04 am">May 8th 2013</span>
								by <span class='authorname'>Roman Velikodanov</span><br>
								<a class="icon-bg icon-link" href="question/152112/back-button-pressing-on-camera-screen-with-overlay.html#answer-262359" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>IF this is a comment, why posting it as reply&#x2F;answer?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 8th 2013, 6:03:58 pm">May 8th 2013</span>
											by <span class='authorname'>Mauro Parra</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
