<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>XHR Request doesn&#39;t actually stop script while loading remote data... any solution? (Async?) » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>XHR Request doesn&#39;t actually stop script while loading remote data... any solution? (Async?)</h1>
		</header>
		<section>
			<p>XHR Request doesn&#39;t actually stop script while loading remote data… any solution?</p>
<p>Does anyone know of a good workaround to this?  It seems to be crashing my app since the app doesnt have all the remote data yet and just marches on, which is strange it seems…</p>
<p>thanks!!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 30th 2011, 12:37:09 am">July 30th 2011</span>
				by <span class='authorname'>C H</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>async</span></li>
					
						<li><span class='tagname'>xhr</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-214932">
				
						<section>
							<p>It isn&#39;t strange – it is the nature of async processing.  And actually, it is a good thing because since it is async and running on its own thread, it does not block UI processing.  This can make for a much smoother user experience.</p>
<p>In terms of a workaround, what you need to do is not perform the logic which depends on the remote data until the xhr&#39;s onload event.  In other words, the rest of your script which &quot;just marches on&quot;, needs to go inside the onload or inside a function or custom event which gets called during the onload.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 30th 2011, 2:02:22 am">July 30th 2011</span>
								by <span class='authorname'>Doug Handy</span><br>
								<a class="icon-bg icon-link" href="question/123462/xhr-request-doesnt-actually-stop-script-while-loading-remote-data-any-solution-async#answer-214932" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the explanation. Thats what I had in my mind.</p>
<p>THe thing is, my entire script (a tableview populating XML data from a remote server) is inside of the xhr.onload event, so I figure it would only run the script after all the data is loaded.  </p>
<p>However it doesn&#39;t seem to actually be running in that way.   </p>
<p>The way I know this is that I hard coded a row to be added after all the XML data was parsed and put into the tableview.  </p>
<p>Sometimes, the tableview will load with my hard coded new row on the top of the screen and no XML data, meaning that the script couldn&#39;t load the XML for some reason and moved on to my hard coded row.</p>
<p>Im also getting alot of crashes, so I <em>think</em> its crashing because my loops are trying to parse data that isnt there?  but I&#39;m not sure..</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 30th 2011, 12:11:14 pm">July 30th 2011</span>
											by <span class='authorname'>C H</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That just suggests the xhr is not always completing right.  Did you also add an onerror() callback?  You should, and at least put a Ti.API.info statement there, or an alert(), or something to let you know an error occured.</p>
<p>Also inside the onload callback, I suggest you set a breakpoint or dump some values prior to your loop.  I&#39;d dump the http status return code (xhr.status), as well as the length of the responseText and the first 100 bytes or whatever so you can see if you are getting the start of the expected xml.</p>
<p>Once you see what you get back when you don&#39;t have the proper xml, code a test for that prior to your loop to avoid the crashes.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 30th 2011, 12:50:22 pm">July 30th 2011</span>
											by <span class='authorname'>Doug Handy</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
