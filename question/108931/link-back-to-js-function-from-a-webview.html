<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Link back to js function from a Webview? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Link back to js function from a Webview?</h1>
		</header>
		<section>
			<p>Is there a way to link back to a js file from a webview? Once the webview is displayed, I&#39;d like to have the equivalent of:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"contactus.js"</span>&gt;</span>Contact Us Today <span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
</code></pre><p>in the webview so that when they tap the link, it will take them to a form that I&#39;ve already set up.</p>
<p>I tried this:</p>
<pre><code class="hljs">&lt;input <span class="hljs-keyword">type</span>=<span class="hljs-string">"button"</span> onClick=<span class="hljs-string">"parent.location='../contactus.js'"</span> <span class="hljs-keyword">value</span>=<span class="hljs-symbol">'click</span> here' /&gt;
</code></pre><p>and while this attempts to execute, only a black screen comes up.</p>
<p>Thanks for any ideas!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 4th 2011, 6:03:11 pm">February 4th 2011</span>
				by <span class='authorname'>Korky Kathman</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>1.2.2</span></li>
					
						<li><span class='tagname'>10.6</span></li>
					
						<li><span class='tagname'>ios4.2</span></li>
					
						<li><span class='tagname'>mac</span></li>
					
						<li><span class='tagname'>osx</span></li>
					
						<li><span class='tagname'>titaniummobile</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I read through this whole thread and I am a little confused…<br>Are you just trying to create a form on an web page in a webview and submit the contents back to the iphone app for processing?</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 5th 2011, 5:19:55 am">February 5th 2011</span>
								by <span class='authorname'>Aaron Saunders</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Howdy Aaron.<br>The overall idea, originally, was to do the following flow:<br>1) Present a table of options (Course Titles) -  TableView<br>2) On tap above, show a detail description of the course - (Webview)<br>3) On the webview, allow them to contact the educator via email - i.e. fill out a form and send the email.<br>4) Allow the user to naturally go backwards to the table again, etc.</p>
<p>I already had written a function that captured name, email a message and sent that using the Email.Dialog,  That function was called contactus.js.   </p>
<p>What I wanted to do, was in step 2 above, provide a way that when the user &quot;clicked&quot; on a button in the HTML, it would go directly to contactus.js.  I spent about 4-5 hours trying to get this to work via the evalJS but to no avail.</p>
<p>So, what ended up working was hosting three php-programs on the client&#39;s website, programming those screens to fit the iPhone screen, and allowed the user to enter the data, send the email and then come back with a Thank You screen.  The Webviews supported this just fine.</p>
<p>Hope that helps!</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 5th 2011, 5:30:02 am">February 5th 2011</span>
								by <span class='authorname'>Korky Kathman</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-192511">
				
						<section>
							<p>Korky</p>
<p>I have seen this inquired from users here a number of times, but never seen a conclusive answer. Obviously, Titanium won&#39;t respond to API commands hosted on a remote web server, as this would have security implications.</p>
<p>However, you should check out <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.UI.WebView.evalJS-method.html">Ti.UI.WebView.evalJS()</a>, which invokes JavaScript inside the context of the webview, and the code in <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;blob&#x2F;master&#x2F;demos&#x2F;KitchenSink&#x2F;Resources&#x2F;examples&#x2F;web_views.js">web_views.js</a> particularly from line 122 onwards. Although that functionality is commented out for android, it will work, if you change the if clause at the top.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 4th 2011, 7:33:17 pm">February 4th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/108931/link-back-to-js-function-from-a-webview.html#answer-192511" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ahh,  that may be the ticket, Paul.  The scenario is that the user has tapped through a couple of screens and gotten to a webview (on the phone,not remotely) that shows content, but then if they want more information, they click the button. I already have a contactus.js that is tied to a tab so I wanted to use the same program.  </p>
<p>Thanks VERY much for your suggestion!  I&#39;ll examine those options. If I get this working, I&#39;ll post a sanitized answer here for all.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 7:37:22 pm">February 4th 2011</span>
											by <span class='authorname'>Korky Kathman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You&#39;re welcome! :)  If the js form just creates html within the webview, then it&#39;s definitely possible. If you need user actions within the webview to invoke Titanium API functions; that&#39;s a different question, and it would be nice to know the answer. :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 7:49:55 pm">February 4th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>While those are good examples, I don&#39;t think they have applicability, unfortunately for my app here.</p>
<p>Since the Webview is straight HTML, I assumed that the iPhone was acting as the HTTP webserver. I could, I suppose create an HTML form, but then what to do with the POST data?  My skills are lacking on the JS side, but I know how to do it using PHP :)</p>
<p>The fact is, that I need to actually transfer command from the webview, that has been rendered,  to a JS function, not just get an evaluation. The input example I showed up at the top seems to be trying to go to that contactus.js function, but it just delivers a black page, instead of the screen. There are no errors or warnings. If I change it to an incorrect location or filename, Titanium developer does complain about it. </p>
<p>Like you, I&#39;m at a loss. The evalJS thing might just be under-documented perhaps, and since I need to render the HTML webview and put a button&#x2F;choice there, I&#39;m not sure I understand how that works from the example in the Kitchen Sink.</p>
<p>Still trying other options, but this is a real brain teaser.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 8:43:58 pm">February 4th 2011</span>
											by <span class='authorname'>Korky Kathman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>My next step is to try to create another Webview (HTML) form to capture the signup, then call a javascript function within the webview (in the head as a &lt;script&gt;) to process the POSTED variables in the form and call the Email Dialog. In essence I&#39;ll do a typical HTML Form, with submit, but with an onSubmit directive in the form declaration.  Paul, will this work? or will I need to use the EvalJS?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 9:01:24 pm">February 4th 2011</span>
											by <span class='authorname'>Korky Kathman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The above did not work. Apparently, when Titanium renders the Webview it disables ANY events. So, putting in:</p>
<pre><code class="hljs">&lt;<span class="hljs-tag">form</span> onSubmit=<span class="hljs-string">"sendEmail()"</span> action=<span class="hljs-string">"thankyou.html"</span>&gt;
</code></pre><p>Will not work in a rendered Webview. The onSubmit event sendEmail() is never called. It&#39;s ignored, but the action function is initiated just fine.</p>
<p>I think this is a serious shortcoming. I&#39;ve seen examples of js in an html working in the Kitchen Sink, so, actively using js that&#39;s created either in an external file or inline, should work.  But apparently the webview totally ignores any event triggers.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 9:26:00 pm">February 4th 2011</span>
											by <span class='authorname'>Korky Kathman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Progress, of sorts…I can now display the webview, and get it to evalJS properly.  However, what I need is a javascript command to put in that evalJS and says &quot;load contact.js and execute it. </p>
<p>The program that calls the webview contains an eventListener for a click on the webview (not really the best thing), then when you tap the screen, it DOES do whatever is in the evalJS expression. So if anyone knows how to just &quot;GoTo contact.js&quot;  I&#39;ll have it made.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 10:54:05 pm">February 4th 2011</span>
											by <span class='authorname'>Korky Kathman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you have access&#x2F;control of the remote server, I am not sure I understand why you need to use a webview. Why not return json from the server, and display the inforamtion natively?</p>
<p>Even if you do need to use a webview, couldn&#39;t you simply show the &quot;course information&quot; webview in a slightly smaller window, and have a native &quot;Contact Us&quot; button at the top of the screen, which would invoke the native controls &#x2F; Titanium API on a click event?</p>
<p>Obviously, I don&#39;t know the details of the project, so there may well be mitigating circumstances that mean that these options aren&#39;t possible but, still, I would think it is a more standard approach.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 5th 2011, 8:19:44 am">February 5th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-192741">
				
						<section>
							<p>This is normally not the protocol, answering your own question,  but the solution lies not within the Titanium framework, so the provided suggested answer, won&#39;t be of help, at least with what I tried to do.</p>
<p>Solution:</p>
<p>Render the Webview, with hyperlinks to a hosted solution (i.e a client&#39;s site). Once the Webview is in place, it acts just like any html.  You set your input button as described earlier in the thread, but link to a website on the client side that you&#39;ve designed in a 320x367 (this takes into account the top bar and bottom tabs) Then design a simple sign-up form, process it with normal POST methodology, and link to a success screen at the end. The whole process will remain in the same tab.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 5th 2011, 3:13:49 am">February 5th 2011</span>
								by <span class='authorname'>Korky Kathman</span><br>
								<a class="icon-bg icon-link" href="../../question/108931/link-back-to-js-function-from-a-webview.html#answer-192741" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Korky</p>
<p>This is really good information, and thank you for sharing it. However, please don&#39;t answer your own posts. The &quot;protocol&quot; is to post your answer as a comment to another user&#39;s answer, as explained in the <a href="http:&#x2F;&#x2F;guides.appcelerator.com&#x2F;en&#x2F;contribute.html#participating_in_the_q&amp;a">Participating in the Q&amp;A</a> guide. If you do it this way, not only is the discussion easier to follow, you will be able to mark it &quot;best&quot; and others will be able to more easily find the solution in future. Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 5th 2011, 8:09:07 am">February 5th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-192981">
				
						<section>
							<p>my suggestion… sorry I am late to the party…</p>
<p>do not attempt to call contact.js from the webView, fire an event from the webView the will get picked up by an eventListener in contact.js.</p>
<p>the fireEvent will pass the values from the webview back to the iphone app and you can execute contact.js methods and have the appropriate values</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 5th 2011, 3:26:12 pm">February 5th 2011</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="../../question/108931/link-back-to-js-function-from-a-webview.html#answer-192981" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
