<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Error NSLock from incompatible type in iPhone Krollbridge.mm » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Error NSLock from incompatible type in iPhone Krollbridge.mm</h1>
		</header>
		<section>
			<p>I&#39;m using latest 4.2 apple SDK (iOS5), Titanium Studio 1.0.4.2….<br>When I try and create a new application (or load the kitchen sink) and do a new build to launch on the simulator, I get the following error</p>
<pre><code class="hljs">[<span class="hljs-keyword">ERROR</span>] /Users/Mac4/Documents/Titanium Studio Workspace/TestApp1/build/iphone/Classes/KrollBridge.mm:167:13:{167:15-167:45}: <span class="hljs-keyword">error</span>: assigning to 'NSLock *' from incompatible <span class="hljs-keyword">type</span> 'NSRecursiveLock *' [3]
[<span class="hljs-keyword">ERROR</span>] 
[<span class="hljs-keyword">ERROR</span>] <span class="hljs-keyword">Error</span>: Traceback (most recent call last):
  <span class="hljs-keyword">File</span> <span class="hljs-string">"/Library/Application Support/Titanium/mobilesdk/osx/1.6.2/iphone/builder.py"</span>, <span class="hljs-keyword">line</span> 1091, <span class="hljs-keyword">in</span> main
    execute_xcode(<span class="hljs-string">"iphonesimulator%s"</span> % link_version,[<span class="hljs-string">"GCC_PREPROCESSOR_DEFINITIONS=__LOG__ID__=%s DEPLOYTYPE=development TI_DEVELOPMENT=1 DEBUG=1 TI_VERSION=%s"</span> % (log_id,sdk_version)],False)
  <span class="hljs-keyword">File</span> <span class="hljs-string">"/Library/Application Support/Titanium/mobilesdk/osx/1.6.2/iphone/builder.py"</span>, <span class="hljs-keyword">line</span> 1012, <span class="hljs-keyword">in</span> execute_xcode
    output = <span class="hljs-keyword">run</span>.<span class="hljs-keyword">run</span>(<span class="hljs-keyword">args</span>,False,False,o)
  <span class="hljs-keyword">File</span> <span class="hljs-string">"/Library/Application Support/Titanium/mobilesdk/osx/1.6.2/iphone/run.py"</span>, <span class="hljs-keyword">line</span> 39, <span class="hljs-keyword">in</span> <span class="hljs-keyword">run</span>
    sys.<span class="hljs-keyword">exit</span>(rc)
SystemExit: 65
</code></pre><p>I modified the KrollBridge.h file to make proxyLock into a NSRecursiveLock type but the build still fails.</p>
<p>Running an xcodebuild from the command line successfully builds the binary albeit with a few error warnings during validation about the architecture.</p>
<p>Then launching the app in the simulator the first time fails due to a time-out.<br>If I pre-run the simulator its fine.</p>
<ol>
<li>Can you tell me how to update the boilerplate code to fix the Krollbridge error please and how to flag it up as a bug?</li>
<li>Can you tell me where I can modify the emulator startup timeout.</li>
</ol>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 17th 2011, 7:51:27 am">October 17th 2011</span>
				by <span class='authorname'>Spencer Westwood</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios5 nslock, iphone</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I&#39;m getting the same error trying to build using mobilesdk 1.6.3 and Xcode 4.2. It was all working fine with Xcode 4.1, but now i&#39;ve upgraded my phone to ios5 and I need to test on it!</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 17th 2011, 8:38:49 am">October 17th 2011</span>
								by <span class='authorname'>Joe Lewsey</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Same here, I&#39;m adding a HelpDesk ticket pointed to this, I&#39;ll report back if I get anything from Appcelerator support</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 17th 2011, 9:03:20 am">October 17th 2011</span>
								by <span class='authorname'>Mark Henderson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>http:&#x2F;&#x2F;support.appcelerator.com&#x2F;tickets&#x2F;APP-228915&#x2F;tickets</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 17th 2011, 9:09:15 am">October 17th 2011</span>
								by <span class='authorname'>Mark Henderson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thx Mark, will keep an eye on the ticket.</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 17th 2011, 9:11:43 am">October 17th 2011</span>
								by <span class='authorname'>Spencer Westwood</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-221121">
				
						<section>
							<p>Mark and Spencer,</p>
<p>To use iOS5 and or Xcode 4.2 you must use the (currently CI build) of Titanium version 1.7.3<br>This can be found here - http:&#x2F;&#x2F;builds.appcelerator.com.s3.amazonaws.com&#x2F;index.html</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 17th 2011, 12:10:21 pm">October 17th 2011</span>
								by <span class='authorname'>Matt Apperson</span><br>
								<a class="icon-bg icon-link" href="../../question/126934/error-nslock-from-incompatible-type-in-iphone-krollbridgemm.html#answer-221121" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I can&#39;t I use a custom module that doesn&#39;t work with 1.7+ and I don&#39;t have the source for it :(</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 17th 2011, 3:35:43 pm">October 17th 2011</span>
											by <span class='authorname'>Mark Henderson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Mark, </p>
<p>Unfortunately until the developer of the module updates for iOS5, your only options are to stop using the module, or to just not work with Xcode 4.2 and iOS5… perhaps if you share what your module does Myself or someone else in the community can point you to a module that would work for you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 17th 2011, 3:46:36 pm">October 17th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>All this link did was allow me to download an empty project… is that right? I thought this was a version of Ti that allowed me to work with iOS5? Am I missing something?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2011, 8:53:43 pm">November 8th 2011</span>
											by <span class='authorname'>Tim Click</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Tim, This lets you download a CI build of the SDK… that said if you just update to the latest 1.7.5 build that was released a few days ago, thats supports iOS5</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2011, 11:04:17 pm">November 8th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-221224">
				
						<section>
							<p>It&#39;s Ok for the moment, I can wait for things to settle down as I&#39;m just finishing off a pure Obj-C app at the moment. </p>
<p>As the fix for me was a bit of fiddling along with modifying the Source Code to get rid of the error with the wrong type, modifying the one line in the header file is not a hardship. It&#39;s now working.</p>
<p>I&#39;ve had to revisit a few of my native Apps to fix depreciated functions as well.</p>
<p>Kind regards all, Spencer</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 18th 2011, 11:08:56 am">October 18th 2011</span>
								by <span class='authorname'>Spencer Westwood</span><br>
								<a class="icon-bg icon-link" href="../../question/126934/error-nslock-from-incompatible-type-in-iphone-krollbridgemm.html#answer-221224" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Sepencer. What function exactly did you modified? I am having the same problem here, but can&#39;t find out what to correct</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 22nd 2011, 6:29:29 am">November 22nd 2011</span>
											by <span class='authorname'>Guillermo Fernandez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;m curious too!</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 19th 2011, 9:18:14 pm">December 19th 2011</span>
											by <span class='authorname'>Mark Ruys</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
