<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Problems with iOS multi value settings » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Problems with iOS multi value settings</h1>
		</header>
		<section>
			<p>I can&#39;t seem to read a multi value setting from my Settings.bundle.</p>
<p>The plist and code are below. This always displays this info in the debug window:</p>
<p><code>[INFO] Duration = null</code></p>
<p>Any ideas?</p>
<p>Here is the Root.plist:</p>
<pre><code class="hljs"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-doctype">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">plist</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"1.0"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>PreferenceSpecifiers<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>TestAppc<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSGroupSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>DefaultValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Key<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>duration<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Duration<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Titles<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>1 second<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>3 seconds<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>5 seconds<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSMultiValueSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Values<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">integer</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">integer</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">integer</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">integer</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">integer</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-title">integer</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>StringsTable<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Root<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">plist</span>&gt;</span>
</code></pre><p>And here is the code. This always displays a value of null for the duration preference:</p>
<pre><code class="hljs">Titanium.API.info(<span class="hljs-string">"Duration = "</span> + Titanium.App.<span class="hljs-keyword">Properties</span>.getInt(<span class="hljs-string">'duration'</span>));
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 8th 2011, 12:20:28 am">June 8th 2011</span>
				by <span class='authorname'>Manuel Flores</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-209584">
				
						<section>
							<p>When getting&#x2F;setting an array using the Properties module, you&#39;ll want to use getList&#x2F;setList respectively. This should return an array value for the given property.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 8th 2011, 4:57:11 am">June 8th 2011</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/120694/problems-with-ios-multi-value-settings#answer-209584" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the suggestion.<br>But the return value is not an array, it&#39;s a number that corresponds to the selection the user made. If an array were returned, how will I know which one was selected? If they select &quot;1 second&quot;, returns &quot;1&quot;, select &quot;3 seconds&quot;, returns &quot;3&quot;, etc.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 8th 2011, 11:12:21 am">June 8th 2011</span>
											by <span class='authorname'>Manuel Flores</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Your absolutely right, my apologies, not enough sleep …<br>The value that you get from a settings property will return null until the first time you set it. Try bouncing over to your settings page and setting the property to any value, then go back to your app and read the preference again.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 8th 2011, 12:43:48 pm">June 8th 2011</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No prob, I appreciate the help and guidance.</p>
<p>I&#39;m using the Settings area of the iPhone so I don&#39;t think I can bounce over there. I think I&#39;ve seen a similar problem when using the SDK and Objective C.<br>If I set the value before reading it, won&#39;t this defeat the purpose of storing the preference in Settings? I&#39;d rather read the settings that are already in the Settings area, even if they are at their default values.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 8th 2011, 9:46:12 pm">June 8th 2011</span>
											by <span class='authorname'>Manuel Flores</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I understand exactly what you are saying, this is just something I&#39;ve noticed when using the app settings. The Properties API will not return the setting value until the first time it has been set&#x2F;changed. So you need to sanity check and use default values in your get methods within your app code as well as in the .plist</p>
<p>So, in order to make sure the value is set, you will need to launch the settings page for your app, set your values, then launch your app again. That should ensure that your settings return the proper values.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 8th 2011, 11:02:01 pm">June 8th 2011</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-209670">
				
						<section>
							<p>OK, I think I got it. It seems to work with this code:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> duration_preference = Titanium.App.Properties.getString(<span class="hljs-string">'duration_preference'</span>);
<span class="hljs-keyword">if</span> (duration_preference == <span class="hljs-literal">null</span>) {
  duration_preference = <span class="hljs-number">3</span>;
  Titanium.App.Properties.setString(<span class="hljs-string">'duration_preference'</span>, <span class="hljs-string">'3'</span>);
}
Titanium.API.info(<span class="hljs-string">"Duration = "</span> + duration_preference);
</code></pre><p>This will set the default value of the preference if getting the value returns null.<br>It also seems to make a difference if I don&#39;t append the &quot;_preference&quot; with the setting identifier.</p>
<p>Thanks for the suggestions!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 8th 2011, 11:37:47 pm">June 8th 2011</span>
								by <span class='authorname'>Manuel Flores</span><br>
								<a class="icon-bg icon-link" href="question/120694/problems-with-ios-multi-value-settings#answer-209670" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
