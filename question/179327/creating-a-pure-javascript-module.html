<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Creating a pure JavaScript module » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Creating a pure JavaScript module</h1>
		</header>
		<section>
			<p>Titanium SDK Version: 3.4.1. Studio: build: 3.4.1.201410281727</p>
<p>Hi,</p>
<p>I&#39;m trying to create a titanium module that I can share between different projects. I found a tutorial explaining how to do this at:  <a href="http:&#x2F;&#x2F;code.tutsplus.com&#x2F;tutorials&#x2F;creating-titanium-mobile-modules-using-commonjs--mobile-16833">http:&#x2F;&#x2F;code.tutsplus.com&#x2F;tutorials&#x2F;creating-titanium-mobile-modules-using-commonjs–mobile-16833</a></p>
<p>But when I follow this tutorial and try to package the module I get an error saying:</p>
<p>IOError: [Errno 2] No such file or directory: &#39;Path-to-Project<strong>&#x2F;iphone&#x2F;assets&#x2F;</strong>com.boydlee.picasa&#39;</p>
<p>It&#39;s looking for the file in de wrong folder it should be Path-to-Project<strong>&#x2F;assets&#x2F;</strong>com.boydlee.picasa&#39; . When I place the file in the <strong>iphone&#x2F;assets</strong> folder it wil build, but then I can&#39;t call the fucntions in the com.boydlee.picasa.js file.</p>
<p>If the iOS module works I also want to create it for Android. (the commonjs module shipped with titanium, ti.cloud, seems to work on all platforms).</p>
<p>My question is: How can I create a packaged commonjs module (modules&#x2F;commonjs&#x2F;{moduleid}, like ti.cloud)?</p>
<p>Teun</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 28th 2014, 8:06:31 am">November 28th 2014</span>
				by <span class='authorname'>Teun Klijn</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>commonjs</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>module</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-284114">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Good question!</p>
<p>There used to be a Python script to build and package pure CommonJs modules. But I think they&#39;ve excluded it from the SDK and I&#39;m not even sure if this was ever described in the module development guide. That old script is not working anymore with the current version of Titanium.</p>
<p>I&#39;ve written my own little build script as a grunt task. If you&#39;re familiar with grunt then you can use it (needs to be adopted for your module). You can grab it here:</p>
<p><a href="https:&#x2F;&#x2F;github.com&#x2F;manumaticx&#x2F;ti.piwik&#x2F;blob&#x2F;master&#x2F;Gruntfile.js">https:&#x2F;&#x2F;github.com&#x2F;manumaticx&#x2F;ti.piwik&#x2F;blob&#x2F;master&#x2F;Gruntfile.js</a> (Only the <strong>build</strong> task is of interest here)</p>
<p>I&#39;d suggest to use the same folder structure to organize your module project.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 28th 2014, 9:00:34 am">November 28th 2014</span>
								by <span class='authorname'>Manuel Lehner</span><br>
								<a class="icon-bg icon-link" href="../../question/179327/creating-a-pure-javascript-module.html#answer-284114" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-284119">
				
						<section>
							<p>Hi</p>
<p>You can create a compiled CommonJS module - which you appear to have achieved.</p>
<p>However you are trying to add in dependant modules - this you cannot do.</p>
<p>Modules are stand-alone projects and should not assume or include links to other pre-existing modules as dependants.</p>
<p>So in short;</p>
<ul>
<li>Your CommonJS module cannot include the existing module <em>&quot;com.boydlee.picasa&quot;</em> as a dependency.</li>
</ul>
<p>You can create your own modules using the CommonJS compile method but they can only include JavaScript code.  Once compiled they expose whatever you made them expose.</p>
<p>Your example of Ti.Cloud is a good own and it is essentially a library of calls to an api server that;</p>
<ul>
<li>accepts data in predefined ways</li>
<li>performs actions based on that data</li>
<li>then returns back a result of data as required</li>
</ul>
<p>That library includes all the code it requires to achieve this internally.  Having said that, the Ti.Cloud module could be either a platform native module or CommonJS as the function set would not matter too much either way. </p>
<p>It would also not be appropriate to allow one individual to package up another individuals modules inside their own.  Whilst you only require this for your own use, in the wrong hands others could &quot;wrap&quot; other peoples work and call it their own.</p>
<p>If you wish to make reusable components for your projects that are dependant on external modules you could use Alloy and build Widgets.  This is one of the things we do and it works perfectly.  You do need to define the dependencies like; which external platform native modules should be included to support the widget if required.  But this is nothing in the grand scheme of things.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 28th 2014, 1:06:05 pm">November 28th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/179327/creating-a-pure-javascript-module.html#answer-284119" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;m not trying to include &quot;com.boydlee.picasa&quot; in my module project, com.boydlee.picasa is the id of the module you make in the tutorial I linked. I&#39;m trying to package my own JavaScript module. Which I&#39;m able to do now by putting my js files in the &#x2F;iphone&#x2F;assets or &#x2F;android&#x2F;assets folder of a new module project, but not when I put the js files in the top level &#x2F;assets folder of a new module project.</p>
<p>The problem with this is that I have to create two module projects (one for iOS and one for Android), while I&#39;m only using JavaScript which is exactly the same for both platforms. A new platform specific module project also contains native code for the platform which I don&#39;t use and cannot delete.</p>
<p>What I understand from Manuel Lehner&#39;s answer is that there used to be a python script to build commonjs modules, but it&#39;s gone now. So I guess I will try to use Manuels grunt task from now on.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 2nd 2014, 6:41:25 am">December 2nd 2014</span>
											by <span class='authorname'>Teun Klijn</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That hybrid technique is used to enhance native modules with javascript methods. Using it for JS only creates a lot of unnecessary overhead.</p>
<p>To create a packaged commonJs module, all you need to do is create a ZIP named: <strong>moduleid-platform-version.zip</strong> with the following content:</p>
<ul>
<li>modules&#x2F;commonjs&#x2F;&lt;moduleid&gt;&#x2F;&lt;version&gt;&#x2F;&lt;moduleid&gt;.js</li>
<li>modules&#x2F;commonjs&#x2F;&lt;moduleid&gt;&#x2F;&lt;version&gt;&#x2F;LICENSE</li>
<li>modules&#x2F;commonjs&#x2F;&lt;moduleid&gt;&#x2F;&lt;version&gt;&#x2F;manifest</li>
</ul>
<p>That&#39;s it. If you want to get listed on gittio, don&#39;t forget to include a module.xml into the repo.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 2nd 2014, 8:00:28 pm">December 2nd 2014</span>
											by <span class='authorname'>Manuel Lehner</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
