<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Refernce Error Variable not found. » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Refernce Error Variable not found.</h1>
		</header>
		<section>
			<p>http:&#x2F;&#x2F;mobile.tutsplus.com&#x2F;tutorials&#x2F;appcelerator&#x2F;titanium-user-authentication&#x2F;</p>
<p>I am following the same tutorial. This is my first time working on titanium mobile. i am using a mac and have added the same code given in the tutorial. But i am getting a Reference error: varialble not found. when call the &#39;fireEvent&#39; function. Using mac i get the error and app crashes but on windows i dont get the error. What am i doing wrong in here.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 27th 2012, 4:21:44 pm">March 27th 2012</span>
				by <span class='authorname'>Shreyash Dholakia</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>application</span></li>
					
						<li><span class='tagname'>osx</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>check that your variable is not out the scope, and try providing more info</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 27th 2012, 4:33:10 pm">March 27th 2012</span>
								by <span class='authorname'>Arian Caraballo</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Arian thanks for responding. This is my app.js</p>
<pre><code class="hljs"><span class="hljs-comment">// this sets the background color of the master UIView (when there are no windows/tab groups on it)</span>
Titanium.UI.setBackgroundColor(<span class="hljs-string">'#fff'</span>);

<span class="hljs-keyword">var</span> tabGroup = Titanium.UI.createTabGroup();  
<span class="hljs-keyword">var</span> main = Titanium.UI.createWindow();
<span class="hljs-keyword">var</span> mainTab = Titanium.UI.createTab(); 

<span class="hljs-keyword">var</span> login = Titanium.UI.createWindow({
    title:<span class="hljs-string">'User Authentication Demo'</span>,
    url:<span class="hljs-string">'authenticate/login.js'</span>
});

<span class="hljs-keyword">var</span> loginTab = Titanium.UI.createTab({
    title:<span class="hljs-string">"Login"</span>,
    <span class="hljs-built_in">window</span>:login
}); 

<span class="hljs-keyword">var</span> account = Titanium.UI.createWindow({
    title:<span class="hljs-string">'Register'</span>,
    url:<span class="hljs-string">'authenticate/account.js'</span>
});

<span class="hljs-keyword">var</span> accountTab = Titanium.UI.createTab({
    title:<span class="hljs-string">'New Account'</span>,
    <span class="hljs-built_in">window</span>:account
});

tabGroup.addTab(loginTab);
tabGroup.addTab(accountTab);
tabGroup.open();
</code></pre><p>And this is my login.js where i am trying to reference the var </p>
<pre><code class="hljs">var loginReq = Titanium.Network.createHTTPClient()<span class="hljs-comment">;</span>

loginReq.onload = function()
{
    /*var json = this.responseText<span class="hljs-comment">;</span>
    var response = JSON.parse(json)<span class="hljs-comment">;</span>

    if (response.logged == true)  
    {  
        alert("Welcome " + response.name + ". Your email is: " + response.email)<span class="hljs-comment">;  </span>
    }  
    else  
    {  
        alert(response.message)<span class="hljs-comment">;  </span>
    } */

    var json = this.responseText<span class="hljs-comment">;  </span>
    var response = JSON.parse(json)<span class="hljs-comment">;  </span>
    if (response.logged == true)  
    {  
        username.blur()<span class="hljs-comment">;  </span>
        password.blur()<span class="hljs-comment">;  </span>


        Ti.App.fireEvent('loginSuccess', {  
            name:response.name,  
            email:response.email
        })<span class="hljs-comment">;  </span>
        //win.close()<span class="hljs-comment">;  </span>
    }  
    else  
    {  
        alert(response.message)<span class="hljs-comment">;  </span>
    } 

}<span class="hljs-comment">;</span>

Ti.App.addEventListener('loginSuccess', function(event)
{

    main.tabBarHidden   = true<span class="hljs-comment">;</span>

    main.title      = 'Welcome ' + event.name<span class="hljs-comment">;</span>
    main.url        = 'authenticate/main.js'
    main.name       = event.name<span class="hljs-comment">;</span>
    main.email      = event.email<span class="hljs-comment">;</span>
    mainTab.window  = main<span class="hljs-comment">;</span>

    tabGroup.addTab(mainTab)<span class="hljs-comment">;</span>
    tabGroup.removeTab(loginTab)<span class="hljs-comment">;</span>
    tabGroup.removeTab(accountTab)<span class="hljs-comment">;</span>


})<span class="hljs-comment">;</span>
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="March 27th 2012, 5:41:08 pm">March 27th 2012</span>
								by <span class='authorname'>Shreyash Dholakia</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-234604">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>hi Shreyash,</p>
<p>you can do that in other way also..<br>like passing your main window and tabGroup to your login window..</p>
<p>let me explain you more</p>
<p>in your app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> login = Titanium.UI.createWindow({
    title:<span class="hljs-string">'User Authentication Demo'</span>,
    url:<span class="hljs-string">'authenticate/login.js'</span>
});
login.mainWin = main;
login.tabGrp = tabGroup;
</code></pre><p>in your login.js</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> win</span> = Ti.UI.currentWindow;
<span class="hljs-variable"><span class="hljs-keyword">var</span> main</span> = win.mainWin;
<span class="hljs-variable"><span class="hljs-keyword">var</span> tabGroup</span> = win.tabGrp;
</code></pre><p>now you can access that two objects from your <strong>login.js</strong> window…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 28th 2012, 10:09:29 am">March 28th 2012</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/134485/refernce-error-variable-not-found#answer-234604" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Mitul,<br>Thanks for the help. I was able to solve it by using the way you suggested.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 28th 2012, 12:31:22 pm">March 28th 2012</span>
											by <span class='authorname'>Shreyash Dholakia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>that&#39;s greate….</p>
<p>now can you mark this question as accepted so that other developers can get the idea from your question</p>
<p>thnx</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 28th 2012, 12:38:08 pm">March 28th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hey are you satisfy with the answer..?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 29th 2012, 6:46:26 am">March 29th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-234554">
				
						<section>
							<p>Arian thanks for responding.<br>This is my app.js</p>
<pre><code class="hljs">
<span class="hljs-comment">// this sets the background color of the master UIView (when there are no windows/tab groups on it)</span>
Titanium.UI.setBackgroundColor(<span class="hljs-string">'#fff'</span>);

<span class="hljs-keyword">var</span> tabGroup = Titanium.UI.createTabGroup();  
<span class="hljs-keyword">var</span> main = Titanium.UI.createWindow();
<span class="hljs-keyword">var</span> mainTab = Titanium.UI.createTab(); 

<span class="hljs-keyword">var</span> login = Titanium.UI.createWindow({
    title:<span class="hljs-string">'User Authentication Demo'</span>,
    url:<span class="hljs-string">'authenticate/login.js'</span>
});

<span class="hljs-keyword">var</span> loginTab = Titanium.UI.createTab({
    title:<span class="hljs-string">"Login"</span>,
    <span class="hljs-built_in">window</span>:login
});    

<span class="hljs-keyword">var</span> account = Titanium.UI.createWindow({
    title:<span class="hljs-string">'Register'</span>,
    url:<span class="hljs-string">'authenticate/account.js'</span>
});

<span class="hljs-keyword">var</span> accountTab = Titanium.UI.createTab({
    title:<span class="hljs-string">'New Account'</span>,
    <span class="hljs-built_in">window</span>:account
});

tabGroup.addTab(loginTab);
tabGroup.addTab(accountTab);
tabGroup.open();
</code></pre><p>And this is my login.js where i am trying to reference the var </p>
<pre><code class="hljs">
var loginReq = Titanium.Network.createHTTPClient()<span class="hljs-comment">;</span>

loginReq.onload = function()
{
    /*var json = this.responseText<span class="hljs-comment">;</span>
    var response = JSON.parse(json)<span class="hljs-comment">;</span>

    if (response.logged == true)  
    {  
        alert("Welcome " + response.name + ". Your email is: " + response.email)<span class="hljs-comment">;  </span>
    }  
    else  
    {  
        alert(response.message)<span class="hljs-comment">;  </span>
    } */

    var json = this.responseText<span class="hljs-comment">;  </span>
    var response = JSON.parse(json)<span class="hljs-comment">;  </span>
    if (response.logged == true)  
    {  
        username.blur()<span class="hljs-comment">;  </span>
        password.blur()<span class="hljs-comment">;  </span>


        Ti.App.fireEvent('loginSuccess', {  
            name:response.name,  
            email:response.email
        })<span class="hljs-comment">;  </span>
        //win.close()<span class="hljs-comment">;  </span>
    }  
    else  
    {  
        alert(response.message)<span class="hljs-comment">;  </span>
    } 

}<span class="hljs-comment">;</span>

Ti.App.addEventListener('loginSuccess', function(event)
{

    main.tabBarHidden     = true<span class="hljs-comment">;</span>

      main.title         = 'Welcome ' + event.name<span class="hljs-comment">;</span>
    main.url         = 'authenticate/main.js'
    main.name         = event.name<span class="hljs-comment">;</span>
    main.email         = event.email<span class="hljs-comment">;</span>
    mainTab.window     = main<span class="hljs-comment">;</span>

    tabGroup.addTab(mainTab)<span class="hljs-comment">;</span>
    tabGroup.removeTab(loginTab)<span class="hljs-comment">;</span>
    tabGroup.removeTab(accountTab)<span class="hljs-comment">;</span>


})<span class="hljs-comment">;</span>
</code></pre><p>And this is what i get in my console</p>
<p>[WARN] Exception in event callback. {<br>    expressionBeginOffset = 2206;<br>    expressionCaretOffset = 2210;<br>    expressionEndOffset = 2210;<br>    line = 112;<br>    message = &quot;Can&#39;t find variable: main&quot;;<br>    name = ReferenceError;<br>    sourceId = 183426696;<br>    sourceURL = &quot;file:&#x2F;&#x2F;localhost&#x2F;Users&#x2F;Library&#x2F;Application%20Support&#x2F;iPhone%20Simulator&#x2F;5.0&#x2F;Applications&#x2F;1F1C4868-7846-46C7-A986-48C6D31D0338&#x2F;Login.app&#x2F;authenticate&#x2F;login.js&quot;;<br>}</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 27th 2012, 5:20:14 pm">March 27th 2012</span>
								by <span class='authorname'>Shreyash Dholakia</span><br>
								<a class="icon-bg icon-link" href="question/134485/refernce-error-variable-not-found#answer-234554" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-234565">
				
						<section>
							<p>When you create window with <em>url</em> property, this window will create a new JavaScript sub-context that will run in its own thread and global variable space. </p>
<p>In your case, code in login.js cannot access to <em>main</em> window in app.js. <code>loginSuccess</code> event listener should be moved to app.js - This&#39;s also mentioned in <em>Step 3: Adding the ‘grantEntrance’ event</em><br> in <a href="http:&#x2F;&#x2F;mobile.tutsplus.com&#x2F;tutorials&#x2F;appcelerator&#x2F;titanium-user-authentication-part-3&#x2F;">above tutorial</a>.</p>
<p>Add this to the bottom of your app.js:</p>
<pre><code class="hljs"><span class="hljs-component">Ti.App.addEventListener('loginSuccess', function(event) {
    main<span class="hljs-string">.tabBarHidden</span> = true;

    main<span class="hljs-string">.title</span> = 'Welcome ' + event<span class="hljs-string">.name</span>;
    main<span class="hljs-string">.url</span> = 'authenticate/main<span class="hljs-string">.js'</span>
    main<span class="hljs-string">.name</span> = event<span class="hljs-string">.name</span>;
    main<span class="hljs-string">.email</span> = event<span class="hljs-string">.email</span>;
    mainTab<span class="hljs-string">.window</span> = main;

    tabGroup<span class="hljs-string">.addTab(mainTab)</span>;
    tabGroup<span class="hljs-string">.removeTab(loginTab)</span>;
    tabGroup<span class="hljs-string">.removeTab(accountTab)</span>;
}</span>);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 27th 2012, 9:50:40 pm">March 27th 2012</span>
								by <span class='authorname'>Minh Nguyen</span><br>
								<a class="icon-bg icon-link" href="question/134485/refernce-error-variable-not-found#answer-234565" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>You should checkout this <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Coding+Strategies#CodingStrategies-Executioncontexts">Execution contexts</a>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2012, 9:53:21 pm">March 27th 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ahh i did not see that. I was building and testing for both and then missed it completely. Thanks Minh Nguyen . Also making me more clear about it when i start building. Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 28th 2012, 12:26:20 pm">March 28th 2012</span>
											by <span class='authorname'>Shreyash Dholakia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
