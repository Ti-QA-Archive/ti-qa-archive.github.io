<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>how to connect to mysql by php and retrieve data for displaying in label (titanium mobile app) » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>how to connect to mysql by php and retrieve data for displaying in label (titanium mobile app)</h1>
		</header>
		<section>
			<p>After get the data how should i loop into label for display?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 25th 2013, 10:49:32 am">June 25th 2013</span>
				by <span class='authorname'>ERIC FOO</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>javascript</span></li>
					
						<li><span class='tagname'>mobile web</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p><a href="http:&#x2F;&#x2F;mobile.tutsplus.com&#x2F;tutorials&#x2F;appcelerator&#x2F;titanium-mobile-database-driven-tables-with-sqlite&#x2F;">http:&#x2F;&#x2F;mobile.tutsplus.com&#x2F;tutorials&#x2F;appcelerator&#x2F;titanium-mobile-database-driven-tables-with-sqlite&#x2F;</a></p>
<p><strong>Try this example.</strong></p>
</div>
							<div class="author">
								&mdash; commented <span title="June 25th 2013, 11:00:53 am">June 25th 2013</span>
								by <span class='authorname'>Dharmik Patel</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>ok , thanks =)</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 25th 2013, 1:10:42 pm">June 25th 2013</span>
								by <span class='authorname'>ERIC FOO</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-264817">
				
						<section>
							<p>Perhaps you can think about this scenario: on server you convert your mySQL DB into sqlite. During starting your app you get the sqlite, update your locale sqlite DB and now you can work offline. It saves power and time at running time.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 25th 2013, 11:03:47 am">June 25th 2013</span>
								by <span class='authorname'>Rainer Schleevoigt</span><br>
								<a class="icon-bg icon-link" href="question/154056/how-to-connect-to-mysql-by-php-and-retrieve-data-for-displaying-in-label-titanium-mobile-app#answer-264817" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>but i have the full website with mysql…<br>so i need to use mysql…</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 25th 2013, 11:14:35 am">June 25th 2013</span>
											by <span class='authorname'>ERIC FOO</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>in web environment you can use sqlite or mysql. On smartphone I know only sqlite client for accessing local sqlite DB. If you are a smart coder you can develop a mysql client based on sockets.<br>Normally you have on server a REST-gateway, which &quot;translate&quot; mySQL to REST.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 25th 2013, 11:32:22 am">June 25th 2013</span>
											by <span class='authorname'>Rainer Schleevoigt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i see.. so what i can do now ? re-create the database into sqllite which same table as my mysql there ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 25th 2013, 11:40:24 am">June 25th 2013</span>
											by <span class='authorname'>ERIC FOO</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-264822">
				
						<section>
							<p>Yes you can, please look to this snippet:</p>
<pre><code class="hljs"><span class="hljs-variable">$db</span> = new SQLite3(<span class="hljs-variable">$DBNAME</span>);
<span class="hljs-variable">$db-</span>&gt;exec(<span class="hljs-string">'CREATE TABLE IF NOT EXISTS channels (name TEXT, instructors TEXT,id NUMERIC,lang TEXT,nr TEXT);'</span>);
<span class="hljs-variable">$res</span> = mysql_query(<span class="hljs-string">'SELECT * FROM coursedata'</span>);
<span class="hljs-variable">$db-</span>&gt;exec(<span class="hljs-string">'BEGIN TRANSACTION'</span>);
<span class="hljs-keyword">while</span> (<span class="hljs-variable">$row</span> = mysql_fetch_object(<span class="hljs-variable">$res</span>)) {
    <span class="hljs-variable">$q</span> = <span class="hljs-string">"'INSERT INTO channels VALUES("</span><span class="hljs-string">'.utf8_encode($row-&gt;name).'</span><span class="hljs-string">","</span><span class="hljs-string">'.utf8_encode($row-&gt;instructor).'</span><span class="hljs-string">","</span><span class="hljs-string">'.$row-&gt;id.'</span><span class="hljs-string">","</span><span class="hljs-string">'.$row-&gt;lang.'</span><span class="hljs-string">","</span><span class="hljs-string">'.$row-&gt;nr.'</span><span class="hljs-string">");';
    $db-&gt;exec($q); 
}
$db-&gt;exec('COMMIT');</span>
</code></pre><p>In your model you can update you local DB with:</p>
<pre><code class="hljs">Model.prototype.mirrorRemoteDB = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_pb, _callback)</span> </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = this;
    <span class="hljs-keyword">var</span> url = Ti.App.Properties.getString(<span class="hljs-string">'remoteDBURL'</span>);
    <span class="hljs-keyword">var</span> start = <span class="hljs-keyword">new</span> Date().getTime();
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({
        ondatastream : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_e)</span> </span>{
            _pb.progress = _e.progress;
        },
        onerror : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">var</span> db = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, <span class="hljs-keyword">self</span>.DBNAME + <span class="hljs-string">'.sql'</span>);
            <span class="hljs-keyword">if</span> (db.exists())
                <span class="hljs-keyword">self</span>.mainDB = Ti.Database.open(<span class="hljs-keyword">self</span>.DBNAME);
            <span class="hljs-keyword">else</span>
                alert(<span class="hljs-string">'Keine Internetverbindung und leider auch keine Offlinevariante parat.'</span>);
        },
        onload : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">var</span> filename = <span class="hljs-keyword">self</span>.DBNAME + <span class="hljs-string">'.sql'</span>;
            <span class="hljs-keyword">var</span> tempfile = Ti.Filesystem.getFile(Ti.Filesystem.getTempDirectory(), filename);
            tempfile.write(this.responseData);
            <span class="hljs-keyword">var</span> db = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, <span class="hljs-keyword">self</span>.DBNAME + <span class="hljs-string">'.sql'</span>);
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">var</span> dummy = Ti.Database.open(<span class="hljs-keyword">self</span>.DBNAME);
                dummy.remove();
            } <span class="hljs-keyword">catch</span>(E) {
                console.log(E);
            }
            <span class="hljs-keyword">self</span>.mainDB = Ti.Database.install(tempfile.nativePath, <span class="hljs-keyword">self</span>.DBNAME);
            _callback(<span class="hljs-keyword">true</span>);
        }
    });
    xhr.open(<span class="hljs-string">'GET'</span>, url + <span class="hljs-string">'?'</span> + Math.random());
    xhr.send(<span class="hljs-keyword">null</span>);
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 25th 2013, 12:00:09 pm">June 25th 2013</span>
								by <span class='authorname'>Rainer Schleevoigt</span><br>
								<a class="icon-bg icon-link" href="question/154056/how-to-connect-to-mysql-by-php-and-retrieve-data-for-displaying-in-label-titanium-mobile-app#answer-264822" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>ok … let me digest it first , thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 25th 2013, 1:11:05 pm">June 25th 2013</span>
											by <span class='authorname'>ERIC FOO</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
