<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Detect if a call is ongoing. Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Detect if a call is ongoing.</h1>
		</header>
		<section>
			<p>Hello,</p>
<p>I am developing an iOS app and is just wondering if there is a way of detecting if a call is ongoing or if the user has activated thetering. I need this because under these circumstances som parts of the layout in my apps get pushed out of position.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 16th 2011, 12:11:54 pm">June 16th 2011</span>
				by <span class='authorname'>James -</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>call</span></li>
					
						<li><span class='tagname'>detect</span></li>
					
						<li><span class='tagname'>thetering</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-220593">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>You <strong>can</strong> detect if a call is in progress. Part of the iOS CoreTelephony framework in the Apple SDK is available to use. I have pulled together a native module that I have used in three application (all approved by Apple). My use case was to use it in the background to return to the app after a phone call (that my app initiated) had finished.</p>
<p>The source and compiled module are available on github <a href="http:&#x2F;&#x2F;github.com&#x2F;dbankier&#x2F;CoreTelephony-for-Appcelerator-Titanium">here</a>.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 10th 2011, 1:36:07 am">October 10th 2011</span>
								by <span class='authorname'>David Bankier</span><br>
								<a class="icon-bg icon-link" href="question/121164/detect-if-a-call-is-ongoing.html#answer-220593" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This is very cool David! Good work! Could you tell me how to install this module, it is exactly what I am looking for.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 10th 2011, 4:16:12 am">October 10th 2011</span>
											by <span class='authorname'>James -</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Do note that this is for iOS 4+ </p>
<p>Great work David!</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 10th 2011, 10:07:54 am">October 10th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The README on GitHub has more details, but for you, try this out:</p>
<ul>
<li><p>Download: <a href="https:&#x2F;&#x2F;github.com&#x2F;downloads&#x2F;dbankier&#x2F;CoreTelephony-for-Appcelerator-Titanium&#x2F;com.yydigital.coretelephony-iphone-0.1.zip">com.yydigital.coretelephony-iphone-0.1.zip</a></p>
</li>
<li><p>Unzip it to the titanium directory. (In OS X it is &#x2F;Library&#x2F;Application\ Support&#x2F;Titanium&#x2F;)</p>
</li>
<li><p>Modify the tiapp.xml file to include the module, for example:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">modules</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">module</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"0.1"</span>&gt;</span>com.yydigital.coretelephony<span class="hljs-tag">&lt;/<span class="hljs-title">module</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">modules</span>&gt;</span>
</code></pre></li>
<li><p>Add the following to your code:</p>
</li>
</ul>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (Titanium.Platform.name == <span class="hljs-string">'iPhone OS'</span> &amp;&amp; <span class="hljs-built_in">parseInt</span>(Titanium.Platform.version.split(<span class="hljs-string">"."</span>)[<span class="hljs-number">0</span>], <span class="hljs-number">10</span>) &gt;=<span class="hljs-number">4</span>) { <span class="hljs-comment">// TEST FOR iOS 4+</span>
   <span class="hljs-keyword">var</span> core = <span class="hljs-built_in">require</span>(<span class="hljs-string">'com.yydigital.coretelephony'</span>);
   <span class="hljs-keyword">if</span> (core.getCurrentCalls() != <span class="hljs-literal">null</span>) {<span class="hljs-comment">// THERE IS AN ACTIVE CALL</span>
      <span class="hljs-comment">// ACT RESPONSIBLY</span>
   }
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="October 10th 2011, 8:33:44 pm">October 10th 2011</span>
											by <span class='authorname'>David Bankier</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks Matt,<br>It was my first attempt at a native module and first go at writing Objective C.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 10th 2011, 8:35:39 pm">October 10th 2011</span>
											by <span class='authorname'>David Bankier</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi David,</p>
<p>Is it possible for you to enhance this module to act as call interceptor and way to get caller id also?</p>
<p>Thanks,<br>Ratty</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2012, 5:53:14 pm">May 24th 2012</span>
											by <span class='authorname'>Ratty A</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ratty,</p>
<p>Have a look at this link: <a href="http:&#x2F;&#x2F;developer.apple.com&#x2F;library&#x2F;ios&#x2F;#documentation&#x2F;NetworkingInternet&#x2F;Reference&#x2F;CoreTelephonyFrameworkReference&#x2F;_index.html">CoreTelephonyFrameworkReference</a></p>
<p>It is what Apple make available as part of their public API. While it <em>might</em> be possible, apps that you want to put on the app store are restricted to the public API.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 24th 2012, 8:50:48 pm">May 24th 2012</span>
											by <span class='authorname'>David Bankier</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi David,</p>
<p>I am using your module and it works great to the point when the call is completed and alert is shown giving option to the user if he&#x2F;she wants to return to the app but as soon as the OK button is pressed, app opens up for a 0.5 second and then closes. Any suggestions on what may be wrong?</p>
<p>I tried with 1.8.2 as well as 2.0.2GA</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 15th 2012, 9:59:33 am">June 15th 2012</span>
											by <span class='authorname'>Ratty A</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The module is only for detecting calls. The notification and returning to the app is part of the Titanium API. I would check the logs to see what is crashing your app.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 17th 2012, 3:51:34 am">June 17th 2012</span>
											by <span class='authorname'>David Bankier</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks David. I hope it&#39;s not the case but I renamed the backgroundService.js to original (per example) bg.js and it started working. Already submitted the app.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 18th 2012, 7:48:39 am">June 18th 2012</span>
											by <span class='authorname'>Ratty A</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi David, Is it posible to track the incoming call and its duration. Suppose I have installed the app. And after that, the records of incoming call will be recorded to the app. Whenever I open the app, it will show all the call duration.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 1st 2013, 11:46:45 am">February 1st 2013</span>
											by <span class='authorname'>Raju Mahato</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Raju, not with the module above.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 5th 2013, 2:50:04 am">February 5th 2013</span>
											by <span class='authorname'>David Bankier</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-210489">
				
						<section>
							<p>You cant do anything when you are getting an incoming call or when you are called or when the call is done.</p>
<p>Sad but true, this is not supported.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 16th 2011, 1:01:36 pm">June 16th 2011</span>
								by <span class='authorname'>Kami -</span><br>
								<a class="icon-bg icon-link" href="question/121164/detect-if-a-call-is-ongoing.html#answer-210489" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-210497">
				
						<section>
							<p>Apple does not allow this with their current SDK</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 16th 2011, 1:37:56 pm">June 16th 2011</span>
								by <span class='authorname'>Matt Apperson</span><br>
								<a class="icon-bg icon-link" href="question/121164/detect-if-a-call-is-ongoing.html#answer-210497" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>But I only want to &quot;rearrange&quot; som part of my layout when there is a call. Because the statusbar is expanded and pushes some parts out of its place.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 2:00:55 pm">June 16th 2011</span>
											by <span class='authorname'>James -</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>position from top is what changes, if you align your UI with this knowledge it will help. But this is an issue for devs that use the native iOS SDK and for those who use titanium, you are not alone</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 2:04:14 pm">June 16th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Perhaps if I align to bottom instead? Then it will not be a problem? I will try it. Thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 2:08:11 pm">June 16th 2011</span>
											by <span class='authorname'>James -</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It needs to be a balance, if you align everything bottom, then the call status bar will be over top your apps UIâ¦ but maybe you are ok with that with your apps layout</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 2:10:43 pm">June 16th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Worked like a charm! Thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 2:51:33 pm">June 16th 2011</span>
											by <span class='authorname'>James -</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
