<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Error getting POST Variable Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Error getting POST Variable</h1>
		</header>
		<section>
			<p>this is what I am using in the app to send the variable NAME</p>
<pre><code class="hljs">   xhr.open(<span class="hljs-string">"POST"</span>,<span class="hljs-string">'http://mydotcom.com/helloworld.php'</span>);

    xhr.setRequestHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/json; charset=utf-8'</span>);

    xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        alert(<span class="hljs-string">"ERROR "</span> + e.error); 
         Titanium.API.info(<span class="hljs-string">"some error"</span>);
    }; 
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        Titanium.API.info(<span class="hljs-keyword">this</span>.responseText);
        Titanium.API.info(<span class="hljs-keyword">this</span>.status);  
    };

    xhr.send({<span class="hljs-string">'name'</span>:<span class="hljs-string">'stuff'</span>});
</code></pre><p>and this is a simple PHP script to reply back</p>
<pre><code class="hljs"><span class="php"><span class="hljs-preprocessor">&lt;?php</span>

print_r(<span class="hljs-string">'Posting Location '</span>.<span class="hljs-variable">$_GET</span>[<span class="hljs-string">'name'</span>]);

<span class="hljs-preprocessor">?&gt;</span></span>
</code></pre><p>What I actually get back in DEBUG is</p>
<pre><code class="hljs">[DEBUG] application booted <span class="hljs-operator">in</span> <span class="hljs-number">74.598014</span> <span class="hljs-keyword">ms</span>

<span class="hljs-title">[INFO</span>] Posting <span class="hljs-keyword">Location</span> 

<span class="hljs-title">[INFO</span>] <span class="hljs-number">200</span>
</code></pre><p>it reads the POST but not the variable what is wrong please?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 29th 2011, 6:18:42 pm">June 29th 2011</span>
				by <span class='authorname'>Castov Cast</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>php</span></li>
					
						<li><span class='tagname'>xhr</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>after I posted that I adjusted the</p>
<pre><code class="hljs"><span class="php"><span class="hljs-preprocessor">&lt;?php</span>

print_r(<span class="hljs-string">'Posting Location '</span>.<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'name'</span>]);

<span class="hljs-preprocessor">?&gt;</span></span>
</code></pre><p>Still I get nothing</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 29th 2011, 7:46:05 pm">June 29th 2011</span>
								by <span class='authorname'>Castov Cast</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-211784">
				
						<section>
							<p>In your PHP script, you&#39;re not reading POST data .. you&#39;re reading GET data. Check the POST data and I&#39;m sure you&#39;ll get what you&#39;re looking for.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 29th 2011, 7:40:33 pm">June 29th 2011</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/121802/error-getting-post-variable.html#answer-211784" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Not working, sorry posted under wrong comment box</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 29th 2011, 7:49:27 pm">June 29th 2011</span>
											by <span class='authorname'>Castov Cast</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Try removing the line that sets the content type to json as you&#39;re not actually sending json. json would be a string, you&#39;re sending an object.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 29th 2011, 8:32:35 pm">June 29th 2011</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Same result its not sending any variables.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2011, 11:30:53 am">July 1st 2011</span>
											by <span class='authorname'>Castov Cast</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211968">
				
						<section>
							<p>For those of you wondering the same thing I never got POST to work instead I used this.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
<span class="hljs-keyword">var</span> cUser = <span class="hljs-string">"user=MyName"</span>;
<span class="hljs-keyword">var</span> cLocation = <span class="hljs-string">"name="</span>+name;
<span class="hljs-keyword">var</span> cDate = <span class="hljs-string">"date="</span>+<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();

<span class="hljs-keyword">var</span>  cData =cUser+<span class="hljs-string">"&amp;"</span>+cLocation+<span class="hljs-string">"&amp;"</span>+cDate;

    xhr.open(<span class="hljs-string">"GET"</span>,<span class="hljs-string">"http://mydotcom.com/helloworld.php?"</span>+cData);
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
       Titanium.API.info(<span class="hljs-keyword">this</span>.responseText);
    };

xhr.send();
</code></pre><p>and this in PHP</p>
<pre><code class="hljs">&lt;?php

print_r(<span class="hljs-string">'Logged:'</span>.$_GET[<span class="hljs-string">'user'</span>].<span class="hljs-string">'***'</span>.$_GET[<span class="hljs-string">'name'</span>].<span class="hljs-string">'***'</span>.$_GET[<span class="hljs-string">'date'</span>]);

<span class="hljs-variable">$file</span> = <span class="hljs-string">'testlog.txt'</span>;
<span class="hljs-variable">$iphoneinfo</span> = $_GET[<span class="hljs-string">'user'</span>].<span class="hljs-string">'***'</span>.$_GET[<span class="hljs-string">'name'</span>].<span class="hljs-string">'***'</span>.$_GET[<span class="hljs-string">'date'</span>];
file_put_contents(<span class="hljs-variable">$file</span>,<span class="hljs-variable">$iphoneinfo</span>, FILE_APPEND | LOCK_EX);

?&gt;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 1st 2011, 12:41:40 pm">July 1st 2011</span>
								by <span class='authorname'>Castov Cast</span><br>
								<a class="icon-bg icon-link" href="question/121802/error-getting-post-variable.html#answer-211968" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>There was nothing wrong with your original idea and would have worked perfectly had the send data been formatted correctly. Here is the code for your original implementation with the fix to make it work correctly.</p>
<p>app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
xhr.open(<span class="hljs-string">"POST"</span>,<span class="hljs-string">'http://mindelusions.com/apps/test.php'</span>);
<span class="hljs-comment">//xhr.setRequestHeader('Content-Type', 'application/json; charset=utf-8');</span>

xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    alert(<span class="hljs-string">"ERROR "</span> + e.error); 
    Titanium.API.info(<span class="hljs-string">"some error"</span>);
}; 
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    Titanium.API.info(<span class="hljs-keyword">this</span>.responseText);
    Titanium.API.info(<span class="hljs-keyword">this</span>.status);  
};

xhr.send({name:<span class="hljs-string">'stuff'</span>});
</code></pre><p>test.php</p>
<pre><code class="hljs"><span class="php"><span class="hljs-preprocessor">&lt;?php</span>
    print_r(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'name'</span>]);
<span class="hljs-preprocessor">?&gt;</span></span>
</code></pre><p>log output</p>
<pre><code class="hljs"><span class="hljs-string">[INFO]</span> stuff

<span class="hljs-string">[INFO]</span> <span class="hljs-number">200</span>
</code></pre><p>Your entire headache was caused by a set of single quotes -</p>
<p>works: <code>xhr.send({name:&amp;#39;stuff&amp;#39;});</code></p>
<p>b0rk3d: <code>xhr.send({&amp;#39;name&amp;#39;:&amp;#39;stuff&amp;#39;});</code></p>
<p>That was it.<br>You may want to go back to the post method as it would be alot cleaner that cat-ing all those strings together.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2011, 7:39:48 pm">July 1st 2011</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
