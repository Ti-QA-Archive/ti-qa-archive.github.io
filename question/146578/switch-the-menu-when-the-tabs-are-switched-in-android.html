<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Switch the menu when the tabs are switched in Android » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Switch the menu when the tabs are switched in Android</h1>
		</header>
		<section>
			<p>Hi, I am using Titanium SDK 3.0 to develop an application. I am using a tab group consists of two tabs and each tab consists a window. I created an activity for first tab window. When I executed the application it is working fine. But when I change the tab I am seeing the same menu items for second tab window also. This is not the case with Titanium SDK below 3.0. After this issue I had gone through release notes of Titanium SDK 3.0. In that it was mentioned that to switch menu items when tabs are changed use invalidateoptionsmenu() method to change the contents of the menu when tabs are changed. I tried using that method in the winow focus event handler. But I got the run time error like activity has no method invalidateoptionsmenu(). Can anyone share a possible solution for this. How do I change the menu items when tabs are switched and how to use the invalidateeoptionsmenu() method to switch the menu items. Here is my sample code:</p>
<p>&#x2F;&#x2F; this sets the background color of the master UIView (when there are no windows&#x2F;tab groups on it)<br>Titanium.UI.setBackgroundColor(&#39;#000&#39;);</p>
<p>&#x2F;&#x2F; create tab group<br>var tabGroup = Titanium.UI.createTabGroup();</p>
<p>&#x2F;&#x2F;<br>&#x2F;&#x2F; create base UI tab and root window<br>&#x2F;&#x2F;<br>var win1 = Titanium.UI.createWindow({</p>
<pre><code class="hljs"><span class="hljs-string">title :</span> <span class="hljs-string">'Tab 1'</span>,

<span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#fff'</span>
</code></pre><p>});</p>
<p>var tab1 = Titanium.UI.createTab({<br>    icon : &#39;KS_nav_views.png&#39;,<br>    title : &#39;Tab 1&#39;,<br>    window : win1<br>});</p>
<p>var label1 = Titanium.UI.createLabel({</p>
<pre><code class="hljs"><span class="hljs-string">color :</span> <span class="hljs-string">'#999'</span>,

<span class="hljs-string">text :</span> <span class="hljs-string">'I am Window 1'</span>,

<span class="hljs-string">font :</span> {

    <span class="hljs-string">fontSize :</span> <span class="hljs-number">20</span>,

    <span class="hljs-string">fontFamily :</span> <span class="hljs-string">'Helvetica Neue'</span>

},

<span class="hljs-string">textAlign :</span> <span class="hljs-string">'center'</span>,

<span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>
</code></pre><p>});</p>
<p>win1.add(label1);</p>
<p>&#x2F;&#x2F;<br>&#x2F;&#x2F; create controls tab and root window<br>&#x2F;&#x2F;<br>var win2 = Titanium.UI.createWindow({</p>
<pre><code class="hljs"><span class="hljs-string">title :</span> <span class="hljs-string">'Tab 2'</span>,

<span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#fff'</span>
</code></pre><p>});</p>
<p>var tab2 = Titanium.UI.createTab({</p>
<pre><code class="hljs"><span class="hljs-string">icon :</span> <span class="hljs-string">'KS_nav_ui.png'</span>,

<span class="hljs-string">title :</span> <span class="hljs-string">'Tab 2'</span>,

<span class="hljs-string">window :</span> win2
</code></pre><p>});</p>
<p>var label2 = Titanium.UI.createLabel({</p>
<pre><code class="hljs"><span class="hljs-string">color :</span> <span class="hljs-string">'#999'</span>,

<span class="hljs-string">text :</span> <span class="hljs-string">'I am Window 2'</span>,

<span class="hljs-string">font :</span> {

    <span class="hljs-string">fontSize :</span> <span class="hljs-number">20</span>,

    <span class="hljs-string">fontFamily :</span> <span class="hljs-string">'Helvetica Neue'</span>

},

<span class="hljs-string">textAlign :</span> <span class="hljs-string">'center'</span>,

<span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>
</code></pre><p>});</p>
<p>win2.add(label2);</p>
<p>var activity = win1.activity;</p>
<p>activity.onCreateOptionsMenu = function(e) {</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> menu = e.menu;

<span class="hljs-keyword">var</span> menuItem = menu.add({

    title : <span class="hljs-string">'Item1'</span>

});

menuItem.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    alert(<span class="hljs-string">'clicked on menu item'</span>);

});

<span class="hljs-keyword">var</span> menuItem1 = menu.add({

    title : <span class="hljs-string">'Item2'</span>

});

menuItem1.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    alert(<span class="hljs-string">'clicked on menu item1'</span>);

});

<span class="hljs-keyword">var</span> menuItem2 = menu.add({

    title : <span class="hljs-string">'Item3'</span>

});

menuItem2.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

    alert(<span class="hljs-string">'clicked on menu item3'</span>);

});
</code></pre><p>};</p>
<p>&#x2F;&#x2F;<br>&#x2F;&#x2F;  add tabs<br>&#x2F;&#x2F;<br>tabGroup.addTab(tab1);</p>
<p>tabGroup.addTab(tab2);</p>
<p>&#x2F;&#x2F; open tab group<br>tabGroup.open();</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 8th 2013, 4:45:24 am">January 8th 2013</span>
				by <span class='authorname'>Prasad M.R.C</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hello Prasad,</p>
<p>I would like to assist you on this issue but before I do, can you please post formatted code? In order to format code you simply but three tildes (~) before and after your code so that it looks like so:</p>
<pre><code class="hljs"><span class="hljs-tag">code</span> here
</code></pre><p>that way it makes people on the boards able to see and debug your code much more quickly, without formatted code it makes it hard to read what you are trying to do.</p>
<p>Thanks,</p>
<p>Carter</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 10th 2013, 3:16:25 pm">January 10th 2013</span>
								by <span class='authorname'>Carter Lathrop</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Lathrop,</p>
<p>Here is my code…</p>
<p>Titanium.UI.setBackgroundColor(&#39;#000&#39;);</p>
<p>var win1 = Titanium.UI.createWindow({</p>
<p>  title : &#39;Tab 1&#39;,</p>
<p>  backgroundColor : &#39;#fff&#39;</p>
<p>});</p>
<p>var tab1 = Titanium.UI.createTab({ </p>
<pre><code class="hljs"><span class="hljs-string">icon :</span> <span class="hljs-string">'KS_nav_views.png'</span>, 
</code></pre><p>   title : &#39;Tab 1&#39;, </p>
<p>   window : win1 </p>
<p>});</p>
<p>var label1 = Titanium.UI.createLabel({</p>
<p>color : &#39;#999&#39;,</p>
<p>text : &#39;I am Window 1&#39;,</p>
<p>font : {</p>
<pre><code class="hljs"><span class="hljs-string">fontSize :</span> <span class="hljs-number">20</span>,

<span class="hljs-string">fontFamily :</span> <span class="hljs-string">'Helvetica Neue'</span>
</code></pre><p>},</p>
<p>textAlign : &#39;center&#39;,</p>
<p>width : &#39;auto&#39;</p>
<p>});</p>
<p>win1.add(label1);</p>
<p>var tab2 = Titanium.UI.createTab({</p>
<pre><code class="hljs"> <span class="hljs-string">icon :</span> <span class="hljs-string">'KS_nav_ui.png'</span>,

 <span class="hljs-string">title :</span> <span class="hljs-string">'Tab 2'</span>,

 <span class="hljs-string">window :</span> win2
</code></pre><p>});</p>
<p>var label2 = Titanium.UI.createLabel({</p>
<pre><code class="hljs"> <span class="hljs-string">color :</span> <span class="hljs-string">'#999'</span>,

 <span class="hljs-string">text :</span> <span class="hljs-string">'I am Window 2'</span>,

 <span class="hljs-string">font :</span> {

 <span class="hljs-string">fontSize :</span> <span class="hljs-number">20</span>,

 <span class="hljs-string">fontFamily :</span> <span class="hljs-string">'Helvetica Neue'</span>

 },

<span class="hljs-string">textAlign :</span> <span class="hljs-string">'center'</span>,

<span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>
</code></pre><p>});</p>
<p>win2.add(label2);</p>
<p>var activity = win1.activity;</p>
<p>activity.onCreateOptionsMenu = function(e) {</p>
<pre><code class="hljs">    <span class="hljs-keyword">var</span> menu = e.menu;

    <span class="hljs-keyword">var</span> menuItem = menu.add({

        title : <span class="hljs-string">'Item1'</span>

    });

    menuItem.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

          alert(<span class="hljs-string">'clicked on menu item'</span>);

     });
</code></pre><p>var menuItem1 = menu.add({</p>
<pre><code class="hljs">   <span class="hljs-string">title :</span> <span class="hljs-string">'Item2'</span>
</code></pre><p>});</p>
<p>menuItem1.addEventListener(&#39;click&#39;, function() {</p>
<pre><code class="hljs">alert('clicked <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> menu item1');
</code></pre><p>});</p>
<p>var menuItem2 = menu.add({</p>
<pre><code class="hljs"><span class="hljs-string">title :</span> <span class="hljs-string">'Item3'</span>
</code></pre><p>});</p>
<p>menuItem2.addEventListener(&#39;click&#39;, function() {</p>
<pre><code class="hljs">alert('clicked <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> menu item3');
</code></pre><p>});</p>
<p>};</p>
<p>tabGroup.addTab(tab1);</p>
<p>tabGroup.addTab(tab2);</p>
<p>tabGroup.open();</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 11th 2013, 3:17:45 am">January 11th 2013</span>
								by <span class='authorname'>Prasad M.R.C</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi all, any suggestions?<br>Regards.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 16th 2013, 5:52:46 am">January 16th 2013</span>
								by <span class='authorname'>orney enrique martinez said</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
