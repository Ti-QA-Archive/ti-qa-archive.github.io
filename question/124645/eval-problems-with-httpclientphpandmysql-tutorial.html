<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Eval problems with HTTPClient+PHP+and+MySQL Tutorial » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Eval problems with HTTPClient+PHP+and+MySQL Tutorial</h1>
		</header>
		<section>
			<p>Hi I am getting a syntax error on eval, source result false when it should be true it is in arrData=eval(&#39;(&#39;+this.responseText+&#39;)&#39;);. it states its a runtime error. please help</p>
<p>the tutorial is http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;HTTPClient+with+PHP+and+MySQL</p>
<p>this is my code register window.js</p>
<p>function getUserInfo(){<br>  var email = txt_Email.value;<br>  var user = txt_User.value;<br>  var pass1 = txt_Pass1.value;<br>  var pass2 = txt_Pass2.value;<br>  if(pass1 == pass2){<br>    registerUser(email, user, pass1);<br>  } else {<br>    alert(&quot;Your passwords do not match.&quot;);<br>  }<br>}<br>function registerUser(email, user, pass){<br>  var request = Titanium.Network.createHTTPClient();<br>  var url = &quot;http:&#x2F;&#x2F;www.icetest.co.uk&#x2F;mobile.php?action=add_user&amp;email=&quot;+email+&quot;&amp;user=&quot;+user+&quot;&amp;pass=&quot;+pass;<br>  request.open(&quot;GET&quot;,url);<br>  request.onload = function(){<br>    var arrData = [];<br>    arrData =  arrData = eval(&#39;(&#39;+this.responseText+&#39;)&#39;);</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = arrData[<span class="hljs-number">0</span>].<span class="hljs-literal">result</span>;
<span class="hljs-keyword">if</span>(<span class="hljs-literal">result</span> == <span class="hljs-string">"true"</span>){
  <span class="hljs-keyword">var</span> alrt_Success = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createAlertDialog({
    title: '<span class="hljs-type">Success</span>!',
    message: '<span class="hljs-type">You</span> have successfuly created a new account. <span class="hljs-type">Now</span> you can log <span class="hljs-keyword">in</span>.',
    buttonNames: ['<span class="hljs-type">OK</span>']
  });
  alrt_Success.show();
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-literal">result</span> == <span class="hljs-string">"another_user"</span>){
<span class="hljs-keyword">var</span> alrt_Sorry = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createAlertDialog({
  title: '<span class="hljs-type">Sorry</span>!',
  message: '<span class="hljs-type">According</span> to our database, that username <span class="hljs-keyword">is</span> already <span class="hljs-keyword">in</span> use.',
  buttonNames: ['<span class="hljs-type">OK</span>']
  });
  alrt_Sorry.show();
} <span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">var</span> alrt_Fail = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createAlertDialog({
    title: '<span class="hljs-type">Error</span>!',
    message: '<span class="hljs-type">It</span> seems we are experiencing problems... please <span class="hljs-keyword">try</span> again later.',
    buttonNames: ['<span class="hljs-type">OK</span>']
  });
  alrt_Fail.show();
}
</code></pre><p>  };<br>  request.send();<br>}<br>var curWindow = Titanium.UI.currentWindow;</p>
<p>var scrollView = Titanium.UI.createScrollView({<br>  contentWidth:&#39;auto&#39;,<br>  contentHeight:&#39;auto&#39;,<br>  top:0,<br>  showVerticalScrollIndicator:true,<br>  showHorizontalScrollIndicator:true<br>});</p>
<p>var view = Titanium.UI.createView({<br>  width:&quot;100%&quot;,<br>  height: 400,<br>  top:10,<br>  paddingBottom: 15<br>});</p>
<p>var lbl_Email = Titanium.UI.createLabel({<br>  text:&#39;Email:&#39;,<br>  height:30,<br>  width:&quot;98%&quot;,<br>  color:&#39;#222&#39;,<br>  font:{fontSize:16},<br>  top: 10<br>});</p>
<p>var txt_Email = Titanium.UI.createTextField({<br>  width: &quot;98%&quot;,<br>  color: &quot;#222&quot;,<br>  paddingLeft: 5,<br>  border: 1,<br>  borderColor: &quot;gray&quot;,<br>  borderRadius: 3,<br>  font:{fontSize:16},<br>  height: 40,<br>  top: 40<br>});</p>
<p>var lbl_User = Titanium.UI.createLabel({<br>  text:&#39;Username:&#39;,<br>  height:30,<br>  width:&quot;98%&quot;,<br>  color:&#39;#222&#39;,<br>  font:{fontSize:16},<br>  top: 90<br>});</p>
<p>var txt_User = Titanium.UI.createTextField({<br>  width: &quot;98%&quot;,<br>  color: &quot;#222&quot;,<br>  paddingLeft: 5,<br>  border: 1,<br>  borderColor: &quot;gray&quot;,<br>  borderRadius: 3,<br>  font:{fontSize:16},<br>  height: 40,<br>  top: 120<br>});</p>
<p>var lbl_Pass1 = Titanium.UI.createLabel({<br>  text:&#39;Password:&#39;,<br>  height:30,<br>  width:&quot;98%&quot;,<br>  color:&#39;#222&#39;,<br>  font:{fontSize:16},<br>  top: 170<br>});</p>
<p>var txt_Pass1 = Titanium.UI.createTextField({<br>  width: &quot;98%&quot;,<br>  color: &quot;#222&quot;,<br>  paddingLeft: 5,<br>  border: 1,<br>  borderColor: &quot;gray&quot;,<br>  borderRadius: 3,<br>  font:{fontSize:16},<br>  height: 40,<br>  top: 200,<br>  passwordMask: true<br>});</p>
<p>var lbl_Pass2 = Titanium.UI.createLabel({<br>  text:&#39;Repeat Password:&#39;,<br>  height:30,<br>  width:&quot;98%&quot;,<br>  color:&#39;#222&#39;,<br>  font:{fontSize:16},<br>  top: 250<br>});</p>
<p>var txt_Pass2 = Titanium.UI.createTextField({<br>  width: &quot;98%&quot;,<br>  color: &quot;#222&quot;,<br>  paddingLeft: 5,<br>  border: 1,<br>  borderColor: &quot;gray&quot;,<br>  borderRadius: 3,<br>  font:{fontSize:16},<br>  height: 40,<br>  top: 280,<br>  passwordMask: true<br>});</p>
<p>var btn_Register = Titanium.UI.createButton({<br>  width: &quot;98%&quot;,<br>  color: &quot;#555&quot;,<br>  font:{fontSize: 22, fontWeight: &quot;bold&quot;},<br>  height: 50,<br>  top: 340,<br>  title: &quot;Register&quot;<br>});</p>
<p> btn_Register.addEventListener(&#39;click&#39;,getUserInfo);<br>view.add(lbl_Email);<br>view.add(txt_Email);<br>view.add(lbl_User);<br>view.add(txt_User);<br>view.add(lbl_Pass1);<br>view.add(txt_Pass1);<br>view.add(lbl_Pass2);<br>view.add(txt_Pass2);<br>view.add(btn_Register);</p>
<p>scrollView.add(view); </p>
<p>curWindow.add(scrollView);</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 23rd 2011, 1:56:46 pm">August 23rd 2011</span>
				by <span class='authorname'>Amran Khan</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>code</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>please reformat this code or use pastie? Impossible to read and or follow the problem here; thx</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 23rd 2011, 2:28:23 pm">August 23rd 2011</span>
								by <span class='authorname'>Aaron Saunders</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi the code is same as the one in<br>http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;HTTPClient+with+PHP+and+MySQL</p>
<p>hope this is better.</p>
<p>function getUserInfo(){<br>  var email = txt_Email.value;<br>  var user = txt_User.value;<br>  var pass1 = txt_Pass1.value;<br>  var pass2 = txt_Pass2.value;<br>  if(pass1 == pass2){<br>    registerUser(email, user, pass1);<br>  } else {<br>    alert(&quot;Your passwords do not match.&quot;);<br>  }<br>}</p>
<p>function registerUser(email, user, pass){<br>  var request = Titanium.Network.createHTTPClient();<br>  var url = &quot;http:&#x2F;&#x2F;www.icetest.co.uk&#x2F;mobile.php?action=add_user&amp;email=&quot;+    email+&quot;&amp;user=&quot;+user+&quot;&amp;pass=&quot;+pass;<br>  request.open(&quot;GET&quot;,url);<br>  request.onload = function(){</p>
<pre><code class="hljs"> <span class="hljs-keyword">var</span> arrData = [];
    arrData =  arrData = eval('('+this.responseText+')');
    <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = arrData[<span class="hljs-number">0</span>].<span class="hljs-literal">result</span>;
    <span class="hljs-keyword">if</span>(<span class="hljs-literal">result</span> == <span class="hljs-string">"true"</span>){

   <span class="hljs-keyword">var</span> alrt_Success = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createAlertDialog({
    title: '<span class="hljs-type">Success</span>!',
    message: '<span class="hljs-type">You</span> have successfuly created a new account. <span class="hljs-type">Now</span> you can         log <span class="hljs-keyword">in</span>.',
    buttonNames: ['<span class="hljs-type">OK</span>']
  });
  alrt_Success.show();
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-literal">result</span> == <span class="hljs-string">"another_user"</span>){
</code></pre><p>var alrt_Sorry = Titanium.UI.createAlertDialog({<br>      title: &#39;Sorry!&#39;,<br>  message: &#39;According to our database, that username is already in use.&#39;,<br>      buttonNames: [&#39;OK&#39;]<br>      });<br>      alrt_Sorry.show();<br>    } else {</p>
<p>var alrt_Fail = Titanium.UI.createAlertDialog({<br>        title: &#39;Error!&#39;,<br>        message: &#39;It seems we are experiencing problems… please try             again later.&#39;,<br>        buttonNames: [&#39;OK&#39;]<br>      });<br>      alrt_Fail.show();<br>    }<br>  };<br>  request.send();<br>}</p>
<p>var curWindow = Titanium.UI.currentWindow;</p>
<p>var scrollView = Titanium.UI.createScrollView({<br>  contentWidth:&#39;auto&#39;,<br>  contentHeight:&#39;auto&#39;,<br>  top:0,<br>  showVerticalScrollIndicator:true,<br>  showHorizontalScrollIndicator:true<br>});</p>
<p>var view = Titanium.UI.createView({<br>  width:&quot;100%&quot;,<br>  height: 400,<br>  top:10,<br>  paddingBottom: 15<br>});</p>
<p>var lbl_Email = Titanium.UI.createLabel({<br>  text:&#39;Email:&#39;,<br>  height:30,<br>  width:&quot;98%&quot;,<br>  color:&#39;#222&#39;,<br>  font:{fontSize:16},<br>  top: 10<br>});</p>
<p>var txt_Email = Titanium.UI.createTextField({<br>  width: &quot;98%&quot;,<br>  color: &quot;#222&quot;,<br>  paddingLeft: 5,<br>  border: 1,<br>  borderColor: &quot;gray&quot;,<br>  borderRadius: 3,<br>  font:{fontSize:16},<br>  height: 40,<br>  top: 40<br>});</p>
<p>var lbl_User = Titanium.UI.createLabel({<br>  text:&#39;Username:&#39;,<br>  height:30,<br>  width:&quot;98%&quot;,<br>  color:&#39;#222&#39;,<br>  font:{fontSize:16},<br>  top: 90<br>});</p>
<p>var txt_User = Titanium.UI.createTextField({<br>  width: &quot;98%&quot;,<br>  color: &quot;#222&quot;,<br>  paddingLeft: 5,<br>  border: 1,<br>  borderColor: &quot;gray&quot;,<br>  borderRadius: 3,<br>  font:{fontSize:16},<br>  height: 40,<br>  top: 120<br>});</p>
<p>var lbl_Pass1 = Titanium.UI.createLabel({<br>  text:&#39;Password:&#39;,<br>  height:30,<br>  width:&quot;98%&quot;,<br>  color:&#39;#222&#39;,<br>  font:{fontSize:16},<br>  top: 170<br>});</p>
<p>var txt_Pass1 = Titanium.UI.createTextField({<br>  width: &quot;98%&quot;,<br>  color: &quot;#222&quot;,<br>  paddingLeft: 5,<br>  border: 1,<br>  borderColor: &quot;gray&quot;,<br>  borderRadius: 3,<br>  font:{fontSize:16},<br>  height: 40,<br>  top: 200,<br>  passwordMask: true<br>});</p>
<p>var lbl_Pass2 = Titanium.UI.createLabel({<br>  text:&#39;Repeat Password:&#39;,<br>  height:30,<br>  width:&quot;98%&quot;,<br>  color:&#39;#222&#39;,<br>  font:{fontSize:16},<br>  top: 250<br>});</p>
<p>var txt_Pass2 = Titanium.UI.createTextField({<br>  width: &quot;98%&quot;,<br>  color: &quot;#222&quot;,<br>  paddingLeft: 5,<br>  border: 1,<br>  borderColor: &quot;gray&quot;,<br>  borderRadius: 3,<br>  font:{fontSize:16},<br>  height: 40,<br>  top: 280,<br>  passwordMask: true<br>});</p>
<p>var btn_Register = Titanium.UI.createButton({<br>  width: &quot;98%&quot;,<br>  color: &quot;#555&quot;,<br>  font:{fontSize: 22, fontWeight: &quot;bold&quot;},<br>  height: 50,<br>  top: 340,<br>  title: &quot;Register&quot;<br>});</p>
<p> btn_Register.addEventListener(&#39;click&#39;,getUserInfo);<br>view.add(lbl_Email);<br>view.add(txt_Email);<br>view.add(lbl_User);<br>view.add(txt_User);<br>view.add(lbl_Pass1);<br>view.add(txt_Pass1);<br>view.add(lbl_Pass2);<br>view.add(txt_Pass2);<br>view.add(btn_Register);</p>
<p>scrollView.add(view); </p>
<p>curWindow.add(scrollView);</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 23rd 2011, 6:04:51 pm">August 23rd 2011</span>
								by <span class='authorname'>Amran Khan</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-217265">
				
						<section>
							<p>although it would be nice to see the code formatted correctly, please post as the comment. Not sure why you are using eval, it is a fairly resource heavy. Also the test for true is different to the test for &quot;true&quot;… a couple of pointers, but if you post code we can look deeply.</p>
<p>T…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 23rd 2011, 6:03:02 pm">August 23rd 2011</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/124645/eval-problems-with-httpclientphpandmysql-tutorial.html#answer-217265" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi I have just posted again I can reformat it again but I think it makes sense have a look thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 23rd 2011, 6:07:59 pm">August 23rd 2011</span>
											by <span class='authorname'>Amran Khan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>sorry only had time for a brief look at the moment, will hopefully get more time. But for now. I am not sure that eval is the right option here. var detain = this.responseText … then you can use the JSON parser. give this a go. will be back on laptop with code examples tomorrow</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 24th 2011, 8:07:30 pm">August 24th 2011</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi your right used JSON.parse and it worked but if you are to use JSON then make sure there is no html in PHP script or whatever (server side script you use unless you embed it somehow)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 25th 2011, 6:21:00 am">August 25th 2011</span>
											by <span class='authorname'>Amran Khan</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
