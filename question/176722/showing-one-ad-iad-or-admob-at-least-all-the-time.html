<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Showing one ad (iAd or Admob) at least all the time » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Showing one ad (iAd or Admob) at least all the time</h1>
		</header>
		<section>
			<p>Hi</p>
<p>This is not a question.This is about the problem that that i have faced in last days while integrating ads.I have used both iAd and admob in my app so both lack some features like iAd is not being shown in all countries but it gives a good return so i thought to make a code that shows one ad at least at a time.Here is my code for that.</p>
<pre><code class="hljs">var Admob = require('ti.admob');
var win = Ti.UI.createWindow({
backgroundColor : 'white'
});

var admobView = Admob.createView({
bottom : 0,
width : 320,
height : 50,
adUnitId : '<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>', // You can get your own at http: //www.admob.com/
adBackgroundColor : 'black',
dateOfBirth : new Date(2008, 10, 1, 12, 1, 1),
});
win.add(admobView);
var iAd = Ti.UI.iOS.createAdView({
bottom : 0,
height : 50,
width : 320,
zIndex : 1
});
win.add(iAd);
iAd.addEventListener('error', function(e) {
iAd.hide();
});
iAd.addEventListener('load', function() {
iAd.show();
});
iAd.hide();
win.open();
</code></pre><p>Have a also a code on github here</p>
<p><a href="https:&#x2F;&#x2F;github.com&#x2F;Wahhab-Mirza&#x2F;Titanium-Ad-Techinque">https:&#x2F;&#x2F;github.com&#x2F;Wahhab-Mirza&#x2F;Titanium-Ad-Techinque</a></p>
<p>Maybe it helps somebody</p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 3rd 2014, 10:41:02 am">August 3rd 2014</span>
				by <span class='authorname'>Muhammad Wahhab Mirza</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>admob</span></li>
					
						<li><span class='tagname'>iad</span></li>
					
						<li><span class='tagname'>ipad</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-282752">
				
						<section>
							<p>Isn&#39;t it easier to use admob and enable mediation with iads inside the platform?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 29th 2014, 8:09:49 pm">September 29th 2014</span>
								by <span class='authorname'>Federico Schroder</span><br>
								<a class="icon-bg icon-link" href="question/176722/showing-one-ad-iad-or-admob-at-least-all-the-time#answer-282752" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I added the mediation iAd to my AdMob campaign, but I see only the AdMob banner… You have already tried to enable iAd mediation inside AdMob? It works correctly?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 10th 2014, 8:49:45 am">November 10th 2014</span>
											by <span class='authorname'>Vittorio Sorbera</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Is your app in publisher mood?</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 10th 2014, 8:51:56 am">November 10th 2014</span>
											by <span class='authorname'>Muhammad Wahhab Mirza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No, it&#39;s in test. I noticed something else, using the ti.admob module. After I created a new campaign on AdMob, and I use the adUnitId, after a few hours the adUnitId not show me more no ads, and is triggered event &#39;didFailToReceiveAd&#39;. It only happens because the app is being tested?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 12th 2014, 9:35:00 am">November 12th 2014</span>
											by <span class='authorname'>Vittorio Sorbera</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve seen this happen when mixing android and ios devices. You need different apps&#x2F;ad units in admob for the different platforms.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 12th 2014, 10:50:54 am">November 12th 2014</span>
											by <span class='authorname'>Federico Schroder</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>When I create a new campaign, it asked me the name of an existing app to search on the store, or manually enter the app. My app is not yet available in stores, so I manually insert the name, and I create two campaigns: one for iOS and one for Android. So I entered the iAd mediation only in the iOS campain.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 12th 2014, 11:03:28 am">November 12th 2014</span>
											by <span class='authorname'>Vittorio Sorbera</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ah, I don&#39;t know then. I haven&#39;t tried mediation yet.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 12th 2014, 11:09:54 am">November 12th 2014</span>
											by <span class='authorname'>Federico Schroder</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I hope it&#39;s just because the app is not yet distributed… anyway I made sure that in case of failure of AdMob, the app uses iAd banner. If the iAd banner should also have problems, I show custom banners of my apps, that work even when there is no connection :)</p>
<p>http:&#x2F;&#x2F;pastie.org&#x2F;private&#x2F;wliirld959cbikjnppjahq</p>
<pre><code class="hljs"><span class="hljs-comment">///////////// ADS</span>
<span class="hljs-keyword">if</span>(!Alloy.Globals.fullversion){

    <span class="hljs-keyword">var</span> myPromoView = Ti.UI.createView({
        backgroundColor : <span class="hljs-string">"transparent"</span>,
        top : OS_IOS ? <span class="hljs-string">"42dp"</span> : <span class="hljs-string">"0dp"</span>,
        height : <span class="hljs-string">"50dp"</span>,
        width : <span class="hljs-string">"100%"</span>,
        visible : <span class="hljs-literal">false</span>,
        zIndex : <span class="hljs-number">1</span>
    });
    $.homeWin.add(myPromoView);
    <span class="hljs-keyword">var</span> myAds = <span class="hljs-built_in">require</span>(<span class="hljs-string">"astrovicAppsAds"</span>).selectAds();
    myAds.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        Ti.Platform.openURL(myAds.openStore);
    });
    myPromoView.add(myAds);

    <span class="hljs-comment">// A random (se esce il numero 2 tra 1 e 5), visualizzo le mie app al posto di AdMob</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.floor((<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">5</span>) + <span class="hljs-number">1</span>) != <span class="hljs-number">2</span>){
        <span class="hljs-keyword">if</span>(Alloy.Globals.debug_mode)
            Ti.API.info(<span class="hljs-string">"ADMOB!"</span>);
        <span class="hljs-keyword">if</span>(OS_IOS){
            <span class="hljs-keyword">var</span> Admob = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ti.admob'</span>);

             <span class="hljs-comment">// We'll make two ads. This first one doesn't care about where the user is located.</span>

            <span class="hljs-keyword">var</span> adMobView = Admob.createView({
                top: <span class="hljs-number">42</span>,
                width: <span class="hljs-number">320</span>, height: <span class="hljs-number">50</span>,
                adUnitId: Alloy.Globals.adMob.ios, <span class="hljs-comment">// You can get your own at http: //www.admob.com/</span>
                adBackgroundColor: <span class="hljs-string">'transparent'</span>,
                <span class="hljs-comment">// You can get your device's id for testDevices by looking in the console log after the app launched</span>
                <span class="hljs-comment">//testDevices: [Admob.SIMULATOR_ID],</span>
                dateOfBirth: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">1985</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),
                <span class="hljs-comment">//gender: 'male',</span>
                <span class="hljs-comment">//keywords: ''</span>
            });
            $.homeWin.add(adMobView);

            <span class="hljs-keyword">var</span> iAdsView = Ti.UI.iOS.createAdView({
                top: <span class="hljs-number">42</span>,
                width: Ti.UI.SIZE, height: <span class="hljs-number">50</span>,
                zIndex : <span class="hljs-number">1</span>                
            });

            adMobView.addEventListener(<span class="hljs-string">'didReceiveAd'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">if</span>(Alloy.Globals.debug_mode)
                    Ti.API.info(<span class="hljs-string">'Did receive ad!'</span>);
                myPromoView.hide();
                myAds.clearInterval();
            });
            adMobView.addEventListener(<span class="hljs-string">'didFailToReceiveAd'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">if</span>(Alloy.Globals.debug_mode)
                    Ti.API.info(<span class="hljs-string">'Failed to receive ad!'</span>);                
                adMobView.hide();
                $.homeWin.add(iAdsView);
            });
            iAdsView.addEventListener(<span class="hljs-string">'load'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                iAdsView.show();
                myAds.clearInterval();
            });
            iAdsView.addEventListener(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                iAdsView.hide();
                myPromoView.show();
            });
            adMobView.addEventListener(<span class="hljs-string">'willPresentScreen'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                Ti.API.info(<span class="hljs-string">'Presenting screen!'</span>);
            });
            adMobView.addEventListener(<span class="hljs-string">'willDismissScreen'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                Ti.API.info(<span class="hljs-string">'Dismissing screen!'</span>);
            });
            adMobView.addEventListener(<span class="hljs-string">'didDismissScreen'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                Ti.API.info(<span class="hljs-string">'Dismissed screen!'</span>);
            });
            adMobView.addEventListener(<span class="hljs-string">'willLeaveApplication'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                Ti.API.info(<span class="hljs-string">'Leaving the app!'</span>);
            });    

        }<span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">var</span> Admob = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ti.admob'</span>);

            <span class="hljs-comment">// then create an adMob view</span>
            <span class="hljs-keyword">var</span> adMobView = Admob.createView({
                publisherId: Alloy.Globals.adMob.android,
                testing:<span class="hljs-literal">false</span>, <span class="hljs-comment">// default is false</span>
                top: <span class="hljs-number">0</span>, <span class="hljs-comment">// optional</span>
                width: <span class="hljs-number">320</span>, height: <span class="hljs-number">50</span>,
                adBackgroundColor:<span class="hljs-string">"transparent"</span>
            });
            $.homeWin.add(adMobView);

            <span class="hljs-comment">//listener for adReceived</span>
            adMobView.addEventListener(Admob.AD_RECEIVED,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
               <span class="hljs-keyword">if</span>(Alloy.Globals.debug_mode)
                   Ti.API.info(<span class="hljs-string">"ad received"</span>);
               myPromoView.hide();
            });

            <span class="hljs-comment">//listener for adNotReceived</span>
            adMobView.addEventListener(Admob.AD_NOT_RECEIVED,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                <span class="hljs-comment">//alert("ad not received");</span>
                 <span class="hljs-keyword">if</span>(Alloy.Globals.debug_mode)
                     Ti.API.info(<span class="hljs-string">"ad not received"</span>);
                 myPromoView.show();
            });

        };
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-keyword">if</span>(Alloy.Globals.debug_mode)
            Ti.API.info(<span class="hljs-string">"astrovicAppsAds!"</span>);
        myPromoView.show();
    }

    <span class="hljs-keyword">if</span>(!Ti.Network.online){
        myPromoView.show();
    };
};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 12th 2014, 11:26:24 am">November 12th 2014</span>
											by <span class='authorname'>Vittorio Sorbera</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
