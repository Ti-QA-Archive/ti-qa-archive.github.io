<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>art: Throwing OutOfMemoryError &#34;Failed to allocate a 2657292 byte allocation with 872626 free bytes and 852KB until OOM&#34; » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>art: Throwing OutOfMemoryError &#34;Failed to allocate a 2657292 byte allocation with 872626 free bytes and 852KB until OOM&#34;</h1>
		</header>
		<section>
			<p>[INFO] :   art: Clamp target GC heap from 133MB to 128MB<br>[INFO] :   art: Clamp target GC heap from 135MB to 128MB<br>[INFO] :   art: Clamp target GC heap from 135MB to 128MB<br>[INFO] :   art: Clamp target GC heap from 135MB to 128MB<br>[INFO] :   art: Forcing collection of SoftReferences for 2MB allocation<br>[INFO] :   art: Clamp target GC heap from 135MB to 128MB<br>[ERROR] :  art: Throwing OutOfMemoryError &quot;Failed to allocate a 2657292 byte allocation with 88610 free bytes and 86KB until OOM&quot;<br>[INFO] :   art: WaitForGcToComplete blocked for 77.721ms for cause Background<br>[DEBUG] :  skia: — decoder-&gt;decode returned false<br>[ERROR] :  TiUIHelper: (main) [328,2740] Unable to load bitmap. Not enough memory: Failed to allocate a 2657292 byte allocation with 88610 free bytes and 86KB until OOM</p>
<p>When I use samsung galaxy s5  android 5.0 I get the outofmemory error . But it works fine on another device before .</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 19th 2015, 12:29:20 pm">March 19th 2015</span>
				by <span class='authorname'>lin xiulun</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>bitmap</span></li>
					
						<li><span class='tagname'>memory</span></li>
					
						<li><span class='tagname'>out of memory</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-286580">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>This one is easy.  Do not throw so much stuff at the device at the same time and hope it will handle things you need to take care of.</p>
<p>If you are exceeding memory - you are not monitoring memory usage and adapting.  If you are saying here is 1,000 things &quot;show them&quot; and not thinking &quot;can it do that, and should I think about caching and swapping things in and out&quot; you are failing to plan correctly.</p>
<p>Just because something did it before does not mean it will again.  SO many factors involved like apps running, installed space of apps taken up, size of images and memory required and so on.</p>
<p>If you have a Galaxy s5 with android 5.0 throwing this error - then you are not building your app with enough thought to allow it to work on devices that do not have the large amount of memory this device actually has.</p>
<p>Rethink, re-factor, plan and test and multiple devices in multiple states of usage models..</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 19th 2015, 12:44:12 pm">March 19th 2015</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/181515/art-throwing-outofmemoryerror-failed-to-allocate-a-2657292-byte-allocation-with-872626-free-bytes-and-852kb-until-oom.html#answer-286580" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I believe there&#39;s something fundamentally wrong with appcelerator&#39;s 5.x implementation. </p>
<p>I don&#39;t believe it&#39;s ready for production.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 19th 2015, 3:29:55 pm">March 19th 2015</span>
											by <span class='authorname'>Francois Brosseau</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>furthermore the memory consumption of my app is about twice as large under 5.x, this may be due to the emulator… I don&#39;t have a 5.x device to test on at the moment</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 19th 2015, 3:37:03 pm">March 19th 2015</span>
											by <span class='authorname'>Francois Brosseau</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><em>Failed to allocate a 2657292 byte allocation with 88610 free bytes and 86KB until OOM</em></p>
<p>Means, failed to allocate 2.5 MB of space when your app has 86 KB left until out-of-memory.</p>
<p>I&#39;m working on an app now that runs fine on Android 5.0 using SDK 3.5.0.GA. Sure, memory is a concern when I try to take 25 pictures and show thumbnails of each on screen, plus save blobs to upload to a web service. But, with some good coding design, my app handles it just fine. BTW, this app has been tested on an S5.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 19th 2015, 3:45:39 pm">March 19th 2015</span>
											by <span class='authorname'>Tim Poulsen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>my app has some low resolution pictures, not photos, they&#39;re lightweight. I hope it&#39;s an issue with the emulator because.<br>I have absolutely no issues with my pictures loading in previous versions.  </p>
<p>It&#39;s possible that it&#39;s an issue with the backgroundImage property.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 19th 2015, 8:01:52 pm">March 19th 2015</span>
											by <span class='authorname'>Francois Brosseau</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Finally I solve my problem by changing all views with backgroundimage property to imageview .<br>Can u explain the differences between them ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 23rd 2015, 8:37:28 am">March 23rd 2015</span>
											by <span class='authorname'>lin xiulun</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tried but using imageviews with the image property instead of the backgroundImage property yields some horrible looking results for full color pictures.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 23rd 2015, 9:14:35 pm">March 23rd 2015</span>
											by <span class='authorname'>Francois Brosseau</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I would say something has changed. I&#39;m having the exact same issue with my app (not loading many things at all) which has worked fine since we launched it, last summer. After the 5.0.2 upgrade (i think) my app keeps complaining about memory all the time and eventually it will crash. I wrote a long rant about it here: http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;181927&#x2F;problems-with-android-since-the-502-upgrade</p>
<p>I believe it&#39;s a bug and it needs to be fixed, but as usual, with titanium appcelerator, information is nowhere to be found :(.</p>
<p>Here&#39;s something about it (long time ago) in JIRA: https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-18473</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 9th 2015, 11:25:57 am">April 9th 2015</span>
											by <span class='authorname'>Albin Larsson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I think <strong>&#39;the something&#39;</strong> that has changed is Android making ART replace Davlik as default from android 5.0.0</p>
<p>Should normally be painless, unless you are using something that uses  the Android NDK.  The issue seems to lie around ART&#39;s compressed Garbage collector (GC) <em>(hence the art GC issues seen)</em> also effects how we reference objects outside of events, due to how they are handled in memory :(</p>
<p>Guessing Google Analytics, Facebook all use the Android NDK too Albin.</p>
<p>So damn painful! :(  I think the only way around is to refactor our code</p>
<p><a href="https:&#x2F;&#x2F;developer.android.com&#x2F;guide&#x2F;practices&#x2F;verifying-apps-art.html">https:&#x2F;&#x2F;developer.android.com&#x2F;guide&#x2F;practices&#x2F;verifying-apps-art.html</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="April 30th 2015, 12:20:14 pm">April 30th 2015</span>
											by <span class='authorname'>anx patel</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
