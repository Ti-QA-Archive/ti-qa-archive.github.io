<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Database issue with Jellybean » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Database issue with Jellybean</h1>
		</header>
		<section>
			<p>My application working fine upto ics version but while running it for jelly bean there is issue with the Database.The error which we are getting &quot;no such table&quot; and &quot;Application did not close the cursor and database object&quot;.Is there additional workaround required while dealing with DB for Jellybean?</p>
<pre><code class="hljs">[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiAPI   (  861)</span>] stores.js: processStoresList : Failed to insert entry into db for store 526 : error : Error: no such table: stores: , while compiling: INSERT INTO stores (store,address1,address2,city,state,zip,phone,fax,drive_through,latitude,longitude,dateCreated,dateModified,status) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)
[<span class="hljs-link_label">INFO</span>][<span class="hljs-link_reference">Database(  861)</span>] sqlite returned: error code = 1, msg = no such table: stores
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>] (KrollRuntimeThread) [21,19454] Error executing sql: no such table: stores: , while compiling: INSERT INTO stores (store,address1,address2,city,state,zip,phone,fax,drive_through,latitude,longitude,dateCreated,dateModified,status) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>] android.database.sqlite.SQLiteException: no such table: stores: , while compiling: INSERT INTO stores (store,address1,address2,city,state,zip,phone,fax,drive_through,latitude,longitude,dateCreated,dateModified,status) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.database.sqlite.SQLiteCompiledSql.<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">init</span>&gt;</span></span>(SQLiteCompiledSql.java:65)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.database.sqlite.SQLiteProgram.<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">init</span>&gt;</span></span>(SQLiteProgram.java:83)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.database.sqlite.SQLiteStatement.<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">init</span>&gt;</span></span>(SQLiteStatement.java:41)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1802)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at ti.modules.titanium.database.TiDatabaseProxy.execute(TiDatabaseProxy.java:148)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at org.appcelerator.kroll.runtime.v8.V8Function.nativeInvoke(Native Method)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at org.appcelerator.kroll.runtime.v8.V8Function.callSync(V8Function.java:58)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at org.appcelerator.kroll.runtime.v8.V8Function.call(V8Function.java:44)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at org.appcelerator.kroll.runtime.v8.V8Function$1.run(V8Function.java:71)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.os.Handler.handleCallback(Handler.java:587)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.os.Handler.dispatchMessage(Handler.java:92)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at android.os.Looper.loop(Looper.java:123)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  861)</span>]     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:109)
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 11th 2012, 11:52:03 am">September 11th 2012</span>
				by <span class='authorname'>Sourabh  Kaley</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>jellybean</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I haven&#39;t had any sqlite database issues with 4.1 on my Galaxy Nexus. I&#39;m guessing that your problem is further up the chain… My best guess is that your template DB wasn&#39;t found, so a new DB was created instead?</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 11th 2012, 12:09:31 pm">September 11th 2012</span>
								by <span class='authorname'>Shannon Hicks</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Missing from your question are a number of important pieces of information. I suggest you take a look at the <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Using+Questions+and+Answers">Using Questions and Answers</a> article, specifically the Q&amp;A Question Checklist.  The missing information is critical to reproducing problems in a test environment and often indicates other factors that cause the undesirable outcome you are experiencing.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 11th 2012, 11:51:07 pm">September 11th 2012</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi shannon, which Titanium SDK version you are using while compling the app with 4.1.<br>I am using the SDK 2.1.2GA.My database file is located in Resources&#x2F;Data&#x2F;stores12.db file. Attach here code which i am using</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> store_dbname = 'stores12.<span class="hljs-keyword">db</span>';
<span class="hljs-keyword">db</span> = Titanium.Database.install('data/stores12.<span class="hljs-keyword">db</span>', store_dbname);
<span class="hljs-keyword">db</span> = Titanium.Database.<span class="hljs-keyword">open</span>(store_dbname);
    <span class="hljs-keyword">var</span> rows = <span class="hljs-keyword">db</span>.execute('SELECT * FROM Stores');
    <span class="hljs-keyword">if</span> (rows.getRowCount() &lt; 1)
        <span class="hljs-keyword">return</span> null;

    <span class="hljs-keyword">var</span> stores = [];
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">count</span> =0;

    <span class="hljs-keyword">while</span> (rows.isValidRow()) {
        stores.push(rowToStore(rows));
        rows.next();
        <span class="hljs-keyword">count</span> = <span class="hljs-keyword">count</span> + 1;
    }

    rows.<span class="hljs-keyword">close</span>();
    <span class="hljs-keyword">db</span>.<span class="hljs-keyword">close</span>();
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="September 12th 2012, 3:47:04 am">September 12th 2012</span>
								by <span class='authorname'>Sourabh  Kaley</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Update: Adding information requested in Q&amp;A Question Checklist explicitly</p>
<ol>
<li>Application type: mobile</li>
<li>Titanium SDK: 2.1.2</li>
<li>Platform &amp; version:  Android 4.1, </li>
<li>Device:  Android emulator </li>
<li>Host Operating System:  Windows 7, </li>
<li>Titanium Studio: Titanium Studio, build: 2.1.2.201208301612</li>
<li>a simple test case: working code that demonstrates issue</li>
</ol>
<pre><code class="hljs"><span class="hljs-keyword">var</span> store_dbname = 'stores12.<span class="hljs-keyword">db</span>';
<span class="hljs-keyword">db</span> = Titanium.Database.install('data/stores12.<span class="hljs-keyword">db</span>', store_dbname);
<span class="hljs-keyword">db</span> = Titanium.Database.<span class="hljs-keyword">open</span>(store_dbname);
    <span class="hljs-keyword">var</span> rows = <span class="hljs-keyword">db</span>.execute('SELECT * FROM Stores');
    <span class="hljs-keyword">if</span> (rows.getRowCount() &lt; 1)
        <span class="hljs-keyword">return</span> null;

    <span class="hljs-keyword">var</span> stores = [];
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">count</span> =0;

    <span class="hljs-keyword">while</span> (rows.isValidRow()) {
        stores.push(rowToStore(rows));
        rows.next();
        <span class="hljs-keyword">count</span> = <span class="hljs-keyword">count</span> + 1;
    }

    rows.<span class="hljs-keyword">close</span>();
    <span class="hljs-keyword">db</span>.<span class="hljs-keyword">close</span>();
</code></pre><ol>
<li><p>Logs: any relevant on-screen messages, and logs from the following locations (placed within the code markdown syntax provided):</p>
<p>•    Android Development: Titanium Studio console output</p>
</li>
</ol>
<pre><code class="hljs">[<span class="hljs-link_label">INFO</span>][<span class="hljs-link_reference">Database(  408)</span>] sqlite returned: error code = 1, msg = no such table: Stores
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>] (KrollRuntimeThread) [6238,56185] Error executing sql: no such table: Stores: , while compiling: SELECT * FROM Stores
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>] android.database.sqlite.SQLiteException: no such table: Stores: , while compiling: SELECT * FROM Stores
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.database.sqlite.SQLiteCompiledSql.<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">init</span>&gt;</span></span>(SQLiteCompiledSql.java:65)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.database.sqlite.SQLiteProgram.<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">init</span>&gt;</span></span>(SQLiteProgram.java:83)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.database.sqlite.SQLiteQuery.<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">init</span>&gt;</span></span>(SQLiteQuery.java:49)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at ti.modules.titanium.database.TiDatabaseProxy.execute(TiDatabaseProxy.java:126)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at org.appcelerator.kroll.runtime.v8.V8Function.nativeInvoke(Native Method)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at org.appcelerator.kroll.runtime.v8.V8Function.callSync(V8Function.java:58)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at org.appcelerator.kroll.runtime.v8.V8Function.call(V8Function.java:44)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at ti.modules.titanium.TitaniumModule$Timer.run(TitaniumModule.java:151)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.os.Handler.handleCallback(Handler.java:587)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.os.Handler.dispatchMessage(Handler.java:92)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at android.os.Looper.loop(Looper.java:123)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiDB    (  408)</span>]     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:109)
</code></pre><pre><code class="hljs">•    Titanium Studio: contents of menu item <span class="hljs-operator"><span class="hljs-keyword">Help</span> &gt; Titanium Studio &gt; <span class="hljs-keyword">View</span> <span class="hljs-keyword">Log</span> <span class="hljs-keyword">File</span> (<span class="hljs-keyword">contents</span> <span class="hljs-keyword">of</span> &lt;workspace-dir&gt;/<span class="hljs-keyword">log</span> <span class="hljs-keyword">file</span>) <span class="hljs-comment">----- &gt; Empty file</span></span>
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="September 12th 2012, 12:53:55 pm">September 12th 2012</span>
								by <span class='authorname'>Sourabh  Kaley</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>-1</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 13th 2012, 10:25:40 am">September 13th 2012</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-247119">
				
						<section>
							<p><code>&amp;quot;Application did not close the cursor and database object&amp;quot;</code> &lt;- be a good developer and close your queries and db when done using them.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 11th 2012, 11:52:05 pm">September 11th 2012</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/142127/database-issue-with-jellybean#answer-247119" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>some code would be nice…</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 11th 2012, 11:52:56 pm">September 11th 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><code>db = Titanium.Database.install(&amp;#39;&amp;#x2F;data&amp;#x2F;stores12.db&amp;#39;, store_dbname);</code></p>
</p>
										<div class="author">
											&mdash; commented <span title="September 12th 2012, 7:16:34 am">September 12th 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs"><span class="hljs-keyword">var</span> store_dbname = 'stores12.<span class="hljs-keyword">db</span>';
<span class="hljs-keyword">db</span> = Titanium.Database.install('/data/stores12.<span class="hljs-keyword">db</span>', store_dbname);

<span class="hljs-keyword">var</span> rows = <span class="hljs-keyword">db</span>.execute(......);

rows.<span class="hljs-keyword">close</span>();
<span class="hljs-keyword">db</span>.<span class="hljs-keyword">close</span>();
</code></pre><p>This gives the same error.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 12th 2012, 1:01:18 pm">September 12th 2012</span>
											by <span class='authorname'>Sourabh  Kaley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><code>My database file is located in Resources&amp;#x2F;Data&amp;#x2F;stores12.db</code></p>
<p>And yet you are loading from <code>&amp;#39;&amp;#x2F;data&amp;#x2F;stores12.db&amp;#39;</code></p>
<p>Android is case sensitive.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 12th 2012, 9:23:49 pm">September 12th 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Apologies. The database is actually located in Resources&#x2F;data&#x2F;stores12.db</p>
<p>Please note that the same code base compiled on Titanium SDK 1.7.5 works fine on Gingerbread &amp; ICS. My main problem is that I need to add Jellybean support as well. </p>
<p>Hence I tried running a compatibility test  with latest Titanium SDK even though it does not claim to support Jellybean. However, I was surprised to all of a sudden find that the app is not even working on Gingerbread let alone Jellybean </p>
<p>To complete the picture, the app works well on Titanium 2.1.1 SDK for Gingerbread but gives the same database error when using a Jellybean Emulator.</p>
<p>All of this points to some change in Titanium SDK - possibly deprecated functionality. I have been unable to find what that might be though.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2012, 4:30:30 am">September 13th 2012</span>
											by <span class='authorname'>Sourabh  Kaley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><code>I was surprised to all of a sudden find that the app is not even working on Gingerbread let alone Jellybean</code></p>
<p> or </p>
<p><code>To complete the picture, the app works well on Titanium 2.1.1 SDK for Gingerbread</code></p>
<p>These statements are contradictory.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2012, 9:54:58 am">September 13th 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I am not sure what contradictions you are trying to find. </p>
<p>I have mentioned that in the latest Titanium SDK  &quot;the app is not even working on Gingerbread let alone Jellybean&quot;. This &quot;latest SDK&quot; happens to be 2.1.2</p>
<p>While in 2.1.1, I managed to get Gingerbread working but not Jellybean.</p>
<p>Are you implying that I am posting whimsically and that I haven&#39;t faced any issues?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2012, 10:02:41 am">September 13th 2012</span>
											by <span class='authorname'>Sourabh  Kaley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Washing my hands, as you tend to be argumentative.</p>
<p>My databases install just fine on Jelly Bean, Shannon&#39;s install on Jelly Bean…</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2012, 10:25:07 am">September 13th 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247208">
				
						<section>
							<p>Disappointed with that response as clearly you did not read my previous comment completely.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 13th 2012, 10:43:33 am">September 13th 2012</span>
								by <span class='authorname'>Sourabh  Kaley</span><br>
								<a class="icon-bg icon-link" href="question/142127/database-issue-with-jellybean#answer-247208" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-2</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
