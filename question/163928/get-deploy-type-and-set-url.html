<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Get deploy type and set URL Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Get deploy type and set URL</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I am using alloy framework.<br>How to differentiate Service URL when app is running in test, development and production(when download from playstore)?</p>
<p>Is there any way to find, if then please help me ASAP.</p>
<p>Thanks in advance.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 26th 2014, 3:19:51 am">March 26th 2014</span>
				by <span class='authorname'>Ankita Gadhia</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>deploy</span></li>
					
						<li><span class='tagname'>service url</span></li>
					
				</ul>
			

			<section>
				<h5>11 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I am using Titanium studio version 3.2.0.201312191547.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 3:36:14 am">March 26th 2014</span>
								by <span class='authorname'>Ankita Gadhia</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hello,</p>
<p>Ti.App.deployType returns ,how the application was packaged whether test,production or development.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 5:27:17 am">March 26th 2014</span>
								by <span class='authorname'>Priya Agarwal</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;162448&#x2F;get-deploytype">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;162448&#x2F;get-deploytype</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 6:33:58 am">March 26th 2014</span>
								by <span class='authorname'>Manuel Lehner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I have done like that. But when i distribute over playstore then also it takes test environment. In emulator it picks development. In device it takes test but when i distribute in playstore, it does not take production environment.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 6:57:49 am">March 26th 2014</span>
								by <span class='authorname'>Ankita Gadhia</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>If you have an answer which you think may help to solve this question, it should be added as an answer and not a comment. </p>
<p>This will help people coming to this question later on.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 7:01:36 am">March 26th 2014</span>
								by <span class='authorname'>Luke Taylor</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>If your app on Google Play is in test environment then you have uploaded the wrong APK. The easiest way to create an APK in production mode is to select &quot;Distribute - Android App Store&quot; in Titanium Studio to sign your App in release mode using a valid keystore. If you install that APK on a device it should say production environment. That works for me, I&#39;m using the ENV_DEVELOPMENT, ENV_TEST and ENV_PRODUCTION constants in Alloy.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 8:23:47 am">March 26th 2014</span>
								by <span class='authorname'>Manuel Lehner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I didn&#39;t get you. Can you please describe me the steps?</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 8:38:06 am">March 26th 2014</span>
								by <span class='authorname'>Ankita Gadhia</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Here you go:</p>
<p>For test purpose, you should log or output the deploy-type somewhere in your code (e.g. in index.js <code>alert( Ti.App.getDeployType() );</code> )</p>
<p>These are the steps for Titanium Studio:</p>
<ol>
<li>Instead of building the app with Run (on device), select &quot;Distribute - Android App Store&quot;</li>
</ol>
<p><img src="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;images_download_attachments_29004925_android_publish_menu.png" alt="alt text"></p>
<ol>
<li><p>Install the generated APK on an Android device</p>
</li>
<li><p>It will alert <code>production</code></p>
</li>
</ol>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 8:55:18 am">March 26th 2014</span>
								by <span class='authorname'>Manuel Lehner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>@Priya Agarwal &amp; especially @Manuel Lehner.</p>
<p>STOP adding answers in the comments section, this is for things related to the questions that the author adds or the requests for more details or clarity from the community.  Answers go in the section marked ANSWERS below.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 9:15:22 am">March 26th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I am not getting Distribute - Android option.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 9:18:04 am">March 26th 2014</span>
								by <span class='authorname'>Ankita Gadhia</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I am using windows 7 OS.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2014, 9:20:21 am">March 26th 2014</span>
								by <span class='authorname'>Ankita Gadhia</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-277011">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>This is how its done in <strong>Alloy</strong></p>
<p>Inside your <code>config.json</code> file you define the URL for each deployment type like this:</p>
<pre><code class="hljs">...
<span class="hljs-string">"env:development"</span>: {
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://developement.com"</span>
},
<span class="hljs-string">"env:test"</span>: {
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://test.com"</span>
},
<span class="hljs-string">"env:production"</span>: {
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://production.com"</span>
}
...
</code></pre><p>The config.json file can be found in <code>{appname}&amp;#x2F;app&amp;#x2F;config.json</code></p>
<p>This is example usage of how to get&#x2F;return the URL for the apps current deployment type:</p>
<pre><code class="hljs"><span class="hljs-tag">alert</span>(<span class="hljs-tag">Alloy</span><span class="hljs-class">.CFG</span><span class="hljs-class">.url</span>);
</code></pre><p>Alloy intelligently returns just the information for just the specific deployment type.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 26th 2014, 9:15:09 am">March 26th 2014</span>
								by <span class='authorname'>Luke Taylor</span><br>
								<a class="icon-bg icon-link" href="question/163928/get-deploy-type-and-set-url#answer-277011" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>+1 for being the only person to notice the author has an Alloy app.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 26th 2014, 9:16:14 am">March 26th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Also in addition to the example I gave, you can add as many key&#x2F;value pairs to each of the development blocks as you wish e.g.</p>
<pre><code class="hljs">...
<span class="hljs-string">"env:development"</span>: <span class="hljs-tuple">{
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://developement.com"</span>,
    <span class="hljs-string">"image"</span>: <span class="hljs-string">"http://developement.com/images/"</span> 
}</span>
...
</code></pre><p>Then reference like so:</p>
<pre><code class="hljs"><span class="hljs-tag">alert</span>(<span class="hljs-tag">Alloy</span><span class="hljs-class">.CFG</span><span class="hljs-class">.image</span>);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 26th 2014, 9:19:02 am">March 26th 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-277018">
				
						<section>
							<p>It turns out that your deployment is the reason for the &quot;wrong&quot; deploy type. An APK which was signed in development mode will return &quot;test&quot; as deployType if installed on a device. You should not upload this APK to google play for production release.</p>
<p>To get started with distributing android apps refer to the docs: <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Distributing_Android_apps">Distributing Android apps</a>.</p>
<p>It describes how to generate a keypair and certificate. Once you&#39;ve done this, you should also get the option &quot;Distribute&quot; in Titanium Studio. If your App is correctly signed in release mode, the deploy type should be <em>production</em>.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 26th 2014, 12:13:33 pm">March 26th 2014</span>
								by <span class='authorname'>Manuel Lehner</span><br>
								<a class="icon-bg icon-link" href="question/163928/get-deploy-type-and-set-url#answer-277018" rel="permalink">permalink</a>
							</div>

							<h5>7 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ya. I have done as previously explained. I had generate apk for playstore distribution. And i had also test, works fine. But when i trying to upload on Google play, it shows following error:</p>
<p>Upload failed<br>You uploaded an APK that is signed with a different certificate to your previous APKs. You must use the same certificate. Your existing APKs are signed with the certificate(s) with fingerprint(s):<br>[ SHA1: CC:E3:7F:08:FA:03:9C:88:07:BC:CB:AB:7B:88:61:F4:75:9D:47:9F ]<br>and the certificate(s) used to sign the APK you uploaded have fingerprint(s):<br>[ SHA1: E3:A8:D5:64:21:FC:B1:83:71:49:47:61:DB:AF:03:45:D0:20:93:81 ]</p>
<p>Please help me ASAP.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 26th 2014, 12:18:55 pm">March 26th 2014</span>
											by <span class='authorname'>Ankita Gadhia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you have uploaded an APK before then you have to use the same certificate, as it says. Don&#39;t lose it. You&#39;ll need it for every update.</p>
<p>I don&#39;t know what could be the issue on windows 7 but if everything is set up correctly TiStudio should give you the distribution option.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 26th 2014, 12:30:30 pm">March 26th 2014</span>
											by <span class='authorname'>Manuel Lehner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes i got that option and apk was also generate.<br>But when i upload apk previously that was not signed.</p>
<p>Now i had generate new digitally signed apk and upload on playstore but it shows :</p>
<p>Upload failed You uploaded an APK that is signed with a different certificate to your previous APKs. You must use the same certificate. Your existing APKs are signed with the certificate(s) with fingerprint(s): [ SHA1: CC:E3:7F:08:FA:03:9C:88:07:BC:CB:AB:7B:88:61:F4:75:9D:47:9F ] and the certificate(s) used to sign the APK you uploaded have fingerprint(s): [ SHA1: E3:A8:D5:64:21:FC:B1:83:71:49:47:61:DB:AF:03:45:D0:20:93:81 ]</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 26th 2014, 12:35:32 pm">March 26th 2014</span>
											by <span class='authorname'>Ankita Gadhia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>When selecting &quot;Distribute&quot;, you get a dialog where you can edit the distribution settings (SDK, Distribution Location, Keystore information). At <strong>Keystore Location</strong> choose the keystore that you have used when signing the first APK that you&#39;ve uploaded to Google Play.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 26th 2014, 12:42:49 pm">March 26th 2014</span>
											by <span class='authorname'>Manuel Lehner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>When i have uploaded my first apk, there was no certificate.</p>
<p>Now i have created distribute apk with keystore certificate sign and trying to upload on playstore but it unable to upload. It gives error :</p>
<p>Upload failed You uploaded an APK that is signed with a different certificate to your previous APKs. You must use the same certificate. Your existing APKs are signed with the certificate(s) with fingerprint(s): [ SHA1: CC:E3:7F:08:FA:03:9C:88:07:BC:CB:AB:7B:88:61:F4:75:9D:47:9F ] and the certificate(s) used to sign the APK you uploaded have fingerprint(s): [ SHA1: E3:A8:D5:64:21:FC:B1:83:71:49:47:61:DB:AF:03:45:D0:20:93:81 ]</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2014, 3:37:28 am">March 27th 2014</span>
											by <span class='authorname'>Ankita Gadhia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Ankita Gadhia; Your original question <strong>Get deploy type and set URL</strong> has been answered by Luke Taylor.  You have now started a very different question - which whilst linked is still a very different subject.</p>
<p>You are not getting the assistance it deserves because it is now hidden in this other question.</p>
<p>I strongly recommend you;</p>
<ul>
<li>Mark this question as answered by Luke Taylor</li>
<li>Create a new question related to the new subject of your Android Keystore problems</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2014, 8:07:06 am">March 27th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok. Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 27th 2014, 8:24:11 am">March 27th 2014</span>
											by <span class='authorname'>Ankita Gadhia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
