<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>I want send data from sqlite db to webservice? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>I want send data from sqlite db to webservice?</h1>
		</header>
		<section>
			<p>I want to create an app in which i want to send data from local sqlite db to .net webservice .I already have created local db now  i want to send thaT DATA from sqlite db</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 24th 2013, 4:54:27 am">September 24th 2013</span>
				by <span class='authorname'>Mehdi Sunasara</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>.net</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>sqlitedb</span></li>
					
						<li><span class='tagname'>wbservice</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>7</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>7 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-269035">
				
						<section>
							<p>Hello, You can post data to your web services via XMLHttpRequest or you cal also create SOAP.  For more information pls visit following link <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.Network.HTTPClient">XMLHttpRequest</a> , <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Dealing_with_SOAP_Web_Services">SOAP Web Services</a></p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 24th 2013, 5:21:53 am">September 24th 2013</span>
								by <span class='authorname'>Md. Mostafizur Rahman</span><br>
								<a class="icon-bg icon-link" href="question/157548/i-want-send-data-from-sqlite-db-to-webservice.html#answer-269035" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269036">
				
						<section>
							<p>I already have a sms broadcast receiver that receives number and message and sends that data using webservice …Now the problem is that if you have no ineternet connection than it is not calling webservice so i thought to create local db and from local db call webservice and send that data.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 24th 2013, 5:28:59 am">September 24th 2013</span>
								by <span class='authorname'>Mehdi Sunasara</span><br>
								<a class="icon-bg icon-link" href="question/157548/i-want-send-data-from-sqlite-db-to-webservice.html#answer-269036" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269070">
				
						<section>
							<p>so, where is the extact problem you&#39;re running into?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 24th 2013, 12:28:27 pm">September 24th 2013</span>
								by <span class='authorname'>Marvin Blase</span><br>
								<a class="icon-bg icon-link" href="question/157548/i-want-send-data-from-sqlite-db-to-webservice.html#answer-269070" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269163">
				
						<section>
							<p>The problem is how to send data from local db to .net webservice</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 26th 2013, 2:27:51 am">September 26th 2013</span>
								by <span class='authorname'>Mehdi Sunasara</span><br>
								<a class="icon-bg icon-link" href="question/157548/i-want-send-data-from-sqlite-db-to-webservice.html#answer-269163" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269171">
				
						<section>
							<p>Plz guys help me out from such problem</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 26th 2013, 5:26:55 am">September 26th 2013</span>
								by <span class='authorname'>Mehdi Sunasara</span><br>
								<a class="icon-bg icon-link" href="question/157548/i-want-send-data-from-sqlite-db-to-webservice.html#answer-269171" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269173">
				
						<section>
							<p>well that basically consists of 3 steps.</p>
<ul>
<li><p>reading the data from your local database (which should be easy, right?)</p>
</li>
<li><p>then you´ve got to convert these data into a (preferably) JSON construct to pass it to your webservice. you may have a look at: http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;2757787&#x2F;converting-an-array-to-json-and-passing-that-to-asmx</p>
</li>
<li><p>the third part is the actual sending. you may find help here:<br>https:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;118626&#x2F;uploading-a-picture-from-android–iphone-gallery-via-net-web-service</p>
</li>
</ul>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 26th 2013, 5:48:46 am">September 26th 2013</span>
								by <span class='authorname'>Marvin Blase</span><br>
								<a class="icon-bg icon-link" href="question/157548/i-want-send-data-from-sqlite-db-to-webservice.html#answer-269173" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269178">
				
						<section>
							<p>package com.eboss;</p>
<p>import org.ksoap2.SoapEnvelope;<br>import org.ksoap2.serialization.PropertyInfo;<br>import org.ksoap2.serialization.SoapObject;<br>import org.ksoap2.serialization.SoapSerializationEnvelope;<br>import org.ksoap2.transport.HttpTransportSE;</p>
<p>public class Soap {</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> SOAP_ACTION = <span class="hljs-string">"http://tempuri.org/SendMessage"</span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> OPERATION_NAME = <span class="hljs-string">"SendMessage"</span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> WSDL_TARGET_NAMESPACE = <span class="hljs-string">"http://tempuri.org/"</span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">String</span> SOAP_ADDRESS = <span class="hljs-string">"***/smsservice.asmx"</span>;

<span class="hljs-keyword">public</span> Soap(){

}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">String</span> Call(<span class="hljs-keyword">String</span> senderno,<span class="hljs-keyword">String</span> msgcontent) {
    SoapObject request = <span class="hljs-keyword">new</span> SoapObject(WSDL_TARGET_NAMESPACE, OPERATION_NAME);
    PropertyInfo pi = <span class="hljs-keyword">new</span> PropertyInfo();
    pi.setName(<span class="hljs-string">"senderno"</span>);
        pi.setValue(senderno);
        pi.setType(<span class="hljs-keyword">String</span>.class);
        request.addProperty(pi);
        pi = <span class="hljs-keyword">new</span> PropertyInfo();
        pi.setName(<span class="hljs-string">"msgcontent"</span>);
        pi.setValue(msgcontent);
        pi.setType(<span class="hljs-keyword">String</span>.class);
        request.addProperty(pi);

        SoapSerializationEnvelope envelope = <span class="hljs-keyword">new</span> SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = <span class="hljs-keyword">true</span>;
        envelope.setOutputSoapObject(request);
        HttpTransportSE httptransport = <span class="hljs-keyword">new</span> HttpTransportSE(SOAP_ADDRESS);
        <span class="hljs-keyword">Object</span> response = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">try</span> {
            httptransport.call(SOAP_ACTION, envelope);
            response = envelope.getResponse();
        }
        <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> handle exception</span>
        response= e.toString();
        }
        <span class="hljs-keyword">return</span> response.toString();
}
}
</code></pre><p>This is my SOAP Class that calls webservice<br>Next, here is my smsreceiver class.</p>
<p>package com.eboss;</p>
<p>import android.content.BroadcastReceiver;<br>import android.content.Context;<br>import android.content.Intent;<br>import android.os.Bundle;<br>import android.telephony.SmsMessage;</p>
<p>public class SmsReceiver extends BroadcastReceiver{</p>
<pre><code class="hljs">@Override
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onReceive(Context context, Intent intent) {
    <span class="hljs-comment">// TODO Auto-generated method stub</span>
    Bundle bundle = intent.getExtras();
    SmsMessage[] messages= <span class="hljs-keyword">null</span>;
    <span class="hljs-comment">//String str= "";</span>
    <span class="hljs-keyword">String</span> gm = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">String</span> msg=<span class="hljs-string">""</span>;
    <span class="hljs-keyword">if</span> (bundle!=<span class="hljs-keyword">null</span>){
        <span class="hljs-keyword">Object</span>[] pdus = (<span class="hljs-keyword">Object</span>[]) bundle.<span class="hljs-built_in">get</span>(<span class="hljs-string">"pdus"</span>);
        messages = <span class="hljs-keyword">new</span> SmsMessage[pdus.length];
        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>; i&lt;messages.length;i++) {
            SmsMessage sms = SmsMessage.createFromPdu((<span class="hljs-built_in">byte</span>[])pdus[i]);
            gm= sms.getOriginatingAddress();
            msg = sms.getMessageBody();
        }
        Intent broadcast = <span class="hljs-keyword">new</span> Intent();
        broadcast.setAction(<span class="hljs-string">"SMS_RECEIVED_ACTION"</span>);
        broadcast.putExtra(<span class="hljs-string">"number"</span>, gm);
        broadcast.putExtra(<span class="hljs-string">"message"</span>, msg);
        context.sendBroadcast(broadcast);            

    }
}
</code></pre><p>}</p>
<p>This is caller.java class</p>
<p>package com.eboss;</p>
<p>import android.app.AlertDialog;</p>
<p>public class Caller extends Thread{</p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> AlertDialog ad;<span class="hljs-keyword">public</span> Soap cs;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">String</span> senderno, msgcontent;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> run(){
    <span class="hljs-keyword">try</span>{
        cs=<span class="hljs-keyword">new</span> Soap();
        <span class="hljs-keyword">String</span> resp=cs.Call(senderno, msgcontent);
        MainActivity.rslt=resp;
    }<span class="hljs-keyword">catch</span>(Exception ex)
    {
        MainActivity.rslt=ex.toString();}    
}
</code></pre><p>}</p>
<p>And here is my MainActivity.class</p>
<p>package com.eboss;</p>
<p>import android.os.Bundle;<br>import android.app.Activity;<br>import android.content.BroadcastReceiver;<br>import android.content.Context;<br>import android.content.Intent;<br>import android.content.IntentFilter;<br>import android.view.Menu;<br>import android.view.View;<br>import android.view.View.OnClickListener;<br>import android.widget.Button;<br>import android.widget.EditText;</p>
<p>public class MainActivity extends Activity {<br>    public static String rslt=&quot;&quot;;<br>    IntentFilter IF;<br>    String sm ;<br>    String sm2;<br>    public MainActivity() {<br>        &#x2F;&#x2F; TODO Auto-generated constructor stub<br>    }<br>     private BroadcastReceiver br = new BroadcastReceiver() {</p>
<pre><code class="hljs">    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onReceive</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Context context, <span class="hljs-keyword">final</span> Intent intent)</span> </span>{
        <span class="hljs-keyword">final</span> EditText et = (EditText) findViewById(R.id.editText1);
        <span class="hljs-keyword">final</span> EditText et1 = (EditText) findViewById(R.id.editText2);
         et.setText(intent.getExtras().getString(<span class="hljs-string">"number"</span>));
        et1.setText(intent.getExtras().getString(<span class="hljs-string">"message"</span>));
        <span class="hljs-keyword">try</span>
        { 
        rslt=<span class="hljs-string">"START"</span>;

        sm = et.getText().toString();
        sm2 = et1.getText().toString();
        Caller c= <span class="hljs-keyword">new</span> Caller();
        c.senderno = sm;
        c.msgcontent = sm2;
        c.join();
        c.start();
         <span class="hljs-keyword">while</span>(rslt==<span class="hljs-string">"START"</span>) {
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">10</span>); 
                }<span class="hljs-keyword">catch</span>(Exception ex) {

                }
    }
        }<span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> handle exception</span>
        }

    }
};



<span class="hljs-annotation">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    IF = <span class="hljs-keyword">new</span> IntentFilter();
    IF.addAction(<span class="hljs-string">"SMS_RECEIVED_ACTION"</span>);
    <span class="hljs-comment">/*Button b1 = (Button) findViewById(R.id.button1);
    final  AlertDialog ad=new AlertDialog.Builder(this).create();
    b1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             try
                { 
                  //  EditText ed1=(EditText)findViewById(R.id.editText1);
                  //  EditText ed2=(EditText)findViewById(R.id.editText2);
                  //  String senderno = ed1.getText().toString();
                  //  String msgcontent = ed2.getText().toString();
                    rslt="START"; 
                    Caller c=new Caller(); c.senderno=senderno;
                    c.msgcontent=msgcontent; c.ad=ad;
                    c.join(); c.start();
                    while(rslt=="START") {
                        try {
                            Thread.sleep(10); 
                        }catch(Exception ex) {
                        }
                    }
                    ad.setTitle("RESULT OF ADD of "+senderno+" and "+msgcontent);
                    ad.setMessage(rslt); 
                }catch(Exception ex) {
                    ad.setTitle("Error!"); ad.setMessage(ex.toString());
                }
                ad.show(); 
            } });*/</span>
        }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onResume</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// TODO Auto-generated method stub</span>
        registerReceiver(br, IF);
        <span class="hljs-keyword">super</span>.onResume();
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onPause</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// TODO Auto-generated method stub</span>
        unregisterReceiver(br);
        <span class="hljs-keyword">super</span>.onPause();
    }
<span class="hljs-annotation">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">onCreateOptionsMenu</span><span class="hljs-params">(Menu menu)</span> </span>{
    <span class="hljs-comment">// Inflate the menu; this adds items to the action bar if it is present.</span>
    getMenuInflater().inflate(R.menu.main, menu);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}
</code></pre><p>}</p>
<p>Now problem is when there is no internet connection then webservice is not being called . And data is not being sent to server.So i thought of storing data in local sqlite.But how to retrieve it i have no idea.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 26th 2013, 6:19:48 am">September 26th 2013</span>
								by <span class='authorname'>Mehdi Sunasara</span><br>
								<a class="icon-bg icon-link" href="question/157548/i-want-send-data-from-sqlite-db-to-webservice.html#answer-269178" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
