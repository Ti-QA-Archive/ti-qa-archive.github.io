<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Problem with a url » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Problem with a url</h1>
		</header>
		<section>
			<p>I have a problem with my app, i save a url from one image in a variable, when i need reload de image in the webview with this url, the app don&#39;t send me nothing, but others url&#39;s show me the image…. somebody help me</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 11th 2013, 7:53:24 pm">January 11th 2013</span>
				by <span class='authorname'>Hugo Medina Rivas</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>html</span></li>
					
						<li><span class='tagname'>image</span></li>
					
						<li><span class='tagname'>url</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Are you sure it is a titanium problem?</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 11th 2013, 7:58:39 pm">January 11th 2013</span>
								by <span class='authorname'>Rainer Schleevoigt</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Missing from you question are several pieces of information that will help you obtain a speedy and accurate answer;</p>
<ul>
<li>Titanium SDK Version?</li>
<li>Primary Target Platform; Android, iOS or both?</li>
<li>A code snippet that can be used to determine what you have achieved so far</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="January 11th 2013, 8:07:15 pm">January 11th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Can you try adding your code again, you did not use the correct syntax so nobody can read it and without correct formatting there is now way to work out where the line breaks are to know what is code and what are comments.</p>
<p>Please also do it here as as comment as you have previously added it as an answer, you probably realised that afterwards.  If we can keep the questions and answers clean - you have a much better chance to get a suitable answer.</p>
<p>Do not try and edit your question - you can&#39;t and you cannot remove the answer - you can&#39;t - fun eh!</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 12th 2013, 9:50:59 am">January 12th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-254380">
				
						<section>
							<p>Sorry,<br> Titanium Studio, build: 2.1.2.201208301612, i developing for both platform&#39;s (iOS , Android), and the mosto important, my code<br>here i load the url</p>
<p>var Imag_Edit = win2.path_image;</p>
<p>and take for javascript in here</p>
<p>html += &#39;        img.src = &quot;&#39;+ Imag_Edit +&#39;&quot;;&#39;;</p>
<p>excute the code html with:</p>
<p>webview = Ti.UI.createWebView({<br>          top:  0,<br>          height: &#39;500&#39;,<br>          width: &#39;100%&#39;,<br>           html:html<br>        });</p>
<p>win2.path_image i load in other js:</p>
<p>var win = Ti.UI.currentWindow;<br>win.backgroundImage = &#39;images&#x2F;app.png&#39;;</p>
<p>var camera = Titanium.UI.createButton({<br>    left:101,<br>    top:224,<br>    image:&#39;images&#x2F;camera.png&#39;<br>});</p>
<p>camera.addEventListener(&#39;click&#39;,function(){</p>
<pre><code class="hljs">Titanium.Media.openPhotoGallery({

    success:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>
    </span>{
           <span class="hljs-keyword">var</span> image = event.media; 
         <span class="hljs-keyword">var</span> mime_type = image.mimeType;   
              <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">Array</span>();
              arr = mime_type.split(<span class="hljs-string">'/'</span>);
              <span class="hljs-keyword">var</span> image_type = arr[<span class="hljs-number">1</span>];
              <span class="hljs-keyword">if</span>(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
              {
                   <span class="hljs-keyword">var</span> newDir = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,<span class="hljs-string">'sweet_images'</span>);
                   <span class="hljs-keyword">if</span> (!newDir.exists()) {    
                    newDir.createDirectory();
                   }
                   <span class="hljs-keyword">var</span> <span class="hljs-keyword">parent</span> = Titanium.Filesystem.applicationDataDirectory;
                   <span class="hljs-keyword">var</span> icons_folder = Titanium.Filesystem.getFile(<span class="hljs-keyword">parent</span>, <span class="hljs-string">'sweet_images'</span>);
               <span class="hljs-keyword">var</span> image_name = <span class="hljs-string">"splash."</span>+image_type;  
               <span class="hljs-keyword">var</span> filename = icons_folder.nativePath + <span class="hljs-string">'/'</span> + image_name;
               image_path = filename;
               Titanium.API.info(<span class="hljs-string">'filename: '</span> + filename);

               <span class="hljs-keyword">var</span> bgImage = Titanium.Filesystem.getFile(icons_folder.nativePath + <span class="hljs-string">'/'</span> + image_name);

               Ti.API.info(<span class="hljs-string">" y Splash: "</span> + image.height +<span class="hljs-string">' x Splash: '</span>+ image.width);

               bgImage.write(image);

<span class="hljs-keyword">var</span> imageWindow = Ti.UI.createWindow({
    title:<span class="hljs-string">'Camera Application'</span>,
    exitOnClose:<span class="hljs-keyword">true</span>,
    navBarHidden:<span class="hljs-keyword">false</span>,
    url:<span class="hljs-string">'filter.js'</span>,
    path_image: filename
});
</code></pre><p>and this is my problem, i take a url in filename , when i need reload de image in the webview with this url, the app don&#39;t show me nothing, but others url&#39;s show me the image…. somebody help me</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 11th 2013, 9:42:02 pm">January 11th 2013</span>
								by <span class='authorname'>Hugo Medina Rivas</span><br>
								<a class="icon-bg icon-link" href="../../question/146781/problem-with-a-url.html#answer-254380" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>The html script is: </p>
<p>var html = &#39;&lt;!doctype html&gt;&#39;;<br>        html += &#39;&lt;html&gt;&#39;;<br>        html += &#39;&lt;head&gt;&#39;;<br>        html += &#39;&lt;meta charset=utf-8&quot;&gt;&#39;;<br>        html += &#39;&lt;script src=&quot;jquery-1.7.2.min.js&quot;&gt;&lt;&#x2F;script&gt;&#39;;<br>        html += &#39;&lt;script&gt;&#39;;<br>        html += &#39;var imgWidth,imgHeight,datosPrim;&#39;;<br>        html += &#39;$(document).on(&quot;ready&quot;,inciar);&#39;;<br>        html += &#39;function inciar()&#39;;<br>        html += &#39;{&#39;;<br>        html += &#39;    var canvas = document.getElementById(&quot;miCanvas&quot;);&#39;;<br>        html += &#39;    if(canvas.getContext)&#39;;<br>        html += &#39;    {&#39;;<br>        html += &#39;        $(&quot;#btnBN&quot;).click(function(){&#39;;<br>        html += &#39;            aBlancoNegro(img,canvas,ctx);&#39;;<br>        html += &#39;        });&#39;;<br>        html += &#39;         $(&quot;#btnIC&quot;).on(&quot;click&quot;,function(){&#39;;<br>        html += &#39;            invertirColores(img,canvas,ctx);&#39;;<br>        html += &#39;        });&#39;;<br>        html += &#39;        $(&quot;#btnRI&quot;).click(function(){&#39;;<br>        html += &#39;            restaurarImagen(img,canvas,ctx)&#39;;<br>        html += &#39;        });&#39;;<br>        html += &#39;        $(&quot;#btnRS&quot;).click(function(){&#39;;<br>        html += &#39;            aSepia(img,canvas,ctx)&#39;;<br>        html += &#39;        });&#39;;<br>        html += &#39;        var ctx = canvas.getContext(&quot;2d&quot;);&#39;;<br>        html += &#39;        var img = new Image();&#39;;<br>        html += &#39;        img.src = &quot;&#39;+filename+&#39;&quot;;&#39;;<br>Ti.UI.createAlertDialog({title:&#39;Jo&#39;,message: html }).show();<br>        html += &#39;        img.onload = function()&#39;;<br>        html += &#39;        {&#39;;<br>        html += &#39;            imgWidth = this.width;&#39;;<br>        html += &#39;            imgHeight = this.height;&#39;;<br>        html += &#39;            canvas.width = imgWidth&#x2F;3;&#39;;<br>        html += &#39;            canvas.height = imgHeight&#x2F;3;&#39;;<br>        html += &#39;            ctx.drawImage(this,0,0,imgWidth&#x2F;3,imgHeight&#x2F;3);&#39;;<br>        html += &#39;            var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);&#39;;<br>        html += &#39;            datosPrim = datosDeLaImagen.data;&#39;;<br>        html += &#39;        }&#39;;<br>        html += &#39;    }&#39;;<br>        html += &#39;};&#39;;<br>        html += &#39;function aBlancoNegro(img,canvas,ctx)&#39;;<br>        html += &#39;{&#39;;<br>        html += &#39;    var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);&#39;;<br>        html += &#39;    var datos = datosDeLaImagen.data;&#39;;<br>        html += &#39;    for (var i = 0; i &lt; datos.length; i+=4)&#39;;<br>        html += &#39;    {&#39;;<br>        html += &#39;        var brightness = 0.34 <em> datos[i] + 0.5 </em> datos[i + 1] +0.16 <em> datos[i + 2];&#39;;<br>        html += &#39;        datos[i] = brightness;&#39;;<br>        html += &#39;        datos[i+1] = brightness;&#39;;<br>        html += &#39;        datos[i+2] = brightness;&#39;;<br>        html += &#39;    }&#39;;<br>        html += &#39;    ctx.putImageData(datosDeLaImagen,0,0);&#39;;<br>        html += &#39;}&#39;;<br>        html += &#39; function invertirColores(img,canvas,ctx)&#39;;<br>        html += &#39;    {&#39;;<br>        html += &#39;    var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);&#39;;<br>        html += &#39;    var datos = datosDeLaImagen.data;&#39;;<br>        html += &#39;    for (var i = 0; i &lt; datos.length; i+=4)&#39;;<br>        html += &#39;    {&#39;;<br>        html += &#39;        datos[i] = 255 - datos[i];&#39;;<br>        html += &#39;        datos[i+1] = 255 - datos[i+1];&#39;;<br>        html += &#39;        datos[i+2] = 255 - datos[i+2];&#39;;<br>        html += &#39;    }&#39;;<br>        html += &#39;    ctx.putImageData(datosDeLaImagen,0,0);&#39;;<br>        html += &#39;}&#39;;<br>        html += &#39;function restaurarImagen(img,canvas,ctx)&#39;;<br>        html += &#39;{&#39;;<br>        html += &#39;    var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);&#39;;<br>        html += &#39;    var datos = datosDeLaImagen.data;&#39;;<br>        html += &#39;    for (var i = 0; i &lt; datos.length; i+=4)&#39;;<br>        html += &#39;    {&#39;;<br>        html += &#39;        datos[i] = datosPrim[i];&#39;;<br>        html += &#39;        datos[i+1] = datosPrim[i+1];&#39;;<br>        html += &#39;        datos[i+2] = datosPrim[i+2];&#39;;<br>        html += &#39;    }&#39;;<br>        html += &#39;    ctx.putImageData(datosDeLaImagen,0,0);&#39;;<br>        html += &#39;}&#39;;<br>        html += &#39;function aSepia(img,canvas,ctx)&#39;;<br>        html += &#39;{&#39;;<br>        html += &#39;    console.log(&quot;entre&quot;);&#39;;<br>        html += &#39;    var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);&#39;;<br>        html += &#39;    var datos = datosDeLaImagen.data;&#39;;<br>        html += &#39;    for (var i = 0; i &lt; datos.length; i+=4)&#39;;<br>        html += &#39;    {&#39;;<br>        html += &#39;        datos[i] = datos[i]</em>0.393 + datos[i+1]<em>0.769 + datos[i+2]</em>0.189;&#39;;<br>        html += &#39;        datos[i+1] = datos[i]<em>0.349 + datos[i+1]</em>0.686 + datos[i+2]<em>0.168;&#39;;<br>        html += &#39;        datos[i+2] = datos[i]</em>0.272 + datos[i+1]<em>0.534 + datos[i+2]</em>0.131;&#39;;<br>        html += &#39;    }&#39;;<br>        html += &#39;    ctx.putImageData(datosDeLaImagen,0,0);&#39;;<br>        html += &#39;}&#39;;<br>        html += &#39;    &lt;&#x2F;script&gt;&#39;;<br>        html += &#39;&lt;&#x2F;head&gt;&#39;;<br>        html += &#39;&lt;body&gt;&#39;;<br>        html += &#39;    &lt;div id=&quot;contenido&quot;&gt;&#39;;<br>        html += &#39;        &lt;div id=&quot;canvas&quot;&gt;&#39;;<br>        html += &#39;            &lt;canvas id=&quot;miCanvas&quot;&gt;&lt;&#x2F;canvas&gt;&#39;;<br>        html += &#39;        &lt;&#x2F;div&gt;&#39;;<br>        html += &#39;        &lt;div id=&quot;botones&quot;&gt;&#39;;<br>        html += &#39;            &lt;button id=&quot;btnBN&quot; &gt;Blanco&#x2F;Negro&lt;&#x2F;button&gt;&#39;;<br>        html += &#39;            &lt;button id=&quot;btnRI&quot;&gt;Restaurar Imagen&lt;&#x2F;button&gt;&#39;;<br>        html += &#39;            &lt;button id=&quot;btnIC&quot;&gt;Invertir colores&lt;&#x2F;button&gt;&#39;;<br>        html += &#39;            &lt;button id=&quot;btnRS&quot;&gt;A sepia&lt;&#x2F;button&gt;&#39;;<br>        html += &#39;        &lt;&#x2F;div&gt;&#39;;<br>        html += &#39;    &lt;&#x2F;div&gt;&#39;;<br>        html += &#39;    &lt;div id=&quot;canvasImg&quot;&gt;&#39;;<br>        html += &#39;        &lt;img src=&quot;&quot; id=&quot;canvasImgInsite&quot; &#x2F;&gt;&#39;;<br>        html += &#39;&lt;&#x2F;body&gt;&#39;;<br>        html += &#39;&lt;&#x2F;html&gt;&#39;;</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 11th 2013, 10:31:04 pm">January 11th 2013</span>
											by <span class='authorname'>Hugo Medina Rivas</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-254422">
				
						<section>
							<p>Sorry im new in this… this my code en html, my new problem is: i send de url to html and it read that image, but now, don&#39;t load the effects to the image… i mean, the webview show me the image, but, when i tell aplly effects to image, it doesn&#39;t nothig and the console show a msg &#39;ERROR loading app:&#x2F;&#x2F;…..&#39;<br>i send the url from</p>
<pre><code class="hljs">    <span class="hljs-built_in">var</span> <span class="hljs-keyword">parent</span> = Titanium<span class="hljs-built_in">.</span>Filesystem<span class="hljs-built_in">.</span>applicationDataDirectory;
           <span class="hljs-built_in">var</span> icons_folder = Titanium<span class="hljs-built_in">.</span>Filesystem<span class="hljs-built_in">.</span>getFile(<span class="hljs-keyword">parent</span>, <span class="hljs-string">'sweet_images'</span>);
    <span class="hljs-built_in">var</span> name_image = icons_folder<span class="hljs-built_in">.</span>nativePath<span class="hljs-built_in">.</span>replace(<span class="hljs-string">'file://'</span>, <span class="hljs-string">'app://'</span>) ;
</code></pre><p>This the code in html:</p>
<pre><code class="hljs"><span class="hljs-title">var</span> html = <span class="hljs-string">'&lt;!doctype html&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;html&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;head&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;meta charset=utf-8"&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;script src="jquery-1.7.2.min.js"&gt;&lt;/script&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;script&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'var imgWidth,imgHeight,datosPrim;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'$(document).on("ready",inciar);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'function inciar()'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'{'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    var canvas = document.getElementById("miCanvas");'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    if(canvas.getContext)'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    {'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        $("#btnBN").click(function(){'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            aBlancoNegro(img,canvas,ctx);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        });'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'         $("#btnIC").on("click",function(){'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            invertirColores(img,canvas,ctx);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        });'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        $("#btnRI").click(function(){'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            restaurarImagen(img,canvas,ctx)'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        });'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        $("#btnRS").click(function(){'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            aSepia(img,canvas,ctx)'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        });'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        var ctx = canvas.getContext("2d");'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        var img = new Image();'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        img.src = "'</span>+ name_image +<span class="hljs-string">'/splash.jpeg";'</span>;        
        <span class="hljs-title">html</span> += <span class="hljs-string">'        img.onload = function()'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        {'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            imgWidth = this.width;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            imgHeight = this.height;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            canvas.width = imgWidth/1.8;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            canvas.height = imgHeight/1.8;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            ctx.drawImage(this,0,0,imgWidth/1.8,imgHeight/1.8);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            datosPrim = datosDeLaImagen.data;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        }'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    }'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'};'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    &lt;/script&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;/head&gt;'</span>;

        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;script&gt;'</span>
        html += <span class="hljs-string">'function aBlancoNegro(img,canvas,ctx)'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'{'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    var datos = datosDeLaImagen.data;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    for (var i = 0; i &lt; datos.length; i+=4)'</span>; 
        <span class="hljs-title">html</span> += <span class="hljs-string">'    {'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        var brightness = 0.34 * datos[i] + 0.5 * datos[i + 1] +0.16 * datos[i + 2];'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i] = brightness;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i+1] = brightness;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i+2] = brightness;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    }'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    ctx.putImageData(datosDeLaImagen,0,0);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'}'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">' function invertirColores(img,canvas,ctx)'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    {'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    var datos = datosDeLaImagen.data;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    for (var i = 0; i &lt; datos.length; i+=4)'</span>; 
        <span class="hljs-title">html</span> += <span class="hljs-string">'    {'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i] = 255 - datos[i];'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i+1] = 255 - datos[i+1];'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i+2] = 255 - datos[i+2];'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    }'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    ctx.putImageData(datosDeLaImagen,0,0);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'}'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'function restaurarImagen(img,canvas,ctx)'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'{'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    var datos = datosDeLaImagen.data;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    for (var i = 0; i &lt; datos.length; i+=4)'</span>; 
        <span class="hljs-title">html</span> += <span class="hljs-string">'    {'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i] = datosPrim[i];'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i+1] = datosPrim[i+1];'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i+2] = datosPrim[i+2];'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    }'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    ctx.putImageData(datosDeLaImagen,0,0);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'}'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'function aSepia(img,canvas,ctx)'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'{'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    console.log("entre");'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    var datosDeLaImagen = ctx.getImageData(0,0,imgWidth,imgHeight);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    var datos = datosDeLaImagen.data;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    for (var i = 0; i &lt; datos.length; i+=4)'</span>; 
        <span class="hljs-title">html</span> += <span class="hljs-string">'    {'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i] = datos[i]*0.393 + datos[i+1]*0.769 + datos[i+2]*0.189;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i+1] = datos[i]*0.349 + datos[i+1]*0.686 + datos[i+2]*0.168;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        datos[i+2] = datos[i]*0.272 + datos[i+1]*0.534 + datos[i+2]*0.131;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    }'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    ctx.putImageData(datosDeLaImagen,0,0);'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'}'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;/script&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;body&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    &lt;div id="contenido"&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        &lt;div id="canvas"&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            &lt;canvas id="miCanvas"&gt;&lt;/canvas&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        &lt;/div&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        &lt;div id="botones"&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            &lt;button id="btnBN" &gt;Blanco/Negro&lt;/button&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            &lt;button id="btnRI"&gt;Restaurar Imagen&lt;/button&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            &lt;button id="btnIC"&gt;Invertir colores&lt;/button&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'            &lt;button id="btnRS"&gt;A sepia&lt;/button&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        &lt;/div&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    &lt;/div&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    &lt;div id="canvasImg"&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'        &lt;img src="" id="canvasImgInsite" /&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'    &lt;/div&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;/body&gt;'</span>;
        <span class="hljs-title">html</span> += <span class="hljs-string">'&lt;/html&gt;'</span>;
</code></pre><p>And i show this in a webview with:</p>
<pre><code class="hljs">     webview = Ti.UI.createWebView({
          top:  <span class="hljs-number">0</span>,
          <span class="hljs-variable">height</span>: <span class="hljs-string">'500'</span>,
          <span class="hljs-variable">width</span>: <span class="hljs-string">'100%'</span>,      
           html:html
        });
    win2.<span class="hljs-built_in">add</span>(webview);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 12th 2013, 7:31:35 pm">January 12th 2013</span>
								by <span class='authorname'>Hugo Medina Rivas</span><br>
								<a class="icon-bg icon-link" href="../../question/146781/problem-with-a-url.html#answer-254422" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
