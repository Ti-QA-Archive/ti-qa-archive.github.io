<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Plot a route on google map in android » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Plot a route on google map in android</h1>
		</header>
		<section>
			<p>hi..,</p>
<p>Can anyone please help  me to plot a route on Google map in android ..</p>
<p>i&#39;m able to show the google maps and annotations but not able to plot a route…</p>
<p>i&#39;m using the titanium SDK version 2.0.1 even though i&#39;m not getting this requirement full filled…</p>
<p>Thanks,<br>MONY</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 14th 2012, 11:24:54 am">August 14th 2012</span>
				by <span class='authorname'>MONY desu</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>google maps</span></li>
					
						<li><span class='tagname'>plot route</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-245280">
				
						<section>
							<p>Does the <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.1&#x2F;index.html#!&#x2F;api&#x2F;Titanium.Map.View-method-addRoute">Ti.Map.View.addRoute</a> method not work?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 14th 2012, 12:00:10 pm">August 14th 2012</span>
								by <span class='authorname'>Beejay Morgan</span><br>
								<a class="icon-bg icon-link" href="question/141002/plot-a-route-on-google-map-in-android#answer-245280" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Good point, this has been available now since 2.1.0</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2012, 12:03:41 pm">August 14th 2012</span>
											by <span class='authorname'>Boydlee Pollentine</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No it&#39;s not working …..</p>
<p>it throwing an error saying addRoute( ) is not a defined method<br>Thanks,<br>MONY</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2012, 12:05:31 pm">August 14th 2012</span>
											by <span class='authorname'>MONY desu</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You are using SDK 2.1.0 right? </p>
<p>Not 2.0.1 as was listed in your original post. The in-built Android routing has only been available since 2.1.0 according to the documentation.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2012, 12:08:03 pm">August 14th 2012</span>
											by <span class='authorname'>Boydlee Pollentine</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-245279">
				
						<section>
							<p>I&#39;ve got some stuff that works on a 1.8 custom build of Android SDK, the Java source code is available if you want it to build on 2.0.1. It should be considered &quot;alpha&quot; release source but it&#39;s a good starting point.</p>
<p>http:&#x2F;&#x2F;boydlee.com&#x2F;appcelerator-titanium&#x2F;new-for-titanium-sdk-1.8.1-addroute-support-in-android-for-titanium.html</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 14th 2012, 11:43:44 am">August 14th 2012</span>
								by <span class='authorname'>Boydlee Pollentine</span><br>
								<a class="icon-bg icon-link" href="question/141002/plot-a-route-on-google-map-in-android#answer-245279" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>hi Boydlee..,</p>
<p>in this url i cannot find custom sdk  for android….<br>so will you please give me the url to get it downloaded…</p>
<p>Thanks,<br>MONY</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2012, 12:02:59 pm">August 14th 2012</span>
											by <span class='authorname'>MONY desu</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It&#39;s on the same page, third link.<br>http:&#x2F;&#x2F;c299242.r42.cf1.rackcdn.com&#x2F;map-v2.zip</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2012, 12:04:32 pm">August 14th 2012</span>
											by <span class='authorname'>Boydlee Pollentine</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hi Boydlee..,</p>
<p>can you please elaborate….</p>
<p>i downloaded it … i got a zip file named map-v2.zip which has got 23kb nearly…..<br>by unzipping it i got a folder names map………where can i place this  in my 2.0.1 sdk ???</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2012, 12:14:44 pm">August 14th 2012</span>
											by <span class='authorname'>MONY desu</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you want it working on 2.0.1, you&#39;ll have to build the Titanium Mobile SDK from source with those changes included. There&#39;s instructions linked to from http:&#x2F;&#x2F;boydlee.com&#x2F;appcelerator-titanium&#x2F;addroute-support-in-android-for-titanium-1.8.0.html.</p>
<p>Alternatively, just download the existing custom SDK off my website and using 1.8 SDK, or move your app to the new version of the 2.1 SDK which now has routing built in.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2012, 12:22:34 pm">August 14th 2012</span>
											by <span class='authorname'>Boydlee Pollentine</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-245304">
				
						<section>
							<p>Hi Mony</p>
<p>In order to use the <code>addRoute</code> method of the <code>Ti.Map</code> with <code>Android</code> you will need to be using <code>2.1</code>.</p>
<p>Provided you are; then this code will give you a map with a route, the route will use the smoothed points from the decoded data.</p>
<p>Create a new project to test this code and then replace your <code>app.js</code> contents with the following;</p>
<pre><code class="hljs"><span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.setBackgroundColor('<span class="hljs-comment">#000');</span>

<span class="hljs-keyword">var</span> tab1, tab2, tab3;
(function () {
    <span class="hljs-keyword">var</span> win = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWindow({
        backgroundColor: '<span class="hljs-comment">#fff',</span>
        title: '<span class="hljs-type">Test</span>'
    });
    tab1 = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createTab({
        icon: '<span class="hljs-type">KS_nav_views</span>.png',
        title: '<span class="hljs-type">Tab</span> <span class="hljs-number">1</span>',
        window: win
    });

function decodeLine(encoded) {
    <span class="hljs-keyword">var</span> len = encoded.length;
    <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> <span class="hljs-type">array</span> = [];
    <span class="hljs-keyword">var</span> lat = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> lng = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">while</span> (index &lt; len) {
        <span class="hljs-keyword">var</span> b;
        <span class="hljs-keyword">var</span> shift = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">do</span> {
            b = encoded.charCodeAt(index++) - <span class="hljs-number">63</span>;
            <span class="hljs-literal">result</span> |= (b &amp; <span class="hljs-number">0x1f</span>) &lt;&lt; shift;
            shift += <span class="hljs-number">5</span>;
        } <span class="hljs-keyword">while</span> (b &gt;= <span class="hljs-number">0x20</span>);

        <span class="hljs-keyword">var</span> dlat = ((<span class="hljs-literal">result</span> &amp; <span class="hljs-number">1</span>) ? ~(<span class="hljs-literal">result</span> &gt;&gt; <span class="hljs-number">1</span>) : (<span class="hljs-literal">result</span> &gt;&gt; <span class="hljs-number">1</span>));
        lat += dlat;

        shift = <span class="hljs-number">0</span>;
        <span class="hljs-literal">result</span> = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">do</span> {
            b = encoded.charCodeAt(index++) - <span class="hljs-number">63</span>;
            <span class="hljs-literal">result</span> |= (b &amp; <span class="hljs-number">0x1f</span>) &lt;&lt; shift;
            shift += <span class="hljs-number">5</span>;
        } <span class="hljs-keyword">while</span> (b &gt;= <span class="hljs-number">0x20</span>);

        <span class="hljs-keyword">var</span> dlng = ((<span class="hljs-literal">result</span> &amp; <span class="hljs-number">1</span>) ? ~(<span class="hljs-literal">result</span> &gt;&gt; <span class="hljs-number">1</span>) : (<span class="hljs-literal">result</span> &gt;&gt; <span class="hljs-number">1</span>));
        lng += dlng;

        <span class="hljs-type">array</span>.push([lat * <span class="hljs-number">1</span>e-<span class="hljs-number">5</span>, lng * <span class="hljs-number">1</span>e-<span class="hljs-number">5</span>]);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-type">array</span>;
}

    <span class="hljs-keyword">var</span> region = {
        latitude: <span class="hljs-number">42</span>.<span class="hljs-number">35849</span>,
        longitude: -<span class="hljs-number">71</span>.<span class="hljs-number">0601</span>,
        latitudeDelta: <span class="hljs-number">0</span>.<span class="hljs-number">01</span>,
        longitudeDelta: <span class="hljs-number">0</span>.<span class="hljs-number">01</span>
    };
    <span class="hljs-keyword">var</span> anno = <span class="hljs-type">Ti</span>.<span class="hljs-type">Map</span>.createAnnotation({
        animate: <span class="hljs-literal">true</span>,
        latitude: region.latitude,
        longitude: region.longitude,
        pincolor: <span class="hljs-type">Ti</span>.<span class="hljs-type">Map</span>.<span class="hljs-type">ANNOTATION_RED</span>,
        subtitle: '<span class="hljs-type">Start</span>',
        title: <span class="hljs-string">"Boston,MA"</span>,
    });

    <span class="hljs-keyword">var</span> mapview = <span class="hljs-type">Ti</span>.<span class="hljs-type">Map</span>.createView({
        animate:<span class="hljs-literal">true</span>,
        annotations: [anno],
        mapType: <span class="hljs-type">Ti</span>.<span class="hljs-type">Map</span>.<span class="hljs-type">STANDARD_TYPE</span>,
        region: region,
        regionFit: <span class="hljs-literal">true</span>,
        userLocation: <span class="hljs-literal">true</span>,
    });
    win.add(mapview);

    <span class="hljs-keyword">var</span> xhr = <span class="hljs-type">Ti</span>.<span class="hljs-type">Network</span>.createHTTPClient();
    xhr.onload = function (e) {
        <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info('onload', '');
        //*
        <span class="hljs-keyword">var</span> response = this.responseText;
        <span class="hljs-keyword">var</span> json = <span class="hljs-type">JSON</span>.parse(response);
        <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info('onload', <span class="hljs-type">JSON</span>.stringify(json));

        <span class="hljs-keyword">var</span> step = json.routes[<span class="hljs-number">0</span>].legs[<span class="hljs-number">0</span>].steps;
        <span class="hljs-keyword">var</span> intStep = <span class="hljs-number">0</span>, intSteps = step.length, points = [];
        <span class="hljs-keyword">var</span> decodedPolyline, intPoint = <span class="hljs-number">0</span>, intPoints = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (intStep = <span class="hljs-number">0</span>; intStep &lt; intSteps; intStep = intStep + <span class="hljs-number">1</span>) {
            decodedPolyline = decodeLine(step[intStep].polyline.points);
            intPoints = decodedPolyline.length;
            <span class="hljs-keyword">for</span> (intPoint = <span class="hljs-number">0</span>; intPoint &lt; intPoints; intPoint = intPoint + <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">if</span> (decodedPolyline[intPoint] != null) {
                    points.push({
                        latitude: decodedPolyline[intPoint][<span class="hljs-number">0</span>],
                        longitude: decodedPolyline[intPoint][<span class="hljs-number">1</span>]
                    });
                }
            }
        }

        <span class="hljs-keyword">var</span> route = {
            name: '<span class="hljs-type">Example</span> <span class="hljs-type">Route</span>',
            points: points,
            color: '<span class="hljs-comment">#c60000',</span>
            width: <span class="hljs-number">4</span>
        };
        mapview.addRoute(route);    
        //*/
    };
    xhr.onerror = function (e) {
        <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info('error', <span class="hljs-type">JSON</span>.stringify(e));
    };
    xhr.open('<span class="hljs-type">GET</span>', 'http://maps.googleapis.com/maps/api/directions/json?origin=<span class="hljs-type">Boston</span>,<span class="hljs-type">MA</span>&amp;destination=<span class="hljs-type">Concord</span>,<span class="hljs-type">MA</span>&amp;waypoints=<span class="hljs-type">Charlestown</span>,<span class="hljs-type">MA</span>|<span class="hljs-type">Lexington</span>,<span class="hljs-type">MA</span>&amp;sensor=<span class="hljs-literal">false</span>');
    xhr.send();


})();

<span class="hljs-keyword">var</span> tabGroup = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createTabGroup();
tabGroup.addTab(tab1);
tabGroup.open();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 14th 2012, 5:07:56 pm">August 14th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/141002/plot-a-route-on-google-map-in-android#answer-245304" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
