<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>App closes unexpectedly » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>App closes unexpectedly</h1>
		</header>
		<section>
			<p>I&#39;m trying to deploy a chat app. But now of sudden the app starts to close with error message &quot;force close&quot; Here is the error code</p>
<pre><code class="hljs">
D/AndroidRuntime( 1054): Shutting down VM
W/dalvikvm( 1054): threadid=1: thread exiting with uncaught exception (group=0x40015560)
E/TiApplication( 1054): (main) [382,14085] Sending event: exception on thread: main msg:java.lang.IllegalStateException: The specified child already has a parent. You must <span class="hljs-operator"><span class="hljs-keyword">call</span> removeView() <span class="hljs-keyword">on</span> the <span class="hljs-keyword">child</span><span class="hljs-string">'s parent first.; Titanium 3.1.1,2013/06/15 16:10,f7592c1
E/TiApplication( 1054): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child'</span>s <span class="hljs-keyword">parent</span> <span class="hljs-keyword">first</span>.
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> android.<span class="hljs-keyword">view</span>.ViewGroup.addViewInner(ViewGroup.<span class="hljs-keyword">java</span>:<span class="hljs-number">1976</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> android.<span class="hljs-keyword">view</span>.ViewGroup.addView(ViewGroup.<span class="hljs-keyword">java</span>:<span class="hljs-number">1871</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> android.<span class="hljs-keyword">view</span>.ViewGroup.addView(ViewGroup.<span class="hljs-keyword">java</span>:<span class="hljs-number">1851</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> ti.modules.titanium.ui.widget.TiUITableView.processProperties(TiUITableView.<span class="hljs-keyword">java</span>:<span class="hljs-number">148</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> org.appcelerator.kroll.KrollProxy.setModelListener(KrollProxy.<span class="hljs-keyword">java</span>:<span class="hljs-number">1126</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.<span class="hljs-keyword">java</span>:<span class="hljs-number">469</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.<span class="hljs-keyword">java</span>:<span class="hljs-number">460</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.<span class="hljs-keyword">java</span>:<span class="hljs-number">438</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> ti.modules.titanium.ui.TableViewProxy.getTableView(TableViewProxy.<span class="hljs-keyword">java</span>:<span class="hljs-number">146</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> ti.modules.titanium.ui.TableViewProxy.handleSetData(TableViewProxy.<span class="hljs-keyword">java</span>:<span class="hljs-number">689</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> ti.modules.titanium.ui.TableViewProxy.handleMessage(TableViewProxy.<span class="hljs-keyword">java</span>:<span class="hljs-number">866</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> android.os.<span class="hljs-keyword">Handler</span>.dispatchMessage(<span class="hljs-keyword">Handler</span>.<span class="hljs-keyword">java</span>:<span class="hljs-number">95</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> android.os.Looper.<span class="hljs-keyword">loop</span>(Looper.<span class="hljs-keyword">java</span>:<span class="hljs-number">130</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> android.app.ActivityThread.<span class="hljs-keyword">main</span>(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">3683</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invokeNative(<span class="hljs-keyword">Native</span> Method)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invoke(Method.<span class="hljs-keyword">java</span>:<span class="hljs-number">507</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">839</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit.<span class="hljs-keyword">main</span>(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">597</span>)
<span class="hljs-keyword">E</span>/TiApplication( <span class="hljs-number">1054</span>):     <span class="hljs-keyword">at</span> dalvik.<span class="hljs-keyword">system</span>.NativeStart.<span class="hljs-keyword">main</span>(<span class="hljs-keyword">Native</span> Method)
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">1054</span>): FATAL <span class="hljs-keyword">EXCEPTION</span>: <span class="hljs-keyword">main</span>
<span class="hljs-keyword">E</span>/AndroidRuntime( <span class="hljs-number">1054</span>): <span class="hljs-keyword">java</span>.lang.IllegalStateException: The specified <span class="hljs-keyword">child</span> already has a <span class="hljs-keyword">parent</span>. You must <span class="hljs-keyword">call</span> removeView() <span class="hljs-keyword">on</span> the <span class="hljs-keyword">child</span><span class="hljs-string">'s parent first.
E/AndroidRuntime( 1054):     at android.view.ViewGroup.addViewInner(ViewGroup.java:1976)
E/AndroidRuntime( 1054):     at android.view.ViewGroup.addView(ViewGroup.java:1871)
E/AndroidRuntime( 1054):     at android.view.ViewGroup.addView(ViewGroup.java:1851)
E/AndroidRuntime( 1054):     at ti.modules.titanium.ui.widget.TiUITableView.processProperties(TiUITableView.java:148)
E/AndroidRuntime( 1054):     at org.appcelerator.kroll.KrollProxy.setModelListener(KrollProxy.java:1126)
E/AndroidRuntime( 1054):     at org.appcelerator.titanium.proxy.TiViewProxy.realizeViews(TiViewProxy.java:469)
E/AndroidRuntime( 1054):     at org.appcelerator.titanium.proxy.TiViewProxy.handleGetView(TiViewProxy.java:460)
E/AndroidRuntime( 1054):     at org.appcelerator.titanium.proxy.TiViewProxy.getOrCreateView(TiViewProxy.java:438)
E/AndroidRuntime( 1054):     at ti.modules.titanium.ui.TableViewProxy.getTableView(TableViewProxy.java:146)
E/AndroidRuntime( 1054):     at ti.modules.titanium.ui.TableViewProxy.handleSetData(TableViewProxy.java:689)
E/AndroidRuntime( 1054):     at ti.modules.titanium.ui.TableViewProxy.handleMessage(TableViewProxy.java:866)
E/AndroidRuntime( 1054):     at android.os.Handler.dispatchMessage(Handler.java:95)
E/AndroidRuntime( 1054):     at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 1054):     at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime( 1054):     at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1054):     at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 1054):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime( 1054):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime( 1054):     at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(   62):   Force finishing activity com.Chatapp.test/org.appcelerator.titanium.TiModalActivity
W/ActivityManager(   62): Activity pause timeout for HistoryRecord{407c0860 com.Chatapp.test/org.appcelerator.titanium.TiModalActivity}</span></span>
</code></pre><p>what may be reason?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 20th 2013, 4:06:18 am">July 20th 2013</span>
				by <span class='authorname'>Kishore K</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>application</span></li>
					
						<li><span class='tagname'>force close</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi Kishore,</p>
<p>You are adding multiple time object  in Parent you need to remove first before adding another one.</p>
<p><strong>java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child&#39;s parent first.</strong></p>
</div>
							<div class="author">
								&mdash; commented <span title="July 20th 2013, 5:20:17 am">July 20th 2013</span>
								by <span class='authorname'>Nitin Chavda</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Ok.. thanks. solved that issue. But now when I close and open controllers repeatedly the app closes with the following error.</p>
<pre><code class="hljs">E/dalvikvm-heap(  <span class="hljs-number">760</span>): Out of memory on a <span class="hljs-number">89292</span>-byte allocation.
I/dalvikvm(  <span class="hljs-number">760</span>): <span class="hljs-string">"KrollRuntimeThread"</span> prio=<span class="hljs-number">5</span> tid=<span class="hljs-number">10</span> RUNNABLE
I/dalvikvm(  <span class="hljs-number">760</span>):   | group=<span class="hljs-string">"main"</span> sCount=<span class="hljs-number">0</span> dsCount=<span class="hljs-number">0</span> obj=<span class="hljs-number">0x405d5240</span> self=<span class="hljs-number">0x2c4d28</span>
I/dalvikvm(  <span class="hljs-number">760</span>):   | sysTid=<span class="hljs-number">775</span> nice=<span class="hljs-number">0</span> sched=<span class="hljs-number">0</span>/<span class="hljs-number">0</span> cgrp=<span class="hljs-keyword">default</span> handle=<span class="hljs-number">2907080</span>
I/dalvikvm(  <span class="hljs-number">760</span>):   | schedstat=( <span class="hljs-number">8985163421</span> <span class="hljs-number">8646679547</span> <span class="hljs-number">1639</span> )
I/dalvikvm(  <span class="hljs-number">760</span>):   at java.lang.String.&lt;init&gt;(String.java:~<span class="hljs-number">422</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at java.lang.String.&lt;init&gt;(String.java:<span class="hljs-number">276</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at org.appcelerator.titanium.TiBlob.getText(TiBlob.java:<span class="hljs-number">372</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at org.appcelerator.titanium.TiBlob.toString(TiBlob.java:<span class="hljs-number">428</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at ti.modules.titanium.network.TiHTTPClient.detectResponseDataEncoding(TiHTTPClient.java:<span class="hljs-number">582</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at ti.modules.titanium.network.TiHTTPClient.getResponseText(TiHTTPClient.java:<span class="hljs-number">609</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at ti.modules.titanium.network.HTTPClientProxy.getResponseText(HTTPClientProxy.java:<span class="hljs-number">87</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at org.appcelerator.kroll.runtime.v8.V8Object.nativeCallProperty(Native Method)
I/dalvikvm(  <span class="hljs-number">760</span>):   at org.appcelerator.kroll.runtime.v8.V8Object.callProperty(V8Object.java:<span class="hljs-number">69</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:<span class="hljs-number">1073</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at android.os.Handler.dispatchMessage(Handler.java:<span class="hljs-number">95</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at android.os.Looper.loop(Looper.java:<span class="hljs-number">130</span>)
I/dalvikvm(  <span class="hljs-number">760</span>):   at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:<span class="hljs-number">112</span>)
I/dalvikvm(  <span class="hljs-number">760</span>): 
D/skia    (  <span class="hljs-number">760</span>): --- SkImageDecoder::Factory returned null
D/skia    (  <span class="hljs-number">760</span>): --- SkImageDecoder::Factory returned null
D/skia    (  <span class="hljs-number">760</span>): --- SkImageDecoder::Factory returned null
W/System.err(  <span class="hljs-number">760</span>): java.lang.OutOfMemoryError
W/System.err(  <span class="hljs-number">760</span>):     at java.lang.String.&lt;init&gt;(String.java:<span class="hljs-number">422</span>)
W/System.err(  <span class="hljs-number">760</span>):     at java.lang.String.&lt;init&gt;(String.java:<span class="hljs-number">276</span>)
W/System.err(  <span class="hljs-number">760</span>):     at org.appcelerator.titanium.TiBlob.getText(TiBlob.java:<span class="hljs-number">372</span>)
W/System.err(  <span class="hljs-number">760</span>):     at org.appcelerator.titanium.TiBlob.toString(TiBlob.java:<span class="hljs-number">428</span>)
W/System.err(  <span class="hljs-number">760</span>):     at ti.modules.titanium.network.TiHTTPClient.detectResponseDataEncoding(TiHTTPClient.java:<span class="hljs-number">582</span>)
W/System.err(  <span class="hljs-number">760</span>):     at ti.modules.titanium.network.TiHTTPClient.getResponseText(TiHTTPClient.java:<span class="hljs-number">609</span>)
W/System.err(  <span class="hljs-number">760</span>):     at ti.modules.titanium.network.HTTPClientProxy.getResponseText(HTTPClientProxy.java:<span class="hljs-number">87</span>)
W/System.err(  <span class="hljs-number">760</span>):     at org.appcelerator.kroll.runtime.v8.V8Object.nativeCallProperty(Native Method)
W/System.err(  <span class="hljs-number">760</span>):     at org.appcelerator.kroll.runtime.v8.V8Object.callProperty(V8Object.java:<span class="hljs-number">69</span>)
W/System.err(  <span class="hljs-number">760</span>):     at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:<span class="hljs-number">1073</span>)
W/System.err(  <span class="hljs-number">760</span>):     at android.os.Handler.dispatchMessage(Handler.java:<span class="hljs-number">95</span>)
W/System.err(  <span class="hljs-number">760</span>):     at android.os.Looper.loop(Looper.java:<span class="hljs-number">130</span>)
W/System.err(  <span class="hljs-number">760</span>):     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:<span class="hljs-number">112</span>)
E/V8Exception(  <span class="hljs-number">760</span>): Exception occurred at alloy/sync/restapi.js:<span class="hljs-number">14</span>: Uncaught Error: Java Exception occurred
I/dalvikvm-heap(  <span class="hljs-number">760</span>): Clamp target GC heap from <span class="hljs-number">24.343</span>MB to <span class="hljs-number">24.000</span>MB
D/dalvikvm(  <span class="hljs-number">760</span>): GC_FOR_MALLOC freed <span class="hljs-number">146</span>K, <span class="hljs-number">44</span>% <span class="hljs-built_in">free</span> <span class="hljs-number">5417</span>K/<span class="hljs-number">9543</span>K, external <span class="hljs-number">15038</span>K/<span class="hljs-number">15806</span>K, paused <span class="hljs-number">64</span>ms
I/dalvikvm-heap(  <span class="hljs-number">760</span>): Clamp target GC heap from <span class="hljs-number">24.372</span>MB to <span class="hljs-number">24.000</span>MB
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="July 20th 2013, 7:06:46 am">July 20th 2013</span>
								by <span class='authorname'>Kishore K</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Kishore,</p>
<p>There is memory issue in your application.You can check in your console with error <strong>Out of memory on a 89292-byte allocation</strong>. Try to run in real device</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 26th 2013, 10:03:17 am">July 26th 2013</span>
								by <span class='authorname'>Nitin Chavda</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-266169">
				
						<section>
							<p>Hi</p>
<p>Your errors are telling you the problems;</p>
<pre><code class="hljs">The specified child already has <span class="hljs-tag">a</span> parent. You must call <span class="hljs-function"><span class="hljs-title">removeView</span><span class="hljs-params">()</span></span> on the child<span class="hljs-string">'s parent first</span>
</code></pre><p>This told you the first problem.</p>
<p>The second problem appears related to memory and more specifically you have run out of memory, which means looking at how you are using memory.  You have decided not to provide any code snippets related to the problem which makes any diagnosis exceptionally difficult but I would suspect that the two lines…</p>
<pre><code class="hljs">org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.TiBlob</span><span class="hljs-class">.getText</span>(TiBlob<span class="hljs-class">.java</span>:<span class="hljs-number">372</span>)
org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.TiBlob</span><span class="hljs-class">.toString</span>(TiBlob<span class="hljs-class">.java</span>:<span class="hljs-number">428</span>)
</code></pre><p>…are suggesting you are converting input binary data (or large data) to text, this may be a loop combining content in a loop or simply a large download - as the errors indicate use of httpClient.</p>
<p>If you have no obvious large data processing in your handler then move on to standard diagnosis;</p>
<p>Simplify your onLoad code to simple output a success debug line, comment out everything else.  If this works without error uncomment the next couple of lines and try again, keep going until it fails - this is where your problem is.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 20th 2013, 11:34:31 am">July 20th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/155081/app-closes-unexpectedly.html#answer-266169" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Malcolm Hollingsworth. In my app, I&#39;ve the following function to utilize the onLoad data. Here is the controller code.</p>
<pre><code class="hljs">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deploychat</span> <span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> messages= Alloy.Collections.messageModel;    
    messages.fetch({ query: <span class="hljs-string">'SELECT * FROM chatHistory WHERE ID = '</span> +msgID });    

    <span class="hljs-keyword">var</span> chat = Alloy.createModel(<span class="hljs-string">'chatModel'</span>);
    chat.save({ params });
    <span class="hljs-keyword">var</span> details = chat.fetch({        
        success: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(collection, response, options)</span> </span>{
            <span class="hljs-keyword">var</span> chats = response.data;
             <span class="hljs-keyword">if</span>(messages.length &lt; chats.length) {

                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i =chsc.length; i&lt;chats.length;i++){
                    <span class="hljs-keyword">var</span> msgID = chats[i].user_id;
                    <span class="hljs-keyword">var</span> chatImage = chats[i].avatar;                
                    <span class="hljs-keyword">var</span> message = chats[i].message;
                    <span class="hljs-keyword">var</span> payload ={
                        avatar : Avatar,
                        message: message,
                        msgID:msgID
                    }

                    <span class="hljs-comment">// to display in xml        </span>
                       messages.add(Alloy.createModel(<span class="hljs-string">"messageModel"</span>,payload)); 

                    <span class="hljs-comment">// to save to database</span>
                       <span class="hljs-keyword">var</span> newmessage = Alloy.createModel(<span class="hljs-string">'messageModel'</span>,payload);
                    newmessage.save();    
                    Ti.API.info(<span class="hljs-string">'there are '</span>+messages.length+<span class="hljs-string">' models in the collection'</span>);
                };
            }
        },
        error: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(collection, loginReq, options)</span> </span>{
            alert(<span class="hljs-string">"error"</span>);
        }
    });
}
</code></pre><p>I&#39;m using rest api to send and receive http requests.</p>
<p>restapi code</p>
<pre><code class="hljs">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">InitAdapter</span>(<span class="hljs-params">config</span>) </span>{
    <span class="hljs-keyword">return</span> {};
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">apiCall</span>(<span class="hljs-params">_options, _callback</span>) </span>{
    <span class="hljs-keyword">var</span> loginReq = Titanium.Network.createHTTPClient({
        timeout : <span class="hljs-number">5000</span>
    });

    <span class="hljs-comment">//Prepare the request</span>
        loginReq.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        _callback({
            success: <span class="hljs-literal">true</span>,
            status: loginReq.status == <span class="hljs-number">200</span> ? <span class="hljs-string">"ok"</span> : loginReq.status,
            code: loginReq.status,
            responseText : loginReq.responseText ,
            responseData : loginReq.responseData ,
            cookie : loginReq.getResponseHeader(<span class="hljs-string">'Set-Cookie'</span>)
        });
    };

    <span class="hljs-comment">//Handle error</span>
    loginReq.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        _callback({
            success: <span class="hljs-literal">false</span>,
            status: <span class="hljs-string">"error"</span>,
            code: loginReq.status,
            data: e.error,
            responseText : loginReq.responseText
        });
        Ti.API.error(<span class="hljs-string">'[REST API] apiCall ERROR: '</span> + loginReq.responseText)
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> header <span class="hljs-keyword">in</span> _options.headers) {
        loginReq.setRequestHeader(header, _options.headers[header]);
    }
    <span class="hljs-keyword">if</span> (_options.beforeSend) {
        _options.beforeSend(loginReq);
    }
    <span class="hljs-comment">// loginReq.open(_options.type, _options.url);</span>
    loginReq.open(<span class="hljs-string">"POST"</span>, _options.url);
    loginReq.send(_options);
    <span class="hljs-comment">// alert(_options);</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sync</span>(<span class="hljs-params">method, model, opts</span>) </span>{


    <span class="hljs-keyword">var</span> payload = model.toJSON();
    <span class="hljs-keyword">var</span> DEBUG = model.config.debug;
    <span class="hljs-keyword">var</span> params = payload || _.extend({}, opts);

    <span class="hljs-comment">//set default headers</span>
    params.headers = params.headers || {};
    <span class="hljs-comment">// We need to ensure that we have a base url.</span>
    <span class="hljs-keyword">if</span> (!params.url) {
        params.url = (model.config.URL || model.url());
        <span class="hljs-keyword">if</span> (!params.url) {
            Ti.API.error(<span class="hljs-string">"[REST API] ERROR: NO BASE URL"</span>);
            <span class="hljs-keyword">return</span>;
        }
    }

    <span class="hljs-comment">// For older servers, emulate JSON by encoding the request into an HTML-form.</span>
    <span class="hljs-keyword">if</span> (Alloy.Backbone.emulateJSON) {
        params.contentType = <span class="hljs-string">'application/x-www-form-urlencoded'</span>;
        params.processData = <span class="hljs-literal">true</span>;
        params.data = params.data ? {
            model : params.data
        } : {};
    }

    <span class="hljs-comment">// For older servers, emulate HTTP by mimicking the HTTP method with `_method`</span>
    <span class="hljs-comment">// And an `X-HTTP-Method-Override` header.</span>
    <span class="hljs-keyword">if</span> (Alloy.Backbone.emulateHTTP) {
        <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'PUT'</span> || type === <span class="hljs-string">'DELETE'</span>) {
            <span class="hljs-keyword">if</span> (Alloy.Backbone.emulateJSON)
                params.data._method = type;
            params.type = <span class="hljs-string">'POST'</span>;
            params.beforeSend = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">loginReq</span>) </span>{
                params.headers[<span class="hljs-string">'X-HTTP-Method-Override'</span>] = type
            };
        }
    }

    <span class="hljs-comment">// json data transfers</span>
    params.headers[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'application/json'</span>;
    <span class="hljs-keyword">switch</span>(method){
        <span class="hljs-keyword">case</span> <span class="hljs-string">'read'</span>:
            apiCall(params, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_response</span>) </span>{
            <span class="hljs-comment">// alert(_response.responseText);</span>
                <span class="hljs-keyword">if</span> (_response.success) {
                    <span class="hljs-keyword">var</span> data = <span class="hljs-built_in">JSON</span>.parse(_response.responseText);
                    <span class="hljs-keyword">if</span>(DEBUG){
                        Ti.API.info(<span class="hljs-string">"[REST API] server create response: "</span>);
                        Ti.API.debug(data)
                    }
                    <span class="hljs-keyword">var</span> contents = {data: data, cookie: _response.cookie};
                    opts.success(contents, <span class="hljs-built_in">JSON</span>.stringify(contents));
                    model.trigger(<span class="hljs-string">"fetch"</span>);
                    <span class="hljs-comment">// fire event</span>
                } <span class="hljs-keyword">else</span> {
                    params.error(<span class="hljs-built_in">JSON</span>.parse(_response.responseText), _response.responseText);
                    Ti.API.error(<span class="hljs-string">'[REST API] CREATE ERROR: '</span>);
                    Ti.API.error(_response);
                }
            });
            <span class="hljs-keyword">break</span>;
            }
};
<span class="hljs-comment">//we need underscore</span>
<span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">"alloy/underscore"</span>)._;

<span class="hljs-comment">//until this issue is fixed: https://jira.appcelerator.org/browse/TIMOB-11752</span>
<span class="hljs-keyword">var</span> Alloy = <span class="hljs-built_in">require</span>(<span class="hljs-string">"alloy"</span>), Backbone = Alloy.Backbone;

<span class="hljs-built_in">module</span>.exports.sync = Sync;

<span class="hljs-built_in">module</span>.exports.beforeModelCreate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">config, name</span>) </span>{
    config = config || {};
    InitAdapter(config);
    <span class="hljs-keyword">return</span> config;
};

<span class="hljs-built_in">module</span>.exports.afterModelCreate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Model, name</span>) </span>{
    Model = Model || {};
    Model.prototype.config.Model = Model;
    <span class="hljs-keyword">return</span> Model;
};
</code></pre><p>I&#39;d got this code from net and made some modifications. Is there any error in my code to cause this issue? If so please help me to solve it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 22nd 2013, 2:15:22 am">July 22nd 2013</span>
											by <span class='authorname'>Kishore K</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
