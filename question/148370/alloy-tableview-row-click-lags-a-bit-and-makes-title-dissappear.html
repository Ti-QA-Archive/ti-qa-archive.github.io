<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy tableview row click lags a bit and makes title dissappear » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy tableview row click lags a bit and makes title dissappear</h1>
		</header>
		<section>
			<p>Has anyone seen this before? I have a basic table grouped with static data. When I click on the first row it opens a modal window. However when clicking on that first row it lags a bit the title dissappears and I can contineu clicking the row untill the modal windows decides to open, subsequently opens 2, 3, 4 modal windows however many i  can click during that small amount of time. I  can paste code if needed let me know.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 16th 2013, 5:22:06 pm">February 16th 2013</span>
				by <span class='authorname'>Nando Cammarota</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
						<li><span class='tagname'>tableviewrow</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Also note: When running in the iPhone simulator it runs great. When I run on the actual device this is when the problem occurs.</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 16th 2013, 5:31:49 pm">February 16th 2013</span>
								by <span class='authorname'>Nando Cammarota</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Missing from you question are several pieces of information that will help you obtain a speedy and accurate answer, please provide details for ALL of the following ONLY if they are relevant;</p>
<ul>
<li>Titanium SDK Version?</li>
<li>Target platform<ul>
<li>iOS only?</li>
</ul>
</li>
<li>A code snippet that can be used to determine what you have achieved so far</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="February 16th 2013, 5:34:09 pm">February 16th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><ul>
<li>Titanium SDK: 3.0.0.GA for iPhone iOS</li>
<li>IOS SDK both simulator 6.1</li>
<li>IOS SDK physical device 6.1.1  &lt;— maybe this is the issue?</li>
</ul>
<pre><code class="hljs"><span class="hljs-keyword">var</span> settingsData = [{title: <span class="hljs-string">'category'</span>, hasChild:<span class="hljs-literal">true</span>, header:<span class="hljs-string">'header1'</span> },   <span class="hljs-comment">//&lt;---- this title dissappears when clicked</span>
                  {title: <span class="hljs-string">'profile'</span>, hasChild:<span class="hljs-literal">true</span> },
];

$.settingsTable.setData(settingsData);

$.settingsTable.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> categoriesWindow;
    <span class="hljs-keyword">if</span>(e.index == <span class="hljs-number">0</span>) { 
        categoriesWindow = Alloy.createController(<span class="hljs-string">'categories'</span>).getView();
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">1</span>) { 
        categoriesWindow = Alloy.createController(<span class="hljs-string">'profile'</span>).getView();
    }
    categoriesWindow.open();
});
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="February 16th 2013, 5:42:07 pm">February 16th 2013</span>
								by <span class='authorname'>Nando Cammarota</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Can you provide your style and view information as well as any other dependant files as the snippet (as good as it is to get) is a basic table and the only thing that jumps out as a problem is not going to be the cause.</p>
<pre><code class="hljs"><span class="hljs-built_in">var</span> settingsData = <span class="hljs-preprocessor">[</span>
    {
        title: <span class="hljs-string">'category'</span>,
        hasChild:<span class="hljs-literal">true</span>,
        <span class="hljs-keyword">header</span>:<span class="hljs-string">'header1'</span>
    },   <span class="hljs-comment">//&lt;---- this title dissappears when clicked</span>
    {
        title: <span class="hljs-string">'profile'</span>,
        hasChild:<span class="hljs-literal">true</span>
    } <span class="hljs-comment">// no trailing commas</span>
<span class="hljs-preprocessor">]</span><span class="hljs-markup">;</span>
</code></pre><p>Also is your table grouped?</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 16th 2013, 5:52:55 pm">February 16th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Let me know if you need more code…</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Tab</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"settingsTab"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Settings"</span> <span class="hljs-attribute">icon</span>=<span class="hljs-value">"KS_nav_ui.png"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"settingsWindow"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Settings"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"settingsTable"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Tab</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><pre><code class="hljs">"<span class="hljs-class">.container</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">backgroundColor</span>:<span class="hljs-value"> Ti.UI.iOS.COLOR_UNDER_PAGE_BACKGROUND,
</span></span></span>},
"<span class="hljs-tag">Tab</span>" : <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">icon</span>:<span class="hljs-value"> <span class="hljs-string">'/images/mc_tab_settings_on.png'</span>,
</span></span></span>},
"<span class="hljs-tag">TableView</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">style</span>:<span class="hljs-value"> Ti.UI.iPhone.TableViewStyle.GROUPED,

</span></span></span>},
"<span class="hljs-tag">Window</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">barColor</span>:<span class="hljs-value"> <span class="hljs-string">'#173861'</span>,
</span></span></span>},
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="February 16th 2013, 6:06:18 pm">February 16th 2013</span>
								by <span class='authorname'>Nando Cammarota</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-256937">
				
						<section>
							<p>Hi</p>
<p>Until you have shared the code you offered I can only offer some general advice.</p>
<p>The ability to continue to click a row causing multiple windows to open for each click is by design.  Do not get me wrong I do not mean that Titanium thinks opening multiple windows is a good idea from successive <strong>tableViewRow</strong> clicks, it is more that is runs the code you asked it to do on each click as many times as you click.  It is up to you to tell it to NOT open more windows than required.</p>
<p>The reason this is allowed is simple; you may want it.  Repeated-ally clicking the same row can be useful for other functions than opening a window.  But in your case allowing multiple clicks to fire the event that should only be fired once is undesired.</p>
<p>So how do you stop it?  Actually easier than you think.</p>
<p>When the click event code is called, the VERY first line should disable the touch events of the <strong>tableView</strong> (or just that <strong>tableViewRow</strong> but not for this situation).  This will stop the event being fired again.  When the new window is opened you can enabled the touch events to continue again.  You may of course choose to enable the events ONLY when the new window has been closed - which you can do in the new windows close event listener.</p>
<p>There are a few ways to disable the tableView;</p>
<ul>
<li>Set the <strong>touchEnabled</strong> property to false</li>
<li>Set a variable to act as a toggle that your code cannot run if it is set</li>
<li>Add a transparent view over the <strong>tableView</strong> so it receives the touchEvents rather than the table - useful as you could choose to add an opacity to it do indicate that something is happening.</li>
</ul>
<p>You can also consider adding an <strong>activityIndicator</strong> over the <strong>tableView</strong> or on the specific <strong>tableViewRow</strong> so the user knows something is happening and they will be less likely to think they should be touch happy!</p>
<p>When you are handling click events like this, where you are taking the actual use case into account and handle things that can happen as well as those things that should happen your users get a much better experience.  The good news is that the extra effort is minimal and your app stands apart from those who do not take the time.</p>
<p>This does not answer your main question - but as I say - need some code for that.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 16th 2013, 5:47:48 pm">February 16th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/148370/alloy-tableview-row-click-lags-a-bit-and-makes-title-dissappear.html#answer-256937" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Cheers for the code.  As I have not got access to the <strong>categories</strong> or <strong>profile</strong> controllers I had to use some simply dummy code.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> settingsData = [{title: <span class="hljs-string">'category'</span>, hasChild:<span class="hljs-literal">true</span>, header:<span class="hljs-string">'header1'</span> },   <span class="hljs-comment">//&lt;---- this title dissappears when clicked</span>
                  {title: <span class="hljs-string">'profile'</span>, hasChild:<span class="hljs-literal">true</span> },
];

$.settingsTable.setData(settingsData);

$.settingsTable.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> categoriesWindow;
    <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">0</span>) { 
        categoriesWindow = Ti.UI.createWindow({  
            backgroundColor: <span class="hljs-string">'#fff'</span>,
            title: <span class="hljs-string">'New Window 1'</span>
        });
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">1</span>) { 
        categoriesWindow = Ti.UI.createWindow({  
            backgroundColor: <span class="hljs-string">'#fff'</span>,
            title: <span class="hljs-string">'New Window 2'</span>
        });
    }
    categoriesWindow.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
        e.source.close();
    });
    categoriesWindow.open();
});
</code></pre><p>I cannot reproduce the either the section title hide you noticed or the multiple row clicks.</p>
<p>The lack of multiple row clicks I experienced is very likely due to the very small amount of code used to generate the window.  I suspect yours are more detailed and thus take longer to load.</p>
<p>I have tried on both the simulator and a device.</p>
<p>However I have added a very simple toggle trigger using your code that should stop multiple row clicks until the window that is created has closed.</p>
<pre><code class="hljs">$.settingsTable.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    $.settingsTable.setTouchEnabled(<span class="hljs-literal">false</span>);
    <span class="hljs-keyword">var</span> categoriesWindow;
    <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">0</span>) { 
        categoriesWindow = Alloy.createController(<span class="hljs-string">'categories'</span>).getView();
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">1</span>) { 
        categoriesWindow = Alloy.createController(<span class="hljs-string">'profile'</span>).getView();
    }
    categoriesWindow.addEventListener(<span class="hljs-string">'close'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
        $.settingsTable.setTouchEnabled(<span class="hljs-literal">true</span>);
    });
    categoriesWindow.open();
});
</code></pre><p>See if that helps any.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2013, 6:54:42 pm">February 16th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>only problem I see with this code is that it doesn&#39;t account for error handling to renable the touching on the table</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2013, 11:39:17 pm">February 16th 2013</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Aaron; what about this line;</p>
<pre><code class="hljs"><span class="hljs-variable">$.</span>settingsTable.setTouchEnabled(<span class="hljs-literal">true</span>);
</code></pre><p>It set the touch enabled state back when the window closes on either controller window.  If there is an error in either window creation the app isn&#39;t going to work anyway.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2013, 9:58:41 am">February 17th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The profile controller loads quick. the problem exists on the categories, code is below:</p>
<p>categories.js</p>
<pre><code class="hljs">Alloy.Collections.Categories.fetch();
<span class="hljs-keyword">var</span> categoryCollection = Alloy.Collections.Categories;

$.tblCategories.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">var</span> categoryModel = categoryCollection.<span class="hljs-keyword">get</span>(e.rowData.model);
    <span class="hljs-keyword">if</span>(e.row.hasCheck){
        e.row.hasCheck = <span class="hljs-literal">false</span>;
        categoryModel.<span class="hljs-keyword">set</span>(<span class="hljs-string">"isFavorite"</span>, <span class="hljs-number">0</span>);
    }
    <span class="hljs-keyword">else</span>{
        e.row.hasCheck = <span class="hljs-literal">true</span>;
        categoryModel.<span class="hljs-keyword">set</span>(<span class="hljs-string">"isFavorite"</span>, <span class="hljs-number">1</span>);
    }
    categoryModel.save();
});

$.btnSave.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">if</span>(!Ti.App.Properties.hasProperty(<span class="hljs-string">'jobsDataSeeded'</span>)) {
        Ti.App.fireEvent(<span class="hljs-string">'initialDataLoad'</span>, {msg: Alloy.CFG.nonEmployee});    
    }

    $.categoriesWindow.close();
});
</code></pre><p>categories.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Collection</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"Categories"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"categoriesWindow"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Categories"</span> <span class="hljs-attribute">barImage</span>=<span class="hljs-value">"/images/background.png"</span> <span class="hljs-attribute">titleImage</span>=<span class="hljs-value">"/images/categories.png"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">RightNavButton</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"btnSave"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Save"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">RightNavButton</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"tblCategories"</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"Categories"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"categoryRow"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>categoryRow.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"row"</span> <span class="hljs-attribute">dataId</span>=<span class="hljs-value">""</span> <span class="hljs-attribute">model</span>=<span class="hljs-value">"{id}"</span> <span class="hljs-attribute">hasCheck</span>=<span class="hljs-value">"{isFavorite}"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"vgroup"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">ImageView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"GeneralImage"</span> <span class="hljs-attribute">image</span>=<span class="hljs-value">"{generalImage}"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"name"</span> <span class="hljs-attribute">text</span>=<span class="hljs-value">"{name}"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">TableViewRow</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 19th 2013, 7:00:12 pm">February 19th 2013</span>
											by <span class='authorname'>Nando Cammarota</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If i comment the first line in categories.js</p>
<pre><code class="hljs"> <span class="hljs-tag">Alloy</span><span class="hljs-class">.Collections</span><span class="hljs-class">.Categories</span><span class="hljs-class">.fetch</span>();
</code></pre><p>the modal window opens quickly but contains no data. When the line does a fetch the title on the taberow goes blank and lags during opening, but the data is there. </p>
<p>Also, in the simulator it works great this only occurs on the actual device.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 19th 2013, 7:10:47 pm">February 19th 2013</span>
											by <span class='authorname'>Nando Cammarota</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Malcolm your categories window needs to open as modal. The problem lies on Alloy.Collections.Categories.fetch();  I moved the fetch line to index.js to speed up the data access, however no data gets binded to the categories.xml. however the Alloy.Collections.Categories.length indicates the correct number of elements. Could this be a problem because it is a modal window?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2013, 11:55:19 am">February 20th 2013</span>
											by <span class='authorname'>Nando Cammarota</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
