<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Focus on textfield in a table » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Focus on textfield in a table</h1>
		</header>
		<section>
			<p>Hi,<br>I am getting the text values from my table with this way:</p>
<pre><code class="hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt;<span class="hljs-number">2</span> ; i++ ){

            <span class="hljs-keyword">var</span> section = tableView.data[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">var</span> rows = section.rows;
            <span class="hljs-keyword">var</span> thirdRow = rows[i];
            <span class="hljs-keyword">var</span> children = thirdRow.children;
            <span class="hljs-keyword">var</span> txt = children[<span class="hljs-number">1</span>];

            <span class="hljs-keyword">if</span>(i==<span class="hljs-number">0</span>){
                 email = txt;
                }
            <span class="hljs-keyword">else</span>
                {
                    password=txt;
                }

        }
</code></pre><p>Then I get the values with email.value and password.value.<br>I want to focus(and show the keyboard) on email textfield when the window is open. i tried email.focus()  but its not working</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 4th 2012, 3:54:50 pm">August 4th 2012</span>
				by <span class='authorname'>Michael Mavris</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>focus</span></li>
					
						<li><span class='tagname'>table</span></li>
					
						<li><span class='tagname'>textfield</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-244466">
				
						<section>
							<p>Try to use textfield.focus() function inside the open listener the window, containing that table. For more help use <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;17351&#x2F;start-with-focus-on-a-textarea">this</a> link.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 4th 2012, 4:06:26 pm">August 4th 2012</span>
								by <span class='authorname'>Ashutosh Chaturvedi</span><br>
								<a class="icon-bg icon-link" href="question/140557/focus-on-textfield-in-a-table#answer-244466" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-244467">
				
						<section>
							<p>Hi Michael </p>
<p>The answer to your question may depend heavily on how you created the fields in the first place.  Have you embedded the text fields into the rows leaving the variables in-accessible externally?</p>
<p>Can you provide the creation routine - even if you simplify it, so I can help.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 4th 2012, 4:06:39 pm">August 4th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/140557/focus-on-textfield-in-a-table#answer-244467" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><pre><code class="hljs">function addRow(labelName)
    <span class="hljs-keyword">var</span> row = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createTableViewRow({height:<span class="hljs-number">80</span>,backgroundColor:'<span class="hljs-comment">#ffffff'});</span>

<span class="hljs-keyword">var</span> label = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createLabel(<span class="hljs-decorator">{...}</span>);

    <span class="hljs-keyword">var</span> tf1 = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTextArea(<span class="hljs-decorator">{...}</span>);

    row.add(tf1);

<span class="hljs-keyword">var</span> tableView = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createTableView({
    data:data});
  }

   <span class="hljs-keyword">var</span> data=[];
   data[<span class="hljs-number">0</span>]= addRow(<span class="hljs-string">"something"</span>);
</code></pre><p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 4th 2012, 4:13:43 pm">August 4th 2012</span>
											by <span class='authorname'>Michael Mavris</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-244469">
				
						<section>
							<p>Hi Michael</p>
<p>I have the answer for you and I also got a bit carried away with features that might be useful - sorry!</p>
<p>The problem you have (as you might have guessed) is scope, as the variable references used to create the fields are held in a function - outside the scope of normal access.</p>
<p>I have created three helper functions and example code how to use them.</p>
<p>Helper <strong>1</strong> is <code>addRowText</code>, you use this to add the row, label and text field in one go - it returns the row object, child views and event handlers for that row instance.</p>
<p>Example usage;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> row = addRowText({
    hintText: <span class="hljs-string">'Enter Password'</span>,
    id: <span class="hljs-string">'password'</span>,
    passwordMask: <span class="hljs-keyword">true</span>,
    title: <span class="hljs-string">'Password'</span>,
    <span class="hljs-keyword">value</span>: <span class="hljs-string">''</span>
});
</code></pre><p>You can see from this that you have a lot of control - and hopefully you will see how to extend it.</p>
<p>Helper <strong>2</strong> is <code>setFocus</code>, you use this once the table is created and added to a window.</p>
<p>Example usage;</p>
<pre><code class="hljs"><span class="hljs-tag">setFocus</span>({
    <span class="hljs-attribute">id</span>: <span class="hljs-string">'email'</span>,
    <span class="hljs-attribute">table</span>: tbl
});
</code></pre><p>Helper <strong>3</strong> is <code>getValues</code>, you use this to get an object of all fields within the table with their field ids and values.</p>
<p>Example usage;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> values = getValues({
    table: tbl
});
Ti.API.info(<span class="hljs-string">'values'</span>, <span class="hljs-built_in">JSON</span>.stringify(values));
</code></pre><p>Additionally I have created an event you can listen for called <code>changed</code>, this returns the <code>id</code> and <code>value</code> for whichever field is being changed and the time.  You can use this do process things as typed, rather than waiting until the end.</p>
<p>This is the full code - only assumption is there is a window called <code>win1</code> and it is already opened.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRowText</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({
        backgroundColor: <span class="hljs-string">'#fff'</span>,
        height: <span class="hljs-number">50</span>,
        id: (obj.id || <span class="hljs-literal">undefined</span>)
    });
    <span class="hljs-keyword">var</span> lbl = Ti.UI.createLabel({
        height: Ti.UI.SIZE,
        left: <span class="hljs-number">10</span>,
        text: (obj.title || <span class="hljs-string">'Unknown'</span>),
        width: Ti.UI.SIZE
    });
    row.add(lbl);
    <span class="hljs-keyword">var</span> txt = Ti.UI.createTextField({
        height: Ti.UI.FILL,
        hintText: (obj.hintText || <span class="hljs-string">''</span>),
        passwordMask: (obj.passwordMask || <span class="hljs-literal">false</span>),
        right: <span class="hljs-number">10</span>,
        value: (obj.value || <span class="hljs-string">''</span>),
        width: <span class="hljs-number">180</span>
    });
    row.add(txt);
    row.setFocus = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        txt.focus();
    };
    row.getValue = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> txt.getValue();
    };
    txt.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
        row.fireEvent(<span class="hljs-string">'changed'</span>, {
            id: row.id,
            value: e.value
        });
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    });
    <span class="hljs-keyword">return</span> row;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setFocus</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">var</span> data = obj.table.getData()[<span class="hljs-number">0</span>].rows;
    <span class="hljs-keyword">var</span> intRow = <span class="hljs-number">0</span>, intRows = data.length, id = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">for</span> (intRow = <span class="hljs-number">0</span>; intRow &lt; intRows; intRow = intRow + <span class="hljs-number">1</span>) {
        id = data[intRow].id;
        <span class="hljs-keyword">if</span> (obj.id === id) {
            data[intRow].setFocus();
        }
    }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getValues</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">var</span> data = obj.table.getData()[<span class="hljs-number">0</span>].rows;
    <span class="hljs-keyword">var</span> intRow = <span class="hljs-number">0</span>, intRows = data.length, id = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> ret = {};
    <span class="hljs-keyword">for</span> (intRow = <span class="hljs-number">0</span>; intRow &lt; intRows; intRow = intRow + <span class="hljs-number">1</span>) {
        id = data[intRow].id;
        ret[data[intRow].id] = data[intRow].getValue();
    }
    <span class="hljs-keyword">return</span> ret;
}

<span class="hljs-keyword">var</span> data = [];

data.push(addRowText({
    id: <span class="hljs-string">'email'</span>,
    hintText: <span class="hljs-string">'Enter Email'</span>,
    title: <span class="hljs-string">'Email'</span>,
    value: <span class="hljs-string">''</span>
}));
data.push(addRowText({
    hintText: <span class="hljs-string">'Enter Password'</span>,
    id: <span class="hljs-string">'password'</span>,
    passwordMask: <span class="hljs-literal">true</span>,
    title: <span class="hljs-string">'Password'</span>,
    value: <span class="hljs-string">''</span>
}));

<span class="hljs-keyword">var</span> tbl = Ti.UI.createTableView({
    data: data,
    style: Ti.UI.iPhone.TableViewStyle.GROUPED
});
win1.add(tbl);
tbl.addEventListener(<span class="hljs-string">'changed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    Ti.API.info(e.id, e.value);
});

<span class="hljs-keyword">var</span> btnFocus = Ti.UI.createButton({
    title: <span class="hljs-string">'Focus'</span>
});
win1.setLeftNavButton(btnFocus);
btnFocus.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    setFocus({
        id: <span class="hljs-string">'email'</span>,
        table: tbl
    });
});
<span class="hljs-keyword">var</span> btnValues = Ti.UI.createButton({
    title: <span class="hljs-string">'Values'</span>
});
win1.setRightNavButton(btnValues);
btnValues.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> values = getValues({
        table: tbl
    });
    Ti.API.info(<span class="hljs-string">'values'</span>, <span class="hljs-built_in">JSON</span>.stringify(values));
});
</code></pre><p>Let me know what you think.  I have fully tested this on iOS but should work on Android as well.</p>
<p>Remember this can be extended - just follow the example structure to make it your own.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 4th 2012, 5:29:01 pm">August 4th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/140557/focus-on-textfield-in-a-table#answer-244469" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
