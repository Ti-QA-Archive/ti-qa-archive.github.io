<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>How to pass Json data to a textfield? Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>How to pass Json data to a textfield?</h1>
		</header>
		<section>
			<p>I&#39;ve tried to pass my Json data to a textfield with a click event but the data is no passing any ideas?</p>
<pre><code class="hljs">var url = "http://androidgaeurbanservlet.appspot.com/service/employee"<span class="hljs-comment">;</span>

    var table = Ti.UI.createTableView({search:searchBar,filterAttribute:"searchFilter",top:"11%"})<span class="hljs-comment">;    </span>

xhr = Ti.Network.createHTTPClient({
    onload: function(){
        //alert(this.responseText)<span class="hljs-comment">;</span>
        json = JSON.parse(this.responseText)<span class="hljs-comment">;</span>

    for (var i=0, length = json.employees.length<span class="hljs-comment">; i &lt; length; i++) {</span>
        employees = json.employees[i]<span class="hljs-comment">;</span>
      row = Ti.UI.createTableViewRow({
          height:'10%'
      })<span class="hljs-comment">;</span>
      name = Ti.UI.createLabel({
          text: employees.name,
          top:0
      })<span class="hljs-comment">;</span>
       jobArea = Ti.UI.createLabel({
          text: employees.jobArea,
          bottom:0
      })<span class="hljs-comment">;</span>
          email = Ti.UI.createLabel({
          text: employees.email,
          top:20
          })<span class="hljs-comment">;</span>
          row.add(name)<span class="hljs-comment">;</span>
          //row.add(jobArea)<span class="hljs-comment">;</span>
          //row.add(email)<span class="hljs-comment">;</span>
          tableData.push(row)<span class="hljs-comment">;</span>
          data = tableData<span class="hljs-comment">;</span>
    }
    table.setData (tableData)<span class="hljs-comment">;</span>
    },

    timeout:5000
})<span class="hljs-comment">;</span>

xhr.open('GET',url)<span class="hljs-comment">;</span>
xhr.send()<span class="hljs-comment">;</span>
    //win.add(table)<span class="hljs-comment">;  </span>
    //win.open()<span class="hljs-comment">; </span>
</code></pre><p>table.addEventListener(&quot;click&quot;, function(e){<br>    var i = e.index;</p>
<p>&#x2F;&#x2F;Create and open a new window<br>var detailWindow = new ui.NewWindow(&#39;detail.js&#39;,&#39;#FFF&#39;,Titanium.UI.currentWindow);<br>   detailWindow.name = e.souce.name;<br>   &#x2F;&#x2F;detailWindow.email = e.rowData.email;<br>   &#x2F;&#x2F;detailWindow.birthday = e.source.birthday;<br>   &#x2F;&#x2F;detailWindow.jobArea = e.source.jobArea;<br>  &#x2F;&#x2F; detailWindow.image = e.source.image;<br>   detailWindow.open();<br>    });</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 21st 2013, 7:07:55 pm">August 21st 2013</span>
				by <span class='authorname'>Daniela Garcia</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>appcelerator</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Thanks for the code but without the code syntax is a little hard to read.</p>
<p>Quick tip; When you add code snippets or logs always add 3 <strong>~</strong> on a blank line above your code and another 3 <strong>~</strong> below you code on another blank line - you will see the difference when you preview the comment. (you are not being told off)</p>
<p>Inserted code should look like;</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">something</span><span class="hljs-params">(obj)</span> </span>{
    <span class="hljs-comment">// do something</span>
}
alert(<span class="hljs-string">'Hello'</span>);
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="August 21st 2013, 7:19:16 pm">August 21st 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Code Syntax to help you this time :) Please, try code syntax tool :)</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> url = <span class="hljs-string">"http://androidgaeurbanservlet.appspot.com/service/employee"</span>;
<span class="hljs-keyword">var</span> table = Ti.UI.createTableView({search:searchBar,filterAttribute:<span class="hljs-string">"searchFilter"</span>,top:<span class="hljs-string">"11%"</span>}); 

xhr = Ti.Network.createHTTPClient({
    onload: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-comment">//alert(this.responseText);</span>
        json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>, length = json.employees.length; i &lt; length; i++) {
        employees = json.employees[i];
      row = Ti.UI.createTableViewRow({
        height:<span class="hljs-string">'10%'</span>
      });
      name = Ti.UI.createLabel({
        text: employees.name,
        top:<span class="hljs-number">0</span>
      });
       jobArea = Ti.UI.createLabel({
        text: employees.jobArea,
        bottom:<span class="hljs-number">0</span>
      });
        email = Ti.UI.createLabel({
        text: employees.email,
        top:<span class="hljs-number">20</span>
        });
        row.add(name);
        <span class="hljs-comment">//row.add(jobArea);</span>
        <span class="hljs-comment">//row.add(email);</span>
        tableData.push(row);
        data = tableData;
    }
    table.setData (tableData);
    },

    timeout:<span class="hljs-number">5000</span>
});

xhr.open(<span class="hljs-string">'GET'</span>,url);
xhr.send();
    <span class="hljs-comment">//win.add(table);  </span>
    <span class="hljs-comment">//win.open(); </span>

table.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{ 
<span class="hljs-keyword">var</span> i = e.index;

<span class="hljs-comment">//Create and open a new window </span>
<span class="hljs-keyword">var</span> detailWindow = <span class="hljs-keyword">new</span> ui.NewWindow(<span class="hljs-string">'detail.js'</span>,<span class="hljs-string">'#FFF'</span>,Titanium.UI.currentWindow); 
detailWindow.name = e.souce.name; 
<span class="hljs-comment">//detailWindow.email = e.rowData.email; </span>
<span class="hljs-comment">//detailWindow.birthday = e.source.birthday; </span>
<span class="hljs-comment">//detailWindow.jobArea = e.source.jobArea; </span>
<span class="hljs-comment">// detailWindow.image = e.source.image; detailWindow.open(); </span>
});
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="August 21st 2013, 7:30:57 pm">August 21st 2013</span>
								by <span class='authorname'>Ranjith Kumar Nagella</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Did you see <code>detailWindow.name = e.souce.name;</code></p>
<p>It&#39;s <strong>source</strong> not <strong>souce</strong></p>
</div>
							<div class="author">
								&mdash; commented <span title="August 21st 2013, 7:35:23 pm">August 21st 2013</span>
								by <span class='authorname'>Ranjith Kumar Nagella</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>That was a simple error, that is not the problem, the problem is the variables are out of scope</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 22nd 2013, 1:00:40 pm">August 22nd 2013</span>
								by <span class='authorname'>Daniela Garcia</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-267566">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>Your problem is a simple confusion on how and what gets passed through the event.  Your code makes it look like you are hoping to access the variable used to create the labels in the row - you can but not this way.</p>
<p>However it looks like you are actually trying to access the <strong>employee</strong> data for each row, that is even easier.</p>
<p>There are two things you need to do;</p>
<ul>
<li>You need to make sure that <strong>source</strong> is always the row and not any <strong>label</strong>, so we set <strong>touchEnabled</strong> to false for everything else.</li>
<li>You add the data object to the <strong>row</strong> as a custom property, this way you can access it from the source object, also the row object should provide the same reference.</li>
</ul>
<p>Change your row creation to the following;</p>
<pre><code class="hljs">row = Ti.UI.createTableViewRow({
    data: employees, <span class="hljs-comment">// this is where the data goes</span>
    <span class="hljs-variable">height</span>: <span class="hljs-string">'10%'</span>
});
name = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>: employees.name,
    top: <span class="hljs-number">0</span>,
    touchEnabled: <span class="hljs-keyword">false</span> <span class="hljs-comment">// add this</span>
});
jobArea = Ti.UI.createLabel({
    bottom: <span class="hljs-number">0</span>,
    <span class="hljs-built_in">text</span>: employees.jobArea,
    touchEnabled: <span class="hljs-keyword">false</span> <span class="hljs-comment">// add this</span>
});
email = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>: employees.email,
    top: <span class="hljs-number">20</span>,
    touchEnabled: <span class="hljs-keyword">false</span> <span class="hljs-comment">// add this</span>
});
row.<span class="hljs-built_in">add</span>(name);
</code></pre><p>Change your event listener to the following;</p>
<pre><code class="hljs">table.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    Ti.API.info(<span class="hljs-string">'employee: '</span> + <span class="hljs-built_in">JSON</span>.stringify(e.source.data));
    alert(<span class="hljs-string">'name: '</span> + e.source.data.name);
});
</code></pre><p>This should display the entire employee object in the console and show an alert with the <strong>name</strong> of the employee you clicked.</p>
<p>From this you should be able to create your next window with the information you need as you will have it all to hand.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 22nd 2013, 2:03:22 pm">August 22nd 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/156245/how-to-pass-json-data-to-a-textfield.html#answer-267566" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-267567">
				
						<section>
							<p>Thank you!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 22nd 2013, 2:15:43 pm">August 22nd 2013</span>
								by <span class='authorname'>Daniela Garcia</span><br>
								<a class="icon-bg icon-link" href="../../question/156245/how-to-pass-json-data-to-a-textfield.html#answer-267567" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
