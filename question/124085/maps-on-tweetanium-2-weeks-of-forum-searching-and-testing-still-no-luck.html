<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Maps on tweetanium (2 weeks of forum searching and testing, still no luck) » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Maps on tweetanium (2 weeks of forum searching and testing, still no luck)</h1>
		</header>
		<section>
			<p>I know alot of people ask about maps and android so I looked through literally every post and have tried everything for almost 2 weeks now with no luck…</p>
<p>I am using Tweetanium as a template for an app I am developing.  I have a tab that shows a map with just a lat, lon area i have hardcoded (no geo stuff yet).  No matter what I do the map does not display.  I get the grids and nothing else.  At first I thought it was the whole map api key, so I went and put in the debug key from my mobile sdk, a production key from my own generated private key and still no luck.</p>
<p>My next step testing was taking my map code and putting it into just a normal &#39;tabbed&#39; window, i had no devolpment api key or production key in my tiapp.xml…NOTHING…and i was able to get this to run perfectly own my device.</p>
<p>Is there just something wrong with viewing maps on tweetanium? Maybe the way it handles all the different tab &#39;views&#39;?</p>
<p>My code for my mapview is:</p>
<pre><code class="hljs">
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">//create the mentions view</span>
    tb.ui.createMapView = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_args)</span> </span>{


        <span class="hljs-keyword">var</span> mapView = Titanium.Map.createView({
            mapType: Titanium.Map.STANDARD_TYPE,
            region:{latitude:<span class="hljs-number">39.9645745</span>, longitude:-<span class="hljs-number">75.137527</span>, latitudeDelta:<span class="hljs-number">0.01</span>, longitudeDelta:<span class="hljs-number">0.01</span>},
            regionFit:<span class="hljs-literal">true</span>,
            userLocation:<span class="hljs-literal">false</span>
        });





        <span class="hljs-keyword">return</span> mapView;
    };
})();
</code></pre><p>I have tried every mobile sdk from 1.6 and above (including the continous builds). For the sake of this issue though i&#39;ll just say i&#39;m on mobile sdk 1.7.2</p>
<p>I again tried API&#39;s 2.2 all the way through API&#39;s 3.1.</p>
<p>The map works perfectly fine in the iPhone simulator, is sporadic in the android simulator. Sometime it works, sometimes it doesnt.</p>
<p>And a note to appcelerator…the docmentation for how to get sign your app and sign up for a map api key is horrendous.  You are still refering to mobile sdk 0.80, you use &lt;property name=&quot;ti.android.google.map.api.key&quot;&gt; even though the kitchen sink says to use &lt;property name=&quot;ti.android.google.map.api.key.development&quot;&gt; and<br>&lt;property name=&quot;ti.android.google.map.api.key.production&quot;&gt;. So in my question above I could very well be doing everything absolutely wrong.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 10th 2011, 9:46:03 pm">August 10th 2011</span>
				by <span class='authorname'>John Scanlon</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>tweetanium</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Have you seen this in the wiki? Not sure if it would help?<br>http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Maps+for+Android</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 10th 2011, 10:58:46 pm">August 10th 2011</span>
								by <span class='authorname'>Jeffrey Messick</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Yep, I used that exact guide to create my own private key. Still no luck.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 11th 2011, 3:00:31 am">August 11th 2011</span>
								by <span class='authorname'>John Scanlon</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-216364">
				
						<section>
							<p>I&#39;m convinced that a mapview can&#39;t be run in tweetanium. I can build the kitchen sink and install on my device and use the map no issue. So i cleared the resource directory and placed my code in there, leaving the tiapp.xml untouched. I rebuilt and installed on my device. The map doesn&#39;t work.</p>
<p>I&#39;m wondering if a map has to be opened by a url referencing it&#39;s own .js file (my old app used a tab with the window referencing a map.js url and the kitchen sink using a tableview to reference map_view.js).  Maybe it has to do with a map running in it&#39;s own window context.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 12th 2011, 5:42:15 pm">August 12th 2011</span>
								by <span class='authorname'>John Scanlon</span><br>
								<a class="icon-bg icon-link" href="question/124085/maps-on-tweetanium-2-weeks-of-forum-searching-and-testing-still-no-luck.html#answer-216364" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I confirmed this is the case. I added a some code to create a new window with a url to a file map.js. All this file had was the same mapview code i used before.  I then created a menu with an item to open this created window. The new window opened and the map worked perfectly.  So there is definitely something wrong with using a mapview in a non-url referenced window or tableview</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 12th 2011, 6:34:15 pm">August 12th 2011</span>
											by <span class='authorname'>John Scanlon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Could you please post the code you used that did not work somewhere that I can see (a use case)? because I have done this many times successfully… not saying that your wrong, just that maybe the exact way your doing it might be a corner case or a bug</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 15th 2011, 11:22:41 am">August 15th 2011</span>
											by <span class='authorname'>Matt Apperson</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-216134">
				
						<section>
							<p>Just making sure… you did still add the map to a window somewhere right?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 11th 2011, 12:40:33 am">August 11th 2011</span>
								by <span class='authorname'>Matt Apperson</span><br>
								<a class="icon-bg icon-link" href="question/124085/maps-on-tweetanium-2-weeks-of-forum-searching-and-testing-still-no-luck.html#answer-216134" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Yes, i used tweetanium as a template. So that view gets added to a &#39;filmstrip&#39; type view which then gets added to the main application window.</p>
<p>It works fine on the iPhone simulator and I can see the map &#39;grid&#39; so the mapview is getting loaded fine.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2011, 2:59:06 am">August 11th 2011</span>
											by <span class='authorname'>John Scanlon</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-216236">
				
						<section>
							<p>I used the &#39;distribute&#39; function in studio to make a distributed version of my app.  In the output during the build i verified it was signed with my private keystre, alias and password. I also verified it was signed using &quot;jarsigner -verify&quot;.  </p>
<p>I installed my app and had an app called &#39;catlog&#39; running and recording all logcat output.  I searched through all the lines with keyword &#39;Map&#39;. This is all that was output for when i clicked in my app to load the map.</p>
<pre><code class="hljs"><span class="hljs-number">08</span>-<span class="hljs-number">11</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">42.008</span> D/KrollContext(<span class="hljs-number">7531</span>): (kroll$<span class="hljs-number">1</span>: app://app.js) [<span class="hljs-number">2</span>,<span class="hljs-number">419</span>] Running pre-compiled script: turtleburp/ui/viewMap.js
<span class="hljs-number">08</span>-<span class="hljs-number">11</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">42.067</span> D/TiScriptRunner(<span class="hljs-number">7531</span>): (kroll$<span class="hljs-number">1</span>: app://app.js) [<span class="hljs-number">61</span>,<span class="hljs-number">480</span>] Executing script: com.turtleburp.ticketscalper.js.turtleburp_ui_viewMap
<span class="hljs-number">08</span>-<span class="hljs-number">11</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">42.934</span> D/TiMapView(<span class="hljs-number">7531</span>): (main) [<span class="hljs-number">271</span>,<span class="hljs-number">424</span>] Production mode using <span class="hljs-keyword">map</span> api key ending <span class="hljs-keyword">with</span> <span class="hljs-attribute">'lTnZeTJ6Jg</span>' retrieved from application <span class="hljs-keyword">property</span> <span class="hljs-attribute">'ti</span>.android.google.<span class="hljs-keyword">map</span>.api.key.production' (fallback)
<span class="hljs-number">08</span>-<span class="hljs-number">11</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">43.317</span> W/TiDrawableReference(<span class="hljs-number">7531</span>): (main) [<span class="hljs-number">0</span>,<span class="hljs-number">808</span>] Bitmap bounds could <span class="hljs-keyword">not</span> be determined.  <span class="hljs-keyword">If</span> bitmap <span class="hljs-keyword">is</span> loaded, it won<span class="hljs-attribute">'t</span> be scaled.
<span class="hljs-number">08</span>-<span class="hljs-number">11</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">43.317</span> W/TiDrawableReference(<span class="hljs-number">7531</span>): (main) [<span class="hljs-number">0</span>,<span class="hljs-number">808</span>] Could <span class="hljs-keyword">not</span> <span class="hljs-keyword">open</span> stream <span class="hljs-keyword">to</span> get bitmap
<span class="hljs-number">08</span>-<span class="hljs-number">11</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">43.399</span> W/TiDrawableReference(<span class="hljs-number">7531</span>): (main) [<span class="hljs-number">0</span>,<span class="hljs-number">891</span>] Bitmap bounds could <span class="hljs-keyword">not</span> be determined.  <span class="hljs-keyword">If</span> bitmap <span class="hljs-keyword">is</span> loaded, it won<span class="hljs-attribute">'t</span> be scaled.
<span class="hljs-number">08</span>-<span class="hljs-number">11</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">43.399</span> W/TiDrawableReference(<span class="hljs-number">7531</span>): (main) [<span class="hljs-number">0</span>,<span class="hljs-number">891</span>] Could <span class="hljs-keyword">not</span> <span class="hljs-keyword">open</span> stream <span class="hljs-keyword">to</span> get bitmap
<span class="hljs-number">08</span>-<span class="hljs-number">11</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">43.582</span> I/MapActivity(<span class="hljs-number">7531</span>): Handling network change notification:CONNECTED
<span class="hljs-number">08</span>-<span class="hljs-number">11</span> <span class="hljs-number">14</span>:<span class="hljs-number">34</span>:<span class="hljs-number">43.582</span> E/MapActivity(<span class="hljs-number">7531</span>): Couldn<span class="hljs-attribute">'t</span> get connection factory client
</code></pre><p>So it looks like something is wrong with getting a connection to google maps, based on the last error line.  I have internet on my devie so it&#39;s not a general connection problem.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 11th 2011, 5:59:47 pm">August 11th 2011</span>
								by <span class='authorname'>John Scanlon</span><br>
								<a class="icon-bg icon-link" href="question/124085/maps-on-tweetanium-2-weeks-of-forum-searching-and-testing-still-no-luck.html#answer-216236" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-216521">
				
						<section>
							<p>Matt, Here you go.</p>
<p>In ApplicationWindow.js –</p>
<pre><code class="hljs"><span class="hljs-comment">//Add the main app 'filmstrip'    </span>
        var appFilmStrip = tt.ui.createFilmStripView({
            top:<span class="hljs-number">0</span>,
            left:<span class="hljs-number">0</span>,
            right:<span class="hljs-number">0</span>,
            bottom:tabHeight-<span class="hljs-number">10</span>,
            views: [
                tt.ui.createTimelineView(),
                tt.ui.createMentionsView(),
                tt.ui.createDMView(),
                tt.ui.createAccountView(),
                tt.ui.createMapView() <span class="hljs-comment">// this is the map function</span>
            ]
        });
</code></pre><p>In viewMap.js (creates tt.ui.createMapView());</p>
<pre><code class="hljs">(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">//create the mentions view</span>
    tt.ui.createMapView = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_args)</span> </span>{

        <span class="hljs-keyword">var</span> mapView;

            mapView = Titanium.Map.createView({
                mapType: Titanium.Map.STANDARD_TYPE,
                region:{latitude:<span class="hljs-number">39.9645745</span>, longitude:-<span class="hljs-number">75.137527</span>, latitudeDelta:<span class="hljs-number">0.01</span>, longitudeDelta:<span class="hljs-number">0.01</span>},
                regionFit:<span class="hljs-literal">true</span>,
                userLocation:<span class="hljs-literal">false</span>
            });

        <span class="hljs-keyword">return</span> mapView;
    };
})();
</code></pre><p>And of course I updated ui.js to include viewMap.js :</p>
<pre><code class="hljs"><span class="hljs-comment">//Include major UI components and styling properties</span>
Ti.<span class="hljs-keyword">include</span>(
    <span class="hljs-string">'/tweetanium/ui/styles.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/ApplicationWindow.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/AboutView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/AccountView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/DMView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/MentionsView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/TimelineView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/DrawerView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/AddAccountView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/LoadingView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/TweetDetailsView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/AccountDetailsView.js'</span>,
    <span class="hljs-string">'/tweetanium/ui/viewMap.js'</span> <span class="hljs-comment">// added viewMap.js</span>
    <span class="hljs-string">'/tweetanium/ui/ComposeWindow.js'</span>
);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 15th 2011, 1:31:23 pm">August 15th 2011</span>
								by <span class='authorname'>John Scanlon</span><br>
								<a class="icon-bg icon-link" href="question/124085/maps-on-tweetanium-2-weeks-of-forum-searching-and-testing-still-no-luck.html#answer-216521" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-218270">
				
						<section>
							<p>Wow. I&#39;m having almost the exact same issue. I have built my app using the Tweetanium structure. Everything works fine in the iPhone Simulator, but grey tiles keeps showing up when the map is called. Even annotations are loaded in the correct place but map images does not display. Double checked the api key generation&#x2F;install process and seems to be good to go.</p>
<p>I&#39;ve tried to isolate the problem testing with the KitchenSink example and only with the map view (no event listeners, no annotations). It works in the Kitchen Sink project, but no luck in my project.</p>
<p>I think John is correct when suspecting this issue has something to do with the structure of the app. I even tried to load the map triggering a new window with a button (again no luck).</p>
<p>Have checked a zillion time in the forums about this but haven&#39;t found a solution yet.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 6th 2011, 1:23:14 pm">September 6th 2011</span>
								by <span class='authorname'>Pablo Liz</span><br>
								<a class="icon-bg icon-link" href="question/124085/maps-on-tweetanium-2-weeks-of-forum-searching-and-testing-still-no-luck.html#answer-218270" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This thread almost confirms what John suspects.<br>But i think its important to know WHY this happens.<br><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;124248&#x2F;cant-fit-region-when-the-map-view-initialized-region-ignored">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;124248&#x2F;cant-fit-region-when-the-map-view-initialized-region-ignored</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="September 6th 2011, 1:37:10 pm">September 6th 2011</span>
											by <span class='authorname'>Pablo Liz</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hi,</p>
<p>I am using the tweetanium structure for my app which requires a map.. and for some reason i dont understand.. the map displays well when the window initialized is a modal (only for android)</p>
<p>thanks<br>asghar</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 24th 2011, 5:44:59 am">November 24th 2011</span>
											by <span class='authorname'>asghar ali</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
