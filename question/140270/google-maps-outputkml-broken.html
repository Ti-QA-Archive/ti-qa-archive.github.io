<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Google Maps output=kml broken? » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Google Maps output=kml broken?</h1>
		</header>
		<section>
			<h2 id="i-used-these-code-">I used these code :</h2>
<p>&#x2F;&#x2F; PULL POINT ROUTES FROM GOOGLEMAP<br>    data = [];</p>
<pre><code class="hljs">    <span class="hljs-keyword">var</span> url = <span class="hljs-string">"http://maps.google.com/maps/ms?saddr="</span> + origin + <span class="hljs-string">"&amp;daddr="</span> + destination + <span class="hljs-string">"&amp;doflg=ptk&amp;hl=en&amp;output=kml"</span>;
    xhr = Titanium.Network.createHTTPClient();

    xhr.<span class="hljs-keyword">open</span>('GET',url);
    Ti.API.info('&gt;&gt;&gt; go get data <span class="hljs-keyword">for</span> Rgeocode! ...URL: '+url);

    xhr.onload = function(){
        <span class="hljs-comment">// Now parse the XML </span>
        <span class="hljs-keyword">var</span> xml = this.responseXML;
        <span class="hljs-keyword">var</span> points = [];
        <span class="hljs-keyword">var</span> coords = xml.documentElement.getElementsByTagName(<span class="hljs-string">"LineString"</span>);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> <span class="hljs-keyword">cc</span>=0; <span class="hljs-keyword">cc</span> &lt; coords.length; <span class="hljs-keyword">cc</span>++) {
            <span class="hljs-keyword">var</span> <span class="hljs-keyword">line</span> = coords.item(<span class="hljs-keyword">cc</span>);
            <span class="hljs-keyword">var</span> str = <span class="hljs-keyword">line</span>.firstChild.text.<span class="hljs-keyword">split</span>(<span class="hljs-string">" "</span>);
            <span class="hljs-keyword">for</span>(dd = 0; dd &lt; str.length; dd++) {
                <span class="hljs-keyword">var</span> <span class="hljs-keyword">loc</span> = str[dd].<span class="hljs-keyword">split</span>(',');
                <span class="hljs-keyword">if</span>(<span class="hljs-keyword">loc</span>[0] &amp;&amp; <span class="hljs-keyword">loc</span>[1]) {
                    points.push({latitude: <span class="hljs-keyword">loc</span>[1], 
                         longitude: <span class="hljs-keyword">loc</span>[0]});
                }
            }
        }
        <span class="hljs-keyword">var</span> route = {
                name:anno_name,
                points:points,
                color:<span class="hljs-string">"red"</span>,
                width:5
            };
</code></pre><hr>
<p>and today it is no longer working?</p>
<h2 id="getting-error-below-">getting error below:</h2>
<h2 id="-error-error-domain-com-google-gdataxml-code-1-quot-the-operation-couldn-t-be-completed-com-google-gdataxml-error-1-quot-in-tidomdocumentproxy-parsestring-tidomdocumentproxy-m-57-">[ERROR] Error Domain=com.google.GDataXML Code=-1 &quot;The operation couldn’t be completed. (com.google.GDataXML error -1.)&quot;.   in -[TiDOMDocumentProxy parseString:] (TiDOMDocumentProxy.m:57)</h2>
<p>refering to this thread, google just changed their map today.. anyone have workaround?</p>
<p>http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;11680872&#x2F;google-maps-output-kml-broken</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 27th 2012, 4:53:23 pm">July 27th 2012</span>
				by <span class='authorname'>Aizil Akmar Omar</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>broken</span></li>
					
						<li><span class='tagname'>google map</span></li>
					
						<li><span class='tagname'>kml</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>haish.. can somebody change my post? i use — instead of ~~~ for coding… now my question looks terrible.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 27th 2012, 4:56:57 pm">July 27th 2012</span>
								by <span class='authorname'>Aizil Akmar Omar</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Yes i am waiting for it today , till yesterday my application was working fine . Now have to go through their api i think.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 27th 2012, 5:19:19 pm">July 27th 2012</span>
								by <span class='authorname'>mathew orleans</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-243943">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Use json instead of xml - u&#39;ll get faster response from the server an faster parsing on the app.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 27th 2012, 5:18:17 pm">July 27th 2012</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/140270/google-maps-outputkml-broken#answer-243943" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i used json but still giving me the same error Dan</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 27th 2012, 5:19:59 pm">July 27th 2012</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This works for me:</p>
<p>http:&#x2F;&#x2F;maps.googleapis.com&#x2F;maps&#x2F;api&#x2F;directions&#x2F;json?origin=43.361257,-5.456343&amp;destination=43.5459974757402,-6.53738021850586&amp;sensor=false</p>
<p>Of course you will have to change your code to read the json instead of xml.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 27th 2012, 5:25:39 pm">July 27th 2012</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hi Dan, appreciate if you could share the json code? thanks..</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 28th 2012, 12:02:10 am">July 28th 2012</span>
											by <span class='authorname'>Aizil Akmar Omar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i just use a module called <a href="https:&#x2F;&#x2F;marketplace.appcelerator.com&#x2F;apps&#x2F;2580?2098998033">de.codewire.google.directions</a> at the end.. easier…</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 28th 2012, 4:04:01 am">July 28th 2012</span>
											by <span class='authorname'>Aizil Akmar Omar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
