<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy: splitView, positioning elements and orientationChange » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy: splitView, positioning elements and orientationChange</h1>
		</header>
		<section>
			<p>Hi</p>
<p>I work on an Alloy project under MacOs 10.8.x and use Titanium Studio 3.1.0 with SDK 3.1.0.GA.</p>
<p>I use a splitView within a Tab and have problems positioning elements not only but especially when an orientation change event is happening.</p>
<p>To demonstrate I use the following demo code in a clean alloy project:</p>
<pre><code class="hljs"><span class="hljs-comment">&lt;!-- index.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TabGroup</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"index"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Tab</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"tabHome"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Home"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"winHome"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SplitWindow</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"splitHome"</span> <span class="hljs-attribute">showMasterInPortrait</span>=<span class="hljs-value">"true"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"master"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#99ffff"</span> /&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"detail"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">NavigationGroup</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"navGroup"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"navGroup2"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"containerView"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#ccffdd"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"topView"</span> <span class="hljs-attribute">top</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">bottom</span>=<span class="hljs-value">"400"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#ffffee"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-title">WebView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"webView"</span> <span class="hljs-attribute">url</span>=<span class="hljs-value">"https://www.google.com/?q=appcelerator+alloy"</span>/&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"middleView"</span> <span class="hljs-attribute">bottom</span>=<span class="hljs-value">"200"</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">"200"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#eeffff"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"labelView1"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#ffeeff"</span>&gt;</span>Text 1<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"bottomView"</span> <span class="hljs-attribute">bottom</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">"200"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#eeeeff"</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"labelView2"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#ffeeee"</span>&gt;</span>Text 2<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-title">NavigationGroup</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">SplitWindow</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Tab</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">TabGroup</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>The idea of this code is to position three elements in the detail window. the lower two should have a hight of 200 pixels and be bottom aligned. the top view should be dynamic in hight. How do I accomplish this?</p>
<p><strong>First problem</strong>: when I run this code (on an iPad simulator), there is <strong>a gap</strong> between the toipView and the middleView. I assume the gap is as hight as two navBars. Why is this gap happening and how do I avoid it?</p>
<p><strong>Second problem</strong>: the bottomView is too low. probably about the size of the gap. How do I position this view correctly?</p>
<p><strong>Third problem</strong>: after an <strong>orientation change</strong> to landscape, the webViews height seems to be wrong: I can&#39;t scroll down the whole website. </p>
<p>Does anybody have an idea how to position elements in a detail view of a split view within a tab?</p>
<p>thanks, Tim</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 18th 2013, 10:47:32 am">April 18th 2013</span>
				by <span class='authorname'>Tim Kask</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>ipad</span></li>
					
						<li><span class='tagname'>orientation</span></li>
					
						<li><span class='tagname'>splitview</span></li>
					
						<li><span class='tagname'>tabgroup</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-261017">
				
						<section>
							<p>yikes, I would imagine you are going to get a lot of weird UI behavior nesting a SplitWindow in a TabGroup. I know this isn&#39;t the answer you are looking for, but you are using constraint positioning on elements, inside of an element that changes on orientation, inside of an element with no awareness of the orientation. It&#39;s going to be tricky and frankly doesn&#39;t sound like an ideal user experience. However, I don&#39;t know your app and I could be wrong.</p>
<p>Problem 1 &amp; 2 I&#39;m sure stem from the same root cause. I don&#39;t know what that is off-hand, but it seems like the containerView might be the culprit. Have you tried setting an explicit <code>top:0</code> and <code>bottom:0</code> for containerView? As for problem 3 the webview again should probably have some explicit value for its contraints as you do for (some) of its parents.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 18th 2013, 11:55:59 am">April 18th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="../../question/151163/alloy-splitview-positioning-elements-and-orientationchange.html#answer-261017" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Tony</p>
<p>Thanks for taking the time!</p>
<p>adding top:0 and bottom:0 solves the gap problem, but makes the orientation change issue look worse.</p>
<p>I found out meanwhile:</p>
<ul>
<li><p>the Navgroup id=navgroup and Window class=container can get removed, they neither solve the problem nor make it worse in this example</p>
</li>
<li><p>if I remove the SplitWindow and have just the containerView within the window underneath the tab, everything is working fine</p>
</li>
<li><p>if I remove the tabgroup and tabview and just have the splitWindow (without NavBar), it works fine in the original orientation. as soon as I change the orientation e.g. to landscape, the webview can&#39;t be scrolled to the bottom.</p>
</li>
</ul>
<p>my conclusion so far:</p>
<ul>
<li><p>tabgroup alone: works like it should</p>
</li>
<li><p>splitWindow alone: works with some little flaws</p>
</li>
<li><p>splitWindow inside a tabGroup: you named it: yikes </p>
</li>
</ul>
<p>I found a solution to the sample code by adding the following javascript to index.js:</p>
<pre><code class="hljs"><span class="hljs-comment">// index.js</span>
$.index.open();

<span class="hljs-comment">// code to fix orientation change issue and gap in splitWindow</span>

setViewParameters({ source: Titanium.Gesture});
Titanium.Gesture.addEventListener( <span class="hljs-string">"orientationchange"</span>, setViewParameters);
<span class="hljs-comment">// reminder: removeEventListener on window close...</span>

<span class="hljs-function">function <span class="hljs-title">setViewParameters</span><span class="hljs-params">(e)</span>
</span>{
    <span class="hljs-keyword">if</span> (e.source.isPortrait()) {
        $.containerView.applyProperties({
            <span class="hljs-comment">// height = totalHeight - statusBarHeight - tabBarHeight - 2 x navBarHeight</span>
            top: <span class="hljs-number">0</span>, height: <span class="hljs-number">1024</span> - <span class="hljs-number">20</span> - <span class="hljs-number">43</span> - <span class="hljs-number">43</span> - <span class="hljs-number">43</span>
        });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.source.isLandscape()) {
        $.containerView.applyProperties({
            <span class="hljs-comment">// height = totalHeight - statusBarHeight - tabBarHeight - 2 x navBarHeight</span>
            top: <span class="hljs-number">0</span>, height: <span class="hljs-number">768</span> - <span class="hljs-number">20</span> - <span class="hljs-number">43</span> - <span class="hljs-number">43</span> - <span class="hljs-number">43</span>
        });
    }
}
</code></pre><p>this seems to fix the problems, but it is obviously not so nice, as I have to calculate values…</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2013, 1:27:19 pm">April 18th 2013</span>
											by <span class='authorname'>Tim Kask</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>did you try <code>top,bottom,left,right</code> values for the webview? How bout percentage values like <code>&amp;quot;90%&amp;quot;</code>? That might make it fit better and respond to orientation change.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2013, 1:37:32 pm">April 18th 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>unfortunatly percentage values for the views did not change anything. top and bottom values for the webview neither.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2013, 2:11:37 pm">April 18th 2013</span>
											by <span class='authorname'>Tim Kask</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
