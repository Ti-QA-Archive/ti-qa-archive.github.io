<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>adding to playbook without entity » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>adding to playbook without entity</h1>
		</header>
		<section>
			<p>Hi</p>
<p>I am trying to upload a status using api.But it is giving me the status that i am uploading it without entity.As far as i think i am doing the code right could you plz tell me what could be the problem.here is my code</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">apiCreateItem</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> httpClient = Ti.Network.createHTTPClient();
    httpClient.setTimeout(<span class="hljs-number">5000</span>);
    httpClient.setTimeout(<span class="hljs-number">5000</span>);
    <span class="hljs-keyword">var</span> url = <span class="hljs-string">'https://www.sportscrunch.com/api/v1/playbook/add'</span>;
    httpClient.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        alert(<span class="hljs-string">"API CREATE ITEM: "</span> + <span class="hljs-keyword">this</span>.status);
        <span class="hljs-keyword">var</span> error = <span class="hljs-keyword">this</span>.responseText.replace(<span class="hljs-regexp">/&lt;[^&gt;]+&gt;/g</span>, <span class="hljs-string">''</span>);
        Ti.API.info(error);
        Ti.App.fireEvent(<span class="hljs-string">'createdItem'</span>, {
            responseJSON : <span class="hljs-literal">null</span>
        });
    }

    httpClient.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        Ti.API.info(<span class="hljs-string">"API CREATE ITEM: "</span> + <span class="hljs-keyword">this</span>.status);

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.status == <span class="hljs-number">201</span>) {
            <span class="hljs-keyword">var</span> responseJSON = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
            Ti.App.fireEvent(<span class="hljs-string">'createdItem'</span>, {
                responseJSON : responseJSON
            });
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> error = <span class="hljs-keyword">this</span>.responseText.replace(<span class="hljs-regexp">/&lt;[^&gt;]+&gt;/g</span>, <span class="hljs-string">''</span>);
            Ti.API.info(error);
            Ti.App.fireEvent(<span class="hljs-string">'createdItem'</span>, {
                responseJSON : <span class="hljs-literal">null</span>
            });
        }
    };

    <span class="hljs-keyword">var</span> item = <span class="hljs-string">'I am very good titanium developer'</span>;

    <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.stringify(item);

    httpClient.open(<span class="hljs-string">"POST"</span>, url);
    httpClient.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);
    httpClient.send(json);
}

apiCreateItem();
</code></pre><p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 27th 2013, 4:08:08 am">July 27th 2013</span>
				by <span class='authorname'>Muhammad Wahhab Mirza</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>status</span></li>
					
						<li><span class='tagname'>upload</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>@Muhammad; oh the irony ;-) stick with hello world when testing code as…</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> item = <span class="hljs-string">'I am very good titanium developer'</span>;
</code></pre><p>…is certainly part of the problem.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 27th 2013, 9:04:57 am">July 27th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Follow ups;</p>
<ul>
<li>What object syntax are you meant to pass in JSON format</li>
<li>Where are the public API docs? (link please for this method)</li>
<li>Is this a POST or a GET?</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="July 27th 2013, 9:06:23 am">July 27th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>1)I think i meant to pass comment and entry id and here are public api docs</p>
<p>2)Here is public doc of adding comment</p>
<pre><code class="hljs">

<span class="sql">5. Comment Resource

    Comments are defined as the INDIVIDUAL comments on the Playbook Entry or the NewsFeed Entry

Method 1: Submit a comment

    A Playbook resource is comprised of Entries, each Entry has a unique id, when the playbook is loaded user is displayed with multiple entries, each with a Title, Image, but not the complete Entry detail, to view the complete entry detail user needs to click on the specific entry. As soon as an Entry is clicked, request is sent to system side to <span class="hljs-operator"><span class="hljs-keyword">load</span> specific Entry

Request

<span class="hljs-keyword">HTTP</span> Method - POST API <span class="hljs-keyword">URL</span> - /api/v1/<span class="hljs-keyword">comment</span>/<span class="hljs-keyword">add</span>/ Request <span class="hljs-keyword">Parameters</span> - <span class="hljs-keyword">comment</span>=<span class="hljs-string">"Go Go Go"</span> &amp; entry_id=ENTRY_ID Response <span class="hljs-keyword">Type</span> - <span class="hljs-keyword">json</span> Response - {<span class="hljs-string">"comment"</span>: HTML <span class="hljs-keyword">wrapped</span> <span class="hljs-keyword">comment</span>, <span class="hljs-string">"status"</span>: <span class="hljs-string">"ok"</span>}

Request <span class="hljs-keyword">Parameters</span>

<span class="hljs-keyword">comment</span> = <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">String</span> entry_id = ENTRY <span class="hljs-keyword">ID</span>

Response <span class="hljs-keyword">Parameters</span>

<span class="hljs-keyword">comment</span> = HTML <span class="hljs-keyword">Wrapped</span> <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">is</span> returned <span class="hljs-keyword">status</span> = ok

Example Response

{<span class="hljs-string">"comment"</span>: <span class="hljs-string">"\n&lt;div class=\"comment span-2\"&gt;\n &lt;div class=\"user-icon\" style=\"background-image:url('https://s3.amazonaws.com/thumbnail-images-wal/identity/joddy.street-45x45.png')\"&gt;&lt;/div&gt;\n &lt;div class=\"valign\"&gt;\n\t&lt;p&gt;&lt;em&gt;Joddy Street&lt;/em&gt;&amp;nbsp;Go Go Go&lt;/p&gt;\n\t&lt;p class=\"date\"&gt;now&lt;/p&gt;\n &lt;/div&gt;\n&lt;/div&gt;\n"</span>, <span class="hljs-string">"status"</span>: <span class="hljs-string">"ok"</span>}

Explaination

    <span class="hljs-keyword">As</span> explained <span class="hljs-keyword">in</span> the <span class="hljs-keyword">section</span> <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">Resource</span> :&gt; Method <span class="hljs-number">2</span>: <span class="hljs-keyword">Load</span> a Specific Entry <span class="hljs-keyword">User</span> selects a Playbook Entry <span class="hljs-keyword">to</span> be loaded, <span class="hljs-keyword">as</span> soon <span class="hljs-keyword">as</span> the entry <span class="hljs-keyword">is</span> loaded, its HTML response contains a <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">Form</span>. <span class="hljs-keyword">To</span> <span class="hljs-keyword">comment</span> <span class="hljs-keyword">on</span> the Playbook <span class="hljs-keyword">or</span> Newsfeed Entry, <span class="hljs-keyword">user</span> needs <span class="hljs-keyword">to</span> put <span class="hljs-keyword">in</span> the <span class="hljs-keyword">comment</span> <span class="hljs-keyword">and</span> push submit button <span class="hljs-keyword">As</span> the <span class="hljs-keyword">comment</span> <span class="hljs-keyword">is</span> posted, the Playbook Owner receives a mail, saying you have received a <span class="hljs-keyword">new</span> <span class="hljs-keyword">comment</span> <span class="hljs-keyword">and</span> the <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">wrapped</span> <span class="hljs-keyword">in</span> HTML <span class="hljs-keyword">and</span> <span class="hljs-keyword">is</span> reposted <span class="hljs-keyword">in</span> the Playbook Entry HTML wrapping works <span class="hljs-keyword">in</span> the <span class="hljs-keyword">system</span> side, it wraps the <span class="hljs-keyword">comment</span> <span class="hljs-keyword">of</span> a <span class="hljs-keyword">user</span> <span class="hljs-keyword">with</span>:

        <span class="hljs-keyword">User</span> Picture <span class="hljs-keyword">User</span> <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">User</span> <span class="hljs-keyword">Name</span> <span class="hljs-built_in">Date</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">comment</span> posted <span class="hljs-keyword">and</span> <span class="hljs-keyword">Time</span> passed <span class="hljs-keyword">by</span> since

    <span class="hljs-keyword">as</span> can be seen <span class="hljs-keyword">in</span> the Example Response</span></span>
</code></pre><p>3)it is post method</p>
<p>Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 27th 2013, 5:50:04 pm">July 27th 2013</span>
								by <span class='authorname'>Muhammad Wahhab Mirza</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-266427">
				
						<section>
							<p>hi,</p>
<p>the thing is <strong>item</strong> is not a json object so you need to first declare as json object.</p>
<pre><code class="hljs"><span class="hljs-title">var</span> item = {
    <span class="hljs-title">title</span> : <span class="hljs-string">'I am very good titanium developer'</span>
};
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 27th 2013, 4:57:49 am">July 27th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/155342/adding-to-playbook-without-entity.html#answer-266427" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for quick help but still giving me the same error.it is 400 bad request</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 27th 2013, 5:11:04 am">July 27th 2013</span>
											by <span class='authorname'>Muhammad Wahhab Mirza</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
