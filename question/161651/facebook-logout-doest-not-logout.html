<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Facebook Logout DOEST NOT LOGOUT » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Facebook Logout DOEST NOT LOGOUT</h1>
		</header>
		<section>
			<p>I&#39;m trying to logout the current user so another user can enter BUT the facebook logout doest not work!</p>
<p>Someone knows how can I fix that?</p>
<p>I already tried many things…</p>
<p>code: </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> fb = require( <span class="hljs-string">'facebook'</span> );
fb.appid = <span class="hljs-string">'APP KEY'</span>;

<span class="hljs-keyword">var</span> props = Ti.App.Properties.listProperties();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>, ilen=props.length; i&lt;ilen; i++){    
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">value</span> = Ti.App.Properties.getString(props[i]);
    Ti.API.info(props[i] + <span class="hljs-string">' = '</span> + <span class="hljs-keyword">value</span>);
}

Ti.API.info( <span class="hljs-string">'======================================================'</span> );
Ti.API.info( <span class="hljs-string">'======================================================'</span> );
Ti.API.info( <span class="hljs-string">'======================================================'</span> );

fb.logout();
fb.accessToken = <span class="hljs-keyword">null</span>;

<span class="hljs-comment">/*Ti.App.Properties.removeProperty( 'FBAccessToken' );
Ti.App.Properties.removeProperty( 'FBUserId' );
Ti.App.Properties.removeProperty( 'IDFace' );
*/</span>           

<span class="hljs-keyword">var</span> props = Ti.App.Properties.listProperties();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>, ilen=props.length; i&lt;ilen; i++){    
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">value</span> = Ti.App.Properties.getString(props[i]);
    Ti.API.info(props[i] + <span class="hljs-string">' = '</span> + <span class="hljs-keyword">value</span>);
}
</code></pre><p>this is the log of the code above…</p>
<pre><code class="hljs"><span class="hljs-label">INFO</span>] :   <span class="hljs-number">1452901761597653</span> = undefined
[<span class="hljs-preprocessor">INFO</span>] :   arrayFavoritos = undefined
[<span class="hljs-preprocessor">INFO</span>] :   WebKitShrinksStandaloneImagesToFit = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   <span class="hljs-number">189554374570691</span> = undefined
[<span class="hljs-preprocessor">INFO</span>] :   AppleLocale = en_US
[<span class="hljs-preprocessor">INFO</span>] :   IDFace = <span class="hljs-number">100000762748887</span>
[<span class="hljs-preprocessor">INFO</span>] :   WebKitOfflineWebApplicationCacheEnabled = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   WebKitCacheModelPreferenceKey = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   FBUserId = <span class="hljs-number">100000762748887</span>
[<span class="hljs-preprocessor">INFO</span>] :   AppleLanguages = undefined
[<span class="hljs-preprocessor">INFO</span>] :   AppleKeyboards = undefined
[<span class="hljs-preprocessor">INFO</span>] :   UIDisableLegacyTextView = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   WebKitDiskImageCacheSavedCacheDirectory =
[<span class="hljs-preprocessor">INFO</span>] :   FBSessionExpires = undefined
[<span class="hljs-preprocessor">INFO</span>] :   NSInterfaceStyle = macintosh
[<span class="hljs-preprocessor">INFO</span>] :   WebKitLocalStorageDatabasePathPreferenceKey = /Users/douglashennrich/Library/Application Support/iPhone Simulator/<span class="hljs-number">7</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3</span>/Applications/E7AF91D6-DE11-<span class="hljs-number">470</span>E-<span class="hljs-number">91</span>BD-F723E8C90669/Library/Caches
[<span class="hljs-preprocessor">INFO</span>] :   AppleKeyboardsExpanded = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   com.facebook.sdk:lastAttributionPing755377651155999 = undefined
[<span class="hljs-preprocessor">INFO</span>] :   AppleITunesStoreItemKinds = undefined
[<span class="hljs-preprocessor">INFO</span>] :   WebDatabaseDirectory = /Users/douglashennrich/Library/Application Support/iPhone Simulator/<span class="hljs-number">7</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3</span>/Applications/E7AF91D6-DE11-<span class="hljs-number">470</span>E-<span class="hljs-number">91</span>BD-F723E8C90669/Library/Caches
[<span class="hljs-preprocessor">INFO</span>] :   FBAccessToken = CAAKvAxCRhB8BANirZCjUZCDJFO6aZCZBpZAUWPIC5kV72bfBtZALJ4wKbB91BAmIIrt9GE1SkbnQCuZBPpa30l77119WGozuX1PQXzzRXuj8DZCQSK4n4WO61voVmDpzvFETzcq9Kot9SrtPeZCfn1F2z5wiAtmFaslaoHAHMDsEVuMpC4emU1x7F3vslDZBZCVip4ZD
[<span class="hljs-preprocessor">INFO</span>] :   FBAppId = <span class="hljs-number">755377651155999</span>
[<span class="hljs-preprocessor">INFO</span>] :   com.vicky.uuid = FFDC8FE6-EA51-<span class="hljs-number">40</span><span class="hljs-literal">C5</span>-<span class="hljs-keyword">BCEC-AAEE6B8AD6D1
</span>[<span class="hljs-preprocessor">INFO</span>] :   NSLanguages = undefined
[<span class="hljs-preprocessor">INFO</span>] :   <span class="hljs-number">142679555933028</span> = undefined
[<span class="hljs-preprocessor">INFO</span>] :   ti.ui.defaultunit = system
[<span class="hljs-preprocessor">INFO</span>] :   ti.facebook.appid = xxxxxxxxxxxxx
[<span class="hljs-preprocessor">INFO</span>] :   ======================================================
[<span class="hljs-preprocessor">INFO</span>] :   ======================================================
[<span class="hljs-preprocessor">INFO</span>] :   ======================================================
[<span class="hljs-preprocessor">INFO</span>] :   AppleLocale = en_US
[<span class="hljs-preprocessor">INFO</span>] :   AppleKeyboards = undefined
[<span class="hljs-preprocessor">INFO</span>] :   AppleLanguages = undefined
[<span class="hljs-preprocessor">INFO</span>] :   <span class="hljs-number">189554374570691</span> = undefined
[<span class="hljs-preprocessor">INFO</span>] :   arrayFavoritos = undefined
[<span class="hljs-preprocessor">INFO</span>] :   IDFace = <span class="hljs-number">100000762748887</span>
[<span class="hljs-preprocessor">INFO</span>] :   WebKitOfflineWebApplicationCacheEnabled = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   <span class="hljs-number">1452901761597653</span> = undefined
[<span class="hljs-preprocessor">INFO</span>] :   WebKitCacheModelPreferenceKey = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   WebKitShrinksStandaloneImagesToFit = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   UIDisableLegacyTextView = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   WebKitDiskImageCacheSavedCacheDirectory =
[<span class="hljs-preprocessor">INFO</span>] :   NSInterfaceStyle = macintosh
[<span class="hljs-preprocessor">INFO</span>] :   WebKitLocalStorageDatabasePathPreferenceKey = /Users/douglashennrich/Library/Application Support/iPhone Simulator/<span class="hljs-number">7</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3</span>/Applications/E7AF91D6-DE11-<span class="hljs-number">470</span>E-<span class="hljs-number">91</span>BD-F723E8C90669/Library/Caches
[<span class="hljs-preprocessor">INFO</span>] :   AppleKeyboardsExpanded = <span class="hljs-number">1</span>
[<span class="hljs-preprocessor">INFO</span>] :   com.facebook.sdk:lastAttributionPing755377651155999 = undefined
[<span class="hljs-preprocessor">INFO</span>] :   AppleITunesStoreItemKinds = undefined
[<span class="hljs-preprocessor">INFO</span>] :   WebDatabaseDirectory = /Users/douglashennrich/Library/Application Support/iPhone Simulator/<span class="hljs-number">7</span>.<span class="hljs-number">0</span>.<span class="hljs-number">3</span>/Applications/E7AF91D6-DE11-<span class="hljs-number">470</span>E-<span class="hljs-number">91</span>BD-F723E8C90669/Library/Caches
[<span class="hljs-preprocessor">INFO</span>] :   com.vicky.uuid = FFDC8FE6-EA51-<span class="hljs-number">40</span><span class="hljs-literal">C5</span>-<span class="hljs-keyword">BCEC-AAEE6B8AD6D1
</span>[<span class="hljs-preprocessor">INFO</span>] :   NSLanguages = undefined
[<span class="hljs-preprocessor">INFO</span>] :   <span class="hljs-number">142679555933028</span> = undefined
[<span class="hljs-preprocessor">INFO</span>] :   ti.ui.defaultunit = system
[<span class="hljs-preprocessor">INFO</span>] :   ti.facebook.appid = xxxxxxxxxxxxxx
</code></pre><p>when I try to login again to facebook&#39;s screen pop&#39;s up on the screen, it lead me to the authorization screen saying that I already authorize my facebook&#39;s app( inside facebook&#39;s screen )…</p>
<p>Someone knows anything about it?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 17th 2014, 2:18:29 pm">January 17th 2014</span>
				by <span class='authorname'>Douglas Hennrich</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>3.2.0 ga</span></li>
					
						<li><span class='tagname'>facebook</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-274085">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Because a browser is used in part of this, try to delete the cookie that facebook sets as well.</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> url</span> = 'https:<span class="hljs-comment">//login.facebook.com';</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> client</span> = Titanium.Network.createHTTPClient();
client.clearCookies(url);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 18th 2014, 12:37:11 pm">January 18th 2014</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="../../question/161651/facebook-logout-doest-not-logout.html#answer-274085" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Stephen! Thats help =D</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 18th 2014, 12:51:56 pm">January 18th 2014</span>
											by <span class='authorname'>Douglas Hennrich</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This doesn&#39;t seem to work for me.  I have setup my app to use SSO, but in the simulator it defaults to web login (which is fine).  When I run fb.logout() I expect it to forget the user and go in fresh, even using this, it still doesn&#39;t do this and just tells me that I have already authorised the app.</p>
<p>Seems like maybe there is no real solution to this for the new Facebook module.  I am using Ti SDK 3.2 though, so maybe that is it ..</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 28th 2014, 10:28:27 pm">January 28th 2014</span>
											by <span class='authorname'>Brad White</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Brad, </p>
<p>We ended up ditching the SSO for now. It was way too much of a hassle.  Sometimes it would work, it might work for one user, and not another.</p>
<p>I have learned to blame facebook first, then anything else second.  We had an apps in production, objectiveC, built against facebook sdk stop working.  Emergency rebuilds and release with an updated SDK.  Facebook is near the top for worst things I&#39;v ever had to integrate with.</p>
<p>Not saying there might not be a problem with the Ti module, mind you.</p>
<p>But the above code does work with forceDialog: true.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 28th 2014, 11:24:21 pm">January 28th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Stephen,</p>
<p>I agree with you there. FB is #1 on my blame list as well.  It has caused me (and is currently causing me) the greatest headaches.  My current production app doesn&#39;t use SSO and this is me giving it a go.  If it doesn&#39;t meet requirements - It&#39;ll go to the bottom of the list, again.</p>
<p>I just tested with forceDialog = true and agree, hence the vote :D</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 28th 2014, 11:41:27 pm">January 28th 2014</span>
											by <span class='authorname'>Brad White</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
