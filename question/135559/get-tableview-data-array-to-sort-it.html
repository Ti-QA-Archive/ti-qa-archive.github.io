<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Get TableView data Array to sort it. » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Get TableView data Array to sort it.</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I have a TableView and I wish to retrieve the data array&#x2F;structure and sort it before it is displayed. </p>
<p>This is what I have done so far:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> getDatafromTV</span> = tableview.getData();

<span class="hljs-variable"><span class="hljs-keyword">var</span> sortedArray</span> = getDatafromTV.sort(sortByDate);

tableview.setData(sortedArray);
</code></pre><p>As you can see, i&#39;m sorting by a data array member called &#39;ms&#39; (which happens to be a number).</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sortByDate</span><span class="hljs-params">(b, a)</span> </span>{

    <span class="hljs-keyword">var</span> x = a.ms;
    <span class="hljs-keyword">var</span> y = b.ms;

    <span class="hljs-keyword">return</span> ((x &lt; y) ? -<span class="hljs-number">1</span> : ((x &gt; y) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>));

}
</code></pre><p>This isn&#39;t sorting the entire array… in fact, it appears its only sorting sections of it. </p>
<p>Do you have any ideas?</p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 18th 2012, 4:06:57 am">April 18th 2012</span>
				by <span class='authorname'>E B</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>sort tableview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-236426">
				
						<section>
							<p>Hi E B,</p>
<p>I think you have to first check how many section inside the table and after getting the length you have to use forloop for sorting of section.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 18th 2012, 5:19:57 am">April 18th 2012</span>
								by <span class='authorname'>Nitin Chavda</span><br>
								<a class="icon-bg icon-link" href="../../question/135559/get-tableview-data-array-to-sort-it.html#answer-236426" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Nittin,</p>
<p>Its interesting you should talk about table sections. I didn&#39;t create any table sections. However, I get the feeling that TableView has considered my rows as table sections. Why do I say this?</p>
<p>Because I created the tableView data[] by using an appendRow (tableview.appendRow(row)) function. It appears that each section of rows appended to that data array is being treated like its own section. I honestly do not want that. I want the data to be sortable despite this.</p>
<p>What do you think?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 6:26:37 am">April 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>can you post your code so i we can see the process of creation?.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 6:29:06 am">April 18th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-236445">
				
						<section>
							<p>hi E B,</p>
<p>the problem is you store sortes array in variable. this should not be happend.</p>
<p>try this</p>
<pre><code class="hljs"><span class="hljs-tag">getDatafromTV</span><span class="hljs-class">.sort</span>(<span class="hljs-tag">sortByDate</span>);

<span class="hljs-tag">tableview</span><span class="hljs-class">.setData</span>(<span class="hljs-tag">getDatafromTV</span>);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 18th 2012, 7:35:56 am">April 18th 2012</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="../../question/135559/get-tableview-data-array-to-sort-it.html#answer-236445" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Mitul,</p>
<p>I did this, but I have the same issue: Indeed, there IS sorting done (by date), but for some reason, it is treating my array as if it had sections in there or section headers in there. </p>
<p>The array was built by simply doing the following</p>
<pre><code class="hljs">GetRSSFeed(feedURL)
{
-<span class="hljs-subst">-&gt; </span>Logic <span class="hljs-keyword">to</span> get RSS Feed

tableview<span class="hljs-built_in">.</span>appendRow(<span class="hljs-keyword">rows</span>);

}
</code></pre><p>Right after the tableview array is built, before its displayed, i&#39;m trying to sort each member of that array as follows:</p>
<pre><code class="hljs">var getDatafromTV = tableview.getData()<span class="hljs-comment">;</span>

        getDatafromTV.sort(sortByDate)<span class="hljs-comment">;</span>

        tableview.setData(getDatafromTV)<span class="hljs-comment">;</span>
</code></pre><p>Its a standard function. So, I&#39;m not creating ANY section, but because i&#39;m appending 2 RSS feeds within that array, it is sorting EACH rss feed and adding them together, so when they appear in my tablview, the 1st RSS feed is sorted by date, and right afterwards, the 2nd RSS feed is sorted by date.</p>
<p>I obviously do not want this… i want both RSS feeds in that array to be sorted by date (mixed up - if you know what I mean).</p>
<p>Now, it seems that I may have to do a loop through that tableView array and sort each member of that array accordingly - what do you think?</p>
<p>Its REALLY odd that its treating each RSS feed as if its a section within that tableview.. I&#39;m not at all creating sections, or section headers. </p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 8:48:14 am">April 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>when you use <strong>getData()</strong> method, it returns the section of the table so instead you should use</p>
<p><code>tableview.data[0].rows;</code> this will returns the objects of the rows..but that is not the solution for your problem…</p>
<p>in your case, you are appending the rows into the table so try one thing that at the time of creating row add one custom property to row like</p>
<p><code>row.ms = date;</code><br>and then sort like</p>
<pre><code class="hljs">var getDatafromTV = tableview.data[0].rows<span class="hljs-comment">;</span>

getDatafromTV.sort(sortByDate)<span class="hljs-comment">;</span>
tableview.setData(getDatafromTV)<span class="hljs-comment">;</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 9:06:55 am">April 18th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Mitul,</p>
<p>Thanks for your assistance. However, I&#39;m getting an error from the </p>
<pre><code class="hljs">         var getDatafromTV = tableview.<span class="hljs-typedef"><span class="hljs-keyword">data</span>[0].rows;</span>
</code></pre><p>method.</p>
<p>Yes, I created another variable called ms within the creteTableViewRow method. This has in it the date in a sortable format. </p>
<p>The sortable format is taken from postDate. I&#39;m leaving &quot;POSTDATE&quot; as it is simply because I want this to be displayed in the table view in the app.</p>
<pre><code class="hljs">within <span class="hljs-keyword">the</span> GetRSSFeeds() {

 var timeVar = [];

<span class="hljs-keyword">for</span>(var c = <span class="hljs-number">0</span>; c &lt; items.<span class="hljs-property">length</span>; c++) 
        {
            urls[c] = items.<span class="hljs-property">item</span>(c).getElementsByTagName('link').<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>;
            postName = items.<span class="hljs-property">item</span>(c).getElementsByTagName('title').<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>;
            postUrl = items.<span class="hljs-property">item</span>(c).getElementsByTagName('link').<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>;
            postDescription = items.<span class="hljs-property">item</span>(c).getElementsByTagName('description').<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>;

               <span class="hljs-keyword">if</span> ( items.<span class="hljs-property">item</span>(c).getElementsByTagName('pubDate').<span class="hljs-property">item</span>(<span class="hljs-number">0</span>) ) {
                postDate = items.<span class="hljs-property">item</span>(c).getElementsByTagName('pubDate').<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>;
                timeVar[c] = Date(postDate).getTime();
            } <span class="hljs-keyword">else</span> {
                postDate = '<span class="hljs-number">0</span>';
                timeVar[c] = <span class="hljs-number">0</span>;
            }

<span class="hljs-comment">---&gt; </span>
 var rssRow = Titanium.UI.createTableViewRow({
                height : <span class="hljs-number">75</span>,
                link : postUrl,
                rssTitle : postName,
                rssDescription: postDescription,
                ms: timeVar
            });

<span class="hljs-comment">--&gt; OUTSIDE the FOR- loop (as we agreed!)</span>

tableview.appendRow(rows);
</code></pre><p>The error message i&#39;m getting is as follows:</p>
<pre><code class="hljs">    <span class="hljs-keyword">message</span> = <span class="hljs-string">"'undefined' is not an object (evaluating 'tableview.data[0].rows')"</span>;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 9:31:15 am">April 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok try clean build from <strong>project</strong> menu</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 9:46:38 am">April 18th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Mitul,</p>
<p>I&#39;ve performed a clean build and I still get the same error message:</p>
<pre><code class="hljs">
    <span class="hljs-keyword">message</span> = <span class="hljs-string">"'undefined' is not an object (evaluating 'tableview.data[0].rows')"</span>;
</code></pre><p>The tableview array is in a data structure called rows that was created as </p>
<p><del>~ var rows = [];</del>~</p>
<p>I&#39;m assuming that this points to &quot;data[]&quot; in the tableview method? </p>
<p>overall, what I&#39;m doing is :</p>
<pre><code class="hljs"> var getDatafromTV = tableview.data[0].rows<span class="hljs-comment">;</span>

        getDatafromTV.sort(compareTime)<span class="hljs-comment">;</span>

        tableview.setData(getDatafromTV)<span class="hljs-comment">;</span>
</code></pre><p>The function containing the tableview is as follows:</p>
<pre><code class="hljs">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetRSSFeeds</span>(<span class="hljs-params">channelname, url, imageLocation</span>) 
</span>{

    <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();

    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) 
    </span>{

        <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
        <span class="hljs-keyword">var</span> items = doc.getElementsByTagName(<span class="hljs-string">'item'</span>);
        <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
        <span class="hljs-keyword">var</span> urls = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
        <span class="hljs-keyword">var</span> rows = [];
        <span class="hljs-keyword">var</span> timeVar = [];


        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> c = <span class="hljs-number">0</span>; c &lt; items.length; c++) 
        {
            urls[c] = items.item(c).getElementsByTagName(<span class="hljs-string">'link'</span>).item(<span class="hljs-number">0</span>).text;
            postName = items.item(c).getElementsByTagName(<span class="hljs-string">'title'</span>).item(<span class="hljs-number">0</span>).text;
            postUrl = items.item(c).getElementsByTagName(<span class="hljs-string">'link'</span>).item(<span class="hljs-number">0</span>).text;
            postDescription = items.item(c).getElementsByTagName(<span class="hljs-string">'description'</span>).item(<span class="hljs-number">0</span>).text;

           <span class="hljs-keyword">if</span> ( items.item(c).getElementsByTagName(<span class="hljs-string">'pubDate'</span>).item(<span class="hljs-number">0</span>) ) {
                postDate = items.item(c).getElementsByTagName(<span class="hljs-string">'pubDate'</span>).item(<span class="hljs-number">0</span>).text;
                timeVar[c] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(postDate).getTime();
                } <span class="hljs-keyword">else</span> {
                postDate = <span class="hljs-string">'0'</span>;
                timeVar[c] = <span class="hljs-number">0</span>;
            }


            <span class="hljs-keyword">var</span> rssRow = Titanium.UI.createTableViewRow({
                height : <span class="hljs-number">75</span>,
                link : postUrl,
                rssTitle : postName,
                rssDescription: postDescription,
                ms: timeVar
            });



            <span class="hljs-keyword">var</span> titleLabel = Titanium.UI.createLabel({
                text : postName,
            top : <span class="hljs-number">25</span>,
                left : <span class="hljs-number">60</span>,
                height : <span class="hljs-number">50</span>,
                wordWrap : <span class="hljs-literal">true</span>
            });

            <span class="hljs-keyword">var</span> pubDateLabel = Titanium.UI.createLabel({
                text : postDate,
            top : <span class="hljs-number">5</span>,
                left : <span class="hljs-number">60</span>,
                height : <span class="hljs-number">25</span>,
                wordWrap : <span class="hljs-literal">true</span>
            });

            <span class="hljs-keyword">var</span> rssIcon = Titanium.UI.createImageView({
                image : postImage, 
                width : <span class="hljs-number">55</span>,
                height : <span class="hljs-number">55</span>,
                left : <span class="hljs-number">2</span>,
                top : <span class="hljs-number">5</span>
            });

            rssRow.add(titleLabel);
            rssRow.add(pubDateLabel);
            rssRow.add(rssIcon);

            rows.push(rssRow);

        } <span class="hljs-comment">// end of FOR LOOP!!</span>


        tableview.appendRow(rows);

    };

    xhr.open(<span class="hljs-string">'GET'</span>, url);
    <span class="hljs-comment">// Open the URL we entered at the top of this file.</span>
    xhr.send();

} <span class="hljs-comment">//end of function</span>
</code></pre><p>so, i&#39;ve added ms in the tableViewRow() method that contains the date in a sortable format.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 10:59:30 am">April 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">var getDatafromTV = tableview.data[0].rows<span class="hljs-comment">;</span>

    getDatafromTV.sort(compareTime)<span class="hljs-comment">;</span>

    tableview.setData(getDatafromTV)<span class="hljs-comment">;</span>
</code></pre><p>put this code after for loop</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 11:04:25 am">April 18th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hi Mitul,</p>
<p>I have put this code after the for loop:</p>
<pre><code class="hljs">
  } // <span class="hljs-keyword">end</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">FOR</span> LOOP!!


        tableview.appendRow(rows);

<span class="hljs-keyword">var</span> getDatafromTV = tableview.data[<span class="hljs-number">0</span>].rows;

    getDatafromTV.sort(compareTime);

    tableview.setData(getDatafromTV);
</code></pre><p>–&gt; What happens is that it only displays ONE record in the tableview.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 11:13:26 am">April 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i told you to put the above three line not to put <strong>tableview.appendRow(rows);</strong></p>
<p>put this line in for loop</p>
<pre><code class="hljs"><span class="hljs-tag">tableview</span><span class="hljs-class">.appendRow</span>(<span class="hljs-tag">rows</span>);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 11:15:49 am">April 18th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi,</p>
<p>My apologies. </p>
<p>I placed the</p>
<pre><code class="hljs"><span class="hljs-tag">tableview</span><span class="hljs-class">.appendRow</span>(<span class="hljs-tag">rows</span>);
</code></pre><p>inside the for loop:</p>
<pre><code class="hljs"><span class="hljs-attribute">...</span>
   tableview<span class="hljs-built_in">.</span>appendRow(<span class="hljs-keyword">rows</span>);


        } <span class="hljs-comment">// end of FOR LOOP!!</span>


    <span class="hljs-built_in">var</span> getDatafromTV = tableview<span class="hljs-built_in">.</span><span class="hljs-built_in">data</span><span class="hljs-preprocessor">[</span><span class="hljs-number">0</span><span class="hljs-preprocessor">]</span><span class="hljs-markup">.rows;

    getDatafromTV.sort(compareTime);

    tableview.setData(getDatafromTV);</span>
</code></pre><p>Now I get no lines at all appearing in the tableview. </p>
<p>What am I doing wrong? You think?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 11:31:06 am">April 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>do not know but i have created one demo just get the idea from that</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({
    <span class="hljs-comment">// backgroundColor : '#666666'</span>
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'red'</span>,
    <span class="hljs-comment">// backgroundImage : 'img/1.jpg'</span>
});

function sortByDate(b, a) {

    var x = a.ms;
    var y = b.ms;

    <span class="hljs-keyword">return</span> ((x &lt; y) ? -1 : ((x &gt; y) ? 1 : <span class="hljs-number">0</span>));

}

var data = [Ti.UI.createTableViewRow({
    <span class="hljs-string">title :</span> <span class="hljs-string">'1'</span>,
    <span class="hljs-string">ms :</span> <span class="hljs-number">1</span>
}), Ti.UI.createTableViewRow({
    <span class="hljs-string">title :</span> <span class="hljs-string">'2'</span>,
    <span class="hljs-string">ms :</span> <span class="hljs-number">2</span>
}), Ti.UI.createTableViewRow({
    <span class="hljs-string">title :</span> <span class="hljs-string">'3'</span>,
    <span class="hljs-string">ms :</span> <span class="hljs-number">3</span>
}), Ti.UI.createTableViewRow({
    <span class="hljs-string">title :</span> <span class="hljs-string">'4'</span>,
    <span class="hljs-string">ms :</span> <span class="hljs-number">4</span>
})];
var x = <span class="hljs-number">4</span>;

var tbl = Titanium.UI.createTableView({
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'transparent'</span>, <span class="hljs-comment">//Set BG transparent</span>
    <span class="hljs-string">rowBackgroundColor :</span> <span class="hljs-string">'transparent'</span>,
    <span class="hljs-string">height :</span> <span class="hljs-number">366</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">320</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">25</span>,
    <span class="hljs-string">left :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">rowHeight :</span> <span class="hljs-number">70</span>,
    <span class="hljs-string">data :</span> data
});
<span class="hljs-keyword">for</span>(var i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
    tbl.appendRow(Ti.UI.createTableViewRow({
        <span class="hljs-string">title :</span> <span class="hljs-string">'4 &gt;&gt; '</span> + i,
        <span class="hljs-string">ms :</span> x + (i + <span class="hljs-number">1</span>)
    }));
}
setTimeout(function(e) {
    var r = tbl.data[<span class="hljs-number">0</span>].rows;
    r.sort(sortByDate);
    tbl.data = r;
    alert(<span class="hljs-string">'Sorted'</span>);
}, <span class="hljs-number">2000</span>);

win.add(tbl);

win.open();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 18th 2012, 11:34:34 am">April 18th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
