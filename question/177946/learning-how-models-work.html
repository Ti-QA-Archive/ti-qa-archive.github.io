<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Learning how models work » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Learning how models work</h1>
		</header>
		<section>
			<p>So in my learning of titanium so far things have been great… then I tried setting up a simple model… I have plenty of experience with Backbone in the web environment so i thought this would be a no brainer. Wrong - or maybe I am just missing some huge here. I have tried so many walkthroughs but none of them seem to close the gap… or work at all honestly</p>
<p>I have this model:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> moment = <span class="hljs-built_in">require</span>(<span class="hljs-string">'alloy/moment'</span>);

exports.definition = {
    config: {
        columns: {
            <span class="hljs-string">"userid"</span>:<span class="hljs-string">"INTEGER PRIMARY KEY"</span>,
            <span class="hljs-string">"token"</span>: <span class="hljs-string">"TEXT"</span>,
            <span class="hljs-string">"timestamp"</span>: <span class="hljs-string">"TEXT"</span>
        },
        defaults: {
            <span class="hljs-string">"userid"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">"timestamp"</span>: moment().unix()
        },
        adapter: {
            type: <span class="hljs-string">"sql"</span>,
            collection_name: <span class="hljs-string">"users"</span>,
            idAttribute: <span class="hljs-string">"userid"</span>
        }
    },
    extendModel: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Model</span>) </span>{
        _.extend(Model.prototype, {
            <span class="hljs-comment">// extended functions and properties go here</span>
        });

        <span class="hljs-keyword">return</span> Model;
    },
    extendCollection: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Collection</span>) </span>{
        _.extend(Collection.prototype, {
            <span class="hljs-comment">// extended functions and properties go here</span>
        });

        <span class="hljs-keyword">return</span> Collection;
    }
};
</code></pre><p>And I am simply trying to log ANYTHING from it and I get nothing but red screens of death or &lt;null&gt; from the object.</p>
<p>Here is where I am trying to access it. This is just in the index.js:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> users = Alloy.createCollection('users');
    auth = false;


<span class="hljs-comment">// set user info for testing</span>
createUser = Alloy.createModel('users', {
    <span class="hljs-keyword">token</span>: <span class="hljs-string">"123456789"</span>
});

<span class="hljs-comment">// add to collection</span>
users.add(createUser);

<span class="hljs-comment">//save the data</span>
createUser.<span class="hljs-keyword">save</span>();

<span class="hljs-comment">// get the data</span>
<span class="hljs-keyword">var</span> <span class="hljs-keyword">token</span> = users.fetch();
console.<span class="hljs-literal">log</span>(<span class="hljs-keyword">token</span>);
</code></pre><p>No matter what I do so far token is ALWAYS null. Shouldn&#39;t it be an object or something with some methods? If I try to do a get or anything else it just red screens.</p>
<p>Please any help is appreciated. Or point me to documentation with actual examples.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 24th 2014, 1:35:24 pm">September 24th 2014</span>
				by <span class='authorname'>Justin Bane</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>backbone</span></li>
					
						<li><span class='tagname'>models</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-282651">
				
						<section>
							<p>Here is a full working example. Should get you started. <a href="http:&#x2F;&#x2F;www.itexico.com&#x2F;blog&#x2F;bid&#x2F;95789&#x2F;Mobile-App-Tutorial-Backbone-Models-Database-with-Titanium-Alloy">http:&#x2F;&#x2F;www.itexico.com&#x2F;blog&#x2F;bid&#x2F;95789&#x2F;Mobile-App-Tutorial-Backbone-Models-Database-with-Titanium-Alloy</a></p>
<p>Ray</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 24th 2014, 2:54:24 pm">September 24th 2014</span>
								by <span class='authorname'>Ray Belisle</span><br>
								<a class="icon-bg icon-link" href="question/177946/learning-how-models-work#answer-282651" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-282658">
				
						<section>
							<p>Hi, thanks for the walk through. Thats actually one of the many walkthroughs I have been through.</p>
<p>My question is more why doesn&#39;t the code above work? I know this is kind of an RTFM question BUT I did RTFM - and stuff ain&#39;t working. So anyone - can you get this code to work?</p>
<p>Thanks in advance for the patience and giving it a go - this is keeping me awake nights :)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 24th 2014, 8:31:53 pm">September 24th 2014</span>
								by <span class='authorname'>Justin Bane</span><br>
								<a class="icon-bg icon-link" href="question/177946/learning-how-models-work#answer-282658" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-282674">
				
						<section>
							<p>fetch() doesn&#39;t return anything. It updates your collection. So, your last bit of code should be</p>
<pre><code class="hljs"><span class="hljs-comment">/* not this
var token = users.fetch();
console.log(token);
*/</span>

<span class="hljs-comment">// but something like this</span>
users.fetch();
<span class="hljs-comment">// then do something with your collection, like</span>
users.<span class="hljs-keyword">each</span>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(model)</span> </span>{
   console.log(model);
});
</code></pre><p>BTW, try to post follow ups as comments not new answers. It helps keep conversations together (as the answers can get shuffled as new ones come in and folks vote them up&#x2F;down).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 25th 2014, 11:00:03 am">September 25th 2014</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="question/177946/learning-how-models-work#answer-282674" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ah sorry about that - I just typed my reply in the first text area I saw :) Noted. I will give this s try as soon as I am able.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 25th 2014, 2:47:44 pm">September 25th 2014</span>
											by <span class='authorname'>Justin Bane</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tried your code like this. I get instant app crash every time.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> users = Alloy.createCollection(<span class="hljs-string">'users'</span>);
    auth = <span class="hljs-literal">false</span>;

<span class="hljs-comment">// set user info for testing</span>
createUser = Alloy.createModel(<span class="hljs-string">'Users'</span>, {
    token: <span class="hljs-string">"123456789"</span>
});

<span class="hljs-comment">// add to collection</span>
users.add(createUser);

<span class="hljs-comment">//save the data</span>
createUser.save();

<span class="hljs-comment">// get the data</span>
users.fetch();
users.<span class="hljs-keyword">each</span>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(model)</span> </span>{
    console.log(model);
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="September 25th 2014, 2:56:34 pm">September 25th 2014</span>
											by <span class='authorname'>Justin Bane</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-282691">
				
						<section>
							<p>OK so I am going answer my own on this one.</p>
<p>I took a stab at just using some standard BackBone JS code to do this and it worked great. I am not entirely sure why most, if not all, of the Titanium walkthroughs failed for me but this is what worked. This is, for the most part, exactly how you would do this in BackBone on the web and it worked great in Ti.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> users = Alloy.createModel(<span class="hljs-string">'users'</span>);
    auth = <span class="hljs-literal">false</span>;


users.<span class="hljs-keyword">set</span>({
    userid: <span class="hljs-number">1</span>,
    token: <span class="hljs-string">"123"</span>
});
users.save();

<span class="hljs-comment">// Fetch the data</span>
users.fetch({
    success: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(user)</span> </span>{
        console.log(user.<span class="hljs-keyword">get</span>(<span class="hljs-string">'token'</span>));
    },
    error: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        Ti.API.error(<span class="hljs-string">"Could not retrive data"</span>);
    }
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 25th 2014, 7:01:19 pm">September 25th 2014</span>
								by <span class='authorname'>Justin Bane</span><br>
								<a class="icon-bg icon-link" href="question/177946/learning-how-models-work#answer-282691" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
