<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Make a setting page for application » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Make a setting page for application</h1>
		</header>
		<section>
			<p>Hello,</p>
<p>Whats the best way to keep config for your app (for example on&#x2F;off values of tabbed bars and other usefull info which i want my application to follow )?</p>
<p>I made a separate  setting.js file for my app and used custom fireEvents but this wont work upto a certain extent because it is not holding the setting property.As each time i am pressing the button for setting page it creates a new context and doesnt preserve the old setting. </p>
<p>So whats the best way to create a setting page for application which is available to the app.?</p>
<p>Thanks.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 22nd 2011, 5:12:56 am">August 22nd 2011</span>
				by <span class='authorname'>mathew orleans</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-217103">
				
						<section>
							<p>As J Alammar said, I suggest you to use only one execution context. But if you can&#39;t or you don&#39;t want to do it, create an object with all your properties and pass it to the new execution context as a custom parameter</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> MY_PROPS = {
    var1:<span class="hljs-string">'foo'</span>,
    var2:<span class="hljs-string">'foo2'</span>
};


<span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
    url:<span class="hljs-string">'yourFile.js'</span>,
    my_props = MY_PROPS
});
</code></pre><p>in &#39;yourFile.js&#39;</p>
<pre><code class="hljs">
<span class="hljs-variable"><span class="hljs-keyword">var</span> win</span> = Ti.UI.currentWindow;
<span class="hljs-variable"><span class="hljs-keyword">var</span> MY_PROPS</span> = win.my_props;

Ti.API.info(MY_PROPS.var1);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 22nd 2011, 6:43:26 am">August 22nd 2011</span>
								by <span class='authorname'>Javier Rayon</span><br>
								<a class="icon-bg icon-link" href="question/124567/make-a-setting-page-for-application#answer-217103" rel="permalink">permalink</a>
							</div>

							<h5>16 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I have a program structure like this , i have a button say in app.js and on click of that button it takes me to settings.js page, where i have a toggle button for on&#x2F;off.Based on the on&#x2F;off i want to do some action in my application. How can i achieve this ?? And also preserving the last configuration as if i press the button again it will call settings.js file making a new execution context!!! So isnt it advisible to make a seperate js file for setting page??</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 7:18:55 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>There are some factors that would determine the best way, For example, should these settings be saved when the app is closed? In this case, use properties, as J Alammar said. Should properties refresh in realtime or only when user close the window? And many others…  See your code would help a lot.</p>
<p>If you need to refresh settings changes in real time, I think what you need are custom events. You can fire an event when the on&#x2F;off button change its value</p>
<pre><code class="hljs">
<span class="hljs-comment">//yourSwitch is a switchButton. Capture changes and then fire your custom event</span>
<span class="hljs-tag">yourSwitch</span><span class="hljs-class">.addEventListener</span>(<span class="hljs-string">'change'</span>,<span class="hljs-function">function</span>(e){
    <span class="hljs-tag">Ti</span><span class="hljs-class">.App</span><span class="hljs-class">.fireEvent</span>(<span class="hljs-string">'setting_changed'</span>, {<span class="hljs-attribute">value</span>:e.value})
});
</code></pre><p>Now capture the event in your main context. Remember it is an App event, so you should add the listener to Ti.App</p>
<pre><code class="hljs">Ti.App.addEventListener(<span class="hljs-string">'setting_changed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    alert(<span class="hljs-string">'setting has changed to '</span> + e.value)
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 7:37:19 am">August 22nd 2011</span>
											by <span class='authorname'>Javier Rayon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>yes i am doing the same as you said. But when i again press the button for setting.js page it is creating the new context and not remebering the changes made in earlier execution…</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 7:59:54 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>you&#39;ll need to update your properties object (MY_PROPS in the sample) when changes occurs and initialize the switch buttons using this object.</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> win</span> = Ti.UI.currentWindow;
<span class="hljs-variable"><span class="hljs-keyword">var</span> MY_PROPS</span> = win.my_props;

Ti.API.info(MY_PROPS.var1);

<span class="hljs-comment">//Initialize using your props object or assign false by default</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> basicSwitch</span> = Titanium.UI.createSwitch({
    value:MY_PROPS.yourSetting || <span class="hljs-literal">false</span>
});
</code></pre><p>Sorry, but without your code, I think I can&#39;t help you better.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 8:07:48 am">August 22nd 2011</span>
											by <span class='authorname'>Javier Rayon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok let me give you the code please….</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 8:09:09 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>My app is like this there is a search bar you type a place in the search bar it will show you the tempreture in the view and the creesponding map.<br>In the toolbar there is a button named S, it will take you to the the setting page . There is a toggle button between F&#x2F;C .</p>
<p>there are two files win.js for map and tempreture and setting.js for setting.</p>
<p>win.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win=Titanium.UI.currentWindow;
win.title=<span class="hljs-string">'Search'</span>;

Titanium.Geolocation.purpose = <span class="hljs-string">"Show User Location"</span>;
Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST;

Titanium.Geolocation.distanceFilter = <span class="hljs-number">10</span>;

<span class="hljs-keyword">var</span> tempreture_flag=<span class="hljs-literal">true</span>;

        <span class="hljs-keyword">var</span> search = Titanium.UI.createSearchBar({ 
        showCancel:<span class="hljs-literal">true</span>,
        height:<span class="hljs-number">40</span>,
        top:<span class="hljs-number">0</span>,
        });

        win.add(search);
        <span class="hljs-keyword">var</span> label1= Titanium.UI.createLabel({
            top:<span class="hljs-number">40</span>,
            width:<span class="hljs-number">150</span>,
            height:<span class="hljs-number">50</span>,
            color:<span class="hljs-string">'black'</span>,
            left:<span class="hljs-number">150</span>,
            font:{fontWeight:<span class="hljs-string">'bold'</span>}
        });


        <span class="hljs-keyword">var</span> label2= Titanium.UI.createLabel({
            top:<span class="hljs-number">45</span>,
            width:<span class="hljs-number">80</span>,
            height:<span class="hljs-number">40</span>,
            color:<span class="hljs-string">'black'</span>,
            left:<span class="hljs-number">65</span>,
            textAlign:<span class="hljs-string">'right'</span>,
            <span class="hljs-comment">//backgroundColor:'black',</span>
            font:{fontWeight:<span class="hljs-string">'bold'</span>}
        });

        <span class="hljs-keyword">var</span> image = Titanium.UI.createImageView({
            top:<span class="hljs-number">42</span>,
            height:<span class="hljs-number">38</span>,
            width:<span class="hljs-number">60</span>,
            left:<span class="hljs-number">50</span>
        });
        win.add(image);


        search.addEventListener(<span class="hljs-string">'cancel'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

            search.blur();
            search.value=<span class="hljs-string">''</span>;
        });

        search.addEventListener(<span class="hljs-string">'return'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        search.blur();
        label1.text=<span class="hljs-string">''</span>;
        label2.text=<span class="hljs-string">''</span>;
        image.image=<span class="hljs-string">''</span>;


        <span class="hljs-keyword">var</span> addr=search.value;

        Titanium.Geolocation.forwardGeocoder(addr,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>)
        </span>{

        <span class="hljs-keyword">var</span> latitude=evt.latitude;
        <span class="hljs-keyword">var</span> longitude=evt.longitude;
        <span class="hljs-keyword">var</span> anno = Ti.Map.createAnnotation({
          latitude:latitude,
          longitude:longitude,
          <span class="hljs-comment">//title:"Apple HQ",</span>
          subtitle:<span class="hljs-string">'Cupertino, CA'</span>,
          pincolor:Ti.Map.ANNOTATION_GREEN,
          animate:<span class="hljs-literal">true</span>,

         <span class="hljs-comment">// rightButton: 'images/apple_logo.jpg'</span>
        });


        <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
        wx_location=search.value;
        xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
        </span>{

            <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
            <span class="hljs-keyword">var</span> current = doc.getElementsByTagName(<span class="hljs-string">"current_conditions"</span>);
            label1.text=<span class="hljs-string">"|"</span>+ <span class="hljs-string">" "</span>+current.item(<span class="hljs-number">0</span>).getElementsByTagName(<span class="hljs-string">"condition"</span>).item(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"data"</span>);
            alert(tempreture_flag);
            <span class="hljs-keyword">if</span>(tempreture_flag==<span class="hljs-literal">false</span>){
                label2.text=current.item(<span class="hljs-number">0</span>).getElementsByTagName(<span class="hljs-string">"temp_c"</span>).item(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"data"</span>)+<span class="hljs-string">"°C"</span>;
            }
            <span class="hljs-keyword">else</span>{
                label2.text=current.item(<span class="hljs-number">0</span>).getElementsByTagName(<span class="hljs-string">"temp_f"</span>).item(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"data"</span>)+<span class="hljs-string">"°F"</span>;
            }

            image.image=<span class="hljs-string">"http://www.google.com"</span>+current.item(<span class="hljs-number">0</span>).getElementsByTagName(<span class="hljs-string">"icon"</span>).item(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"data"</span>);
            tempreture_flag=<span class="hljs-literal">true</span>;
        };


        xhr.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'http://www.google.com/ig/api?hl=en&amp;weather='</span>+wx_location);


            xhr.send();


        <span class="hljs-keyword">var</span> mapview = Titanium.Map.createView({
        top:<span class="hljs-number">80</span>,
        height:<span class="hljs-number">300</span>,
        mapType: Titanium.Map.STANDARD_TYPE,
        region:{latitude:latitude, longitude:longitude, latitudeDelta:<span class="hljs-number">0.01</span>, longitudeDelta:<span class="hljs-number">0.01</span>},
        animate:<span class="hljs-literal">true</span>,
        regionFit:<span class="hljs-literal">true</span>,
        userLocation:<span class="hljs-literal">true</span>,
        annotations:[anno]
        });
        win.add(label1);
        win.add(label2);
        win.add(mapview);

        });


    });
    <span class="hljs-keyword">var</span> flexSpace = Titanium.UI.createButton({
    systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
    });

    <span class="hljs-keyword">var</span> current_location = Titanium.UI.createButton({
            title:<span class="hljs-string">'C'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,

        });
        <span class="hljs-keyword">var</span> search1 = Titanium.UI.createButton({
            title:<span class="hljs-string">'Search'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,

            <span class="hljs-comment">//top:390,</span>
        });

        <span class="hljs-keyword">var</span> direction= Titanium.UI.createButton({
            title:<span class="hljs-string">'Direction'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,
            <span class="hljs-comment">//top:390,</span>
        });
        <span class="hljs-keyword">var</span> setting = Titanium.UI.createButton({
            title:<span class="hljs-string">'S'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,
            <span class="hljs-comment">//top:390,</span>
        });

    <span class="hljs-keyword">var</span> spacer =  Titanium.UI.createButton({
        title:<span class="hljs-string">''</span>,
        systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
        });


        <span class="hljs-keyword">var</span> toolbar =  Titanium.UI.createToolbar({
        top:<span class="hljs-number">375</span>,
        items:[current_location,flexSpace,search1,direction,flexSpace,setting]
        });
        win.add(toolbar);

        direction.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
            <span class="hljs-keyword">var</span> win2=Titanium.UI.createWindow({
                url:<span class="hljs-string">'direction.js'</span>,
                title:<span class="hljs-string">'Directions'</span>,
                backgroundColor:<span class="hljs-string">'white'</span>

            });
            win2.open({modal:<span class="hljs-literal">true</span>});
        });


        <span class="hljs-comment">//change</span>
        <span class="hljs-keyword">var</span> navGroup = Ti.UI.iPhone.createNavigationGroup({
        <span class="hljs-built_in">window</span>:win
        });


        <span class="hljs-keyword">var</span> setting_window=Titanium.UI.createWindow({
            url:<span class="hljs-string">'setting.js'</span>,
            title:<span class="hljs-string">'Settings'</span>,
            top:<span class="hljs-number">0</span>,
            backgroundColor:<span class="hljs-string">'CCC'</span>,

        });

        setting.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

        navGroup.open(setting_window);
        <span class="hljs-comment">//setting_window.open()</span>


        });

        <span class="hljs-keyword">var</span> main = Ti.UI.createWindow({});
        main.add(navGroup);
        main.open();
        <span class="hljs-comment">//till here</span>

        Titanium.App.addEventListener(<span class="hljs-string">'app:clicked'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
            tempreture_flag=e.tempreture_flag;


        });
</code></pre><p>setting.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win=Titanium.UI.currentWindow;

        <span class="hljs-keyword">var</span> flexSpace = Titanium.UI.createButton({
            systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
        });

        <span class="hljs-keyword">var</span> current_location = Titanium.UI.createButton({
            title:<span class="hljs-string">'C'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,
            enabled:<span class="hljs-literal">false</span>

        });
        <span class="hljs-keyword">var</span> search1 = Titanium.UI.createButton({
            title:<span class="hljs-string">'Search'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,

            <span class="hljs-comment">//top:390,</span>
        });

        <span class="hljs-keyword">var</span> direction= Titanium.UI.createButton({
            title:<span class="hljs-string">'Direction'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,
            enabled:<span class="hljs-literal">false</span>
            <span class="hljs-comment">//top:390,</span>
        });
        <span class="hljs-keyword">var</span> setting = Titanium.UI.createButton({
            title:<span class="hljs-string">'S'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,
            enabled:<span class="hljs-literal">false</span>
            <span class="hljs-comment">//top:390,</span>
        });

        <span class="hljs-keyword">var</span> spacer =  Titanium.UI.createButton({
            title:<span class="hljs-string">''</span>,
            systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
        });


        <span class="hljs-keyword">var</span> toolbar =  Titanium.UI.createToolbar({
            top:<span class="hljs-number">373</span>,
            items:[current_location,flexSpace,search1,direction,flexSpace,setting]
        });
        win.add(toolbar);

        search1.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">var</span> search_window = Ti.UI.createWindow({
               url:<span class="hljs-string">'win.js'</span>,
               backgroundColor: <span class="hljs-string">'white'</span>
            });
            search_window.open();
        });

        <span class="hljs-keyword">var</span> label_for_map=Titanium.UI.createLabel({
            text:<span class="hljs-string">"Map"</span>,
            font:{fontWeight:<span class="hljs-string">'bold'</span>,fontSize:<span class="hljs-number">18</span>},
            top:-<span class="hljs-number">260</span>,
            left:<span class="hljs-number">12</span>
        });
        win.add(label_for_map);


        <span class="hljs-keyword">var</span> buttonObjects = [
            {title:<span class="hljs-string">'Map'</span>, enabled:<span class="hljs-literal">true</span>},
            {title:<span class="hljs-string">'Hybrid'</span>, enabled:<span class="hljs-literal">false</span>},
            {title:<span class="hljs-string">'Satellite'</span>, enabled:<span class="hljs-literal">false</span>},
        ];


        <span class="hljs-keyword">var</span> bb1 = Titanium.UI.createTabbedBar({
            <span class="hljs-comment">//labels:buttonObjects,</span>
            backgroundColor:<span class="hljs-string">'#A9ACB6'</span>,
            top:<span class="hljs-number">70</span>,
            index:<span class="hljs-number">0</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BAR,
            height:<span class="hljs-number">40</span>,
            width:<span class="hljs-number">300</span>
        });

        win.add(bb1);
        setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
            buttonObjects[<span class="hljs-number">1</span>].enabled = <span class="hljs-literal">false</span>;
            buttonObjects[<span class="hljs-number">2</span>].enabled = <span class="hljs-literal">false</span>;
            bb1.labels = buttonObjects;
            }, <span class="hljs-number">100</span>);

        <span class="hljs-keyword">var</span> show_traffic = Titanium.UI.createButton({
            title:<span class="hljs-string">'Show Traffic'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED,
            top:<span class="hljs-number">140</span>,
            height:<span class="hljs-number">40</span>,
            width:<span class="hljs-number">280</span>,
            color:<span class="hljs-string">'black'</span>

        });
    win.add(show_traffic);

    <span class="hljs-keyword">var</span> label_for_measurements=Titanium.UI.createLabel({
        text:<span class="hljs-string">"Measurements"</span>,
        font:{fontWeight:<span class="hljs-string">'bold'</span>,fontSize:<span class="hljs-number">18</span>},
        top:<span class="hljs-number">20</span>,
        left:<span class="hljs-number">12</span>
    });
    win.add(label_for_measurements);

    <span class="hljs-keyword">var</span> tempreture_tabbar = Titanium.UI.createTabbedBar({
        labels:[<span class="hljs-string">'°F'</span>, <span class="hljs-string">'°C'</span>],
        top:<span class="hljs-number">230</span>,
        <span class="hljs-comment">//index:0,</span>
        backgroundColor:<span class="hljs-string">'#A9ACB6'</span>,
        height:<span class="hljs-number">40</span>,
        left:<span class="hljs-number">28</span>,
        width:<span class="hljs-number">80</span>

    });
    win.add(tempreture_tabbar);

    <span class="hljs-keyword">var</span> distance_tabbar = Titanium.UI.createTabbedBar({
        labels:[<span class="hljs-string">'Mi'</span>, <span class="hljs-string">'Km'</span>],
        top:<span class="hljs-number">230</span>,
        index:<span class="hljs-number">0</span>,
        backgroundColor:<span class="hljs-string">'#A9ACB6'</span>,
        height:<span class="hljs-number">40</span>,
        left:<span class="hljs-number">180</span>,
        width:<span class="hljs-number">100</span>

    });
    win.add(distance_tabbar);


    <span class="hljs-keyword">var</span> weather_view=Titanium.UI.createView({
        top:<span class="hljs-number">320</span>,
        height:<span class="hljs-number">40</span>,
        width:<span class="hljs-number">300</span>,
        <span class="hljs-comment">//backgroundColor:'black'</span>
    });


    <span class="hljs-keyword">var</span> weather_image = Titanium.UI.createImageView({image:<span class="hljs-string">'../images/weather_view.png'</span>,top:-<span class="hljs-number">18</span>});
    weather_view.add(weather_image);

    <span class="hljs-keyword">var</span> arrow_image = Titanium.UI.createImageView({image:<span class="hljs-string">'../images/arrow.png'</span>,top:<span class="hljs-number">18</span>,left:<span class="hljs-number">265</span>,height:<span class="hljs-number">20</span>,width:<span class="hljs-number">20</span>});
    weather_image.add(arrow_image);

    <span class="hljs-keyword">var</span> label_for_weatherupdate=Titanium.UI.createLabel({
        text:<span class="hljs-string">"Weather Update"</span>,
        font:{fontWeight:<span class="hljs-string">'bold'</span>,fontSize:<span class="hljs-number">16</span>},
        top:-<span class="hljs-number">18</span>,
        left:<span class="hljs-number">12</span>,

    });
    weather_view.add(label_for_weatherupdate);

    <span class="hljs-keyword">var</span> label_for_every=Titanium.UI.createLabel({
        text:<span class="hljs-string">"Every"</span>,
        font:{fontWeight:<span class="hljs-string">'normal'</span>,fontSize:<span class="hljs-number">16</span>},
        top:-<span class="hljs-number">18</span>,
        left:<span class="hljs-number">150</span>,

    });
    weather_view.add(label_for_every);

    <span class="hljs-keyword">var</span> picker_value= Titanium.UI.createTextField({
        font:{fontWeight:<span class="hljs-string">'normal'</span>,fontSize:<span class="hljs-number">16</span>},
        top:-<span class="hljs-number">18</span>,
        left:<span class="hljs-number">200</span>,
        enabled : <span class="hljs-literal">false</span>,
        value:<span class="hljs-string">'60 Miles'</span>


    });
    weather_view.add(picker_value);

    win.add(weather_view);



    <span class="hljs-keyword">var</span> picker_view = Titanium.UI.createView({
        height:<span class="hljs-number">251</span>,
        bottom:-<span class="hljs-number">251</span>
    });

        <span class="hljs-keyword">var</span> picker = Titanium.UI.createPicker({

        top:<span class="hljs-number">43</span>
        });

        <span class="hljs-keyword">var</span> cancel =  Titanium.UI.createButton({
        title:<span class="hljs-string">'Cancel'</span>,
        backgroundColor: <span class="hljs-string">'black'</span>,
        style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED
        });


        <span class="hljs-keyword">var</span> done =  Titanium.UI.createButton({
        title:<span class="hljs-string">'Done'</span>,
        backgroundColor:<span class="hljs-string">'black'</span>,
        style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED
        });


        <span class="hljs-keyword">var</span> spacer =  Titanium.UI.createButton({
        backgroundColor:<span class="hljs-string">'black'</span>,
        systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
        });


        <span class="hljs-keyword">var</span> toolbar =  Titanium.UI.createToolbar({
        top:<span class="hljs-number">0</span>,
        barColor:<span class="hljs-string">'#A9ACB6'</span>,
        items:[cancel,spacer,done]
        });





           <span class="hljs-keyword">var</span> column1 = Ti.UI.createPickerColumn({opacity:<span class="hljs-number">0</span>});
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'20'</span>}));
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'40'</span>}));
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'60'</span>}));
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'80'</span>}));
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'100'</span>}));
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'120'</span>}));
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'140'</span>}));
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'160'</span>}));
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'180'</span>}));
        column1.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'200'</span>}));

        <span class="hljs-keyword">var</span> column2 = Ti.UI.createPickerColumn();
        column2.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'Miles'</span>}));
        column2.addRow(Ti.UI.createPickerRow({title:<span class="hljs-string">'Km'</span>}));


        picker.add([column1,column2]);


        picker.selectionIndicator=<span class="hljs-literal">true</span>;



        <span class="hljs-comment">//Add picker to the picker_view</span>
        picker_view.add(picker);
        <span class="hljs-keyword">var</span> slide_in =  Titanium.UI.createAnimation({bottom:<span class="hljs-number">0</span>});
        <span class="hljs-keyword">var</span> slide_out =  Titanium.UI.createAnimation({bottom:-<span class="hljs-number">251</span>});

        picker_view.add(toolbar);
        win.add(picker_view);

        label_for_every.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        picker_view.animate(slide_in);

        });

        done.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            picker_view.animate(slide_out);
            picker_value.value=picker.getSelectedRow(<span class="hljs-number">0</span>).title + <span class="hljs-string">" "</span> + picker.getSelectedRow(<span class="hljs-number">1</span>).title ;
        });

        cancel.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            picker_view.animate(slide_out);
            picker_value.value=<span class="hljs-string">" 60 Miles"</span>
        });

        tempreture_tabbar.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{

            <span class="hljs-keyword">if</span>(tempreture_tabbar.index==<span class="hljs-number">1</span>)

            {
                Titanium.App.fireEvent(<span class="hljs-string">'app:clicked'</span>,{
                tempreture_flag:<span class="hljs-literal">false</span>
                });
            }
            <span class="hljs-keyword">else</span>{
                tempreture_flag:<span class="hljs-literal">true</span>
            }
        });
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 8:14:19 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>setting.js file</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win=Titanium.UI.currentWindow;


<span class="hljs-keyword">var</span> tempreture_tabbar = Titanium.UI.createTabbedBar({
        labels:[<span class="hljs-string">'°F'</span>, <span class="hljs-string">'°C'</span>],
        top:<span class="hljs-number">230</span>,
        <span class="hljs-comment">//index:0,</span>
        backgroundColor:<span class="hljs-string">'#A9ACB6'</span>,
        height:<span class="hljs-number">40</span>,
        left:<span class="hljs-number">28</span>,
        width:<span class="hljs-number">80</span>

    });
    win.add(tempreture_tabbar);

tempreture_tabbar.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{

            <span class="hljs-keyword">if</span>(tempreture_tabbar.index==<span class="hljs-number">1</span>)

            {
                Titanium.App.fireEvent(<span class="hljs-string">'app:clicked'</span>,{
                tempreture_flag:<span class="hljs-literal">false</span>
                });
            }
            <span class="hljs-keyword">else</span>{
                tempreture_flag:<span class="hljs-literal">true</span>
            }
        });
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 8:16:24 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>first, when declare settings_window, add tempreture_flag as a custom variable</p>
<pre><code class="hljs">      <span class="hljs-keyword">var</span> setting_window=Titanium.UI.createWindow({
            url:<span class="hljs-string">'setting.js'</span>,
            title:<span class="hljs-string">'Settings'</span>,
            top:<span class="hljs-number">0</span>,
            backgroundColor:<span class="hljs-string">'CCC'</span>,
         temp_flag:tempreture_flag <span class="hljs-comment">//add this</span>
      });
</code></pre><p>now, in settings.js, recover the custom var and use to initialize the tabbedVar</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win=Titanium.UI.currentWindow;

<span class="hljs-keyword">var</span> tempreture_flag = win.temp_flag;

<span class="hljs-keyword">var</span> tempreture_tabbar = Titanium.UI.createTabbedBar({
        <span class="hljs-attribute">labels</span>:[<span class="hljs-string">'°F'</span>, <span class="hljs-string">'°C'</span>],
        <span class="hljs-attribute">top</span>:<span class="hljs-number">230</span>,
        <span class="hljs-pi">//index:0,
        backgroundColor:'<span class="hljs-comment">#A9ACB6',</span>
        height:40,
        left:28,
        width:80,
        index:tempreture_flag ? 1:0 //i</span>f tempreture_flag <span class="hljs-keyword">is</span> <span class="hljs-literal">true</span>, select button <span class="hljs-number">1</span>, <span class="hljs-keyword">else</span> select button <span class="hljs-number">0</span>

    });
    win.add(tempreture_tabbar);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 8:43:25 am">August 22nd 2011</span>
											by <span class='authorname'>Javier Rayon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i did as you said but nothing changed…</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 8:54:28 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I think there is a problem with global scope of the variable tempreture_flag in the first file . i have declared it in the global scope , thats whhy the flag becomes true after every execution..</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 8:57:55 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Two more things. First, not sure why you do tempreture_flag=true here</p>
<pre><code class="hljs">        xhr.onload = function()
        {

            var doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
            var current = doc.getElementsByTagName(<span class="hljs-string">"current_conditions"</span>);
            label1.text=<span class="hljs-string">"|"</span>+ <span class="hljs-string">" "</span>+current.item(<span class="hljs-number">0</span>).getElementsByTagName(<span class="hljs-string">"condition"</span>).item(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"data"</span>);
            alert(tempreture_flag);
            <span class="hljs-keyword">if</span>(tempreture_flag==<span class="hljs-literal">false</span>){
                label2.text=current.item(<span class="hljs-number">0</span>).getElementsByTagName(<span class="hljs-string">"temp_c"</span>).item(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"data"</span>)+<span class="hljs-string">"°C"</span>;
            }
            <span class="hljs-keyword">else</span>{
                label2.text=current.item(<span class="hljs-number">0</span>).getElementsByTagName(<span class="hljs-string">"temp_f"</span>).item(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"data"</span>)+<span class="hljs-string">"°F"</span>;
            }

            image.image=<span class="hljs-string">"http://www.google.com"</span>+current.item(<span class="hljs-number">0</span>).getElementsByTagName(<span class="hljs-string">"icon"</span>).item(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"data"</span>);
            tempreture_flag=<span class="hljs-literal">true</span>; <span class="hljs-comment">//WHY??</span>
        };
</code></pre><p>second one, fix settings.js to fire event in both cases. Appart of this my conditional sentence was wrong (now I see that index=1 must be in case tempreture_flag is false)</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> win=Titanium.UI.currentWindow;

<span class="hljs-keyword">var</span> tempreture_flag = win.temp_flag;

<span class="hljs-keyword">var</span> tempreture_tabbar = Titanium.UI.createTabbedBar({
        labels:[<span class="hljs-string">'°F'</span>, <span class="hljs-string">'°C'</span>],
        top:<span class="hljs-number">230</span>,
        <span class="hljs-comment">//index:0,</span>
        backgroundColor:<span class="hljs-string">'#A9ACB6'</span>,
        height:<span class="hljs-number">40</span>,
        left:<span class="hljs-number">28</span>,
        width:<span class="hljs-number">80</span>,
        index:tempreture_flag ? <span class="hljs-number">0</span>:<span class="hljs-number">1</span> <span class="hljs-comment">//if tempreture_flag is true, select button 0, else select button 1</span>

    });
    win.add(tempreture_tabbar);

tempreture_tabbar.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  Titanium.App.fireEvent(<span class="hljs-string">'app:clicked'</span>,{
       tempreture_flag:tempreture_tabbar.index==<span class="hljs-number">0</span> 
   });
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 9:12:37 am">August 22nd 2011</span>
											by <span class='authorname'>Javier Rayon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>yes you are right second tempreture_flag is wrong…just checking out what u said…just a minute please…</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 9:21:52 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Javier i am having one problem here the changes you suggested is working as it should be but when i change to celcius and hit the search it is showing me the tempreture in celcius but when i again go back to setting page it shows , that the fahrenheit button is selected !!!!! And then if i want to select farenheit i have to again select the celcius and then farenheit.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 9:32:07 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>so, I did right first time… :) Change this line in tempreture_tabbar creation</p>
<p><code>index:tempreture_flag ? 1:0</code></p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 9:35:26 am">August 22nd 2011</span>
											by <span class='authorname'>Javier Rayon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>now everytime i click on the setting button its showing celcius as selected!!!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 9:59:37 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>if i do </p>
<pre><code class="hljs">index:tempreture_flag ? <span class="hljs-number">0</span>:<span class="hljs-number">1</span>
</code></pre><p>the fahrenheit button is selected.!!!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2011, 11:01:23 am">August 22nd 2011</span>
											by <span class='authorname'>mathew orleans</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-217101">
				
						<section>
							<p>Consider using the Tweetanium structure, that will unify your execution context (read <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;122521&#x2F;learning-more-about-titanium---a-reading-list">A reading list</a>).</p>
<p>You can also consider saving them as <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.App.Properties-module">properties</a>.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 22nd 2011, 6:10:22 am">August 22nd 2011</span>
								by <span class='authorname'>J Alammar</span><br>
								<a class="icon-bg icon-link" href="question/124567/make-a-setting-page-for-application#answer-217101" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
