<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Calculate apps density pixel width &amp; height using Titanium.Platform.DisplayCaps.dpi? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Calculate apps density pixel width &amp; height using Titanium.Platform.DisplayCaps.dpi?</h1>
		</header>
		<section>
			<p>When getting the height and width of the application using: Titanium.Platform.DisplayCaps.platformWidth&#x2F;platformHeight it returns the values in pixels. My app is using density pixel width&#39;s and height&#39;s so it looks consistent across various devices. Using pixel values results in unexpected layout.</p>
<p>Is it possible to caclulate the density pixel width &amp; height using the Titanium.Platform.DisplayCaps.dpi value?</p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 8th 2011, 9:07:28 am">September 8th 2011</span>
				by <span class='authorname'>Jimmy Forrester-Fellowes</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>density</span></li>
					
						<li><span class='tagname'>density pixels</span></li>
					
						<li><span class='tagname'>displaycaps</span></li>
					
						<li><span class='tagname'>dpi</span></li>
					
						<li><span class='tagname'>resolutions</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>3</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-218425">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Jimmy,  here are the functions for converting pixels to DPs and vice versa:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">PixelsToDPUnits</span><span class="hljs-params">(ThePixels)</span>
</span>{
  <span class="hljs-keyword">return</span> (ThePixels / (Titanium.Platform.displayCaps.dpi / <span class="hljs-number">160</span>));
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DPUnitsToPixels</span><span class="hljs-params">(TheDPUnits)</span>
</span>{
  <span class="hljs-keyword">return</span> (TheDPUnits * (Titanium.Platform.displayCaps.dpi / <span class="hljs-number">160</span>));
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 8th 2011, 11:22:01 am">September 8th 2011</span>
								by <span class='authorname'>Shawn Lipscomb</span><br>
								<a class="icon-bg icon-link" href="../../question/125317/calculate-apps-density-pixel-width--height-using-titaniumplatformdisplaycapsdpi.html#answer-218425" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Shawn - that works a treat</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 8th 2011, 3:07:28 pm">September 8th 2011</span>
											by <span class='authorname'>Jimmy Forrester-Fellowes</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanks~~  solve a hard problem for me..</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2012, 6:17:26 am">February 13th 2012</span>
											by <span class='authorname'>louis sherren</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Are the 160 used within the calculation the same for HiRes and LoRes screens?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 14th 2012, 1:59:54 pm">February 14th 2012</span>
											by <span class='authorname'>Matthias Fliegner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Matthias, yes, the 160 is a constant (it&#39;s the dpi of &quot;standard&quot; devices, which is where DP units are equal to actual units).  The Titanium.Platform.displayCaps.dpi is what changes between devices.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 14th 2012, 2:39:24 pm">February 14th 2012</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for both functions :) Just what I needed for a project where I need to width, height, top and bottom values of view elements to calculate animations and positions (doen&#39;t work with &#39;dp&#39; values)</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 14th 2012, 8:18:55 pm">April 14th 2012</span>
											by <span class='authorname'>Marco Schierhorn</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanks, thats works :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 14th 2014, 1:18:55 pm">August 14th 2014</span>
											by <span class='authorname'>Jibran Khan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Titanium returns wrong dpi value for Samsung galaxy s4 and HTC one max. How to handle it?</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 29th 2014, 7:22:15 am">December 29th 2014</span>
											by <span class='authorname'>Namrata Bibekar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This is Great Answer. Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 21st 2015, 2:06:27 pm">March 21st 2015</span>
											by <span class='authorname'>Nabeel  Munawar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Works fine!!! Thanks a lot!!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2015, 10:35:23 pm">August 22nd 2015</span>
											by <span class='authorname'>Pedro Brasileiro</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>38</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-244567">
				
						<section>
							<p>Please be careful people,</p>
<p>Shawn&#39;s answer is wrong. It will seem to work perfectly for iPhone and Android, but then it will fail for the older iPads.</p>
<p>The reason is that the reference point he has taken for converting between density independent pixels and real pixels (160) is not in fact universal. If you read the docs <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Titanium+2.0+Layout+Changes">here</a>, you will find that there is no universal reference point for density independent pixels. On android the reference point is indeed 160, but for iPhone it varies with device.</p>
<p>Quoting from the docs:<br>&quot;On iOS, a DIP corresponds to one pixel on a non-Retina display, which is 163DPI for iPhone&#x2F;iPod touch and 132DPI for the iPad. A DIP corresponds to 2 pixels of width or height on a Retina display.&quot;</p>
<p>So the functions need to include some kind of check based on the device and the value of <code>Titanium.Platform.displayCaps.dpi</code></p>
<p>A quick work around would be:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">PixelsToDPUnits</span><span class="hljs-params">(ThePixels)</span>
</span>{
    <span class="hljs-keyword">if</span> ( Titanium.Platform.displayCaps.dpi &gt; <span class="hljs-number">160</span> )
          <span class="hljs-keyword">return</span> (ThePixels / (Titanium.Platform.displayCaps.dpi / <span class="hljs-number">160</span>));
    <span class="hljs-keyword">else</span> 
        <span class="hljs-keyword">return</span> ThePixels;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DPUnitsToPixels</span><span class="hljs-params">(TheDPUnits)</span>
</span>{
    <span class="hljs-keyword">if</span> ( Titanium.Platform.displayCaps.dpi &gt; <span class="hljs-number">160</span> )
            <span class="hljs-keyword">return</span> (TheDPUnits * (Titanium.Platform.displayCaps.dpi / <span class="hljs-number">160</span>));
    <span class="hljs-keyword">else</span> 
        <span class="hljs-keyword">return</span> TheDPUnits;
}
</code></pre><p>But there could be more exceptions.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 6th 2012, 8:53:36 am">August 6th 2012</span>
								by <span class='authorname'>John Hawkins</span><br>
								<a class="icon-bg icon-link" href="../../question/125317/calculate-apps-density-pixel-width--height-using-titaniumplatformdisplaycapsdpi.html#answer-244567" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>John, my answer was not &quot;wrong&quot;…it sounds like maybe it wasn&#39;t comprehensive enough to cover older iPads, but iPad wasn&#39;t even on my radar 11 months ago when I gave that answer.  And to be clear, the only time that 132dpi is relevant is when you are truly writing an iPad app…not when you are running an iPhone app on an iPad.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 6th 2012, 10:30:48 am">August 6th 2012</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok Shawn, </p>
<p>Perhaps saying it was &#39;Wrong&#39; was a little harsh. I will concede that it was merely an incomplete answer. However, nothing in the original question or your answer indicates that this is a phone only piece of code, hence it caused me a great deal of frustration until I read the documentation on DPI units in detail.</p>
<p>I hope that my answer prevents other people going through the frustration I went through.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 6th 2012, 11:27:44 am">August 6th 2012</span>
											by <span class='authorname'>John Hawkins</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>17</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-218409">
				
						<section>
							<p>Check out this <a href="http:&#x2F;&#x2F;www.ehow.com&#x2F;how_7794090_calculate-pixel-density.html">link</a>.<br>It will tell you how density is calculated.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 8th 2011, 9:19:27 am">September 8th 2011</span>
								by <span class='authorname'>Marco Ferreira</span><br>
								<a class="icon-bg icon-link" href="../../question/125317/calculate-apps-density-pixel-width--height-using-titaniumplatformdisplaycapsdpi.html#answer-218409" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for in the info Marco</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 8th 2011, 3:08:18 pm">September 8th 2011</span>
											by <span class='authorname'>Jimmy Forrester-Fellowes</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-254156">
				
						<section>
							<p>According to this <a href="https:&#x2F;&#x2F;developer.android.com&#x2F;guide&#x2F;practices&#x2F;screens_support.html#density-independence">Android Density Independece</a> the following is a better version of all the above code -for any future use… :)</p>
<pre><code class="hljs">function dipUnitsToPixels(dipUnits)
{
  var DE<span class="hljs-built_in">NSITY_SMALL_LDPI</span> = <span class="hljs-number">120</span>;
var DE<span class="hljs-built_in">NSITY_BASELINE_MDPI</span> = <span class="hljs-number">160</span>;
var DE<span class="hljs-built_in">NSITY_HIGH_HDPI</span> = <span class="hljs-number">240</span>;
var DE<span class="hljs-built_in">NSITY_EXTRA_HIGH_XHDPI</span> = <span class="hljs-number">320</span>;
var ret;

<span class="hljs-keyword">switch</span> (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span>) {
<span class="hljs-keyword">case</span> DE<span class="hljs-built_in">NSITY_SMALL_LDPI</span>:
ret = (dipUnits * (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span> / DE<span class="hljs-built_in">NSITY_SMALL_LDPI</span>));
<span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> DE<span class="hljs-built_in">NSITY_BASELINE_MDPI</span>:
ret = (dipUnits * (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span> / DE<span class="hljs-built_in">NSITY_BASELINE_MDPI</span>));
<span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> DE<span class="hljs-built_in">NSITY_HIGH_HDPI</span>:
ret = (dipUnits * (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span> / DE<span class="hljs-built_in">NSITY_HIGH_HDPI</span>));
<span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> DE<span class="hljs-built_in">NSITY_EXTRA_HIGH_XHDPI</span>:
ret = (dipUnits * (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span> / DE<span class="hljs-built_in">NSITY_EXTRA_HIGH_XHDPI</span>));
<span class="hljs-keyword">break</span>;

<span class="hljs-keyword">default</span>:
ret = dipUnits;
}

<span class="hljs-keyword">return</span> ret;
}

function pixelsToDipUnits(pixels)
{
var DE<span class="hljs-built_in">NSITY_SMALL_LDPI</span> = <span class="hljs-number">120</span>;
var DE<span class="hljs-built_in">NSITY_BASELINE_MDPI</span> = <span class="hljs-number">160</span>;
var DE<span class="hljs-built_in">NSITY_HIGH_HDPI</span> = <span class="hljs-number">240</span>;
var DE<span class="hljs-built_in">NSITY_EXTRA_HIGH_XHDPI</span> = <span class="hljs-number">320</span>;
var ret;

<span class="hljs-keyword">switch</span> (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span>) {
<span class="hljs-keyword">case</span> DE<span class="hljs-built_in">NSITY_SMALL_LDPI</span>:
ret = (dipUnits / (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span> / DE<span class="hljs-built_in">NSITY_SMALL_LDPI</span>));
<span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> DE<span class="hljs-built_in">NSITY_BASELINE_MDPI</span>:
ret = (dipUnits / (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span> / DE<span class="hljs-built_in">NSITY_BASELINE_MDPI</span>));
<span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> DE<span class="hljs-built_in">NSITY_HIGH_HDPI</span>:
ret = (dipUnits / (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span> / DE<span class="hljs-built_in">NSITY_HIGH_HDPI</span>));
<span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> DE<span class="hljs-built_in">NSITY_EXTRA_HIGH_XHDPI</span>:
ret = (dipUnits / (Ti<span class="hljs-variable">.Platform</span><span class="hljs-variable">.displayCaps</span><span class="hljs-variable">.dpi</span> / DE<span class="hljs-built_in">NSITY_EXTRA_HIGH_XHDPI</span>));
<span class="hljs-keyword">break</span>;

<span class="hljs-keyword">default</span>:
ret = dipUnits;
}

<span class="hljs-keyword">return</span> ret;
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 9th 2013, 12:10:03 pm">January 9th 2013</span>
								by <span class='authorname'>Marcelino Jorge Romero</span><br>
								<a class="icon-bg icon-link" href="../../question/125317/calculate-apps-density-pixel-width--height-using-titaniumplatformdisplaycapsdpi.html#answer-254156" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Sorry, but there are three problems with Jorge&#39;s code.</p>
<ol>
<li>All of those formulas evaluate to <code>dipUnits</code>, because all of the divisions evaluate to 1.</li>
<li>The switch statement is an unnecessary complexity…they all evaluate to <code>ret = (dipUnits * (Ti.Platform.displayCaps.dpi &amp;#x2F; Ti.Platform.displayCaps.dpi)</code>.</li>
<li>Even if the formulas were corrected (<code>ret = (dipUnits * (Ti.Platform.displayCaps.dpi &amp;#x2F; DENSITY_BASELINE_MDPI)</code>), putting them in a switch statement is future-limiting, because when another density comes out, the switch statement doesn&#39;t allow for it.</li>
</ol>
</p>
										<div class="author">
											&mdash; commented <span title="January 9th 2013, 12:19:58 pm">January 9th 2013</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>omg yes you are right Shawn, what an error! My apologies…! Unfortunately i can&#39;t delete or modify the post. :( I hope none will get confused from my post.<br>I didn&#39;t understand the purpose of the function i guess, once again my apologies.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 9th 2013, 12:58:16 pm">January 9th 2013</span>
											by <span class='authorname'>Marcelino Jorge Romero</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-7</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
