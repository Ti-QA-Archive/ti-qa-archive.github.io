<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Too Deep Recursion » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Too Deep Recursion</h1>
		</header>
		<section>
			<p>I am trying to get debugging working for the first time in Ti Studio using the 1.7.1 release and Android. When I launch my app (which works fine when run without debugging), it force closes on this error:</p>
<pre><code class="hljs"><span class="hljs-keyword">D</span>/TiDebugSession( 1120): (Thread-11) [9,2100] rcvd request: 71*1308851347022*breakpoint*create*<span class="hljs-keyword">app</span>:/views/vehicle/details.js*37*0*0**1
<span class="hljs-keyword">D</span>/TiFastDev( 1120): (Thread-11) [26,2126] sent tokens successfully
I/dalvikvm( 1120): threadid=10: <span class="hljs-keyword">stack</span> overflow <span class="hljs-keyword">on</span> call to Ljava/lang/Character;.isJavaIdentifierStart:ZI
I/dalvikvm( 1120):   method requires 36+20+4=60 bytes, fp is 0x430cc338 (56 left)
I/dalvikvm( 1120):   expanding <span class="hljs-keyword">stack</span> end (0x430cc300 to 0x430cc000)
I/dalvikvm( 1120): Shrank <span class="hljs-keyword">stack</span> (to 0x430cc300, curFrame is 0x430cc824)
<span class="hljs-keyword">D</span>/dalvikvm( 1120): GC_FOR_MALLOC freed 6130 objects / 467520 bytes <span class="hljs-keyword">in</span> 108ms
W/dalvikvm( 1120): threadid=10: thread exiting with uncaught exception (group=0x4001d800)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120): (Thread-11) [635,2761] Sending event: exception <span class="hljs-keyword">on</span> thread: Thread-11 msg:org.mozilla.javascript.EvaluatorException: Too deep recursion <span class="hljs-keyword">while</span> parsing (<span class="hljs-keyword">file</span>:<span class="hljs-comment">///android_asset/Resources/views/vehicle/details.js#289); Titanium 1.7.1,2011/06/21 14:28,293a6d</span>
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120): org.mozilla.javascript.EvaluatorException: Too deep recursion <span class="hljs-keyword">while</span> parsing (<span class="hljs-keyword">file</span>:<span class="hljs-comment">///android_asset/Resources/views/vehicle/details.js#289)</span>
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.DefaultErrorReporter.runtimeError(DefaultErrorReporter.java:109)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.Context.reportRuntimeError(Context.java:945)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.Parser.<span class="hljs-keyword">parse</span>(Parser.java:587)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.Parser.<span class="hljs-keyword">parse</span>(Parser.java:506)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.Context.compileImpl(Context.java:2401)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.Context.compileString(Context.java:1367)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.Context.compileString(Context.java:1356)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.tools.debugger.Dim<span class="hljs-label">$DimIProxy</span>.<span class="hljs-keyword">run</span>(Dim.java:1027)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.Context.call(Context.java:521)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.ContextFactory.call(ContextFactory.java:535)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.tools.debugger.Dim<span class="hljs-label">$DimIProxy</span>.withContext(Dim.java:1078)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.tools.debugger.Dim<span class="hljs-label">$DimIProxy</span>.access<span class="hljs-label">$3</span>(Dim.java:1077)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at org.mozilla.javascript.tools.debugger.Dim.compileScript(Dim.java:667)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at ti.modules.titanium.debug.DebugServer.c(Unknown Source)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at ti.modules.titanium.debug.DebugServer.b(Unknown Source)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at ti.modules.titanium.debug.handlers.a.a(Unknown Source)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at ti.modules.titanium.debug.<span class="hljs-keyword">h</span>.b(Unknown Source)
<span class="hljs-keyword">E</span>/TiUncaughtHandler( 1120):     at ti.modules.titanium.debug.<span class="hljs-keyword">h</span>.<span class="hljs-keyword">run</span>(Unknown Source)
</code></pre><p>I added this to my tiapp.xml but it had no effect:</p>
<pre><code class="hljs">&lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"ti.android.threadstacksize"</span> type=<span class="hljs-string">"int"</span>&gt;<span class="hljs-number">327680</span>&lt;/<span class="hljs-keyword">property</span>&gt;
</code></pre><p>Was anyone else able to get debugging working? What am I missing?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 23rd 2011, 3:53:26 pm">June 23rd 2011</span>
				by <span class='authorname'>Justin Toth</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>debugging</span></li>
					
						<li><span class='tagname'>recursion</span></li>
					
						<li><span class='tagname'>stackoverflow</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>7</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>7 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-211207">
				
						<section>
							<p>Now that you&#39;ve added the stack size property, run a clean on your project then rebuild.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 23rd 2011, 4:27:32 pm">June 23rd 2011</span>
								by <span class='authorname'>Anthony Decena</span><br>
								<a class="icon-bg icon-link" href="question/121507/too-deep-recursion#answer-211207" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Anthony - I don&#39;t see any clean option within Ti Studio, however I did try clearing out the build&#x2F;android folder if that&#39;s what you mean. It has no effect, I still get the recursion error.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2011, 4:42:08 pm">June 23rd 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The clean option is under the &quot;Project&quot; main menu. Running it does the same as clearing that android build folder, however, just to cover all bases, try using that option and building again.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2011, 4:49:17 pm">June 23rd 2011</span>
											by <span class='authorname'>Anthony Decena</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Anthony - Same issue after clean…</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2011, 4:59:27 pm">June 23rd 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211209">
				
						<section>
							<p>@Anthony - Same issue after clean…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 23rd 2011, 4:59:12 pm">June 23rd 2011</span>
								by <span class='authorname'>Justin Toth</span><br>
								<a class="icon-bg icon-link" href="question/121507/too-deep-recursion#answer-211209" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211211">
				
						<section>
							<p>Seems &#39;ti.android.threadstacksize&#39; should be 32768 rather than 327680 !?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 23rd 2011, 5:48:08 pm">June 23rd 2011</span>
								by <span class='authorname'>Pascal Burel</span><br>
								<a class="icon-bg icon-link" href="question/121507/too-deep-recursion#answer-211211" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I tried both and they give the same error.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2011, 5:48:57 pm">June 23rd 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211212">
				
						<section>
							<p>could you post details.js ? for some advice …</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 23rd 2011, 5:51:57 pm">June 23rd 2011</span>
								by <span class='authorname'>Pascal Burel</span><br>
								<a class="icon-bg icon-link" href="question/121507/too-deep-recursion#answer-211212" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211213">
				
						<section>
							<p>Here is details.js, however there are a bunch of shared controls so this isn&#39;t all of the code. Keep in mind that running it normally on the simulator or on the device works fine, only debugging gives the recursion error so it makes me think it doesn&#39;t have to do with my code at all.</p>
<p>http:&#x2F;&#x2F;pastebin.com&#x2F;muzqYC25</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 23rd 2011, 5:55:01 pm">June 23rd 2011</span>
								by <span class='authorname'>Justin Toth</span><br>
								<a class="icon-bg icon-link" href="question/121507/too-deep-recursion#answer-211213" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211214">
				
						<section>
							<p>Justin</p>
<p>Please take note of this advice in the docs: <a href="http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;JavaScript+Best+Practices#JavaScriptBestPractices-Avoiddeepnesting">Avoid deep nesting</a></p>
<p>Setting <code>threadstacksize</code> to very large values is likely to cause problems; 128K or lower is recommended.</p>
<p>Hope this helps</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 23rd 2011, 6:13:07 pm">June 23rd 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/121507/too-deep-recursion#answer-211214" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hey, I tried the recommended value of 32768 and it still gives the same recursion error when trying to debug.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2011, 6:33:53 pm">June 23rd 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Justin, indeed, it is important to ensure that <code>threadstacksize</code> does not exceed the recommended value. However, to avoid deep recursion issues specifically, you should follow the advice in the link I provided.</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 24th 2011, 8:13:12 am">June 24th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I don&#39;t have &quot;several levels of nested loops or recursive code&quot;, I don&#39;t even use recursion in this app. If it was an issue in my code then it would happen when not debugging too. The fact that it only happens when trying to debug implies an issue with the debugging feature.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 24th 2011, 11:06:44 am">June 24th 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I should also mention that I&#39;ve seen other posts in this forum about seeing this issue when they were using 2-3 levels of subdirectories in their app, which is the case for me as well.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 24th 2011, 11:07:38 am">June 24th 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211286">
				
						<section>
							<p>Are you using the MYAPP.os funciton&#x2F;macro from the Tweetanium app?  I had been using it in my mediaplayer file, but began getting too deep recursion errors on android.  Once I shopped out to a playerview_ios.js and a playerview_android.js, I was fine.  Check the file you&#39;re getting the error from and consider splitting the android and ios logic up into separate files.  At Ti.include time, conditionally include ONLY the proper file.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 24th 2011, 11:40:54 am">June 24th 2011</span>
								by <span class='authorname'>Anthony Sosso</span><br>
								<a class="icon-bg icon-link" href="question/121507/too-deep-recursion#answer-211286" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;m not using that. The file that it says has the recursion issue does have 9 include statements in it, however all 9 are needed in both Android andiOs so there&#39;s nothing I can do to slim that down.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 24th 2011, 11:46:40 am">June 24th 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
