<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Need Help with JSON issue » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Need Help with JSON issue</h1>
		</header>
		<section>
			<p>I&#39;m stumped. </p>
<p>When a user logs into my app successfully, I store a Profile object in the settings like this, and this is the return value.<br>{&quot;id&quot;:&quot;7&quot;,&quot;email&quot;:&quot;email@yahoo.com&quot;,&quot;first_name&quot;:&quot;Test&quot;,&quot;last_name&quot;:&quot;User&quot;,<br>&quot;group_id&quot;:&quot;0&quot;,&quot;screen_name&quot;:&quot;testie&quot;,&quot;profile&quot;:[],&quot;member_since&quot;:&quot;09-19-2011&quot;,&quot;social&quot;:&quot;&quot;}</p>
<pre><code class="hljs">Ti.App.Properties.setString(<span class="hljs-string">'profile'</span>,<span class="hljs-built_in">JSON</span>.stringify(returnvar));
</code></pre><p>That&#39;s all fine and dandy, and in a few file I get the values like this. </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> p = <span class="hljs-built_in">JSON</span>.parse(Ti.App.Properties.getString(<span class="hljs-string">'profile'</span>));
</code></pre><p>BUT there are times when I try to access by executing the above code and I get undefined, when I try to do something like  </p>
<pre><code class="hljs"><span class="hljs-tag">p</span>.email
</code></pre><p>Does anybody see anything wrong with this JSON string? I use this approach for several things, but the particular string is causing me issues.</p>
<p>thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 2nd 2012, 5:38:49 pm">August 2nd 2012</span>
				by <span class='authorname'>matt s</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>json</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-244338">
				
						<section>
							<p>put some </p>
<pre><code class="hljs">Ti<span class="hljs-class">.API</span><span class="hljs-class">.info</span>(p)
</code></pre><p>to see what it gets from properties, assuming it stores it ok first.</p>
<p>separate every operation u make and put an  info to see what is going on after each of them.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 2nd 2012, 5:59:59 pm">August 2nd 2012</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/140491/need-help-with-json-issue#answer-244338" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i do that  and I get {&quot;id&quot;:&quot;7&quot;,&quot;email&quot;:&quot;email@yahoo.com&quot;,&quot;first_name&quot;:&quot;Test&quot;,&quot;last_name&quot;:&quot;User&quot;, &quot;group_id&quot;:&quot;0&quot;,&quot;screen_name&quot;:&quot;testie&quot;,&quot;profile&quot;:[],&quot;member_since&quot;:&quot;09-19-2011&quot;,&quot;social&quot;:&quot;&quot;}</p>
<p>but when I do p.email i get undefined.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 2nd 2012, 6:16:21 pm">August 2nd 2012</span>
											by <span class='authorname'>matt s</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-244341">
				
						<section>
							<p>Hi Matt</p>
<p>I have checked your JSON returnvar in <a href="JSONlint.com">JSONlint.com</a> and you have not issues.  SO I duplicated your code and made my own returnvar from your example;</p>
<p>It works perfect every time - I get &#39;email@yahoo.com&#39; in the alert.</p>
<p>So either you have a problem before the returnvar is processed or it is one of those times to use Projects &gt; Clean.  Because your code looks solid.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> returnvar = {
    <span class="hljs-string">"id"</span>:<span class="hljs-string">"7"</span>,
    <span class="hljs-string">"email"</span>:<span class="hljs-string">"email@yahoo.com"</span>,
    <span class="hljs-string">"first_name"</span>: <span class="hljs-string">"Test"</span>,
    <span class="hljs-string">"last_name"</span>:<span class="hljs-string">"User"</span>, 
    <span class="hljs-string">"group_id"</span>:<span class="hljs-string">"0"</span>,
    <span class="hljs-string">"screen_name"</span>:<span class="hljs-string">"testie"</span>,
    <span class="hljs-string">"profile"</span>:[],
    <span class="hljs-string">"member_since"</span>: <span class="hljs-string">"09-19-2011"</span>
    ,<span class="hljs-string">"social"</span>:<span class="hljs-string">""</span>
};
Ti.App.Properties.setString(<span class="hljs-string">'profile'</span>,<span class="hljs-built_in">JSON</span>.stringify(returnvar));
<span class="hljs-keyword">var</span> p = <span class="hljs-built_in">JSON</span>.parse(Ti.App.Properties.getString(<span class="hljs-string">'profile'</span>));
alert(p.email);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 2nd 2012, 6:32:21 pm">August 2nd 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/140491/need-help-with-json-issue#answer-244341" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>it&#39;s crazy what clean project will do. I guess… when in doubt… kind of like a PC.</p>
<p>thanks all for your help</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 2nd 2012, 11:34:00 pm">August 2nd 2012</span>
											by <span class='authorname'>matt s</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Tell me about it. Do not forget to mark correct answer so others using q&amp;a in future can benefit.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 3rd 2012, 4:10:54 am">August 3rd 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-244344">
				
						<section>
							<p>Just looking at your code, everything looks good. Remember that JSON keys are case sensitive. We use a Coldfusion REST API and unless I specify the key as a string in lowercase, it gets converted to uppercase. This was a headache for me at first. I know you wrote your keys in lower case, but make sure they actually are lower case. p.EMAIL in stead of p.email.</p>
<p>Other than that you code &quot;looks&quot; ok.</p>
<p>You can try:</p>
<pre><code class="hljs">alert<span class="hljs-list">(<span class="hljs-keyword">JSON</span>.parse<span class="hljs-list">(<span class="hljs-keyword">Ti</span>.App.Properties.getString<span class="hljs-list">(<span class="hljs-quoted">'profile</span>')</span>)</span>.email)</span><span class="hljs-comment">;</span>
</code></pre><p>just to see if something is happening strange in your assigning of variables or something. Try just alerting out the entire object either like this:</p>
<pre><code class="hljs">alert<span class="hljs-list">(<span class="hljs-keyword">JSON</span>.parse<span class="hljs-list">(<span class="hljs-keyword">Ti</span>.App.Properties.getString<span class="hljs-list">(<span class="hljs-quoted">'profile</span>')</span>)</span>)</span><span class="hljs-comment">;</span>
</code></pre><p>or like this</p>
<pre><code class="hljs">alert<span class="hljs-list">(<span class="hljs-keyword">Ti</span>.App.Properties.getString<span class="hljs-list">(<span class="hljs-quoted">'profile</span>')</span>)</span><span class="hljs-comment">;</span>
</code></pre><p>just to make sure you are indeed storing the value in the properties. Also make sure you are not accidentally clearing or properties in some sort of init function or something. I&#39;ve done that more than once.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 2nd 2012, 6:52:36 pm">August 2nd 2012</span>
								by <span class='authorname'>Lee Bartelme</span><br>
								<a class="icon-bg icon-link" href="question/140491/need-help-with-json-issue#answer-244344" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
