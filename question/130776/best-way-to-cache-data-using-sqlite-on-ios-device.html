<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Best way to cache data using SQLite on iOS device? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Best way to cache data using SQLite on iOS device?</h1>
		</header>
		<section>
			<p>Hello all!</p>
<p>A quick question here, which is hopefully straight forward.</p>
<p>I have a new app in production which requires a one time download of data from an external mySQL database when it first launches.</p>
<p>We want that data to then be imported into a SQLite database and then all calls to the data occur within the app rather than on an external server every time. Mainly to reduce load as the app will be heavily used.</p>
<p>Is anyone aware of any sample code that could do this, and also, what is the best solution?</p>
<p>Do we:</p>
<ol>
<li><p>Pull down a SQL file from the external server and import that into SQLite (is that even possible?)</p>
</li>
<li><p>Parse XML or JSON into the SQLite from the external mySQL database.</p>
</li>
</ol>
<p>Any suggestions or code examples would be greatly appreciated!</p>
<p>Simon</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 17th 2012, 7:55:17 am">January 17th 2012</span>
				by <span class='authorname'>Simon Hume</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>cache</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>json</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-227746">
				
						<section>
							<p>Hi Simon.</p>
<p>I think you can&#39;t just dump MySql database and import it to Sqlite because they are not fully compatible. I would recommend that you use some common format (XML, JSON) and write your own &quot;import&quot; logic (workflow would look something like this: MySql -&gt; export to XML file -&gt; Network service -&gt; XML on device -&gt; import in Sqlite).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 17th 2012, 8:09:27 am">January 17th 2012</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="../../question/130776/best-way-to-cache-data-using-sqlite-on-ios-device.html#answer-227746" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-227757">
				
						<section>
							<p>Ive done this in the past by making the downloadable content a set of SQL INSERT&#x2F;UPDATE statements in a text file. I read the file (line at a time) and execute the statements  with a surrounding BEGIN TRANSACTION &#x2F; COMMIT to ensure integrity - Works fine.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 17th 2012, 8:31:32 am">January 17th 2012</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="../../question/130776/best-way-to-cache-data-using-sqlite-on-ios-device.html#answer-227757" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-227761">
				
						<section>
							<p>Hi Nick, thanks for your answer. Would you have any code snippets I could take a look at? I&#39;ve got the exact process in my head, just putting it into code i&#39;m struggling with. Only some pointers perhaps, I can work the rest out.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 17th 2012, 8:50:49 am">January 17th 2012</span>
								by <span class='authorname'>Simon Hume</span><br>
								<a class="icon-bg icon-link" href="../../question/130776/best-way-to-cache-data-using-sqlite-on-ios-device.html#answer-227761" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>No probs Simon…</p>
<p>Firstly, I hosted my SQL statements in a text file on a Dropbox public folder where I couly then request it over http.  I&#39;m assuming you know how to use XDR to retrieve a file ?</p>
<p>I request the file using XDR and use the <code>responseText</code> property to get the content of the file.</p>
<p>The file is just a CR&#x2F;LF list of the SQL statements I want to execute - eg</p>
<pre><code class="hljs">
<span class="hljs-operator"><span class="hljs-keyword">BEGIN</span> <span class="hljs-keyword">TRANSACTION</span>;</span>

<span class="hljs-operator"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> myTable (col1, col2, col3, col4) <span class="hljs-keyword">values</span> (<span class="hljs-string">'val1'</span>,<span class="hljs-string">'val2'</span>,<span class="hljs-string">'val3'</span>,<span class="hljs-string">'val4'</span>)

...

...

<span class="hljs-keyword">COMMIT</span> <span class="hljs-keyword">TRANSACTION</span>;</span>
</code></pre><p>So I iterate through each line of the content (splitting at the CR&#x2F;LF) and call the <code>execute</code> method on the database object </p>
<p>for each line.</p>
<p>You can issue any sort of DDL&#x2F;DML statement you like so can even alter the structure of the local sqlLite DB.</p>
<p>One thing I also did was to &quot;version&quot; the SQL data I was updating and ensured that every SQL script I created was cummulative so that any version of my App could be updated to the latest version of the DB by just retrieving the latest script.</p>
<p>Hope that helps get you started</p>
<p>Regarda</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 17th 2012, 11:54:47 am">January 17th 2012</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Nick,</p>
<p>Yeah retrieving files is cool, got plenty of that action going on, just not this particular one. That&#39;s a great start, thanks very much for your time!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 17th 2012, 11:57:38 am">January 17th 2012</span>
											by <span class='authorname'>Simon Hume</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-227795">
				
						<section>
							<p>I really like this…  It is perfect in my opinion.</p>
<p>https:&#x2F;&#x2F;github.com&#x2F;guilhermechapiewski&#x2F;titanium-cache</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 17th 2012, 2:32:33 pm">January 17th 2012</span>
								by <span class='authorname'>Paul Nelson</span><br>
								<a class="icon-bg icon-link" href="../../question/130776/best-way-to-cache-data-using-sqlite-on-ios-device.html#answer-227795" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-235436">
				
						<section>
							<p>Simon,</p>
<p>Were you able to accomplish your goal with this? I&#39;m in the same boat and would love to see a code example of how to get this to work.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 6th 2012, 7:37:49 pm">April 6th 2012</span>
								by <span class='authorname'>Kristian Meyer</span><br>
								<a class="icon-bg icon-link" href="../../question/130776/best-way-to-cache-data-using-sqlite-on-ios-device.html#answer-235436" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
