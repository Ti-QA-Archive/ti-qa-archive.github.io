<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android control refresh problem » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android control refresh problem</h1>
		</header>
		<section>
			<p>Application type: mobile<br>Titanium SDK: 2.1.3GA<br>Platform &amp; version: Android 2.3, 4.0</p>
<p>I implemented a simple progress bar showing time counting down.<br>Couple of views are used. outer container view and view for background bar view for inner bar view.<br>It redisplays each seconds.<br>on Android 2.3, it works fine.<br>but onAndroid 4.0, it doesn&#39;t change though time goes. just occasionally change when other view changes.<br>Is there any solution to change it properly.</p>
<p>Have you ever met same situation?<br>Do you have any idea?</p>
<p>Thanks in advance.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 19th 2012, 2:33:54 am">November 19th 2012</span>
				by <span class='authorname'>Sean Ki</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>refresh view control</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>You need to supply the code you are having trouble with so we can try and work out the problem. There are many reasons why such an outcome might occur, including typos - so without code anything we say would be an uneducated guess.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 19th 2012, 5:24:47 am">November 19th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-251324">
				
						<section>
							<p>SOrry<br>Here is my source code.</p>
<pre><code class="hljs">var objTimeProgressOne = {
    <span class="hljs-string">timeProgressBarArea :</span> Titanium.UI.createView({
<span class="hljs-label">        bottom:</span><span class="hljs-number">50</span>, <span class="hljs-comment">// bottomBarPart2? height</span>
<span class="hljs-label">        height:</span><span class="hljs-number">24</span>,
        <span class="hljs-comment">//backgroundColor:'green'</span>
        }),
        <span class="hljs-comment">//@<span class="hljs-doctag">TODO:</span> lblStart and lblEnd will be removed</span>
    <span class="hljs-string">lblStart :</span> Titanium.UI.createLabel({
<span class="hljs-label">        top:</span><span class="hljs-number">1</span>,
<span class="hljs-label">        left:</span><span class="hljs-number">1</span>,
<span class="hljs-label">        text:</span> <span class="hljs-string">'0'</span>,
<span class="hljs-label">        color:</span><span class="hljs-string">'#3987B5'</span>,
<span class="hljs-label">        font:</span>{<span class="hljs-string">fontSize:</span><span class="hljs-number">9</span>, <span class="hljs-string">fontColor:</span><span class="hljs-string">'#3987B5'</span>, <span class="hljs-string">fontWeight:</span><span class="hljs-string">'bold'</span>, <span class="hljs-string">fontFamily:</span><span class="hljs-string">'Arial'</span>}
    }),
    <span class="hljs-string">lblEnd :</span> Titanium.UI.createLabel({
<span class="hljs-label">        top:</span><span class="hljs-number">1</span>,
<span class="hljs-label">        right:</span><span class="hljs-number">1</span>,
<span class="hljs-label">        text:</span> LIMITTIME_FOR_ONE,
<span class="hljs-label">        color:</span><span class="hljs-string">'#3987B5'</span>,
<span class="hljs-label">        font:</span>{<span class="hljs-string">fontSize:</span><span class="hljs-number">9</span>, <span class="hljs-string">fontColor:</span><span class="hljs-string">'#3987B5'</span>, <span class="hljs-string">fontWeight:</span><span class="hljs-string">'bold'</span>, <span class="hljs-string">fontFamily:</span><span class="hljs-string">'Arial'</span>}
    }),
    <span class="hljs-string">timeProgressBar1 :</span> Titanium.UI.createView({
<span class="hljs-label">            backgroundColor:</span><span class="hljs-string">'#663366'</span>,
<span class="hljs-label">            bottom:</span><span class="hljs-number">0</span>,
<span class="hljs-label">            height:</span><span class="hljs-number">12</span>
        }),
    <span class="hljs-string">innerBar :</span> Titanium.UI.createView({
<span class="hljs-label">        backgroundColor:</span><span class="hljs-string">'#3399CC'</span>,
<span class="hljs-label">        left:</span><span class="hljs-number">0</span>,
<span class="hljs-label">        height:</span>Titanium.UI.FILL,
<span class="hljs-label">        width:</span><span class="hljs-string">'100%'</span>
    }),
    <span class="hljs-string">max :</span> <span class="hljs-number">30</span>,
    <span class="hljs-string">init :</span> function (nMax, nValue) {
        <span class="hljs-comment">//this.timeProgressBarArea.add(this.lblStart);</span>
        <span class="hljs-comment">//this.timeProgressBarArea.add(this.lblEnd);            </span>
        <span class="hljs-keyword">this</span>.timeProgressBarArea.add(<span class="hljs-keyword">this</span>.timeProgressBar1);
        <span class="hljs-keyword">this</span>.timeProgressBar1.add(<span class="hljs-keyword">this</span>.innerBar);    
        <span class="hljs-keyword">this</span>.setMax(nMax);
        <span class="hljs-keyword">this</span>.setValue(nValue);    
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.timeProgressBarArea;
    },
    <span class="hljs-string">setMax :</span> function(val) {
        <span class="hljs-keyword">this</span>.max = val;
    },
    <span class="hljs-string">setValue :</span> function(val) {
        var f = val / <span class="hljs-keyword">this</span>.max * <span class="hljs-number">100</span>;
        <span class="hljs-keyword">this</span>.innerBar.setWidth(f + <span class="hljs-string">"%"</span>); <span class="hljs-comment">// changed from 'width =' </span>
    }
}
</code></pre><p>…<br>…<br>–attach to parent view.</p>
<pre><code class="hljs">        bottomBar.add<span class="hljs-comment">(objTimeProgressOne.init(LIMITTIME_FOR_ONE, LIMITTIME_FOR_ONE)</span>); <span class="hljs-comment">//timeProgressBar);</span>
</code></pre><p>–changing progress bar running in the timer function.</p>
<pre><code class="hljs">    this.timerOne = setInterval(function () {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">_this</span>.restsec_all &lt;<span class="hljs-number">0</span>) {
            clearInterval(<span class="hljs-built_in">_this</span>.timerOne); 
            return; <span class="hljs-comment">// ?? ??? ?? ?? OneTimer? ?? ?? , ??? ?? ???, ??? ?? ???.</span>
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">_this</span>.restsec_1 &lt; <span class="hljs-number">0</span>) {
            clearInterval(<span class="hljs-built_in">_this</span>.timerOne);
            <span class="hljs-comment">//openPopWindow(popTimeLimit1); //?? ?? </span>
            objPopTimeOver.openWithText2(<span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'????'</span>
                ,IMAGE_DIR + <span class="hljs-string">'quiz/pop_up_over.jpg'</span>
                ,objSound.sEnd
                , <span class="hljs-number">1000</span> 
                ,function () { <span class="hljs-comment">//?? ??? ?? ??? ???? ?? ??? ?</span>
                    goNextQuestion(); <span class="hljs-comment">// </span>
            });
        } <span class="hljs-keyword">else</span> {
            objTimeProgressOne.setValue(<span class="hljs-built_in">_this</span>.restsec_1);
            <span class="hljs-comment">//restsecLbl.text = "????: "+ restsec_1;</span>
            <span class="hljs-built_in">_this</span>.restsec_1--;
        }
    }, <span class="hljs-number">1000</span>);
</code></pre><p>I hope u can find some clue here. thank you.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 19th 2012, 8:06:40 am">November 19th 2012</span>
								by <span class='authorname'>Sean Ki</span><br>
								<a class="icon-bg icon-link" href="question/144843/android-control-refresh-problem#answer-251324" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
