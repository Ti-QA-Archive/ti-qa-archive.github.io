<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>TableView setData and removing row-controllers problems Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>TableView setData and removing row-controllers problems</h1>
		</header>
		<section>
			<p>Hello everyone,</p>
<p>I have a problem in one of my apps.</p>
<p>Prerequisites:<br>Ti 3.5.0+Alloy</p>
<p>I have a tableview, which I add an array of TableViewRows created via alloy controllers to.<br>Inside the TableViewRow-controller I have setup eventlisteners to simulate a timer which now causes problems. Every 5 seconds the TableView controller fires an event to Ti.App to let every TableViewRow controller update it&#39;s timer.<br>The problem occurs when updating the TableView via setData to update rows, which is done about every minute. The eventlisteners are then executing multiple times, even when I am calling setData([]) before updating it with the array of TableViewRow-Views again.</p>
<p>I know the problem is a memory leak as the controllers doesn&#39;t seem to be removed completely and the event listeners still exist.</p>
<p>But how can I destroy all the TableViewRow controllers including their eventlisteners?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 27th 2015, 3:01:11 pm">January 27th 2015</span>
				by <span class='authorname'>Tobias Reike</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>controllers</span></li>
					
						<li><span class='tagname'>eventlistener</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
						<li><span class='tagname'>tableviewrow</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-285433">
				
						<section>
							<p>Don&#39;t use app-level events like this. You&#39;re creating, then not removing, many references to objects which then cannot be garbage collected. You could do Ti.App.removeEventListener() for every row (using the exact same function signature) to remove those event listeners before removing&#x2F;destroying the row objects. But much better would be to come up with a different way to handle this without using event listeners at all. Why not pass a callback function to the row controllers, which then monitors&#x2F;updates your timers?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 27th 2015, 5:08:46 pm">January 27th 2015</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="question/180463/tableview-setdata-and-removing-row-controllers-problems.html#answer-285433" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
