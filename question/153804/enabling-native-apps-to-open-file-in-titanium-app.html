<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Enabling Native Apps To Open File In Titanium App » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Enabling Native Apps To Open File In Titanium App</h1>
		</header>
		<section>
			<p>Many native apps have the ability to open a file they have in another app. For example, if you have a pdf saved in iBooks it offers you the ability to open that file in another app, such as the generic mail app.</p>
<p>How do I enable it such that, for example a pdf, could be opened in the titanium app I am developing? Essentially I jut want a file path to the item that is saved in another app&#39;s data directory so that I can import and manipulate it in my titanium app.</p>
<p>Does anyone know how to do this on iPhone and&#x2F;or Android?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 18th 2013, 6:24:00 pm">June 18th 2013</span>
				by <span class='authorname'>Praveen Puvvadi</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>app</span></li>
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>application</span></li>
					
						<li><span class='tagname'>file</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-264476">
				
						<section>
							<p>short answer: url schemes.</p>
<p>long answer: need more details</p>
<p>buffer answer: watch jason&#39;s video <a href="http:&#x2F;&#x2F;vimeo.com&#x2F;67945122">http:&#x2F;&#x2F;vimeo.com&#x2F;67945122</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 18th 2013, 7:24:21 pm">June 18th 2013</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/153804/enabling-native-apps-to-open-file-in-titanium-app.html#answer-264476" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the response Stephen. Basically, I understand that in order to enable another app to open a file in my titanium app I need to edit the info.plist file for the app which will be built in iOS, which can be done by editing the iOS specific section of the tiapp.xml file.</p>
<p>My real point of confusion is how to retrieve a url representing the file path of the file which is opened into my titanium app. For example, say I&#39;m viewing a pdf in iBooks and I want to open it in my app. Once I click open in my app, I believe it will fire an event to the titanium app. I read online that this file can be caught by overloading the App.f.proccessArguments function. Is that correct? And if so, I can overload it in any .js file in my app right?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 18th 2013, 7:50:06 pm">June 18th 2013</span>
											by <span class='authorname'>Praveen Puvvadi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>My go to for URL scheme details;</p>
<ul>
<li><a href="http:&#x2F;&#x2F;wiki.akosma.com&#x2F;IPhone_URL_Schemes">IPhone URL Schemes</a></li>
</ul>
<p>Whilst all in objectiveC format they are very easy to translate, take the YouTube example;</p>
<pre><code class="hljs">NSString <span class="hljs-variable">*stringURL</span> = <span class="hljs-variable">@"</span>http:<span class="hljs-comment">//www.youtube.com/watch?v=WZH30T99MaM";</span>
<span class="hljs-comment">// becomes</span>
Ti.Platform.openURL(<span class="hljs-string">'http://www.youtube.com/watch?v=WZH30T99MaM'</span>);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="June 18th 2013, 8:09:30 pm">June 18th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>+1 Malcolm, URL schemes is the approach for this.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 19th 2013, 10:28:32 am">June 19th 2013</span>
											by <span class='authorname'>Ashish Nigam</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I just followed Stephens lead, he answered the question.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 19th 2013, 10:37:48 am">June 19th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry to keep bugging everyone about this, but my understanding of a url schema was that once you register the urls that open into your app, you must actually open that url to call open your app. Therefore, wouldn&#39;t you need to have control of the app you are initially in to be able to open the url which calls the app you want to go to?</p>
<p>I want the user to be able to open a file from an app which I have no control over in my app by passing me the file path for that file…</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 19th 2013, 11:21:53 am">June 19th 2013</span>
											by <span class='authorname'>Praveen Puvvadi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>For iOS each app registers its own url scheme, this is then called by other apps so that they can can together.</p>
<p>So your app want to show an iBook in the the native app - you call;</p>
<pre><code class="hljs">Ti.Platform.openURL('itms-books://itunes.apple.com/de/book/marchen/id<span class="hljs-number">436945766</span>')<span class="hljs-comment">;</span>
</code></pre><p>From YOUR app, they registered the url scheme - <strong>itms-books:&#x2F;&#x2F;</strong> so their app gets that data passed to it by the OS.</p>
<p>You do not need ANY access to the other app.</p>
<p>If you want other apps to be able to pass you files then you need to register a url scheme and then publicise it to other developers to us.</p>
<p>Currently there is equivalent of the Android method of your app saying &quot;give me any PDFs&quot; and then all those who can accept PDFs are shown to the user. (As far as I know)</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 19th 2013, 11:39:51 am">June 19th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Okay, so there is no other way short of publicizing my url scheme to other people who will later develop apps which will call my url?</p>
<p>Native iOS apps register a CFBundleDocumentType in the info.plist file which publicizes that they can open a filetype to all other apps on the device. Is there no way to replicate this in titanium?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 19th 2013, 12:23:07 pm">June 19th 2013</span>
											by <span class='authorname'>Praveen Puvvadi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Since you answered your own question, no reason to continue this thread.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 19th 2013, 6:48:05 pm">June 19th 2013</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-264516">
				
						<section>
							<p>I was able to find an answer to my question elsewhere on these forums. What you want to do is to edit the iOS specific section of the tiapp.xml file in the titanium app, which will edit the info.plist file in the iOS app once it is compiled. This will allow other apps on the iOS device to know that your app is capable of receiving particular file types and will show your app in the &#39;open in…&#39; section of all other iOS apps.</p>
<p>To do so you edit the CFBundleDocumentTypes key in the info.plist file. For example the code below would allow you to open a pdf from another native iOS app into your app. (This code goes into your tiapp.xml file, sorry for any poor formatting)</p>
<pre><code class="hljs"><span class="hljs-variable">&lt;ios&gt;</span>
    <span class="hljs-variable">&lt;plist&gt;</span>
            <span class="hljs-variable">&lt;dict&gt;</span>
                <span class="hljs-variable">&lt;key&gt;</span>CFBundleDocumentTypes<span class="hljs-variable">&lt;/key&gt;</span>
                    <span class="hljs-variable">&lt;array&gt;</span>
                        <span class="hljs-variable">&lt;dict&gt;</span>
                            <span class="hljs-variable">&lt;key&gt;</span>CFBundleTypeIconFiles<span class="hljs-variable">&lt;/key&gt;</span>
                            <span class="hljs-variable">&lt;array&gt;</span>
                                <span class="hljs-variable">&lt;string&gt;</span>linedPaper.png<span class="hljs-variable">&lt;/string&gt;</span>
                            <span class="hljs-variable">&lt;/array&gt;</span>
                            <span class="hljs-variable">&lt;key&gt;</span>CFBundleTypeName<span class="hljs-variable">&lt;/key&gt;</span>
                            <span class="hljs-variable">&lt;string&gt;</span>Open PDF <span class="hljs-keyword">in</span> AppName<span class="hljs-variable">&lt;/string&gt;</span>
                            <span class="hljs-variable">&lt;key&gt;</span>CFBundleTypeRole<span class="hljs-variable">&lt;/key&gt;</span>
                            <span class="hljs-variable">&lt;string&gt;</span>Viewer<span class="hljs-variable">&lt;/string&gt;</span>
                            <span class="hljs-variable">&lt;key&gt;</span>LSHandlerRank<span class="hljs-variable">&lt;/key&gt;</span>
                            <span class="hljs-variable">&lt;string&gt;</span>Owner<span class="hljs-variable">&lt;/string&gt;</span>
                            <span class="hljs-variable">&lt;key&gt;</span>LSItemContentTypes<span class="hljs-variable">&lt;/key&gt;</span>
                            <span class="hljs-variable">&lt;array&gt;</span>
                                <span class="hljs-variable">&lt;string&gt;</span>com.adobe.pdf<span class="hljs-variable">&lt;/string&gt;</span>
                            <span class="hljs-variable">&lt;/array&gt;</span>
                        <span class="hljs-variable">&lt;/dict&gt;</span>
                    <span class="hljs-variable">&lt;/array&gt;</span>
            <span class="hljs-variable">&lt;/dict&gt;</span>
        <span class="hljs-variable">&lt;/plist&gt;</span>
    <span class="hljs-variable">&lt;/ios&gt;</span>
</code></pre><p>Once the file is opened into your app, the url is passed into the app as basically a command line argument. Then you can later access the fileUrl for the file which is passed into your app by doing something like this.</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> fileURL</span> = Ti.App.getArguments();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 19th 2013, 12:49:32 pm">June 19th 2013</span>
								by <span class='authorname'>Praveen Puvvadi</span><br>
								<a class="icon-bg icon-link" href="question/153804/enabling-native-apps-to-open-file-in-titanium-app.html#answer-264516" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;m trying to fetch a PDF to open in my app.</p>
<p>1- So I am able to see in any PDF view throughout the device to open the file in my app.</p>
<p>2- Once Clicked, the App opens, with your code in the <code>resume</code> event handler.</p>
<p>3- I trace <code>Ti.App.info(JSON.toString(fileURL));</code></p>
<p>Though I get only <code>launchOptionsLocationKey     0</code> no location url to the file?</p>
<p>am I missing something?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 25th 2013, 12:07:20 am">October 25th 2013</span>
											by <span class='authorname'>Robert Massa</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-270409">
				
						<section>
							<p>@Robert</p>
<p>The way to get the URL is to listen for <code>resumed</code> and not <code>resume</code>… I&#39;ll elaborate:</p>
<pre><code class="hljs">Ti.App.addEventListener(<span class="hljs-string">'resumed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-comment">// notice *resumed*</span>
    processArgs();
});

<span class="hljs-comment">// URI SCHEMES - Get the file URL</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processArgs</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> fileURL = Ti.App.getArguments();
    <span class="hljs-keyword">if</span> (fileURL.hasOwnProperty(<span class="hljs-string">'url'</span>)) {
        Ti.API.info(<span class="hljs-string">'File URL '</span> + <span class="hljs-built_in">JSON</span>.stringify(fileURL));
    }
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 25th 2013, 12:29:14 am">October 25th 2013</span>
								by <span class='authorname'>Joseph Sachs</span><br>
								<a class="icon-bg icon-link" href="question/153804/enabling-native-apps-to-open-file-in-titanium-app.html#answer-270409" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Works great!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 25th 2013, 12:32:20 am">October 25th 2013</span>
											by <span class='authorname'>Robert Massa</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Since I installed iOS8, I can not open the file, the app crashes.<br>I sent a file by email, which can also be opened with my app. When I click on file, and go to &quot;Open on…&quot;, if I choose my app, the app crashes on startup. But I saw that the file is correctly copied to the Inbox folder of my application. The error that appears on the device console is this:</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] The application has crashed with an uncaught exception <span class="hljs-variable">'NSInvalidArgumentException</span><span class="hljs-variable">'.</span>
Reason:
*** setObjectForKey: object cannot be nil <span class="hljs-list">(<span class="hljs-keyword">key:</span> source)</span></span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="September 26th 2014, 9:29:12 am">September 26th 2014</span>
											by <span class='authorname'>Vittorio Sorbera</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
