<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Date calculation works in Android but not iOS » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Date calculation works in Android but not iOS</h1>
		</header>
		<section>
			<p>Hi all, in Android I am able to calculate the difference in days between dates using the following code:</p>
<pre><code class="hljs">var photoDate = <span class="hljs-keyword">new</span> Date(exampleDate);

var one_day = <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span>;
<span class="hljs-comment">//Get 1 day in milliseconds</span>

var days = Math.<span class="hljs-built_in">ceil</span>((dateNow.getTime() - exampleDate.getTime() ) / one_day);
</code></pre><p>exampleDate is a string in the format of: &quot;2014-01-25T16:24:26+0000&quot;.  When I run this same code in iOS, the value of days is NaN.  Any ideas of how to correct for iOS?</p>
<p>Thanks, really appreciate your help..I&#39;m stumped…</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 9th 2014, 9:34:01 pm">February 9th 2014</span>
				by <span class='authorname'>Owen Fayle</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>javascript</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Sorry- forgot to include the first line in the sample code:<br><code>var dateNow = new Date();</code></p>
</div>
							<div class="author">
								&mdash; commented <span title="February 9th 2014, 9:35:41 pm">February 9th 2014</span>
								by <span class='authorname'>Owen Fayle</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-274977">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<pre><code class="hljs">exampleDate is <span class="hljs-operator">a</span> <span class="hljs-keyword">string</span> <span class="hljs-operator">in</span> <span class="hljs-operator">the</span> <span class="hljs-built_in">format</span> <span class="hljs-operator">of</span>: <span class="hljs-string">"2014-01-25T16:24:26+0000"</span>.
</code></pre><p>then </p>
<pre><code class="hljs">exampleDate.<span class="hljs-function"><span class="hljs-title">getTime</span><span class="hljs-params">()</span></span>
</code></pre><p>exampleDate has a getTime method too?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 9th 2014, 9:42:02 pm">February 9th 2014</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="../../question/162398/date-calculation-works-in-android-but-not-ios.html#answer-274977" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Stephen, you are absolutely correct- exampleDate does not have that function.  I screwed up my code when copying it to the QA.  My original (unworking) code is:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> dateNow = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();

<span class="hljs-keyword">var</span> photoDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(exampleDate);

<span class="hljs-keyword">var</span> one_day = <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span>;
<span class="hljs-comment">//Get 1 day in milliseconds</span>

<span class="hljs-keyword">var</span> days = <span class="hljs-built_in">Math</span>.ceil((dateNow.getTime() - photoDate.getTime() ) / one_day);
</code></pre><p>Sorry for the confusion</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 9th 2014, 9:51:31 pm">February 9th 2014</span>
											by <span class='authorname'>Owen Fayle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Your best bet for debugging, in your own environment, is to console log the values.</p>
<pre><code class="hljs"><span class="hljs-tag">console</span><span class="hljs-class">.log</span>(<span class="hljs-tag">dateNow</span><span class="hljs-class">.getTime</span>());
<span class="hljs-tag">console</span><span class="hljs-class">.log</span>(<span class="hljs-tag">photoDate</span><span class="hljs-class">.getTime</span>());
</code></pre><p>See that you are actually getting 2 numbers.</p>
<p>Next,</p>
<pre><code class="hljs"><span class="hljs-tag">console</span><span class="hljs-class">.log</span>(<span class="hljs-tag">dateNow</span><span class="hljs-class">.getTime</span>() <span class="hljs-tag">-</span> <span class="hljs-tag">photoDate</span><span class="hljs-class">.getTime</span>());
</code></pre><p>Understand that Android and iOS currently use two different JavaScript engines, that can behave differently at times.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 9th 2014, 10:36:13 pm">February 9th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If that latter works, divided by your one_day value in the console.log.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 9th 2014, 10:37:44 pm">February 9th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey Stephen, thank you for your continued help.  Using the console log, photoDate.getTime() value is NaN.  As iOS is a different JS engine, do you happen to know what format I need to switch &quot;2014-01-25T16:24:26+0000&quot; to for a date object to successfully be created?</p>
<p>Thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 9th 2014, 11:40:52 pm">February 9th 2014</span>
											by <span class='authorname'>Owen Fayle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>We use the <a href="http:&#x2F;&#x2F;momentjs.com&#x2F;">momentJS</a> library in every product we ship. We package it as a commonJS module in our classic projects, but it is included by default with alloy projects.</p>
<p>My concern though, is that this works on android and not on ios.  Normally its the other way around with quirks.  run the console logs on android if you haven&#39;t already and be sure they are correct there.  If they are, work your way back up through your code to be sure that exampleDate is the value you expect it to be.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 10th 2014, 12:39:39 am">February 10th 2014</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 10th 2014, 11:42:45 am">February 10th 2014</span>
											by <span class='authorname'>Owen Fayle</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
