<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android 2.2 app stops &#34;unexpectedly&#34; » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android 2.2 app stops &#34;unexpectedly&#34;</h1>
		</header>
		<section>
			<p>I am trying to debug&#x2F;fix an app developed by another person&#x2F;company. They backed out on us and now it&#39;s landed in my lap. I&#39;ve shrunk it down and am just testing the initial few views. However, the app won&#39;t run on Android 2.2. I starts running, the splash screen displays, then the emulator gives the message. <em>&quot;The application InfantRisk-HCP (process com.infantrisk.hcp) has stopped unexpectedly. Please try again.&quot;</em> And the console, among the 12890180 other messages, spits out the messages below, last. The source code really doesn&#39;t have much in it and it runs just fine on the iOS simulator. (No one is having trouble with the iPhone app, just the android version crashing). A default tabbed application will run just fine. Titanium SDK 3.0.0.GA. Google APIs Android 2.2 If I change any of the configurations, the emulator just crashes. and I have to restart titanium.</p>
<p>Source:</p>
<pre><code class="hljs"><span class="hljs-comment">//Titanium.include('/views/common/infomanager.js');</span>
<span class="hljs-comment">//Titanium.include('/views/common/patientmanager.js');</span>
<span class="hljs-comment">//Titanium.include('/views/api/api_common.js');</span>

<span class="hljs-comment">//Titanium.UI.setBackgroundColor('#000');</span>

<span class="hljs-comment">//setupPatientManager();</span>
<span class="hljs-comment">//setupApiHelper();</span>

<span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Titanium.UI.createWindow();

<span class="hljs-comment">/*if (userLogged()) {
    win.url = 'views/menu/navigation.js';
}
else {
    win.url = 'views/welcome.js';
}*/</span>

<span class="hljs-comment">//win.url = 'views/menu/navigation.js';</span>
<span class="hljs-keyword">win</span>.url = 'views/welcome.js';


<span class="hljs-keyword">win</span>.<span class="hljs-keyword">open</span>();
<span class="hljs-comment">//Ti.API.info(Ti.Platform.displayCaps.density);</span>
</code></pre><p><strong>Console Messages:</strong></p>
<p>[ERROR][dalvikvm(  464)] Could not find class &#39;android.os.StrictMode$ThreadPolicy$Builder&#39;, referenced from method org.appcelerator.kroll.common.TiFastDev.&lt;init&gt;</p>
<p>[ERROR][TiApplication(  464)] (KrollRuntimeThread) [994,994] APP PROXY: ti.modules.titanium.app.AppModule@43ef61a0</p>
<p>[DEBUG][AndroidRuntime(  464)] Shutting down VM<br>[WARN][dalvikvm(  464)] threadid=1: thread exiting with uncaught exception (group=0x4001d800)<br>[ERROR][TiApplication(  464)] (main) [55,55] Sending event: exception on thread: main msg:java.lang.NullPointerException; Titanium 3.0.0,2012&#x2F;12&#x2F;12 18:49,a5894b3<br>[ERROR][TiApplication(  464)] java.lang.NullPointerException<br>[ERROR][TiApplication(  464)]     at java.net.URI$Helper.isValidDomainName(URI.java:631)<br>[ERROR][TiApplication(  464)]     at java.net.URI$Helper.isValidHost(URI.java:595)<br>[ERROR][TiApplication(  464)]     at java.net.URI$Helper.parseAuthority(URI.java:544)<br>[ERROR][TiApplication(  464)]     at java.net.URI$Helper.parseURI(URI.java:404)<br>[ERROR][TiApplication(  464)]     at java.net.URI$Helper.access$100(URI.java:302)<br>[ERROR][TiApplication(  464)]     at java.net.URI.&lt;init&gt;(URI.java:87)<br>[ERROR][TiApplication(  464)]     at org.appcelerator.titanium.util.TiUrl.absoluteUrl(TiUrl.java:270)<br>[ERROR][TiApplication(  464)]     at org.appcelerator.titanium.util.TiUrl.resolve(TiUrl.java:214)<br>[ERROR][TiApplication(  464)]     at org.appcelerator.kroll.KrollProxy.resolveUrl(KrollProxy.java:1067)<br>[ERROR][TiApplication(  464)]     at org.appcelerator.titanium.view.TiUIView.resolveImageUrl(TiUIView.java:869)<br>[ERROR][TiApplication(  464)]     at org.appcelerator.titanium.view.TiUIView.handleBackgroundImage(TiUIView.java:885)<br>[ERROR][TiApplication(  464)]     at org.appcelerator.titanium.view.TiUIView.processProperties(TiUIView.java:671)<br>[ERROR][TiApplication(  464)]     at ti.modules.titanium.ui.widget.TiView.processProperties(TiView.java:49)<br>[ERROR][TiApplication(  464)]     at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:893)<br>[ERROR][TiApplication(  464)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage(TiViewProxy.java:310)<br>[ERROR][TiApplication(  464)]     at org.appcelerator.titanium.proxy.TiWindowProxy.handleMessage(TiWindowProxy.java:107)<br>[ERROR][TiApplication(  464)]     at android.os.Handler.dispatchMessage(Handler.java:95)<br>[ERROR][TiApplication(  464)]     at android.os.Looper.loop(Looper.java:123)<br>[ERROR][TiApplication(  464)]     at android.app.ActivityThread.main(ActivityThread.java:4627)<br>[ERROR][TiApplication(  464)]     at java.lang.reflect.Method.invokeNative(Native Method)<br>[ERROR][TiApplication(  464)]     at java.lang.reflect.Method.invoke(Method.java:521)<br>[ERROR][TiApplication(  464)]     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)<br>[ERROR][TiApplication(  464)]     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)<br>[ERROR][TiApplication(  464)]     at dalvik.system.NativeStart.main(Native Method)<br>[ERROR][AndroidRuntime(  464)] FATAL EXCEPTION: main<br>[ERROR][AndroidRuntime(  464)] java.lang.NullPointerException<br>[ERROR][AndroidRuntime(  464)]     at java.net.URI$Helper.isValidDomainName(URI.java:631)<br>[ERROR][AndroidRuntime(  464)]     at java.net.URI$Helper.isValidHost(URI.java:595)<br>[ERROR][AndroidRuntime(  464)]     at java.net.URI$Helper.parseAuthority(URI.java:544)<br>[ERROR][AndroidRuntime(  464)]     at java.net.URI$Helper.parseURI(URI.java:404)<br>[ERROR][AndroidRuntime(  464)]     at java.net.URI$Helper.access$100(URI.java:302)<br>[ERROR][AndroidRuntime(  464)]     at java.net.URI.&lt;init&gt;(URI.java:87)<br>[ERROR][AndroidRuntime(  464)]     at org.appcelerator.titanium.util.TiUrl.absoluteUrl(TiUrl.java:270)<br>[ERROR][AndroidRuntime(  464)]     at org.appcelerator.titanium.util.TiUrl.resolve(TiUrl.java:214)<br>[ERROR][AndroidRuntime(  464)]     at org.appcelerator.kroll.KrollProxy.resolveUrl(KrollProxy.java:1067)<br>[ERROR][AndroidRuntime(  464)]     at org.appcelerator.titanium.view.TiUIView.resolveImageUrl(TiUIView.java:869)<br>[ERROR][AndroidRuntime(  464)]     at org.appcelerator.titanium.view.TiUIView.handleBackgroundImage(TiUIView.java:885)<br>[ERROR][AndroidRuntime(  464)]     at org.appcelerator.titanium.view.TiUIView.processProperties(TiUIView.java:671)<br>[ERROR][AndroidRuntime(  464)]     at ti.modules.titanium.ui.widget.TiView.processProperties(TiView.java:49)<br>[ERROR][AndroidRuntime(  464)]     at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:893)<br>[ERROR][AndroidRuntime(  464)]     at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage(TiViewProxy.java:310)<br>[ERROR][AndroidRuntime(  464)]     at org.appcelerator.titanium.proxy.TiWindowProxy.handleMessage(TiWindowProxy.java:107)<br>[ERROR][AndroidRuntime(  464)]     at android.os.Handler.dispatchMessage(Handler.java:95)<br>[ERROR][AndroidRuntime(  464)]     at android.os.Looper.loop(Looper.java:123)<br>[ERROR][AndroidRuntime(  464)]     at android.app.ActivityThread.main(ActivityThread.java:4627)<br>[ERROR][AndroidRuntime(  464)]     at java.lang.reflect.Method.invokeNative(Native Method)<br>[ERROR][AndroidRuntime(  464)]     at java.lang.reflect.Method.invoke(Method.java:521)<br>[ERROR][AndroidRuntime(  464)]     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)<br>[ERROR][AndroidRuntime(  464)]     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)<br>[ERROR][AndroidRuntime(  464)]     at dalvik.system.NativeStart.main(Native Method)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 11th 2013, 4:56:45 pm">January 11th 2013</span>
				by <span class='authorname'>Jonathan Craddock</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-254367">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>To me it looks like it couldn&#39;t find an image to load as the background image of a view. You might want to try commenting out code in welcome.js until you can narrow it down to a specific line of code.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 11th 2013, 5:52:27 pm">January 11th 2013</span>
								by <span class='authorname'>Justin Toth</span><br>
								<a class="icon-bg icon-link" href="question/146775/android-22-app-stops-unexpectedly.html#answer-254367" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>win.backgroundImage = &#39;&#x2F;images&#x2F;main-bg.jpg&#39;;</p>
<p>var imgLogo = Titanium.UI.createImageView ({<br>    backgroundImage:&#39;&#x2F;images&#x2F;logo.png&#39;,<br>    width:30,<br>    height:34,<br>    bottom:5<br>});</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 11th 2013, 7:57:16 pm">January 11th 2013</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Should I do that for the files as well? :D Your answer solved my problem! Can you tell me what about the gibberish I posted above brought you to that conclusion? I really don&#39;t know how to interpret that when there&#39;s so much on the screen.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 11th 2013, 8:30:23 pm">January 11th 2013</span>
											by <span class='authorname'>Jonathan Craddock</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oh nevermind. Just saw the answers below. Thanks for the help! :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 11th 2013, 8:37:49 pm">January 11th 2013</span>
											by <span class='authorname'>Jonathan Craddock</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The stack trace showed these certain lines:</p>
<p>java.net.URI$Helper.isValidDomainName(URI.java:631) [ERROR][AndroidRuntime( 464)] at </p>
<p>at org.appcelerator.titanium.view.TiUIView.resolveImageUrl(TiUIView.java:869) [ERROR]</p>
<p>org.appcelerator.titanium.view.TiUIView.handleBackgroundImage(TiUIView.java:885) </p>
<p>ti.modules.titanium.ui.widget.TiView.processProperties(TiView.java:49) [ERROR]</p>
<p>That told me that it was having trouble finding a url for an image url which was for a view property for backgroundImage. Glad you were able to get it fixed.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 11th 2013, 8:45:39 pm">January 11th 2013</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ohhh I see, thank you for the clarity. I&#39;ve seen this particular issue quite a few times with this app, guess I&#39;m gonna have to go search each file…and there&#39;s a lot. This is gonna be fun.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 11th 2013, 8:56:04 pm">January 11th 2013</span>
											by <span class='authorname'>Jonathan Craddock</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-254368">
				
						<section>
							<p>HI Jonathan, can you provide the code for <strong>welcome.js</strong> that might help you better.</p>
<p><strong>but for now in android path is given from root level, so use it like here</strong></p>
<pre><code class="hljs">win.url = <span class="hljs-string">'/views/welcome.js'</span>;  <span class="hljs-comment">// put a slash before views</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 11th 2013, 6:01:43 pm">January 11th 2013</span>
								by <span class='authorname'>Ashish Nigam</span><br>
								<a class="icon-bg icon-link" href="question/146775/android-22-app-stops-unexpectedly.html#answer-254368" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Welcome.js source. Will I need to change all paths to root level? Would explain why they&#39;re not showing up correctly, if at all.</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;

win.backgroundImage = <span class="hljs-string">'../images/main-bg.jpg'</span>;



<span class="hljs-keyword">var</span> wvIntro = Titanium.UI.createWebView({
    html:<span class="hljs-string">'&lt;p style="font-family:Helvetica; font-size:14px; color:#000;"&gt;Welcome to the InfantRisk Center mobile resource.  This subscription service provides you with product safety information for prescription and non-prescription medical products as it relates to pregnant and breastfeeding moms.  Registering is quick and easy.&lt;/p&gt;'</span>,
    width:Titanium.Platform.displayCaps.platformWidth - <span class="hljs-number">20</span>,
    height:Titanium.Platform.displayCaps.platformHeight - <span class="hljs-number">300</span>,
    top:<span class="hljs-number">140</span>,
    left:<span class="hljs-number">10</span>,
    backgroundColor:<span class="hljs-string">'transparent'</span>, 
    touchEnabled: <span class="hljs-literal">false</span>

});


<span class="hljs-keyword">var</span> btnRegister = Titanium.UI.createButton({
    id:<span class="hljs-string">'btnRegister'</span>,
    title:<span class="hljs-string">'Register Now'</span>,    
    color:<span class="hljs-string">'#fff'</span>,
    top:<span class="hljs-number">290</span>,
    font:{
        fontWeight:<span class="hljs-string">'bold'</span>,
        fontSize:<span class="hljs-number">18</span>,
        fontFamily:<span class="hljs-string">'Helvetica'</span>
    }
});

<span class="hljs-keyword">var</span> btnLogin = Titanium.UI.createButton({
    id:<span class="hljs-string">'btnLogin'</span>,
    title:<span class="hljs-string">'Login'</span>,    
    top:btnRegister.height + btnRegister.top + <span class="hljs-number">5</span>,
    font:{
        fontWeight:<span class="hljs-string">'bold'</span>,
        fontSize:<span class="hljs-number">18</span>,
        fontFamily:<span class="hljs-string">'Helvetica Neue'</span>
    }
});

<span class="hljs-keyword">var</span> imgLogo = Titanium.UI.createImageView ({
    backgroundImage:<span class="hljs-string">'../images/logo.png'</span>,
    width:<span class="hljs-number">30</span>,
    height:<span class="hljs-number">34</span>,
    bottom:<span class="hljs-number">5</span>
});



win.add(wvIntro);
win.add(btnLogin);
win.add(btnRegister);
win.add(imgLogo);

Titanium.<span class="hljs-keyword">include</span>(<span class="hljs-string">'common/common_funcs.js'</span>);
Titanium.<span class="hljs-keyword">include</span>(<span class="hljs-string">'common/infomanager.js'</span>);

<span class="hljs-comment">/*-----------------EVENTS------------------------------------------------------------------------*/</span>

btnRegister.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      cleanRegisterUser();
    <span class="hljs-keyword">var</span> winRegister = Titanium.UI.createWindow({
            url:<span class="hljs-string">'../views/registration/registerStep1.js'</span>,
            title:<span class="hljs-string">'Register'</span>,
            modal:isAndroid()
        });
    winRegister.open();
});

btnLogin.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> loginWindow = Titanium.UI.createWindow({url: <span class="hljs-string">'../views/login/login.js'</span>, modal:isAndroid()});
    loginWindow.open();
});

adjustImagesResolution(win);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 11th 2013, 7:55:01 pm">January 11th 2013</span>
											by <span class='authorname'>Jonathan Craddock</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yeah I would change all the &quot;..&#x2F;&quot; to just &quot;&#x2F;&quot;.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 11th 2013, 7:56:23 pm">January 11th 2013</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
