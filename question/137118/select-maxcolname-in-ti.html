<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Select max(COL_NAME) in Ti? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Select max(COL_NAME) in Ti?</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I&#39;m executing an SQL Statement as follows:</p>
<pre><code class="hljs">maxCurrent = db.execute('<span class="hljs-operator"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">MAX</span>(MY_ID) <span class="hljs-keyword">from</span> MYTABLE<span class="hljs-string">');</span></span>
</code></pre><p>Of course I&#39;ve opened the database etc before. </p>
<p>If i do a Ti.API.info(maxCurrent) or an alert on (maxCurrent), it tells me:</p>
<p>Object TiDatabaseResultSet.</p>
<p>What I need is the product, or the value of &quot;Select MAX(MY_ID) from MYTABLE&quot;. In other words, MYTABLE has a column called MY_ID. Its all integers. I just need to know what the maximum value is of that column.</p>
<p>How do I get this in variable maxCurrent? </p>
<p>Many thanks in advance for any support you can provide,</p>
<p>EB</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 17th 2012, 7:33:15 pm">May 17th 2012</span>
				by <span class='authorname'>E B</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>max</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
						<li><span class='tagname'>tidatabaseresultset</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-238905">
				
						<section>
							<p>Db queries return <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.0&#x2F;index.html#!&#x2F;api&#x2F;Titanium.Database.ResultSet">ResultSets</a>, so you need to get the data out of the resultset in order to display it, like:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> myID = maxCurrent.fieldByName(<span class="hljs-string">'MY_ID'</span>);
</code></pre><p>See <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.0&#x2F;index.html#!&#x2F;guide&#x2F;Working_with_a_SQLite_Database-section-29004901_WorkingwithaSQLiteDatabase-Retrievingdata">here</a> for more info.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 17th 2012, 7:47:03 pm">May 17th 2012</span>
								by <span class='authorname'>Adam Paxton</span><br>
								<a class="icon-bg icon-link" href="question/137118/select-maxcolname-in-ti.html#answer-238905" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Adam,</p>
<p>The problem is is that when I do this, it is not recognizing the MY_ID Column. </p>
<pre><code class="hljs"><span class="hljs-keyword">message</span> = <span class="hljs-string">"Attempted to access unknown result column MY_ID"</span>;
</code></pre><p>For some reason, the syntax: </p>
<pre><code class="hljs">var maxID = db.execute('<span class="hljs-operator"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">MAX</span>(MY_ID) <span class="hljs-keyword">from</span> MYTABLE<span class="hljs-string">');</span></span>
</code></pre><p>is not being accepted.</p>
<p>If I removed the &quot;MAX&quot; function, it works.. but it doesn&#39;t give me the max value.</p>
<p>What am I doing wrong?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 1:22:12 am">May 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-238925">
				
						<section>
							<p>hi,</p>
<p>when you test your query in SQLite manager it gives the result with <strong>MAX(MY_ID)</strong> column name<br>so try to get value with</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> myID = maxCurrent.fieldByName(<span class="hljs-string">'MAX(MY_ID)'</span>);
alert(myID);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 18th 2012, 3:07:01 am">May 18th 2012</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/137118/select-maxcolname-in-ti.html#answer-238925" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>thanks Mitul,<br>This unfortunately produces the same error.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:11:06 am">May 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok,but when i test , it worked fine</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:44:21 am">May 18th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Mitul. </p>
<p>This is quite odd. Why isn&#39;t this working for me?<br>Is there a setting I have that&#39;s wrong? </p>
<p>I&#39;m not doing anything else…</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:49:26 am">May 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>do one thing test your query in SQLite manager with your table</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:51:27 am">May 18th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes, I did.. i use a nice tool called MESASQLite. It worked fine in the tool.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:52:38 am">May 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>then it should work in your code also.</p>
<p>ok, juts try to call simple query like <strong>select * from MYTABLE</strong> and count rows and count total records</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:57:04 am">May 18th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-238926">
				
						<section>
							<pre><code class="hljs">rs = db.execute('<span class="hljs-operator"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">MAX</span>(MY_ID) <span class="hljs-keyword">AS</span> maxId <span class="hljs-keyword">from</span> MYTABLE<span class="hljs-string">');
if(rs.isValidRow()) {
maxCurrent = rs.fieldByName('</span>maxId<span class="hljs-string">');
}</span></span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 18th 2012, 3:35:09 am">May 18th 2012</span>
								by <span class='authorname'>Alexander Bauer</span><br>
								<a class="icon-bg icon-link" href="question/137118/select-maxcolname-in-ti.html#answer-238926" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>thank you for your response.</p>
<p>I have tried the following:</p>
<pre><code class="hljs">rs = <span class="hljs-keyword">db</span>.execute('SELECT <span class="hljs-literal">MAX</span>(MY_ID) <span class="hljs-keyword">AS</span> MAXID from MYTABLE');

        <span class="hljs-keyword">if</span>(rs.isValidRow()) {

            <span class="hljs-keyword">var</span> maxCurrent = rs.fieldByName('MAXID');

        }

alert(<span class="hljs-string">"maxID - "</span> +maxCurrent);
</code></pre><p>The alert dialog box gives me the following message:</p>
<pre><code class="hljs">maxID - [<span class="hljs-tag">object</span> TiDatabaseResultSet] <span class="hljs-number">1</span>
</code></pre><p>Although I just expected an integer to be returned, I got the object type with it. I&#39;m not sure I want this. I really need to deal with integers alone.</p>
<p>The column is of type integer. </p>
<p>Do you know what I am doing wrong? </p>
<p>Does Titanium support the SQL MAX() function?</p>
<p>Thank you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:10:37 am">May 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>if you use</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span>() {
<span class="hljs-attribute">...</span>
<span class="hljs-built_in">var</span> maxCurrent = <span class="hljs-attribute">...</span>;
}
</code></pre><p>it will be only avaible inside the if functions (var =&gt; local).<br>So you have to declare it outside of the if.<br>See my example.</p>
<p>SQL MAX Function is not limited&#x2F;tied to Ti. Its the SQLite set of functions which supports it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:19:00 am">May 18th 2012</span>
											by <span class='authorname'>Alexander Bauer</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Alexander,</p>
<p>Indeed, I had declared the maxCurrent outside the if statement before. It didn&#39;t work either. Both methods give me the same response:</p>
<p>I still get a value of 1.</p>
<ul>
<li>I have 164 lines in this table. </li>
<li>Each line has an ID (integer) value that I&#39;ve created myself.</li>
<li>I even recreated the database to make sure that the MY_ID column was integers. </li>
<li>the maximum value of MY_ID that I have in this column is 1006</li>
<li>therefore - the response of max(MY_ID) that I&#39;m expecting should be 1006. </li>
<li>I would even be happy if it gave me 1002, I could work with that. </li>
</ul>
<p>Thank you for your assistance,<br>E</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:27:17 am">May 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The assume the value of 1 means the number of rows inside the result set.<br>You must have some error in your code, so you are exposing a wrong var.<br>Please post complete code retrieving the maxId, including open&#x2F;close db &amp; rs.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:30:24 am">May 18th 2012</span>
											by <span class='authorname'>Alexander Bauer</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Alright.. here&#39;s the entire code:</p>
<p>I have in a function the following. its doing nothing more than this.</p>
<pre><code class="hljs">
    <span class="hljs-keyword">var</span> maxCurrent;

    <span class="hljs-keyword">var</span> <span class="hljs-keyword">db</span> = Ti.Database.<span class="hljs-keyword">open</span>('MYDATABASE');    

    rs = <span class="hljs-keyword">db</span>.execute('SELECT <span class="hljs-literal">MAX</span>(MY_ID) <span class="hljs-keyword">as</span> MAXID from MYTABLE');

    <span class="hljs-keyword">if</span>(rs.isValidRow()) 
    {

        maxCurrent = rs.fieldByName('MAXID');

    }

    alert(<span class="hljs-string">"maxID - "</span> +maxCurrent);
</code></pre><p>That&#39;s all its doing. I usually build a function line by line - so I haven&#39;t progressed more than this.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 6:36:29 am">May 18th 2012</span>
											by <span class='authorname'>E B</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> maxCurrent</span> = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">if</span>() {
...}
</code></pre><p>check the Output then.<br>dont f Forget to </p>
<pre><code class="hljs">rs.<span class="hljs-keyword">close</span>();
<span class="hljs-keyword">db</span>.<span class="hljs-keyword">close</span>();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="May 18th 2012, 2:07:52 pm">May 18th 2012</span>
											by <span class='authorname'>Alexander Bauer</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-267952">
				
						<section>
							<p>Hi, I know it&#39;s been a while since this was posted, but I had the same issue. My solution…</p>
<pre><code class="hljs"><span class="hljs-built_in">var</span> maxId = <span class="hljs-number">0</span>;
<span class="hljs-built_in">var</span> <span class="hljs-keyword">rows</span> = db<span class="hljs-built_in">.</span>execute(<span class="hljs-string">"SELECT MAX(id) FROM mytable"</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">rows</span><span class="hljs-built_in">.</span>isValidRow()) {
    maxId = <span class="hljs-keyword">rows</span><span class="hljs-built_in">.</span>field(<span class="hljs-number">0</span>);
};
<span class="hljs-keyword">rows</span><span class="hljs-built_in">.</span>close();
</code></pre><p>Hope it helps someone at some point.<br>Cheers.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 2nd 2013, 5:37:43 am">September 2nd 2013</span>
								by <span class='authorname'>Neil Dewey</span><br>
								<a class="icon-bg icon-link" href="question/137118/select-maxcolname-in-ti.html#answer-267952" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
