<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Database Help » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Database Help</h1>
		</header>
		<section>
			<p>Hi actually i m trying to insert some records and simultaneously trying to retrieve the inserted once into an array and trying to write this into file called demo.csv…. problem is when i open the file the array is writing all the new entries in a single line …. it should be in columns display code is here </p>
<p>var SQL = null; </p>
<pre><code class="hljs"><span class="hljs-type">Ti</span>.<span class="hljs-type">Database</span>.install(<span class="hljs-symbol">'PDFCollection</span>.db', <span class="hljs-symbol">'PDFCollection1'</span>);
pdfDB = <span class="hljs-type">Ti</span>.<span class="hljs-type">Database</span>.<span class="hljs-keyword">open</span>(<span class="hljs-symbol">'PDFCollection1'</span>); 
pdfDB.execute(<span class="hljs-symbol">'BEGIN'</span>);
</code></pre><p> pdfDB.execute(&#39;INSERT INTO PDFTable(&quot;Date&quot;,&quot;UserName&quot;,&quot;Age&quot;,&quot;Gender&quot;,&quot;Email&quot;,&quot;Phone&quot;,&quot;opdNumber&quot;,&quot;DoctorName&quot;) VALUES (&quot;&#39;+ dateShow.text+&#39;&quot;,&quot;&#39;+ name+&#39;&quot;,&quot;&#39;+ age+&#39;&quot;,&quot;&#39;+ gender+&#39;&quot;,&quot;&#39;+ emailstring+&#39;&quot;,&quot;&#39;+ mobile+&#39;&quot;,&quot;&#39;+ opd+&#39;&quot;,&quot;&#39;+ doctorstring+&#39;&quot;)&#39;);<br>    SQL = pdfDB.execute(&#39;SELECT * FROM PDFTable&#39;);<br>    pdfDB.execute(&quot;COMMIT TRANSACTION&quot;);</p>
<pre><code class="hljs"> <span class="hljs-keyword">if</span> (SQL.getRowCount() &gt; <span class="hljs-number">0</span>){

         <span class="hljs-keyword">while</span>(SQL.isValidRow()){

              Mdate = SQL.fieldByName(<span class="hljs-string">'Date'</span>);
              Mname = SQL.fieldByName(<span class="hljs-string">'UserName'</span>);
              Mage = SQL.fieldByName(<span class="hljs-string">'Age'</span>);
              Mgender = SQL.fieldByName(<span class="hljs-string">'Gender'</span>);
              Memail = SQL.fieldByName(<span class="hljs-string">'Email'</span>);
              Mphone = SQL.fieldByName(<span class="hljs-string">'Phone'</span>);
              Mopd = SQL.fieldByName(<span class="hljs-string">'opdNumber'</span>);
              Mdoctorname = SQL.fieldByName(<span class="hljs-string">'DoctorName'</span>);

         csvArray.<span class="hljs-keyword">push</span>(Mdate);
             csvArray.<span class="hljs-keyword">push</span>(Mname);
             csvArray.<span class="hljs-keyword">push</span>(Mage);
             csvArray.<span class="hljs-keyword">push</span>(Mgender);
             csvArray.<span class="hljs-keyword">push</span>(Memail);
             csvArray.<span class="hljs-keyword">push</span>(Mphone);
             csvArray.<span class="hljs-keyword">push</span>(Mopd);
             csvArray.<span class="hljs-keyword">push</span>(Mdoctorname);


            SQL.<span class="hljs-keyword">next</span>();                 

            }

        SQL.<span class="hljs-keyword">close</span>();
      }  
        pdfDB.<span class="hljs-keyword">close</span>();
</code></pre><p> csvfile = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory , &#39;PremierReport.csv&#39;);<br>var oldData = &#39;&#39;;<br>var appendData = csvArray +&#39;\n&#39;;<br>if(!csvfile.exists()){<br>    csvfile.createFile();<br>    oldData = csvfile.read();</p>
<p>}</p>
<p>csvfile.write(appendData,true);</p>
<p>Thanks in advance</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 28th 2013, 6:23:23 am">August 28th 2013</span>
				by <span class='authorname'>vijay Kumar</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>array</span></li>
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>string</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-267831">
				
						<section>
							<p>Maybe <code>\r\n</code> instead of <code>\n</code> ?</p>
<p>Regards,</p>
<p>Rodolphe</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 29th 2013, 11:55:55 am">August 29th 2013</span>
								by <span class='authorname'>bertolini rodolphe</span><br>
								<a class="icon-bg icon-link" href="question/156505/database-help#answer-267831" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>thank u for ur answer i did used this before but couldnt helped it …  the data retrieved from array still holds the complete records of  previous data and written in the next  line completely how to free the previous values i mean loop through single time when ever it enters into database and has to update the latest once including old once</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 29th 2013, 12:48:04 pm">August 29th 2013</span>
											by <span class='authorname'>vijay Kumar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oh ok. An other idea, a bit laborious, is to change your <code>\n</code> by a caracter (or a string) that you&#39;re sure that will never be in your database (like <code>I hope that it works and if it works I&amp;#39;m happy and I hug Rodolphe</code>).</p>
<p>Then, you create an other csv file that read the first csv and replace this string (<code>I hope that it works and if it works I&amp;#39;m happy and I hug Rodolphe</code>) by a \n.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 29th 2013, 12:54:50 pm">August 29th 2013</span>
											by <span class='authorname'>bertolini rodolphe</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-267838">
				
						<section>
							<p>About the update (not to replace if I understood, you want to add new data without erasing the older), I cannot help you… Maybe add a variable that countain the old csv file, concatenate with the new csv file…</p>
<p>But guess it works only if you erase the db content when you add new data.</p>
<p>Mmmh…</p>
<p>Then you can add a condition, that do nothing while caracter isn&#39;t equal to EOF.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 29th 2013, 12:57:48 pm">August 29th 2013</span>
								by <span class='authorname'>bertolini rodolphe</span><br>
								<a class="icon-bg icon-link" href="question/156505/database-help#answer-267838" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ooops wanted to comment, not to answer. Sorry.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 29th 2013, 12:58:13 pm">August 29th 2013</span>
											by <span class='authorname'>bertolini rodolphe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>can u tell me how to  erase the db content when you add new data and  i  cant understand this statement &#39;  you can add a condition, that do nothing while caracter isn&#39;t equal to EOF&#39;</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 29th 2013, 1:16:08 pm">August 29th 2013</span>
											by <span class='authorname'>vijay Kumar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You have your db : </p>
<pre><code class="hljs"><span class="hljs-keyword">data</span>1
<span class="hljs-keyword">data</span>2
</code></pre><p>then you update your db, it would be like this :</p>
<pre><code class="hljs">data<span class="hljs-number">1</span>
data<span class="hljs-number">2</span>
<span class="hljs-label">newdata1</span>
<span class="hljs-label">newdata2</span>
</code></pre><p>If I understood what you said (I&#39;m french, and, you may know that french are bad at foreign languages), your .csv is like this :</p>
<pre><code class="hljs"><span class="hljs-keyword">data</span>1
<span class="hljs-keyword">data</span>2EOF
</code></pre><p>then after the update (when you append data to your .csv)</p>
<pre><code class="hljs">data<span class="hljs-number">1</span>
data<span class="hljs-number">2</span><span class="hljs-label">newdata1</span>
<span class="hljs-label">newdata2</span>EOF
</code></pre><p>What I tried to propose, is to create a new csv that countains the new data from your db, you read your first .csv (the initial that countains only data1 and data2), and when you reach EOF, you replace EOF by &quot;\n followed_by_the_second_csv_content&quot;</p>
<p>I don&#39;t know if it&#39;s clearer, nor if it&#39;s possible….</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 29th 2013, 1:28:49 pm">August 29th 2013</span>
											by <span class='authorname'>bertolini rodolphe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok<br>i got it but little bit …what is EOF and if possible if u dont mind can u make require changes in my code or let me know where do i need to change ….pls  pls pls</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 29th 2013, 1:53:04 pm">August 29th 2013</span>
											by <span class='authorname'>vijay Kumar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
