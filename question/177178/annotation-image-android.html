<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Annotation Image android » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Annotation Image android</h1>
		</header>
		<section>
			<p>I have this code for the Annotation:</p>
<pre><code class="hljs">    var thisView = Ti.UI.createView({
        <span class="hljs-variable">width</span> : <span class="hljs-number">30</span>,
        <span class="hljs-variable">height</span> : <span class="hljs-number">30</span>
    });

    var thisImage = Ti.UI.createImageView({
        <span class="hljs-variable">width</span> : <span class="hljs-number">30</span>,
        <span class="hljs-variable">height</span> : <span class="hljs-number">30</span>,
        <span class="hljs-built_in">image</span>: <span class="hljs-string">'/icons/app-pin-avl.png'</span>
    });

    var ant = gl_map.createAnnotation({
        latitude : latitude,
        longitude : longitude,
    });

    thisView.<span class="hljs-built_in">add</span>(thisImage);
    ant.leftView = thisView;
    ant.<span class="hljs-built_in">image</span> = thisView.toImage();

    $.mapview.addAnnotation(ant);
</code></pre><p>Works perfectly on IOS. Its not working on Android and i&#39;m getting this warning:</p>
<p><code>AnnotationProxy: (main) [56,25040] Unable to get the image from the path: {height=60, cropRect={x=0, width=60, height=60}, media=[object TiBlob], y=0, mimeType=image&amp;#x2F;png, x=0, width=60}</code></p>
<p>Already tried to change from toImage() to toImage().media, but still don&#39;t work.</p>
<p>Any ideas! Thanks!</p>
<p>IOS 7.1, Android 4.4.2, SDK 3.3.0</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 21st 2014, 7:33:10 pm">August 21st 2014</span>
				by <span class='authorname'>Flavio Lacerda</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>annotation</span></li>
					
						<li><span class='tagname'>image</span></li>
					
						<li><span class='tagname'>toimage</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi</p>
<p>Unsure why you are using <code>toImage()</code> ?</p>
<p>Also why are you trying to add a containing view with image to the <strong>leftView</strong> as well as the <strong>pin</strong> itself?</p>
<p>Could you provide an example of what you are trying to achieve, so we can better understand in order to assist you?</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 21st 2014, 8:00:33 pm">August 21st 2014</span>
								by <span class='authorname'>Luke Taylor</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>@Flavio please stop adding new answers in response to other people.  Now it looks like two people have answered your question - this reduces the likelihood of you gaining assistance going forwards.</p>
<p>If you are commenting on something added to the question - use the <strong>Add Comment</strong> link in that section.  If the comment relates to a question provided by someone else then use the <strong>Add Comment</strong> link for that answer.</p>
<p>Otherwise it is an untidy mess and as soon as anyone votes on an answer - there is no order to the history of the comments you made.</p>
<p>The suggestion by Luke is your likeliest solution, &quot;save the image to the file system and reference that&quot;.  However that also has limitations.</p>
<p>Your question is not overly clear; should your &#39;custom image&#39; appear as the annotation pin or after the user has selected the annotation to display the detail page?  These are two very different things, the first will make the map appear cluttered if many pins are close, the second is limited by the lack of touch events once displayed.  Luke also mentions this.</p>
<p>Do not create a new question, give this one another couple of days or follow the suggestion Luke gave.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 23rd 2014, 2:49:56 pm">August 23rd 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-281866">
				
						<section>
							<p>Hi Luke,</p>
<p>Sorry about the leftView. I was doing tests to show the pin image.<br>This is really a basic view to test and I&#39;d  like to use a view instead of an image. If this works, i pretend to add labels, other images, etc.. </p>
<p>On IOS this works fine (without the left view off course).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 22nd 2014, 1:11:40 pm">August 22nd 2014</span>
								by <span class='authorname'>Flavio Lacerda</span><br>
								<a class="icon-bg icon-link" href="question/177178/annotation-image-android#answer-281866" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I understand what you are trying to do now.</p>
<p>Can&#39;t say I have ever tried this myself, the Annotation image property is supposed to take a string not a blob which is what <strong>toImage()</strong> returns which could be the issue. it might just be coincidence that it worked for iOS.</p>
<p>I will run some of my own tests and get back to you if I find anything</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 22nd 2014, 2:09:40 pm">August 22nd 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-281875">
				
						<section>
							<p>Thanks Luke. I got thi example from other users. Already tried to save the blob and associate the filepath. Still not working on Android. I?l keep trying to find something.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 22nd 2014, 6:17:28 pm">August 22nd 2014</span>
								by <span class='authorname'>Flavio Lacerda</span><br>
								<a class="icon-bg icon-link" href="question/177178/annotation-image-android#answer-281875" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I haven&#39;t managed to get anything to work my end. I have had the same thought process as you to try saving the blob as a file and then reference the file itself.</p>
<p>The following link has a save file function: <a href="http:&#x2F;&#x2F;timoa.com&#x2F;en&#x2F;2012&#x2F;07&#x2F;appcelerator-nativepath-on-ios-and-android&#x2F;">appcelerator nativepath on ios and android</a> which you could try instead of your own in case you missed something.</p>
<p>From the articles I have been reading, blobs don&#39;t play well with Android. Have you tried using the property <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Modules.Map.Annotation-property-customView">customView</a> instead, as you should be able to simply pass a view to this. The only issue is that no events are fired.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 23rd 2014, 1:45:40 pm">August 23rd 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Luke you know better than this - do not add a comment to answer when that comment is actually an answer in its own right.  Especially not when the answer you have added it to is a comment from the author.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 23rd 2014, 2:52:44 pm">August 23rd 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Malcolm I commented on this answer thread as my comment was related. As I don&#39;t actually have a solution, I didn&#39;t see any reason in cluttering this question with more unresolved answers. Otherwise I would have started my own answer thread.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 23rd 2014, 3:04:30 pm">August 23rd 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-281953">
				
						<section>
							<p>Sorry guys about send my comments in &quot;Answers&quot; (noob here). I discovered an answer using Luke&#39;s suggestion and using the customView on &quot;createAnnotation&quot;!</p>
<p>Here is the example!</p>
<pre><code class="hljs">var thisView = Ti.UI.createView({
        <span class="hljs-string">width :</span> <span class="hljs-number">30</span>,
        <span class="hljs-string">height :</span> <span class="hljs-number">30</span>
    });

    var thisImage = Ti.UI.createImageView({
        <span class="hljs-string">width :</span> <span class="hljs-number">30</span>,
        <span class="hljs-string">height :</span> <span class="hljs-number">30</span>,
<span class="hljs-label">        image:</span> <span class="hljs-string">'/icons/app-pin-avl.png'</span>
    });

    thisView.add(thisImage);

    var ant = gl_map.createAnnotation({
        <span class="hljs-string">latitude :</span> latitude,
        <span class="hljs-string">longitude :</span> longitude,
<span class="hljs-label">        customView:</span> thisView
    });

    <span class="hljs-comment">//does not work after the creation    </span>
    <span class="hljs-comment">//ant.customView = thisView;</span>
    <span class="hljs-comment">//ant.image = thisView.toImage();</span>

    $.mapview.addAnnotation(ant);
</code></pre><p>Thanks Luke!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 26th 2014, 5:09:41 pm">August 26th 2014</span>
								by <span class='authorname'>Flavio Lacerda</span><br>
								<a class="icon-bg icon-link" href="question/177178/annotation-image-android#answer-281953" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
