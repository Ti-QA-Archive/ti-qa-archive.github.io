<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>App crashes when call openPhotoGallery/showCamera methods on Android 4.0.4 » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>App crashes when call openPhotoGallery/showCamera methods on Android 4.0.4</h1>
		</header>
		<section>
			<p>Hello All,</p>
<p>I wants to open photoGallery On Click event of Button. Here is the code: </p>
<pre><code class="hljs"> cameraButton.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
         {</span>
             Titanium.Media.openPhotoGallery(
             {
                 success: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>
                 {</span>
                    imageViewResize.image = event.media;
                   <span class="hljs-comment">// f = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,event.media);</span>
                   label1.<span class="hljs-built_in">text</span>= event.media.nativePath;
                    <span class="hljs-comment">//alert("Suceess");</span>
                 },

                 error: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
                 {</span>
                 },

                 cancel: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
                 {</span>
                 },

                <span class="hljs-comment">// saveToPhotoGallery: true,</span>
                <span class="hljs-comment">// allowEditing: true,</span>
                 mediaTypes: [Ti.Media.MEDIA_TYPE_PHOTO],
                <span class="hljs-comment">// showControls: true</span>
        });
  });
</code></pre><p>Application is running correctly on Android 2.3<br>But when installed on 4.0.4 (Sony Xperia U) Photo gallery opens , image gets selected and then application gets crashed( Returns to Home Screen)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 30th 2013, 2:59:43 am">October 30th 2013</span>
				by <span class='authorname'>Anuja Dharmadhikari</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android 4.0.4</span></li>
					
						<li><span class='tagname'>camera</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi, i&#39;m kind of having the very same problem. When users click on a button in my app, they get a customized optiondialog (made it myself, its basically a new window with two buttons: camera and photo gallery).<br>When you choose camera, there is nothing wrong. Everything works just fine. But when you choose Photogallery, the photo gallery opens up and right after that the app stops. You can still select a photo, but when you do, the screen returns to the apps splash screen (so the app has rebooted)… Very weird and annoying and i dont know what the problem is.<br>please help</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 30th 2013, 6:36:56 am">October 30th 2013</span>
								by <span class='authorname'>Peter Beukema</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Correction: showCamera stopped working as well…. :S</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 30th 2013, 6:46:33 am">October 30th 2013</span>
								by <span class='authorname'>Peter Beukema</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-270633">
				
						<section>
							<p>Hello Anuja Dharmadhikari,</p>
<p>I have test my following code in my device. Please try this one. I hope this will solved your problem.</p>
<p>My testing environment: Ti SDK 3.1.3.GA</p>
<pre><code class="hljs">
Ti.Media.openPhotoGallery({
            mediaTypes : [Ti.Media.MEDIA_TYPE_PHOTO],
            success : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span> {
                imageViewResize.image = e.media; 
            },
            cancel : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> {
            },
            <span class="hljs-built_in">error</span> : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span></span> {
            }
        });
</code></pre><p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 30th 2013, 7:08:32 am">October 30th 2013</span>
								by <span class='authorname'>Md. Mostafizur Rahman</span><br>
								<a class="icon-bg icon-link" href="question/158928/app-crashes-when-call-openphotogalleryshowcamera-methods-on-android-404#answer-270633" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Android SDK? Above code works well in android 2.3.3 but crashed on android 4.0.4</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 30th 2013, 7:24:44 am">October 30th 2013</span>
											by <span class='authorname'>Anuja Dharmadhikari</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
