<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Automatically create buttons based on XML items » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Automatically create buttons based on XML items</h1>
		</header>
		<section>
			<p>I&#39;m fairly new to javascript and titanium, and I was wondering if there is a way of creating buttons based on the amount of items in my XML file and a for loop? I&#39;m currently creating buttons in my app.js using:</p>
<p><code>var basicBtn = Ti.UI.createButton({
    title: &amp;#39;Click me!&amp;#39;,
    top:10,
    height:50,
    width:200
});</code></p>
<p>For 2 to 4 buttons in a menu this is a fine solution, but what about when I want to have around 20 buttons in a menu? The reason I was thinking about XML is because when clicking a button, it should guide the user to a new window with a description and an image of the clicked item.</p>
<p>Sure, this should be possible but could somebody help me out geting started?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 5th 2014, 6:33:41 am">May 5th 2014</span>
				by <span class='authorname'>Thomas Schmidt</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>button</span></li>
					
						<li><span class='tagname'>forloop</span></li>
					
						<li><span class='tagname'>javascript</span></li>
					
						<li><span class='tagname'>menu</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-278395">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>For the moment I am going to assume you are not using Alloy as your use of XML in the question appears to be based on you providing some data to work with rather than the view framework files that are in XML format.</p>
<p>If you are not set on XML then JSON is much easier to work with.</p>
<p>The simplest example would be;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> data = [
    { title: <span class="hljs-string">'One'</span> },
    { title: <span class="hljs-string">'Two'</span> },
    { title: <span class="hljs-string">'Three'</span> }
];
<span class="hljs-keyword">var</span> intRow = <span class="hljs-number">0</span>, intRows = data.length, btn;;
<span class="hljs-keyword">for</span> (intRow = <span class="hljs-number">0</span>; intRow &lt; intRows; intRow = intRow + <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">var</span> btn = Ti.UI.createButton({
        title: data[intRow].title,
        top:<span class="hljs-number">10</span>,
        height:<span class="hljs-number">50</span>,
        width:<span class="hljs-number">200</span>
    });   
    <span class="hljs-comment">// assumes win is the parent you are adding things to</span>
    win.add(btn);
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 5th 2014, 6:44:06 am">May 5th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/173859/automatically-create-buttons-based-on-xml-items.html#answer-278395" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>However for this to really work you need to add things to a parent that will allow the child object to flow around each other rather than on top of each other.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> data = [
    { title: <span class="hljs-string">'One'</span> },
    { title: <span class="hljs-string">'Two'</span> },
    { title: <span class="hljs-string">'Three'</span> }
];
<span class="hljs-keyword">var</span> <span class="hljs-keyword">parent</span> = Ti.UI.createView({
    height: Ti.UI.SIZE,
    layout: <span class="hljs-string">'vertical'</span>,
    width: TI.UI.FILL
});
<span class="hljs-keyword">var</span> intRow = <span class="hljs-number">0</span>, intRows = data.length, btn;;
<span class="hljs-keyword">for</span> (intRow = <span class="hljs-number">0</span>; intRow &lt; intRows; intRow = intRow + <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">var</span> btn = Ti.UI.createButton({
        title: data[intRow].title,
        top:<span class="hljs-number">0</span>,
        height:<span class="hljs-number">50</span>,
        width:<span class="hljs-number">200</span>
    });   
    <span class="hljs-comment">// assumes win is the parent you are adding things to</span>
    <span class="hljs-keyword">parent</span>.add(btn);
}
win.add(<span class="hljs-keyword">parent</span>);
</code></pre><p>This will place each button directly underneath each other.  When the parent view has a layout set then the child view properties; top, bottom, left and right - act as margins from previous child elements added.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2014, 6:46:48 am">May 5th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Nazir added an event listener to his example and that was a good idea.  I have extended my second example to include an event listener but one a lot more efficient;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">switch</span> (e.source.action) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'red'</span>: 
        <span class="hljs-comment">// do something specifically for red</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'green'</span>: 
        <span class="hljs-comment">// do something specifically for green</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'blue'</span>: 
        <span class="hljs-comment">// do something specifically for blue</span>
        <span class="hljs-keyword">break</span>;
    }
};
<span class="hljs-keyword">var</span> data = [
    { title: <span class="hljs-string">'One'</span>, action: <span class="hljs-string">'blue'</span> },
    { title: <span class="hljs-string">'Two'</span>, action: <span class="hljs-string">'red'</span> },
    { title: <span class="hljs-string">'Three'</span>, action: <span class="hljs-string">'green'</span> }
];
<span class="hljs-keyword">var</span> <span class="hljs-keyword">parent</span> = Ti.UI.createView({
    height: Ti.UI.SIZE,
    layout: <span class="hljs-string">'vertical'</span>,
    width: TI.UI.FILL
});
<span class="hljs-keyword">parent</span>.addEventListener(<span class="hljs-string">'clicl'</span>, handler);
<span class="hljs-keyword">var</span> intRow = <span class="hljs-number">0</span>, intRows = data.length, btn;;
<span class="hljs-keyword">for</span> (intRow = <span class="hljs-number">0</span>; intRow &lt; intRows; intRow = intRow + <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">var</span> btn = Ti.UI.createButton({
        action: data[intRow].action,
        title: data[intRow].title,
        top:<span class="hljs-number">0</span>,
        height:<span class="hljs-number">50</span>,
        width:<span class="hljs-number">200</span>
    });   
    <span class="hljs-comment">// assumes win is the parent you are adding things to</span>
    <span class="hljs-keyword">parent</span>.add(btn);
}
win.add(<span class="hljs-keyword">parent</span>);
</code></pre><p>This allows all the events from each button to bubble up to the parent, the parent has a single event listener - that handles all the actions.  This means only one event listener at any time to handle everything.</p>
<p>This makes clean up later if you are going to actively handle potential memory leaks much easier. (Not for beginners - just yet)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2014, 7:04:38 am">May 5th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Your first example basically did everything I asked for (and works perfectly) but what about displaying an description after clicking the button (button click -&gt; create new window -&gt; display description of clicked button). It seems to me that adding an description to the data variable for +&#x2F;- 10-20 buttons becomes really messy. Thats why I thought about using an xml file… Or should I have used a diffrent project setting?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2014, 7:17:42 am">May 5th 2014</span>
											by <span class='authorname'>Thomas Schmidt</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you tweak the code a little and add the description in the jons you can do just that.</p>
<p>This section of the code is important as it shows you how a value from a single instance of the button (in our example) can be used later on.  </p>
<pre><code class="hljs">e<span class="hljs-class">.source</span><span class="hljs-class">.action</span>
</code></pre><p>The <strong>handler</strong> is called each time a button is pressed.  In our case it is called for each button - we do not need a specific event listener for each button as we are handling it with just one.</p>
<p>Pressing the button passing an object of data to the event.  As we had used the variable name <strong>&#39;e&#39;</strong> in our function parameter that is what we start with.  The object stored in <strong>e</strong> has lots of information - but we are only interest in main part <strong>source</strong>.  Source is the node that contains everything about this specific button you just pressed, so we can retrieve things from this specific button.  </p>
<p>Our example line of code above goes from <strong>e</strong> to <strong>source</strong> to <strong>action</strong>.  As you will remember we added <strong>action</strong> when creating the buttons.  So we can pass extra info to the button and read it back later in the handler event.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">switch</span> (e.source.action) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'red'</span>: 
        <span class="hljs-comment">// do something specifically for red</span>
        alert(e.source.description);
        <span class="hljs-comment">// only shown if action was red</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'green'</span>: 
        <span class="hljs-comment">// do something specifically for green</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'blue'</span>: 
        <span class="hljs-comment">// do something specifically for blue</span>
        <span class="hljs-keyword">break</span>;
    }
    alert(e.source.description);
    <span class="hljs-comment">// shown every single time - can be used for generic</span>
   <span class="hljs-comment">// messages that do not need to be further determined</span>
};
<span class="hljs-keyword">var</span> data = [
    { title: <span class="hljs-string">'One'</span>, action: <span class="hljs-string">'blue'</span>, description: <span class="hljs-string">'Example of something 1'</span> },
    { title: <span class="hljs-string">'Two'</span>, action: <span class="hljs-string">'red'</span> description: <span class="hljs-string">'Example of something 2'</span> },
    { title: <span class="hljs-string">'Three'</span>, action: <span class="hljs-string">'green'</span> description: <span class="hljs-string">'Example of something 3'</span> }
];
<span class="hljs-keyword">var</span> <span class="hljs-keyword">parent</span> = Ti.UI.createView({
    height: Ti.UI.SIZE,
    layout: <span class="hljs-string">'vertical'</span>,
    width: TI.UI.FILL
});
<span class="hljs-keyword">parent</span>.addEventListener(<span class="hljs-string">'clicl'</span>, handler);
<span class="hljs-keyword">var</span> intRow = <span class="hljs-number">0</span>, intRows = data.length, btn;;
<span class="hljs-keyword">for</span> (intRow = <span class="hljs-number">0</span>; intRow &lt; intRows; intRow = intRow + <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">var</span> btn = Ti.UI.createButton({
        action: data[intRow].action, <span class="hljs-comment">// see here</span>
        description: data[intRow].description, <span class="hljs-comment">// see here</span>
        title: data[intRow].title,
        top:<span class="hljs-number">0</span>,
        height:<span class="hljs-number">50</span>,
        width:<span class="hljs-number">200</span>
    });   
    <span class="hljs-comment">// assumes win is the parent you are adding things to</span>
    <span class="hljs-keyword">parent</span>.add(btn);
}
win.add(<span class="hljs-keyword">parent</span>);
</code></pre><p>Keep in mind it does not matter if it is hard coded arrays, json or xml - then principle is the same; loop data, create something on each loop and provide the required information each time - that can be used later for that object.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2014, 11:33:09 am">May 5th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-278396">
				
						<section>
							<p>Maybe this will be help you.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> button=[];

<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;leng i++){
  button[]=Ti.UI.createButton({
   title:i, 
   top:<span class="hljs-number">20</span>+i*<span class="hljs-number">20</span>, 
});

 ButtonEvent(button[i]);
}
<span class="hljs-comment">// you can add eventlistener like this </span>

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ButtonEvent</span><span class="hljs-params">(button)</span></span>{
      button.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
   <span class="hljs-comment">//do something</span>
});
 }
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 5th 2014, 6:49:56 am">May 5th 2014</span>
								by <span class='authorname'>nazir dogan</span><br>
								<a class="icon-bg icon-link" href="question/173859/automatically-create-buttons-based-on-xml-items.html#answer-278396" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Nazir - good idea to include event handling - I have done the same but using a more efficient technique - you may already know it - but if not check it out.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2014, 7:05:23 am">May 5th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Malcolm  Yes.I know your techique.But I want to be simple as possible for beginner :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2014, 7:41:56 am">May 5th 2014</span>
											by <span class='authorname'>nazir dogan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Nazir - I agree, as I said you likely knew it, I had a bit of extra time on my hands this morning ;-)</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2014, 11:49:23 am">May 5th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
