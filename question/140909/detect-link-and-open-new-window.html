<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Detect link and open new window » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Detect link and open new window</h1>
		</header>
		<section>
			<p><strong>Plateform : Android +2.3</strong><br><strong>Titanium Studio, build: 2.1.1, Titanium Mobile, SDK 1,8</strong></p>
<p>Hello,</p>
<p>Searching on the QA without success, i need help.</p>
<p>I want all link on a webview open on a new window, with Titanium.Platform.openURL of course.</p>
<p>I changed the webview with a css file to make it look more appropriately on mobile.</p>
<p>My code :</p>
<pre><code class="hljs">            wb = Ti.UI.createWebView({
                 pluginState:Titanium.UI.Android.WEBVIEW_PLUGINS_ON,
                top:42,
                html:'<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width, user-scalable=no"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"viewport.css"</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"link.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">center</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"title"</span>&gt;</span> '+ row.title +'<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">center</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"auteur"</span>&gt;</span>Publié le&amp;nbsp'+row.pubDate+'&amp;nbsppar&amp;nbsp;'+ row.author +'&amp;nbsp&amp;nbsp<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">br</span>&gt;</span>'+ row.url +'<span class="hljs-tag">&lt;/<span class="hljs-title">br</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>',
                    scalesPageToFit:true,
                   backgroundColor:'#ffffff',
                    modal:true
                    });
            w.add(wb);

            wb.addEventListener("load", function(e) {
            toolActInd.hide();

            var links = wb.links;
            var llength = links.length;
            for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attribute">llength</span>; ++<span class="hljs-attribute">i</span>) {
              <span class="hljs-attribute">if</span> (<span class="hljs-attribute">links</span>[<span class="hljs-attribute">i</span>]<span class="hljs-attribute">.addEventListener</span>) {
                <span class="hljs-attribute">links</span>[<span class="hljs-attribute">i</span>]<span class="hljs-attribute">.addEventListener</span>('<span class="hljs-attribute">click</span>', <span class="hljs-attribute">function</span>(<span class="hljs-attribute">e</span>) {
                <span class="hljs-attribute">Titanium.Platform.openURL</span>(<span class="hljs-attribute">e.links</span>);
                });
              }
            }
            });</span>
</code></pre><p>What&#39;s is wrong in this code ?<br>Thanks for helps.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 12th 2012, 12:51:47 pm">August 12th 2012</span>
				by <span class='authorname'>Suon Nicolas</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>browser</span></li>
					
						<li><span class='tagname'>link</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-245100">
				
						<section>
							<p>Hi Suon</p>
<p>If you are trying to listen to link inside a web page, and then responded inside the app, do this.</p>
<p>Example web page;</p>
<pre><code class="hljs"><span class="hljs-doctype">&lt;!DOCTYPE HTML&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span> <span class="hljs-attribute">lang</span>=<span class="hljs-value">"en-US"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=320, initial-scale=1.0"</span>/&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"format-detection"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"telephone=no"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Web Page<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"styles.css"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="actionscript">
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">agree</span><span class="hljs-params">(boolAgreement)</span> </span>{
        Ti.App.fireEvent(<span class="hljs-string">'agreeterms'</span>, { agree: <span class="hljs-literal">true</span> });
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"text-decoration: underline; font-weight: bold"</span> <span class="hljs-attribute">onclick</span>=<span class="hljs-value">"agree(true);"</span>&gt;</span>Yes I agree to these Terms of Service<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre><p>And then add this to your code when you want to respond to it;</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">agreeTerms</span><span class="hljs-params">(e)</span> </span>{
    Ti.App.removeEventListener(<span class="hljs-string">'agreeterms'</span>, agreeTerms);
    winTerms.close();
    Ti.App.Properties.setBool(<span class="hljs-string">'Terms.Agreed'</span>, e.agree);
    Ti.App.fireEvent(<span class="hljs-string">'profile'</span>, {
        terms: <span class="hljs-string">'Yes'</span>
    });
}
Ti.App.addEventListener(<span class="hljs-string">'agreeterms'</span>, agreeTerms);
</code></pre><p>This will let you respond to the link &quot;Agree&quot; and respond as required.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 12th 2012, 3:18:06 pm">August 12th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/140909/detect-link-and-open-new-window#answer-245100" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Suon</p>
<p>Did this help solve your problem?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2012, 6:22:40 pm">August 19th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-248341">
				
						<section>
							<p>Hello Malcolm !</p>
<p>I&#39;m sorry but i don&#39;t see your answer !</p>
<p>The problem is i&#39;m parsing a RSS and i can&#39;t add HTML code.</p>
<p>I&#39;m searching again but error, error, error :&#x2F;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 30th 2012, 8:48:57 am">September 30th 2012</span>
								by <span class='authorname'>Suon Nicolas</span><br>
								<a class="icon-bg icon-link" href="question/140909/detect-link-and-open-new-window#answer-248341" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-248345">
				
						<section>
							<p>Hello Nicolas,</p>
<p>When you would like to dialog with a webview, you must use a JS gateway like the code of Malcom.</p>
<p>Load the webview -&gt; user click on a link -&gt; embed JS launch a fireEvent -&gt; your app get your event and open the link !</p>
<p>Your code look like this:</p>
<pre><code class="hljs"><span class="xml">wb = Ti.UI.createWebView({
                 pluginState:Titanium.UI.Android.WEBVIEW_PLUGINS_ON,
                top:42,
                html:'<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width, user-scalable=no"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"viewport.css"</span>/&gt;</span>
                            <span class="hljs-comment">&lt;!-- &lt;script src="link.js"&gt;&lt;/script&gt; --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="actionscript">
                      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clickLink</span><span class="hljs-params">(url)</span> </span>{
                        Ti.App.fireEvent(<span class="hljs-string">'webviewLink'</span>, { url: url });
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                              }
                            </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
                          <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
                          <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
                             <span class="hljs-tag">&lt;<span class="hljs-title">center</span>&gt;</span>
                               <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"title"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span> <span class="hljs-attribute">onclick</span>=<span class="hljs-value">"clickLink('+ row.url +');"</span> '+ <span class="hljs-attribute">row.title</span> +'&lt;/<span class="hljs-attribute">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
                             <span class="hljs-tag">&lt;/<span class="hljs-title">center</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
                             <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"auteur"</span>&gt;</span>Publié le&amp;nbsp'+row.pubDate+'&amp;nbsppar&amp;nbsp;'+ row.author +'&amp;nbsp&amp;nbsp<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">br</span>&gt;</span>'+ row.url +'<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
                           <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
                         <span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>',
                    scalesPageToFit:true,
                backgroundColor:'#ffffff',
                    modal:true
                    });
            w.add(wb);

            wb.addEventListener("load", function(e) {
              toolActInd.hide();
            });

            wb.addEventListener("webviewLink", function(e) {
              // open URL in your window with "e.url"
            });</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 30th 2012, 10:02:51 am">September 30th 2012</span>
								by <span class='authorname'>Damien Laureaux</span><br>
								<a class="icon-bg icon-link" href="question/140909/detect-link-and-open-new-window#answer-248345" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-248347">
				
						<section>
							<p>Hello Damien,<br>Thank for you answer but i got an error in your code.<br>I searching for the problem.</p>
<p>Thanks again !</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 30th 2012, 11:22:10 am">September 30th 2012</span>
								by <span class='authorname'>Suon Nicolas</span><br>
								<a class="icon-bg icon-link" href="question/140909/detect-link-and-open-new-window#answer-248347" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-248357">
				
						<section>
							<p>@Suon Nicolas you will need to write JS code that parses the XML feed you recieve and modifiy the dom to allow for the links to be updated with the proper appcelerator event code</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 30th 2012, 4:47:21 pm">September 30th 2012</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/140909/detect-link-and-open-new-window#answer-248357" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>found this old blog post that discusses parsing HTML and replacing links with other code. Maybe you can get a solution from this</p>
<p><strong><a href="http:&#x2F;&#x2F;blog.clearlyinnovative.com&#x2F;post&#x2F;2847924695&#x2F;titanium-appcelerator-quickie-disable-links-in-webview">http:&#x2F;&#x2F;blog.clearlyinnovative.com&#x2F;post&#x2F;2847924695&#x2F;titanium-appcelerator-quickie-disable-links-in-webview</a></strong></p>
</p>
										<div class="author">
											&mdash; commented <span title="September 30th 2012, 4:50:28 pm">September 30th 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
