<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>JSON.parse refuses to work » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>JSON.parse refuses to work</h1>
		</header>
		<section>
			<p>Hey folks,</p>
<p>i have modified the example application for handling remote data, to work for my own JSON API.<br>But it refuses to work. When i execute my code with the android emulator the screen remains white and this is the output of the Studio Console:</p>
<pre><code class="hljs">[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">V8Exception( 1041)</span>] Exception occurred at undefined:1: Uncaught SyntaxError: Unexpected token ?
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>] (KrollRuntimeThread) [5698,5698] Error parsing XML
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>] org.xml.sax.SAXParseException: Unexpected token (position:TEXT {"status":"ok","...@1:374 in java.io.InputStreamReader@40f8e290) 
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:146)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:107)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at ti.modules.titanium.xml.XMLModule.parse(XMLModule.java:82)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at ti.modules.titanium.xml.XMLModule.parse(XMLModule.java:68)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at ti.modules.titanium.network.TiHTTPClient.getResponseXML(TiHTTPClient.java:641)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at ti.modules.titanium.network.HTTPClientProxy.getResponseXML(HTTPClientProxy.java:82)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at org.appcelerator.kroll.runtime.v8.V8Object.nativeCallProperty(Native Method)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at org.appcelerator.kroll.runtime.v8.V8Object.callProperty(V8Object.java:63)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:932)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at android.os.Handler.dispatchMessage(Handler.java:95)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at android.os.Looper.loop(Looper.java:137)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>]     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:112)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>] (KrollRuntimeThread) [29,5727] Error parsing XML
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>] org.xml.sax.SAXParseException: Unexpected token (position:TEXT {"status":"ok","...@1:374 in java.io.InputStreamReader@40f8e290) 
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:146)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:107)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at ti.modules.titanium.xml.XMLModule.parse(XMLModule.java:82)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at ti.modules.titanium.xml.XMLModule.parse(XMLModule.java:68)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at ti.modules.titanium.network.TiHTTPClient.getResponseXML(TiHTTPClient.java:641)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at ti.modules.titanium.network.HTTPClientProxy.getResponseXML(HTTPClientProxy.java:82)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at org.appcelerator.kroll.runtime.v8.V8Object.nativeCallProperty(Native Method)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at org.appcelerator.kroll.runtime.v8.V8Object.callProperty(V8Object.java:63)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:932)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at android.os.Handler.dispatchMessage(Handler.java:95)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at android.os.Looper.loop(Looper.java:137)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient( 1041)</span>]     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:112)
</code></pre><p>This is my code:</p>
<pre><code class="hljs">Ti.UI.backgroundColor = <span class="hljs-string">'#dddddd'</span>;

<span class="hljs-keyword">var</span> url = <span class="hljs-string">"XXXXX"</span>;
<span class="hljs-keyword">var</span> win = Ti.UI.createWindow();
<span class="hljs-keyword">var</span> table = Ti.UI.createTableView();
<span class="hljs-keyword">var</span> tableData = [];
<span class="hljs-keyword">var</span> json, partys, party, i, row, nameLabel, flyerLabel;

<span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({
    onload: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// Ti.API.debug(this.responseText);</span>

    json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; json.partys.length; i++) {
        party = json.partys[i];
        row = Ti.UI.createTableViewRow({
            height:<span class="hljs-string">'60dp'</span>
        });
        nameLabel = Ti.UI.createLabel({
            text:party.name,
            font:{
                fontSize:<span class="hljs-string">'24dp'</span>,
            fontWeight:<span class="hljs-string">'bold'</span>
        },
        height:<span class="hljs-string">'auto'</span>,
        left:<span class="hljs-string">'10dp'</span>,
        top:<span class="hljs-string">'5dp'</span>,
        color:<span class="hljs-string">'#000'</span>,
        touchEnabled:<span class="hljs-literal">false</span>
        });
        flyerLabel = Ti.UI.createLabel({
        text:<span class="hljs-string">'"'</span> + party.flyer + <span class="hljs-string">'"'</span>,
        font:{
            fontSize:<span class="hljs-string">'16dp'</span>
        },
        height:<span class="hljs-string">'auto'</span>,
        left:<span class="hljs-string">'15dp'</span>,
        bottom:<span class="hljs-string">'5dp'</span>,
        color:<span class="hljs-string">'#000'</span>,
        touchEnabled:<span class="hljs-literal">false</span>
        });

        row.add(nameLabel);
        row.add(flyerLabel);
        tableData.push(row);
        }

    table.setData(tableData);
    },
    onerror: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    Ti.API.debug(<span class="hljs-string">"STATUS: "</span> + <span class="hljs-keyword">this</span>.status);
    Ti.API.debug(<span class="hljs-string">"TEXT:   "</span> + <span class="hljs-keyword">this</span>.responseText);
    Ti.API.debug(<span class="hljs-string">"ERROR:  "</span> + e.error);
    alert(<span class="hljs-string">'There was an error retrieving the remote data. Try again.'</span>);
    },
    timeout:<span class="hljs-number">5000</span>
});

xhr.open(<span class="hljs-string">"GET"</span>, url);
xhr.send();

win.add(table);
win.open();
</code></pre><p>And this is the json File which is loaded:</p>
<pre><code class="hljs">{
    "<span class="hljs-attribute">status</span>": <span class="hljs-value"><span class="hljs-string">"ok"</span></span>,
    "<span class="hljs-attribute">count</span>": <span class="hljs-value"><span class="hljs-number">4</span></span>,
    "<span class="hljs-attribute">partys</span>": <span class="hljs-value">[
        {
            "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"2"</span></span>,
            "<span class="hljs-attribute">partyname</span>": <span class="hljs-value"><span class="hljs-string">"Ladies Night"</span></span>,
            "<span class="hljs-attribute">flyer</span>": <span class="hljs-value"><span class="hljs-string">"0d2b75ac5e19bfbd2bca517af9ef103a_7.jpg"</span>
        </span>},
        {
            "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"1"</span></span>,
            "<span class="hljs-attribute">partyname</span>": <span class="hljs-value"><span class="hljs-string">"Sprudelwasser"</span></span>,
            "<span class="hljs-attribute">flyer</span>": <span class="hljs-value"><span class="hljs-string">"1f2910a49cfca4b79cff2de2e08b952f_7.jpg"</span>
        </span>},
        {
            "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"4"</span></span>,
            "<span class="hljs-attribute">partyname</span>": <span class="hljs-value"><span class="hljs-string">"Party 4"</span></span>,
            "<span class="hljs-attribute">flyer</span>": <span class="hljs-value"><span class="hljs-string">"1d621029687450ded97c3530e24c1f04_7.jpg"</span>
        </span>},
        {
            "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"3"</span></span>,
            "<span class="hljs-attribute">partyname</span>": <span class="hljs-value"><span class="hljs-string">"Laut!"</span></span>,
            "<span class="hljs-attribute">flyer</span>": <span class="hljs-value"><span class="hljs-string">"dec91a86213d3f13f279ba5c249f4386_7.jpg"</span>
        </span>}
    ]
</span>}
</code></pre><p>Sorry for the long listings.<br>I dont know where my mistake is. Maybe my JSON in invalid but JSONLint says it is valid. </p>
<p><em>Infos</em>:</p>
<ul>
<li>Windows 8</li>
<li>Titanium SDK 3.0 </li>
<li>Android SDK 4.2</li>
<li>Android Emulator</li>
</ul>
<p>Thank you for your help.<br>Kevin</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 1st 2013, 4:10:25 pm">February 1st 2013</span>
				by <span class='authorname'>Kevin Behrens</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>api</span></li>
					
						<li><span class='tagname'>json</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>7</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>7 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-255941">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>in your loop for the name of the party you are using &quot;party.name&quot; when it should be &quot;party.partyname&quot;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 1st 2013, 4:14:42 pm">February 1st 2013</span>
								by <span class='authorname'>Arian Caraballo</span><br>
								<a class="icon-bg icon-link" href="question/147752/jsonparse-refuses-to-work#answer-255941" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Arian is right you need to change your party.name to party.partyname to access the JSON data .</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 1st 2013, 4:39:54 pm">February 1st 2013</span>
											by <span class='authorname'>Nabeel  Munawar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Kevin did you solved your problem?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 5th 2013, 6:01:14 am">February 5th 2013</span>
											by <span class='authorname'>Nabeel  Munawar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265714">
				
						<section>
							<p>I got the same problem. All though the answer solves the problem in this case it is not the real solution. Even though you would use a object field that is undefined it should not respond with this error. I got the same problem with parsing JSON.</p>
<p>Does anybody now the real solution to this problem?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 10th 2013, 5:23:23 pm">July 10th 2013</span>
								by <span class='authorname'>Wienke Giezeman</span><br>
								<a class="icon-bg icon-link" href="question/147752/jsonparse-refuses-to-work#answer-265714" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265742">
				
						<section>
							<p>For me the problem was that in the case the response was invalid json the whole app crashed. What I did is the following:</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^[\],:{}\s]*$/</span>.test(<span class="hljs-keyword">this</span>.responseText.replace(<span class="hljs-regexp">/\\["\\\/bfnrtu]/g</span>, <span class="hljs-string">'@'</span>).replace(<span class="hljs-regexp">/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g</span>, <span class="hljs-string">']'</span>).replace(<span class="hljs-regexp">/(?:^|:|,)(?:\s*\[)+/g</span>, <span class="hljs-string">''</span>))) {
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-keyword">var</span> data = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
                    } <span class="hljs-keyword">catch</span> (e) {
                        <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>.responseText;
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>.responseText;

                }
<span class="hljs-keyword">return</span> data;
</code></pre><p>Before parsing the responseText I did a regular expression check on the string.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 11th 2013, 5:39:41 am">July 11th 2013</span>
								by <span class='authorname'>Wienke Giezeman</span><br>
								<a class="icon-bg icon-link" href="question/147752/jsonparse-refuses-to-work#answer-265742" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-264083">
				
						<section>
							<p>While the above may be a problem, I do not believe it is the real error being exhibited.  I am getting the same error on code that JSON parsing that worked fine in previous Titanium SDKs.  I find it odd that the error listed is coming from the XML Module (XMLModule( 1041)] org.xml.sax.SAXParseException) when Kevin shows no XML in use and no XML is in use in my own program.  This is some sort of bug in the Titanium 3.x SDK.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 10th 2013, 8:31:53 pm">June 10th 2013</span>
								by <span class='authorname'>Stephen Barker</span><br>
								<a class="icon-bg icon-link" href="question/147752/jsonparse-refuses-to-work#answer-264083" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-278044">
				
						<section>
							<p>Hello,</p>
<p>Just had the exact same problem. But I couldn&#39;t help notice the following:</p>
<pre><code class="hljs">ti<span class="hljs-class">.modules</span><span class="hljs-class">.titanium</span><span class="hljs-class">.network</span><span class="hljs-class">.TiHTTPClient</span><span class="hljs-class">.getResponseXML</span>(TiHTTPClient<span class="hljs-class">.java</span>:<span class="hljs-number">641</span>)
</code></pre><p>The above means that the TiHTTPClient is attempting to parse the Response as XML even though we are not trying to get:</p>
<pre><code class="hljs"><span class="hljs-keyword">this</span>.responseXML
</code></pre><p>This drove me to test the following:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> info</span>={<span class="hljs-string">"data"</span>:<span class="hljs-string">"datos"</span>};
<span class="hljs-variable"><span class="hljs-keyword">var</span> str_json</span>=JSON.stringify(info);
Ti.API.debug(str_json);
<span class="hljs-variable"><span class="hljs-keyword">var</span> json</span>=JSON.parse(str_json);
Ti.API.debug(json.data);
</code></pre><p>And the output was:</p>
<pre><code class="hljs"><span class="hljs-string">[DEBUG]</span> : {<span class="hljs-string">"data"</span>:<span class="hljs-string">"datos"</span>}
<span class="hljs-string">[DEBUG]</span> :  datos
</code></pre><p>Therefore, JSON.parse is working correctly.</p>
<p>After that, I removed my JSON.parse(this.responseText) code completely and the:</p>
<pre><code class="hljs">[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">XMLModule( 1041)</span>] org.xml.sax.SAXParseException: Unexpected token (position:TEXT
</code></pre><p>kept showing. Therefore, JSON.parse is not the problem, =D.</p>
<p>What was the problem in my case, was a &quot;window.setToolBar&quot; because Android had an issue with that line. I just overlooked it because of the bigger issue that a JSON.parse was. I removed that line and problem solved!!!</p>
<p>In the case of @Kevin problem, I think the issue might be around:</p>
<pre><code class="hljs">[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">V8Exception( 1041)</span>] Exception occurred at undefined:1: Uncaught SyntaxError: Unexpected token ?
</code></pre><p>Perhaps if this error is solved, then the XML issue might be solved.</p>
<p>Could anyone having a similar issue with JSON.parse XML confirm?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 23rd 2014, 4:42:41 am">April 23rd 2014</span>
								by <span class='authorname'>Gerardo Camacho</span><br>
								<a class="icon-bg icon-link" href="question/147752/jsonparse-refuses-to-work#answer-278044" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I have had similar problem … I&#39;m sure its connected to the fact that I get <strong>this.responseText</strong> reading :</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   string<span class="hljs-list">(<span class="hljs-keyword">13</span>)</span> <span class="hljs-string">"BE-OVWE-00002"</span>
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   array<span class="hljs-list">(<span class="hljs-keyword">1</span>)</span> {
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   <span class="hljs-list">[<span class="hljs-string">"searchkey"</span>]=&gt;
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   string<span class="hljs-list">(<span class="hljs-keyword">13</span>)</span> <span class="hljs-string">"BE-OVWE-00002"</span>
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   }
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   {<span class="hljs-string">"SearchKey"</span>:<span class="hljs-string">"BE-OVWE-00002"</span>,<span class="hljs-string">"Manufacturer"</span>:<span class="hljs-string">"Oak Valley Wine Estate"</span>,<span class="hljs-string">"ProductType"</span>:<span class="hljs-string">"Wine White"</span>,<span class="hljs-string">"SKU1"</span>:<span class="hljs-string">"Chardonnay"</span>,<span class="hljs-string">"SKU2"</span>:<span class="hljs-string">"Vintage 2010"</span>,<span class="hljs-string">"SKU3"</span>:<span class="hljs-string">"None"</span>,<span class="hljs-string">"Description"</span>:<span class="hljs-string">"Medium Oak Crisp Slight Yellow."</span>}</span></span></span></span></span></span></span>
</code></pre><p>… whereas PHP (json_encode) output from web server gives :</p>
<pre><code class="hljs">
 {"<span class="hljs-attribute">SearchKey</span>":<span class="hljs-value"><span class="hljs-string">"BE-OVWE-00002"</span></span>,"<span class="hljs-attribute">Manufacturer</span>":<span class="hljs-value"><span class="hljs-string">"Oak Valley Wine Estate"</span></span>,"<span class="hljs-attribute">ProductType</span>":<span class="hljs-value"><span class="hljs-string">"Wine White"</span></span>,"<span class="hljs-attribute">SKU1</span>":<span class="hljs-value"><span class="hljs-string">"Chardonnay"</span></span>,"<span class="hljs-attribute">SKU2</span>":<span class="hljs-value"><span class="hljs-string">"Vintage 2010"</span></span>,"<span class="hljs-attribute">SKU3</span>":<span class="hljs-value"><span class="hljs-string">"None"</span></span>,"<span class="hljs-attribute">Description</span>":<span class="hljs-value"><span class="hljs-string">"Medium Oak Crisp Slight Yellow."</span></span>}
</code></pre><p>The responseText output is not json but the PHP (json_encode) is json. </p>
<p>As a newby to Titanium and JS this has been driving me crazy … anyone with a solution or guidance where I&#39;m going wrong?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 21st 2014, 1:06:45 pm">May 21st 2014</span>
											by <span class='authorname'>William Hall</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-283025">
				
						<section>
							<p>HI everyone,</p>
<p>I am facing the same issue in android, it works fine in ios, but none of above comment help me. I am using 3.4.0 SDK in android.<br>i am trying to decode base64 data  and then i parsing the data and i am facing below error<br>Did anybody got success in getting data perfectly in android…?</p>
<p>Any type of help will be appreciated.. Thanx in advance..</p>
<p>let me know, more info is nedded</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err: java.lang.ArrayIndexOutOfBoundsException: length=255<span class="hljs-comment">; index=-17</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.apache.commons.codec.binary.Base64.isBase64<span class="hljs-list">(<span class="hljs-keyword">Base64.java:137</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.apache.commons.codec.binary.Base64.discardNonBase64<span class="hljs-list">(<span class="hljs-keyword">Base64.java:478</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.apache.commons.codec.binary.Base64.decodeBase64<span class="hljs-list">(<span class="hljs-keyword">Base64.java:374</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at ti.modules.titanium.utils.UtilsModule.base64decode<span class="hljs-list">(<span class="hljs-keyword">UtilsModule.java:86</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.kroll.runtime.v8.V8Object.nativeCallProperty<span class="hljs-list">(<span class="hljs-keyword">Native</span> Method)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.kroll.runtime.v8.V8Object.callProperty<span class="hljs-list">(<span class="hljs-keyword">V8Object.java:69</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.kroll.KrollProxy.handleMessage<span class="hljs-list">(<span class="hljs-keyword">KrollProxy.java:1121</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at android.os.Handler.dispatchMessage<span class="hljs-list">(<span class="hljs-keyword">Handler.java:95</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at android.os.Looper.loop<span class="hljs-list">(<span class="hljs-keyword">Looper.java:137</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run<span class="hljs-list">(<span class="hljs-keyword">KrollRuntime.java:112</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  V8Exception: Exception occurred at alloy/controllers/index.js:21: Uncaught Error: length=255<span class="hljs-comment">; index=-17</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule: <span class="hljs-list">(<span class="hljs-keyword">KrollRuntimeThread</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">195692</span>,<span class="hljs-number">195692</span>] Error parsing XML
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule: org.xml.sax.SAXParseException: Unexpected token <span class="hljs-list">(<span class="hljs-keyword">position:TEXT</span> eyJ0aW1lc3RhbXAi...@1:3793 in java.io.InputStreamReader@52de5c00)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse<span class="hljs-list">(<span class="hljs-keyword">DocumentBuilderImpl.java:146</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at javax.xml.parsers.DocumentBuilder.parse<span class="hljs-list">(<span class="hljs-keyword">DocumentBuilder.java:107</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at ti.modules.titanium.xml.XMLModule.parse<span class="hljs-list">(<span class="hljs-keyword">XMLModule.java:82</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at ti.modules.titanium.network.TiHTTPClient.getResponseXML<span class="hljs-list">(<span class="hljs-keyword">TiHTTPClient.java:662</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at ti.modules.titanium.network.HTTPClientProxy.getResponseXML<span class="hljs-list">(<span class="hljs-keyword">HTTPClientProxy.java:105</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at org.appcelerator.kroll.runtime.v8.V8Object.nativeCallProperty<span class="hljs-list">(<span class="hljs-keyword">Native</span> Method)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at org.appcelerator.kroll.runtime.v8.V8Object.callProperty<span class="hljs-list">(<span class="hljs-keyword">V8Object.java:69</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at android.os.Handler.dispatchMessage<span class="hljs-list">(<span class="hljs-keyword">Handler.java:95</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at android.os.Looper.loop<span class="hljs-list">(<span class="hljs-keyword">Looper.java:137</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  XMLModule:     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run<span class="hljs-list">(<span class="hljs-keyword">KrollRuntime.java:112</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient: <span class="hljs-list">(<span class="hljs-keyword">KrollRuntimeThread</span>)</span> <span class="hljs-list">[<span class="hljs-keyword">2</span>,<span class="hljs-number">195694</span>] Error parsing XML
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient: org.xml.sax.SAXParseException: Unexpected token <span class="hljs-list">(<span class="hljs-keyword">position:TEXT</span> eyJ0aW1lc3RhbXAi...@1:3793 in java.io.InputStreamReader@52de5c00)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse<span class="hljs-list">(<span class="hljs-keyword">DocumentBuilderImpl.java:146</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at javax.xml.parsers.DocumentBuilder.parse<span class="hljs-list">(<span class="hljs-keyword">DocumentBuilder.java:107</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at ti.modules.titanium.xml.XMLModule.parse<span class="hljs-list">(<span class="hljs-keyword">XMLModule.java:82</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at ti.modules.titanium.network.TiHTTPClient.getResponseXML<span class="hljs-list">(<span class="hljs-keyword">TiHTTPClient.java:662</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at ti.modules.titanium.network.HTTPClientProxy.getResponseXML<span class="hljs-list">(<span class="hljs-keyword">HTTPClientProxy.java:105</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at org.appcelerator.kroll.runtime.v8.V8Object.nativeCallProperty<span class="hljs-list">(<span class="hljs-keyword">Native</span> Method)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at org.appcelerator.kroll.runtime.v8.V8Object.callProperty<span class="hljs-list">(<span class="hljs-keyword">V8Object.java:69</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at org.appcelerator.kroll.KrollProxy.handleMessage<span class="hljs-list">(<span class="hljs-keyword">KrollProxy.java:1121</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at android.os.Handler.dispatchMessage<span class="hljs-list">(<span class="hljs-keyword">Handler.java:95</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at android.os.Looper.loop<span class="hljs-list">(<span class="hljs-keyword">Looper.java:137</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  TiHttpClient:     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run<span class="hljs-list">(<span class="hljs-keyword">KrollRuntime.java:112</span>)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 11th 2014, 12:28:03 pm">October 11th 2014</span>
								by <span class='authorname'>Sagar  Patel</span><br>
								<a class="icon-bg icon-link" href="question/147752/jsonparse-refuses-to-work#answer-283025" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-283066">
				
						<section>
							<p>The thing this &quot;bug&quot; is that the real error is in the first &quot;exception&quot; that is shown, even though it is followed by an &quot;Error parsing XML&quot; exception. In your case, an ArrayIndexOutOfBoundsException appears at the beginning. I would suspect that one. In my case, and the following 10 mistakes I had that had nothing to do with parsing XML, that was the issue. I paid attention to the first &quot;exception&quot; and once it was solved, the &quot;Error parsing XML&quot; disappeared.</p>
<p>Hope it helps.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 13th 2014, 5:55:18 pm">October 13th 2014</span>
								by <span class='authorname'>Gerardo Camacho</span><br>
								<a class="icon-bg icon-link" href="question/147752/jsonparse-refuses-to-work#answer-283066" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
