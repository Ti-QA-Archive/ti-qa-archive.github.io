<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>For loop Count  PLEASE HELP » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>For loop Count  PLEASE HELP</h1>
		</header>
		<section>
			<p>Hi all,<br>I have a for loop that populates to the amount of files in a Json and I give each item an ID in the for loop so if i click on one the id will display of the specific one but it only displays the last ID in the loop</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lblTaskName;
<span class="hljs-keyword">var</span> url = <span class="hljs-string">'https://raw.github.com/appcelerator/Documentation-Examples/master/HTTPClient/data/json.txt'</span>;
<span class="hljs-keyword">var</span> json , Task , i , row;
<span class="hljs-keyword">var</span> table = Ti.UI.createTableView({ top:<span class="hljs-string">'11%'</span>,bottom:<span class="hljs-string">'11%'</span>});
<span class="hljs-keyword">var</span> tableData = []; 
<span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({
    onload:  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);

<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; json.fighters.length ; i++){
    Task = json.fighters[i];
    row = Ti.UI.createTableViewRow(
    {
        top:<span class="hljs-string">'12%'</span>,
        height:<span class="hljs-number">100</span>,
    });
    lblTaskName = Ti.UI.createLabel(
    {
        text:Task.name,
        font:{fontSize:<span class="hljs-string">'24dp'</span>},
        height:<span class="hljs-string">'auto'</span>,
        left:<span class="hljs-string">'1%'</span>,
        top:<span class="hljs-string">'10%'</span>,
        color:<span class="hljs-string">'#000'</span>,
        nameID:i,
        touchEnabled:<span class="hljs-literal">true</span>,    
    });
    lblTaskName.addEventListener(<span class="hljs-string">'singletap'</span>,Validate)
    row.add(lblTaskName);
      tableData.push(row);
}
    table.setData(tableData);
},
</code></pre><p>and the validate Function is </p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Validate</span><span class="hljs-params">(e)</span>
</span>{
    <span class="hljs-keyword">var</span> ID = lblTaskName.nameID;
    alert(ID);
    <span class="hljs-comment">//Rest of code will follow but need ID first</span>
};
</code></pre><p>And it always displays the last ID of the loop</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 2nd 2012, 5:38:51 am">November 2nd 2012</span>
				by <span class='authorname'>Stiaan Maas</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>for</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>table</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Rather than alerting ID, what is e.source.ID?</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 2nd 2012, 5:57:06 am">November 2nd 2012</span>
								by <span class='authorname'>Mark Henderson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>sorry I don&#39;t understand what you are asking ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 2nd 2012, 5:58:27 am">November 2nd 2012</span>
								by <span class='authorname'>Stiaan Maas</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-250437">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>As far is I understand, don&#39;t set event listener for each label in a row, set only one listener for your tableview instead. </p>
<pre><code class="hljs"><span class="hljs-built_in">table</span>.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span> {
    Ti.API.info(<span class="hljs-string">"e.row.id: "</span>+e.row.id);
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 2nd 2012, 6:03:25 am">November 2nd 2012</span>
								by <span class='authorname'>Moritz Knecht</span><br>
								<a class="icon-bg icon-link" href="question/144269/for-loop-count-please-help.html#answer-250437" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>sorry, i forgot that you have to tag the id in your row first</p>
<pre><code class="hljs">row = Ti.UI.createTableViewRow<span class="hljs-comment">(
    {
        top:'12%',
        id:i,
        height:100,
    })</span>;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 6:07:36 am">November 2nd 2012</span>
											by <span class='authorname'>Moritz Knecht</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Um i don&#39;t fully understand what is happening in that what is the e.row.id … Sorry I&#39;m very new to this</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 6:14:44 am">November 2nd 2012</span>
											by <span class='authorname'>Stiaan Maas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK now i get it I&#39;ll try that thanx</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 6:15:36 am">November 2nd 2012</span>
											by <span class='authorname'>Stiaan Maas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Nope it still returns the last Nr of the loop</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 6:17:09 am">November 2nd 2012</span>
											by <span class='authorname'>Stiaan Maas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The problem is in your variable definitions. You&#39;ve set a a global variable lblTaskName<br>and then used it for every row, so only the last redefinition persists. Try this Code instead, now the variables are only declared when they are required and the row identification logic is not done via the objects itself. You identify your rows via the data in the tableData array you&#39;ve created..</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> url = <span class="hljs-string">'https://raw.github.com/appcelerator/Documentation-Examples/master/HTTPClient/data/json.txt'</span>;

<span class="hljs-keyword">var</span> table = Ti.UI.createTableView({ top:<span class="hljs-string">'11%'</span>,bottom:<span class="hljs-string">'11%'</span>});
<span class="hljs-keyword">var</span> tableData = []; 
<span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({
    onload:  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);

<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; json.fighters.length ; i++){
    Task = json.fighters[i];
    <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow(
    {
        top:<span class="hljs-string">'12%'</span>,
    nameID:i,
        height:<span class="hljs-number">100</span>,
    });
    <span class="hljs-keyword">var</span> lblTaskName = Ti.UI.createLabel(
    {
        text:Task.name,
        font:{fontSize:<span class="hljs-string">'24dp'</span>},
        height:<span class="hljs-string">'auto'</span>,
        left:<span class="hljs-string">'1%'</span>,
        top:<span class="hljs-string">'10%'</span>,
        color:<span class="hljs-string">'#000'</span>,
        touchEnabled:<span class="hljs-literal">true</span>,  
    });
    row.add(lblTaskName);
    tableData.push(row);
}
    table.setData(tableData);
},
....

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Validate</span>(<span class="hljs-params">e</span>)
</span>{
    <span class="hljs-comment">// var ID = lblTaskName.nameID; &lt;-- that's was the problem</span>
    <span class="hljs-keyword">var</span> ID = e.row.nameID;
    alert(ID);
    <span class="hljs-comment">//Rest of code will follow but need ID first</span>
};

table.addEventListener(<span class="hljs-string">'click'</span>, Validate);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 6:36:34 am">November 2nd 2012</span>
											by <span class='authorname'>Moritz Knecht</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The only problem with this is that the  <code>var ID = e.row.nameID;</code> cant be accessed from the function because it is created inside the other function so it gives me an error</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 6:50:04 am">November 2nd 2012</span>
											by <span class='authorname'>Stiaan Maas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Can you post what is in your &quot;e&quot; variable?<br>do it like this…</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Validate</span>(<span class="hljs-params">e</span>) </span>{
    Ti.API.info(<span class="hljs-string">"e: "</span>+<span class="hljs-built_in">JSON</span>.stringify(e));
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 6:58:36 am">November 2nd 2012</span>
											by <span class='authorname'>Moritz Knecht</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Never mind it was my Mistake it works Thanks a lot for the help can you maybe explain the reson for the e in the  e.row  because that&#39;s  what gave the error</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 6:59:56 am">November 2nd 2012</span>
											by <span class='authorname'>Stiaan Maas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>what&#39;s going on here is called a callback. take a look at http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.1&#x2F;index.html#!&#x2F;api&#x2F;Titanium.UI.TableView-event-click</p>
<p>when the tableView is clicked, a callback function is called, </p>
<pre><code class="hljs">table.addEventListenter(<span class="hljs-string">'click'</span>, &lt;here is <span class="hljs-operator">the</span> place <span class="hljs-keyword">for</span> <span class="hljs-operator">the</span> callback <span class="hljs-function"><span class="hljs-keyword">function</span>&gt;);</span>
</code></pre><p>The function which is called does have one parameter, which is an object</p>
<pre><code class="hljs"><span class="hljs-built_in">table</span>.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(&lt;this is the parameter&gt;)</span></span> {

});
</code></pre><p>&quot;e&quot; is just a random name for that parameter, in this case i will name the parameter &quot;evt&quot;</p>
<pre><code class="hljs">table.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
    <span class="hljs-comment">// now u can access the object with the name "evt"</span>
    Ti.API.info(<span class="hljs-string">"evt: "</span>+<span class="hljs-built_in">JSON</span>.stringify(evt)); <span class="hljs-comment">// this prints you out whats in the variable "evt" </span>
});
</code></pre><p>in your case you assigned the &quot;Validate&quot; function as your callback</p>
<pre><code class="hljs"><span class="hljs-built_in">table</span>.addEventListener(<span class="hljs-string">'click'</span>, Validate);
</code></pre><p>this is equivalent to </p>
<pre><code class="hljs"><span class="hljs-built_in">table</span>.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span></span> {
    Validate(evt);
});
</code></pre><p>now  your &quot;Validate&quot; function is called with &quot;evt&quot; as the parameter</p>
<p>A Callback is simply passing a function as a parameter to another function</p>
<pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-built_in">print</span>Variable(<span class="hljs-built_in">test</span>String) {
    Ti.API.info(<span class="hljs-built_in">test</span>String);
}

<span class="hljs-keyword">function</span> <span class="hljs-built_in">test</span>Callback(myVariable, callbackFunction) {
    callbackFunction(myVariable);
}

<span class="hljs-built_in">test</span>Callback(<span class="hljs-string">"hello world"</span>, <span class="hljs-built_in">print</span>Variable);
</code></pre><p>Hope this helps</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 7:21:10 am">November 2nd 2012</span>
											by <span class='authorname'>Moritz Knecht</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank you  very much that helped a lot have a much better understanding of it now</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 2nd 2012, 7:26:26 am">November 2nd 2012</span>
											by <span class='authorname'>Stiaan Maas</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
