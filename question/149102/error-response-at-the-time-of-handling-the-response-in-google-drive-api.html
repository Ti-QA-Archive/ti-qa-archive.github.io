<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Error response at the time of Handling the Response in Google Drive API Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Error response at the time of Handling the Response in Google Drive API</h1>
		</header>
		<section>
			<p>Hi ,</p>
<p>Am use the Google Drive API in my application. It through error response at the time of Handling the Response.  For IOS it is working fine. For Android only it through error. </p>
<p>Bellow is the code am send the request to serve.<br>Please any one help to solve this problem</p>
<p><a href="https:&#x2F;&#x2F;developers.google.com&#x2F;accounts&#x2F;docs&#x2F;OAuth2InstalledApp#formingtheurl">Refernce Link for google Drive API</a></p>
<pre><code class="hljs">xhr.open(<span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span>, <span class="hljs-string">"http://accounts.google.com/o/oauth2/token"</span>);//https://accounts.google.com/o/oauth2/auth
        xhr.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/x-www-form-urlencoded"</span>);
        var data = {
            <span class="hljs-string">"code"</span> : code,
            <span class="hljs-string">"client_id"</span> : _opt.clientId,
            <span class="hljs-string">"client_secret"</span> : _opt.clientSecret,
            <span class="hljs-string">"redirect_uri"</span> : <span class="hljs-string">"urn:ietf:wg:oauth:2.0:oob"</span>,
            <span class="hljs-string">"grant_type"</span> : <span class="hljs-string">"authorization_code"</span>
        }
        // Send the request.
        xhr.send(data);
</code></pre><p>Thanks is Advance.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 4th 2013, 4:27:08 am">March 4th 2013</span>
				by <span class='authorname'>Nishanth S</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>api</span></li>
					
						<li><span class='tagname'>google</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>How you implemented google drive for iPhone , do you have same code which we I can get for implementing this .</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 10th 2013, 3:47:54 am">November 10th 2013</span>
								by <span class='authorname'>Moiz Chhatriwala</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Can you please provide link for iphone module .</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 10th 2013, 3:51:06 am">November 10th 2013</span>
								by <span class='authorname'>Moiz Chhatriwala</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-258023">
				
						<section>
							<p>Hi Nishanth, though you say that it works fine in iOS so seems weird, but try to stringify your data object before sending it to server.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 4th 2013, 10:03:46 am">March 4th 2013</span>
								by <span class='authorname'>Ashish Nigam</span><br>
								<a class="icon-bg icon-link" href="question/149102/error-response-at-the-time-of-handling-the-response-in-google-drive-api.html#answer-258023" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Ashish, Am try that too it wont work for me.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 4th 2013, 10:17:49 am">March 4th 2013</span>
											by <span class='authorname'>Nishanth S</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-261080">
				
						<section>
							<p>I got the Answer for the problem</p>
<p>Refer Bellow Link </p>
<p><a href="http:&#x2F;&#x2F;smnishanth.blogspot.in&#x2F;2013&#x2F;04&#x2F;google-oauth-android.html">Google Auth</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 19th 2013, 5:01:45 am">April 19th 2013</span>
								by <span class='authorname'>Nishanth S</span><br>
								<a class="icon-bg icon-link" href="question/149102/error-response-at-the-time-of-handling-the-response-in-google-drive-api.html#answer-261080" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Nishanth, Thanks to provide the link. This link use to authenticate the user but i also want to upload a file into drive. I did the code as given in <a href="https:&#x2F;&#x2F;developers.google.com&#x2F;drive&#x2F;manage-uploads">Upload file</a> link. But getting wired error as 400 HTTP Error. Can you help me?<br>My Code::</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhrList = Ti.Network.createHTTPClient({
        onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            alert(<span class="hljs-keyword">this</span>.requestText);
        },
        <span class="hljs-comment">// function called when an error occurs, including a timeout</span>
        onerror : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            Titanium.UI.createAlertDialog({
                title : <span class="hljs-string">'Error'</span>,
                message : <span class="hljs-string">'unable to upload'</span> + <span class="hljs-built_in">JSON</span>.stringify(e)
            }).show();
        },
        timeout : <span class="hljs-number">60000</span>
    });
    xhrList.open(<span class="hljs-string">"POST"</span>, <span class="hljs-string">'https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart'</span>);

    <span class="hljs-keyword">var</span> content = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> boundary = <span class="hljs-string">'foo_bar_baz'</span>;
    content += <span class="hljs-string">'--'</span>+ boundary + <span class="hljs-string">'\r\n'</span>;
    content += <span class="hljs-string">'Content-Type: application/json; charset=UTF-8'</span>;
    content += <span class="hljs-string">'\r\n\r\n{ "title": "logo.png"} \r\n\r\n'</span>;
    content += <span class="hljs-string">'--'</span>+ boundary + <span class="hljs-string">'\r\n'</span>;
    content += <span class="hljs-string">'Content-Type: image/jpeg\r\n \r\n'</span>;
    alert(content);
    <span class="hljs-keyword">var</span> file = Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory, <span class="hljs-string">'appicon.png'</span>);
    <span class="hljs-keyword">var</span> full_content = Ti.createBuffer({value: content});
    <span class="hljs-keyword">var</span> ?leStream = Ti.Stream.createStream({ source : file.read(), mode : Titanium.Stream.MODE_READ});
    <span class="hljs-keyword">var</span> content_size = full_content.append(Ti.Stream.readAll(?leStream));
    content = <span class="hljs-string">'\r\n'</span>
    content += <span class="hljs-string">'--'</span>+ boundary + <span class="hljs-string">'--\r\n'</span>;
    full_content.append(Ti.createBuffer({value : content}));
    xhrList.setRequestHeader(<span class="hljs-string">'Authorization'</span>,  googleAuth.getAccessToken());
    xhrList.setRequestHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'multipart/related; boundary='</span> + boundary);
    xhrList.setRequestHeader(<span class="hljs-string">'Content-Length'</span>,  full_content.getLength());
    <span class="hljs-keyword">var</span> send_data = full_content.toBlob();
    xhrList.send(send_data);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 11th 2013, 12:30:45 pm">November 11th 2013</span>
											by <span class='authorname'>Pooja Laad</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Page on the link above is not available.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 24th 2014, 4:10:44 am">August 24th 2014</span>
											by <span class='authorname'>rik rose</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
