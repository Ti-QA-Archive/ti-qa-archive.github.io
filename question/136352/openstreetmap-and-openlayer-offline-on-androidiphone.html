<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>OpenstreetMap and OpenLayer offline  on Android/iPhone » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>OpenstreetMap and OpenLayer offline  on Android/iPhone</h1>
		</header>
		<section>
			<p>Hi,<br>my goal is an offline map app. Thats why I&#39;am using OpenLayer in a webview:</p>
<pre><code class="hljs">var <span class="hljs-built_in">map</span>;
<span class="hljs-function">function <span class="hljs-title">initMap</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">map</span> = <span class="hljs-keyword">new</span> OpenLayers.Map({
        div: <span class="hljs-string">"map"</span>,
        allOverlays: <span class="hljs-literal">true</span>,
         controls: [
            <span class="hljs-keyword">new</span> OpenLayers.Control.TouchNavigation({
                dragPanOptions: {
                    enableKinetic: <span class="hljs-literal">true</span>
                }
            }),
            <span class="hljs-keyword">new</span> OpenLayers.Control.Zoom()
        ],
         layers: [
            <span class="hljs-keyword">new</span> OpenLayers.Layer.OSM(<span class="hljs-string">"MyTiles"</span>, <span class="hljs-string">"tiles/${z}/${x}/${y}.png"</span>, {
                  numZoomLevels: <span class="hljs-number">18</span>,
                  isBaseLayer: <span class="hljs-literal">false</span>
            })
        ]
    });
    <span class="hljs-built_in">map</span>.setCenter(<span class="hljs-keyword">new</span> OpenLayers.LonLat(<span class="hljs-number">12.334299</span>,<span class="hljs-number">45.4374901</span>).transform(<span class="hljs-keyword">new</span> OpenLayers.Projection(<span class="hljs-string">"EPSG:4326"</span>), <span class="hljs-keyword">new</span> OpenLayers.Projection(<span class="hljs-string">"EPSG:900913"</span>)), <span class="hljs-number">16</span>);
}
</code></pre><p>My problem: this map view works offline fine in simulator, but not on device.<br>On device the tiles leaves empty.</p>
<p>&#39;tiles&#39; is a subfolder in the folder of html file. I dont know the difference …</p>
<p>Rainer </p>
<p>PS: here is  app.html:</p>
<pre><code class="hljs"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width, initial-scale=1.0, user-scalable=0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"apple-mobile-web-app-capable"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"yes"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"openlayer.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"app.js"</span><span class="hljs-value">&lt;</span>/<span class="hljs-attribute">script</span>&gt;</span><span class="handlebars"><span class="xml"> <span class="hljs-comment">&lt;!-- the file above --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">body</span> <span class="hljs-attribute">onload</span>=<span class="hljs-value">"initMap();"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"map"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></span></span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 2nd 2012, 1:04:16 pm">May 2nd 2012</span>
				by <span class='authorname'>Rainer Schleevoigt</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>openlayer</span></li>
					
						<li><span class='tagname'>osm</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I guess, the problem is line:<br>new OpenLayers.Layer.OSM(&quot;MyTiles&quot;, &quot;tiles&#x2F;${z}&#x2F;${x}&#x2F;${y}.png&quot;,);<br>May be the URL is wrong.<br>file:&#x2F;&#x2F;tiles …<br>or …</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 2nd 2012, 1:15:20 pm">May 2nd 2012</span>
								by <span class='authorname'>Rainer Schleevoigt</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-237716">
				
						<section>
							<p>Rename the extensions of any .js files you plan on using in a webview to something else, like .lib. Also make sure to update the extension for the references in your html file. Ti compiles js files and it will cause issues with your openlayer.js file.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 2nd 2012, 4:23:59 pm">May 2nd 2012</span>
								by <span class='authorname'>Andrew Royce</span><br>
								<a class="icon-bg icon-link" href="question/136352/openstreetmap-and-openlayer-offline-on-androidiphone#answer-237716" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
