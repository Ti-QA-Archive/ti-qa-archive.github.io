<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>sql_new doesn&#39;t initially create database and tables » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>sql_new doesn&#39;t initially create database and tables</h1>
		</header>
		<section>
			<p>When using &quot;type&quot;: &quot;sql&quot;, the app successfully creates database and table. But when using &quot;type&quot;: &quot;sql_new&quot; and when I try to drop all tables and run the app again, the app won&#39;t create tables instead throws error</p>
<pre><code class="hljs">[<span class="hljs-keyword">ERROR</span>] :  A SQLite database <span class="hljs-keyword">error</span> occurred <span class="hljs-keyword">on</span> database '/Users/user/Library/Application Support/iPhone Simulator/6.0/Applications/0F75D2DF-36C2-4B4F-940C-926D41539299/Library/Private Documents/_alloy_.sql': <span class="hljs-keyword">Error</span> Domain=com.plausiblelabs.pldatabase Code=3 <span class="hljs-string">"An error occured parsing the provided SQL statement."</span> UserInfo=0xa65da80 {com.plausiblelabs.pldatabase.<span class="hljs-keyword">error</span>.vendor.code=1, NSLocalizedDescription=<span class="hljs-keyword">An</span> <span class="hljs-keyword">error</span> occured parsing the provided SQL statement., com.plausiblelabs.pldatabase.<span class="hljs-keyword">error</span>.<span class="hljs-keyword">query</span>.string=SELECT * FROM TableData, com.plausiblelabs.pldatabase.<span class="hljs-keyword">error</span>.vendor.string=<span class="hljs-keyword">no</span> such <span class="hljs-keyword">table</span>: TableData} (SQLite #1: <span class="hljs-keyword">no</span> such <span class="hljs-keyword">table</span>: TableData) (<span class="hljs-keyword">query</span>: 'SELECT * FROM TableData')
[<span class="hljs-keyword">ERROR</span>] :  invalid SQL statement. <span class="hljs-keyword">Error</span> Domain=com.plausiblelabs.pldatabase Code=3 <span class="hljs-string">"An error occured parsing the provided SQL statement."</span> UserInfo=0xa65da80 {com.plausiblelabs.pldatabase.<span class="hljs-keyword">error</span>.vendor.code=1, NSLocalizedDescription=<span class="hljs-keyword">An</span> <span class="hljs-keyword">error</span> occured parsing the provided SQL statement., com.plausiblelabs.pldatabase.<span class="hljs-keyword">error</span>.<span class="hljs-keyword">query</span>.string=SELECT * FROM TableData, com.plausiblelabs.pldatabase.<span class="hljs-keyword">error</span>.vendor.string=<span class="hljs-keyword">no</span> such <span class="hljs-keyword">table</span>: TableData}  <span class="hljs-keyword">in</span> -[TiDatabaseProxy execute:] (TiDatabaseProxy.<span class="hljs-keyword">m</span>:186)
[<span class="hljs-keyword">ERROR</span>] :  Script <span class="hljs-keyword">Error</span> = invalid SQL statement. <span class="hljs-keyword">Error</span> Domain=com.plausiblelabs.pldatabase Code=3 <span class="hljs-string">"An error occured parsing the provided SQL statement."</span> UserInfo=0xa65da80 {com.plausiblelabs.pldatabase.<span class="hljs-keyword">error</span>.vendor.code=1, NSLocalizedDescription=<span class="hljs-keyword">An</span> <span class="hljs-keyword">error</span> occured parsing the provided SQL statement., com.plausiblelabs.pldatabase.<span class="hljs-keyword">error</span>.<span class="hljs-keyword">query</span>.string=SELECT * FROM TableData, com.plausiblelabs.pldatabase.<span class="hljs-keyword">error</span>.vendor.string=<span class="hljs-keyword">no</span> such <span class="hljs-keyword">table</span>: TableData}  <span class="hljs-keyword">in</span> -[TiDatabaseProxy execute:] (TiDatabaseProxy.<span class="hljs-keyword">m</span>:186) at sql_new.js (<span class="hljs-keyword">line</span> 117).
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 21st 2013, 10:49:15 am">February 21st 2013</span>
				by <span class='authorname'>Mark Anthony Sabandal</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>collection</span></li>
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>model</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-257255">
				
						<section>
							<p>In 1.0 alloy release, sql_new = sql for the type in your model config. So you should have type:sql</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 21st 2013, 10:56:36 am">February 21st 2013</span>
								by <span class='authorname'>David Snell</span><br>
								<a class="icon-bg icon-link" href="question/148602/sqlnew-doesnt-initially-create-database-and-tables#answer-257255" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>but when I do use type:sql I can&#39;t execute custom queries on fetch()</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 11:00:33 am">February 21st 2013</span>
											by <span class='authorname'>Mark Anthony Sabandal</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Delete the app from the simulator and do a reset on simulator. You may have an old db hanging<br>around.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 11:30:11 am">February 21st 2013</span>
											by <span class='authorname'>David Snell</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Also would be a good idea to clean the project so a full rebuild occurs</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 11:32:47 am">February 21st 2013</span>
											by <span class='authorname'>David Snell</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes you can do custom queries with &quot;sql&quot; in 1.0.0. The &quot;sql_new&quot; adapter from 0.3.6 replaced the old &quot;sql&quot; adapter. As stated by David, in 1.0.0, &quot;sql_new&quot; is &quot;sql&quot;.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 11:58:39 am">February 21st 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>still can&#39;t do custom query using adapt type: sql<br>there might be something wrong with my TS.<br>how to check if my TS is using Alloy 1.0? I already check in the terminal &quot;alloy –version&quot; and its 1.0</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 6:53:43 pm">February 21st 2013</span>
											by <span class='authorname'>Mark Anthony Sabandal</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>npm install -g alloy</p>
<p>alloy&#x2F;sync&#x2F;sql.js </p>
<pre><code class="hljs"><span class="hljs-keyword">case</span> <span class="hljs-string">'read'</span>:
            <span class="hljs-keyword">var</span> sql = <span class="hljs-string">'SELECT * FROM '</span>+table;
            <span class="hljs-keyword">var</span> rs = db.execute(sql);
            <span class="hljs-keyword">var</span> <span class="hljs-built_in">len</span> = <span class="hljs-number">0</span>;
</code></pre><p>it should be like <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;alloy&#x2F;blob&#x2F;master&#x2F;Alloy&#x2F;lib&#x2F;alloy&#x2F;sync&#x2F;sql.js">sql.js - github</a></p>
<pre><code class="hljs"><span class="hljs-keyword">case</span> <span class="hljs-string">'read'</span>:
<span class="hljs-keyword">var</span> sql = opts.query || <span class="hljs-string">'SELECT * FROM '</span> + table;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 11:39:53 pm">February 21st 2013</span>
											by <span class='authorname'>Mark Anthony Sabandal</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-257316">
				
						<section>
							<h2 id="i-found-the-problem-and-the-solution">I found the problem and the solution</h2>
<h3 id="problem-">Problem:</h3>
<ul>
<li>Alloy npm registry is old, it says 1.0.0 but the sql.js is not updated</li>
<li>Titanium Studio Updating is buggy, pop-ups password input field and then rejects the password 3 times even though you didn&#39;t mistyped it. Then updates continue but Alloy features is not updated.<h3 id="solution-">Solution:</h3>
<ol>
<li>Clone &#x2F; Pull the latest Alloy source</li>
</ol>
</li>
<li>For Clone: <pre><code class="hljs">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://github.com/appcelerator/alloy.git
</code></pre></li>
</ul>
<pre><code class="hljs"><span class="hljs-built_in">cd</span> Alloy
</code></pre><pre><code class="hljs">sudo npm <span class="hljs-operator"><span class="hljs-keyword">install</span> -<span class="hljs-keyword">g</span> .</span>
</code></pre><ul>
<li>For Pull Update<pre><code class="hljs">go <span class="hljs-built_in">to</span> Alloy <span class="hljs-built_in">folder</span>
</code></pre></li>
</ul>
<pre><code class="hljs">git pull origin <span class="hljs-literal">master</span>
</code></pre><pre><code class="hljs">sudo npm <span class="hljs-operator"><span class="hljs-keyword">install</span> -<span class="hljs-keyword">g</span> .</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 22nd 2013, 12:14:06 am">February 22nd 2013</span>
								by <span class='authorname'>Mark Anthony Sabandal</span><br>
								<a class="icon-bg icon-link" href="question/148602/sqlnew-doesnt-initially-create-database-and-tables#answer-257316" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I just confirmed that installing from npm did not produce this issue. Installing from github should not be necessary and will also have you working with the cutting edge version of alloy that has not had the luxury of full testing. It seems like there&#39;s something wrong with your npm&#x2F;nodejs installation.</p>
<p>You may want to try simply uninstalling alloy through npm and then install it again. </p>
<pre><code class="hljs">sudo npm <span class="hljs-operator"><span class="hljs-keyword">uninstall</span> -<span class="hljs-keyword">g</span> alloy
sudo npm <span class="hljs-keyword">install</span> -<span class="hljs-keyword">g</span> alloy</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 22nd 2013, 10:43:12 am">February 22nd 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks!, currently I&#39;m working on the cutting edge version and it works fine. I&#39;ll do reinstall if I bump into some cutting edge version bug.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 22nd 2013, 10:54:19 am">February 22nd 2013</span>
											by <span class='authorname'>Mark Anthony Sabandal</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
