<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Youtube Video on Android Playing OK but THROWS EXCEPTION » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Youtube Video on Android Playing OK but THROWS EXCEPTION</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I am using this code to play a YOUTUBE VIDEO:</p>
<pre><code class="hljs">exports.openYouTubeVideo = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(appFile)</span></span>{
    <span class="hljs-keyword">var</span> tmpFile = <span class="hljs-literal">undefined</span>,
        newPath = <span class="hljs-literal">undefined</span>;

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span>(Ti.Android.currentActivity == <span class="hljs-literal">null</span>){
                <span class="hljs-comment">// alert("Current activity is null");</span>

            }
            <span class="hljs-keyword">var</span> intent = Ti.Android.createIntent({
                action: Ti.Android.ACTION_VIEW,             
                data: <span class="hljs-string">'vnd.youtube:'</span> + appFile
                 });
            Ti.Android.startActivity(intent);
<span class="hljs-comment">//               </span>
             <span class="hljs-comment">// var intent = Ti.Android.createIntent({</span>
                 <span class="hljs-comment">// action: 'null',</span>
                 <span class="hljs-comment">// data: 'ytv://'+appFile,</span>
                 <span class="hljs-comment">// packageName: 'com.keyes.youtube',</span>
                 <span class="hljs-comment">// className: 'com.keyes.youtube.OpenYouTubePlayerActivity'</span>
             <span class="hljs-comment">// });</span>

        }
        <span class="hljs-keyword">catch</span> (err) {

            <span class="hljs-keyword">var</span> alertDialog = Titanium.UI.createAlertDialog({
                title: <span class="hljs-string">'No Youtube player'</span>,
                message: <span class="hljs-string">'We tried to open a Youtube but failed. Do you want to search the marketplace for a Youtube viewer?'</span>,
                buttonNames: [<span class="hljs-string">'Yes'</span>,<span class="hljs-string">'No'</span>],
                cancel: <span class="hljs-number">1</span>
            });
            alertDialog.show();
            alertDialog.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> </span>{
                <span class="hljs-keyword">if</span> (evt.index == <span class="hljs-number">0</span>) {
                    Ti.Platform.openURL(<span class="hljs-string">'http://search?q=pdf'</span>);
                }
            });
        }

}
</code></pre><p>Everything plays ok (or if it doesn&#39;t find a player app it asks you if you want to download one), but it THROWS an EXCEPTION. This exception does not affect the mobile or the application (if you press continue it runs fine) but I dont want it to show.</p>
<p>Here is the exception error:</p>
<pre><code class="hljs">[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiViewProxy( 1184)</span>] Invalid value, expected type Object.
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiJSError( 1184)</span>] (main) [55,1094271] ----- Titanium Javascript Runtime Error -----
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiJSError( 1184)</span>] (main) [1,1094272] - In ti:/window.js:440,15
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiJSError( 1184)</span>] (main) [1,1094273] - Message: Uncaught Error: Invalid value, expected type Object.
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiJSError( 1184)</span>] (main) [1,1094274] - Source:                 this.view.add(postOpenChild);
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">V8Exception( 1184)</span>] Exception occurred at ti:/window.js:440: Uncaught Error: Invalid value, expected type Object.
</code></pre><p>and here is a screenshot of it. <a href="http:&#x2F;&#x2F;tinypic.com&#x2F;r&#x2F;5vsmcg&#x2F;6">CLICK HERE</a></p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 13th 2012, 2:33:44 pm">December 13th 2012</span>
				by <span class='authorname'>Michael Massalas</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>media</span></li>
					
						<li><span class='tagname'>video</span></li>
					
						<li><span class='tagname'>youtube</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-252702">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi  Michael,</p>
<p>looks like the code <code>this.view.add(postOpenChild);</code> in line 440 of windows.js raises that exception.</p>
<p>But you did not post this code here.</p>
<p>Greetings,</p>
<p>Matthias</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 13th 2012, 2:46:55 pm">December 13th 2012</span>
								by <span class='authorname'>Matthias Kroeger</span><br>
								<a class="icon-bg icon-link" href="question/145702/youtube-video-on-android-playing-ok-but-throws-exception#answer-252702" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Matthias,</p>
<p>Look at the screenshot again.</p>
<p>This line of code you are referring to is inside a generic window.js file which I DID NOT CREATE.. That means I don&#39;t know what it does since it comes with the SDK..</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 5:54:53 am">December 14th 2012</span>
											by <span class='authorname'>bill deuce</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I forgot to mention this is michael from another PC since I was having problems logging with my account.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 5:59:13 am">December 14th 2012</span>
											by <span class='authorname'>bill deuce</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That&#39;s better now, I logged in finally.. So, since it is not my .js file I dont know what it does (or even where it is).. So, my code HAS TO HAVE the problem..</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 6:04:53 am">December 14th 2012</span>
											by <span class='authorname'>Michael Massalas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hello Michael and Bill,</p>
<p>ok i understand.</p>
<p>I located the file <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;blob&#x2F;2_1_X&#x2F;android&#x2F;modules&#x2F;ui&#x2F;src&#x2F;js&#x2F;window.js">windows.js on github titanium mobile sdk branch 2_1_x</a> and there is that from line 432:</p>
<pre><code class="hljs">    Window.prototype.addPostOpenChildren =<span class="hljs-function"> function(</span><span class="hljs-function">)</span> {
       <span class="hljs-instruction"> if </span>(this._postOpenChildren<span class="hljs-function">)</span> {
            var length = this._postOpenChildren.length;

            // Add all the postOpenChildren to this.view<span class="hljs-instruction"> and </span>push them to the<span class="hljs-instruction"> array </span>this._children.
            for<span class="hljs-function"> (</span>var i = 0; i &lt; length; i++<span class="hljs-function">)</span> {
                var postOpenChild = this._postOpenChildren<span class="hljs-keyword">[</span>i];
               <span class="hljs-function"> this.view.add(</span>postOpenChild<span class="hljs-function">)</span>;
               <span class="hljs-function"> this._children.push(</span>postOpenChild<span class="hljs-function">)</span>;
            }

            // Clear this._postOpenChildren because all the children in this<span class="hljs-instruction"> array </span>are now in this._children.
            this._postOpenChildren.length = 0;
        }
    }
</code></pre><p>So now we have something to dive a little deeper.</p>
<p>Does you app only crash after your alertDialog opens?</p>
<p>Greetings,</p>
<p>Matthias</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 6:25:55 am">December 14th 2012</span>
											by <span class='authorname'>Matthias Kroeger</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The strange thing is that my app doesn&#39;t crash.. It does what it is supposed to do, (if you have a youtube player APP, it opens the APP and plays the video, else it informs you to download the video player) and although everything works perfect, it throws an exception..</p>
<p>If I click continue in the exception, the app continues playing fine.. The problem has to be inside the <code>TRY{}</code></p>
<p>What I cant understand is that even if I use CATCH(ERR) the exception does show, on both cases (mobile having youtube player and not having one)..</p>
<p>Isn&#39;t that what <code>try{} catch(err){}</code> is supposed to do?? catch an error so it doesn&#39;t appear on the screen and instead do what you declare inside the <code>catch(err){}</code> scope??</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 6:33:04 am">December 14th 2012</span>
											by <span class='authorname'>Michael Massalas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><strong>Quoted from the <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;145702&#x2F;youtube-video-on-android-playing-ok-but-throws-exception#answer-252740">answer by Michael Massalas</a></strong></p>
<p>&gt; Actually the problem is that I was trying to add this Intent inside the window (this is not possible) so thats why it throws an error..</p>
<p>&gt; Sorry for the long post.. Thanks Matthias for the help..</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 7:59:33 am">December 14th 2012</span>
											by <span class='authorname'>Matthias Kroeger</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-252740">
				
						<section>
							<p>Actually the problem is that I was trying to add this Intent inside the window (this is not possible) so thats why it throws an error..</p>
<p>Sorry for the long post.. Thanks Matthias for the help..</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 14th 2012, 6:50:25 am">December 14th 2012</span>
								by <span class='authorname'>Michael Massalas</span><br>
								<a class="icon-bg icon-link" href="question/145702/youtube-video-on-android-playing-ok-but-throws-exception#answer-252740" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Matthias could you please make an &#39;Answer&#39; using my solution as text so that I can mark it as BEST ANSWER, in order to be easily seen as the solution to similar problems as mine??</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 6:53:30 am">December 14th 2012</span>
											by <span class='authorname'>Michael Massalas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry Michael,</p>
<p>i technically can&#39;t accept your answer, because it&#39;s your question.</p>
<p>But you can accept my answer.</p>
<p>Greetings,</p>
<p>Matthias</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 7:20:06 am">December 14th 2012</span>
											by <span class='authorname'>Matthias Kroeger</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I know you cannot accept my answer, so make a new answer saying what the problem was, so that I can accept it as best answer..</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 7:50:13 am">December 14th 2012</span>
											by <span class='authorname'>Michael Massalas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry Michael, i was misreading your comment.</p>
<p>So i quoted your answer at the end of my answer. So now it&#39;s easy to follow the conversation.</p>
<p>Greetings,</p>
<p>Matthias</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 8:13:40 am">December 14th 2012</span>
											by <span class='authorname'>Matthias Kroeger</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That is nice.. Thanks for your help..</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 14th 2012, 8:16:58 am">December 14th 2012</span>
											by <span class='authorname'>Michael Massalas</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
