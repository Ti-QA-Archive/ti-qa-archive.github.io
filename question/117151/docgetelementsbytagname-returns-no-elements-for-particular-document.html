<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>doc.getElementsByTagName returns no elements for particular document Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>doc.getElementsByTagName returns no elements for particular document</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I am trying to extract a string from some XML that i get from a webservice. I am using the same code for other XML documents and it works fine, but for some reason i don&#39;t understand it doesn&#39;t work for this particular document. It works perfectly on iOS but not android. </p>
<p><strong>[Edit: It works in 1.5.x, but is broken in 1.6.x, it might have something to do with finding tags of name &#39;string&#39;?]</strong></p>
<p>At the line &quot;var token = elements.item(0).text;&quot;, i get a java.lang.NullPointerException</p>
<p>Any help would be appreciated</p>
<p>The xml document is just this, and i am trying to extract &quot;30067331120&quot;:</p>
<pre><code class="hljs"><span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">string</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.digitalrowing.com/service/sessionServer/"</span>&gt;</span>
30067331120<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
</code></pre><p>This is the code:</p>
<pre><code class="hljs">Ti.API.info(responseText);
Ti.API.info(<span class="hljs-string">"responsexml: "</span> + responseXML);

<span class="hljs-variable"><span class="hljs-keyword">var</span> doc</span> = responseXML.documentElement;
Ti.API.info(<span class="hljs-string">"doc: "</span> + doc);

<span class="hljs-variable"><span class="hljs-keyword">var</span> elements</span> = doc.getElementsByTagName('string');
Ti.API.info(<span class="hljs-string">"elements: "</span> + elements);
Ti.API.info(<span class="hljs-string">"count: "</span> + elements.length)

<span class="hljs-variable"><span class="hljs-keyword">var</span> token</span> = elements.item(<span class="hljs-number">0</span>).text; <span class="hljs-comment">//Error here</span>
Ti.API.info(<span class="hljs-string">"token: "</span> + token);
</code></pre><p>This is the output log:</p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">INFO</span>] <span class="hljs-list">[<span class="hljs-keyword">150</span>,<span class="hljs-number">345191</span>] &lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] /TiAPI <span class="hljs-list">( <span class="hljs-number">408</span>)</span>: &lt;string xmlns=<span class="hljs-string">"http://www.digitalrowing.com/service/sessionServer/"</span>&gt;
<span class="hljs-number">30067331120</span>&lt;/string&gt;
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] <span class="hljs-list">[<span class="hljs-keyword">3</span>,<span class="hljs-number">345201</span>] responsexml: <span class="hljs-list">[<span class="hljs-keyword">Ti.Document</span>]
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] <span class="hljs-list">[<span class="hljs-keyword">17</span>,<span class="hljs-number">345218</span>] doc: <span class="hljs-list">[<span class="hljs-keyword">Ti.Element</span>]
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] <span class="hljs-list">[<span class="hljs-keyword">9</span>,<span class="hljs-number">345229</span>] elements: <span class="hljs-list">[<span class="hljs-keyword">Ti.NodeList</span>]
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] <span class="hljs-list">[<span class="hljs-keyword">2</span>,<span class="hljs-number">345231</span>] count: <span class="hljs-number">0</span> //Should be <span class="hljs-number">1</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 12th 2011, 9:57:13 pm">March 12th 2011</span>
				by <span class='authorname'>Eddie Loeffen</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>getelementsbytagname</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>The problem was happening in a couple of other xml documents, all with only one tag in the form &lt;name&gt;value&lt;&#x2F;name&gt;</p>
<p>I think the bug might be either working with xml documents with only one tag, or having a tag with a name &#39;string&#39; or &#39;int&#39;.</p>
<p>Because it was only the one tag to read, i used this to get the value:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> doc</span> = responseXML.documentElement;
<span class="hljs-variable"><span class="hljs-keyword">var</span> value</span> = doc.childNodes.item(<span class="hljs-number">0</span>).text;
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="March 19th 2011, 4:46:44 am">March 19th 2011</span>
								by <span class='authorname'>Eddie Loeffen</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Yes this is a bug, just spent the last hour trying to figure out what went wrong. Would never have thought that the name of my XML tag would be at fault, so thanks for posting this. It&#39;s going to be a very common error I would have thought since if you have a web service returning a string, then the tag name is going to be string!</p>
<p>Any ideas when this will be fixed by?</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 24th 2011, 8:48:27 am">May 24th 2011</span>
								by <span class='authorname'>Marc Wickens</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I am using a C# web service. I fixed it by returning an object (with a value property) instead of a string, just made the object implicitly cast to a string so code changes server side were minimal.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 24th 2011, 8:50:13 am">May 24th 2011</span>
								by <span class='authorname'>Marc Wickens</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-204146">
				
						<section>
							<pre><code class="hljs">var token = elements[<span class="hljs-number">0</span>].<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>;
</code></pre><p>this might work for you</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 12th 2011, 11:33:45 pm">March 12th 2011</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/117151/docgetelementsbytagname-returns-no-elements-for-particular-document#answer-204146" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>it didn&#39;t work, it just complained that elements[0] was undefined. Thanks for answering though</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 13th 2011, 2:03:24 am">March 13th 2011</span>
											by <span class='authorname'>Eddie Loeffen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
