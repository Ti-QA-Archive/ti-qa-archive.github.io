<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Does anyone have a sample Android module code for titanium » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Does anyone have a sample Android module code for titanium</h1>
		</header>
		<section>
			<p>Following links are not sufficiant to develope Android module project with my requirement</p>
<p>http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Android_Module_Development_Guide</p>
<p>https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;blob&#x2F;master&#x2F;support&#x2F;module&#x2F;android&#x2F;documentation&#x2F;android_module_dev_guide.md</p>
<p>https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_modules</p>
<p>My Requirement :-</p>
<ol>
<li><p>Need to define one method in Titanium Android module project and this method has to hit webservice</p>
</li>
<li><p>Titanium project has to call this method and need to capture the web service response.</p>
</li>
</ol>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 31st 2013, 8:03:54 am">January 31st 2013</span>
				by <span class='authorname'>Selvam Rajendran</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>module</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
						<li><span class='tagname'>titanium studio</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Why not hit the webservice directly from your Javascript code?</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 31st 2013, 10:42:04 am">January 31st 2013</span>
								by <span class='authorname'>Jason Priebe</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I am trying to develope the titanium android library. which will hit webservice also will do some background work. I dont want disclose the logic to user(Library User). Only they should know the method name and purpose of the method.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 31st 2013, 11:06:53 am">January 31st 2013</span>
								by <span class='authorname'>Selvam Rajendran</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-255856">
				
						<section>
							<p>The links you mentioned should give you a good start on preparing your environment to develop android modules. I personally skipp the eclipse IDE part as you can comfortably write the modules using Titanium if you install the JAVA support - see <strong><a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;tis&#x2F;Installing+the+Java+Development+Tools">https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;tis&#x2F;Installing+the+Java+Development+Tools</a></strong> for more details.</p>
<p>You dont have to use the commandline to create the module project. Simply use <strong>File &gt; New &gt; Titanium Module Project</strong>, fill in the required details and hit Finish. Titanium will create the module wireframes for you including the .java files.</p>
<p>Dont forget to update the <strong>build.properties</strong> file to include the correct paths. My usually looks like this on OS X:</p>
<pre><code class="hljs">titanium.platform=<span class="hljs-regexp">/Library/</span>Application Support<span class="hljs-regexp">/Titanium/</span>mobilesdk<span class="hljs-regexp">/osx/</span><span class="hljs-number">3.0</span><span class="hljs-number">.0</span>.GA/android
android.platform=<span class="hljs-regexp">/Library/</span>AndroidSDK<span class="hljs-regexp">/platforms/</span>android-<span class="hljs-number">8</span>
google.apis=<span class="hljs-regexp">/Library/</span>AndroidSDK<span class="hljs-regexp">/add-ons/</span>addon-google_apis-google_inc_-<span class="hljs-number">8</span>
android.ndk=<span class="hljs-regexp">/Library/</span>AndroidNDK
</code></pre><p>Of course the paths depend on where you have installed your SDKs and NDK.</p>
<p>Next - you will find you source files in the newly created project under &#x2F;src&#x2F; folder. Edit the [YourModule].java file, add a method, e.g.</p>
<pre><code class="hljs">@<span class="hljs-type">Kroll</span>.<span class="hljs-keyword">method</span>
public <span class="hljs-type">String</span> getWebserviceData(<span class="hljs-type">String</span> requestedProvider)
{
    // <span class="hljs-keyword">method</span> body
}
</code></pre><p>Once you are happy with the code, rightclick the timodule.xml file in your <strong>App Explorer</strong> window, select <strong>Publish &gt; Package - Android Module</strong> set the output location to Titanium SDK, hit finish and watch the console window for details of the build operation. If all goes well, you&#39;ll be able to use your module in your Titanium projects.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2013, 10:58:11 am">January 31st 2013</span>
								by <span class='authorname'>Ondrej Urik</span><br>
								<a class="icon-bg icon-link" href="../../question/147680/does-anyone-have-a-sample-android-module-code-for-titanium.html#answer-255856" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><ol>
<li><p>Tnx Urik… I have done this, also able to hit module method. But my problem is to hit the webservice from this method(Asychronus call)</p>
</li>
<li><p>If we want to hit web service, need to use Thread. How are we going to get the web service response in java script code</p>
</li>
</ol>
</p>
										<div class="author">
											&mdash; commented <span title="January 31st 2013, 11:15:49 am">January 31st 2013</span>
											by <span class='authorname'>Selvam Rajendran</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ohhhh … I see what you mean. This really wasn&#39;t clear from your initial post. This is a fairly complex goal you&#39;re trying to achieve. Are you good with Java programming? Anyways, what you need to do is use the java.lang.Thread to run your webservice request asynchronously and then utilise org.appcelerator.kroll.KrollFunction:callAsync to send the result to javascript  A sample method is demonstrated below. Note that it needs better sanitizing.</p>
<pre><code class="hljs"><span class="hljs-annotation">@Kroll</span>.method
<span class="hljs-annotation">@SuppressWarnings</span>({ <span class="hljs-string">"unchecked"</span>, <span class="hljs-string">"rawtypes"</span> })
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> load(<span class="hljs-annotation">@Kroll</span>.argument(optional = <span class="hljs-keyword">false</span>) Object arg)
{
    KrollDict d = <span class="hljs-keyword">null</span>;
    <span class="hljs-comment">// get hashmap            </span>
    <span class="hljs-keyword">if</span> (arg <span class="hljs-keyword">instanceof</span> KrollDict)
        d = (KrollDict)arg;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Map.class.isInstance(arg))
        d = <span class="hljs-keyword">new</span> KrollDict((Map)arg);
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">"Expecting dictionary but "</span>+(arg == <span class="hljs-keyword">null</span> ? <span class="hljs-string">"NULL"</span>:arg.getClass().getName())+<span class="hljs-string">" found"</span>);

    <span class="hljs-comment">// get the onload function passed to our method</span>
    <span class="hljs-keyword">final</span> org.appcelerator.kroll.KrollFunction onload = (org.appcelerator.kroll.KrollFunction)d.get(<span class="hljs-string">"onload"</span>);     
    <span class="hljs-comment">// get the proxy we use to call the callback</span>
    <span class="hljs-keyword">final</span> org.appcelerator.kroll.KrollProxy _self = <span class="hljs-keyword">this</span>;
    <span class="hljs-comment">// <span class="hljs-doctag">todo:</span> setup ani final variables from the passed dict so we can use it in the anonymous runnable</span>

    <span class="hljs-comment">// run your async code</span>
    java.lang.Thread t = <span class="hljs-keyword">new</span> java.lang.Thread(<span class="hljs-keyword">new</span> java.lang.Runnable() {
        <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">boolean</span> success = <span class="hljs-keyword">false</span>;

            <span class="hljs-comment">// your webservice code goes here</span>

            <span class="hljs-comment">// after it is done call the js function asynchronously</span>
            <span class="hljs-comment">// setup some variables we want to pass to JS</span>
            KrollDict data = <span class="hljs-keyword">new</span> KrollDict();
            data.put(<span class="hljs-string">"source"</span>, _self);        
            data.put(<span class="hljs-string">"success"</span>, success);
            onload.callAsync(_self.getKrollObject(), data);
        }
    });
    t.setPriority(Thread.MIN_PRIORITY);
    t.start();
}
</code></pre><p>Then from within javascript you would do: <code>mymodule.load({onload:function(e){&amp;#x2F;*use e.success to determine the status and do whatever you need to do*&amp;#x2F;}});</code></p>
</p>
										<div class="author">
											&mdash; commented <span title="January 31st 2013, 12:59:26 pm">January 31st 2013</span>
											by <span class='authorname'>Ondrej Urik</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
