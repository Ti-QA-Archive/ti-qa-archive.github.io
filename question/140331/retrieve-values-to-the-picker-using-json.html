<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Retrieve values to the Picker using Json » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Retrieve values to the Picker using Json</h1>
		</header>
		<section>
			<p>Hi I want to retrieve values to the picker using json…</p>
<p>I have two column(Name) and (Quantity) in the PHPMyAdmin DB….<br>Trying to retrieve (Quantity)values to the Picker..</p>
<p>Here is my code… Please help….</p>
<p>var currentWin = Ti.UI.currentWindow;</p>
<p>var sendit = Ti.Network.createHTTPClient();</p>
<p>sendit.open(&#39;GET&#39;, &#39;http:&#x2F;&#x2F;localhost&#x2F;mobileapp&#x2F;productread.php&#39;);</p>
<p>sendit.send();</p>
<p>sendit.onload = function(){</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);

<span class="hljs-keyword">var</span> json = json.mobile_product;

<span class="hljs-keyword">var</span> dataArray = [];

<span class="hljs-keyword">var</span> pos;
<span class="hljs-keyword">for</span>( pos=<span class="hljs-number">0</span>; pos &lt; json.length; pos++){
    <span class="hljs-keyword">var</span> data = [{
    title:<span class="hljs-string">''</span> + json[pos].product_name + <span class="hljs-string">''</span>
    }]
    <span class="hljs-comment">// set the array to the tableView</span>
    picker.add(data);
};
<span class="hljs-keyword">var</span> picker = Ti.UI.createPicker({
height:<span class="hljs-string">"20%"</span>,
width:<span class="hljs-string">"70%"</span>
</code></pre><p>});<br>currentWin.add(picker);</p>
<p>};</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 30th 2012, 9:35:15 am">July 30th 2012</span>
				by <span class='authorname'>Suresh Kumar S</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>json</span></li>
					
						<li><span class='tagname'>picker</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Now I am able to retrieve data from the picker… But in the Picker, it displays only the last value added to the DB….  Please help… Here is my code..</p>
<p>var currentWin = Ti.UI.currentWindow;</p>
<p>var sendit = Ti.Network.createHTTPClient();<br>sendit.open(&#39;GET&#39;, &#39;http:&#x2F;&#x2F;localhost&#x2F;mobileapp&#x2F;productread.php&#39;);<br>sendit.send();</p>
<p>sendit.onload = function(){<br>    var json = JSON.parse(this.responseText);</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> json</span> = json.mobile_product;

<span class="hljs-variable"><span class="hljs-keyword">var</span> dataArray</span> = [];

<span class="hljs-variable"><span class="hljs-keyword">var</span> pos;
for( pos</span>=<span class="hljs-number">0</span>; pos <span class="hljs-type">&lt; json.length; pos++){</span>
</code></pre><p>var picker = Ti.UI.createPicker();</p>
<p>var data = [];<br>data[0]=Ti.UI.createPickerRow({title:&#39;&#39;+ json[pos].product_name + &#39;&#39;,custom_item:&#39;b&#39;});</p>
<p>&#x2F;&#x2F; turn on the selection indicator (off by default)<br>picker.selectionIndicator = true;</p>
<p>picker.add(data);<br>currentWin.add(picker);</p>
<p>};<br>   }</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 30th 2012, 10:17:22 am">July 30th 2012</span>
								by <span class='authorname'>Suresh Kumar S</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-244047">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Your code is very difficult to read.  Please learn to use the Markdown syntax to format your code (use three &quot;~&quot; characters before and three &quot;~&quot; characters after).  Click on the various &quot;Markdown Syntax&quot; links above the textfield to learn more.</p>
<p>Anyway, your problem is that you&#39;re creating a new picker each time through your loop.  Instead, you should create the picker just once, build an array of rows, and add the rows just once at the end:</p>
<pre><code class="hljs"><span class="hljs-title">var</span> picker = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createPicker();
// turn on the selection indicator (off by <span class="hljs-default"><span class="hljs-keyword">default</span>)</span>
<span class="hljs-title">picker</span>.selectionIndicator = true;

<span class="hljs-title">var</span> <span class="hljs-typedef"><span class="hljs-keyword">data</span> = [];</span>
<span class="hljs-title">var</span> pos;
<span class="hljs-title">for</span> (pos=<span class="hljs-number">0</span>; pos &lt; json.length; pos++) {
    <span class="hljs-typedef"><span class="hljs-keyword">data</span>.push <span class="hljs-container">(<span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.<span class="hljs-title">createPickerRow</span>({<span class="hljs-title">title</span>:''+ <span class="hljs-title">json</span>[<span class="hljs-title">pos</span>].<span class="hljs-title">product_name</span> + '',<span class="hljs-title">custom_item</span>:'<span class="hljs-title">b'</span>})</span>);</span>
}
<span class="hljs-title">picker</span>.add(<span class="hljs-typedef"><span class="hljs-keyword">data</span>);</span>
<span class="hljs-title">currentWin</span>.add(picker);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 30th 2012, 10:24:41 am">July 30th 2012</span>
								by <span class='authorname'>Jason Priebe</span><br>
								<a class="icon-bg icon-link" href="question/140331/retrieve-values-to-the-picker-using-json#answer-244047" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-244046">
				
						<section>
							<p>What exactly is the problem?  You don&#39;t tell us what happens.</p>
<p>Without knowing the exact symptoms you&#39;re seeing, I would recommend that you create the picker <em>before</em> you call <code>sendit.send()</code>.</p>
<p>If you don&#39;t do that, you have a potential race condition where the HTTP results come in before you&#39;ve created the picker (probably not very likely, but the way your code is structured, it is at least <em>possible</em>).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 30th 2012, 10:16:11 am">July 30th 2012</span>
								by <span class='authorname'>Jason Priebe</span><br>
								<a class="icon-bg icon-link" href="question/140331/retrieve-values-to-the-picker-using-json#answer-244046" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Now I am able to retrieve data from the picker… But in the Picker, it displays only the last value added to the DB….It does not display all the values in the column of the DB…. Please help… Here is my code..</p>
<p>var currentWin = Ti.UI.currentWindow;<br>var sendit = Ti.Network.createHTTPClient(); sendit.open(&#39;GET&#39;, &#39;http:&#x2F;&#x2F;localhost&#x2F;mobileapp&#x2F;productread.php&#39;); sendit.send();<br>sendit.onload = function(){ var json = JSON.parse(this.responseText);<br>var json = json.mobile_product;</p>
<p>var dataArray = [];</p>
<p>var pos;<br>for( pos=0; pos &amp;lt; json.length; pos++){<br>var picker = Ti.UI.createPicker();<br>var data = []; data[0]=Ti.UI.createPickerRow({title:&#39;&#39;+ json[pos].product_name + &#39;&#39;,custom_item:&#39;b&#39;});<br>&#x2F;&#x2F; turn on the selection indicator (off by default) picker.selectionIndicator = true;<br>picker.add(data); currentWin.add(picker);<br>}; }</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 30th 2012, 10:19:00 am">July 30th 2012</span>
											by <span class='authorname'>Suresh Kumar S</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
