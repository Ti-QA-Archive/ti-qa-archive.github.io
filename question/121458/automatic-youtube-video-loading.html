<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Automatic YouTube video loading » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Automatic YouTube video loading</h1>
		</header>
		<section>
			<p>Hello, everyone. I&#39;m currently making an iPhone app that opens videos from YouTube. What I&#39;m ultimately trying to do is have it play a video from YouTube immediately after the app calls it.<br>I&#39;ve made it so that the video is showing in an embedded player in a webview. Here comes some code.</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> w</span> = Ti.UI.createWindow();
w.orientationModes= [Ti.UI.LANDSCAPE_LEFT, Ti.UI.LANDSCAPE_RIGHT];
w.backButtonTitle='Back';

<span class="hljs-variable"><span class="hljs-keyword">var</span> webview</span> = Ti.UI.createWebView({fullscreen:<span class="hljs-literal">true</span>});
webview.url = <span class="hljs-string">"http://www.youtube.com/embed/"</span> + videoid + <span class="hljs-string">"?autoplay=1"</span>;

w.add(webview);
Titanium.UI.currentTab.<span class="hljs-keyword">open</span>(w, {animated:<span class="hljs-literal">true</span>});
</code></pre><p>This is working fine, but there&#39;s a problem. I thought adding the &quot;?autoplay=1&quot; to the URL would make the video play automatically, but instead the user still has to click on the video&#39;s view to load it.</p>
<p>When the view appears, there&#39;s a rectangular play button on it. When the user taps it, the video loads, and then shows a circular play button. After waiting about a second or two, the video then finally plays.</p>
<p>Is there a way to bypass this user input to play the video? Perhaps a fireEvent to evoke a click or something like that?</p>
<p>Any help would be greatly appreciated.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 23rd 2011, 12:00:29 am">June 23rd 2011</span>
				by <span class='authorname'>John Davis</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>embed</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>video</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
						<li><span class='tagname'>youtube</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I&#39;ve been searching all technique for bypassing user input like Xcode did, but there is none of solid solution.</p>
<p>My pop up idea is &quot;how to use this embed code in tableView instead of thumbnail image&quot;, so user can click to play or any other solution?</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 6th 2011, 3:18:52 pm">August 6th 2011</span>
								by <span class='authorname'>Timmy UX</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-211610">
				
						<section>
							<p>I wish I could help solve your problem (&#39;cause it would solve mine), but maybe the following can help us understand things.  In this video, minutes 49 to 54, they talk about Apple, by policy, not allowing the autoplay=1 flag to work on the new iFrame embed code.</p>
<p><a href="http:&#x2F;&#x2F;www.google.com&#x2F;events&#x2F;io&#x2F;2011&#x2F;sessions&#x2F;youtube-s-iframe-player-the-future-of-embedding.html">http:&#x2F;&#x2F;www.google.com&#x2F;events&#x2F;io&#x2F;2011&#x2F;sessions&#x2F;youtube-s-iframe-player-the-future-of-embedding.html</a></p>
<p>Apparently Apple wants people with a 3G limited data plan to explicitly push the play button, so they will not use up all their data minutes against their will. </p>
<p>Does anyone know anything further about this?</p>
<p>The three alternatives that I am exploring are:</p>
<ol>
<li><p>Putting a webview with the embed iframe code into each row of a table (Kevin Whinnery discouraged this in one of his posts here), or</p>
</li>
<li><p>Building a table-look-alike in html inside a single webview, with multiple embed iframes (my first cut at this was slow).</p>
</li>
<li><p>As you suggested, connect a &quot;click&quot; event to the &quot;onload&quot; event of the webview.  But I don&#39;t know how to do this.</p>
</li>
</ol>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 28th 2011, 11:24:06 am">June 28th 2011</span>
								by <span class='authorname'>Stan Silver</span><br>
								<a class="icon-bg icon-link" href="question/121458/automatic-youtube-video-loading#answer-211610" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Make any progress?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2011, 8:43:58 pm">July 6th 2011</span>
											by <span class='authorname'>Andrew Mussey</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I haven&#39;t been able to solve this… I think Stan&#39;s post says it all. I instead went with a different method altogether, having it simply open up the YouTube mobile site in a WebView.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2011, 8:46:25 pm">July 6th 2011</span>
											by <span class='authorname'>John Davis</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yeah, I&#39;m kind of spinning my wheels here.  Tried the html method, tried a webview with the &#x2F;v&#x2F; link…neither is good.  The &lt;html&gt; method gives me an UGLY white view with the embed player small (not respecting the html&#x2F;flash properties I&#39;m setting…) and the &#x2F;v&#x2F; link has that stupid second intermediary step.</p>
<p>I&#39;ll post updates if I get anywhere, though</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2011, 9:11:55 pm">July 6th 2011</span>
											by <span class='authorname'>Andrew Mussey</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I finally went with the second intermediary step, which I open in a new window.  Actually, the end result isn&#39;t too too bad, with wifi.</p>
<p>(Take out the __, I had to add it because the iframe is blocked in this display.)</p>
<pre><code class="hljs">html: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(sId)</span> </span>{
    <span class="hljs-keyword">var</span> html = <span class="hljs-string">'&lt;html&gt;'</span>;
    html += <span class="hljs-string">'&lt;body&gt;'</span>;
    html += <span class="hljs-string">'&lt;__iframe '</span>;
    html += <span class="hljs-string">'class="youtube-player" id="youtube-player" type="text/html" width="100%" height="100%" '</span>;
    html += <span class="hljs-string">'src="http://www.youtube.com/embed/'</span> + sId + <span class="hljs-string">'"'</span>;
    html += <span class="hljs-string">'&gt;&lt;/__iframe&gt;'</span>;
    html += <span class="hljs-string">'&lt;/body&gt;&lt;/html&gt;'</span>;
    <span class="hljs-keyword">return</span> html;
},
createWebView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">//uses regex to get the video id from a youtube url</span>
    <span class="hljs-keyword">var</span> id = tn.YouTube.extractId(<span class="hljs-keyword">this</span>.url);
    <span class="hljs-keyword">var</span> html = <span class="hljs-keyword">this</span>.html(id);
    <span class="hljs-keyword">var</span> webView = Ti.UI.createWebView({
        html: html,
        height: <span class="hljs-string">'100%'</span>,
        width: <span class="hljs-string">'100%'</span>
    });
    <span class="hljs-keyword">return</span> webView;
},
</code></pre><pre><code class="hljs">row.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> videoItem = e.rowData.tnItem;
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">window</span> = tn.VideoPlayPage.on(videoItem).createWindow();
    tn.App.activeTab().open(<span class="hljs-built_in">window</span>, {animated:<span class="hljs-literal">true</span>});
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 6th 2011, 10:27:29 pm">July 6th 2011</span>
											by <span class='authorname'>Stan Silver</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I watched the I&#x2F;O talk yesterday and gave it a quick go with the iframe player, but no luck.  I&#39;ll give this a shot.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 1:39:13 pm">July 7th 2011</span>
											by <span class='authorname'>Andrew Mussey</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Looks great!  Works on the emulator too, which is nice.  Here&#39;s what I ended up using:</p>
<pre><code class="hljs">var newURL = <span class="hljs-transposed_variable">url.</span>replace(<span class="hljs-string">'/v/'</span>, <span class="hljs-string">'/embed/'</span>); <span class="hljs-comment">//to HTML iframe player</span>
        var newHtml = <span class="hljs-string">'&lt;html&gt;'</span>;
        newHtml += <span class="hljs-string">'&lt;body bgcolor="</span>Black<span class="hljs-string">"&gt;'</span>;
        newHtml += <span class="hljs-string">'&lt;__iframe '</span>;<span class="hljs-comment">//remove the __ before iframe!</span>
        newHtml += <span class="hljs-string">'class="</span>youtube-player<span class="hljs-string">" id="</span>youtube-player<span class="hljs-string">" type="</span>text/html<span class="hljs-string">" width="</span><span class="hljs-number">103</span>%<span class="hljs-string">" height="</span><span class="hljs-number">103</span>%<span class="hljs-string">" '</span>;
        newHtml += <span class="hljs-string">'src="</span><span class="hljs-string">' + newURL + '</span><span class="hljs-string">"'</span>;
        newHtml += <span class="hljs-string">'&gt;&lt;/__iframe&gt;'</span>;<span class="hljs-comment">//remove the __ before iframe!</span>
        newHtml += <span class="hljs-string">'&lt;/body&gt;&lt;/html&gt;'</span>;

        var webView = <span class="hljs-transposed_variable">Ti.</span><span class="hljs-transposed_variable">UI.</span>createWebView({
            html: newHtml,
            height: <span class="hljs-string">'103%'</span>,
            width: <span class="hljs-string">'103%'</span>,
            scalesPageToFit:true
        });
</code></pre><p>I was getting a not-so-pretty white border around the iframe, so I scaled it up a bit and it works.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2011, 2:25:11 pm">July 7th 2011</span>
											by <span class='authorname'>Andrew Mussey</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211111">
				
						<section>
							<p>instead of <del>~?autoplay</del>~ try <del>~&amp;autoplay</del>~</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 23rd 2011, 5:33:50 am">June 23rd 2011</span>
								by <span class='authorname'>Kami -</span><br>
								<a class="icon-bg icon-link" href="question/121458/automatic-youtube-video-loading#answer-211111" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>That doesn&#39;t work with that kind of YouTube URL. I just get a &quot;media not recognized&quot; error.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2011, 6:39:33 pm">June 23rd 2011</span>
											by <span class='authorname'>John Davis</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211115">
				
						<section>
							<p>I think your solution lies here<br>http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;16791&#x2F;launching-youtube-player-without-intermediate-youtube-html</p>
<p>adam.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 23rd 2011, 6:08:15 am">June 23rd 2011</span>
								by <span class='authorname'>adam kearsley</span><br>
								<a class="icon-bg icon-link" href="question/121458/automatic-youtube-video-loading#answer-211115" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I had already tried that. It gives me nothing but a blank white screen.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2011, 6:38:43 pm">June 23rd 2011</span>
											by <span class='authorname'>John Davis</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-218411">
				
						<section>
							<p>you can create a webview then used iframe i hope it works</p>
<p>var htmlTrailer = &#39;&lt;html&gt;&lt;body&gt;&lt;iframe title=&quot;YouTube video player&quot; class=&quot;youtube-player&quot; type=&quot;text&#x2F;html&quot; width=&quot;290&quot; height=&quot;250&quot; src=&quot;http:&#x2F;&#x2F;www.youtube.com&#x2F;embed&#x2F;PKgPemzw-l0?rel=0&amp;autoplay=1&quot; frameborder=&quot;0&quot; allowFullScreen&gt;&lt;&#x2F;iframe&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&#39;;</p>
<p>var webview = Ti.UI.createWebView({<br>                    html:htmlTrailer,<br>                    backgroundColor:&#39;#000&#39;,<br>                    &#x2F;&#x2F;backgroundColor:&#39;#336699&#39;,<br>                    height:260,<br>                    width:295,<br>                    left:5,<br>                    top:5<br>                });</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 8th 2011, 9:28:24 am">September 8th 2011</span>
								by <span class='authorname'>shani bashir</span><br>
								<a class="icon-bg icon-link" href="question/121458/automatic-youtube-video-loading#answer-218411" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-274378">
				
						<section>
							<p>This seems to work for me (iPhone 7.0.3 with TiSDK 3.2.0.GA):</p>
<ul>
<li><p>app.js</p>
<pre><code class="hljs">var webview = Ti.UI.createWebView({
  <span class="hljs-string">top :</span> <span class="hljs-number">50</span>,
  <span class="hljs-string">left :</span> <span class="hljs-number">0</span>,
  <span class="hljs-string">fullscreen :</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">  url:</span> <span class="hljs-string">'videoTestiFrame.html'</span>,
  <span class="hljs-string">height :</span> <span class="hljs-number">240</span>,
  <span class="hljs-string">width :</span> <span class="hljs-number">320</span>
});
</code></pre></li>
<li><p>videoTestiFrame.html</p>
<pre><code class="hljs"><span class="hljs-doctype">&lt;!DOCTYPE html"&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- 1. The &lt;iframe&gt; (and video player) will replace this &lt;div&gt; tag. --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"player"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
          <span class="hljs-comment">// 2. This code loads the IFrame Player API code asynchronously.</span>
          <span class="hljs-keyword">var</span> tag = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);

          tag.src = <span class="hljs-string">"https://www.youtube.com/iframe_api"</span>;
          <span class="hljs-keyword">var</span> firstScriptTag = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'script'</span>)[<span class="hljs-number">0</span>];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          <span class="hljs-comment">// 3. This function creates an &lt;iframe&gt; (and YouTube player)</span>
          <span class="hljs-comment">//    after the API code downloads.</span>
          <span class="hljs-keyword">var</span> player;
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onYouTubeIframeAPIReady</span>(<span class="hljs-params"></span>) </span>{
              player = <span class="hljs-keyword">new</span> YT.Player(<span class="hljs-string">'player'</span>, {
                  height : <span class="hljs-string">'390'</span>,
                  width : <span class="hljs-string">'640'</span>,
                  videoId : <span class="hljs-string">'M7lc1UVf-VE'</span>,

                  playerVars : {
                      autoplay : <span class="hljs-number">1</span>
                  },
                  events : {
                      <span class="hljs-string">'onReady'</span> : onPlayerReady,
                      <span class="hljs-string">'onStateChange'</span> : onPlayerStateChange
                  }
              });
          }

          <span class="hljs-comment">// 4. The API will call this function when the video player is ready.</span>
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onPlayerReady</span>(<span class="hljs-params">event</span>) </span>{
              event.target.playVideo();
          }

          <span class="hljs-comment">// 5. The API calls this function when the player's state changes.</span>
          <span class="hljs-comment">//    The function indicates that when playing a video (state=1),</span>
          <span class="hljs-comment">//    the player should play for six seconds and then stop.</span>
          <span class="hljs-keyword">var</span> done = <span class="hljs-literal">false</span>;
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onPlayerStateChange</span>(<span class="hljs-params">event</span>) </span>{
              <span class="hljs-keyword">if</span> (event.data == YT.PlayerState.PLAYING &amp;&amp; !done) {
                  <span class="hljs-comment">//setTimeout(stopVideo, 6000);</span>
                  done = <span class="hljs-literal">true</span>;
              }
          }

          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopVideo</span>(<span class="hljs-params"></span>) </span>{
              player.stopVideo();
          }
      </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre></li>
<li><p>And add &quot;webview.mediaPlaybackRequiresUserAction = NO;&quot; property into Titanium core. </p>
</li>
</ul>
<p>File: Library&#x2F;Application Support&#x2F;Titanium&#x2F;mobilesdk&#x2F;osx&#x2F;sdk&#x2F;iphone&#x2F;classes&#x2F;TiUIWebView.m</p>
<pre><code class="hljs">-(<span class="hljs-built_in">UIWebView</span>*)webview 
{
    <span class="hljs-keyword">if</span> (webview==<span class="hljs-literal">nil</span>)
    {
        <span class="hljs-comment">// we attach the XHR bridge the first time we need a webview</span>
        [[TiApp app] attachXHRBridgeIfRequired];

        webview = [[<span class="hljs-built_in">UIWebView</span> alloc] initWithFrame:<span class="hljs-built_in">CGRectMake</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>)];
        webview<span class="hljs-variable">.delegate</span> = <span class="hljs-keyword">self</span>;
        webview<span class="hljs-variable">.opaque</span> = <span class="hljs-literal">NO</span>;
        webview<span class="hljs-variable">.backgroundColor</span> = [<span class="hljs-built_in">UIColor</span> whiteColor];
        webview<span class="hljs-variable">.contentMode</span> = <span class="hljs-built_in">UIViewContentModeRedraw</span>;
        webview<span class="hljs-variable">.mediaPlaybackRequiresUserAction</span> = <span class="hljs-literal">NO</span>;
</code></pre><p>Best,<br>Eduardo</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 25th 2014, 1:31:15 am">January 25th 2014</span>
								by <span class='authorname'>Eduardo Gomez</span><br>
								<a class="icon-bg icon-link" href="question/121458/automatic-youtube-video-loading#answer-274378" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
