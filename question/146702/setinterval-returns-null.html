<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>setInterval returns null? » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>setInterval returns null?</h1>
		</header>
		<section>
			<p>Hi All.<br>I can&#39;t figure out why I get the error <code>invalid method &amp;#39;(null)&amp;#39; at app.js (line 84)</code>, when I test this function in iPhone Simulator. I am using Titanium 3.0 and iPhone 6.0. Basically my code doesn&#39;t have much more than the code below, a window (of course) with a label and button attached. The only functionality yet is the code below.<br>My code looks like this (I have indicated where the original line 84 is):</p>
<pre><code class="hljs">triggerButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

    <span class="hljs-keyword">var</span> audio = Ti.Media.createSound({
        url:<span class="hljs-string">'sounds/mySound.mp3'</span>
    });
    <span class="hljs-keyword">this</span>.setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
      audio.play();
      <span class="hljs-keyword">var</span> myInterval = (<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*<span class="hljs-number">4000</span>)+<span class="hljs-number">500</span>);
    }, myInterval );  <span class="hljs-comment">//- this is line 84 which causes the error. It returns the same error when I use a static number (e.g. 1000) instead of the variable myInterval</span>
    });
</code></pre><p>I am trying to make a function that, when triggered, plays a short sound with a random interval between 500 and 4000 milliseconds.<br>I am new to using timers and so. I have looked allover for tutorials and ressources on this, and I can&#39;t seem to find the cause of this error. If anyone in here can help me out I am very grateful.<br>Thanks a lot,<br>best,<br>Louise</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 10th 2013, 10:16:06 am">January 10th 2013</span>
				by <span class='authorname'>Louise Petersen  Matjeka</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>setinterval</span></li>
					
						<li><span class='tagname'>timer</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-254240">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi, use <strong>setInterval()</strong> individual as it is standard java script function. and </p>
<pre><code class="hljs">setInterval<span class="hljs-list">(<span class="hljs-keyword">function</span> <span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> {
    audio.play<span class="hljs-list">()</span><span class="hljs-comment">;</span>
    var myInterval = <span class="hljs-list">(<span class="hljs-keyword">Math</span>.floor<span class="hljs-list">(<span class="hljs-keyword">Math</span>.random<span class="hljs-list">()</span><span class="hljs-variable">*4000)+500);
    }, myInterval );</span></span></span></span>
</code></pre><p><strong>thus your code should look like</strong></p>
<pre><code class="hljs">triggerButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

    <span class="hljs-keyword">var</span> audio = Ti.Media.createSound({
        url:<span class="hljs-string">'sounds/mySound.mp3'</span>
    });
    setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    audio.play();
    <span class="hljs-keyword">var</span> myInterval = (<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*<span class="hljs-number">4000</span>)+<span class="hljs-number">500</span>);
    }, myInterval );  <span class="hljs-comment">//- this is line 84 which causes the error. It returns the same error when I use a static number (e.g. 1000) instead of the variable myInterval</span>
    });
</code></pre><p><strong>i would suggest to use it like</strong></p>
<pre><code class="hljs">triggerButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

    <span class="hljs-keyword">var</span> audio = Ti.Media.createSound({
        url:<span class="hljs-string">'sounds/mySound.mp3'</span>
    });
 <span class="hljs-keyword">var</span> myInterval = (<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*<span class="hljs-number">4000</span>)+<span class="hljs-number">500</span>);

    setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    audio.play();
    }, myInterval ); 
    });
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 10th 2013, 10:35:02 am">January 10th 2013</span>
								by <span class='authorname'>Ashish Nigam</span><br>
								<a class="icon-bg icon-link" href="question/146702/setinterval-returns-null#answer-254240" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I think Ashish answer is correct because the way he rewrote the code will make myInterval available in the setInterval() execution scope.  In your code, myInterval would be available only in the scope of the callback function (a function creates a new scope).</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 10th 2013, 1:32:52 pm">January 10th 2013</span>
											by <span class='authorname'>Thierry Godfroid</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks!! I guess it&#39;s all about scope ;) The thing is that I wanted a random timespan every time the code was executed. But I think that it is not possible using setInterval as I did. I think the solution is to make a a function which generates a random timespan and passes it to a setTimeout function, which calls the function to run again. That way the random timespan is generated outside the timing function. Again thanks a lot for your help - it pointed me in the right direction!<br>best, Louise</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2013, 7:49:24 am">January 14th 2013</span>
											by <span class='authorname'>Louise Petersen  Matjeka</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Happy Coding.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2013, 8:11:02 am">January 14th 2013</span>
											by <span class='authorname'>Ashish Nigam</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
