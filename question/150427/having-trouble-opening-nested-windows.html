<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Having trouble opening nested windows » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Having trouble opening nested windows</h1>
		</header>
		<section>
			<p>(I&#39;m using Titanium 3.0, android 2.2 SDK, master&#x2F;detail project)</p>
<p>I&#39;ve got my main screen (ApplicationWindow.js) opening new windows when a view is clicked using:</p>
<pre><code class="hljs">button1.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">var</span> Window = Titanium.UI.createWindow({
            url : <span class="hljs-string">'/directory/directoryMenu.js'</span>,
            title : <span class="hljs-string">'directoryMenu'</span>,
            backgroundColor : <span class="hljs-string">'#CCC'</span>

        });
        Window.open({modal:<span class="hljs-literal">true</span>});
    });
</code></pre><p>The new window (directoryMenu.js) that opens is a table, from which I want to open a new window when a row is clicked. Inside this window, I have an event on each row using the same code as above to call my subDirectory.js file, which is in the same &#39;directory&#39; folder:</p>
<pre><code class="hljs">row.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-comment">//sourceRow = e.index;</span>

        <span class="hljs-keyword">var</span> Window = Titanium.UI.createWindow({
            url : <span class="hljs-string">'subDirectory.js'</span>,
            title : <span class="hljs-string">'subDirectory'</span>,
            backgroundColor : <span class="hljs-string">'#CCC'</span>
        });
        Window.open({modal:<span class="hljs-literal">true</span>});
    });
</code></pre><p>However, the new screen that opens refuses to use the code I have in subDirectory.js, using only the properties defined in my previous window (directoryMenu.js).</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 3rd 2013, 11:33:42 pm">April 3rd 2013</span>
				by <span class='authorname'>Andrew Cox</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>nested</span></li>
					
						<li><span class='tagname'>url</span></li>
					
						<li><span class='tagname'>windows</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>that is not the enough code to solve your problem…..</p>
<p>also share code of subDirectory.js.</p>
<p>and one more thing , instead of row click you should use tableview&#39;s click event to open new window.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 4th 2013, 3:02:27 am">April 4th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Here is all the code for mainDirectory.js</p>
<pre><code class="hljs">var win1 = Ti.UI.createWindow({
    backgroundColor : '<span class="hljs-comment">#282828'</span>
});

/<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>
 <span class="hljs-keyword">*</span> top label
 <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>/
var topLabel = Ti.UI.createView({
    backgroundColor : 'black',
    top : 0,
    bottom : '90%'
});

var topText = Ti.UI.createLabel({
    color : 'white',
    text : 'Directory',
    font : {
        fontSize : '30sp'
    }
});

/<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>
 <span class="hljs-keyword">*</span> table list text
 <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>/
var list = ['ELEMENTARY SCHOOLS', 'MIDDLE SCHOOLS', 'HIGH SCHOOLS', 'OTHER', 'DISTRICT'];

var table = Ti.UI.createTableView({
    top : '15%',
    left : '5%',
    right : '5%',
    bottom : '10%',
    backgroundColor : 'white'
});

/<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>
 <span class="hljs-keyword">*</span> rows added to tableRows
 <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>/
var tableRows = [];

var loopColor = 0;

for (var i = 0; i <span class="hljs-variable">&lt; list.length; i++) {

    var colorBar = Ti.UI.createLabel({
        backgroundColor : 'black',
        top : '42%',
        left : '6%',
        height : '20dp',
        width : '8dp',
    });

    /***************************************************
     * this switch enables colorBar to alternate colors.
     *
     ***************************************************/
    switch(loopColor) {
        case 0:
            colorBar.setBackgroundColor('#FF6666');
            break;
        case 1:
            colorBar.setBackgroundColor('#088da5');
            break;
        case 2:
            colorBar.setBackgroundColor('#FF9900');
            break;
    }

    var row = Ti.UI.createTableViewRow({
        height : '88dp',
        className : 'rows',
        backgroundColor : 'white',
        selectedBackgroundColor : 'white'
    });

    var tableLabel = Ti.UI.createLabel({
        color : 'black',
        text : list[i],
        font : {
            fontSize : '20sp',
            fontWeight : 'bold'
        }
    });

    row.addEventListener('click', function(e) {
        //sourceRow = e.index;

        var Window = Titanium.UI.createWindow({
            url : 'subDirectory.js',
            title : 'subDirectory',
            backgroundColor : '#CCC'
        });
        Window.open({modal:true});
    });

    row.add(colorBar);

    row.add(tableLabel);
    tableRows.push(row);

    loopColor++;

    if (loopColor &gt;</span> 2)
        loopColor = 0;
}

table.setData(tableRows);

topLabel.add(topText);
win1.add(topLabel);
win1.add(table);

win1.open();
</code></pre><p>Here is all of the code for subDirectory.js</p>
<pre><code class="hljs"><span class="hljs-comment">//will include the database file</span>
Ti.Database.install(<span class="hljs-string">'ui/common/ccisd_mobile.db'</span>, <span class="hljs-string">'CCISD_DB'</span>);
<span class="hljs-comment">//makes call to open database</span>
var db = Ti.Database.open(<span class="hljs-string">'CCISD_DB'</span>);
<span class="hljs-comment">//call to retrieve data</span>
var dataList = db.execute(<span class="hljs-string">'SELECT * FROM Building'</span>);

var CustomData = [];
<span class="hljs-comment">//stores data to array</span>
<span class="hljs-keyword">while</span> (dataList.isValidRow()) {
    temp = dataList.fieldByName(<span class="hljs-string">'Street'</span>) + <span class="hljs-string">' '</span> + dataList.fieldByName(<span class="hljs-string">'City'</span>) + <span class="hljs-string">' Texas, '</span> + dataList.fieldByName(<span class="hljs-string">'Zip'</span>);

    var tempData = {
        <span class="hljs-string">ID :</span> dataList.fieldByName(<span class="hljs-string">'BuildingID'</span>),
        <span class="hljs-string">title :</span> dataList.fieldByName(<span class="hljs-string">'BuildingName'</span>),
        <span class="hljs-string">phone :</span> dataList.fieldByName(<span class="hljs-string">'Phone'</span>),
        <span class="hljs-string">fax :</span> dataList.fieldByName(<span class="hljs-string">'Fax'</span>),
        <span class="hljs-string">principal :</span> dataList.fieldByName(<span class="hljs-string">'Principal'</span>),
        <span class="hljs-string">pEmail :</span> dataList.fieldByName(<span class="hljs-string">'PrincipalEmail'</span>),
        <span class="hljs-string">address :</span> temp
    };
    dataList.next();
    CustomData.push(tempData);
}
dataList.close();
db.close();

var win2 = Ti.UI.createWindow({
<span class="hljs-label">    title:</span><span class="hljs-string">'subDirectory'</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#282828'</span>
});

<span class="hljs-comment">/***********
 * top label
 ***********/</span>
var topLabel = Ti.UI.createView({
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'black'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">bottom :</span> <span class="hljs-string">'90%'</span>
});

var topText = Ti.UI.createLabel({
    <span class="hljs-string">color :</span> <span class="hljs-string">'white'</span>,
    <span class="hljs-string">text :</span> <span class="hljs-string">'Directory'</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-string">'30sp'</span>
    }
});

<span class="hljs-comment">/*****************
 * table list text
 *****************/</span>
var table = Ti.UI.createTableView({
    <span class="hljs-string">top :</span> <span class="hljs-string">'15%'</span>,
    <span class="hljs-string">left :</span> <span class="hljs-string">'5%'</span>,
    <span class="hljs-string">right :</span> <span class="hljs-string">'5%'</span>,
    <span class="hljs-string">bottom :</span> <span class="hljs-string">'10%'</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'white'</span>
});

<span class="hljs-comment">/*************************
 * rows added to tableRows
 *************************/</span>
var tableRows = [];

var loopColor = <span class="hljs-number">0</span>;

<span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; dataList.length; i++) {

    var colorBar = Ti.UI.createLabel({
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'30%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'7%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'72dp'</span>,
        <span class="hljs-string">width :</span> <span class="hljs-string">'4dp'</span>,
    });

    <span class="hljs-comment">/***************************************************
     * this switch enables colorBar to alternate colors.
     *
     ***************************************************/</span>
    <span class="hljs-keyword">switch</span>(loopColor) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
            colorBar.setBackgroundColor(<span class="hljs-string">'#FF6666'</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
            colorBar.setBackgroundColor(<span class="hljs-string">'#088da5'</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
            colorBar.setBackgroundColor(<span class="hljs-string">'#FF9900'</span>);
            <span class="hljs-keyword">break</span>;
    }

    var row = Ti.UI.createTableViewRow({
        <span class="hljs-string">height :</span> <span class="hljs-string">'120dp'</span>,
        <span class="hljs-string">className :</span> <span class="hljs-string">'rows'</span>,
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'white'</span>,
        <span class="hljs-string">selectedBackgroundColor :</span> <span class="hljs-string">'white'</span>
    });

    var campus = Titanium.UI.createLabel({
        <span class="hljs-string">text :</span> CustomData[i].schoolName,
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-string">'18sp'</span>,
            <span class="hljs-string">fontWeight :</span> <span class="hljs-string">'bold'</span>
        },
        <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'3%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'6%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'35dp'</span>
    });

    var principal = Titanium.UI.createLabel({
        <span class="hljs-string">text :</span> <span class="hljs-string">'Principal:  '</span> + dataList[i].principal,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15sp'</span>
        },
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'27%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'10%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'20dp'</span>
    });

    var number = Titanium.UI.createLabel({
        <span class="hljs-string">text :</span> <span class="hljs-string">'Number:   '</span> + CustomData[i].phone,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15sp'</span>
        },
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'44%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'10%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'20dp'</span>
    });

    var address = Titanium.UI.createLabel({
        <span class="hljs-string">text :</span> <span class="hljs-string">'Address:   '</span> + CustomData[i].address,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15sp'</span>
        },
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'60%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'10%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'40dp'</span>
    });

    row.add(colorBar);
    row.add(campus);
    row.add(principal);
    row.add(number);
    row.add(address);
    tableRows.push(row);

    loopColor++;

    <span class="hljs-keyword">if</span> (loopColor &gt; <span class="hljs-number">2</span>)
        loopColor = <span class="hljs-number">0</span>;
}

table.setData(tableRows);

topLabel.add(topText);
win2.add(topLabel);
win2.add(table);

win2.open();

alert(<span class="hljs-string">'source: '</span> + sourceRow);
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="April 4th 2013, 1:15:10 pm">April 4th 2013</span>
								by <span class='authorname'>Andrew Cox</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-260103">
				
						<section>
							<p>hi,</p>
<p>in subDirectory.js…. you are creating a window and open while you are opening that window from mainDirectory.js. strange…!!!!</p>
<p>so no need to open win2 in subDirectory.js. just use this..</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> win2</span> = Ti.UI.currentWindow();
</code></pre><p>and comment this line..</p>
<p><code>win2.open();</code></p>
<p>plus when you install datebase with.install() method then there is already open connection for database so no need to open it again in your subDirectory.js window just follow the below code.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> db = Ti.Database.install(<span class="hljs-string">'ui/common/ccisd_mobile.db'</span>, <span class="hljs-string">'CCISD_DB'</span>);
</code></pre><p>and now if you want to use database in other windows after installing it then there you can just open database with .open() method.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 5th 2013, 3:04:49 am">April 5th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/150427/having-trouble-opening-nested-windows#answer-260103" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>[ There are no parenthesis on currentWindow() it seems ]</p>
<p>The subDirectory still won&#39;t display properly. Here&#39;s my code now.</p>
<p> I&#39;m opening subDirectory from ApplicationWindow.js using:</p>
<pre><code class="hljs">
button1.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
        var Window = Titanium.UI.createWindow({
            <span class="hljs-string">url :</span> <span class="hljs-string">'/directory/directoryMenu.js'</span>,
            <span class="hljs-string">title :</span> <span class="hljs-string">'directoryMenu'</span>,
            <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#CCC'</span>

        });
        Window.open({
            <span class="hljs-string">modal :</span> <span class="hljs-literal">true</span>,
            <span class="hljs-string">navBarHidden :</span> <span class="hljs-literal">true</span>
        });
    });
</code></pre><p>Here is directoryMenu.js:</p>
<pre><code class="hljs">var directoryMenu =Ti.UI.currentWindow;

directoryMenu.setBackgroundColor('<span class="hljs-comment">#282828');</span>

/<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>
 <span class="hljs-keyword">*</span> top label
 <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>/
var topLabel = Ti.UI.createView({
    backgroundColor : 'black',
    top : 0,
    bottom : '90%'
});

var topText = Ti.UI.createLabel({
    color : 'white',
    text : 'Directory',
    font : {
        fontSize : '30sp'
    }
});

/<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>
 <span class="hljs-keyword">*</span> table list text
 <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>/
var list = ['ELEMENTARY SCHOOLS', 'MIDDLE SCHOOLS', 'HIGH SCHOOLS', 'OTHER', 'DISTRICT'];

var table = Ti.UI.createTableView({
    top : '15%',
    left : '5%',
    right : '5%',
    bottom : '10%',
    backgroundColor : 'white'
});

/<span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>
 <span class="hljs-keyword">*</span> rows added to tableRows
 <span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span><span class="hljs-keyword">*</span>/
var tableRows = [];

var loopColor = 0;

for (var i = 0; i <span class="hljs-variable">&lt; list.length; i++) {

    var colorBar = Ti.UI.createLabel({
        backgroundColor : 'black',
        top : '42%',
        left : '6%',
        height : '20dp',
        width : '8dp',
    });

    /***************************************************
     * this switch enables colorBar to alternate colors.
     *
     ***************************************************/
    switch(loopColor) {
        case 0:
            colorBar.setBackgroundColor('#FF6666');
            break;
        case 1:
            colorBar.setBackgroundColor('#088da5');
            break;
        case 2:
            colorBar.setBackgroundColor('#FF9900');
            break;
    }

    var row = Ti.UI.createTableViewRow({
        height : '88dp',
        className : 'rows',
        backgroundColor : 'white',
        selectedBackgroundColor : 'white'
    });

    var tableLabel = Ti.UI.createLabel({
        color : 'black',
        text : list[i],
        font : {
            fontSize : '20sp',
            fontWeight : 'bold'
        }
    });

    row.addEventListener('click', function(e) {
        //sourceRow = e.index;

        var Window = Titanium.UI.createWindow({
            url : 'subDirectory.js',
            title : 'subDirectory',
            backgroundColor : '#CCC'
        });
        Window.open({
            modal : true,
            navBarHidden: true
        });
    });

    row.add(colorBar);

    row.add(tableLabel);
    tableRows.push(row);

    loopColor++;

    if (loopColor &gt;</span> 2)
        loopColor = 0;
}

table.setData(tableRows);

topLabel.add(topText);
directoryMenu.add(topLabel);
directoryMenu.add(table);

//capturing back button action in order to close window 
directoryMenu.addEventListener('android:back',function(e) {
        directoryMenu.close(Ti.UI.currentWindow);
});
</code></pre><p>and here is subDirectory:</p>
<pre><code class="hljs">
var subDirectory =Ti.UI.currentWindow;

directoryMenu.setBackgroundColor(<span class="hljs-string">'#282828'</span>);

<span class="hljs-comment">//will include the database file</span>
Ti.Database.install(<span class="hljs-string">'ui/common/ccisd_mobile.db'</span>, <span class="hljs-string">'CCISD_DB'</span>);
<span class="hljs-comment">//makes call to open database</span>
var db = Ti.Database.open(<span class="hljs-string">'CCISD_DB'</span>);
<span class="hljs-comment">//call to retrieve data</span>
var dataList = db.execute(<span class="hljs-string">'SELECT * FROM Building'</span>);

var CustomData = [];
<span class="hljs-comment">//stores data to array</span>
<span class="hljs-keyword">while</span> (dataList.isValidRow()) {
    temp = dataList.fieldByName(<span class="hljs-string">'Street'</span>) + <span class="hljs-string">' '</span> + dataList.fieldByName(<span class="hljs-string">'City'</span>) + <span class="hljs-string">' Texas, '</span> + dataList.fieldByName(<span class="hljs-string">'Zip'</span>);

    var tempData = {
        <span class="hljs-string">ID :</span> dataList.fieldByName(<span class="hljs-string">'BuildingID'</span>),
        <span class="hljs-string">title :</span> dataList.fieldByName(<span class="hljs-string">'BuildingName'</span>),
        <span class="hljs-string">phone :</span> dataList.fieldByName(<span class="hljs-string">'Phone'</span>),
        <span class="hljs-string">fax :</span> dataList.fieldByName(<span class="hljs-string">'Fax'</span>),
        <span class="hljs-string">principal :</span> dataList.fieldByName(<span class="hljs-string">'Principal'</span>),
        <span class="hljs-string">pEmail :</span> dataList.fieldByName(<span class="hljs-string">'PrincipalEmail'</span>),
        <span class="hljs-string">address :</span> temp
    };
    dataList.next();
    CustomData.push(tempData);
}
dataList.close();
db.close();

<span class="hljs-comment">/***********
 * top label
 ***********/</span>
var topLabel = Ti.UI.createView({
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'black'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
    <span class="hljs-string">bottom :</span> <span class="hljs-string">'90%'</span>
});

var topText = Ti.UI.createLabel({
    <span class="hljs-string">color :</span> <span class="hljs-string">'white'</span>,
    <span class="hljs-string">text :</span> <span class="hljs-string">'Directory'</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-string">'30sp'</span>
    }
});

<span class="hljs-comment">/*****************
 * table list text
 *****************/</span>
var table = Ti.UI.createTableView({
    <span class="hljs-string">top :</span> <span class="hljs-string">'15%'</span>,
    <span class="hljs-string">left :</span> <span class="hljs-string">'5%'</span>,
    <span class="hljs-string">right :</span> <span class="hljs-string">'5%'</span>,
    <span class="hljs-string">bottom :</span> <span class="hljs-string">'10%'</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'white'</span>
});

<span class="hljs-comment">/*************************
 * rows added to tableRows
 *************************/</span>
var tableRows = [];

var loopColor = <span class="hljs-number">0</span>;

<span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; dataList.length; i++) {

    var colorBar = Ti.UI.createLabel({
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'30%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'7%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'72dp'</span>,
        <span class="hljs-string">width :</span> <span class="hljs-string">'4dp'</span>,
    });

    <span class="hljs-comment">/***************************************************
     * this switch enables colorBar to alternate colors.
     *
     ***************************************************/</span>
    <span class="hljs-keyword">switch</span>(loopColor) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
            colorBar.setBackgroundColor(<span class="hljs-string">'#FF6666'</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
            colorBar.setBackgroundColor(<span class="hljs-string">'#088da5'</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
            colorBar.setBackgroundColor(<span class="hljs-string">'#FF9900'</span>);
            <span class="hljs-keyword">break</span>;
    }

    var row = Ti.UI.createTableViewRow({
        <span class="hljs-string">height :</span> <span class="hljs-string">'120dp'</span>,
        <span class="hljs-string">className :</span> <span class="hljs-string">'rows'</span>,
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'white'</span>,
        <span class="hljs-string">selectedBackgroundColor :</span> <span class="hljs-string">'white'</span>
    });

    var campus = Titanium.UI.createLabel({
        <span class="hljs-string">text :</span> CustomData[i].schoolName,
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-string">'18sp'</span>,
            <span class="hljs-string">fontWeight :</span> <span class="hljs-string">'bold'</span>
        },
        <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'3%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'6%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'35dp'</span>
    });

    var principal = Titanium.UI.createLabel({
        <span class="hljs-string">text :</span> <span class="hljs-string">'Principal:  '</span> + dataList[i].principal,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15sp'</span>
        },
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'27%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'10%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'20dp'</span>
    });

    var number = Titanium.UI.createLabel({
        <span class="hljs-string">text :</span> <span class="hljs-string">'Number:   '</span> + CustomData[i].phone,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15sp'</span>
        },
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'44%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'10%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'20dp'</span>
    });

    var address = Titanium.UI.createLabel({
        <span class="hljs-string">text :</span> <span class="hljs-string">'Address:   '</span> + CustomData[i].address,
        <span class="hljs-string">font :</span> {
            <span class="hljs-string">fontSize :</span> <span class="hljs-string">'15sp'</span>
        },
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">width :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>,
        <span class="hljs-string">top :</span> <span class="hljs-string">'60%'</span>,
        <span class="hljs-string">left :</span> <span class="hljs-string">'10%'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-string">'40dp'</span>
    });

    row.add(colorBar);
    row.add(campus);
    row.add(principal);
    row.add(number);
    row.add(address);
    tableRows.push(row);

    loopColor++;

    <span class="hljs-keyword">if</span> (loopColor &gt; <span class="hljs-number">2</span>)
        loopColor = <span class="hljs-number">0</span>;
}

table.setData(tableRows);

topLabel.add(topText);
subDirectory.add(topLabel);
subDirectory.add(table);

<span class="hljs-comment">//capturing back button action in order to close window </span>
subDirectory.addEventListener(<span class="hljs-string">'android:back'</span>,function(e) {
        subDirectory.close(Ti.UI.currentWindow);
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 5th 2013, 3:35:20 am">April 5th 2013</span>
											by <span class='authorname'>Andrew Cox</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
