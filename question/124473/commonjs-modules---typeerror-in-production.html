<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>CommonJS Modules - typeerror in production » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>CommonJS Modules - typeerror in production</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>In Forging Titanium Episode 1 using commonJS Modules it helps a lot to clean the code and maintain things out of the global scope, But i have a problem when i package for distribution.</p>
<p>It gives me a error: TypeError: Cannot find &#39;myFunction&#39; in Object [Ti.Kroll]</p>
<p>this is what i&#39;m doing:</p>
<p>in my app.js i open a window, and this window opens all the controls for the UI from the &#39;menu&#39; file.</p>
<p>my directory: </p>
<p>app.js<br>views&#x2F;menu.js<br>lib&#x2F;myModule</p>
<p>in menu.js a do:</p>
<p>var MyModule = require(lib&#x2F;myModule);</p>
<p>MyModule.someFunction();</p>
<p>so its here that i get the error that cannot find &#39;someFunction()&#39; but only if i package for distribution</p>
<p>If i run on emulator or phone it works.<br>Anyone is having the same issue? or i&#39;m doing anything wrong?</p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 19th 2011, 7:14:19 am">August 19th 2011</span>
				by <span class='authorname'>Daniel Jorge</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>commonjs modules</span></li>
					
						<li><span class='tagname'>modules</span></li>
					
						<li><span class='tagname'>typeerror</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-219833">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Fix has been pushed to CI builds for 1.7.3 and 1.8.0 - See <a href="http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-5123">TIMOB-5123</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 29th 2011, 2:06:11 pm">September 29th 2011</span>
								by <span class='authorname'>Don Thorp</span><br>
								<a class="icon-bg icon-link" href="../../question/124473/commonjs-modules---typeerror-in-production.html#answer-219833" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hello,</p>
<p>Just tested with the new build and it works fine now :) Thanks Don Thorp!</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 3rd 2011, 11:27:05 am">October 3rd 2011</span>
											by <span class='authorname'>Daniel Jorge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Now the problem is that <code>Ti.include</code> is busted in 1.8.0.v20111003072623 when CommonJS Modules are used (<code>require</code> function).  See here <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;126407&#x2F;tiinclude-seems-to-be-busted-in-sdk-180v20111003072623">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;126407&#x2F;tiinclude-seems-to-be-busted-in-sdk-180v20111003072623</a>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 4th 2011, 5:58:19 pm">October 4th 2011</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-218739">
				
						<section>
							<p>This is beginning to get fixed in 1.8 - you can install a 1.8.x continuous integration build by going to <a href="http:&#x2F;&#x2F;builds.appcelerator.com.s3.amazonaws.com&#x2F;index.html">our continuous build server</a> and copying the URL for the <a href="http:&#x2F;&#x2F;builds.appcelerator.com.s3.amazonaws.com&#x2F;mobile&#x2F;master&#x2F;mobilesdk-1.8.0.v20110913101350-osx.zip">latest build from master, linked here</a>.</p>
<p>With the URL, go into Studio and install an SDK from a URL.  This option is in the &quot;Help&quot; Menu, and is called &quot;Install Titanium SDK from URL…&quot; - paste in <a href="http:&#x2F;&#x2F;builds.appcelerator.com.s3.amazonaws.com&#x2F;mobile&#x2F;master&#x2F;mobilesdk-1.8.0.v20110913101350-osx.zip">the link</a> in the dialog:</p>
<p><img src="https:&#x2F;&#x2F;img.skitch.com&#x2F;20110913-p3awxbgka5pridfy2yd5gqwg53.jpg" alt="paste it in"></p>
<p>Go into tiapp.xml and choose to use this new Titanium version in your app:</p>
<p><img src="https:&#x2F;&#x2F;img.skitch.com&#x2F;20110913-ekc2wji7jgb5sx6csx8ung38a2.jpg" alt="change sdk version"></p>
<p>Next, direct Titanium NOT to pre-compile JavaScript (this is an Android-only configuration option) under any circumstances, by adding:</p>
<pre><code class="hljs">&lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"ti.android.compilejs"</span> type=<span class="hljs-string">"bool"</span>&gt;<span class="hljs-constant">false</span>&lt;/<span class="hljs-keyword">property</span>&gt;
</code></pre><p><img src="https:&#x2F;&#x2F;img.skitch.com&#x2F;20110913-tmgrkxs95h7eb3xj3ciku4tpys.jpg" alt="tiapp.xml"></p>
<p>Now clean your project, and package for distribution - I just tested this a moment ago with CommonJS modules and it works fine.  This song and dance will not be necessary in future Titanium releases (1.8+), as this is on the radar screen for platform to get fixed.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 13th 2011, 4:17:08 pm">September 13th 2011</span>
								by <span class='authorname'>Kevin Whinnery</span><br>
								<a class="icon-bg icon-link" href="../../question/124473/commonjs-modules---typeerror-in-production.html#answer-218739" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Can you elaborate on the ti.android.compilejs property, or point us to somewhere on the web site that we can learn more about what the ramifications of this setting are?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2011, 4:28:53 pm">September 13th 2011</span>
											by <span class='authorname'>Mark Burggraf</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hello,</p>
<p>downloaded the 1.8.0.v20110913141920 sdk<br>i have cleaned the project<br>and direct Titanium NOT to pre-compile JavaScript</p>
<p>but i cant get it to working with the workaround, log:</p>
<p>D&#x2F;KrollContext(31808): (kroll$1: app:&#x2F;&#x2F;app.js) [310,893] Running pre-compiled script: app.js<br>E&#x2F;KrollContext(31808): (kroll$1: app:&#x2F;&#x2F;app.js) [2,895] Couldn&#39;t find pre-compiled class for script: app.js<br>E&#x2F;KrollContext(31808): java.lang.ClassNotFoundException: com.appcelerator.navcontroller.js.app<br>E&#x2F;KrollContext(31808):     at java.lang.Class.classForName(Native Method)<br>E&#x2F;KrollContext(31808):     at java.lang.Class.forName(Class.java:234)<br>E&#x2F;KrollContext(31808):     at java.lang.Class.forName(Class.java:181)<br>E&#x2F;KrollContext(31808):     at org.appcelerator.titanium.TiScriptRunner.runScript(TiScriptRunner.java:101)<br>E&#x2F;KrollContext(31808):     at org.appcelerator.titanium.kroll.KrollContext.runCompiledScript(KrollContext.java:292)<br>E&#x2F;KrollContext(31808):     at org.appcelerator.titanium.kroll.KrollContext.handleEvalFile(KrollContext.java:317)<br>E&#x2F;KrollContext(31808):     at org.appcelerator.titanium.kroll.KrollContext.handleMessage(KrollContext.java:218)<br>E&#x2F;KrollContext(31808):     at org.appcelerator.titanium.TiMessageQueue.handleMessage(TiMessageQueue.java:223)<br>E&#x2F;KrollContext(31808):     at android.os.Handler.dispatchMessage(Handler.java:95)<br>E&#x2F;KrollContext(31808):     at android.os.Looper.loop(Looper.java:130)<br>E&#x2F;KrollContext(31808):     at org.appcelerator.titanium.kroll.KrollHandlerThread.run(KrollHandlerThread.java:86)<br>E&#x2F;KrollContext(31808): Caused by: java.lang.NoClassDefFoundError: com.appcelerator.navcontroller.js.app<br>E&#x2F;KrollContext(31808):     … 11 more<br>E&#x2F;KrollContext(31808): Caused by: java.lang.ClassNotFoundException: com.appcelerator.navcontroller.js.app in loader dalvik.system.PathClassLoader[&#x2F;mnt&#x2F;asec&#x2F;com.appcelerator.navcontroller-2&#x2F;pkg.apk]<br>E&#x2F;KrollContext(31808):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)<br>E&#x2F;KrollContext(31808):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)<br>E&#x2F;KrollContext(31808):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)<br>E&#x2F;KrollContext(31808):     … 11 more</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 14th 2011, 8:41:34 am">September 14th 2011</span>
											by <span class='authorname'>Daniel Jorge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>NOTE:  setting ti.android.compilejs to false will not compile your application to byte code, resulting in your app&#39;s source code being included in the distribution file.  So the current workaround sacrifices source code security.  I&#39;m told that this should be fixed in the final 1.8 release, though.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 14th 2011, 2:08:44 pm">September 14th 2011</span>
											by <span class='authorname'>Mark Burggraf</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I got the same error as Daniel:</p>
<pre><code class="hljs">Running pre-compiled <span class="hljs-keyword">script</span>: app.js
Couldn't find pre-compiled <span class="hljs-type">class</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">script</span>: app.js
</code></pre><p>At this point, the &quot;workaround&quot; is not working.  I am using a Windows XP machine, if that matters.  Also tried with SDK 1.8.0.v20110913141920 with same result.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 6:16:11 pm">September 15th 2011</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The only thing I can think of is that your tiapp.xml settings are not being respected - that directive I had you add, ti.android.compilejs set to false, should tell Titanium NOT to look for compiled classes.  This configuration is working for me (obviously, since I posted it).  I am on a Mac (10.6) with Android tools level 12.</p>
<p>I assume you&#39;ve cleaned your project through Studio.  Try manually deleting the contents of the build&#x2F;android directory (not the directory) in Windows Explorer or the command line.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 6:39:16 pm">September 15th 2011</span>
											by <span class='authorname'>Kevin Whinnery</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The &quot;ti.android.compilejs set to false&quot; directive is being at least partially respected, because I see the log entry <code>[TRACE] app property, ti.android.compilejs : false</code> 4 times during the build process.</p>
<p>Do you guys have a windows machine you can try this on?  This is the second time I&#39;ve seen the Mac guys say something works and the Windows guys say it doesn&#39;t.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 7:03:25 pm">September 15th 2011</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>…and I did clean the project from Titanium Studio.  I tried deleting the entire build directory, and just the contents.  All yielded the same result.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 7:34:09 pm">September 15th 2011</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Anyone looking for a workaround, please see my answer on this page that starts with <strong>Here&#39;s a workaround that worked for me</strong>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 15th 2011, 7:35:10 pm">September 15th 2011</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I get the same error <code>Couldn&amp;#39;t find pre-compiled class for script: app.js</code><br> on Android when I deploy with ti.android.compilejs to false.</p>
<p>I am running mobilesdk-1.8.0.v20110916080725</p>
<pre><code class="hljs">
E/<span class="hljs-function"><span class="hljs-title">TiApplication</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>: (main) [<span class="hljs-number">372</span>,<span class="hljs-number">418</span>] APP PROXY: [Ti.App]
D/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>: (kroll$<span class="hljs-number">1</span>: app:<span class="hljs-comment">//app.js) [171,589] Running pre-compiled script: app.js</span>
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>: (kroll$<span class="hljs-number">1</span>: app:<span class="hljs-comment">//app.js) [2,591] Couldn't find pre-compiled class for script: app.js</span>
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>: java<span class="hljs-class">.lang</span><span class="hljs-class">.ClassNotFoundException</span>: com<span class="hljs-class">.frontierlabel</span><span class="hljs-class">.js</span><span class="hljs-class">.app</span>
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at java<span class="hljs-class">.lang</span><span class="hljs-class">.Class</span><span class="hljs-class">.classForName</span>(Native Method)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at java<span class="hljs-class">.lang</span><span class="hljs-class">.Class</span><span class="hljs-class">.forName</span>(Class<span class="hljs-class">.java</span>:<span class="hljs-number">234</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at java<span class="hljs-class">.lang</span><span class="hljs-class">.Class</span><span class="hljs-class">.forName</span>(Class<span class="hljs-class">.java</span>:<span class="hljs-number">181</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.TiScriptRunner</span><span class="hljs-class">.runScript</span>(TiScriptRunner<span class="hljs-class">.java</span>:<span class="hljs-number">101</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.kroll</span><span class="hljs-class">.KrollContext</span><span class="hljs-class">.runCompiledScript</span>(KrollContext<span class="hljs-class">.java</span>:<span class="hljs-number">292</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.kroll</span><span class="hljs-class">.KrollContext</span><span class="hljs-class">.handleEvalFile</span>(KrollContext<span class="hljs-class">.java</span>:<span class="hljs-number">317</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.kroll</span><span class="hljs-class">.KrollContext</span><span class="hljs-class">.handleMessage</span>(KrollContext<span class="hljs-class">.java</span>:<span class="hljs-number">218</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.TiMessageQueue</span><span class="hljs-class">.handleMessage</span>(TiMessageQueue<span class="hljs-class">.java</span>:<span class="hljs-number">223</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at android<span class="hljs-class">.os</span><span class="hljs-class">.Handler</span><span class="hljs-class">.dispatchMessage</span>(Handler<span class="hljs-class">.java</span>:<span class="hljs-number">95</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at android<span class="hljs-class">.os</span><span class="hljs-class">.Looper</span><span class="hljs-class">.loop</span>(Looper<span class="hljs-class">.java</span>:<span class="hljs-number">123</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at org<span class="hljs-class">.appcelerator</span><span class="hljs-class">.titanium</span><span class="hljs-class">.kroll</span><span class="hljs-class">.KrollHandlerThread</span><span class="hljs-class">.run</span>(KrollHandlerThread<span class="hljs-class">.java</span>:<span class="hljs-number">86</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>: Caused by: java<span class="hljs-class">.lang</span><span class="hljs-class">.NoClassDefFoundError</span>: com<span class="hljs-class">.frontierlabel</span><span class="hljs-class">.js</span><span class="hljs-class">.app</span>
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     ... <span class="hljs-number">11</span> more
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>: Caused by: java<span class="hljs-class">.lang</span><span class="hljs-class">.ClassNotFoundException</span>: com<span class="hljs-class">.frontierlabel</span><span class="hljs-class">.js</span><span class="hljs-class">.app</span> <span class="hljs-keyword">in</span> loader dalvik<span class="hljs-class">.system</span><span class="hljs-class">.PathClassLoader</span>[/data/app/com<span class="hljs-class">.frontierlabel-1</span><span class="hljs-class">.apk</span>]
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at dalvik<span class="hljs-class">.system</span><span class="hljs-class">.PathClassLoader</span><span class="hljs-class">.findClass</span>(PathClassLoader<span class="hljs-class">.java</span>:<span class="hljs-number">240</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at java<span class="hljs-class">.lang</span><span class="hljs-class">.ClassLoader</span><span class="hljs-class">.loadClass</span>(ClassLoader<span class="hljs-class">.java</span>:<span class="hljs-number">551</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     at java<span class="hljs-class">.lang</span><span class="hljs-class">.ClassLoader</span><span class="hljs-class">.loadClass</span>(ClassLoader<span class="hljs-class">.java</span>:<span class="hljs-number">511</span>)
E/<span class="hljs-function"><span class="hljs-title">KrollContext</span><span class="hljs-params">(  <span class="hljs-number">570</span>)</span></span>:     ... <span class="hljs-number">11</span> more
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="September 20th 2011, 4:55:35 am">September 20th 2011</span>
											by <span class='authorname'>Dan Frist</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi, I followed the instructions but now when I run my app on the device I see the splash screen for a few seconds and then the application crashes: &quot;Sorry! The application MyApp (process com.mycompany.MyApp) has stopped unexpectedly. Please try again&quot; - needles to mention that try again doesn&#39;t work…</p>
<p>I&#39;m using SDK 1.8.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 10th 2011, 5:59:03 am">October 10th 2011</span>
											by <span class='authorname'>Ophir &#39;Shlomi&#39; Oren</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey Shlomi Or<br>i tested now with build: <strong>1.8.0.v20111010000614</strong>.<br>In the app that im working i use a lot of requires and its working well, tested in phone with android 2.3.3 and emulator 2.2, ive not tested in iphone beacuse this project will be only for android.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 10th 2011, 10:18:23 am">October 10th 2011</span>
											by <span class='authorname'>Daniel Jorge</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-216912">
				
						<section>
							<p>the file name should be<br><strong>myModule.js</strong> not only <strong>myModule</strong></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 19th 2011, 7:52:07 am">August 19th 2011</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="../../question/124473/commonjs-modules---typeerror-in-production.html#answer-216912" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-218736">
				
						<section>
							<p>Thank you very much, Kevin.  I will establish an initial email contact at that address today, and check back for updates.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 13th 2011, 3:29:37 pm">September 13th 2011</span>
								by <span class='authorname'>Shawn Lipscomb</span><br>
								<a class="icon-bg icon-link" href="../../question/124473/commonjs-modules---typeerror-in-production.html#answer-218736" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-218937">
				
						<section>
							<p><strong>Here&#39;s a workaround that worked for me</strong>.  Disclaimer:  I consider this a &quot;rig&quot;, but I had to get my app out to my customers.  It does <strong>not</strong> set the ti.android.compilejs property to false, but any of your CommonJS &quot;units&quot; (files brought in with <code>require</code>) <strong>will</strong> be included in the distribution file as raw source code (.js files).  I figure that&#39;s a little better than having <em>all</em> of the source code out there.</p>
<p>This is easier than it looks…try it a few times, and you can do it in under 10 seconds.</p>
<ul>
<li>Leave the ti.android.compilejs property out of your tiapp.xml file.</li>
<li>Delete the build directory, and Clean the project.</li>
<li>Package -&gt; Distribute Android</li>
</ul>
<p>Here&#39;s where my workaround starts (instructions are for Windows machines):</p>
<ul>
<li><p>Off the root of drive C: make an <code>assets</code> directory.</p>
</li>
<li><p>Make a <code>Resources</code> subdirectory below the <code>assets</code> directory.</p>
</li>
<li><p>Copy all of your CommonJS &quot;units&quot; (files brought in with <code>require</code>) to the C:\assets\Resources\ directory, keeping their relative directory structure intact.  For example, if you have a <code>foo=require(&amp;#39;libdir&amp;#x2F;foo&amp;#39;);</code> statement in your code, copy foo.js to C:\assets\Resources\libdir\foo.js.</p>
</li>
<li><p>Open <em>MyWorkspace\MyApp</em>\build\android\bin\app-unsigned.apk with WinZip.</p>
</li>
<li><p>Using Windows Explorer, drag all the files from your C:\assets\Resources\ directory (or your C:\assets\Resources\libdir\ directory, in the example) to WinZip.  When WinZip&#39;s &quot;Add&quot; dialog appears, make sure to check the &quot;save full path info&quot; checkbox.  This will place your CommonJS files into the apk with the correct directory structure.</p>
</li>
<li><p>Sign the apk by copying the 2nd-to-last line from the Titanium Studio console (it contains the jarsigner.exe command) and pasting it into a DOS prompt.</p>
</li>
<li><p>Zipalign the apk by copying the last line from the Titanium Studio console (it contains the zipalign.exe command) and pasting it into a DOS prompt.</p>
</li>
<li><p>Delete the <em>MyApp</em>.apk file that jarsigner created (in your distribution directory).</p>
</li>
<li><p>Rename the <em>MyApp</em>.apkz file that zipalign created (in your distribution directory) to <em>MyApp</em>.apk.</p>
</li>
<li><p>&quot;Verify&quot; the package by running <code>jarsigner -verify -verbose MyApp.apk</code> and looking for &quot;jar verified&quot; at the end.</p>
</li>
<li><p>Use <code>adb install MyApp.apk</code> to install the app on a USB-connected phone (you must uninstall any previous version from the phone first) to test out the distributable apk.</p>
</li>
<li><p>Upload <em>MyApp</em>.apk to the Android Market and celebrate!</p>
</li>
</ul>
<p>I am looking forward to the 1.8.0 SDK release so that none of this is necessary.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 15th 2011, 7:31:40 pm">September 15th 2011</span>
								by <span class='authorname'>Shawn Lipscomb</span><br>
								<a class="icon-bg icon-link" href="../../question/124473/commonjs-modules---typeerror-in-production.html#answer-218937" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-216914">
				
						<section>
							<p>Sorry i type it wrong, in my lib directory i have <strong>myModule.js</strong></p>
<p>so i need to put also in <strong>require(&#39;lib&#x2F;myModule.js&#39;)</strong> ?</p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 19th 2011, 7:57:55 am">August 19th 2011</span>
								by <span class='authorname'>Daniel Jorge</span><br>
								<a class="icon-bg icon-link" href="../../question/124473/commonjs-modules---typeerror-in-production.html#answer-216914" rel="permalink">permalink</a>
							</div>

							<h5>20 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>No require is without the file extension.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 7:59:10 am">August 19th 2011</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok but when i package for distribution it gives that error, but if i only run it works fine</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 8:02:13 am">August 19th 2011</span>
											by <span class='authorname'>Daniel Jorge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i have sdk 1.7.3 - 08&#x2F;08&#x2F;2011</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 8:03:19 am">August 19th 2011</span>
											by <span class='authorname'>Daniel Jorge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>mmm, try to require the files with absolute path</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">require</span><span class="hljs-params">(<span class="hljs-string">'/lib/myModule'</span>)</span></span>
</code></pre><p>assuming the lib folder is directly under the Resources folder</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 8:05:00 am">August 19th 2011</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Still not working :(</p>
<p>so i made a simple test i have done this:</p>
<p>my directory:</p>
<pre><code class="hljs"><span class="hljs-constant">Resources</span>
 - android
 - iphone
 - <span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">myModule</span>.<span class="hljs-title">js</span></span>
 - view/menu.js
 - app.js
</code></pre><p>in app.js i have:</p>
<pre><code class="hljs">Titanium.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);

<span class="hljs-keyword">var</span> win = Titanium.UI.createWindow({ 
    orientationModes: [Titanium.UI.PORTRAIT],
    className:<span class="hljs-string">'window'</span>,
    navBarHidden:<span class="hljs-literal">true</span>,
    fullscreen: <span class="hljs-literal">false</span>,
    backgroundColor: <span class="hljs-string">'#fff'</span>,
    exitOnClose: <span class="hljs-literal">true</span>,
    url:<span class="hljs-string">'view/menu.js'</span>

});

win.open();
</code></pre><p>menu.js:</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> <span class="hljs-built_in">window</span> = { win:Ti.UI.currentWindow };

<span class="hljs-keyword">var</span> myModule = <span class="hljs-built_in">require</span>(<span class="hljs-string">'/lib/myModule'</span>);

myModule.sayHello(<span class="hljs-string">'kevin'</span>);
</code></pre><p>and myModule.js:</p>
<pre><code class="hljs">
exports.sayHello = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name)</span> </span>{
    alert(<span class="hljs-string">'Hello'</span> + name);
};
</code></pre><p>run in emulator and phone it works but when packaging for distribution it gives me the typeerror</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 9:07:33 am">August 19th 2011</span>
											by <span class='authorname'>Daniel Jorge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>no pb for me with 1.7.1</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 10:44:19 am">August 19th 2011</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>tested with 1.7.1 and it gives me a diferent error: java.io.FIleNotFoundException, with and without the &#39;&#x2F;&#39; before lib</p>
<p>only changed the sdk version</p>
<p>tested in two android phones both give the error :(</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 11:51:05 am">August 19th 2011</span>
											by <span class='authorname'>Daniel Jorge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>just tryied <a href="http:&#x2F;&#x2F;vimeopro.com&#x2F;appcelerator&#x2F;forging-titanium">commonJS Modules Episode 2</a> with sdk 1.7.3 and the newer 1.8.0 but no luck.</p>
<p>If i run in both platforms it works fine, but if i package for distribution it will throw the error.</p>
<p>Anyone else have the same issue or have some solution to try to understand with i&#39;m doing wrong or if its some kind of bug :(</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 19th 2011, 2:06:06 pm">August 19th 2011</span>
											by <span class='authorname'>Daniel Jorge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry if this is slightly off-topic, but can you debug <em>into</em> the commonJS module, e.g. the sayHello() function?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 24th 2011, 7:13:04 am">August 24th 2011</span>
											by <span class='authorname'>Jeff Antram</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">
after <span class="hljs-tag">i</span> package and run <span class="hljs-keyword">in</span> phone (android <span class="hljs-number">2.3</span>.<span class="hljs-number">3</span>) <span class="hljs-tag">i</span> get: 

java<span class="hljs-class">.io</span><span class="hljs-class">.FileNotFoundException</span>
</code></pre><p>(kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [76,310] Resources&#x2F;lib&#x2F;myModule.js<br>E&#x2F;TiBlob  (11055): java.io.FileNotFoundException: Resources&#x2F;lib&#x2F;myModule.js<br>E&#x2F;TiBlob  (11055):     at android.content.res.AssetManager.openAsset(Native Method)<br>E&#x2F;TiBlob  (11055):     at android.content.res.AssetManager.open(AssetManager.java:337)<br>E&#x2F;TiBlob  (11055):     at android.content.res.AssetManager.open(AssetManager.java:311)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.io.TiResourceFile.getInputStream(TiResourceFile.java:63)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.TiBlob.getInputStream(TiBlob.java:157)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.TiBlob.getBytes(TiBlob.java:117)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.TiBlob.getText(TiBlob.java:216)<br>E&#x2F;TiBlob  (11055):     at ti.modules.titanium.TitaniumModule.require(TitaniumModule.java:431)<br>E&#x2F;TiBlob  (11055):     at ti.modules.titanium.TitaniumModuleBindingGen$23.invoke(TitaniumModuleBindingGen.java:875)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.kroll.KrollProxy$ThisMethod.invoke(KrollProxy.java:397)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.kroll.KrollMethod.call(KrollMethod.java:51)<br>E&#x2F;TiBlob  (11055):     at org.mozilla.javascript.optimizer.OptRuntime.callName(OptRuntime.java:97)<br>E&#x2F;TiBlob  (11055):     at com.moduletest.js.view_menu._c_script_0(Unknown Source)<br>E&#x2F;TiBlob  (11055):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;TiBlob  (11055):     at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:426)<br>E&#x2F;TiBlob  (11055):     at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3161)<br>E&#x2F;TiBlob  (11055):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;TiBlob  (11055):     at com.moduletest.js.view_menu.exec(Unknown Source)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.TiScriptRunner.executeScript(TiScriptRunner.java:59)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.TiScriptRunner.main(TiScriptRunner.java:40)<br>E&#x2F;TiBlob  (11055):     at com.moduletest.js.view_menu.main(Unknown Source)<br>E&#x2F;TiBlob  (11055):     at java.lang.reflect.Method.invokeNative(Native Method)<br>E&#x2F;TiBlob  (11055):     at java.lang.reflect.Method.invoke(Method.java:507)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.TiScriptRunner.runScript(TiScriptRunner.java:103)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.kroll.KrollContext.runCompiledScript(KrollContext.java:291)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.kroll.KrollContext.handleEvalFile(KrollContext.java:316)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.kroll.KrollContext.handleMessage(KrollContext.java:217)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.TiMessageQueue.handleMessage(TiMessageQueue.java:223)<br>E&#x2F;TiBlob  (11055):     at android.os.Handler.dispatchMessage(Handler.java:95)<br>E&#x2F;TiBlob  (11055):     at android.os.Looper.loop(Looper.java:130)<br>E&#x2F;TiBlob  (11055):     at org.appcelerator.titanium.kroll.KrollHandlerThread.run(KrollHandlerThread.java:86)<br>I&#x2F;TiAPI   (11055): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [81,391] ————–&gt; [Ti.Kroll]<br>D&#x2F;TiAPI   (11055): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [3,394] debug————–&gt; [Ti.Kroll]<br>E&#x2F;TiScriptRunner(11055): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [330,724] Javascript Exception: TypeError: Cannot find function sayHello in object [Ti.Kroll].<br>E&#x2F;TiScriptRunner(11055): org.mozilla.javascript.EcmaError: TypeError: Cannot find function sayHello in object [Ti.Kroll].<br>E&#x2F;TiScriptRunner(11055):     at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3761)<br>E&#x2F;TiScriptRunner(11055):     at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3739)<br>E&#x2F;TiScriptRunner(11055):     at org.mozilla.javascript.ScriptRuntime.typeError(ScriptRuntime.java:3767)<br>E&#x2F;TiScriptRunner(11055):     at org.mozilla.javascript.ScriptRuntime.typeError2(ScriptRuntime.java:3786)<br>E&#x2F;TiScriptRunner(11055):     at org.mozilla.javascript.ScriptRuntime.notFunctionError(ScriptRuntime.java:3850)<br>E&#x2F;TiScriptRunner(11055):     at org.mozilla.javascript.ScriptRuntime.getPropFunctionAndThisHelper(ScriptRuntime.java:2343)<br>E&#x2F;TiScriptRunner(11055):     at org.mozilla.javascript.ScriptRuntime.getPropFunctionAndThis(ScriptRuntime.java:2310)<br>E&#x2F;TiScriptRunner(11055):     at com.moduletest.js.view_menu._c_script_0(Unknown Source)<br>E&#x2F;TiScriptRunner(11055):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;TiScriptRunner(11055):     at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:426)<br>E&#x2F;TiScriptRunner(11055):     at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3161)<br>E&#x2F;TiScriptRunner(11055):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;TiScriptRunner(11055):     at com.moduletest.js.view_menu.exec(Unknown Source)<br>E&#x2F;TiScriptRunner(11055):     at org.appcelerator.titanium.TiScriptRunner.executeScript(TiScriptRunner.java:59)<br>E&#x2F;TiScriptRunner(11055):     at org.appcelerator.titanium.TiScriptRunner.main(TiScriptRunner.java:40)<br>E&#x2F;TiScriptRunner(11055):     at com.moduletest.js.view_menu.main(Unknown Source)<br>E&#x2F;TiScriptRunner(11055):     at java.lang.reflect.Method.invokeNative(Native Method)<br>E&#x2F;TiScriptRunner(11055):     at java.lang.reflect.Method.invoke(Method.java:507)<br>E&#x2F;TiScriptRunner(11055):     at org.appcelerator.titanium.TiScriptRunner.runScript(TiScriptRunner.java:103)<br>E&#x2F;TiScriptRunner(11055):     at org.appcelerator.titanium.kroll.KrollContext.runCompiledScript(KrollContext.java:291)<br>E&#x2F;TiScriptRunner(11055):     at org.appcelerator.titanium.kroll.KrollContext.handleEvalFile(KrollContext.java:316)<br>E&#x2F;TiScriptRunner(11055):     at org.appcelerator.titanium.kroll.KrollContext.handleMessage(KrollContext.java:217)<br>E&#x2F;TiScriptRunner(11055):     at org.appcelerator.titanium.TiMessageQueue.handleMessage(TiMessageQueue.java:223)<br>E&#x2F;TiScriptRunner(11055):     at android.os.Handler.dispatchMessage(Handler.java:95)<br>E&#x2F;TiScriptRunner(11055):     at android.os.Looper.loop(Looper.java:130)<br>E&#x2F;TiScriptRunner(11055):     at org.appcelerator.titanium.kroll.KrollHandlerThread.run(KrollHandlerThread.java:86)<br>E&#x2F;TiJSError(11055): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [25,749] —– Titanium Javascript Runtime Error —–<br>E&#x2F;TiJSError(11055): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [4,753] - In null:0,0<br>E&#x2F;TiJSError(11055): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [2,755] - Message: TypeError: Cannot find function sayHello in object [Ti.Kroll].<br>E&#x2F;TiJSError(11055): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [2,757] - Source: null</p>
<pre><code class="hljs">
<span class="hljs-keyword">if</span> <span class="hljs-tag">i</span> run <span class="hljs-keyword">in</span> android simulator (google api <span class="hljs-number">2.2</span> and <span class="hljs-number">2.3</span>.<span class="hljs-number">3</span>) now <span class="hljs-tag">i</span> get <span class="hljs-tag">a</span> new error:


java<span class="hljs-class">.lang</span><span class="hljs-class">.IllegalArgumentException</span>: size must be &gt;= <span class="hljs-number">0</span>
</code></pre><p>D&#x2F;KrollContext(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [170,233] Running pre-compiled script: view&#x2F;menu.js<br>D&#x2F;TiScriptRunner(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [46,279] Executing script: com.moduletest.js.view_menu<br>D&#x2F;TitaniumModule(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [11,290] Attempting to include native module: &#x2F;lib&#x2F;myModule<br>D&#x2F;TiFastDev(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [84,374] Enabling Fastdev on port 49610<br>D&#x2F;TiFastDev(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [35,409] sent tokens successfully<br>D&#x2F;TiFastDev(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [3,412] Fastdev session handshake succesful.<br>D&#x2F;TiFastDev(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [46,458] sent tokens successfully<br>E&#x2F;TitaniumModule(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [173,631] Error loading module named: &#x2F;lib&#x2F;myModule<br>E&#x2F;TitaniumModule(  397): java.lang.IllegalArgumentException: size must be &gt;= 0<br>E&#x2F;TitaniumModule(  397):     at java.io.ByteArrayOutputStream.&lt;init&gt;(ByteArrayOutputStream.java:67)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.util.TiStreamHelper.toByteArray(TiStreamHelper.java:106)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.TiBlob.getBytes(TiBlob.java:120)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.TiBlob.getText(TiBlob.java:216)<br>E&#x2F;TitaniumModule(  397):     at ti.modules.titanium.TitaniumModule.require(TitaniumModule.java:431)<br>E&#x2F;TitaniumModule(  397):     at ti.modules.titanium.TitaniumModuleBindingGen$23.invoke(TitaniumModuleBindingGen.java:875)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.kroll.KrollProxy$ThisMethod.invoke(KrollProxy.java:397)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.kroll.KrollMethod.call(KrollMethod.java:51)<br>E&#x2F;TitaniumModule(  397):     at org.mozilla.javascript.optimizer.OptRuntime.callName(OptRuntime.java:97)<br>E&#x2F;TitaniumModule(  397):     at com.moduletest.js.view_menu._c_script_0(Unknown Source)<br>E&#x2F;TitaniumModule(  397):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;TitaniumModule(  397):     at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:426)<br>E&#x2F;TitaniumModule(  397):     at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3177)<br>E&#x2F;TitaniumModule(  397):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;TitaniumModule(  397):     at com.moduletest.js.view_menu.exec(Unknown Source)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.TiScriptRunner.executeScript(TiScriptRunner.java:59)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.TiScriptRunner.main(TiScriptRunner.java:40)<br>E&#x2F;TitaniumModule(  397):     at com.moduletest.js.view_menu.main(Unknown Source)<br>E&#x2F;TitaniumModule(  397):     at java.lang.reflect.Method.invokeNative(Native Method)<br>E&#x2F;TitaniumModule(  397):     at java.lang.reflect.Method.invoke(Method.java:521)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.TiScriptRunner.runScript(TiScriptRunner.java:103)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.kroll.KrollContext.runCompiledScript(KrollContext.java:291)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.kroll.KrollContext.handleEvalFile(KrollContext.java:316)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.kroll.KrollContext.handleMessage(KrollContext.java:217)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.TiMessageQueue.handleMessage(TiMessageQueue.java:223)<br>E&#x2F;TitaniumModule(  397):     at android.os.Handler.dispatchMessage(Handler.java:95)<br>E&#x2F;TitaniumModule(  397):     at android.os.Looper.loop(Looper.java:123)<br>E&#x2F;TitaniumModule(  397):     at org.appcelerator.titanium.kroll.KrollHandlerThread.run(KrollHandlerThread.java:86)<br>E&#x2F;KrollMethod(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [44,675] Exception calling kroll method require, invocation: null ]<br>E&#x2F;KrollMethod(  397): org.mozilla.javascript.WrappedException: Wrapped java.lang.IllegalArgumentException: size must be &gt;= 0<br>E&#x2F;KrollMethod(  397):     at org.mozilla.javascript.Context.throwAsScriptRuntimeEx(Context.java:1786)<br>E&#x2F;KrollMethod(  397):     at ti.modules.titanium.TitaniumModule.require(TitaniumModule.java:453)<br>E&#x2F;KrollMethod(  397):     at ti.modules.titanium.TitaniumModuleBindingGen$23.invoke(TitaniumModuleBindingGen.java:875)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.kroll.KrollProxy$ThisMethod.invoke(KrollProxy.java:397)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.kroll.KrollMethod.call(KrollMethod.java:51)<br>E&#x2F;KrollMethod(  397):     at org.mozilla.javascript.optimizer.OptRuntime.callName(OptRuntime.java:97)<br>E&#x2F;KrollMethod(  397):     at com.moduletest.js.view_menu._c_script_0(Unknown Source)<br>E&#x2F;KrollMethod(  397):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;KrollMethod(  397):     at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:426)<br>E&#x2F;KrollMethod(  397):     at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3177)<br>E&#x2F;KrollMethod(  397):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;KrollMethod(  397):     at com.moduletest.js.view_menu.exec(Unknown Source)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.TiScriptRunner.executeScript(TiScriptRunner.java:59)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.TiScriptRunner.main(TiScriptRunner.java:40)<br>E&#x2F;KrollMethod(  397):     at com.moduletest.js.view_menu.main(Unknown Source)<br>E&#x2F;KrollMethod(  397):     at java.lang.reflect.Method.invokeNative(Native Method)<br>E&#x2F;KrollMethod(  397):     at java.lang.reflect.Method.invoke(Method.java:521)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.TiScriptRunner.runScript(TiScriptRunner.java:103)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.kroll.KrollContext.runCompiledScript(KrollContext.java:291)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.kroll.KrollContext.handleEvalFile(KrollContext.java:316)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.kroll.KrollContext.handleMessage(KrollContext.java:217)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.TiMessageQueue.handleMessage(TiMessageQueue.java:223)<br>E&#x2F;KrollMethod(  397):     at android.os.Handler.dispatchMessage(Handler.java:95)<br>E&#x2F;KrollMethod(  397):     at android.os.Looper.loop(Looper.java:123)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.kroll.KrollHandlerThread.run(KrollHandlerThread.java:86)<br>E&#x2F;KrollMethod(  397): Caused by: java.lang.IllegalArgumentException: size must be &gt;= 0<br>E&#x2F;KrollMethod(  397):     at java.io.ByteArrayOutputStream.&lt;init&gt;(ByteArrayOutputStream.java:67)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.util.TiStreamHelper.toByteArray(TiStreamHelper.java:106)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.TiBlob.getBytes(TiBlob.java:120)<br>E&#x2F;KrollMethod(  397):     at org.appcelerator.titanium.TiBlob.getText(TiBlob.java:216)<br>E&#x2F;KrollMethod(  397):     at ti.modules.titanium.TitaniumModule.require(TitaniumModule.java:431)<br>E&#x2F;KrollMethod(  397):     … 23 more<br>D&#x2F;dalvikvm(  397): GC_FOR_MALLOC freed 7704 objects &#x2F; 577936 bytes in 110ms<br>E&#x2F;TiScriptRunner(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [135,810] Javascript Exception: Wrapped java.lang.IllegalArgumentException: size must be &gt;= 0<br>E&#x2F;TiScriptRunner(  397): org.mozilla.javascript.WrappedException: Wrapped java.lang.IllegalArgumentException: size must be &gt;= 0<br>E&#x2F;TiScriptRunner(  397):     at org.mozilla.javascript.Context.throwAsScriptRuntimeEx(Context.java:1786)<br>E&#x2F;TiScriptRunner(  397):     at ti.modules.titanium.TitaniumModule.require(TitaniumModule.java:453)<br>E&#x2F;TiScriptRunner(  397):     at ti.modules.titanium.TitaniumModuleBindingGen$23.invoke(TitaniumModuleBindingGen.java:875)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.kroll.KrollProxy$ThisMethod.invoke(KrollProxy.java:397)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.kroll.KrollMethod.call(KrollMethod.java:51)<br>E&#x2F;TiScriptRunner(  397):     at org.mozilla.javascript.optimizer.OptRuntime.callName(OptRuntime.java:97)<br>E&#x2F;TiScriptRunner(  397):     at com.moduletest.js.view_menu._c_script_0(Unknown Source)<br>E&#x2F;TiScriptRunner(  397):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;TiScriptRunner(  397):     at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:426)<br>E&#x2F;TiScriptRunner(  397):     at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3177)<br>E&#x2F;TiScriptRunner(  397):     at com.moduletest.js.view_menu.call(Unknown Source)<br>E&#x2F;TiScriptRunner(  397):     at com.moduletest.js.view_menu.exec(Unknown Source)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.TiScriptRunner.executeScript(TiScriptRunner.java:59)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.TiScriptRunner.main(TiScriptRunner.java:40)<br>E&#x2F;TiScriptRunner(  397):     at com.moduletest.js.view_menu.main(Unknown Source)<br>E&#x2F;TiScriptRunner(  397):     at java.lang.reflect.Method.invokeNative(Native Method)<br>E&#x2F;TiScriptRunner(  397):     at java.lang.reflect.Method.invoke(Method.java:521)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.TiScriptRunner.runScript(TiScriptRunner.java:103)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.kroll.KrollContext.runCompiledScript(KrollContext.java:291)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.kroll.KrollContext.handleEvalFile(KrollContext.java:316)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.kroll.KrollContext.handleMessage(KrollContext.java:217)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.TiMessageQueue.handleMessage(TiMessageQueue.java:223)<br>E&#x2F;TiScriptRunner(  397):     at android.os.Handler.dispatchMessage(Handler.java:95)<br>E&#x2F;TiScriptRunner(  397):     at android.os.Looper.loop(Looper.java:123)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.kroll.KrollHandlerThread.run(KrollHandlerThread.java:86)<br>E&#x2F;TiScriptRunner(  397): Caused by: java.lang.IllegalArgumentException: size must be &gt;= 0<br>E&#x2F;TiScriptRunner(  397):     at java.io.ByteArrayOutputStream.&lt;init&gt;(ByteArrayOutputStream.java:67)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.util.TiStreamHelper.toByteArray(TiStreamHelper.java:106)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.TiBlob.getBytes(TiBlob.java:120)<br>E&#x2F;TiScriptRunner(  397):     at org.appcelerator.titanium.TiBlob.getText(TiBlob.java:216)<br>E&#x2F;TiScriptRunner(  397):     at ti.modules.titanium.TitaniumModule.require(TitaniumModule.java:431)<br>E&#x2F;TiScriptRunner(  397):     … 23 more<br>E&#x2F;TiJSError(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [14,824] —– Titanium Javascript Runtime Error —–<br>E&#x2F;TiJSError(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [9,833] - In null:0,0<br>E&#x2F;TiJSError(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [1,834] - Message: Wrapped java.lang.IllegalArgumentException: size must be &gt;= 0<br>E&#x2F;TiJSError(  397): (kroll$2: app:&#x2F;&#x2F;view&#x2F;menu.js) [3,837] - Source: null</p>
<pre><code class="hljs">
<span class="hljs-keyword">in</span> iphone simulator <span class="hljs-keyword">it</span>'s ok:
</code></pre><p>[INFO] ————–&gt; [object lib&#x2F;myModule]<br>[DEBUG] debug————–&gt; [object lib&#x2F;myModule]</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 24th 2011, 8:49:18 am">August 24th 2011</span>
											by <span class='authorname'>Daniel Jorge</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I can duplicate this issue.  I created a brand new mobile project with a single added file:  commonJS.js.  Adding a simple hello function to that file works great in the Android simulator, but when deploying the project, it fails with the exact same error: java.io.FileNotFoundException on file commonJS.js.</p>
<p>The deployment process does not seem to include the commonJS.js file.  My guess is that, since the require line looks like this:</p>
<p>var myobj = require(&quot;commonJS&quot;);</p>
<p>the deployment script doesn&#39;t &quot;see&quot; commonJS.js as being a dependency and thus doesn&#39;t include it.  But that&#39;s just my guess.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 26th 2011, 5:36:43 pm">August 26th 2011</span>
											by <span class='authorname'>Mark Burggraf</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve been able to reproduce this - entered a ticket for it here:</p>
<p>http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-5123</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 26th 2011, 6:35:17 pm">August 26th 2011</span>
											by <span class='authorname'>Kevin Whinnery</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Kevin, we just finished many months of development, got our app working near perfectly (with workarounds for other problems), and deployed it today.  It immediately failed with this problem (&quot;cannot find function <em>foo</em> in object [Ti.Kroll]&quot;) when the very first customer tried to run it.</p>
<p><strong>Can this ticket be escalated?  We have a small time window to publish our app.</strong></p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2011, 2:57:33 pm">September 13th 2011</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ll see what I can do, correspond with community at appcelerator dot com for updates.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2011, 3:24:53 pm">September 13th 2011</span>
											by <span class='authorname'>Kevin Whinnery</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank you very much, Kevin. I will establish an initial email contact at that address today, and check back for updates. (mistakenly posted this as an answer as well…no way to remove that answer, is there?)</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2011, 3:30:40 pm">September 13th 2011</span>
											by <span class='authorname'>Shawn Lipscomb</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I too am having the same problem.  App was deployed and then errors on the first line of code when you run it.  I have several customers waiting.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2011, 3:35:52 pm">September 13th 2011</span>
											by <span class='authorname'>Joe Johnson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank you Kevin,   I am waiting for this fix as well.   Looking forward to hearing back from you soon!</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2011, 3:48:27 pm">September 13th 2011</span>
											by <span class='authorname'>Jon Barnhart</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>After lots of hard work and overtime our team was very excited to deploy. Our library is built around the &quot;require&quot; feature so there is no quick fix! Now we have to tell the president of the company that we had to pull the app off the market. It sure would be nice to give him a time frame as to when this issue will be addressed! To make matters worse, there is a board of directors meeting this week. A demo of the new Titanium based Smartphone app is on the agenda, scary!</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2011, 3:57:24 pm">September 13th 2011</span>
											by <span class='authorname'>Pete Berry</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>workaround pending, hold tight…</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2011, 4:02:01 pm">September 13th 2011</span>
											by <span class='authorname'>Kevin Whinnery</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>answered with workaround - requires 1.8 CI build.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 13th 2011, 4:19:25 pm">September 13th 2011</span>
											by <span class='authorname'>Kevin Whinnery</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
