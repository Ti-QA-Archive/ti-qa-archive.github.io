<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Retrieving an Alloy View for a Flip Animation » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Retrieving an Alloy View for a Flip Animation</h1>
		</header>
		<section>
			<p>Hi there-</p>
<p>I am applying a simple FLIP_FROM_LEFT animation when a user clicks a button to switch between two views.  Here is the issue.  The first rotation works without an issue.  I simply create a controller and do a getView for the view I am animating to, and perform the animation.</p>
<p>When I wish to animate back to the original view though from the second, since the first view has already been instantiated, I cannot do another createController, or I am going to have two instances of the controller&#x2F;view.  I am at a bit of a loss as to how I can get a reference to the original view so I can rotate back to it?</p>
<p>Any suggestions? Thanks in advance for any help<br>Chris</p>
<p>view1.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view1'</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'switch'</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">'switchViews'</span>&gt;</span>Switch Views<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>view1.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchViews</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-keyword">var</span> view2 = Alloy.createController(<span class="hljs-string">'view2'</span>).getView();
  $.view1.animate({view: view2, transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});
}
</code></pre><p>view2.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view2'</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'switch'</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">'switchBack'</span>&gt;</span>Switch Back<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>view2.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchBack</span><span class="hljs-params">(e)</span> </span>{

  <span class="hljs-comment">// The below will create a new instance of the view 1 controller and view...I want to</span>
  <span class="hljs-comment">// get a reference to the original view1 somehow here so I don't have two instances</span>
  <span class="hljs-comment">// floating out in my app</span>

  <span class="hljs-comment">// var view1 = Alloy.createController('view1').getView();</span>
  <span class="hljs-comment">// $.view2.animate({view: view1, transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});</span>
}
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 17th 2013, 7:16:54 pm">April 17th 2013</span>
				by <span class='authorname'>Christopher McGuire</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>animation</span></li>
					
						<li><span class='tagname'>mvc</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>As a side note to this…at first, I thought about firing a trigger &#x2F; listening to that trigger, but because view 2 is instantiated on the button click, when I setup the listener, I would receive an exception at runtime indicating that the view2 did not exist (which made sense, seeing it was not instantiated within index.xml as a primary view).</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 17th 2013, 7:31:34 pm">April 17th 2013</span>
								by <span class='authorname'>Christopher McGuire</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-260961">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>hi,</p>
<p>for that you should add your custom listener in view1.js file </p>
<p>in view1.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> view2 = Alloy.createController(<span class="hljs-string">'view2'</span>).getView();
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchViews</span>(<span class="hljs-params">e</span>) </span>{

  $.view1.animate({view: view2, transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchBack</span>(<span class="hljs-params"></span>) </span>{

    view2.animate({view: $.view1, transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});
}

Ti.App.addEventListener(<span class="hljs-string">'switchBack'</span>,funciton(e){
    switchBack();
});
</code></pre><p>in view2.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchBack</span><span class="hljs-params">(e)</span> </span>{

    Ti.App.fireEvent(<span class="hljs-string">'switchBack'</span>);

}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 18th 2013, 3:53:04 am">April 18th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/151116/retrieving-an-alloy-view-for-a-flip-animation#answer-260961" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi there…I actually can trigger the event, capture the event and call the switchBack.  The issue I hit is the minute it attempts to do the flip back to view1, the simulator crashes every time with the Error:</p>
<p>An error occurred running the iOS Simulator<br>Project failed to buid after (some amount of time)</p>
<p>If I alert the view 2 and $.view 1 values, they actually alert as objects, so I have a reference to the object values, but still seems that something is up here unfotunately.  Thanks so much for guiding me towards the path though</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2013, 12:10:24 pm">April 18th 2013</span>
											by <span class='authorname'>Christopher McGuire</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve extracted this solution into a standalone application, to ensure that there was nothing in my application causing the errors.  Still the flip solution seems to throw errors and crash the application on the second flip.  </p>
<p>Still looking for suggestions on how to flip back to the original view.  Again, flipping to the second view works perfectly, it&#39;s returning to the original is where there is an issue.  Here is the new standalone application code that throws an error and crashes the application.</p>
<p>index.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">'view1'</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>view1.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view1'</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'mySwitch'</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">'switchViews'</span>&gt;</span>Switch Views<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>view1.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> view2 = Alloy.createController(<span class="hljs-string">'view2'</span>).getView();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchViews</span>(<span class="hljs-params">e</span>) </span>{

    $.view1.animate({view: view2, transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});

}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchBack</span>(<span class="hljs-params"></span>) </span>{

    view2.animate({view: $.view1, transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});

}

Ti.App.addEventListener(<span class="hljs-string">'switchBack'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    switchBack();
});
</code></pre><p>view2.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view2'</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'mySwitch'</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">'switchBack'</span>&gt;</span>Switch Back<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>view2.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchBack</span><span class="hljs-params">(e)</span> </span>{

    Ti.App.fireEvent(<span class="hljs-string">'switchBack'</span>);

}
</code></pre><h4 id="-error-an-error-occurred-running-the-ios-simulator">[ERROR] :  An error occurred running the iOS Simulator</h4>
<h4 id="-error-">[ERROR] :</h4>
<h4 id="-error-project-failed-to-build-after-23s-233ms">[ERROR] :  Project failed to build after 23s 233ms</h4>
</p>
										<div class="author">
											&mdash; commented <span title="April 18th 2013, 4:21:47 pm">April 18th 2013</span>
											by <span class='authorname'>Christopher McGuire</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok, let me check first…</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 4:48:09 am">April 19th 2013</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>index.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"win"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'parent'</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view2'</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">'view2'</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view1'</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">'view1'</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>index.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchViews</span>(<span class="hljs-params"></span>) </span>{

    $.parent.animate({
        view : $.view2.view2,
        transition : Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT
    });

}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchBack</span>(<span class="hljs-params"></span>) </span>{

    $.parent.animate({
        view : $.view1.view1,
        transition : Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT
    });
}

Ti.App.addEventListener(<span class="hljs-string">'switchBack'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    switchBack();
});

Ti.App.addEventListener(<span class="hljs-string">'switchViews'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    switchViews();
});
</code></pre><p>view.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view1'</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">'red'</span>&gt;</span>        
        <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'switch1'</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">'switchViews'</span>&gt;</span>
            Switch Views
        <span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>view1.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchViews</span><span class="hljs-params">()</span> </span>{
    Ti.App.fireEvent(<span class="hljs-string">'switchViews'</span>);
}
</code></pre><p>view2.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view2'</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">'green'</span>&gt;</span>        
        <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'switch2'</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">'switchBack'</span>&gt;</span>
            Switch Back
        <span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>view2.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchBack</span><span class="hljs-params">()</span> </span>{

    Ti.App.fireEvent(<span class="hljs-string">'switchBack'</span>);    

}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 5:19:24 am">April 19th 2013</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That did the trick.  I made some edits to make the code above workable for others coming to this thread.  So, it looks like the trick was instantiating the view2 initially then and placing it behind view1?  If this is the case, would you ever perform a createController &#x2F; getView when doing a flip then to dynamically flip to a view?</p>
<p>Thanks for the guidance on this.</p>
<p>Talk soon<br>Chris</p>
<p>changes to code:</p>
<p>index.js</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchViews</span>(<span class="hljs-params"></span>) </span>{

    $.parent.animate({
        view : $.view2.view2,
        transition : Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT
    });

}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchBack</span>(<span class="hljs-params"></span>) </span>{

    $.parent.animate({
        view : $.view1.view1,
        transition : Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT
    });
}

Ti.App.addEventListener(<span class="hljs-string">'switchBack'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    switchBack();
});

Ti.App.addEventListener(<span class="hljs-string">'switchViews'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    switchViews();
});

$.index.open();
</code></pre><p>index.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">'container'</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'parent'</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view2'</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">'view2'</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">'view1'</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">'view1'</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 19th 2013, 12:20:55 pm">April 19th 2013</span>
											by <span class='authorname'>Christopher McGuire</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Now let&#39;s imagine I have 8 views in my application. Stacking or hiding them in my head doesn&#39;t sound like a perfect solution. </p>
<p>My question is there a way that I can initalize a view one and then on click. Remove this view and put the new one in?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 26th 2013, 4:27:25 pm">November 26th 2013</span>
											by <span class='authorname'>Fahim Akhter</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
