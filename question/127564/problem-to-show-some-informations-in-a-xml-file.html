<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Problem to show some informations in a XML file » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Problem to show some informations in a XML file</h1>
		</header>
		<section>
			<p>Hi everyone, first, thank you about this forum who is a big help for me.</p>
<p>I am trying actually to display in the debug some informations of my XML file.<br>So thing that I wanna do is to display each node of &lt;item_categorie&gt; for each &lt;categorie&gt; but I think I am stuck about the way how to target &lt;item_categorie&gt;</p>
<p>I hope that someone gonna be able to help me.</p>
<p>So here is my xml file</p>
<pre><code class="hljs"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">root</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">categorie</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">id_categorie</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">id_categorie</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">nom_categorie</span>&gt;</span>Entrées<span class="hljs-tag">&lt;/<span class="hljs-title">nom_categorie</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">item_categorie</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">nom_item</span>&gt;</span>Salade verte<span class="hljs-tag">&lt;/<span class="hljs-title">nom_item</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">price_item</span>&gt;</span>10 euros<span class="hljs-tag">&lt;/<span class="hljs-title">price_item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">photo_item</span>&gt;</span>images/plat_entree.jpg<span class="hljs-tag">&lt;/<span class="hljs-title">photo_item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">detail_item</span>&gt;</span>Je suis une salade verte<span class="hljs-tag">&lt;/<span class="hljs-title">detail_item</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item_categorie</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">item_categorie</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">nom_item</span>&gt;</span>Salade verte<span class="hljs-tag">&lt;/<span class="hljs-title">nom_item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">price_item</span>&gt;</span>20 euros<span class="hljs-tag">&lt;/<span class="hljs-title">price_item</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">photo_item</span>&gt;</span>images/plat_entree.jpg<span class="hljs-tag">&lt;/<span class="hljs-title">photo_item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">detail_item</span>&gt;</span>Je suis une salade verte<span class="hljs-tag">&lt;/<span class="hljs-title">detail_item</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item_categorie</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">categorie</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">categorie</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">id_categorie</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">id_categorie</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">nom_categorie</span>&gt;</span>Plats<span class="hljs-tag">&lt;/<span class="hljs-title">nom_categorie</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">item_categorie</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">nom_item</span>&gt;</span>Pièce de boeuf<span class="hljs-tag">&lt;/<span class="hljs-title">nom_item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">price_item</span>&gt;</span>10 euros<span class="hljs-tag">&lt;/<span class="hljs-title">price_item</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">photo_item</span>&gt;</span>images/plat_plats.jpg<span class="hljs-tag">&lt;/<span class="hljs-title">photo_item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">detail_item</span>&gt;</span>je suis une pièce de boeuf<span class="hljs-tag">&lt;/<span class="hljs-title">detail_item</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item_categorie</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">item_categorie</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">nom_item</span>&gt;</span>Pièce de boeuf<span class="hljs-tag">&lt;/<span class="hljs-title">nom_item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">price_item</span>&gt;</span>20 euros<span class="hljs-tag">&lt;/<span class="hljs-title">price_item</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">photo_item</span>&gt;</span>images/plat_plats.jpg<span class="hljs-tag">&lt;/<span class="hljs-title">photo_item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">detail_item</span>&gt;</span>je suis une pièce de boeuf<span class="hljs-tag">&lt;/<span class="hljs-title">detail_item</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item_categorie</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">categorie</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">root</span>&gt;</span>
</code></pre><p>and my xhr function</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
<span class="hljs-keyword">var</span> url=<span class="hljs-string">"http://www.damienbigot.com/others/RestO/menu.xml"</span>;
<span class="hljs-comment">//var url="recettes_data.xml";</span>
xhr.open(<span class="hljs-string">'GET'</span>,url,<span class="hljs-literal">false</span>);
<span class="hljs-keyword">var</span> data = [];
<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> y=<span class="hljs-number">0</span>;


xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> 
</span>{
    <span class="hljs-keyword">var</span> arbo = Titanium.XML.parseString(<span class="hljs-keyword">this</span>.responseText);

    <span class="hljs-keyword">var</span> mesItem = arbo.getElementsByTagName(<span class="hljs-string">"categorie"</span>);
    <span class="hljs-keyword">var</span> mesItem_category = arbo.mesItem.getElementsByTagName(<span class="hljs-string">"item_categorie"</span>);


    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; mesItem.length; i++) 
    {
      <span class="hljs-keyword">var</span> item = mesItem.item(i);
      <span class="hljs-keyword">var</span> item_cat = mesItem_category.item(i);
      <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({height:<span class="hljs-number">80</span>, hasChild: <span class="hljs-literal">true</span>});

      <span class="hljs-keyword">var</span> name_categorie = item.getElementsByTagName(<span class="hljs-string">"nom_categorie"</span>).item(<span class="hljs-number">0</span>).text;


          <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>; j&lt;mesItem_category.length; j++)
          {
               <span class="hljs-keyword">var</span> categorie_item = name_categorie.item(<span class="hljs-number">0</span>).getElementsByTagName(<span class="hljs-string">"nom_item"</span>).item(j).text;
               <span class="hljs-keyword">var</span> prix_item=item_cat.getElementsByTagName(<span class="hljs-string">"price_item"</span>).item(<span class="hljs-number">0</span>).text;
               <span class="hljs-keyword">var</span> thumbnails_item=item_cat.getElementsByTagName(<span class="hljs-string">"photo_item"</span>).item(<span class="hljs-number">0</span>).text;
               <span class="hljs-keyword">var</span> description_item=item_cat.getElementsByTagName(<span class="hljs-string">"detail_item"</span>).item(<span class="hljs-number">0</span>).text;

           Titanium.API.info(categorie_item,prix_item,thumbnails_item,description_item);
          }


      <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({text:name_categorie,left:<span class="hljs-number">72</span>,top:<span class="hljs-number">5</span>,bottom:<span class="hljs-number">5</span>,right:<span class="hljs-number">5</span>,color:<span class="hljs-string">"#000000"</span>});

      row.add(label);

      main_menu.appendRow(row);

      row.titre=categorie_item;
      row.prix = prix_item;
      row.image=thumbnails_item;
      row.desc = description_item;


      data[x++] = row;

    };

  } 
xhr.send();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 30th 2011, 7:22:14 pm">October 30th 2011</span>
				by <span class='authorname'>Damien Bigot</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>data</span></li>
					
						<li><span class='tagname'>parse</span></li>
					
						<li><span class='tagname'>parsing</span></li>
					
						<li><span class='tagname'>xhr</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Thanks. That&#39;s helped me a lot. I hope to help you out next time :)</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 23rd 2011, 8:27:53 am">November 23rd 2011</span>
								by <span class='authorname'>Damien Bigot</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-223638">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>First thing first: your xml document has no &#39;photo_item&#39; element at all, this should be a problem. You should surround your parsing with a try…catch</p>
<p>In a second time, the way you populate your submenu rows isn&#39;t right. I figured out that you keep always the last &#39;dish&#39; for each category.</p>
<p>For each category row, you should get the data for all the dishes of this category so, you could create an Array of &#39;dishes&#39;</p>
<p>I would try something like this:</p>
<p>In the loop through categories</p>
<pre><code class="hljs"> <span class="hljs-comment">//quantity of items</span>
   <span class="hljs-keyword">var</span> l2 = item_cats.length;
   <span class="hljs-comment">// create an array of dishes for each ccategory</span>
   <span class="hljs-keyword">var</span> plats = [];
    <span class="hljs-comment">//loop through all tiems</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j = 0; j &lt; l2; j++)
    {

        try{
        <span class="hljs-comment">//get item element</span>
        <span class="hljs-keyword">var</span> item_cat = item_cats.item(j);

        <span class="hljs-comment">//get values from tiem</span>
        <span class="hljs-keyword">var</span> categorie_item = item_cat.getElementsByTagName(<span class="hljs-string">"nom_item"</span>).item(0).text;
        <span class="hljs-keyword">var</span> prix_item = item_cat.getElementsByTagName(<span class="hljs-string">"price_item"</span>).item(0).text;

        <span class="hljs-keyword">var</span> description_item = item_cat.getElementsByTagName(<span class="hljs-string">"detail_item"</span>).item(0).text;

          <span class="hljs-comment">// no picture in your xml document  </span>
        <span class="hljs-comment">// var thumbnails_item = item_cat.getElementsByTagName("photo_item").item(0).text;</span>

        <span class="hljs-comment">// each item is pushed into the array</span>
         plats.push({titre: categorie_item, price: prix_item, description:description_item});
      }catch(<span class="hljs-keyword">E</span>){
           Ti.API.debug('<span class="hljs-keyword">Error</span> '+<span class="hljs-keyword">E</span>.message);
       }
    } 

       <span class="hljs-keyword">var</span> <span class="hljs-keyword">label</span> = Ti.UI.createLabel({text:type_cat,left:50,top:5,bottom:5,right:5,color:<span class="hljs-string">"#000000"</span>});

      row.add(<span class="hljs-keyword">label</span>);

      main_menu.appendRow(row);

 <span class="hljs-comment">// each row has a category</span>
  row.type_cate=type_cat;
 <span class="hljs-comment">// the array of dishes/items is passed to the row (the important step, actually)</span>
  row.plats = plats;
  <span class="hljs-comment">/* this is useless as you add the last item of the 'j' loop
  row.desc = description_item;
  row.price = prix_item;
  row.titre=categorie_item;
  row.image=thumbnails_item;
  */</span>


  data[x++] = row;
</code></pre><p>In the event listener, you create another table view and you will iterate over the items array we passed to the row (the &#39;k&#39; loop).</p>
<pre><code class="hljs">main_menu.addEventListener(<span class="hljs-string">'click'</span>, function (e) {

    var sub_win = Ti.UI.createWindow({<span class="hljs-string">title:</span>e.rowData.type_cate,<span class="hljs-string">barColor:</span><span class="hljs-string">'#4a0000'</span>, <span class="hljs-string">backButtonTitle:</span><span class="hljs-string">'back'</span>});

    var mainRow2 = Ti.UI.createTableView({<span class="hljs-string">style:</span>Titanium.UI.iPhone.TableViewStyle.PLAIN,<span class="hljs-string">focused:</span><span class="hljs-literal">false</span>});

    <span class="hljs-comment">// here if your l2 variable kept the number of items of your last category</span>
    <span class="hljs-comment">// it's better to get the exact amount of dishes for every single category</span>
     var nb_plats = e.rowData.plats.length;
    <span class="hljs-keyword">for</span>(var k=<span class="hljs-number">0</span>;k&lt;nb_plats;k++)
    {
        <span class="hljs-keyword">try</span>{

          var row2 = Ti.UI.createTableViewRow({<span class="hljs-string">height:</span><span class="hljs-number">80</span>,<span class="hljs-string">selectionStyle:</span><span class="hljs-string">'none'</span>});

         <span class="hljs-comment">// you retrieve the data as this: e.rowData.plats[k].titre</span>
          var Titre_label = Ti.UI.createLabel({<span class="hljs-string">text:</span>e.rowData.plats[k].titre,<span class="hljs-string">left:</span><span class="hljs-number">80</span>,<span class="hljs-string">top:</span><span class="hljs-number">20</span>,<span class="hljs-string">height:</span><span class="hljs-string">'auto'</span>,<span class="hljs-string">width:</span><span class="hljs-string">'auto'</span>,<span class="hljs-string">color:</span><span class="hljs-string">"#000000"</span>,<span class="hljs-string">textAlign:</span><span class="hljs-string">"justify"</span>});
          row2.add(Titre_label);


          var prix_label = Ti.UI.createLabel({<span class="hljs-string">text:</span>e.rowData.plats[k].price,<span class="hljs-string">left:</span><span class="hljs-number">80</span>,<span class="hljs-string">top:</span><span class="hljs-number">40</span>,<span class="hljs-string">height:</span><span class="hljs-string">'auto'</span>,<span class="hljs-string">width:</span><span class="hljs-string">'auto'</span>,<span class="hljs-string">color:</span><span class="hljs-string">"#000000"</span>,<span class="hljs-string">textAlign:</span><span class="hljs-string">"justify"</span>,<span class="hljs-string">font:</span>{<span class="hljs-string">fontSize:</span><span class="hljs-number">14</span>,<span class="hljs-string">fontWeight:</span><span class="hljs-string">'bold'</span>}});
          row2.add(prix_label);

         <span class="hljs-comment">// still no image ;-)</span>
         <span class="hljs-comment">// var img_description = Ti.UI.createImageView({image:e.rowData.image,left:10,top:10,height:60,width:60});</span>
          <span class="hljs-comment">//row2.add(img_description);</span>

          mainRow2.appendRow(row2);
     }<span class="hljs-keyword">catch</span>(E){
         Ti.API.debug(<span class="hljs-string">'ERROR '</span>+E.message);
     }
    }

      sub_win.add(mainRow2);
      sub_win.open({<span class="hljs-string">modal:</span><span class="hljs-literal">true</span>});


    });
</code></pre><p>There you are. Hope this helped</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 17th 2011, 11:00:16 pm">November 17th 2011</span>
								by <span class='authorname'>Greg Berger</span><br>
								<a class="icon-bg icon-link" href="question/127564/problem-to-show-some-informations-in-a-xml-file#answer-223638" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-222289">
				
						<section>
							<p>My bad, I don&#39;t know why I thought it was a regular object.<br>Here this example works:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> arbo = this.responseXML.documentElement;
<span class="hljs-comment">//get all categories</span>
<span class="hljs-keyword">var</span> mesItem = arbo.getElementsByTagName(<span class="hljs-string">"categorie"</span>);
<span class="hljs-comment">//quantity of categories</span>
<span class="hljs-keyword">var</span> <span class="hljs-keyword">l</span> = mesItem.length;

<span class="hljs-comment">//loop through all categories</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = 0; i &lt; <span class="hljs-keyword">l</span>; i++) 
{
    <span class="hljs-comment">//get categories element</span>
    <span class="hljs-keyword">var</span> item = mesItem.item(i);
    <span class="hljs-comment">//get all items in current categorie</span>
    <span class="hljs-keyword">var</span> item_cats = item.getElementsByTagName(<span class="hljs-string">"item_categorie"</span>);
    <span class="hljs-comment">//quantity of items</span>
    <span class="hljs-keyword">var</span> l2 = item_cats.length;
    <span class="hljs-comment">//loop through all tiems</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j = 0; j &lt; l2; j++)
    {
        <span class="hljs-comment">//get item element</span>
        <span class="hljs-keyword">var</span> item_cat = item_cats.item(j);

        <span class="hljs-comment">//get values from tiem</span>
        <span class="hljs-keyword">var</span> categorie_item = item_cat.getElementsByTagName(<span class="hljs-string">"nom_item"</span>).item(0).text;
        <span class="hljs-keyword">var</span> prix_item = item_cat.getElementsByTagName(<span class="hljs-string">"price_item"</span>).item(0).text;
        <span class="hljs-keyword">var</span> thumbnails_item = item_cat.getElementsByTagName(<span class="hljs-string">"photo_item"</span>).item(0).text;
        <span class="hljs-keyword">var</span> description_item = item_cat.getElementsByTagName(<span class="hljs-string">"detail_item"</span>).item(0).text;
        Ti.API.info(categorie_item + <span class="hljs-string">" / "</span> + prix_item + <span class="hljs-string">" / "</span> + thumbnails_item + <span class="hljs-string">" / "</span> + description_item);
     } 
};
</code></pre><p>Also check KitchenSink for example:<br>https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;blob&#x2F;master&#x2F;demos&#x2F;KitchenSink&#x2F;Resources&#x2F;examples&#x2F;xml_rss.js</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 31st 2011, 12:38:35 pm">October 31st 2011</span>
								by <span class='authorname'>Arturs Sosins</span><br>
								<a class="icon-bg icon-link" href="question/127564/problem-to-show-some-informations-in-a-xml-file#answer-222289" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-222263">
				
						<section>
							<p>Try something like that:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> arbo = Titanium.XML.parseString(<span class="hljs-keyword">this</span>.responseText);
<span class="hljs-keyword">var</span> mesItem = arbo.getElementsByTagName(<span class="hljs-string">"categorie"</span>);
<span class="hljs-keyword">var</span> l = mesItem.length;
<span class="hljs-comment">//loop through all categories</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; mesItem.length; i++) 
{
    <span class="hljs-comment">//loop through children</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j <span class="hljs-keyword">in</span> mesItem[i])
    {
        <span class="hljs-comment">//if child is item_categorie</span>
        <span class="hljs-keyword">if</span>(j == <span class="hljs-string">"item_categorie"</span>)
        {
            <span class="hljs-keyword">var</span> categorie_item = mesItem[i][j].nom_item;
            <span class="hljs-keyword">var</span> prix_item = mesItem[i][j].price_item;
            <span class="hljs-keyword">var</span> thumbnails_item = mesItem[i][j].photo_item;
            <span class="hljs-keyword">var</span> description_item = mesItem[i][j].detail_item;
        }
    }
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 31st 2011, 4:54:07 am">October 31st 2011</span>
								by <span class='authorname'>Arturs Sosins</span><br>
								<a class="icon-bg icon-link" href="question/127564/problem-to-show-some-informations-in-a-xml-file#answer-222263" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-222273">
				
						<section>
							<p>I tried that but apparently that never happen about j==&quot;item_categorie&quot;, I don&#39;t think that&#39;s a big thing but I cannot return the value in the &quot;if&quot; yet, I made a little bit changement in my code as you can see below with your answer.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
<span class="hljs-keyword">var</span> url=<span class="hljs-string">"hhttp://www.damienbigot.com/others/RestO/menu.xml"</span>;
xhr.open(<span class="hljs-string">'GET'</span>,url,<span class="hljs-literal">false</span>);
<span class="hljs-keyword">var</span> data = [];
<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;


xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> 
</span>{

<span class="hljs-keyword">var</span> arbo = Titanium.XML.parseString(<span class="hljs-keyword">this</span>.responseText);
     <span class="hljs-keyword">var</span> mesItem = arbo.getElementsByTagName(<span class="hljs-string">"categorie"</span>);

     <span class="hljs-comment">//Ti.API.info(arbo.length);</span>
     Ti.API.info(mesItem.length); 
     <span class="hljs-keyword">var</span> l = mesItem.length;

    <span class="hljs-comment">//loop through all categories</span>

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; l; i++) 
    {
        <span class="hljs-keyword">var</span> item = mesItem.item(i);
         <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({height:<span class="hljs-number">80</span>, hasChild: <span class="hljs-literal">true</span>});

          <span class="hljs-keyword">var</span> name_categorie = item.getElementsByTagName(<span class="hljs-string">"nom_categorie"</span>).item(<span class="hljs-number">0</span>).text;

    <span class="hljs-comment">//loop through children</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j <span class="hljs-keyword">in</span> mesItem[i])
            {
        <span class="hljs-comment">//if child is item_categorie</span>
                <span class="hljs-keyword">if</span>(j == <span class="hljs-string">"item_categorie"</span>)
                {
                    <span class="hljs-keyword">var</span> categorie_item = mesItem[i][j].nom_item;
                    <span class="hljs-keyword">var</span> prix_item = mesItem[i][j].price_item;
                       <span class="hljs-keyword">var</span> thumbnails_item = mesItem[i][j].photo_item;
                    <span class="hljs-keyword">var</span> description_item = mesItem[i][j].detail_item;

                     Ti.API.info(<span class="hljs-string">"HELLO WORLD"</span>);
                }
            }

   <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({text:name_categorie,left:<span class="hljs-number">72</span>,top:<span class="hljs-number">5</span>,bottom:<span class="hljs-number">5</span>,right:<span class="hljs-number">5</span>,color:<span class="hljs-string">"#000000"</span>});

  row.add(label);

  main_menu.appendRow(row);

  data[x++] = row;

  };

}   
xhr.send();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 31st 2011, 7:54:46 am">October 31st 2011</span>
								by <span class='authorname'>Damien Bigot</span><br>
								<a class="icon-bg icon-link" href="question/127564/problem-to-show-some-informations-in-a-xml-file#answer-222273" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-222360">
				
						<section>
							<p>Thanks you so much Arturs, that&#39;s help me a lot.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 1st 2011, 11:49:05 am">November 1st 2011</span>
								by <span class='authorname'>Damien Bigot</span><br>
								<a class="icon-bg icon-link" href="question/127564/problem-to-show-some-informations-in-a-xml-file#answer-222360" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-223624">
				
						<section>
							<p>I brought some ajustement to finish this dropDown list but there is a last thing where Iam stock. I made a last loop to display all the item after click on the list. But I am always displaying the same stuff. My incrementation does not work. I don&#39;t really know how to get the number of nodes where I clicked so I put &quot;l2&quot; for exemple.</p>
<pre><code class="hljs">var xhr = Titanium.Network.createHTTPClient();
var url=<span class="hljs-string">"http://www.damienbigot.com/others/RestO/menu.xml"</span>;
xhr.open(<span class="hljs-string">'GET'</span>,url,<span class="hljs-literal">false</span>);
var data = [];
var x = <span class="hljs-number">0</span>;


xhr.onload = function() 
{


var arbo = <span class="hljs-keyword">this</span>.responseXML.documentElement;
<span class="hljs-comment">//get all categories</span>
var mesItem = arbo.getElementsByTagName(<span class="hljs-string">"categorie"</span>);
<span class="hljs-comment">//quantity of categories</span>
var l = mesItem.length;

<span class="hljs-comment">//loop through all categories</span>
<span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; l; i++) 
{
    <span class="hljs-comment">//get categories element</span>
    var item = mesItem.item(i);

    var row = Ti.UI.createTableViewRow({<span class="hljs-string">height:</span><span class="hljs-number">80</span>, <span class="hljs-string">hasChild:</span> <span class="hljs-literal">true</span>});
    <span class="hljs-comment">//get all items in current categorie</span>
    var type_cat = item.getElementsByTagName(<span class="hljs-string">"nom_categorie"</span>).item(<span class="hljs-number">0</span>).text;

    var item_cats = item.getElementsByTagName(<span class="hljs-string">"item_categorie"</span>);

    <span class="hljs-comment">//quantity of items</span>
   var l2 = item_cats.length;
    <span class="hljs-comment">//loop through all tiems</span>
    <span class="hljs-keyword">for</span>(var j = <span class="hljs-number">0</span>; j &lt; l2; j++)
    {
        <span class="hljs-comment">//get item element</span>
        var item_cat = item_cats.item(j);

        <span class="hljs-comment">//get values from tiem</span>
        var categorie_item = item_cat.getElementsByTagName(<span class="hljs-string">"nom_item"</span>).item(<span class="hljs-number">0</span>).text;
        var prix_item = item_cat.getElementsByTagName(<span class="hljs-string">"price_item"</span>).item(<span class="hljs-number">0</span>).text;
        var thumbnails_item = item_cat.getElementsByTagName(<span class="hljs-string">"photo_item"</span>).item(<span class="hljs-number">0</span>).text;
        var description_item = item_cat.getElementsByTagName(<span class="hljs-string">"detail_item"</span>).item(<span class="hljs-number">0</span>).text;
    } 

   var label = Ti.UI.createLabel({<span class="hljs-string">text:</span>type_cat,<span class="hljs-string">left:</span><span class="hljs-number">50</span>,<span class="hljs-string">top:</span><span class="hljs-number">5</span>,<span class="hljs-string">bottom:</span><span class="hljs-number">5</span>,<span class="hljs-string">right:</span><span class="hljs-number">5</span>,<span class="hljs-string">color:</span><span class="hljs-string">"#000000"</span>});

  row.add(label);

  main_menu.appendRow(row);

  row.type_cate=type_cat;
  row.desc = description_item;
  row.price = prix_item;
  row.titre=categorie_item;
  row.image=thumbnails_item;

  data[x++] = row;
  };

  menu_resto.add(main_menu);


    main_menu.addEventListener(<span class="hljs-string">'click'</span>, function (e) {

    var sub_win = Ti.UI.createWindow({<span class="hljs-string">title:</span>e.rowData.type_cate,<span class="hljs-string">barColor:</span><span class="hljs-string">'#4a0000'</span>});

    var mainRow2 = Ti.UI.createTableView({<span class="hljs-string">style:</span>Titanium.UI.iPhone.TableViewStyle.PLAIN,<span class="hljs-string">focused:</span><span class="hljs-literal">false</span>});


    <span class="hljs-keyword">for</span>(var k=<span class="hljs-number">0</span>;k&lt;l2;k++)
    {
      var row2 = Ti.UI.createTableViewRow({<span class="hljs-string">height:</span><span class="hljs-number">80</span>,<span class="hljs-string">selectionStyle:</span><span class="hljs-string">'none'</span>});

        var Titre_label = Ti.UI.createLabel({<span class="hljs-string">text:</span>e.rowData.titre,<span class="hljs-string">left:</span><span class="hljs-number">80</span>,<span class="hljs-string">top:</span><span class="hljs-number">20</span>,<span class="hljs-string">height:</span><span class="hljs-string">'auto'</span>,<span class="hljs-string">width:</span><span class="hljs-string">'auto'</span>,<span class="hljs-string">color:</span><span class="hljs-string">"#000000"</span>,<span class="hljs-string">textAlign:</span><span class="hljs-string">"justify"</span>});
      row2.add(Titre_label);


      var prix_label = Ti.UI.createLabel({<span class="hljs-string">text:</span>e.rowData.price,<span class="hljs-string">left:</span><span class="hljs-number">80</span>,<span class="hljs-string">top:</span><span class="hljs-number">40</span>,<span class="hljs-string">height:</span><span class="hljs-string">'auto'</span>,<span class="hljs-string">width:</span><span class="hljs-string">'auto'</span>,<span class="hljs-string">color:</span><span class="hljs-string">"#000000"</span>,<span class="hljs-string">textAlign:</span><span class="hljs-string">"justify"</span>,<span class="hljs-string">font:</span>{<span class="hljs-string">fontSize:</span><span class="hljs-number">14</span>,<span class="hljs-string">fontWeight:</span><span class="hljs-string">'bold'</span>}});
      row2.add(prix_label);


      var img_description = Ti.UI.createImageView({<span class="hljs-string">image:</span>e.rowData.image,<span class="hljs-string">left:</span><span class="hljs-number">10</span>,<span class="hljs-string">top:</span><span class="hljs-number">10</span>,<span class="hljs-string">height:</span><span class="hljs-number">60</span>,<span class="hljs-string">width:</span><span class="hljs-number">60</span>});
      row2.add(img_description);

      mainRow2.appendRow(row2);
    }

      sub_win.add(mainRow2);


    });

}   
xhr.send();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 17th 2011, 7:01:38 pm">November 17th 2011</span>
								by <span class='authorname'>Damien Bigot</span><br>
								<a class="icon-bg icon-link" href="question/127564/problem-to-show-some-informations-in-a-xml-file#answer-223624" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
