<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Child tableview doesn&#39;t still checked » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Child tableview doesn&#39;t still checked</h1>
		</header>
		<section>
			<p>Hello,</p>
<p>I&#39;m using a tableview for show some others tableviews (It&#39;s a podcast window) and i&#39;m using hasCheck for know what podcast is playing.</p>
<p>When I play a podcast (in the show&#39;s child window), going back on shows list and return to the show I&#39;m playing, the playing file isn&#39;t checked anymore.</p>
<p>Is there a way to make the app able to &quot;remember&quot; what file was checked on the child window ? (I&#39;m using global variables)</p>
<pre><code class="hljs">tableview.addEventListener('click',function(<span class="hljs-keyword">e</span>){
    <span class="hljs-keyword">if</span> (Ti.<span class="hljs-keyword">App</span>.lastRowClicked &amp;&amp; Ti.<span class="hljs-keyword">App</span>.lastRowClicked !== <span class="hljs-keyword">e</span>.row){
        Ti.<span class="hljs-keyword">App</span>.lastRowClicked.hasCheck = false;
        Ti.<span class="hljs-keyword">App</span>.fireEvent('audiostop', {});
    }

    <span class="hljs-keyword">e</span>.row.hasCheck = !<span class="hljs-keyword">e</span>.row.hasCheck;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">e</span>.row.hasCheck){
        Ti.<span class="hljs-keyword">App</span>.lastRowClicked = <span class="hljs-keyword">e</span>.row;
        <span class="hljs-keyword">var</span> streamerurl = <span class="hljs-keyword">e</span>.row.thisMp3;
        Ti.<span class="hljs-keyword">App</span>.fireEvent('audiostop', {});
        Ti.<span class="hljs-keyword">App</span>.fireEvent('audiourl', { url: streamerurl });
        Ti.<span class="hljs-keyword">App</span>.fireEvent('audioplay', {});
    }
    <span class="hljs-keyword">else</span>{
        Ti.<span class="hljs-keyword">App</span>.lastRowClicked = undefined;
        Ti.<span class="hljs-keyword">App</span>.fireEvent('audiostop', {});
    }
});
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 24th 2013, 1:54:10 pm">March 24th 2013</span>
				by <span class='authorname'>Romain Gentilella</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>check</span></li>
					
						<li><span class='tagname'>child</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>tableview</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>This is one we are going to need screen shots to help us understand exactly what you are attempting.</p>
<p>Quick Tip; <strong>How to include an image in your question or comment</strong></p>
<p>There is no upload ability in the Q&amp;A, use any one of a number of services to upload the image and then use the link reference as described below.</p>
<p>If you do not already use a service, <a href="http:&#x2F;&#x2F;tinypic.com&#x2F;">tinypic.com</a>.</p>
<ul>
<li>Display as a link</li>
</ul>
<pre><code class="hljs">[<span class="hljs-link_label">Link Caption</span>](<span class="hljs-link_url">http://www.somewhere.com/folder/example.png</span>)
</code></pre><ul>
<li>Display as an image</li>
</ul>
<pre><code class="hljs">![<span class="hljs-link_label">Title</span>](<span class="hljs-link_url">http://www.somewhere.com/folder/example.png</span>)
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="March 24th 2013, 1:56:52 pm">March 24th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hello, thank you for answering.</p>
<p>There are some screenshots about my app (on iPhone simulator).</p>
<p><img src="http:&#x2F;&#x2F;oi49.tinypic.com&#x2F;33a9kq8.jpg" alt="Podcast tab (mother)"></p>
<p>The first one show you the 4th tab (Shows&#39; list), there is no problem here, you just have to select one of them.</p>
<p><img src="http:&#x2F;&#x2F;oi48.tinypic.com&#x2F;4imn3q.jpg" alt="Antichambre&#39;s shows (child)"></p>
<p>There, I&#39;ve got a problem, it&#39;s one of shows&#39; list child (Antichambre), when I click on a show, the podcast starts playing, it&#39;s checked, no problem. But when I click on the &quot;Podcasts&quot; return button and go back to this child page (always Antichambre), it&#39;s not checked anymore.</p>
<p>I just wanted to know how to make the child remember which one is checked.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 24th 2013, 2:08:41 pm">March 24th 2013</span>
								by <span class='authorname'>Romain Gentilella</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-259272">
				
						<section>
							<p>Hi</p>
<p>The problem you have is one of logic.  The table is not forgetting the check mark - when you click the tab button and return to the root view, those tables have now been removed from memory.  When you display them again, you are responsible for updating their appearance if you need to based on previous settings.</p>
<p>When you loop the rows, check if the tick is needed by referencing the id (or other unique reference) you should have stored when the user clicked the row.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 24th 2013, 4:00:29 pm">March 24th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/149974/child-tableview-doesnt-still-checked#answer-259272" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you for your answer. I understand the logic, but don&#39;t know how to do something like this, how this ID could check the row ? Adding something like &quot;if ID = lastHasCheckID then check this row&quot; ? I didn&#39;t find any example in KitchenSink, could you please show me how it works ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 26th 2013, 3:16:52 pm">March 26th 2013</span>
											by <span class='authorname'>Romain Gentilella</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve tried with a friend to make it work with your advices, but we&#39;re doing it wrong.</p>
<p>In the mother window I&#39;m using this</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> dataChildren = [
    <span class="hljs-comment">// Theses are children files</span>
    '/path/to/<span class="hljs-keyword">local</span>/file1.js': {},
    '/path/to/<span class="hljs-keyword">local</span>/file2.js': {},
    '/path/to/<span class="hljs-keyword">local</span>/file3.js': {},
    ...
]

tableview.addEventListener('click', function(<span class="hljs-keyword">e</span>){
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">e</span>.rowData.<span class="hljs-keyword">test</span>){
        <span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Titanium.UI.createWindow({
            url:<span class="hljs-keyword">e</span>.rowData.<span class="hljs-keyword">test</span>,
            title:<span class="hljs-keyword">e</span>.rowData.title,
            backgroundColor:'#FFF'
        });
        Ti.UI.currentdata = dataChildren[<span class="hljs-keyword">e</span>.rowData.<span class="hljs-keyword">test</span>]
        <span class="hljs-keyword">if</span> (data.wasChecked) {
            Ti.<span class="hljs-keyword">App</span>.lastRowClicked.hasCheck = false;
        }
        Titanium.UI.currentTab.<span class="hljs-keyword">open</span>(<span class="hljs-keyword">win</span>,{animated:true});
    }
});
</code></pre><p>And one of children</p>
<pre><code class="hljs"><span class="hljs-keyword">for</span> (var c=<span class="hljs-number">0</span>;c&lt;items.length;c++){
            var mp3_url = <span class="hljs-keyword">null</span>;
            var item = items.item(c);
            var thumbnails = item.getAttribute(<span class="hljs-string">"image"</span>);
            <span class="hljs-keyword">if</span> (thumbnails &amp;&amp; thumbnails.length &gt; <span class="hljs-number">0</span>){
                mp3_url = item.getAttribute(<span class="hljs-string">"path"</span>);
                var title = item.getAttribute(<span class="hljs-string">"title"</span>);
                var row = Ti.UI.createTableViewRow({<span class="hljs-variable">height</span>:<span class="hljs-string">'80dp'</span>, opacity:<span class="hljs-number">0.5</span>, backgroundColor:<span class="hljs-string">'#FFF'</span>, <span class="hljs-built_in">background</span>:<span class="hljs-string">'transparent'</span>});
                var label = Ti.UI.createLabel({
                    <span class="hljs-built_in">text</span>:title,
                    left:<span class="hljs-string">'85dp'</span>,
                    top:<span class="hljs-string">'5dp'</span>,
                    bottom:<span class="hljs-string">'5dp'</span>,
                    right:<span class="hljs-string">'20dp'</span>,
                    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#000'</span>,
                    font: {
                        fontSize:<span class="hljs-string">'16dp'</span>
                    }
                });
                row.<span class="hljs-built_in">add</span>(label);
                var img;
                <span class="hljs-keyword">if</span> (Titanium.Platform.name == <span class="hljs-string">'android'</span>){
                    img = Ti.UI.createImageView({
                        <span class="hljs-built_in">image</span>:<span class="hljs-string">'/images/antichambre.jpg'</span>,
                        left:<span class="hljs-string">'9dp'</span>,
                        <span class="hljs-variable">height</span>:<span class="hljs-string">'60dp'</span>,
                        <span class="hljs-variable">width</span>:<span class="hljs-string">'60dp'</span>
                    });
                }
                <span class="hljs-keyword">else</span>{
                    img = Ti.UI.createImageView({
                        <span class="hljs-built_in">image</span>:<span class="hljs-string">'/images/antichambre.jpg'</span>,
                        left:<span class="hljs-string">'9dp'</span>,
                        <span class="hljs-variable">height</span>:<span class="hljs-string">'60dp'</span>,
                        <span class="hljs-variable">width</span>:<span class="hljs-string">'60dp'</span>
                    });
                }
                row.<span class="hljs-built_in">add</span>(img);

                <span class="hljs-comment">// My ID check</span>
                row.id = x; 
                row.thisMp3 = mp3_url;
                <span class="hljs-keyword">if</span> (Ti.UI.currentdata.rowClicked === x) { 
                    row.hasCheck = <span class="hljs-keyword">true</span>;
                };

                <span class="hljs-comment">// End check</span>

                data[x++] = row;
            }
        }
        var tableview = Titanium.UI.createTableView({data:data});
        antichambre.<span class="hljs-built_in">add</span>(tableview);
        tableview.addEventListener(<span class="hljs-string">'click'</span>,function(e){
            <span class="hljs-keyword">if</span> (Ti.App.lastRowClicked &amp;&amp; Ti.App.lastRowClicked !== e.row){
                Ti.App.lastRowClicked.hasCheck = <span class="hljs-keyword">false</span>;
                Ti.App.fireEvent(<span class="hljs-string">'audiostop'</span>, {});
            }

            e.row.hasCheck = !e.row.hasCheck;
            <span class="hljs-keyword">if</span> (e.row.hasCheck) {
                Ti.UI.currentdata.rowClicked = e.row.id 
            } <span class="hljs-keyword">else</span> {
                Ti.UI.currentdata.rowClicked = <span class="hljs-keyword">null</span>
            }
</code></pre><p>I guess this is what you meant, but this is not the way to make it work i think… Maybe you could help me to see what I&#39;m doing wrong ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 17th 2013, 6:52:20 am">May 17th 2013</span>
											by <span class='authorname'>Romain Gentilella</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
