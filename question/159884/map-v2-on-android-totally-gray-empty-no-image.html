<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Map v2 on Android totally gray, empty, no image... » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Map v2 on Android totally gray, empty, no image...</h1>
		</header>
		<section>
			<p>I&#39;m really tired of searching over net and testing all different ideas and nothing for the moment and is really discouraging to can´t find some solution for this. I&#39;m trying to use google maps v2 module in my Samsung S2 (because official documents say that in emulator is impossible and yes, app directly crashes if i try) but always i get the same result, gray screen with zoom and user location buttons.</p>
<p>I have tried with directly build and install from Studio to device, build and install on simulator and with airdroid install on device, the same with both, gray! :(</p>
<ul>
<li>On google console i switched on &quot;Google Maps Android API v2&quot;</li>
<li>Created new android key with SHA1 from Titanium &quot;CC:E3:7F:08:FA:03:9C:88:07:BC:CB:AB:7B:88:61:F4:75:9D:47:9F;com.hfp.mobile&quot; -&gt; AIzaSyD7Hy4kJCKCP0ERxcSQiPozPjj2q27coQM the api key</li>
<li>And this is part of my tiapp.xml..<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">android</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">manifest</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-feature</span> <span class="hljs-attribute">android:glEsVersion</span>=<span class="hljs-value">"0x00020000"</span> <span class="hljs-attribute">android:required</span>=<span class="hljs-value">"true"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.CAMERA"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.ACCESS_WIFI_STATE"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.INTERNET"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.ACCESS_COARSE_LOCATION"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.ACCESS_FINE_LOCATION"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.google.android.providers.gsf.permission.READ_GSERVICES"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.hfp.mobile.permission.MAPS_RECEIVE"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">permission</span>
<span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.hfp.mobile.permission.MAPS_RECEIVE"</span>
<span class="hljs-attribute">android:protectionLevel</span>=<span class="hljs-value">"signature"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">application</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">meta-data</span>
<span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.google.android.maps.v2.API_KEY"</span>
<span class="hljs-attribute">android:value</span>=<span class="hljs-value">"AIzaSyD7Hy4kJCKCP0ERxcSQiPozPjj2q27coQM"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">application</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">manifest</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">android</span>&gt;</span>
</code></pre></li>
</ul>
<p>Some idea? i have read that &quot;no matter&quot; if now i only see a gray rectangle because then, when app will be uploaded on store, maps will work perfectly…sure?…</p>
<p>Using aLogcat app the message is..<br>E&#x2F;Google Maps Android API(27814): Ensure that the following correspond to what is in the API Console: Package Name: com.hfp.mobile, API Key: AIzaSyD7Hy4kJCKCP0ERxcSQiPozPjj2q27coQM, Certificate Figerprint: CCE37F08FA039C8807BCCBAB7B8861F4759D479F</p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 26th 2013, 11:32:46 pm">November 26th 2013</span>
				by <span class='authorname'>Hector Foronda</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>google maps</span></li>
					
						<li><span class='tagname'>gray</span></li>
					
						<li><span class='tagname'>map</span></li>
					
						<li><span class='tagname'>v2</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-271826">
				
						<section>
							<p>A few tips more tips that might help.</p>
<ul>
<li>on the cloud console make sure that &#39;Google Maps Android API v2&#39; is &#39;On&#39;. Within the API project it is under &quot;APIs and Auth&quot; &gt; Auth</li>
<li>you can have multiple apps share the same key, i.e. your dev and appstore builds with different SHAs can share the same key.</li>
</ul>
<p>Not sure if these will help.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 27th 2013, 12:16:53 am">November 27th 2013</span>
								by <span class='authorname'>David Bankier</span><br>
								<a class="icon-bg icon-link" href="question/159884/map-v2-on-android-totally-gray-empty-no-image.html#answer-271826" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>it seems that the problem is you are installing the app into the device. The thing is that you need the add the development SHAs of the sdk that you are using  ( something like this )</p>
<p><code>keytool -list -v -keystore ~&amp;#x2F;Library&amp;#x2F;Application\ Support&amp;#x2F;Titanium&amp;#x2F;mobilesdk&amp;#x2F;osx&amp;#x2F;3.1.0.GA&amp;#x2F;android&amp;#x2F;dev_keystore</code></p>
<p>It will change in function of where did you installed it.</p>
<p>Add this SHA to the one that you already have ( it will look like something like this):</p>
<pre><code class="hljs">"<span class="hljs-tag">CC</span><span class="hljs-pseudo">:E3</span><span class="hljs-pseudo">:7F</span><span class="hljs-pseudo">:08</span><span class="hljs-pseudo">:FA</span><span class="hljs-pseudo">:03</span><span class="hljs-pseudo">:9C</span><span class="hljs-pseudo">:88</span><span class="hljs-pseudo">:07</span><span class="hljs-pseudo">:BC</span><span class="hljs-pseudo">:CB</span><span class="hljs-pseudo">:AB</span><span class="hljs-pseudo">:7B</span><span class="hljs-pseudo">:88</span><span class="hljs-pseudo">:61</span><span class="hljs-pseudo">:F4</span><span class="hljs-pseudo">:75</span><span class="hljs-pseudo">:9D</span><span class="hljs-pseudo">:47</span><span class="hljs-pseudo">:9F</span>;<span class="hljs-tag">com</span><span class="hljs-class">.hfp</span><span class="hljs-class">.mobile</span>"
"<span class="hljs-tag">XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span><span class="hljs-pseudo">:XX</span>;<span class="hljs-tag">com</span><span class="hljs-class">.hfp</span><span class="hljs-class">.mobile</span>"
</code></pre><p>By adding this line, it should load the map in your device when you install your app to the device.</p>
<p>Another way to know if it works, is to generate an apk ( as ifyou where to upload it to the store) and install it in your device.</p>
<p>Hope it helps!</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 6:39:30 am">November 27th 2013</span>
											by <span class='authorname'>Luis Cañamares</span>
										</div>
									</li>
								
									<li class="comment">
										<p><h2 id="night">Night</h2>
<p>I have testing with this SHA1 ( CC:E3:7F:08:FA:03:9C:88:07:BC:CB:AB:7B:88:61:F4:75:9D:47:9F ) and checked that all versions of the sdk have the same SHA1. Has someone compiled with some version different to 3.1.0.GA and be able to use maps v2 on Android? with .1, .2 or 3.1.3.GA?</p>
<p>….</p>
<h2 id="morning">Morning</h2>
<p>One moment!!! i don&#39;t know how to explain this but now goes perfect and i can think only in…in spanish &quot;Estoy hasta los c…&quot; or that i&#39;m really tired after looooong last four days (and nights..). I have done these things.</p>
<ol>
<li>[ on terminal ] sudo titanium sdk install</li>
<li>[ on terminal ] sudo npm install -g titanium</li>
<li>[ Build and install directly to device using 3.1.3.GA + CLI 3.1.2 + Google APIs 2.3.3 ] - Works</li>
<li>[ Build on emulator and install on devide with Airdroid, using 3.1.3.GA + CLI 3.1.2 + Google APIs 2.3.3 ] - Works</li>
<li>[ On tiapp.xml ] With or without &quot;&lt;property name=&quot;ti.deploytype&quot;&gt;development&lt;&#x2F;property&gt;&quot; - Works</li>
<li>[ On tiapp.xml ] Testing with different app ids and new api keys with dev&#39;s SHA CC:E3… - Works</li>
</ol>
<p>Some idea? is soooo strange because with the titanium sdk and cli installation, it has installed 3.3.0 ( that i can&#39;t use without cli 3.2&gt;= ) and the &quot;new&quot; cli is the same i already had…</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 9:05:01 am">November 27th 2013</span>
											by <span class='authorname'>Hector Foronda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi, it&#39;s just because there is a latency between the key generation on google console and the availability of the key in your apps.<br>I created a new app and 2 hours later, it was ok.<br>I got this same behavior with a previous app.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 28th 2013, 3:52:15 am">November 28th 2013</span>
											by <span class='authorname'>JeanSebastien GALLOO</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-271842">
				
						<section>
							<p>Hector, te lo digo en Español y vamos más rápidos XD</p>
<p>En mi casí lo eché a andar sin problema, pero pasé un infierno durante un fin de semana entero.</p>
<p>En ningún caso consigo que funcione en el emulador, creo que no se puede. </p>
<p>Mi problema era que añadía el mapa a una vista. Por lo visto no se puede, hay que anadirlo directamente a una ventana.</p>
<p>Dime más datos a ver si te puedo ayudar. Saludos</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 27th 2013, 10:50:36 am">November 27th 2013</span>
								by <span class='authorname'>Miguel Ángel Castaño Fajardo</span><br>
								<a class="icon-bg icon-link" href="question/159884/map-v2-on-android-totally-gray-empty-no-image.html#answer-271842" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Lo curioso es que ahora funciona…lo cual no tiene mucha lógica pues anteriormente también cree las api key&#39;s con el código SHA1 de testeo que trae Titanium ( he comprobado y todas las versiones del sdk traen el mism SHA1 ) y al instalar&#x2F;actualizar el sdk y cli, realmente el primero me ha instalado la versión 3.3.0, que no puedo usar porque requiere un cli mayor, y el cli que se instalo es el mismo que ya tenia, el 3.1.2.</p>
<p>Solo se me ocurre que hubiese algún problema en relación al cli, que al volverlo a instalar se haya solucionado o que aun siendo la misma versión haya alguna variación en alguno de los archivos que se ve en el terminal que se van compiando.</p>
<p>He probado tanto compilando e instalando directamente en el móvil desde Titanium Studio como haciendo la instalación por mi cuenta ( compilando para emulador ), mediante airdroid y el resultado es satisfactorio en ambos casos.</p>
<p>De momento he probado a meter el mapa en esta ventana…</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({<span class="hljs-string">backgroundColor:</span> <span class="hljs-string">'white'</span>, <span class="hljs-string">navBarHidden:</span><span class="hljs-literal">true</span>, <span class="hljs-string">modal:</span><span class="hljs-literal">true</span> });
</code></pre><p>Y ahora voy a probar en modo no modal y después metiendo el mapa en una vista que no en una ventana, pues mi sistema de ventanas hace uso de una única ventana en la que voy cambiando vistas y esto me estropearía todo el planteamiento.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 11:27:59 am">November 27th 2013</span>
											by <span class='authorname'>Hector Foronda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have tried with this code…</p>
<pre><code class="hljs">var MapModule = require(<span class="hljs-string">'ti.map'</span>);

var win =
    ( <span class="hljs-number">1</span> ) Ti.UI.createWindow({ <span class="hljs-string">navBarHidden:</span><span class="hljs-literal">true</span>, <span class="hljs-string">modal:</span><span class="hljs-literal">true</span> });
    ( <span class="hljs-number">2</span> ) Ti.UI.createWindow({ <span class="hljs-string">navBarHidden:</span><span class="hljs-literal">true</span>, <span class="hljs-string">modal:</span><span class="hljs-literal">false</span> });
var viw = Ti.UI.createView({ <span class="hljs-string">width:</span>Ti.UI.FILL, <span class="hljs-string">height:</span><span class="hljs-string">"50%"</span> });

var map1 = MapModule.createView({
<span class="hljs-label">    userLocation:</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">    mapType:</span> MapModule.NORMAL_TYPE,
<span class="hljs-label">    animate:</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">    region:</span> {
<span class="hljs-label">    latitude:</span> -<span class="hljs-number">33.87365</span>, <span class="hljs-string">longitude:</span> <span class="hljs-number">151.20689</span>,
<span class="hljs-label">    latitudeDelta:</span> <span class="hljs-number">0.1</span>, <span class="hljs-string">longitudeDelta:</span> <span class="hljs-number">0.1</span>
    },
<span class="hljs-label">    width:</span> <span class="hljs-string">'50%'</span>, <span class="hljs-string">height:</span> <span class="hljs-string">'50%'</span>,
<span class="hljs-label">    top:</span> <span class="hljs-number">0</span>, <span class="hljs-string">left:</span> <span class="hljs-number">0</span>
});

var map2 = MapModule.createView({
<span class="hljs-label">    userLocation:</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">    mapType:</span> MapModule.HYBRID_TYPE, <span class="hljs-string">traffic:</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">    animate:</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">    region:</span> {
<span class="hljs-label">    latitude:</span> -<span class="hljs-number">33.87365</span>, <span class="hljs-string">longitude:</span> <span class="hljs-number">151.20689</span>,
<span class="hljs-label">    latitudeDelta:</span> <span class="hljs-number">0.1</span>, <span class="hljs-string">longitudeDelta:</span> <span class="hljs-number">0.1</span>
    },
<span class="hljs-label">    height:</span> <span class="hljs-string">'50%'</span>, <span class="hljs-string">width:</span> <span class="hljs-string">'50%'</span>,
<span class="hljs-label">    bottom:</span> <span class="hljs-number">0</span>, <span class="hljs-string">right:</span> <span class="hljs-number">0</span>,
});

( <span class="hljs-number">3</span> )
win.add( map1 );
win.add( map2 );

( <span class="hljs-number">4</span> )
viw.add( map1 );
viw.add( map2 );
win.add( viw );

win.open();
</code></pre><ul>
<li>1 and 2: To be modal or not the window, has no importance</li>
<li>3 and 4: Add map to window or view, in both cases works fine</li>
</ul>
<p>Working with 3.1.3.GA + 3.1.2 CLI + Build for Google APIs (Android 2.3.3) [ armebi ]</p>
<p>My device is Samsung S2 with Android 4.1.2</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 11:53:44 am">November 27th 2013</span>
											by <span class='authorname'>Hector Foronda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for your testing. :) </p>
<p>I think they have solved the view issue.</p>
<p>Veo que ya te funciona OK. Por lo cual debe ser tema de la actualización, no queda otra. En todo caso me alegro de que ya te funcione.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 1:00:40 pm">November 27th 2013</span>
											by <span class='authorname'>Miguel Ángel Castaño Fajardo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hola, <em>me, no ablo espanol, </em> but i understand you solved the problem!!!! </p>
<p>I have the same problem!!!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 2nd 2013, 11:09:25 pm">December 2nd 2013</span>
											by <span class='authorname'>Vito Lipari</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
