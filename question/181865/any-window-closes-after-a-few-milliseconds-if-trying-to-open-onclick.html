<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Any window closes after a few milliseconds if trying to open onclick Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Any window closes after a few milliseconds if trying to open onclick</h1>
		</header>
		<section>
			<p>If I use a timer (setinterval) and then change screens it works just fine, but if I try do any sort of on click the screen shows for a couple of milliseconds then goes back to the previous screen. I have been battling for close to 24 hours now. Please help!</p>
<p>Working timer in index.js</p>
<pre><code class="hljs">setInterval(function<span class="hljs-literal">()</span>{
    <span class="hljs-type">Alloy</span>.createController(<span class="hljs-string">"levels"</span>).getView<span class="hljs-literal">()</span>.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
    $.index.close<span class="hljs-literal">()</span>;
}, <span class="hljs-number">1000</span>);

$.index.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>index.xml:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"label"</span>&gt;</span>Welcom<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>Change screens on click (levels.js changing to mainMenu.js):</p>
<pre><code class="hljs">function openMenu<span class="hljs-literal">()</span> {
    <span class="hljs-type">Alloy</span>.createController(<span class="hljs-string">"mainMenu"</span>).getView<span class="hljs-literal">()</span>.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;    
}
</code></pre><p>levels xml:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"label"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"openMenu"</span>&gt;</span>Open The Menu!!!<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>I have tried clicking on labels and buttons.</p>
<p>If I try use the <code>openMenu</code> function, the screen shows and then closes immediately. That is ALL the code I am using, I have not included ANYTHING else in the project yet. So you can see why I am banging my head against the wall.</p>
<p>There are no log messages or anything that I can find.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 6th 2015, 11:31:17 am">April 6th 2015</span>
				by <span class='authorname'>Josh Harington</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>click</span></li>
					
						<li><span class='tagname'>crash</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Why you are using setInterval ?? this wil make memory leaks !!</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 6th 2015, 11:42:57 am">April 6th 2015</span>
								by <span class='authorname'>Abdel latif Ahmed</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>What should I be using then?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 6th 2015, 11:48:52 am">April 6th 2015</span>
								by <span class='authorname'>Josh Harington</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-286901">
				
						<section>
							<p>Hi</p>
<p>I am not sure what you are trying to achieve here even after reading your description and your code;</p>
<pre><code class="hljs">setInterval(function<span class="hljs-literal">()</span>{
    <span class="hljs-type">Alloy</span>.createController(<span class="hljs-string">"levels"</span>).getView<span class="hljs-literal">()</span>.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
    $.index.close<span class="hljs-literal">()</span>;
}, <span class="hljs-number">1000</span>);

$.index.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>As this is in the main <strong>index.js</strong> this is what is happening;</p>
<ul>
<li>You create an interval function - this will continue repeating the function for infinity</li>
<li>Main window opens as it should <strong>$.index.open();</strong></li>
<li>1 second later (since app started NOT since the launch window was shown)<ul>
<li>1: open &quot;levels&quot;</li>
<li>2: close the main app window</li>
<li>3: repeat step 1 </li>
</ul>
</li>
<li>This interval function will continue to run forever as you have not given it anyway to expire or anyway for user intervention.</li>
<li><strong>$.index.close();</strong> this will only actually happen once as there is nothing else for it to close - you already closed the main window.  It willnot error as the window still still exists though.</li>
</ul>
<p>You said this was your only code - however you reference a controller <strong>mainMenu</strong> - so not sure what it does.</p>
<p>I suspect the problem is in there.  It is likely you are also using another interval or closing that window inside the controller during the open open or creation of the window itself.</p>
<p>You should not use the setInterval or setTimeout unless you REALLY know what you are doing with them - your code here shows you do not as you have not provided for the function to be terminated and also you used the one that repeats forever, not the one that only works once.  You should also not use them to control when windows appear as you assume the timeout value will be the same required for all devices - it will not.</p>
<p>Things that open are either done because the user has interacted with the device - so an event was fired related to them or sometimes it might be needed to run code on launch or termination of something (less common if you are starting out as these take planning).</p>
<p>I can only assume that the above code was found as an answer to a possibly related question.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 6th 2015, 2:05:08 pm">April 6th 2015</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/181865/any-window-closes-after-a-few-milliseconds-if-trying-to-open-onclick.html#answer-286901" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
