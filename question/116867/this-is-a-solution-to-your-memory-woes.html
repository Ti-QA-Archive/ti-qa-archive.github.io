<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>This is a solution to your memory woes » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>This is a solution to your memory woes</h1>
		</header>
		<section>
			<p>Hi guys,</p>
<p>My team recently came across a serious memory issue in our project. So like any good programmer, we researched the forums for an answer. Our search took us to using sub-contexts as a possible solution.</p>
<p>Unfortunately, because of the dynamism of our project, sub-contexts made it tremendously harder to implement. Soon, we ran across concurrency issues that were caused by a race-condition for access to our global data store.</p>
<p>For a few days we pondered on solutions and finally tonight, we&#39;ve developed a solution that WILL work for any memory problems and a project of any size.</p>
<p>We&#39;ve discovered that by creating a blank window which runs in its own sub-context, then adding any views we wished to rid into the blank window and closing it, will, definitively, free up all associated memory. Think of it as an auto-release pool of sorts. As we create objects for our views, we add them to the display, and when we are done with them, we throw the views into the pool, and we empty the pool by closing it. Then we reopen the &quot;pool&quot; so we get to use it again. SIMPLE!</p>
<p>Hope this works for you guys, let me know if you would like to see a code sample.</p>
<p>SDK: 1.6.0</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 5th 2011, 7:02:16 am">March 5th 2011</span>
				by <span class='authorname'>Michael Peng</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>1.6</span></li>
					
						<li><span class='tagname'>delete</span></li>
					
						<li><span class='tagname'>free</span></li>
					
						<li><span class='tagname'>memory</span></li>
					
						<li><span class='tagname'>memoryleak</span></li>
					
						<li><span class='tagname'>sub-contexts</span></li>
					
						<li><span class='tagname'>views</span></li>
					
						<li><span class='tagname'>windows</span></li>
					
				</ul>
			

			<section>
				<h5>12 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>+1 for a code sample ;)</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 5th 2011, 12:27:00 pm">March 5th 2011</span>
								by <span class='authorname'>Kosso</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>this looks just brilliant.  has anybody from Appcelerator weighed in on this method?</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 12th 2011, 7:46:57 pm">July 12th 2011</span>
								by <span class='authorname'>Duncan Mapes</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thank you very much, this solved my memory problems I was having. Worked like a charm!</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 31st 2011, 8:52:31 pm">July 31st 2011</span>
								by <span class='authorname'>Andreas Oberg</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi. I just was wondering, if a project with tabgroup like the KitchenSink needs to implement this improve?. I mean when you change from tab to tab, would you need to send the last tab to the pool? Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 2nd 2011, 3:06:48 pm">September 2nd 2011</span>
								by <span class='authorname'>Alexnader Mogollon</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>@Alexander Mogollon: I don&#39;t think that would be a good idea since users generally switch tabs regularly and it would be quite annoying to have to wait for a tab window to redraw each time. Especially if you have a large table view or need to re-download content.</p>
<p>To be honest, I think with the release of 1.7 the memory management has gotten a lot better for iOS. We&#39;re in the process of making our app Android compatible, so I will be able to determine how good memory management is for Android. So far, I&#39;ve found the JS interpreter on Android to behave differently than its iOS counterpart.</p>
<p>Cheers</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 2nd 2011, 3:13:13 pm">September 2nd 2011</span>
								by <span class='authorname'>Michael Peng</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>thanks.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 2nd 2011, 4:40:46 pm">September 2nd 2011</span>
								by <span class='authorname'>Alexnader Mogollon</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>somebody have code sample please.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 15th 2011, 2:39:37 pm">December 15th 2011</span>
								by <span class='authorname'>Javier Rubio</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Yes, sample code!!</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 22nd 2012, 8:01:08 pm">March 22nd 2012</span>
								by <span class='authorname'>Javier Hdez</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>nice one</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 1st 2013, 6:58:18 am">January 1st 2013</span>
								by <span class='authorname'>Ashutosh Chaturvedi</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Can some one please provide sample code for this. Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 24th 2014, 5:44:24 am">January 24th 2014</span>
								by <span class='authorname'>Bably Das</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Please Provide Sample Code for this</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 23rd 2015, 6:37:17 am">July 23rd 2015</span>
								by <span class='authorname'>Raju Harry</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>this post is 4 years old. Sample code can be found below but I doubt it will do any better than using Alloy already</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 23rd 2015, 5:24:18 pm">July 23rd 2015</span>
								by <span class='authorname'>B W</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>70</span> Votes</div>
			<div class="answers"><span>14</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>14 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-205434">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>big thanx for sharing this! </p>
<p>did anyone try to create a js-class for an example:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> pool = <span class="hljs-keyword">new</span> Class_Autorelease(); <span class="hljs-comment">// a js-class based on your code</span>
pool.release(my_memeating_beast); <span class="hljs-comment">// this adds objects to the garbage</span>
pool.release(hungry_too);

pool.clear(); <span class="hljs-comment">// this clears and recreates the pool</span>
</code></pre><p>would this work, or would this be counterproductive to the solution you mentioned?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 31st 2011, 10:41:11 pm">March 31st 2011</span>
								by <span class='authorname'>Christian Sigl</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-205434" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Is it possible that you could share the class you have created? It looks very interesting.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 28th 2011, 9:14:26 am">June 28th 2011</span>
											by <span class='authorname'>James -</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I create one that seems to work… using Michael Pengs example</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> MemoryPool = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> _window;
    <span class="hljs-comment">/*
     Here we make our "auto-release" pool. It's simply a window.
     We hide it upon creation so it won't interfere with our view hierarchy.

     5/3/2011: It seems that the window does not need to be a subcontext, just a regular window will do.
     */</span>
    <span class="hljs-keyword">this</span>.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        _window = Ti.UI.createWindow();
        _window.hide();
        _window.open();
    }
    <span class="hljs-comment">// This is where we clear out the memPool by closing it then reopening it again.</span>
    <span class="hljs-keyword">this</span>.clean = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">if</span>(obj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) {
            <span class="hljs-keyword">var</span> arLen=obj.length;
            <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>, len=arLen; i&lt;len; ++i ) {
                <span class="hljs-comment">// We then stick the entire view into the pool</span>
                _window.add(obj[i]);
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// We then stick the entire view into the pool</span>
            _window.add(obj);
        }
        Ti.API.info(<span class="hljs-string">'Cleaning MemoryPool.'</span>);

        <span class="hljs-comment">// We empty the pool by closing it.</span>
        _window.close();

        <span class="hljs-comment">// We recreate the window again for the next object</span>
        <span class="hljs-keyword">this</span>.init();
    };
    <span class="hljs-keyword">this</span>.init();
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 22nd 2011, 11:47:58 am">July 22nd 2011</span>
											by <span class='authorname'>Chris Whittle</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>what is the argument &quot;obj&quot; here? mywindow.children?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 29th 2011, 8:04:27 am">July 29th 2011</span>
											by <span class='authorname'>dev 1605</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>got </p>
<pre><code class="hljs">java.lang.IllegalArgumentException: Expected org.appcelerator.titanium.proxy.TiViewProxy <span class="hljs-built_in">type</span> <span class="hljs-keyword">for</span> argument <span class="hljs-string">"child"</span> <span class="hljs-keyword">in</span> <span class="hljs-string">"add"</span>, but got [Ljava.lang.Object;@<span class="hljs-number">409</span>b2<span class="hljs-built_in">cd</span>8
</code></pre><p>calling </p>
<pre><code class="hljs"><span class="hljs-tag">memPool</span><span class="hljs-class">.clean</span>(<span class="hljs-tag">win</span><span class="hljs-class">.children</span>);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 29th 2011, 8:17:00 am">July 29th 2011</span>
											by <span class='authorname'>dev 1605</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes, mywindow.children is correct.  This works like a champ, thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 22nd 2011, 2:57:12 pm">September 22nd 2011</span>
											by <span class='authorname'>Mark Pemburn</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>it worked for me.Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 9th 2013, 4:07:05 am">February 9th 2013</span>
											by <span class='authorname'>Richard JOSEPH</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Using <code>MemoryPool.clean(win.children);</code></p>
<p>For me it is saying <strong>&quot;&#39;undefined&#39; is not a function (evaluating &#39;MemoryPool.clean(win.children)&#39;)&quot;;</strong></p>
<p>Any Help ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2013, 10:56:52 am">March 5th 2013</span>
											by <span class='authorname'>Ankesh Srivastava</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@ Ankesh : did you do first :</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> memoryPool = <span class="hljs-keyword">new</span> MemoryPool
</code></pre><p>and then:</p>
<pre><code class="hljs">memoryPool.<span class="hljs-function"><span class="hljs-title">clean</span><span class="hljs-params">(win.children)</span></span>
</code></pre><p>otherwise MemoryPool.clean() will be undefined.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 15th 2013, 12:21:37 am">March 15th 2013</span>
											by <span class='authorname'>Richard Lustemberg</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>23</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-203729">
				
						<section>
							<p>Here you go guys. Just tested on 1.5 and it works as well.<br>Let me know how it goes for you eh :)</p>
<pre><code class="hljs"><span class="hljs-comment">// This is the main window for this app</span>
var rootWindow = Ti.UI.createWindow
({
    fullscreen: <span class="hljs-keyword">true</span>,
    backgroundColor:<span class="hljs-string">'white'</span>
});
rootWindow.<span class="hljs-built_in">open</span>();

<span class="hljs-comment">// This is the root view we will be adding stuff into</span>
rootView = Ti.UI.createView
({
    <span class="hljs-variable">height</span>: <span class="hljs-number">100</span>,
    bottom: <span class="hljs-number">0</span>,
    backgroundColor: <span class="hljs-string">'orange'</span>
});
rootWindow.<span class="hljs-built_in">add</span>(rootView);

<span class="hljs-comment">/*
    Here we make our "auto-release" pool. It's simply a window.
    We hide it upon creation so it won't interfere with our view hierarchy.

    5/3/2011: It seems that the window does not need to be a subcontext, just a regular window will do.
*/</span>
var memPool = Ti.UI.createWindow();
memPool.<span class="hljs-built_in">open</span>();
memPool.hide();

<span class="hljs-comment">// This is where we clear out the memPool by closing it then reopening it again.</span>
var clearMem = function()
{
    Ti.API.info(<span class="hljs-string">'Closing memPool.'</span>);

    <span class="hljs-comment">// We first remove the view from our main display window</span>
    rootWindow.remove(rootView);

    <span class="hljs-comment">// We then stick the entire view into the pool</span>
    memPool.<span class="hljs-built_in">add</span>(rootView);

    <span class="hljs-comment">// We empty the pool by closing it.</span>
    memPool.close();

    <span class="hljs-comment">// We reset the pool by reopening it again.</span>
    memPool = Ti.UI.createWindow();
    memPool.<span class="hljs-built_in">open</span>();
    memPool.hide();

    <span class="hljs-comment">// We recreate the main view again, since it was removed and we want to use it again.</span>
    rootView = Ti.UI.createView
    ({
        <span class="hljs-variable">height</span>: <span class="hljs-number">100</span>,
        bottom: <span class="hljs-number">0</span>,
        backgroundColor: <span class="hljs-string">'orange'</span>
    });
    rootWindow.<span class="hljs-built_in">add</span>(rootView);
};

<span class="hljs-comment">// This is just a button for us to add an arbitraty large amount of things in.</span>
var adder = Ti.UI.createButton
({
    title: <span class="hljs-string">'Add shit'</span>,
    top: <span class="hljs-number">0</span>,
    left: <span class="hljs-number">0</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">50</span>
});
adder.addEventListener(<span class="hljs-string">'click'</span>,
function()
{
    Ti.API.info(<span class="hljs-string">"Adding stuff"</span>);
    <span class="hljs-keyword">for</span>(var i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">6</span>; i++)
    {
        <span class="hljs-comment">// This is just a random image that we've made arbitrarily large for testing purposes</span>
        aView = Ti.UI.createImageView({<span class="hljs-built_in">image</span>:<span class="hljs-string">'P9180046.JPG'</span>, <span class="hljs-variable">height</span>: <span class="hljs-number">1024</span>, <span class="hljs-variable">width</span>: <span class="hljs-number">23465</span>});
        rootView.<span class="hljs-built_in">add</span>(aView);

        <span class="hljs-comment">// We update the memory counter we display on screen.</span>
        disp.<span class="hljs-built_in">text</span>=Ti.Platform.availableMemory;
    }
});
rootWindow.<span class="hljs-built_in">add</span>(adder);

<span class="hljs-comment">// This is the button that when clicked, will invoke our clearMem method up top.</span>
var remover = Ti.UI.createButton
({
    title: <span class="hljs-string">'Remove stuff'</span>,
    top: <span class="hljs-number">0</span>,
    right: <span class="hljs-number">0</span>,
    <span class="hljs-variable">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">50</span>
});
remover.addEventListener(<span class="hljs-string">'click'</span>,clearMem);
rootWindow.<span class="hljs-built_in">add</span>(remover);

Ti.API.info(Ti.Platform.availableMemory);

<span class="hljs-comment">// This is the memory counter that is visible on the screen.</span>
var disp = Ti.UI.createLabel
({
    top:<span class="hljs-number">0</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">50</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">300</span>,
    <span class="hljs-built_in">text</span>: Ti.Platform.availableMemory
});
rootWindow.<span class="hljs-built_in">add</span>(disp);


<span class="hljs-comment">// We check up on the memory status every second</span>
setInterval
(
    function()
    {
        Ti.API.info(Ti.Platform.availableMemory);
        disp.<span class="hljs-built_in">text</span>=Ti.Platform.availableMemory;
    },
    <span class="hljs-number">1000</span>
);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 5th 2011, 4:53:59 pm">March 5th 2011</span>
								by <span class='authorname'>Michael Peng</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-203729" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>19</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-203726">
				
						<section>
							<p>yeh this would be good, and example would be good!!! when you release an object do you meant to close it after the user has finished with the view!!!</p>
<pre><code class="hljs">
<span class="hljs-tag">viewObject</span><span class="hljs-class">.close</span>();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 5th 2011, 12:04:17 pm">March 5th 2011</span>
								by <span class='authorname'>suliaman saleh</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-203726" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>That&#39;s pretty much what happens. Say I&#39;m done with objX ..</p>
<pre><code class="hljs"><span class="hljs-tag">memPool</span><span class="hljs-class">.add</span>(<span class="hljs-tag">objX</span>);
<span class="hljs-tag">memPool</span><span class="hljs-class">.close</span>();
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 5th 2011, 4:55:40 pm">March 5th 2011</span>
											by <span class='authorname'>Michael Peng</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I am a bit confused. When am I &quot;done&quot; with an object? At the bottom of a page? Thankful for all input!</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 17th 2011, 8:38:03 am">July 17th 2011</span>
											by <span class='authorname'>James -</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>when you intend to close a window for example, daniel</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 1st 2011, 5:50:22 am">August 1st 2011</span>
											by <span class='authorname'>dev 1605</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>4</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-218683">
				
						<section>
							<p>Hey,</p>
<p>My android app was showing force close alert randomly so I added window.close() on back button click event. And now it looks like it is releasing the memory for the view elements on click of menu button on android device. </p>
<pre><code class="hljs">win.addEventListener(<span class="hljs-string">'android:back'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
        win.close();
    });
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 13th 2011, 5:16:19 am">September 13th 2011</span>
								by <span class='authorname'>sushma pandey</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-218683" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-225441">
				
						<section>
							<p>Hi Michael,<br>   Thanks for this post. But have a confusion, where do i need to add this code. I have application with 3 different tabs and all are creating new windows using url after i get back json data from web service.  Also in one main tab we create about 6 new windows to get to final detail page. Is the code meant for app.js only or on all the js files that i have. Any explanation for this would greatly help.</p>
<p>Thanks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 14th 2011, 4:51:50 pm">December 14th 2011</span>
								by <span class='authorname'>Savita Sharma</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-225441" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228435">
				
						<section>
							<p>using this method, do you still need to null out variables and remove event listeners?  or does this clear everything for you?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 24th 2012, 10:05:12 pm">January 24th 2012</span>
								by <span class='authorname'>Mike Mintz</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-228435" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-230598">
				
						<section>
							<p>NB: SDK 1.7.5 on Android, haven&#39;t tried any other SDK versions and don&#39;t know if this affects iOS - This doesn&#39;t necessarily answer all memory leaks&#x2F;out of memory scenario&#39;s but certainly this one caused me a big headache and the workaround is NOT obvious at all. See my comments on &#39;Fernan Delgados&#39; post above for the background but basically if you use the &#39;backgroundImage&#39; property of any type of view and you then &#39;remove&#39; that view from it&#39;s parent you will get a lot of native memory left unfreed until the next GC. This can result in you&#39;re app getting OutOfMemory errors in the log of even a &#39;Force Close&#39;.</p>
<p>Long story short to workaround this issue you can do one of two things:</p>
<p>1 - If you don&#39;t need your image stretched to fit the view then use an &#39;ImageView&#39; and set the &#39;image&#39; property instead of the &#39;backgroundImage&#39; property. Then when you want to remove your view and free the memory be sure to remove it from it&#39;s parent view, set the &#39;image&#39; property to empty string and then &#39;null&#39; your reference variable. e.g.</p>
<pre><code class="hljs">win.remove(imgView)<span class="hljs-comment">;</span>
imgView.image = ''<span class="hljs-comment">;</span>
imgView = null<span class="hljs-comment">;</span>
</code></pre><p>2 - If you do need your image stretched to fit then because &#39;ImageView&#39; maintains aspect ratio you have to use a bit of a hack. Basically you can use a &#39;Button&#39; view but make it disabled (i.e. enabled = false), set &#39;style = 0&#39;, and &#39;width&#39; and &#39;height&#39; to 100% otherwise it won&#39;t expand to fill the parent. Then use the &#39;backgroundDisabledImage&#39; property to set your desired image. Then you want to remove your view and free the memory it&#39;s the same as above but you set the &#39;backgroundDisabledImage&#39; to an empty string, e.g.</p>
<pre><code class="hljs">win.remove(<span class="hljs-keyword">button</span>);
<span class="hljs-keyword">button</span>.backgroundDisabledImage = <span class="hljs-string">''</span>;
<span class="hljs-keyword">button</span> = null;
</code></pre><p>NB: For tracking this problem down the DDMS tools was absolutely essential. Strongly recommend you know how to use this tool effectively for investigating memory leaks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 16th 2012, 9:21:31 pm">February 16th 2012</span>
								by <span class='authorname'>Andy Potter</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-230598" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-282419">
				
						<section>
							<p>can i have an update on this? is this still the way to go anno sept. 2014? Im currently on SDK 3.3.0 and im having the same issue with 1 window which holds all views (subcontexts). I want to be able to cleanly remove one of these views without any residue in the memory</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 17th 2014, 10:26:48 am">September 17th 2014</span>
								by <span class='authorname'>B W</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-282419" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-203713">
				
						<section>
							<p>This sounds interesting.<br>Can you provide an example?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 5th 2011, 9:27:20 am">March 5th 2011</span>
								by <span class='authorname'>BSoft Co</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-203713" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>did you got any example ??</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 9th 2011, 9:03:54 am">December 9th 2011</span>
											by <span class='authorname'>Rahul Pandey</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-203724">
				
						<section>
							<p>An example would be amazing this has been holding my app back for weeks! (web services)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 5th 2011, 11:48:29 am">March 5th 2011</span>
								by <span class='authorname'>Mark Henderson</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-203724" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-205350">
				
						<section>
							<p>Thank you for the example.</p>
<p>However, I tried to implement your solution down to the detail.</p>
<p>Here&#39;s my problem:</p>
<p>When I flip through pages (I&#39;ve created a pageflipper) the memory goes down for every page (even though I clear earlier views with your clearMem method).</p>
<p>The memory goes all the way down to 2-3MB and sometimes it desides to crash and other times it releases all the way up to 100MB again.</p>
<p>Why doesn&#39;t it release dynamically?</p>
<p>Thank you.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 30th 2011, 9:42:06 pm">March 30th 2011</span>
								by <span class='authorname'>John Johnson</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-205350" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Could u please attach code John? Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 31st 2011, 1:47:07 am">March 31st 2011</span>
											by <span class='authorname'>Michael Peng</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Do you have an e-mail I can contact you at? I&#39;m not allowed to show my code in the public.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 31st 2011, 5:44:19 am">March 31st 2011</span>
											by <span class='authorname'>John Johnson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>John,</p>
<p>I assume you are under a NDA? In this case, please be aware that I will not be able to  bind myself to any contracts. If this is acceptable for you, then please provide me with your email address and I shall email you promptly. Cheers.</p>
<p>M</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 31st 2011, 5:51:39 am">March 31st 2011</span>
											by <span class='authorname'>Michael Peng</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank you.</p>
<p>Please contact me at popp13z [at] gmail [dot] com</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 31st 2011, 5:54:08 am">March 31st 2011</span>
											by <span class='authorname'>John Johnson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Did you get this resolved? I&#39;m having memory issues too.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 3rd 2011, 9:54:40 am">July 3rd 2011</span>
											by <span class='authorname'>Daniel Tome</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-222556">
				
						<section>
							<p>This method works in a single context with SDK 1.7.x, but not with 1.6.x, right?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 3rd 2011, 8:32:44 pm">November 3rd 2011</span>
								by <span class='authorname'>Danny Pham</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-222556" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-230536">
				
						<section>
							<p>Using DDMS i found that Memory allocated to application is get increases as i am navigating screen by screen and after some time it crash application with force close message&#x2F;Fail to load resources. Even i have remove all objects from window and after that assign null to it. i.e<br>window.remove(viewname);<br>viewname=null;<br>window.close();<br>window=null.<br>Please help Me OUT.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 16th 2012, 12:40:18 pm">February 16th 2012</span>
								by <span class='authorname'>Fernan Delgado</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-230536" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;m getting a similar issue, I&#39;m using the memory pool cleanup method above but memory still growing (not VM heap but actual native memory as visualised in the &#39;SysInfo&#39; tab in DDMS. I find if I use the &#39;Cause GC&#39; button on the &#39;VM Heap&#39; tab in DDMS the memory does get freed.</p>
<p>I think what is happening here is that native memory allocated by Titanium is not being freed because the VM hasn&#39;t garbage collected the Ti proxy objects to which the memory relates. This causing me a real headache and at the moment I don&#39;t have a decent solution :(</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 7:10:00 pm">February 16th 2012</span>
											by <span class='authorname'>Andy Potter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK, I&#39;ve narrowed the source of my issue down to the &#39;backgroundImage&#39; property. It seems if you use this on a view (any kind of view, plain, button, imageview, etc) and then you remove the view and null the reference you get a nice big leak in native memory. This leak does get freed when the GC runs, but because it leaks so much (nearly 1MB per view in my case), you can easily get the device to run out of memory and force close your app before the GC kicks in (NB: You don&#39;t always get killed, sometimes you just start getting OutOfMemory exceptions in the log).</p>
<p>Changing my app to use &#39;ImageView&#39; instead of a plain &#39;View&#39; AND using the &#39;image&#39; property instead of the &#39;backgroundImage&#39; property fixes the leak. However this doesn&#39;t entirely help me because I need my images stretched to fit the screen, but the ImageView always maintains aspect ratio if you specify the image via the &#39;image&#39; property. </p>
<p>So I&#39;m still a bit stuck, the investigation continues…</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 8:49:57 pm">February 16th 2012</span>
											by <span class='authorname'>Andy Potter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Andy</p>
<p>Please see my response <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;120446&#x2F;memory-management---android#answer-230120">here</a>.</p>
<p>If this does not resolve it, please open a new question, so that other may find it easily.</p>
<p>Cheers</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 9:24:22 pm">February 16th 2012</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-287849">
				
						<section>
							<p>&#x2F;&#x2F;This is code of  Popover and ther is no any compilation error  so we could not get the output</p>
<p>&#x2F;&#x2F;index.Xml</p>
<p>&lt;Alloy&gt;</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"win"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">Menu</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">MenuItem</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"item1"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Expand"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"expand"</span> <span class="hljs-attribute">showAsAction</span>=<span class="hljs-value">"Titanium.Android.SHOW_AS_ACTION_IF_ROOM"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">MenuItem</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"item2"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Collapse"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"collapse"</span> <span class="hljs-attribute">showAsAction</span>=<span class="hljs-value">"Titanium.Android.SHOW_AS_ACTION_IF_ROOM"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-title">MenuItem</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"item3"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Alt Text"</span> <span class="hljs-attribute">showAsAction</span>=<span class="hljs-value">"Titanium.Android.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW"</span> <span class="hljs-attribute">onExpand</span>=<span class="hljs-value">"report"</span> <span class="hljs-attribute">onCollapse</span>=<span class="hljs-value">"report"</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">ActionView</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">layout</span>=<span class="hljs-value">"horizontal"</span>&gt;</span>

                    <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">left</span>=<span class="hljs-value">"0"</span>&gt;</span>Search<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>

                    <span class="hljs-tag">&lt;<span class="hljs-title">TextField</span> <span class="hljs-attribute">right</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">hintText</span>=<span class="hljs-value">"Type Something"</span>/&gt;</span>

                <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>

            <span class="hljs-tag">&lt;/<span class="hljs-title">ActionView</span>&gt;</span>

        <span class="hljs-tag">&lt;/<span class="hljs-title">MenuItem</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-title">Menu</span>&gt;</span>            

<span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
</code></pre><p>&lt;&#x2F;Alloy&gt;</p>
<p>&#x2F;&#x2F; code of  index .js    </p>
<p>function expand (e) {</p>
<pre><code class="hljs"><span class="hljs-variable">$.</span>item3.expandActionView();
</code></pre><p>};</p>
<p>function collapse(e) {</p>
<pre><code class="hljs"><span class="hljs-variable">$.</span>item3.collapseActionView();
</code></pre><p>}</p>
<p>function report(e) {</p>
<pre><code class="hljs"><span class="hljs-constant">Ti</span>.<span class="hljs-constant">API</span>.info(e.<span class="hljs-keyword">type</span>);

<span class="hljs-constant">Ti</span>.<span class="hljs-constant">API</span>.info(<span class="hljs-variable">$.</span>item3.actionViewExpanded);
</code></pre><p>}</p>
<p>$.win.open();</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 28th 2015, 10:42:06 am">July 28th 2015</span>
								by <span class='authorname'>Rajaneesh Singh</span><br>
								<a class="icon-bg icon-link" href="question/116867/this-is-a-solution-to-your-memory-woes#answer-287849" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
