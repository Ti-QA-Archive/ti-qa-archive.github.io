<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Window don&#39;t close Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Window don&#39;t close</h1>
		</header>
		<section>
			<p>I am making an iPhone app with a facebook like slide navigation, which is working just fine. In addition I have 3 buttons on the top bar where I need different overlay windows for each button - first tap opens the overlay and second tap close the window again. Cant&#39;t get the closing part toe work. My code looks like this:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> modalViewActive = <span class="hljs-literal">false</span>;

<span class="hljs-comment">//some code</span>

$.scan.addEventListener(<span class="hljs-string">'singletap'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
<span class="hljs-keyword">var</span> modalwin = Ti.UI.createWindow({
        borderColor : <span class="hljs-string">'#A5A5A5'</span>,
        borderRadius : <span class="hljs-number">4</span>,
        borderWidth : <span class="hljs-number">1</span>,
        width : <span class="hljs-number">308</span>,
        height : <span class="hljs-number">406</span>,
        bottom: <span class="hljs-number">1</span>
    });

<span class="hljs-comment">//Then all the action and content in the window - shows fine!</span>

<span class="hljs-keyword">if</span> (!modalViewActive) {
modalwin.open({
        modal:<span class="hljs-literal">false</span>,
        modalTransitionStyle: Ti.UI.iPhone.MODAL_TRANSITION_STYLE_COVER_VERTICAL,
        modalStyle: Ti.UI.iPhone.MODAL_PRESENTATION_PAGESHEET
        });

    modalViewActive = <span class="hljs-literal">true</span>;
} <span class="hljs-keyword">else</span> {
    modalwin.close();
    modalViewActive = <span class="hljs-literal">false</span>;
}
})();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 19th 2013, 1:30:03 pm">April 19th 2013</span>
				by <span class='authorname'>Troels Lange Andersen</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>close</span></li>
					
						<li><span class='tagname'>window</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>When I tap the button the second time, nothing happens it does not close.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 19th 2013, 1:32:10 pm">April 19th 2013</span>
								by <span class='authorname'>Troels Lange Andersen</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-261118">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>That&#39;s because on each tap you get a new window created.<br>The first time, the window opens. the next time you create a new window (without even opening it ) and you close it, so you see nothing.</p>
<p>you can try doing it this way :</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> modalViewActive = <span class="hljs-literal">false</span>;
 <span class="hljs-keyword">var</span> modalwin ;
<span class="hljs-comment">//some code</span>

$.scan.addEventListener(<span class="hljs-string">'singletap'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
<span class="hljs-keyword">if</span> (!modalViewActive)  {
    modalwin = Ti.UI.createWindow({
        borderColor : <span class="hljs-string">'#A5A5A5'</span>,
        borderRadius : <span class="hljs-number">4</span>,
        borderWidth : <span class="hljs-number">1</span>,
        width : <span class="hljs-number">308</span>,
        height : <span class="hljs-number">406</span>,
        bottom: <span class="hljs-number">1</span>
    });
} 

<span class="hljs-keyword">if</span> (!modalViewActive) {
modalwin.open({
        modal:<span class="hljs-literal">false</span>,
        modalTransitionStyle: Ti.UI.iPhone.MODAL_TRANSITION_STYLE_COVER_VERTICAL,
        modalStyle: Ti.UI.iPhone.MODAL_PRESENTATION_PAGESHEET
        });

    modalViewActive = <span class="hljs-literal">true</span>;
} <span class="hljs-keyword">else</span> {
    modalwin.close();
    modalViewActive = <span class="hljs-literal">false</span>;
}
})();
</code></pre><p>I didn&#39;t test it but you can follow the logic and fix it if needed.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 19th 2013, 1:42:49 pm">April 19th 2013</span>
								by <span class='authorname'>Hani Hamadeh</span><br>
								<a class="icon-bg icon-link" href="../../question/151244/window-dont-close.html#answer-261118" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Troels,</p>
<p>Let us if thiss work for you. You can put your comments if your require still more or mark this as best answer and lock the ticket, so anyone visiting this issues knows, ticket has been resolved.</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 12:11:16 am">April 20th 2013</span>
											by <span class='authorname'>Kapil Maheshwari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi<br>First of all thanks for very responsive help!<br>I can follow the logic - adding the if around the creation of modalwin, was right before my eyes :-) but thanks for showing. </p>
<p>I am using the above logic, but still facing some problems.</p>
<p>When I tap the button the first time the overlay window opens fine.</p>
<p>When I tap the button the second time I get to the closing part of the code, and now without opening new windows, but I get an error of undefined object at <code>modalwin.close();</code>. I have tried placing the <code>var modalwin</code> differently, but it does not change anything.</p>
<p>Any ideas as to what can solve the issue?</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 6:14:02 am">April 20th 2013</span>
											by <span class='authorname'>Troels Lange Andersen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The modalwin variable should be visible to both functions so I suspect the problem is related to a different part of your code that&#39;s not here. anyway you can try creating the window outside the event listener to see if it changes anything..</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 6:20:49 am">April 20th 2013</span>
											by <span class='authorname'>Hani Hamadeh</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That did the trick!!<br>Thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2013, 6:28:08 am">April 20th 2013</span>
											by <span class='authorname'>Troels Lange Andersen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
