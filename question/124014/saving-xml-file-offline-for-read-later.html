<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Saving XML file offline for read later, Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Saving XML file offline for read later,</h1>
		</header>
		<section>
			<p>Okay, basically, in my app, there&#39;s a rss type feed, for my website, and iwould like to be able to download the XML file of the latest posts, and then if the user is accessing the app offline, she&#x2F;he could still read the rss feed, but i would like to have it so that even if the App is terminated via multitasking and offline, that it stilll reads from the xml, just like the Engadget app does ( i dont know how they do that,). anyway, im haveing problems achiving this, could someone please look through my code, and help me, please (btw i am getting parse error atm, line 16, dunno why :S)<br>anyways, here&#39;s the code;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;
<span class="hljs-keyword">var</span> f = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,<span class="hljs-string">'data.xml'</span>);
<span class="hljs-comment">// create table view data object</span>
data = [];
 <span class="hljs-keyword">if</span> (Titanium.Network.online == <span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
xhr.open(<span class="hljs-string">"GET"</span>,<span class="hljs-string">"http://www.______.com/feed/?filename=data.xml/"</span>);
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">try</span>
    {
        {

     f.write(<span class="hljs-keyword">this</span>.responseData);
          getXMLdata(f); 
          <span class="hljs-keyword">else</span>{ 
<span class="hljs-keyword">if</span>(f.exists()){
          getXMLdata(f); 
}
<span class="hljs-keyword">else</span>{
    Titanium.UI.createAlertDialog({ 
                    title:<span class="hljs-string">'Network'</span>,
                    message: <span class="hljs-string">'Your device is not connected to the internet.'</span>
                }).show();
}    
        <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
        <span class="hljs-keyword">var</span> items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++)
        {
            <span class="hljs-keyword">var</span> item = items.item(c);
            <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
            <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({hasChild:<span class="hljs-literal">true</span>, height:<span class="hljs-number">60</span>});
            <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
                text:title,
                left:<span class="hljs-number">12</span>,
                top:<span class="hljs-number">5</span>,
                bottom:<span class="hljs-number">5</span>,
                right:<span class="hljs-number">12</span>             
            });
            row.add(label);

            data[x++] = row;
            row.url = item.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).text;
        }

        <span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({data:data});
        Titanium.UI.currentWindow.add(tableview);
        tableview.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
        </span>{
            <span class="hljs-keyword">var</span> w = Ti.UI.createWindow({title:doctitle, barColor:<span class="hljs-string">"#660066"</span>});
            <span class="hljs-keyword">var</span> wb = Ti.UI.createWebView({url:e.row.url});
            w.add(wb);

            <span class="hljs-keyword">var</span> b = Titanium.UI.createButton({
                title:<span class="hljs-string">'Close'</span>,
                style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN
            });
            w.setLeftNavButton(b);
            b.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
            </span>{
                w.close();
            });
            w.open({modal:<span class="hljs-literal">true</span>});

        });

    <span class="hljs-keyword">catch</span>(E)


};
xhr.send();
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getXMLdata</span><span class="hljs-params">(file)</span></span>{
<span class="hljs-keyword">if</span>(file.exists()){
   <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
        <span class="hljs-keyword">var</span> items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++)
        {
            <span class="hljs-keyword">var</span> item = items.item(c);
            <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
            <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({hasChild:<span class="hljs-literal">true</span>, height:<span class="hljs-number">60</span>});
            <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
                text:title,
                left:<span class="hljs-number">12</span>,
                top:<span class="hljs-number">5</span>,
                bottom:<span class="hljs-number">5</span>,
                right:<span class="hljs-number">12</span>             
            });
            row.add(label);

            data[x++] = row;
            row.url = item.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).text;
        }


<span class="hljs-keyword">var</span> refreshBtn = Titanium.UI.createButton ({
    systemButton: Ti.UI.iPhone.SystemButton.REFRESH
});
refreshBtn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    xhr.send();<span class="hljs-keyword">if</span>(Titanium.Network.networkType == Titanium.Network.NETWORK_NONE){
     <span class="hljs-keyword">var</span> alertDialog = Titanium.UI.createAlertDialog({
              title: <span class="hljs-string">'Warning'</span>,
              message: <span class="hljs-string">'You are not connected to the Internet.'</span>,
              buttonNames: [<span class="hljs-string">'OK'</span>]
            });
            alertDialog.show();

}
});
win.setRightNavButton(refreshBtn);
</code></pre><p>sorry, i am completely new to Titanium, which is wonderful for developing apps lol :) and is this possible with a twitter feed,using json? or do i have to go to xml for my twitter feed? :)<br>Many Many Thanks :)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 9th 2011, 9:49:32 pm">August 9th 2011</span>
				by <span class='authorname'>Steve Thorne</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>code</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>offline</span></li>
					
						<li><span class='tagname'>xhr</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-215987">
				
						<section>
							<p>Looks like you have a stray else at line 16</p>
<pre><code class="hljs">    getXMLdata(f); 
          <span class="hljs-keyword">else</span>{
</code></pre><p>that shouldn&#39;t be there. Try removing that and getting your code compiling without parse errors and see if you still have troubles.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 9th 2011, 9:53:16 pm">August 9th 2011</span>
								by <span class='authorname'>Martin Slater</span><br>
								<a class="icon-bg icon-link" href="question/124014/saving-xml-file-offline-for-read-later#answer-215987" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>okay, sorry, very tired lol its 1 am :) any way, ive killed all the parse errors, it builds and now i get just a  empty background,</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;
<span class="hljs-keyword">var</span> f = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,<span class="hljs-string">'data.xml'</span>);
<span class="hljs-comment">// create table view data object</span>
data = [];
 <span class="hljs-keyword">if</span> (Titanium.Network.online == <span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
xhr.open(<span class="hljs-string">"GET"</span>,<span class="hljs-string">"http://www.bella143.com/feed/?filename=data.xml/"</span>);
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">try</span>
    {


     f.write(<span class="hljs-keyword">this</span>.responseData);
          getXMLdata(f); 

<span class="hljs-keyword">if</span>(f.exists()){
          getXMLdata(f); 
}
<span class="hljs-keyword">else</span>{
    Titanium.UI.createAlertDialog({ 
                    title:<span class="hljs-string">'Network'</span>,
                    message: <span class="hljs-string">'Your device is not connected to the internet.'</span>
                }).show();
}    
        <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
        <span class="hljs-keyword">var</span> items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++)
        {
            <span class="hljs-keyword">var</span> item = items.item(c);
            <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
            <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({hasChild:<span class="hljs-literal">true</span>, height:<span class="hljs-number">60</span>});
            <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
                text:title,
                left:<span class="hljs-number">12</span>,
                top:<span class="hljs-number">5</span>,
                bottom:<span class="hljs-number">5</span>,
                right:<span class="hljs-number">12</span>             
            });
            row.add(label);

            data[x++] = row;
            row.url = item.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).text;
        }

        <span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({data:data});
        Titanium.UI.currentWindow.add(tableview);
        tableview.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
        </span>{
            <span class="hljs-keyword">var</span> w = Ti.UI.createWindow({title:doctitle, barColor:<span class="hljs-string">"#660066"</span>});
            <span class="hljs-keyword">var</span> wb = Ti.UI.createWebView({url:e.row.url});
            w.add(wb);

            <span class="hljs-keyword">var</span> b = Titanium.UI.createButton({
                title:<span class="hljs-string">'Close'</span>,
                style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN
            });
            w.setLeftNavButton(b);
            b.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
            </span>{
                w.close();
            });
            w.open({modal:<span class="hljs-literal">true</span>});

        });
xhr.send();
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getXMLdata</span><span class="hljs-params">(file)</span></span>{
<span class="hljs-keyword">if</span>(file.exists()){
   <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
        <span class="hljs-keyword">var</span> items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++)
        {
            <span class="hljs-keyword">var</span> item = items.item(c);
            <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
            <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({hasChild:<span class="hljs-literal">true</span>, height:<span class="hljs-number">60</span>});
            <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
                text:title,
                left:<span class="hljs-number">12</span>,
                top:<span class="hljs-number">5</span>,
                bottom:<span class="hljs-number">5</span>,
                right:<span class="hljs-number">12</span>             
            });
            row.add(label);

            data[x++] = row;
            row.url = item.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).text
</code></pre><p>Many Thank Yous</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 9th 2011, 10:10:42 pm">August 9th 2011</span>
											by <span class='authorname'>Steve Thorne</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Looks like you are never reading the file contents, here </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
</code></pre><p>you are handling it as if you got a response from the server where you need to read the contents of the file and parse the xml</p>
<pre><code class="hljs">var <span class="hljs-type">text</span> = f.<span class="hljs-command">read</span>().<span class="hljs-type">text</span>;
var doc = Ti.XML.parseString(<span class="hljs-type">text</span>);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 9th 2011, 10:37:45 pm">August 9th 2011</span>
											by <span class='authorname'>Martin Slater</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>okay, it was working before tho :S anyway, </p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> text</span> = f.read().text;
        <span class="hljs-variable"><span class="hljs-keyword">var</span> doc</span> = Ti.XML.parseString(text);
        <span class="hljs-variable"><span class="hljs-keyword">var</span> items</span> = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-variable"><span class="hljs-keyword">var</span> x</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable"><span class="hljs-keyword">var</span> doctitle</span> = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
        <span class="hljs-keyword">for</span> (<span class="hljs-variable"><span class="hljs-keyword">var</span> c</span>=<span class="hljs-number">0</span>;c<span class="hljs-type">&lt;items.length;c++)</span>
</code></pre><p> thanks the new code, hows that? :) but, now, i have one error in particular, &#39;try&#39; without &#39;catch&#39; or &#39;finally&#39;,which i was wondering whether you knew anything about it, ive never seen it before,and dont understand it lol, and just putting in a catch(E); as was in the original piece of code i hade didnt help -.-, anyways, thanks :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2011, 12:08:51 am">August 10th 2011</span>
											by <span class='authorname'>Steve Thorne</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Looks like your brackets are all over the place. Formatting your code neatly will show clearly where they are wrong, here it is laid out nicer with the immediate problems fixed, whether it does what you want or not though is another thing:)</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;
<span class="hljs-keyword">var</span> f = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,<span class="hljs-string">'data.xml'</span>);
<span class="hljs-comment">// create table view data object</span>
data = [];
<span class="hljs-keyword">if</span> (Titanium.Network.online == <span class="hljs-literal">true</span>) 
{
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
    xhr.open(<span class="hljs-string">"GET"</span>,<span class="hljs-string">"http://www.______.com/feed/?filename=data.xml/"</span>);
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
    </span>{
             f.write(<span class="hljs-keyword">this</span>.responseData);
              getXMLdata(f);
    };
} 
<span class="hljs-keyword">else</span>
{ 
    <span class="hljs-keyword">if</span>(f.exists())
    {
          getXMLdata(f); 
    }
    <span class="hljs-keyword">else</span>
    {
        Titanium.UI.createAlertDialog({ 
                    title:<span class="hljs-string">'Network'</span>,
                    message: <span class="hljs-string">'Your device is not connected to the internet.'</span>
        }).show();
    }   
    <span class="hljs-keyword">var</span> text = f.read().text;
    <span class="hljs-keyword">var</span> doc = Ti.XML.parseString(text);
    <span class="hljs-keyword">var</span> items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
    <span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++)
    {
        <span class="hljs-keyword">var</span> item = items.item(c);
        <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
        <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({hasChild:<span class="hljs-literal">true</span>, height:<span class="hljs-number">60</span>});
        <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
            text:title,
            left:<span class="hljs-number">12</span>,
            top:<span class="hljs-number">5</span>,
            bottom:<span class="hljs-number">5</span>,
            right:<span class="hljs-number">12</span>             
        });
        row.add(label);

        data[x++] = row;
        row.url = item.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).text;
    }

    <span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({data:data});
    Titanium.UI.currentWindow.add(tableview);
    tableview.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
    </span>{
        <span class="hljs-keyword">var</span> w = Ti.UI.createWindow({title:doctitle, barColor:<span class="hljs-string">"#660066"</span>});
        <span class="hljs-keyword">var</span> wb = Ti.UI.createWebView({url:e.row.url});
        w.add(wb);

        <span class="hljs-keyword">var</span> b = Titanium.UI.createButton({
            title:<span class="hljs-string">'Close'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN
        });
        w.setLeftNavButton(b);
        b.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
        </span>{
            w.close();
        });
        w.open({modal:<span class="hljs-literal">true</span>});

    });
};
xhr.send();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getXMLdata</span><span class="hljs-params">(file)</span>
</span>{
    <span class="hljs-keyword">if</span>(file.exists())
    {
           <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
        <span class="hljs-keyword">var</span> items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++)
        {
            <span class="hljs-keyword">var</span> item = items.item(c);
            <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
            <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({hasChild:<span class="hljs-literal">true</span>, height:<span class="hljs-number">60</span>});
            <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
                text:title,
                left:<span class="hljs-number">12</span>,
                top:<span class="hljs-number">5</span>,
                bottom:<span class="hljs-number">5</span>,
                right:<span class="hljs-number">12</span>             
            });
            row.add(label);

            data[x++] = row;
            row.url = item.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).text;
        }
    }
}

<span class="hljs-keyword">var</span> refreshBtn = Titanium.UI.createButton ({
    systemButton: Ti.UI.iPhone.SystemButton.REFRESH
});
refreshBtn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    xhr.send();<span class="hljs-keyword">if</span>(Titanium.Network.networkType == Titanium.Network.NETWORK_NONE){
     <span class="hljs-keyword">var</span> alertDialog = Titanium.UI.createAlertDialog({
              title: <span class="hljs-string">'Warning'</span>,
              message: <span class="hljs-string">'You are not connected to the Internet.'</span>,
              buttonNames: [<span class="hljs-string">'OK'</span>]
            });
            alertDialog.show();

}
});
win.setRightNavButton(refreshBtn);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 10th 2011, 12:40:56 am">August 10th 2011</span>
											by <span class='authorname'>Martin Slater</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank You, looks much neater, thanks :) still doesnt show my news feed tho :( but thank you anyways :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2011, 10:49:20 am">August 10th 2011</span>
											by <span class='authorname'>Steve Thorne</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No problem, the point I was making is that by properly laying out your code it makes it simpler to find syntax errors that were in the original. Once you have code you can compile cleanly you can then start debugging the issues. I recommend using Titanium studio to step through your code so you can see what is happening where and find any logic bugs you have.</p>
<p>(Quick note though, it looks like you aren&#39;t adding the rows you fill out to the table view..)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2011, 8:55:36 pm">August 10th 2011</span>
											by <span class='authorname'>Martin Slater</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>yep, i understand, i agree lol and okay, thanks ill check it out :)<br>and thing is, if i remove all the added code, and just have the origional</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;
<span class="hljs-comment">// create table view data object</span>
data = [];

<span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
xhr.open(<span class="hljs-string">"GET"</span>,<span class="hljs-string">"http://www.____.com/feed/?filename=data.xml/"</span>);
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">try</span>
    {

        <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.responseXML.documentElement;
        <span class="hljs-keyword">var</span> items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++)
        {
            <span class="hljs-keyword">var</span> item = items.item(c);
            <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
            <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({hasChild:<span class="hljs-literal">true</span>, height:<span class="hljs-number">60</span>});
            <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
                text:title,
                left:<span class="hljs-number">12</span>,
                top:<span class="hljs-number">5</span>,
                bottom:<span class="hljs-number">5</span>,
                right:<span class="hljs-number">12</span>             
            });
            row.add(label);

            data[x++] = row;
            row.url = item.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).text;
        }

        <span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({data:data});
        Titanium.UI.currentWindow.add(tableview);
        tableview.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
        </span>{
            <span class="hljs-keyword">var</span> w = Ti.UI.createWindow({title:doctitle, barColor:<span class="hljs-string">"#660066"</span>});
            <span class="hljs-keyword">var</span> wb = Ti.UI.createWebView({url:e.row.url});
            w.add(wb);

            <span class="hljs-keyword">var</span> b = Titanium.UI.createButton({
                title:<span class="hljs-string">'Close'</span>,
                style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN
            });
            w.setLeftNavButton(b);
            b.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
            </span>{
                w.close();
            });
            w.open({modal:<span class="hljs-literal">true</span>});
        });
    }
    <span class="hljs-keyword">catch</span>(E)
    {
        alert(E);
    }
};
xhr.send();

<span class="hljs-keyword">var</span> refreshBtn = Titanium.UI.createButton ({
    systemButton: Ti.UI.iPhone.SystemButton.REFRESH
});
refreshBtn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    xhr.send();<span class="hljs-keyword">if</span>(Titanium.Network.networkType == Titanium.Network.NETWORK_NONE){
     <span class="hljs-keyword">var</span> alertDialog = Titanium.UI.createAlertDialog({
              title: <span class="hljs-string">'Warning'</span>,
              message: <span class="hljs-string">'You are not connected to the Internet.'</span>,
              buttonNames: [<span class="hljs-string">'OK'</span>]
            });
            alertDialog.show();

}
});
win.setRightNavButton(refreshBtn);
</code></pre><p>it will actually display my post titles in a table view and basically do most of what i want lol :P so yeh ill check out titanium studio, thanks for the help tho, very much appreicated :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2011, 9:02:50 pm">August 10th 2011</span>
											by <span class='authorname'>Steve Thorne</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK, had another poke as I&#39;m in a good mood :p  Here&#39;s your code that may work (untested but more along the lines of what you want). Compare with your original. </p>
<p>Your basic logic is</p>
<pre><code class="hljs">if(have_net)
{
    read_from_net<span class="hljs-comment">;</span>
    write_to_file<span class="hljs-comment">;</span>
    process_file<span class="hljs-comment">;</span>
    show_table<span class="hljs-comment">;</span>
}
else
{
    if(have_file)
    {
        process_file<span class="hljs-comment">;</span>
        show_table
    }
}
</code></pre><p>code is</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;
<span class="hljs-keyword">var</span> f = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,<span class="hljs-string">'data.xml'</span>);
<span class="hljs-comment">// create table view data object</span>
data = [];
<span class="hljs-keyword">if</span> (Titanium.Network.online == <span class="hljs-literal">true</span>) 
{
    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
    xhr.open(<span class="hljs-string">"GET"</span>,<span class="hljs-string">"http://www.______.com/feed/?filename=data.xml/"</span>);
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
    </span>{
            f.write(<span class="hljs-keyword">this</span>.responseData);
            getXMLdata(f);
            showTable();
    };
    xhr.send();
} 
<span class="hljs-keyword">else</span>
{ 
    <span class="hljs-keyword">if</span>(f.exists())
    {
            getXMLdata(f); 
            showTable();
    }
    <span class="hljs-keyword">else</span>
    {
        Titanium.UI.createAlertDialog({ 
                    title:<span class="hljs-string">'Network'</span>,
                    message: <span class="hljs-string">'Your device is not connected to the internet.'</span>
        }).show();
    }   
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showTable</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({data:data});
    Titanium.UI.currentWindow.add(tableview);
    tableview.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
    </span>{
        <span class="hljs-keyword">var</span> w = Ti.UI.createWindow({title:doctitle, barColor:<span class="hljs-string">"#660066"</span>});
        <span class="hljs-keyword">var</span> wb = Ti.UI.createWebView({url:e.row.url});
        w.add(wb);

        <span class="hljs-keyword">var</span> b = Titanium.UI.createButton({
            title:<span class="hljs-string">'Close'</span>,
            style:Titanium.UI.iPhone.SystemButtonStyle.PLAIN
        });
        w.setLeftNavButton(b);
        b.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
        </span>{
            w.close();
        });
        w.open({modal:<span class="hljs-literal">true</span>});

    });
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getXMLdata</span><span class="hljs-params">(file)</span>
</span>{
    <span class="hljs-keyword">if</span>(file.exists())
    {
        <span class="hljs-keyword">var</span> text = file.read().text;
        <span class="hljs-keyword">var</span> doc = Ti.XML.parseString(text);
        <span class="hljs-keyword">var</span> items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);
        <span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> doctitle = doc.evaluate(<span class="hljs-string">"//channel/title/text()"</span>).item(<span class="hljs-number">0</span>).nodeValue;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;items.length;c++)
        {
            <span class="hljs-keyword">var</span> item = items.item(c);
            <span class="hljs-keyword">var</span> title = item.getElementsByTagName(<span class="hljs-string">"title"</span>).item(<span class="hljs-number">0</span>).text;
            <span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({hasChild:<span class="hljs-literal">true</span>, height:<span class="hljs-number">60</span>});
            <span class="hljs-keyword">var</span> label = Ti.UI.createLabel({
                text:title,
                left:<span class="hljs-number">12</span>,
                top:<span class="hljs-number">5</span>,
                bottom:<span class="hljs-number">5</span>,
                right:<span class="hljs-number">12</span>             
            });
            row.add(label);

            data[x++] = row;
            row.url = item.getElementsByTagName(<span class="hljs-string">"link"</span>).item(<span class="hljs-number">0</span>).text;
        }
    }
}

<span class="hljs-keyword">var</span> refreshBtn = Titanium.UI.createButton ({
    systemButton: Ti.UI.iPhone.SystemButton.REFRESH
});
refreshBtn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    xhr.send();<span class="hljs-keyword">if</span>(Titanium.Network.networkType == Titanium.Network.NETWORK_NONE){
     <span class="hljs-keyword">var</span> alertDialog = Titanium.UI.createAlertDialog({
              title: <span class="hljs-string">'Warning'</span>,
              message: <span class="hljs-string">'You are not connected to the Internet.'</span>,
              buttonNames: [<span class="hljs-string">'OK'</span>]
            });
            alertDialog.show();

}
});
win.setRightNavButton(refreshBtn);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 10th 2011, 9:20:48 pm">August 10th 2011</span>
											by <span class='authorname'>Martin Slater</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank You So Much, it seems to be working, except the webview, im gonna test on iPhone inna sec but ill sort that out :), i am very very grateful to you :) thank you :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2011, 9:32:16 pm">August 10th 2011</span>
											by <span class='authorname'>Steve Thorne</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No problem mate :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2011, 9:56:56 pm">August 10th 2011</span>
											by <span class='authorname'>Martin Slater</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
