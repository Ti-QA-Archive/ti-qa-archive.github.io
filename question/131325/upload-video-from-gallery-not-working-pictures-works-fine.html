<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Upload video from gallery not working. Pictures works fine » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Upload video from gallery not working. Pictures works fine</h1>
		</header>
		<section>
			<p>In my app, I have a section where users can upload pictures or video taken on the spot, or choose from the photo gallery.</p>
<p>I can upload the pictures and videos taken at the time, and upload pictures from the photo gallery no problem, but with the video, it doesnt get sent to the server (doing a var_dump on my PHP script shows its not there).</p>
<p>I&#39;m using the event.media, just like I am with the other 3 options…is there something else for photogallery videos?</p>
<pre><code class="hljs">    <span class="hljs-keyword">var</span> eventData=event.media; <span class="hljs-comment">//chose from the gallery, same as the other</span>
code
code
code

<span class="hljs-comment">//setting up the data to send</span>
<span class="hljs-keyword">var</span> payload = { 
                <span class="hljs-string">"media"</span>: eventData,
                <span class="hljs-string">"name"</span>:scramble+<span class="hljs-string">'.'</span>+extension,
                <span class="hljs-string">"thumb"</span>:thumb,
                <span class="hljs-string">"thumbnail"</span>:thumbnail,
                <span class="hljs-string">"extension"</span>:extension,
                <span class="hljs-string">"eventid"</span>:win.eventid,
                <span class="hljs-string">"caption"</span>:caption,
                <span class="hljs-string">"userid"</span>:Titanium.App.Properties.getString(<span class="hljs-string">"userid"</span>),
                <span class="hljs-string">"firstname"</span>:Titanium.App.Properties.getString(<span class="hljs-string">"firstname"</span>),
                <span class="hljs-string">"lastname"</span>:Titanium.App.Properties.getString(<span class="hljs-string">"lastname"</span>)


                };
                  <span class="hljs-keyword">var</span> host=Titanium.App.Properties.getString(<span class="hljs-string">"url"</span>)+<span class="hljs-string">'mobileimageadd.php'</span>;

code
code

<span class="hljs-comment">//xhr section to send it.  Doing a var_dump shows the other information being sent, just the "media" field is blank.  Using the same code for when I take a video in-app and upload works fine.</span>

<span class="hljs-keyword">var</span> xhrUpload = Ti.Network.createHTTPClient();
             xhrUpload.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/x-www-form-urlencoded"</span>); 
              xhrUpload.onsendstream = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
        </span>{
            ind.value = e.progress;
            <span class="hljs-comment">//alert(e.progress);</span>
            Ti.API.info(<span class="hljs-string">'ONSENDSTREAM - PROGRESS: '</span> + e.progress);
        }; 
             xhrUpload.open(<span class="hljs-string">"POST"</span>,host);
             xhrUpload.send(payload); 
             xhrUpload.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
                 Ti.API.info(<span class="hljs-keyword">this</span>.responseText);
                 <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.responseText!=<span class="hljs-string">'Upload Complete'</span>)
                 {
                     Ti.API.info(<span class="hljs-keyword">this</span>.responseText);
                    alert(<span class="hljs-keyword">this</span>.responseText);
                }
                <span class="hljs-comment">//alert(this.responseText);</span>
                setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
                       win.setTitleControl();

                    }, <span class="hljs-number">2000</span>);
                    loadDetails();
                    }<span class="hljs-comment">//end xhr</span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 29th 2012, 3:09:48 pm">January 29th 2012</span>
				by <span class='authorname'>Josh Lewis</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>photogallery</span></li>
					
						<li><span class='tagname'>upload</span></li>
					
						<li><span class='tagname'>video</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
