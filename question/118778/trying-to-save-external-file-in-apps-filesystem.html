<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Trying to save external file in app&#39;s filesystem » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Trying to save external file in app&#39;s filesystem</h1>
		</header>
		<section>
			<p>My ipad app records and plays back audio recorded in the app. Once audio is recorded it can be played back, saved to the FileSystem, and played back from the FileSystem. All is well.</p>
<p>My problem is saving a .wav file opened from Apple Mail. My app can open, play and save the .wav just fine(at least w&#x2F;o errors). But when I select it again from the FileSystem it won&#39;t play, so i&#39;m thinking i&#39;m saving incorrectly.</p>
<p>The only difference (I&#39;m aware of) b&#x2F;n saving internal and external audio is that i&#39;m saving an internal <code>[Object TiFile]</code>(that&#39;s how Ti sees the object being saved) and the external file is just the .wav, <code>filename.wav</code>.</p>
<p>The code below is what I&#39;m using to save both internal and external audio. Pretty straightforward. Is there any reason why this wouldn&#39;t save the .wav file correctly?</p>
<pre><code class="hljs">rec_file = Ti.Filesystem.getFile(my_parent, dest_dir + title + <span class="hljs-string">'.wav'</span>);
<span class="hljs-keyword">if</span>( rec_file.<span class="hljs-keyword">write</span>(<span class="hljs-keyword">file</span>) )
{
  alert(<span class="hljs-string">'file saved.'</span>);
}
</code></pre><p>Thx!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 20th 2011, 4:39:36 pm">April 20th 2011</span>
				by <span class='authorname'>Kelly Redd</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>filesystem</span></li>
					
						<li><span class='tagname'>ipad</span></li>
					
						<li><span class='tagname'>record</span></li>
					
						<li><span class='tagname'>wave</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>can you post all of the save code in one place instead of just snippets so someone can download a complete project to try and reproduce the error.</p>
<p>people are willing to help, but the easier you make it for them, the better you results might be</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 5th 2011, 2:28:14 am">May 5th 2011</span>
								by <span class='authorname'>Aaron Saunders</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>i totally agree Aaron, the more code the better, but was in fact, trying to make it easy for ppl by keeping it more abstract and deal with the idea of saving the file in the given context.  not sure how to post the entire project but i&#39;ll try to combine all the necessary files and get a working single js file together. thx!</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 5th 2011, 2:37:55 pm">May 5th 2011</span>
								by <span class='authorname'>Kelly Redd</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>i posted an answer below with my code and instructions for reproducing the error. thx!</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 6th 2011, 1:29:09 am">May 6th 2011</span>
								by <span class='authorname'>Kelly Redd</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-208843">
				
						<section>
							<p>found out i&#39;m saving a string instead of a sound object. <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;120349&#x2F;trying-to-save-external-file-in-apps-filesystem--part-ii-">started a new thread here</a>.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 30th 2011, 7:31:29 pm">May 30th 2011</span>
								by <span class='authorname'>Kelly Redd</span><br>
								<a class="icon-bg icon-link" href="question/118778/trying-to-save-external-file-in-apps-filesystem.html#answer-208843" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-206590">
				
						<section>
							<p>Whats your save dir?<br>Do you save in Documents&#x2F;?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 20th 2011, 4:43:22 pm">April 20th 2011</span>
								by <span class='authorname'>Alexander Bauer</span><br>
								<a class="icon-bg icon-link" href="question/118778/trying-to-save-external-file-in-apps-filesystem.html#answer-206590" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Yes, I create a &#39;Docs&#39; folder in Documents&#x2F; for the user and save everything there.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> createRootDir = Ti.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,<span class="hljs-string">'Docs'</span>);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="April 20th 2011, 4:47:50 pm">April 20th 2011</span>
											by <span class='authorname'>Kelly Redd</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Also, on playback from the FileSystem it returns [object TiMediaSound] for both internal and external files…if that helps.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 20th 2011, 4:54:16 pm">April 20th 2011</span>
											by <span class='authorname'>Kelly Redd</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207011">
				
						<section>
							<p>Bump! Anyone?? my app is collecting dust b&#x2F;c of this!!!! ;)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 29th 2011, 1:02:30 am">April 29th 2011</span>
								by <span class='authorname'>Kelly Redd</span><br>
								<a class="icon-bg icon-link" href="question/118778/trying-to-save-external-file-in-apps-filesystem.html#answer-207011" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207358">
				
						<section>
							<p>Here is a link to an app.js and Info.plist file in one pastie file <a href="http:&#x2F;&#x2F;pastie.org&#x2F;private&#x2F;obqagww43u8yvclvu1phlw">here</a>. Info.plist goes on the root and app.js in the Resources dir. Should be everything you&#39;ll need. I promise reproducing the error isn&#39;t as painful as the huge chunk of instructions makes it look!!!</p>
<p><strong>To reproduce the error</strong><br>Record 5-10 secs of audio and save. it will appear in the list on the left. once you see it tap &#39;Email Songs&#39; button in top right corner of tableview and a window will slide down. press &#39;enable managing&#39; and select the file you want to email from the list on the left. the number of selected files should change based on selection. once 1 or more files are selected tap the &#39;email file&#39; button and you should get a iOS email dialogue. enter your email address and send.</p>
<p>once email is received, tap and hold the attached file. you should get &quot;Open In…&quot;, select &quot;qa test&quot; and it should automatically switch you to Songwriter and alert saying the external file was saved. you should see it over on the left saved as &quot;new wave file.wav&quot;. select file and it&#39;s title should appear in the player. press play and you should see it gloriously NOT play. after alllll that, it should do absolutely nothing…which is my problem.</p>
<p>Thanks to anyone who gives this a shot. i know the app doesn&#39;t look too user-friendly but i had to remove all image references and make it beyond bare bones visually and functionally.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 6th 2011, 1:27:53 am">May 6th 2011</span>
								by <span class='authorname'>Kelly Redd</span><br>
								<a class="icon-bg icon-link" href="question/118778/trying-to-save-external-file-in-apps-filesystem.html#answer-207358" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Not seeing the files…</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 6th 2011, 1:32:10 am">May 6th 2011</span>
											by <span class='authorname'>John Welch</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>its the word &quot;here&quot; in the last sentence…http:&#x2F;&#x2F;pastie.org&#x2F;private&#x2F;obqagww43u8yvclvu1phlw</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 6th 2011, 1:47:08 am">May 6th 2011</span>
											by <span class='authorname'>Kelly Redd</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-210800">
				
						<section>
							<p>finally got it working with the gracious help and winning suggestion from <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;devlink&#x2F;profile&#x2F;497971&#x2F;jeff-bonnes">Jeff Bonnes</a>. the solution was to convert the contents of the external file to a blob read it into the filesystem. much thanks, jeff.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 20th 2011, 2:00:52 pm">June 20th 2011</span>
								by <span class='authorname'>Kelly Redd</span><br>
								<a class="icon-bg icon-link" href="question/118778/trying-to-save-external-file-in-apps-filesystem.html#answer-210800" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
