<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Webview interaction » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Webview interaction</h1>
		</header>
		<section>
			<p>We are moving our iphone project into titanium for an app we are soon to publish.</p>
<p>A problem has popped up with extracting data from the webview. The page showing is an external page from our website. For certain links that the user clicks we want the app to perform some particular features.</p>
<p>This worked fine in the native ios environment. However, now with titanium it seems we cannot make the webview catch these clicks… you can&#39;t make remote pages fire events that we can listen for in the app. Nor can be parse the url clicked on a link with the &quot;beforeload&quot; event because that will cause the webpage to show that you clicked… the url in the link is something like &quot;doThisInTheApp&quot; an not an actual url.</p>
<p>I tried the approach by loading the web wiht xhr and showing it local with setHtml, but that will break all links to images and css etc.</p>
<p>How do we do this?</p>
<p>From our external website showing in the webview, cause links clicked to perform action in the app (show views etc).</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 15th 2012, 11:03:15 am">March 15th 2012</span>
				by <span class='authorname'>Emil xxx</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>event</span></li>
					
						<li><span class='tagname'>url</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>7</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>7 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-233424">
				
						<section>
							<p>According to the <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.UI.WebView-object">guide</a>: Scripts downloaded from remote web servers cannot access the Titanium namespace - hence <code>Ti.App.fireEvent</code> wont work. However, you can use the web view evalJS method to execute a JavaScript expression inside the web view, and retrieve the value of an expression.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 15th 2012, 11:51:28 am">March 15th 2012</span>
								by <span class='authorname'>Minh Nguyen</span><br>
								<a class="icon-bg icon-link" href="question/133850/webview-interaction.html#answer-233424" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>For security, there&#39;s no way to interact from remote content in a webview TO the app. But it&#39;s possible with local web content. So try this:</p>
<ul>
<li>Use HTTPClient to load web content - including other resources such as JS&#x2F;CSS&#x2F;Images. The downloaded JS&#x2F;CSS&#x2F;Images should be stored in Filesystem, then you need to change url to those local resources.</li>
</ul>
<p>The web content is now local so you can interact with the app as usual.</p>
<p>Hope this can give you some hints,</p>
<p>Minh</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 15th 2012, 12:17:12 pm">March 15th 2012</span>
											by <span class='authorname'>Minh Nguyen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Could someone try explain how that would make things more secure?</p>
<p>If you download all the stuff from the url, put it into your local folder and then run it anyways, whats the difference? You run the exact same files.</p>
<p>I think hits is a silly addition to the framework. It not anything else, why not let the developer turn OFF this security in the webview?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 15th 2012, 12:21:44 pm">March 15th 2012</span>
											by <span class='authorname'>Emil xxx</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-233423">
				
						<section>
							<p>hi Emil,</p>
<p>you can use <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.UI.WebView.evalJS-method.html">evalJS</a> to run javascript</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 15th 2012, 11:51:27 am">March 15th 2012</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/133850/webview-interaction.html#answer-233423" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>How can i with evalJS find out what link has been clicked in the webview?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 15th 2012, 12:25:17 pm">March 15th 2012</span>
											by <span class='authorname'>Emil xxx</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Emil, you can&#39;t</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 19th 2012, 6:09:23 pm">October 19th 2012</span>
											by <span class='authorname'>Nik Sumeiko</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-233429">
				
						<section>
							<p>Hmm yeah, but that is interacting FROM the app into the view.  I want to interact from the view TO the app. The other way around.</p>
<p>Basically i want this. WHen the user clicks on the link in the webview:<br>a href=openview:blabla</p>
<p>The app will open a new view called blabla.</p>
<p>How do i fix this with evalJS?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 15th 2012, 12:05:21 pm">March 15th 2012</span>
								by <span class='authorname'>Emil xxx</span><br>
								<a class="icon-bg icon-link" href="question/133850/webview-interaction.html#answer-233429" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-233433">
				
						<section>
							<p>The way we did this in the native ios app was by adding some code into the shouldStartLoadWithRequest delegate method. Here we could figure out the url we have clicked and fetch information from that. Then cancel the request so the page does not load.</p>
<p>Seems you can listen for &quot;beforeload&quot; events on the webview in titanium. But it doesn&#39;t actually give you any good idea of what you clicked or any way to cancel the request…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 15th 2012, 12:24:36 pm">March 15th 2012</span>
								by <span class='authorname'>Emil xxx</span><br>
								<a class="icon-bg icon-link" href="question/133850/webview-interaction.html#answer-233433" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-233528">
				
						<section>
							<p>No one have any idea for this?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 16th 2012, 8:36:53 am">March 16th 2012</span>
								by <span class='authorname'>Emil xxx</span><br>
								<a class="icon-bg icon-link" href="question/133850/webview-interaction.html#answer-233528" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-252748">
				
						<section>
							<p>We solved this problem by creating an events system in our code. Basically we&#39;re calling a function in the webview through evalJS every 200ms. In the webview HTML, when they want to wall Ti, they just have to change the content of the variable returned by this function.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 14th 2012, 7:41:19 am">December 14th 2012</span>
								by <span class='authorname'>Fabio Chelly</span><br>
								<a class="icon-bg icon-link" href="question/133850/webview-interaction.html#answer-252748" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-233591">
				
						<section>
							<p>Perhaps this works. I added a script var in the html page (with two methods setVar and getVar) that i want to load. In the &lt;a href&gt; of the link i simply add an onclick=&#39;setVar(5);&#39; and simply reload the page with href=&#39;?&#39;.</p>
<p>I then add an event listener in the app code for &quot;beforeload&quot; event and simply call evalJS(&#39;getVar();&#39;)  Seems then i can get the variable from the url that is clicked before the page is reloaded.</p>
<p>The glitch is the actual page is reloaded… it seems there is no way to stop the load from the &quot;beforeload&quot; listener unfortunately. IMO it should be added a way to stop the loading.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 16th 2012, 6:22:18 pm">March 16th 2012</span>
								by <span class='authorname'>Emil xxx</span><br>
								<a class="icon-bg icon-link" href="question/133850/webview-interaction.html#answer-233591" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I was searching for the solution to this problem, without modifying Obj-C code. I found this approach works for me. Thank you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 9th 2012, 2:09:45 am">August 9th 2012</span>
											by <span class='authorname'>Takanori Hoshi</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
