<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy Webview Ti.App.fireEvent » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy Webview Ti.App.fireEvent</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I am unable communicatefrom a WebView to Titanium using Alloy? It seems like it worked in the past Ti.App.fireEvent(), but in a new Alloy project it does not work. </p>
<p>Yes, I&#39;ve read these docs, but they seem to be out of date:<br>https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Communication+Between+WebViews+and+Titanium</p>
<p>When using alloy there is no app.js file - only a alloy.js file.</p>
<p>If anyone has an example of this working in ALLOY this would be great!</p>
<p>Here is what I have tried.</p>
<p>index.html</p>
<pre><code class="hljs"><span class="hljs-doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.w3.org/1999/xhtml"</span> <span class="hljs-attribute">xml:lang</span>=<span class="hljs-value">"en-GB"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">http-equiv</span>=<span class="hljs-value">"Content-Type"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"text/html; charset=UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>webView Test Page<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="handlebars"><span class="xml">
    //<span class="hljs-cdata">&lt;![CDATA[
    function fire(m){
      Ti.App.fireEvent("fromWebview");
      alert("Clicked");
    }
    //]]&gt;</span>
    </span></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"fire('hello from the local webview');"</span>&gt;</span>Click this link to execute the fire() function in the embedded script of this local page<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre><p>alloy.js </p>
<pre><code class="hljs">Ti.App.addEventListener(<span class="hljs-string">'fromWebview'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
  alert(<span class="hljs-string">"Clicked from Web"</span>);
});
</code></pre><p>I dont get any alerts - if I remove the  Ti.App.fireEvent(&quot;fromWebview&quot;); it fires the alert in the webview - but that  Ti.App.fireEvent(&quot;fromWebview&quot;); function stops the webview alert from firing and never gets fired??</p>
<p>Please help!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 11th 2013, 6:58:08 am">October 11th 2013</span>
				by <span class='authorname'>Agape Hui</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>event</span></li>
					
						<li><span class='tagname'>fire</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-269921">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>This seems to have gotten it working…<br>In the HTML file I had to define the var Ti = window.parent.TI inside the function</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width, initial-scale=1.0, user-scalable=yes"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">style</span>&gt;</span><span class="css"> <span class="hljs-tag">html</span>, <span class="hljs-tag">body</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">5px</span></span></span>; <span class="hljs-rule"><span class="hljs-attribute">padding</span>:<span class="hljs-value"> <span class="hljs-number">0px</span></span></span>; }</span> <span class="hljs-tag">p</span> <span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">0</span></span></span>; <span class="hljs-rule"><span class="hljs-attribute">text-indent</span>:<span class="hljs-value"> <span class="hljs-number">9.0pt</span></span></span>;<span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">13pt</span></span></span>;<span class="hljs-rule"><span class="hljs-attribute">line-height</span>:<span class="hljs-value"> <span class="hljs-number">15pt</span></span></span>;}</span><span class="hljs-tag">sup</span><span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">vertical-align</span>:<span class="hljs-value"> super</span></span>;<span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> black</span></span>;<span class="hljs-rule"><span class="hljs-attribute">font-weight</span>:<span class="hljs-value">bold</span></span>;<span class="hljs-rule"><span class="hljs-attribute">margin-right</span>:<span class="hljs-value"><span class="hljs-number">3px</span></span></span>;<span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">8pt</span></span></span>;}</span></span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fire</span>(<span class="hljs-params">e</span>)</span>{
    <span class="hljs-keyword">var</span> Ti = <span class="hljs-built_in">window</span>.parent.Ti;
    alert(<span class="hljs-string">"Before Ti.App.fireEvent"</span>);
      Ti.App.fireEvent(<span class="hljs-string">"fromWebview"</span>,{});
      alert(<span class="hljs-string">"After Ti.App.fireEvent"</span>);
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"fire()"</span>&gt;</span>Click this link to execute the fire() function in the embedded script of this local page<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 11th 2013, 1:55:20 pm">October 11th 2013</span>
								by <span class='authorname'>Agape Hui</span><br>
								<a class="icon-bg icon-link" href="question/158298/alloy-webview-tiappfireevent#answer-269921" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>wow, that&#39;s great.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 12th 2013, 2:58:04 am">October 12th 2013</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>FYI - I have also figured out that the file you load as the webview has to be a .html file - if you load a file without the .html extension the Ti.App events wont fire.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 12th 2013, 5:31:57 am">October 12th 2013</span>
											by <span class='authorname'>Agape Hui</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-269899">
				
						<section>
							<p>Hi,</p>
<p>let me tell one thing for Alloy.</p>
<p>as you said that there was app.js file in traditional structure of titanium so for alloy, the file will be compile is index.js so you need to add custom listener to index.js file then try to change name from index.html to other also and try to call fire event like this.</p>
<pre><code class="hljs">  &lt;a href=<span class="hljs-string">"#"</span> onClick=<span class="hljs-string">"Ti.App.fireEvent('fromWebview')"</span>&gt;Click this link to<span class="hljs-instruction"> execute </span>the<span class="hljs-function"> fire(</span><span class="hljs-function">)</span> function in the embedded script of this local page&lt;/a&gt;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 11th 2013, 7:53:02 am">October 11th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/158298/alloy-webview-tiappfireevent#answer-269899" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>What do you mean that I have to change the name of index.html?</p>
<p>I tried adding the eventlistener to index.js and change the code in the HTML file but it is still now working at all…</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 11th 2013, 11:21:09 am">October 11th 2013</span>
											by <span class='authorname'>Agape Hui</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If I run the code below in an HTML webview - only die alert before the Ti.App.fireEvent fires - the alert after does not? I guess this means the Ti.App.fireEvent is not being executed and breaks the function?</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="actionscript">
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fire</span><span class="hljs-params">(m)</span></span>{
      alert(<span class="hljs-string">"Before Ti.App.fireEvent"</span>);
      Ti.App.fireEvent(<span class="hljs-string">"fromWebview"</span>,{});
      alert(<span class="hljs-string">"After Ti.App.fireEvent"</span>);
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"fire()"</span>&gt;</span>Click this link to execute the fire() function<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="October 11th 2013, 11:47:20 am">October 11th 2013</span>
											by <span class='authorname'>Agape Hui</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I went ahead and tried to create this example that seems to have worked in the past - its not working anymore. I believe there must be a bug in Webviews?</p>
<p>https:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;148682&#x2F;dynamic-content-in-webview-with-alloy</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 11th 2013, 12:03:26 pm">October 11th 2013</span>
											by <span class='authorname'>Agape Hui</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
