<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy: pressing back button on Android exits application Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy: pressing back button on Android exits application</h1>
		</header>
		<section>
			<p>Hello</p>
<p>I&#39;ve got an application that opens a controller from index, however when pressing the back key on android it exits the application.</p>
<p>I am launching the controller like so:</p>
<pre><code class="hljs">var questionAnswers = <span class="hljs-type">Alloy</span>.createController(<span class="hljs-symbol">'questions'</span>);
questionAnswers.getView<span class="hljs-literal">()</span>.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>what am I doing wrong?</p>
<p>also where can I put custom android specific manifest information? incl native android theme files?</p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 2nd 2012, 6:26:07 pm">October 2nd 2012</span>
				by <span class='authorname'>Michael Arthur</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>set modal =&quot;true&quot; in your opening window</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 6th 2013, 6:02:32 am">July 6th 2013</span>
								by <span class='authorname'>Kishore K</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-248491">
				
						<section>
							<p>set <code>exitOnClose</code> to false on your window<br><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.1&#x2F;index.html#!&#x2F;api&#x2F;Titanium.UI.Window-property-exitOnClose">http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.1&#x2F;index.html#!&#x2F;api&#x2F;Titanium.UI.Window-property-exitOnClose</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 2nd 2012, 6:58:23 pm">October 2nd 2012</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/142987/alloy-pressing-back-button-on-android-exits-application.html#answer-248491" rel="permalink">permalink</a>
							</div>

							<h5>14 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>But how do I do that with Alloy? Sorry!</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 7:17:19 pm">October 2nd 2012</span>
											by <span class='authorname'>Michael Arthur</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>set the property in your view.xml or the view.tss file</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 7:51:11 pm">October 2nd 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Tried that, didn&#39;t work. I must be doing something silly. questions.js is empty but questions.xml has this in it so far:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"win"</span> <span class="hljs-attribute">exitOnClose</span>=<span class="hljs-value">"false"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">WebView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"question_answer"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"next"</span>&gt;</span>Next<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Button</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"prev"</span>&gt;</span>Previous<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>I open the window from a controller that is created and added within index.js</p>
<p>from a row component called subjectRows.js which uses the onClick function to open questions.js as per above.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 7:55:58 pm">October 2nd 2012</span>
											by <span class='authorname'>Michael Arthur</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>try adding it in the controller?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 8:00:18 pm">October 2nd 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>how can I do that when the window is created before the controller code is called? right?<br>however i tried this</p>
<pre><code class="hljs"><span class="hljs-variable">$.</span>exitOnClose = <span class="hljs-literal">false</span>;
</code></pre><p>still no go.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 8:04:57 pm">October 2nd 2012</span>
											by <span class='authorname'>Michael Arthur</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs"><span class="hljs-variable">$.</span>win.exitOnClose = <span class="hljs-literal">false</span>;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 10:02:41 pm">October 2nd 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Here is the compiled output from Alloy<br>it is setting exitOnClose to false so I may not be opening a new window correctly?</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Controller</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">require</span>(<span class="hljs-string">"alloy/controllers/BaseController"</span>).apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>));
    <span class="hljs-keyword">var</span> $ = <span class="hljs-keyword">this</span>, exports = {};
    $.__views.win = A$(Ti.UI.createWindow({
        backgroundColor: <span class="hljs-string">"white"</span>,
        exitOnClose: <span class="hljs-string">"false"</span>,
        id: <span class="hljs-string">"win"</span>
    }), <span class="hljs-string">"Window"</span>, <span class="hljs-literal">null</span>);
    $.addTopLevelView($.__views.win);
    $.__views.question_answer = A$(Ti.UI.createWebView({
        id: <span class="hljs-string">"question_answer"</span>
    }), <span class="hljs-string">"WebView"</span>, $.__views.win);
    $.__views.win.add($.__views.question_answer);
    $.__views.next = A$(Ti.UI.createButton({
        title: <span class="hljs-string">"Next"</span>,
        id: <span class="hljs-string">"next"</span>
    }), <span class="hljs-string">"Button"</span>, $.__views.win);
    $.__views.win.add($.__views.next);
    $.__views.prev = A$(Ti.UI.createButton({
        title: <span class="hljs-string">"Previous"</span>,
        id: <span class="hljs-string">"prev"</span>
    }), <span class="hljs-string">"Button"</span>, $.__views.win);
    $.__views.win.add($.__views.prev);
    _.extend($, $.__views);
    $.win.exitOnClose = !<span class="hljs-number">1</span>;
    _.extend($, exports);
}

<span class="hljs-keyword">var</span> Alloy = <span class="hljs-built_in">require</span>(<span class="hljs-string">"alloy"</span>), Backbone = Alloy.Backbone, _ = Alloy._, A$ = Alloy.A;

<span class="hljs-built_in">module</span>.exports = Controller;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 10:18:02 pm">October 2nd 2012</span>
											by <span class='authorname'>Michael Arthur</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>try thisâ¦</p>
<pre><code class="hljs">$.win.exitOnClose = <span class="hljs-number">0</span>;
</code></pre><p>looks like the parser is converting it to a string for some reason, did you try setting it in the .tss file?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 10:34:24 pm">October 2nd 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have it set in the .tss file but it was also in the view file.<br>it is now set in the .tss file and the controller<br>it is set to 0 in the parsed code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 10:53:25 pm">October 2nd 2012</span>
											by <span class='authorname'>Michael Arthur</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>is it &quot;0&quot; OR 0 i believe the issue here is that it is setting it to the string value and not the boolean. it should not be set as a string, no quotes needed</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 11:26:55 pm">October 2nd 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>no qoutes</p>
<pre><code class="hljs"><span class="hljs-attribute">exitOnClose</span>: <span class="hljs-string">0,</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2012, 11:48:47 pm">October 2nd 2012</span>
											by <span class='authorname'>Michael Arthur</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><strong><a href="https:&#x2F;&#x2F;gist.github.com&#x2F;3824608">See this GISTâ¦. the code here works properly</a></strong></p>
</p>
										<div class="author">
											&mdash; commented <span title="October 3rd 2012, 12:35:31 am">October 3rd 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Your right it doesn&#39;t close! It does behave a bit strange though by going back to the loading image but works as expected. I&#39;m running this on jelly bean btw.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 3rd 2012, 7:00:01 pm">October 3rd 2012</span>
											by <span class='authorname'>Michael Arthur</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The code I posted above works fine. I think you should ddouble check your source files if you are still having issues</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 3rd 2012, 7:08:56 pm">October 3rd 2012</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>4</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-257944">
				
						<section>
							<p>Appart of <code>exitOnClose</code>, you have to declare <code>navBarHidden</code>, no matter if you set it to false or true. This way it creates a Heavy weight window that can capture the back button event. Otherwise, is the prior heavy weight window or the main app activity who captures de event and it may close the app</p>
<p>So, use it this way:</p>
<pre><code class="hljs">"<span class="hljs-id">#win</span>": <span class="hljs-rules">{
   <span class="hljs-rule"><span class="hljs-attribute">exitOnClose</span>:<span class="hljs-value">false,
   title : <span class="hljs-string">'whatever'</span>,
   navBarHidden : false,
</span></span></span>},
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 3rd 2013, 11:02:58 am">March 3rd 2013</span>
								by <span class='authorname'>Javier Rayon</span><br>
								<a class="icon-bg icon-link" href="question/142987/alloy-pressing-back-button-on-android-exits-application.html#answer-257944" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-248492">
				
						<section>
							<p><a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.1&#x2F;index.html#!&#x2F;guide&#x2F;tiapp.xml_and_timodule.xml_Reference-section-29004921_tiapp.xmlandtimodule.xmlReference-Androidspecificsection">android manifest additional infomation</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 2nd 2012, 7:01:21 pm">October 2nd 2012</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/142987/alloy-pressing-back-button-on-android-exits-application.html#answer-248492" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
