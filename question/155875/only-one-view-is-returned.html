<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Only one view is returned Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Only one view is returned</h1>
		</header>
		<section>
			<p>Hi I&#39;ve got the below file which creates a new view for each record :</p>
<pre><code class="hljs">
    <span class="hljs-keyword">var</span> scrollView = Ti.UI.createScrollView({
        contentWidth : <span class="hljs-string">'auto'</span>,
        contentHeight : <span class="hljs-string">'auto'</span>,
        showVerticalScrollIndicator : <span class="hljs-literal">true</span>,
        showHorizontalScrollIndicator : <span class="hljs-literal">false</span>,
        scrollingEnabled : <span class="hljs-literal">true</span>,
        scrollType : <span class="hljs-string">'vertical'</span>
    });


    <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> ui.View({
        top : <span class="hljs-number">0</span>,
        layout: <span class="hljs-string">'vertical'</span>
    }); 

   scrollView.add(view)


    <span class="hljs-keyword">var</span> BrowseStories = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        api.StoryBrowse(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">success, res, code</span>) </span>{
            <span class="hljs-keyword">if</span> (success == <span class="hljs-number">1</span>) {
                <span class="hljs-comment">// Woo we've got some stories, lets show them....</span>
                <span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; res.message.length; i++) {
            Ti.API.info(i)
                    <span class="hljs-keyword">var</span> StoryBox = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/el/storybox'</span>)
                    <span class="hljs-keyword">var</span> sb = <span class="hljs-keyword">new</span> StoryBox(res.message[i])
                    <span class="hljs-keyword">var</span> boxview = <span class="hljs-keyword">new</span> ui.View({ top: <span class="hljs-number">20</span> })
                    boxview.add(sb)
                    view.add(boxview)
                }

            } <span class="hljs-keyword">else</span> {
                alert(<span class="hljs-string">"Error: "</span> + res.message)
            }
        })
    }
</code></pre><p>The number of items returned is 2 as seen by <code>Ti.API.info(i)</code> - however in the actual view I can only see one item added. I would have expected both views to be added to <code>view</code> and as its set to vertical they would be underneath each other with a gap of 20</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 11th 2013, 10:23:32 am">August 11th 2013</span>
				by <span class='authorname'>Tamoor Malik</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>scrollview</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Missing from you question are several pieces of information that will help you obtain a speedy and accurate answer, please provide details for ALL of the following ONLY if they are relevant;</p>
<ul>
<li>Titanium SDK Version?</li>
<li>Target platform (which of the following)<ul>
<li>iPhone; which OS version?</li>
<li>iPad; which OS version?</li>
<li>Android Phones; which min&#x2F;target OS version?</li>
<li>Android Tablets; which min&#x2F;target OS version?</li>
<li>Blackberry Phones; which min&#x2F;target OS version?</li>
<li>Blackberry Tablets; which min&#x2F;target OS version?</li>
<li>Mobile Web; which testing device(s)?</li>
<li>Other?</li>
</ul>
</li>
<li>All related code snippets that can be used to determine what you have achieved so far</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="August 11th 2013, 10:36:34 am">August 11th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Apologies,</p>
<ul>
<li>Titanium 3.1.1.GA.f7592c1</li>
<li>Running in the iOS Simulator</li>
</ul>
<p>The above code snippet is the one that shows the story. This is the view it is calling to create. It&#39;s a bit long so I created a gist - <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;anonymous&#x2F;585b3b8d946aa4f5064d">https:&#x2F;&#x2F;gist.github.com&#x2F;anonymous&#x2F;585b3b8d946aa4f5064d</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="August 11th 2013, 10:41:51 am">August 11th 2013</span>
								by <span class='authorname'>Tamoor Malik</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-267080">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>var StoryBox = require(&#39;ui&#x2F;el&#x2F;storybox&#39;)<br>var sb = new StoryBox(res.message[i])<br>var boxview = new ui.View({ top: 20 })<br>boxview.add(sb)<br>view.add(boxview)</p>
<p>Hi</p>
<p>I am confused at to what this code is trying to do as you appear to be adding several unrelated view inside things are you go along.  Plus you have not provided any code for <strong>StoryBox</strong> or <strong>ui.view</strong>, or an example of what is returned by <strong>res</strong> or explained if this is coming from a local <strong>db</strong> or an <strong>xhr</strong> call - or from what.</p>
<p>So here goes a bunch of guesses and suggestions based on very little information.</p>
<p>This whole section appears unnecessary;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> ui.View({
    top : <span class="hljs-number">0</span>,
    layout: <span class="hljs-string">'vertical'</span>
});
</code></pre><p>Just add the <strong>layout</strong> property you have here directly into <strong>scrollView</strong>.</p>
<p>This section;</p>
<pre><code class="hljs"><span class="hljs-tag">var</span> StoryBox = <span class="hljs-function"><span class="hljs-title">require</span><span class="hljs-params">(<span class="hljs-string">'ui/el/storybox'</span>)</span></span>
<span class="hljs-tag">var</span> sb = new <span class="hljs-function"><span class="hljs-title">StoryBox</span><span class="hljs-params">(res.message[i])</span></span>
<span class="hljs-tag">var</span> boxview = new ui.<span class="hljs-function"><span class="hljs-title">View</span><span class="hljs-params">({ top: <span class="hljs-number">20</span> })</span></span>
boxview.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(sb)</span></span>
view.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(boxview)</span></span>
</code></pre><p>Seems to be creating two different layout for the sake of adding one into the other.</p>
<p>For the moment change this;</p>
<pre><code class="hljs">view.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(boxview)</span></span>
</code></pre><p>To</p>
<pre><code class="hljs">scrollView.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">sb</span>);
</code></pre><p>And remove the whole initial view as mentioned above;</p>
<p>Does this get you any closer?</p>
<p>If not provide the missing information as requested including code snippets of the missing code references that are integral to your code example.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 11th 2013, 10:39:17 am">August 11th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/155875/only-one-view-is-returned.html#answer-267080" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This view seems to have been the problem, once I removed it and added them directly into scrollView it worked. For some reason I had read somewhere that I had to create a view within the scrollview and add everything to that</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> ui.View({
    top : <span class="hljs-number">0</span>,
    layout: <span class="hljs-string">'vertical'</span>
});
</code></pre><p>So what I&#39;ve got now is:</p>
<pre><code class="hljs"><span class="hljs-tag">var</span> StoryBox = <span class="hljs-function"><span class="hljs-title">require</span><span class="hljs-params">(<span class="hljs-string">'ui/el/storybox'</span>)</span></span>
 <span class="hljs-tag">var</span> sb = new <span class="hljs-function"><span class="hljs-title">StoryBox</span><span class="hljs-params">(res.message[i])</span></span>
 <span class="hljs-tag">var</span> boxview = new ui.<span class="hljs-function"><span class="hljs-title">View</span><span class="hljs-params">({ top: <span class="hljs-number">20</span> })</span></span>
boxview.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(sb)</span></span>
scrollView.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(boxview)</span></span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 10:55:38 am">August 11th 2013</span>
											by <span class='authorname'>Tamoor Malik</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The only issue I can see now is the gap between the first and second one is greater than 20.</p>
<p>The gap from the top of the first one is 20, if i change the<br><code>var boxview = new ui.View({ top: 20 })</code> to<br> <code>var boxview = new ui.View({ top: 0 })</code> the gap from the first one and the top is 0 but the gap between the first and second remains massive. </p>
<p>I can&#39;t see anywhere else that the gap is being set. in <code>StoryBox</code> it is returning <code>self</code> which has a <code>top:0</code></p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 11:03:57 am">August 11th 2013</span>
											by <span class='authorname'>Tamoor Malik</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The <code>new ui.View({})</code> is simply calling the below</p>
<pre><code class="hljs">exports.View = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(args)</span> </span>{
    <span class="hljs-keyword">return</span> Ti.UI.createView(args);
};
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 11:05:18 am">August 11th 2013</span>
											by <span class='authorname'>Tamoor Malik</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Could be here - the main height of the return UI is 300.</p>
<pre><code class="hljs">var self = <span class="hljs-keyword">new</span> ui.View({
<span class="hljs-label">   top:</span> <span class="hljs-number">0</span>,
   <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
   <span class="hljs-string">height :</span> <span class="hljs-number">300</span>,
   <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#ffffff'</span>
})
</code></pre><p>You might want to change that to <strong>Ti.UI.SIZE</strong> and work from there.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 11:07:33 am">August 11th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That seems to have made it worse, it&#39;s basically only showing one per &#39;page&#39; and if I scroll all the way to the bottom the second one is 20 from the top (of the navbar) but not 20 from the top of the last StoryBox</p>
<p>This is what the scrollview looks like:</p>
<pre><code class="hljs">    var scrollView = Ti.UI.createScrollView({
        <span class="hljs-string">contentWidth :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">contentHeight :</span> <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">showVerticalScrollIndicator :</span> <span class="hljs-literal">true</span>,
        <span class="hljs-string">showHorizontalScrollIndicator :</span> <span class="hljs-literal">false</span>,
        <span class="hljs-string">scrollingEnabled :</span> <span class="hljs-literal">true</span>,
        <span class="hljs-string">scrollType :</span> <span class="hljs-string">'vertical'</span>,
        <span class="hljs-string">layout :</span> <span class="hljs-string">'vertical'</span>
    });
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 11:15:26 am">August 11th 2013</span>
											by <span class='authorname'>Tamoor Malik</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Managed to fix the problem it was, so i simply changed it to use <code>top:0</code> and set the returned self as &#39;vertical&#39; </p>
<pre><code class="hljs">var bottom = <span class="hljs-keyword">new</span> ui.View({
<span class="hljs-label">        bottom:</span> <span class="hljs-number">0</span>,
        <span class="hljs-string">width :</span> <span class="hljs-number">300</span>,
        <span class="hljs-string">height :</span> <span class="hljs-number">40</span>,
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#ffffff'</span>
    })
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 11:29:00 am">August 11th 2013</span>
											by <span class='authorname'>Tamoor Malik</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Actually ignore me that didn&#39;t fix it</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 11:31:43 am">August 11th 2013</span>
											by <span class='authorname'>Tamoor Malik</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>For each item inside the <strong>StoryBox</strong> that is a view, add a new property <strong>backgroundColor</strong> and set a different colour name inside each one.  Then re-run the app, this will then show which view is expanding the views beyond what you expect them to be.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 12:29:55 pm">August 11th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Never thought about doing it that way. But it solved the issue it was with <code>boxview</code> just added <code>height: Ti.UI.SIZE</code> and it solved the problem - Thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 12:55:09 pm">August 11th 2013</span>
											by <span class='authorname'>Tamoor Malik</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You are welcome</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2013, 1:05:30 pm">August 11th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
