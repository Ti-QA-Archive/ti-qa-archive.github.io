<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Determine actual width of an element assigned width 100%, Ti.UI.SIZE, etc » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Determine actual width of an element assigned width 100%, Ti.UI.SIZE, etc</h1>
		</header>
		<section>
			<p>Hello,</p>
<p>I am trying to find the width of an element in my view with width of Ti.UI.SIZE, and then be able to size other elements in the view based on that width.</p>
<p>Here is my Alloy markup</p>
<pre><code class="hljs">
&lt;TextField value=<span class="hljs-string">"$128.67"</span> id=<span class="hljs-string">"amount"</span> bubbleParent=<span class="hljs-string">"false"</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"test"</span> keyboardType=<span class="hljs-string">"Ti.UI.KEYBOARD_NUMBER_PAD"</span> width=<span class="hljs-string">"Ti.UI.SIZE/&gt;

&lt;View layout="</span>horizontal<span class="hljs-string">" top="</span><span class="hljs-number">0</span><span class="hljs-string">" height="</span>Ti.UI.SIZE<span class="hljs-string">"&gt;
    &lt;TextField id="</span>payMonth<span class="hljs-string">" bubbleParent="</span><span class="hljs-literal">false</span><span class="hljs-string">" editable="</span><span class="hljs-literal">false</span><span class="hljs-string">" enabled="</span><span class="hljs-literal">false</span><span class="hljs-string">"/&gt;
    // need spacing here
    &lt;TextField id="</span>payDay<span class="hljs-string">" bubbleParent="</span><span class="hljs-literal">false</span><span class="hljs-string">" editable="</span><span class="hljs-literal">false</span><span class="hljs-string">" enabled="</span><span class="hljs-literal">false</span><span class="hljs-string">"/&gt;
    // need spacing here
    &lt;TextField id="</span>payYea<span class="hljs-string">r" bubbleParent="</span><span class="hljs-literal">false</span><span class="hljs-string">" editable="</span><span class="hljs-literal">false</span><span class="hljs-string">" enabled="</span><span class="hljs-literal">false</span><span class="hljs-string">"/&gt;
&lt;/View&gt;</span>
</code></pre><p>I would like to size the 3 textfields in the horizontal view at specific percentage sizes of the width of $.amount, or the parent, and be able to add consistent spacing between 1&#x2F;2 and 2&#x2F;3.</p>
<p>I can do a calculation and size&#x2F;position the 3 textfields if I knew the actual width of the $.amount textfield or parent in dps, which is what my project is set as default.  trying to find this value with .width or .getWidth() is not returning an integer.</p>
<p>Also – this is only an issue in Android.</p>
<p>Any help would be appreciated.</p>
<p>Thanks!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 14th 2014, 4:12:21 pm">August 14th 2014</span>
				by <span class='authorname'>eric harms</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>textfield</span></li>
					
						<li><span class='tagname'>ti.ui.size</span></li>
					
						<li><span class='tagname'>width</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-281683">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>You can use the function .toImage().width to get the width of the control. But the thing to remember is that this should be called after the screen has been rendered. Before that if called, it will behave in a wrong fashion. You can try it out and see whether it resolves your requirement.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 14th 2014, 4:59:38 pm">August 14th 2014</span>
								by <span class='authorname'>Soumya Kanti Kar</span><br>
								<a class="icon-bg icon-link" href="question/177026/determine-actual-width-of-an-element-assigned-width-100-tiuisize-etc.html#answer-281683" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-281684">
				
						<section>
							<p>This seems to work returns the value in px, so I had to convert to pd.</p>
<p>If I dont add the timeout, the value is not returned correctly.</p>
<p>i was then able to size each input.  however, my inputs have borders, and when viewed on a screen that is hdpi, i had to remove 1 px from the width of the 3rd textfield or else it wouldnt fit and they wrapped. xdpi and xxdpi works with the default width of 15</p>
<pre><code class="hljs">$.payment.addEventListener(<span class="hljs-string">'open'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">var</span> s = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> w = $.amount.toImage().width;
        <span class="hljs-comment">// 30 is my dp width of the spacing between inputs, which is in dp</span>
        <span class="hljs-keyword">var</span> mult = w/Ti.Platform.displayCaps.logicalDensityFactor)-<span class="hljs-number">30</span>
        setupPaymentDateInputs(mult)
    },<span class="hljs-number">100</span>);
})

<span class="hljs-keyword">var</span> lastLeft = <span class="hljs-number">15</span>;
<span class="hljs-keyword">if</span>(Ti.Platform.displayCaps.density == <span class="hljs-string">"high"</span>)
{
    lastLeft = <span class="hljs-number">14</span>;
}

<span class="hljs-comment">// 1st input is 30 px wider, 2nd is 30 px smaller.  3rd input takes default width</span>
$.payMonth.width = (mult/<span class="hljs-number">3</span>)+<span class="hljs-number">30</span>;
$.payDay.width = (mult/<span class="hljs-number">3</span>)-<span class="hljs-number">30</span>;
$.payYear.width = (mult/<span class="hljs-number">3</span>);

$.payMonth.left = <span class="hljs-number">0</span>;
$.payDay.left = <span class="hljs-number">15</span>;
$.payYear.left = lastLeft;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 14th 2014, 7:41:54 pm">August 14th 2014</span>
								by <span class='authorname'>eric harms</span><br>
								<a class="icon-bg icon-link" href="question/177026/determine-actual-width-of-an-element-assigned-width-100-tiuisize-etc.html#answer-281684" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
