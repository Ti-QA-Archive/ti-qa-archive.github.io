<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Alloy app works on 3.2.3 but upgrading to 3.5.1 causes a crash: &#34;You need to use a Theme.AppCompat theme (or descendent) w...&#34; Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Alloy app works on 3.2.3 but upgrading to 3.5.1 causes a crash: &#34;You need to use a Theme.AppCompat theme (or descendent) w...&#34;</h1>
		</header>
		<section>
			<p>We are readying an update to our app, which was last published on 3.2.3 using the Alloy framework.  We are able to compile without any error using the new 3.5.1 sdk, but the app crashes on launch.  We are getting the following error:</p>
<pre><code class="hljs">[ERROR] :  TiApplication: (main) [1546,1889] Sending event: exception on thread: main msg:java.lang.RuntimeException: Unable to <span class="hljs-operator"><span class="hljs-keyword">start</span> activity ComponentInfo{com.thewolverine.android/org.appcelerator.titanium.TiActivity}: <span class="hljs-keyword">java</span>.lang.IllegalStateException: You need <span class="hljs-keyword">to</span> <span class="hljs-keyword">use</span> a Theme.AppCompat theme (<span class="hljs-keyword">or</span> descendant) <span class="hljs-keyword">with</span> this activity.;</span> Titanium 3.5.1,2015/03/05 10:08,96875c9
[ERROR] :  TiApplication: java.lang.RuntimeException: Unable to <span class="hljs-operator"><span class="hljs-keyword">start</span> activity ComponentInfo{com.thewolverine.android/org.appcelerator.titanium.TiActivity}: <span class="hljs-keyword">java</span>.lang.IllegalStateException: You need <span class="hljs-keyword">to</span> <span class="hljs-keyword">use</span> a Theme.AppCompat theme (<span class="hljs-keyword">or</span> descendant) <span class="hljs-keyword">with</span> this activity.
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.app.ActivityThread.performLaunchActivity(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">2211</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.app.ActivityThread.handleLaunchActivity(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">2261</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.app.ActivityThread.<span class="hljs-keyword">access</span>$<span class="hljs-number">600</span>(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">141</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.app.ActivityThread$H.handleMessage(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">1256</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.os.<span class="hljs-keyword">Handler</span>.dispatchMessage(<span class="hljs-keyword">Handler</span>.<span class="hljs-keyword">java</span>:<span class="hljs-number">99</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.os.Looper.<span class="hljs-keyword">loop</span>(Looper.<span class="hljs-keyword">java</span>:<span class="hljs-number">137</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.app.ActivityThread.<span class="hljs-keyword">main</span>(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">5103</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invokeNative(<span class="hljs-keyword">Native</span> Method)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> <span class="hljs-keyword">java</span>.lang.reflect.Method.invoke(Method.<span class="hljs-keyword">java</span>:<span class="hljs-number">525</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">737</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> com.android.internal.os.ZygoteInit.<span class="hljs-keyword">main</span>(ZygoteInit.<span class="hljs-keyword">java</span>:<span class="hljs-number">553</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> dalvik.<span class="hljs-keyword">system</span>.NativeStart.<span class="hljs-keyword">main</span>(<span class="hljs-keyword">Native</span> Method)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication: Caused <span class="hljs-keyword">by</span>: <span class="hljs-keyword">java</span>.lang.IllegalStateException: You need <span class="hljs-keyword">to</span> <span class="hljs-keyword">use</span> a Theme.AppCompat theme (<span class="hljs-keyword">or</span> descendant) <span class="hljs-keyword">with</span> this activity.
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.support.v7.app.ActionBarActivityDelegate.onCreate(ActionBarActivityDelegate.<span class="hljs-keyword">java</span>:<span class="hljs-number">108</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.support.v7.app.ActionBarActivityDelegateICS.onCreate(ActionBarActivityDelegateICS.<span class="hljs-keyword">java</span>:<span class="hljs-number">57</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.support.v7.app.ActionBarActivity.onCreate(ActionBarActivity.<span class="hljs-keyword">java</span>:<span class="hljs-number">98</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> org.appcelerator.titanium.TiBaseActivity.onCreate(TiBaseActivity.<span class="hljs-keyword">java</span>:<span class="hljs-number">525</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> org.appcelerator.titanium.TiActivity.onCreate(TiActivity.<span class="hljs-keyword">java</span>:<span class="hljs-number">18</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.app.Activity.performCreate(Activity.<span class="hljs-keyword">java</span>:<span class="hljs-number">5133</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.app.Instrumentation.callActivityOnCreate(Instrumentation.<span class="hljs-keyword">java</span>:<span class="hljs-number">1087</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     <span class="hljs-keyword">at</span> android.app.ActivityThread.performLaunchActivity(ActivityThread.<span class="hljs-keyword">java</span>:<span class="hljs-number">2175</span>)
[<span class="hljs-keyword">ERROR</span>] :  TiApplication:     ... <span class="hljs-number">11</span> more
[INFO] :   Process: Sending signal. PID: <span class="hljs-number">5301</span> SIG: <span class="hljs-number">9</span></span>
</code></pre><p>We have tried several different solutions, including adding a theme to our tiapp.xml as follows:</p>
<pre><code class="hljs">    <span class="hljs-tag">&lt;<span class="hljs-title">android</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">manifest</span> <span class="hljs-attribute">android:versionCode</span>=<span class="hljs-value">"104"</span> <span class="hljs-attribute">android:versionName</span>=<span class="hljs-value">"1.0.4"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">application</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@style/Theme.AppCompat.Light"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">supports-screens</span> <span class="hljs-attribute">android:anyDensity</span>=<span class="hljs-value">"false"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">manifest</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">android</span>&gt;</span>
</code></pre><p>This doesn&#39;t seem to fix the issue as it did for others.  Is there anything else we should look at or try?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 17th 2015, 8:08:17 pm">March 17th 2015</span>
				by <span class='authorname'>Ryan Eade</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>appcompat</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Have you add androidmanifest file into your platform folder.?</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 18th 2015, 2:51:18 am">March 18th 2015</span>
								by <span class='authorname'>Nilesh Patel</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-286553">
				
						<section>
							<p>If you have added android manifest in the platform folder then just delete it, clean and rebuild the app after making changes and then run the application.</p>
<p>This will solve your problem.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 18th 2015, 6:04:49 am">March 18th 2015</span>
								by <span class='authorname'>Moiz Chhatriwala</span><br>
								<a class="icon-bg icon-link" href="question/181481/alloy-app-works-on-323-but-upgrading-to-351-causes-a-crash-you-need-to-use-a-themeappcompat-theme-or-descendent-w#answer-286553" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Although I don&#39;t have an AndroidManifest.xml in the platform folder (I don&#39;t think I have a platform folder), I did do a clean of the project, and build again.  I opened the newly created AndroidManifest.xml in the build and it shows several other themes, none of which are set in my tiapp.xml.  Are the modules overriding things?</p>
<pre><code class="hljs">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;manifest xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span> <span class="hljs-keyword">package</span>=<span class="hljs-string">"com.myapp.android"</span> <span class="hljs-string">android:</span>versionCode=<span class="hljs-string">"104"</span> <span class="hljs-string">android:</span>versionName=<span class="hljs-string">"1.0.4"</span>&gt;
    &lt;uses-sdk <span class="hljs-string">android:</span>minSdkVersion=<span class="hljs-string">"10"</span> <span class="hljs-string">android:</span>targetSdkVersion=<span class="hljs-string">"21"</span>/&gt;
    &lt;application <span class="hljs-string">android:</span>icon=<span class="hljs-string">"@drawable/appicon"</span> <span class="hljs-string">android:</span>label=<span class="hljs-string">"@string/app_name"</span> <span class="hljs-string">android:</span>name=<span class="hljs-string">"myAppApplication"</span> <span class="hljs-string">android:</span>debuggable=<span class="hljs-string">"false"</span> <span class="hljs-string">android:</span>theme=<span class="hljs-string">"@android:style/Theme.NoTitleBar"</span>&gt;
        &lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">".myAppActivity"</span> <span class="hljs-string">android:</span>label=<span class="hljs-string">"@string/app_name"</span> <span class="hljs-string">android:</span>theme=<span class="hljs-string">"@style/Theme.Titanium"</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"keyboardHidden|orientation|screenSize"</span>&gt;
            &lt;intent-filter&gt;
                &lt;action <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.intent.action.MAIN"</span>/&gt;
                &lt;category <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.intent.category.LAUNCHER"</span>/&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">"org.appcelerator.titanium.TiActivity"</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"keyboardHidden|orientation|screenSize"</span>/&gt;
        &lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">"org.appcelerator.titanium.TiTranslucentActivity"</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"keyboardHidden|orientation|screenSize"</span> <span class="hljs-string">android:</span>theme=<span class="hljs-string">"@android:style/Theme.Translucent"</span>/&gt;
        &lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">"ti.modules.titanium.ui.android.TiPreferencesActivity"</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"screenSize"</span>/&gt;
        &lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">"org.appcelerator.titanium.TiModalActivity"</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"keyboardHidden|orientation|screenSize"</span> <span class="hljs-string">android:</span>theme=<span class="hljs-string">"@android:style/Theme.Translucent"</span>/&gt;
        &lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">"com.artifex.mupdf.MuPDFActivity"</span> <span class="hljs-string">android:</span>theme=<span class="hljs-string">"@android:style/Theme.NoTitleBar.Fullscreen"</span> <span class="hljs-string">android:</span>label=<span class="hljs-string">"Android PDF Reader"</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"screenSize"</span>&gt;
            &lt;intent-filter&gt;
                &lt;action <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.intent.action.VIEW"</span>/&gt;
                &lt;category <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.intent.category.LAUNCHER"</span>/&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">"OutlineActivity"</span> <span class="hljs-string">android:</span>label=<span class="hljs-string">""</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"screenSize"</span>/&gt;
        &lt;activity <span class="hljs-string">android:</span>name=<span class="hljs-string">"com.logicallabs.inappproducts.PurchaseActivity"</span> <span class="hljs-string">android:</span>theme=<span class="hljs-string">"@android:style/Theme.Translucent.NoTitleBar"</span> <span class="hljs-string">android:</span>configChanges=<span class="hljs-string">"screenSize"</span>/&gt;
        &lt;service <span class="hljs-string">android:</span>name=<span class="hljs-string">"com.appcelerator.analytics.APSAnalyticsService"</span> <span class="hljs-string">android:</span>exported=<span class="hljs-string">"false"</span>/&gt;
    &lt;/application&gt;
    &lt;supports-screens <span class="hljs-string">android:</span>anyDensity=<span class="hljs-string">"false"</span>/&gt;
    &lt;uses-permission <span class="hljs-string">android:</span>name=<span class="hljs-string">"com.android.vending.BILLING"</span>/&gt;
    &lt;uses-permission <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;
    &lt;uses-permission <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.permission.INTERNET"</span>/&gt;
    &lt;uses-permission <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.permission.ACCESS_WIFI_STATE"</span>/&gt;
    &lt;uses-permission <span class="hljs-string">android:</span>name=<span class="hljs-string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;
&lt;/manifest&gt;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="March 18th 2015, 7:55:03 am">March 18th 2015</span>
											by <span class='authorname'>Ryan Eade</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Another update, it seems that the issue lies in one of the modules we are using.  The &quot;Android PDF Reader&quot; module is hijacking what I put in TiApp.xml and overriding it with the theme info from the module.  I have been able to run the app without crashing if I remove that module.  I&#39;m not sure what is normal for modules to include in the AndroidManifest.xml but I think I can edit that in the module file.  I will also reach out to the developer of the module to have it corrected in the published version.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2015, 10:43:53 am">March 18th 2015</span>
											by <span class='authorname'>Ryan Eade</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
