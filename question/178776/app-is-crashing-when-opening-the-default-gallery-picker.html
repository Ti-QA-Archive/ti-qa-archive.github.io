<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>App is crashing when opening the default gallery picker » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>App is crashing when opening the default gallery picker</h1>
		</header>
		<section>
			<p>Here is the stack track….</p>
<p>[INFO] :   2014-10-29 21:26:04.433 LilyPad[7028:223609] -[<strong>NSCFArray isHidden]: unrecognized selector sent to instance 0x792c6130<br>[INFO] :   2014-10-29 21:26:04.459 LilyPad[7028:223609] <em>*</em> Terminating app due to uncaught exception &#39;NSInvalidArgumentException&#39;, reason: &#39;-[</strong>NSCFArray isHidden]: unrecognized selector sent to instance 0x792c6130&#39;<br>[INFO] :   <em>*</em> First throw call stack:<br>[INFO] :   (<br>[INFO] :       0   CoreFoundation                      0x04ee2946 <strong>exceptionPreprocess + 182<br>[INFO] :       1   libobjc.A.dylib                     0x04aa4a97 objc_exception<em>throw + 44<br>[INFO] :       2   CoreFoundation                      0x04eea5c5 -[NSObject(NSObject) doesNotRecognizeSelector:] + 277<br>[INFO] :       3   CoreFoundation                      0x04e333e7 </em></strong>forwarding<strong>_ + 1047<br>[INFO] :       4   CoreFoundation                      0x04e32fae _CF_forwarding_prep_0 + 14<br>[INFO] :       5   LilyPad                             0x000df51d -[TiViewProxy layoutChildrenIfNeeded] + 157<br>[INFO] :       6   LilyPad                             0x002724a7 +[TiLayoutQueue layoutProxy:] + 87<br>[INFO] :       7   LilyPad                             0x00272279 performLayoutRefresh + 553<br>[INFO] :       8   CoreFoundation                      0x04e3c8d6 </strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION<strong> + 22<br>[INFO] :       9   CoreFoundation                      0x04e3c25d </strong>CFRunLoopDoTimer + 1309<br>[INFO] :       10  CoreFoundation                      0x04dfb6ba __CFRunLoopRun + 2090<br>[INFO] :       11  CoreFoundation                      0x04dfabcb CFRunLoopRunSpecific + 443<br>[INFO] :       12  CoreFoundation                      0x04dfa9fb CFRunLoopRunInMode + 123<br>[INFO] :       13  GraphicsServices                    0x0554024f GSEventRunModal + 192<br>[INFO] :       14  GraphicsServices                    0x0554008c GSEventRun + 104<br>[INFO] :       15  UIKit                               0x01c028b6 UIApplicationMain + 1526<br>[INFO] :       16  LilyPad                             0x00091a58 main + 456<br>[INFO] :       17  libdyld.dylib                       0x05945ac9 start + 1<br>[INFO] :   )<br>[INFO] :   libc++abi.dylib: terminating with uncaught exception of type NSException<br>– End simulator log ———————————————————</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 29th 2014, 11:28:18 pm">October 29th 2014</span>
				by <span class='authorname'>Peter Ladis</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>appcelerator</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi,</p>
<p>Can you provide your sample code that reproduces this error. Few more description about testing environment and sample code helps us to find the exact cause behind this error.</p>
<p>Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 30th 2014, 3:09:45 am">October 30th 2014</span>
								by <span class='authorname'>Raju ®</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I have a standard titanium mobile app.  Using 3.4 as the SDK</p>
<p>I have a simple button..that says..Choose Picture that makes this call.  After the hard crash happens..if the app is opened again and the same button is clicked…all is OK.   This will also happen when i open other modal windows as well…but i figured i would post the example that is just using Titanium code.</p>
<p>Titanium.Media.openPhotoGallery({</p>
<pre><code class="hljs">                success:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>
                </span>{
                    <span class="hljs-keyword">var</span> image = event.media;


                    <span class="hljs-keyword">if</span>(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO)
                    {



                    }
                    <span class="hljs-keyword">else</span>
                    {
                        <span class="hljs-comment">// is this necessary?</span>
                    }

                },
                cancel:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
                </span>{

                },
                error:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(error)</span>
                </span>{
                },
                mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO]
            });
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="October 30th 2014, 10:10:32 am">October 30th 2014</span>
								by <span class='authorname'>Peter Ladis</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-283561">
				
						<section>
							<p>Hi Peter Ladis,</p>
<p>Thanks for your concern.</p>
<p>Please check my test code below and see if it helps you.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
    backgroundColor:<span class="hljs-string">'#fff'</span>
});

<span class="hljs-keyword">var</span> picBtn = Ti.UI.createButton({
    title : <span class="hljs-string">'Choose Picture'</span>,
    height : <span class="hljs-string">'auto'</span>,
    width : <span class="hljs-string">'auto'</span>,
    top : <span class="hljs-number">20</span>,
});

picBtn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    Titanium.Media.openPhotoGallery({
    success : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> </span>{
        <span class="hljs-keyword">var</span> selectedImg= event.media;
        <span class="hljs-keyword">if</span>(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
            <span class="hljs-keyword">var</span> imgView = Titanium.UI.createImageView({
                top: <span class="hljs-number">120</span>,
                width: <span class="hljs-number">250</span>,
                   height: <span class="hljs-number">250</span>,
                   image: selectedImg
               });
            win.add(imgView);
        }
    },
    cancel : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">//While cancellation of the process</span>
    },
    error : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(error)</span> </span>{
        <span class="hljs-comment">// If any error occurs during the process </span>
    }
    });
});

win.add(picBtn);
win.open();
</code></pre><p>I&#39;ve tested it on both Android and iPhone with Ti SDK 3.4.GA and it&#39;s working as expected for me. Please test on real device. Hope it&#39;ll help you to solve your problem. If you have any concern about my answer then feel free to ask.</p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 3rd 2014, 3:32:19 am">November 3rd 2014</span>
								by <span class='authorname'>Raju ®</span><br>
								<a class="icon-bg icon-link" href="../../question/178776/app-is-crashing-when-opening-the-default-gallery-picker.html#answer-283561" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi, does my solution works for you. If you have any concern about my answer then feel free to ask.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 11th 2014, 6:16:22 am">November 11th 2014</span>
											by <span class='authorname'>Raju ®</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
