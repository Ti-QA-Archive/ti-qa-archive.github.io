<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>HTTPClient Request works in simulator but not on Device » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>HTTPClient Request works in simulator but not on Device</h1>
		</header>
		<section>
			<p>I am using http:&#x2F;&#x2F;www.realtime.co&#x2F; (Awesome service BTW) to send push notifications. Unfortuntately I am having an issue with the HTTPClient request. It works perfectly in the Simulator but it gives me an Error 400 on device. </p>
<p>I have checked the JSON string that is being sent and it&#39;s identical between the two. I have noticed in the past that when something works in the simulator and not on the device it often has to deal with capitalized letters, they seem to get resolved in the simulator but not on the device, i.e. an image file.</p>
<p>Anyone know what might be causing this issue?<br>I suspect it&#39;s something in the headers but can&#39;t seem to figure it out.</p>
<pre><code class="hljs">    <span class="hljs-keyword">var</span> url = <span class="hljs-string">'https://ortc-mobilepush.realtime.co/mp/publish'</span>;

    <span class="hljs-keyword">var</span> notification =  {
         applicationKey: <span class="hljs-string">"[myKey]"</span>,
         privateKey: <span class="hljs-string">"[myPrivateKey]"</span>, 
         channel : <span class="hljs-string">"[channel]"</span>,
         message : <span class="hljs-string">"[message]"</span>, 
         <span class="hljs-comment">//"payload" : { "sound" : "default", "badge" : "1"}</span>
     };

    <span class="hljs-keyword">var</span> client = Ti.Network.createHTTPClient({
         onload : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
             Ti.API.info(<span class="hljs-string">"ORTC Sent text: "</span> + <span class="hljs-keyword">this</span>.responseText);
         },
         onerror : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
             Ti.API.debug(e);
         },
         timeout : <span class="hljs-number">10000</span>
     });

     <span class="hljs-comment">// Prepare the connection.</span>
    client.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);
    client.setRequestHeader(<span class="hljs-string">'charset'</span>, <span class="hljs-string">'utf-8'</span>);

    client.open(<span class="hljs-string">"POST"</span>, url);
    client.send(<span class="hljs-built_in">JSON</span>.stringify(notification));
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 20th 2014, 12:59:09 pm">May 20th 2014</span>
				by <span class='authorname'>Leonardo Amigoni</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>httpclient</span></li>
					
						<li><span class='tagname'>simulator</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-278879">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Try settings &#39;Charset&#39; with capital letter.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 20th 2014, 2:31:46 pm">May 20th 2014</span>
								by <span class='authorname'>Flavio De Stefano</span><br>
								<a class="icon-bg icon-link" href="question/174367/httpclient-request-works-in-simulator-but-not-on-device#answer-278879" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>That seems to work. Thanks for the suggestion.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 20th 2014, 6:51:07 pm">May 20th 2014</span>
											by <span class='authorname'>Leonardo Amigoni</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
