<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium App crashes » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium App crashes</h1>
		</header>
		<section>
			<p>Hii,</p>
<p>I built an app in Titanium &amp; run on emulator. if I keep app ideal for sometime say 20mins and after that if i access the app, it quits with message that &quot;App terminated unexpectedly. Please try again&quot;.</p>
<p>So what is the cause of such behavior?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 14th 2013, 7:42:45 am">June 14th 2013</span>
				by <span class='authorname'>ji hu</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>titanium app crash</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Plz share your code maybe you are doing something wrong in code</p>
<p>THanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 14th 2013, 8:24:12 am">June 14th 2013</span>
								by <span class='authorname'>Muhammad Wahhab Mirza</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>The app is little bit big. could u tell me that errors in which file cause this behavior? (.js&#x2F;.tss&#x2F;.xml)</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 14th 2013, 8:46:11 am">June 14th 2013</span>
								by <span class='authorname'>ji hu</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>What does logcat log?</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 14th 2013, 9:59:23 am">June 14th 2013</span>
								by <span class='authorname'>Manuel Lehner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Manuel, following are the log statements</p>
<p>W&#x2F;ActivityManager(   60):   Force finishing activity com.sample.myworkspace&#x2F;.MyWorkspaceActivity<br>W&#x2F;ActivityManager(   60): Activity pause timeout for HistoryRecord{4518fab8 com.sample.myworkspace&#x2F;.MyWorkspaceActivity}<br>W&#x2F;ActivityManager(   60): Activity destroy timeout for HistoryRecord{4518fab8 com.sample.myworkspace&#x2F;.MyWorkspaceActivity}</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 14th 2013, 11:13:47 am">June 14th 2013</span>
								by <span class='authorname'>ji hu</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-264308">
				
						<section>
							<p>are you synchronizing each interval of time or using some sort of timer ? Its that or you have a loop creating stuff until it blows.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 14th 2013, 2:25:52 pm">June 14th 2013</span>
								by <span class='authorname'>João Serra</span><br>
								<a class="icon-bg icon-link" href="../../question/153649/titanium-app-crashes.html#answer-264308" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Thanks a ton for reply, I am not using any kind of timer. Rather in my app I am using alloy MVC arch. I am using collections and using &quot;dataTransform&quot;, &quot;dataFilter&quot;, &quot;dataCollection&quot; attributes over TableView for binding. And as I am Titanium newbie I haven`t got ur point   &quot;synchronizing each interval of time &quot;.  So could you please elaborate it?  Sorry to ask such question…</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 15th 2013, 1:44:42 pm">June 15th 2013</span>
											by <span class='authorname'>ji hu</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>well i don&#39;t know what your app does but i was just suggesting that if your app makes comunication with a webservice for instance to update information lets say each 5 mins mins (that would also be a timer). </p>
<p>Im not sure if I understood the context. Do you keep your app running in the background? If so is it possible that your app is sharing some file with something else in the emulator and once you try to refresh it, it crashes because its already open by some other process ?</p>
<p>Also if you have problems in xml your app probably wont compiler. Never had problems with tss because i havent use them alot yet. So my guess is JS.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 15th 2013, 2:57:04 pm">June 15th 2013</span>
											by <span class='authorname'>João Serra</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yeah got your point of timer… and yes, I am not making web service call.<br>I am sharing some files with you.. </p>
<p>expReportsList.xml</p>
<p>These are initial 4 lines of  expReportsList.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Collection</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"reports"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Collection</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"reportLines"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"expReportsList"</span>&gt;</span>
</code></pre><p>Following is my TableView in expReportsList.xml: </p>
<pre><code class="hljs">&lt;TableView <span class="hljs-property">id</span>=<span class="hljs-string">"listReports"</span> top=<span class="hljs-string">"30dp"</span>  dataCollection=<span class="hljs-string">"reports"</span> dataTransform=<span class="hljs-string">"transformReportData"</span> dataFilter=<span class="hljs-string">"filterReports"</span>  filterAttribute=<span class="hljs-string">"custRowProperty"</span>&gt;
    &lt;SearchBar <span class="hljs-property">id</span>=<span class="hljs-string">"searchBar"</span> <span class="hljs-type">class</span>=<span class="hljs-string">"searchGradient searchBarFont"</span> hintText=<span class="hljs-string">"Search Expense Reports"</span> showCancel=<span class="hljs-string">"false"</span> height=<span class="hljs-string">"35dp"</span>&gt;&lt;/SearchBar&gt;
    &lt;TableViewSection <span class="hljs-property">id</span>=<span class="hljs-string">"listReportsSection"</span>  &gt;
        &lt;TableViewRow <span class="hljs-property">id</span>=<span class="hljs-string">"report"</span> height=<span class="hljs-string">"42dp"</span>  onClick=<span class="hljs-string">"showReportDetails"</span> isExpanded=<span class="hljs-string">"false"</span> <span class="hljs-type">class</span>=<span class="hljs-string">"listItem"</span> hasChild=<span class="hljs-string">"true"</span> custRowProperty=<span class="hljs-string">"{purpose}"</span>&gt;
            &lt;View <span class="hljs-property">id</span>=<span class="hljs-string">"firstRow"</span>  top=<span class="hljs-string">"0"</span> height=<span class="hljs-string">"20dp"</span>&gt;
                &lt;Label <span class="hljs-property">id</span>=<span class="hljs-string">"reportNo"</span> left=<span class="hljs-string">"2%"</span> <span class="hljs-type">text</span>=<span class="hljs-string">"{purpose}"</span>/&gt;
                &lt;Label <span class="hljs-property">id</span>=<span class="hljs-string">"reportCost"</span> left=<span class="hljs-string">"70%"</span> <span class="hljs-type">text</span>=<span class="hljs-string">"{custom}"</span>/&gt;
            &lt;/View&gt;
            &lt;View <span class="hljs-property">id</span>=<span class="hljs-string">"secondRow"</span> top=<span class="hljs-string">"48%"</span> height=<span class="hljs-string">"22dp"</span> &gt;
                &lt;Label <span class="hljs-property">id</span>=<span class="hljs-string">"approverName"</span> left=<span class="hljs-string">"2%"</span> <span class="hljs-type">text</span>=<span class="hljs-string">"{number}"</span>/&gt;
                &lt;Label <span class="hljs-property">id</span>=<span class="hljs-string">"reportDate"</span> left=<span class="hljs-string">"30%"</span> <span class="hljs-type">text</span>=<span class="hljs-string">"{approver1}"</span>/&gt;
                &lt;Label <span class="hljs-property">id</span>=<span class="hljs-string">"reportData"</span> left=<span class="hljs-string">"70%"</span> <span class="hljs-type">text</span>=<span class="hljs-string">"{reportDate}"</span>/&gt;
            &lt;/View&gt;
        &lt;/TableViewRow&gt;
    &lt;/TableViewSection&gt;
&lt;/TableView&gt;
</code></pre><p>My expReportsList.js code where &quot;reportData&quot; is my local json</p>
<pre><code class="hljs"><span class="hljs-comment">// At the time of initialization isReportInitialized is set to 0. &amp; this if block will execute for first time only</span>
<span class="hljs-comment">// In if block we are getting the data from device and clearing the device storage. &amp; then saving the device storage with new data.</span>
<span class="hljs-keyword">if</span> (Alloy.Globals.isReportInitialized == <span class="hljs-number">0</span>) {
    reportType = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// Get the data from persistence storage.</span>
    <span class="hljs-keyword">var</span> reportCollection = Alloy.Collections.reports;
    reportCollection.fetch();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; reportCollection.models.length; ) {

        <span class="hljs-keyword">var</span> model = reportCollection.at(i);

        <span class="hljs-comment">// remove the model from the collection</span>
        reportCollection.remove(model);

        <span class="hljs-comment">// destroy the model from persistence</span>
        model.destroy();

        <span class="hljs-comment">// update views from sql storage</span>
        reportCollection.fetch();

    };

    <span class="hljs-keyword">var</span> reportLinesCollection = Alloy.Collections.reportLines; <span class="hljs-comment">// CLEAR COLLECTION </span>
    reportLinesCollection.fetch();

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; reportLinesCollection.models.length; ) {

        <span class="hljs-keyword">var</span> model = reportLinesCollection.at(i);

        <span class="hljs-comment">// remove the model from the collection</span>
        reportLinesCollection.remove(model);

        <span class="hljs-comment">// destroy the model from persistence</span>
        model.destroy();

        <span class="hljs-comment">// update views from sql storage</span>
        reportLinesCollection.fetch();

    };

    <span class="hljs-comment">// RESTORE OLLECTIONS viz : "reports" &amp; "reportLines" IN NESTED FOR LOOPS</span>


    reportCollection = Alloy.Collections.reports;
    reportLinesCollection = Alloy.Collections.reportLines;
    <span class="hljs-keyword">var</span> repLineCount = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">var</span> repCount = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">1</span>; i &lt; reportData.data.length; i++, j++) {

        <span class="hljs-keyword">var</span> model = Alloy.createModel(<span class="hljs-string">'reports'</span>, {
            number : reportData.data[i].number,
            total : reportData.data[i].total,
            status : reportData.data[i].status,
            uniqueRepId : <span class="hljs-string">"rep"</span> + repCount <span class="hljs-comment">// uniqueRepId id idAttribute </span>
        });

        <span class="hljs-comment">// add new model to local collection</span>
        reportCollection.add(model);

        <span class="hljs-comment">// save the model to persistent storage</span>
        model.save();

        <span class="hljs-comment">// reload the collection from persistent storage</span>
        reportCollection.fetch();

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, k = <span class="hljs-number">1</span>; j &lt; reportData.data[i].expenseLines.length; j++, k++) {
            <span class="hljs-keyword">var</span> repModel = Alloy.createModel(<span class="hljs-string">'reportLines'</span>, {
                number : reportData.data[i].number,
                reportHeaderId : reportData.data[i].reportHeaderId,
                expDate : reportData.data[i].expenseLines[j].expDate,
                receiptDate : reportData.data[i].expenseLines[j].receiptDate,
                remAmount : reportData.data[i].expenseLines[j].remAmount,
                orgreceiptMissing : reportData.data[i].expenseLines[j].orgreceiptMissing,
                uniqueRepLineId : <span class="hljs-string">"repLine"</span> + repLineCount  <span class="hljs-comment">// uniqueRepLineIdid idAttribute </span>
            });

            <span class="hljs-comment">// add new model to local collection</span>
            reportLinesCollection.add(repModel);

            <span class="hljs-comment">// save the model to persistent storage</span>
            repModel.save();

            <span class="hljs-comment">// reload the collection from persistent storage</span>
            reportLinesCollection.fetch();

            repLineCount++;
        };
        repCount++;

    };
    Alloy.Globals.isReportInitialized = <span class="hljs-number">1</span>;

} <span class="hljs-keyword">else</span> { <span class="hljs-comment">// For First Time onwards this block will be executed</span>

    Alloy.Collections.reports.fetch();
    $.searchBar.blur();
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transformReportData</span>(<span class="hljs-params">model</span>) </span>{

    <span class="hljs-keyword">var</span> transform = model.toJSON();
    transform.custom = transform.total + <span class="hljs-string">" USD"</span>;
    <span class="hljs-keyword">var</span> str = transform.approver;
    <span class="hljs-keyword">var</span> arr = str.split(<span class="hljs-string">", "</span>);
    <span class="hljs-keyword">var</span> name = arr[<span class="hljs-number">1</span>] + <span class="hljs-string">' '</span> + arr[<span class="hljs-number">0</span>].charAt(<span class="hljs-number">0</span>) + <span class="hljs-string">'.'</span>;
    transform.approver1 = name;
    <span class="hljs-keyword">return</span> transform;
}

<span class="hljs-comment">// This function is called when any TableView item is tapped &amp; then opens the new screen of report details.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showReportDetails</span>(<span class="hljs-params">e</span>) </span>{

    <span class="hljs-comment">//Get the reports</span>
    <span class="hljs-keyword">var</span> reports = Alloy.Collections.reports;

    <span class="hljs-comment">//get the clicked report from collection</span>
    <span class="hljs-keyword">var</span> model = reports.at(e.index);

    selectedReport = model;

    <span class="hljs-comment">//Opens Report Details screen</span>
    Alloy.createController(<span class="hljs-string">'expReportsDetails'</span>, model).getView().open();

    <span class="hljs-comment">//close current screen</span>
    $.expReportsList.close();

}


<span class="hljs-comment">//Filter function</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filterReports</span>(<span class="hljs-params">collection</span>) </span>{

    <span class="hljs-keyword">if</span> (reportType == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> collection.where({
            status : <span class="hljs-string">"approved"</span>
        });
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (reportType == <span class="hljs-number">2</span>) {
        <span class="hljs-keyword">return</span> collection.where({
            status : <span class="hljs-string">"rejected"</span>
        });
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (reportType == <span class="hljs-number">3</span>) {
        <span class="hljs-keyword">return</span> collection.where({
            status : <span class="hljs-string">"all"</span> 
        });
    }
}
</code></pre><p>In controller first two for loops are clearing the storage and after that with local json data viz reportData re-filling storage again. But storage clearing will be executed for first time only . For rest all time else block will be executed which is having ==&gt; (Alloy.Collections.reports.fetch();<br>    $.searchBar.blur();)  It is according to the requirement.<br>So where did I go wrong??</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 15th 2013, 8:52:24 pm">June 15th 2013</span>
											by <span class='authorname'>ji hu</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
