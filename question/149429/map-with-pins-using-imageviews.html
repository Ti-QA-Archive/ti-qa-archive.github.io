<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Map with Pins using ImageViews Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Map with Pins using ImageViews</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I am currently trying to create a map with over-layed pins using Titanium. Similar to how Google Maps looks. </p>
<p>Below is a simplified view of my Alloy page layout:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"Map"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Map"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ImageView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mapView"</span> <span class="hljs-attribute">enableZoomControls</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">canScale</span>=<span class="hljs-value">"true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">ImageView</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ImageView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"pin"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">ImageView</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>Using the above code I am able to manipulate the MapView (scale and pan) but I am not sure how to move the pin at the same time.</p>
<p>The Pin is set to zIndex 2 and touchevents have been disabled so the mapView can always be panned.</p>
<p>I have tried setting the pins transform to that of the mapview on each touchmove event but to no avail. I have also tried using a scrollView instead to contain the ImageViews but that did not help.</p>
<p>Below are the properties applied to both ImageViews:</p>
<pre><code class="hljs">"<span class="hljs-id">#mapView</span>":<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">image</span>:<span class="hljs-value"><span class="hljs-string">'/images/mapTab/map.png'</span>,
    height:Ti.UI.FILL,
    width:Ti.UI.FILL,
    zIndex:<span class="hljs-number">1</span>,
</span></span></span>},

"<span class="hljs-id">#pin</span>":<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">image</span>:<span class="hljs-value"><span class="hljs-string">'/images/pin.png'</span>,
    touchEnabled: false,
    height:Ti.UI.SIZE,
    width:Ti.UI.SIZE,
    zIndex:<span class="hljs-number">2</span>,
</span></span></span>},
</code></pre><p>Please can you tell me whether what I am trying to achieve is possible with image views or whether I need to use two Views, trap the touch events manually, calculate the scale&#x2F;new position and set it across both views. Any help or points in the right direction would be massively appreciated.</p>
<p>I am building for iOS (6.1) and Android (2.2+). Using Titanium Studio, build: 3.0.2.201302191606. The Titanium Studio SDK version is Titanium 3.0.2 (2013&#x2F;02&#x2F;15 19:02 5a77fe7)</p>
<p>Thanks in advance,</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 11th 2013, 2:05:29 pm">March 11th 2013</span>
				by <span class='authorname'>Simon L</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>images</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>map</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-258419">
				
						<section>
							<p>Have you tried just adding annotations to your map view?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 11th 2013, 5:05:04 pm">March 11th 2013</span>
								by <span class='authorname'>Ryan Kjergaard</span><br>
								<a class="icon-bg icon-link" href="question/149429/map-with-pins-using-imageviews#answer-258419" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-258420">
				
						<section>
							<p>Thanks for your response. I should have mentioned in my initial question that my application requires that the map is available offline and therefore I am not able to use Titanium.Map.</p>
<p>This is why I am attempting to create the annotation myself and lay them over the image of a map, I just cant get my annotation to move and scale with the map.</p>
<p>The below code, which allows movement and scaling, doesn&#39;t seem to modify the ImageViews transform so I can&#39;t use that transform to manipulate the pin:</p>
<pre><code class="hljs">&lt;ImageView <span class="hljs-property">id</span>=<span class="hljs-string">"mapView"</span> enableZoomControls=<span class="hljs-string">"true"</span> canScale=<span class="hljs-string">"true"</span>&gt;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 11th 2013, 5:11:01 pm">March 11th 2013</span>
								by <span class='authorname'>Simon L</span><br>
								<a class="icon-bg icon-link" href="question/149429/map-with-pins-using-imageviews#answer-258420" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hey Simon.<br>Did you get anywhere with this.<br>Would appreciate some pointers as it seems I&#39;ll be creating something similar.</p>
<p>Cheers,<br>Osh</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 7th 2013, 10:37:16 am">April 7th 2013</span>
											by <span class='authorname'>Osian Evans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Osian,</p>
<p>Unfortunately I did not manage to get it working. Had to move onto finishing the rest of the application. I&#39;m going back to it tomorrow and will be working on it all weekend, I&#39;ll let you know how I get on.</p>
<p>Please let me know if you manage to get anything similar working.</p>
<p>Thanks,</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 11th 2013, 3:21:40 pm">April 11th 2013</span>
											by <span class='authorname'>Simon L</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey Simon, DM me on twitter so that we can talk about potential collab. (I&#39;m in London timezone)</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 12th 2013, 9:15:25 am">April 12th 2013</span>
											by <span class='authorname'>Osian Evans</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey Simon, how did you get on? Going to start work on this tomorrow, so any advice would be much appreciated.<br>Cheers, Osh</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 21st 2013, 8:20:53 am">April 21st 2013</span>
											by <span class='authorname'>Osian Evans</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-261222">
				
						<section>
							<p>Having done some research into potential solutions using Views and ImageViews, I&#39;ve gone for a good old image map in a WebView - and it&#39;s working.</p>
<p>Granted I&#39;ve only done a quick code spike, but seems to be working on IOS and Android.</p>
<p>I&#39;ll come back and post some code once I&#39;ve finished the project - you can hold me to that!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 21st 2013, 8:42:16 pm">April 21st 2013</span>
								by <span class='authorname'>Osian Evans</span><br>
								<a class="icon-bg icon-link" href="question/149429/map-with-pins-using-imageviews#answer-261222" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Osian.</p>
<p>Apologies for not sending you a message on Twitter, I&#39;ve been away in the sticks for the last week!<br>I managed to get it working using ImageViews for the map and pins although it took a lot of fiddling and optimising! I would be very interested to see how you did it when you get change to post some code.</p>
<p>I&#39;ll share some code on how I did it tomorrow when I get into the office.</p>
<p>Thanks,</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2013, 2:21:02 pm">April 22nd 2013</span>
											by <span class='authorname'>Simon L</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The project is nearing completion, at which point I&#39;ll create a example. But I thought I&#39;d share a quick note regarding imagemaps on Android.</p>
<p>Basically they work great, but you can&#39;t use poly type shapes, it will change them to rect where the bounds contain the poly you defined. So either keep to simple rect shapes, or if you need a more complex shape, create multiple smaller rect shapes and get them all to run the same function&#x2F;params.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 17th 2013, 7:44:22 pm">May 17th 2013</span>
											by <span class='authorname'>Osian Evans</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
