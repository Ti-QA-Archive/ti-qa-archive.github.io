<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Scale view inside scrollview with animation » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Scale view inside scrollview with animation</h1>
		</header>
		<section>
			<p>Hello, I have a scrollView with layout &quot;vertical&quot;.</p>
<p>Inside this scrollView I add three views, v1, v2, v3.</p>
<p>I wanted to scale v2 and I noticed one thing:</p>
<p>if I scale v2 by simply setting its height property, v1 and v3 hold their height and reposition accordingly in the scrollview (so, v2 scales and v3 goes down).</p>
<p>If I scale v2 using an animation (that&#39;s what exactly I need to do, below is the code), something really strange occurs and the result is simply a tragedy   :-)</p>
<pre><code class="hljs"><span class="hljs-tag">v2</span><span class="hljs-class">.animate</span>({
    <span class="hljs-attribute">height</span>:<span class="hljs-number">300</span>, 
    <span class="hljs-attribute">backgroundColor</span>:<span class="hljs-string">'#00f'</span>, 
    <span class="hljs-attribute">duration</span>:<span class="hljs-number">3000</span>, 
    <span class="hljs-attribute">curve</span>:Titanium.UI.ANIMATION_CURVE_EASE_IN_OUT
});}
</code></pre><p>So: is it possible to scale a view inside a scrollview with an animation? Why isn&#39;t this working? Is there any other way to achieve the same?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 30th 2015, 3:00:13 pm">January 30th 2015</span>
				by <span class='authorname'>London Moe</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>animation</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>scale</span></li>
					
						<li><span class='tagname'>scrollview</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-285511">
				
						<section>
							<p>Hi</p>
<p>You should look into using 2DMatrix to scale, as it has a method for this. </p>
<p>Here is a link to the documentation: <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.2DMatrix-method-scale">http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.2DMatrix-method-scale</a></p>
<p>There is an example at the top of how to use 2DMatrix and then its just a case of using the scale method.</p>
<p>Hope this helps</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 30th 2015, 9:45:38 pm">January 30th 2015</span>
								by <span class='authorname'>Luke Taylor</span><br>
								<a class="icon-bg icon-link" href="question/180534/scale-view-inside-scrollview-with-animation#answer-285511" rel="permalink">permalink</a>
							</div>

							<h5>8 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;ve tried this long before posting, but it doesn&#39;t seem to work (it creates a very strange effect)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 2nd 2015, 8:43:58 am">February 2nd 2015</span>
											by <span class='authorname'>London Moe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi again,</p>
<p>Been trying my theory today, here&#39;s the code</p>
<p>XML</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"win"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ScrollableView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"scrollableView"</span> <span class="hljs-attribute">showPagingControl</span>=<span class="hljs-value">"true"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"view1"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#123"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span>&gt;</span>View 1<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"view2"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#246"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span>&gt;</span>View 2<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"view3"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#48b"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span>&gt;</span>View 3<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">ScrollableView</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>TSS</p>
<pre><code class="hljs">"<span class="hljs-tag">Label</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> <span class="hljs-string">'#fff'</span>,
    font: {
        fontSize: <span class="hljs-number">24</span>
    </span></span></span>}
}
</code></pre><p>JS</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> toggle = <span class="hljs-literal">false</span>;
$.view2.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> matrix2 = Ti.UI.create2DMatrix();

    <span class="hljs-keyword">if</span> (toggle === <span class="hljs-literal">false</span>) {
        matrix2 = matrix2.scale(<span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>);
        toggle = <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">else</span> {
        matrix2 = matrix2.scale(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
        toggle = <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">var</span> a = Ti.UI.createAnimation({
        transform: matrix2,
        duration: <span class="hljs-number">1000</span>
    });
    $.view2.animate(a);
});

$.scrollableView.addEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> t = Ti.UI.create2DMatrix();
    t = t.scale(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
    <span class="hljs-keyword">var</span> ani = Ti.UI.createAnimation({
        transform: t,
        duration: <span class="hljs-number">100</span>
    });
    toggle = <span class="hljs-literal">false</span>;
    $.view2.animate(ani);
});

$.win.open();
</code></pre><p>So, I&#39;m assuming you meant a &quot;ScrollableView&quot; when you said you added views to it?</p>
<p>I have added a scale animation to view 2 on a click event, this toggles.</p>
<p>Then to compensate for the adjustment that this animation has on the layout, I have used a scroll event to set the view back to normal and switch the toggle back so that it can continue to work properly afterwards.</p>
<p>Hopefully this gives you more help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2015, 2:19:06 pm">February 4th 2015</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No, not a ScrollableView, I meant a regular ScrollView with layout=&quot;vertical&quot;: every with is 320 pixel wide but with different height. When I click a button (or event the view itself), I want the view to enlarge (it must change slowly its height). I&#39;ve tried anything with no luck: the only thing that seems to work is setting the height with no animation at all. An alternative would be this crazy thing: changing the height with a setInterval, setting many times the height, but I think this is really ugly.</p>
<p>Thanks for your code, I&#39;m looking into it more deeply tomorrow.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2015, 2:40:54 pm">February 4th 2015</span>
											by <span class='authorname'>London Moe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>every VIEW (not every with), sorry</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2015, 2:41:36 pm">February 4th 2015</span>
											by <span class='authorname'>London Moe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok, think i&#39;ve nailed it this time.</p>
<p>XML</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"win"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#fff"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ScrollView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"scrollView"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"view1"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#123"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span>&gt;</span>View 1<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"view2"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#246"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span>&gt;</span>View 2<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"view3"</span> <span class="hljs-attribute">backgroundColor</span>=<span class="hljs-value">"#48b"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Label</span>&gt;</span>View 3<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">ScrollView</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>TSS</p>
<pre><code class="hljs">"<span class="hljs-id">#scrollView</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">contentHeight</span>:<span class="hljs-value"> Ti.UI.SIZE,
    height: Ti.UI.FILL,
    layout: <span class="hljs-string">"vertical"</span>,
    contentWidth: Ti.UI.SIZE,
    width: Ti.UI.FILL
</span></span></span>},
"<span class="hljs-tag">View</span>": <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value"> Alloy.Globals.deviceHeight,
    top: <span class="hljs-number">0</span>,
    width: Alloy.Globals.deviceWidth
</span></span></span>}
</code></pre><p>JS</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> toggle = <span class="hljs-literal">false</span>;    
$.view2.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (toggle === <span class="hljs-literal">false</span>) {
        $.view2.animate({
            curve: Ti.UI.ANIMATION_CURVE_EASE_OUT,
            duration: <span class="hljs-number">2000</span>,
            height: Alloy.Globals.deviceHeight*<span class="hljs-number">2</span>
        });
        toggle = <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">else</span> {
        $.view2.animate({
            curve: Ti.UI.ANIMATION_CURVE_EASE_OUT,
            duration: <span class="hljs-number">2000</span>,
            height: Alloy.Globals.deviceHeight
        });
        toggle = <span class="hljs-literal">false</span>;
    }
});

$.win.open();
</code></pre><p>ALLOY.JS</p>
<pre><code class="hljs">Alloy.Globals.deviceWidth = Ti.Platform.displayCaps.platformWidth<span class="hljs-comment">;</span>
Alloy.Globals.deviceHeight = Ti.Platform.displayCaps.platformHeight<span class="hljs-comment">;</span>
</code></pre><p>The reason I use Alloy.JS is so that I can define&#x2F;calculate the platform height and width for the views, as simply using Ti.UI.SIZE&#x2F;FILL doesn&#39;t give the view a numeric value to start from when animating.</p>
<p>Simple example with a toggle on a click event again, hopefully this helps solve your problem :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 5th 2015, 7:48:49 am">February 5th 2015</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I must &quot;translate&quot; it to pure CommonJS because I don&#39;t use Alloy (mainly for reason of time, type and dimensions of projects). Thanks, I&#39;ll test it asap</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 6th 2015, 7:40:38 am">February 6th 2015</span>
											by <span class='authorname'>London Moe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok, now try to set the height of each view = deviceHeight&#x2F;3 and to animate view2 so that it reaches height = height&#x2F;2. That way you&#39;ll notice the strange effect I don&#39;t want to get:</p>
<pre><code class="hljs">var view1 = Ti.UI.createView({top:<span class="hljs-number">0</span>,<span class="hljs-variable">width</span>:deviceWidth,<span class="hljs-variable">height</span>:deviceHeight/<span class="hljs-number">3</span>,backgroundColor:<span class="hljs-string">"#123"</span>});
var view2 = Ti.UI.createView({top:<span class="hljs-number">0</span>,<span class="hljs-variable">width</span>:deviceWidth,<span class="hljs-variable">height</span>:deviceHeight/<span class="hljs-number">3</span>,backgroundColor:<span class="hljs-string">"#456"</span>});
var view3 = Ti.UI.createView({top:<span class="hljs-number">0</span>,<span class="hljs-variable">width</span>:deviceWidth,<span class="hljs-variable">height</span>:deviceHeight/<span class="hljs-number">3</span>,backgroundColor:<span class="hljs-string">"#48b"</span>});

scrollView.<span class="hljs-built_in">add</span>(view1);
scrollView.<span class="hljs-built_in">add</span>(view2);
scrollView.<span class="hljs-built_in">add</span>(view3);

view2.addEventListener(<span class="hljs-string">'click'</span>, function () {
    <span class="hljs-keyword">if</span> (toggle === <span class="hljs-keyword">false</span>) {
        view2.animate({
            <span class="hljs-built_in">curve</span>: Ti.UI.ANIMATION_CURVE_EASE_OUT,
            duration: <span class="hljs-number">2000</span>,
            <span class="hljs-variable">height</span>: deviceHeight/<span class="hljs-number">2</span>
        });
        toggle = <span class="hljs-keyword">true</span>;
    } <span class="hljs-keyword">else</span> {
        view2.animate({
            <span class="hljs-built_in">curve</span>: Ti.UI.ANIMATION_CURVE_EASE_OUT,
            duration: <span class="hljs-number">2000</span>,
            <span class="hljs-variable">height</span>: deviceHeight/<span class="hljs-number">3</span>
        });
        toggle = <span class="hljs-keyword">false</span>;
    }
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 6th 2015, 11:11:57 am">February 6th 2015</span>
											by <span class='authorname'>London Moe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Obviously with the height being so tall, it gave me the false illusion I had solved it. ~Face palm~</p>
<p>I can see the issue, which is before the animation occurs it sets the height in which it is going to animate to and then goes there. The problem is that, when you animate using layout properties, you don&#39;t actually alter the true values.</p>
<p>This is stated in the docs and also a known bug <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.UI.View-method-animate">Titanium.UI.View-method-animate</a></p>
<p>So I suppose there are a few questions; what are you trying to achieve? Do you <em>need</em> to use a scrollView? and if so, is there another way to achieve what you want?</p>
<p>Answering these questions might help me provide you with a better solution :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 6th 2015, 2:28:30 pm">February 6th 2015</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
