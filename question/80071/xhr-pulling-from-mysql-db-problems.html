<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>XHR pulling from MySQL DB Problems » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>XHR pulling from MySQL DB Problems</h1>
		</header>
		<section>
			<p>So I am using the latest build of 1.5.0.</p>
<p>Whenever I open a page that has an HTTP client that pulls remote MySQL database information via PHP, I get this in the console:</p>
<pre><code class="hljs">Entity: line 1: parser error : <span class="hljs-operator"><span class="hljs-keyword">Start</span> tag expected, <span class="hljs-string">'&lt;'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">found</span>
{<span class="hljs-string">"catalog"</span>:[{<span class="hljs-string">"id"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-string">"name"</span>:<span class="hljs-string">"Scooter"</span>,<span class="hljs-string">"description"</span>:<span class="hljs-string">"A nice scooter
^
[ERROR] Error Domain=com.google.GDataXML Code=-1 "</span>The operation couldn’<span class="hljs-keyword">t</span> be completed. (com.google.GDataXML <span class="hljs-keyword">error</span> -<span class="hljs-number">1.</span>)<span class="hljs-string">". in -[TiDOMDocumentProxy parseString:] (TiDOMDocumentProxy.m:50)</span></span>
</code></pre><p>It loads fine, I&#39;m just a fan of having a clean console when I test&#x2F;release my Apps. I don&#39;t like bugs&#x2F;errors&#x2F;warnings. Of any kind.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 16th 2010, 12:58:12 am">November 16th 2010</span>
				by <span class='authorname'>Colton Arabsky</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>1.5.0</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>what does you onload call look like</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 16th 2010, 1:35:56 am">November 16th 2010</span>
								by <span class='authorname'>Aaron Saunders</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>13</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>13 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-144281">
				
						<section>
							<p>please post all your http call.<br>do you return any kind of information from php? In wich format?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 16th 2010, 7:37:45 am">November 16th 2010</span>
								by <span class='authorname'>Stefano Di Luca</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-144281" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-145681">
				
						<section>
							<p>Yes, I return data pulled from a MySQL Database. Purely strings and integers, using JSON.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 17th 2010, 9:57:39 pm">November 17th 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-145681" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-145731">
				
						<section>
							<p>Colton, would you please isolate which specific Titanium command produces this error? You can achieve this by inserting Ti.API.info() statements into your code. Keep doing so, until you found the precise offending line.  This will help to understand how to circumvent it.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 18th 2010, 12:42:17 am">November 18th 2010</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-145731" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-146331">
				
						<section>
							<p>Colton<br>Did you see my previous request for information?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 18th 2010, 9:03:54 pm">November 18th 2010</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-146331" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-146441">
				
						<section>
							<pre><code class="hljs">[INFO] Before XHR
Entity: line 1: parser error : <span class="hljs-operator"><span class="hljs-keyword">Start</span> tag expected, <span class="hljs-string">'&lt;'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">found</span>
{<span class="hljs-string">"seasoneps"</span>:[{<span class="hljs-string">"id"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-string">"episode"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-string">"season"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-string">"title"</span>:<span class="hljs-string">"That's Disgusting"</span>,<span class="hljs-string">"
^
[ERROR] Error Domain=com.google.GDataXML Code=-1 "</span>The operation couldn’<span class="hljs-keyword">t</span> be completed. (com.google.GDataXML <span class="hljs-keyword">error</span> -<span class="hljs-number">1.</span>)<span class="hljs-string">". in -[TiDOMDocumentProxy parseString:] (TiDOMDocumentProxy.m:50)
[INFO] After XHR</span></span>
</code></pre><p>Here is my code:</p>
<pre><code class="hljs">        Ti.API.info(<span class="hljs-string">"Before XHR"</span>);
        <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
        xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
        <span class="hljs-keyword">var</span> jsoncats = json.seasoneps;
        Ti.API.info(<span class="hljs-string">"After XHR"</span>);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 19th 2010, 2:00:40 am">November 19th 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-146441" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-146451">
				
						<section>
							<p>Colton</p>
<p>You haven&#39;t provided the information I requested - <strong>precisely</strong> which one of the commands between the before and after messages you have inserted is actually outputting the error?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 19th 2010, 2:20:59 am">November 19th 2010</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-146451" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-146461">
				
						<section>
							<pre><code class="hljs">[INFO] Before XHR
[INFO] Before XHR OnLoad
Entity: <span class="hljs-keyword">line</span> 1: parser <span class="hljs-keyword">error</span> : Start tag expected, '&lt;' not found
{<span class="hljs-string">"seasoneps"</span>:[{<span class="hljs-string">"id"</span>:<span class="hljs-string">"18"</span>,<span class="hljs-string">"episode"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-string">"season"</span>:<span class="hljs-string">"3"</span>,<span class="hljs-string">"title"</span>:"What <span class="hljs-keyword">Else</span> Can You <span class="hljs-literal">D</span>
^
[<span class="hljs-keyword">ERROR</span>] <span class="hljs-keyword">Error</span> Domain=com.google.GDataXML Code=-1 <span class="hljs-string">"The operation couldn’t be completed. (com.google.GDataXML error -1.)"</span>. <span class="hljs-keyword">in</span> -[TiDOMDocumentProxy parseString:] (TiDOMDocumentProxy.<span class="hljs-keyword">m</span>:50)
[INFO] After XHR OnLoad
[INFO] Before JSON <span class="hljs-keyword">Parse</span>
[INFO] After Jsoncats define
</code></pre><pre><code class="hljs">        Ti.API.info(<span class="hljs-string">"Before XHR"</span>);
        <span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
        Ti.API.info(<span class="hljs-string">"Before XHR OnLoad"</span>);
        xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        Ti.API.info(<span class="hljs-string">"After XHR OnLoad"</span>);
        <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
        Ti.API.info(<span class="hljs-string">"Before JSON Parse"</span>);
        <span class="hljs-keyword">var</span> jsoncats = json.seasoneps;
        Ti.API.info(<span class="hljs-string">"After Jsoncats define"</span>);
</code></pre><p>So it&#39;s the xhr.onload = function() line.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 19th 2010, 2:49:31 am">November 19th 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-146461" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>That&#39;s great, Colton - thank you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 19th 2010, 2:59:47 am">November 19th 2010</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-146481">
				
						<section>
							<p>Colton</p>
<p>I think the problem is that you don&#39;t need to parse this.responseText at all, because it isn&#39;t a JSON string.  It is already a JS object, and so you can access your data directly.  See the following example:</p>
<pre><code class="hljs">var data =
    {
        <span class="hljs-string">"cityLocation"</span>: {
            <span class="hljs-string">"cityLocationName"</span>: <span class="hljs-string">"Dallas-Fort Worth, TX"</span>,
            <span class="hljs-string">"code"</span>: <span class="hljs-string">"DFW"</span>,
            <span class="hljs-string">"countryCode"</span>: <span class="hljs-string">"US"</span>,
            <span class="hljs-string">"countryName"</span>: <span class="hljs-string">"United States"</span>,
            <span class="hljs-string">"latitude"</span>: <span class="hljs-number">32.9</span>,
            <span class="hljs-string">"longitude"</span>: -<span class="hljs-number">97.0366666666667</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"Dallas-Fort Worth"</span>,
            <span class="hljs-string">"rank"</span>: <span class="hljs-number">8</span>,
            <span class="hljs-string">"state"</span>: <span class="hljs-string">"TX"</span>,
            <span class="hljs-string">"stateName"</span>: <span class="hljs-string">"Texas"</span>
        }
    };
        <span class="hljs-comment">// this following line is commented</span>
        <span class="hljs-comment">// because it would give you an exception</span>
        <span class="hljs-comment">// var myobj = JSON.parse(data);</span>
        Ti.API.info(<span class="hljs-string">"State is: "</span>+ data.cityLocation.stateName);
</code></pre><p>Ti.API.info() would return &quot;Texas&quot;.</p>
<p>Therefore, in your code, var json = JSON.parse(this.responseText) is not necessary, because your data is available in this.responseText.seasoneps.id. Thus, this.responseText.seasoneps.id would return 18.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 19th 2010, 3:46:16 am">November 19th 2010</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-146481" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-146871">
				
						<section>
							<p>Colton</p>
<p>Have you fixed this?  An alternative solution to the one in my last answer is to use the responseXML rather than the responseText property. Hence, try the following code:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseXML);
<span class="hljs-keyword">var</span> jsoncats = json.seasoneps;
</code></pre><p>I&#39;d be grateful to know whether any of my solutions worked or not :-&#x2F;</p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 19th 2010, 3:28:22 pm">November 19th 2010</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-146871" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-147241">
				
						<section>
							<p>Hey Hal, it doesn&#39;t work. It just gives me even more errors.</p>
<p>I can&#39;t get the exact errors to you right now, but tomorrow morning I will post with them. Would it be possible I could get your Email address so we could discuss this quicker than on the Appcelerator forums? These aren&#39;t the <em>best</em> form of question-answering around…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 20th 2010, 9:26:45 am">November 20th 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-147241" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Colton</p>
<p>Have you tried both of my solutions, from each of the last two answers I posted?</p>
<p>I can empathise that you need to resolve this quickly, but this Q&amp;A really is the best place for it, as others can benefit from the solution if they run into the same issue in future.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2010, 12:13:54 pm">November 20th 2010</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-147431">
				
						<section>
							<p>Here is my error for using &quot;responseXML&quot; instead of &quot;responseText&quot;: <a href="http:&#x2F;&#x2F;pastie.org&#x2F;private&#x2F;4bnepwnyx98a7jl79yh5sg">Here</a>.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 20th 2010, 5:17:51 pm">November 20th 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-147431" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>OK, that&#39;s not the solution then. What about my previous suggestion, to access the data directly rather than parsing it with JSON.parse()?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2010, 5:49:29 pm">November 20th 2010</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hal, it is pulled from a PHP script that pulls it from a MySQL Database. You can view the PHP file <a href="http:&#x2F;&#x2F;pastie.org&#x2F;private&#x2F;lfg7bowbcpi4uaocit0kw">here</a>. Wouldn&#39;t that make it necessary to parse it with JSON?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2010, 8:30:38 pm">November 20th 2010</span>
											by <span class='authorname'>Colton Arabsky</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><a href="http:&#x2F;&#x2F;pastie.org&#x2F;private&#x2F;uz3gmkfa4lqlmnhrasrqg">Pastie PHP</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2010, 8:31:24 pm">November 20th 2010</span>
											by <span class='authorname'>Colton Arabsky</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-147501">
				
						<section>
							<p>Hal, it is pulled from a PHP script that pulls it from a MySQL Database. You can view the PHP file <a href="http:&#x2F;&#x2F;pastie.org&#x2F;private&#x2F;uz3gmkfa4lqlmnhrasrqg">here</a>. Wouldn&#39;t that make it necessary to parse it with JSON.parse()?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 20th 2010, 8:40:55 pm">November 20th 2010</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-147501" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Would you mind just trying it, for my peace of mind?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2010, 8:57:41 pm">November 20th 2010</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I don&#39;t even know if that is possible, since the PHP script encodes it as JSON.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 20th 2010, 9:55:40 pm">November 20th 2010</span>
											by <span class='authorname'>Colton Arabsky</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-147591">
				
						<section>
							<p>Colton</p>
<p>Try this:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhr = Titanium.Network.createHTTPClient();
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
<span class="hljs-keyword">var</span> thisTitle = <span class="hljs-keyword">this</span>.responseText.seasoneps.title;
Ti.API.info(<span class="hljs-string">'This shows title is: '</span>+thisTitle);
</code></pre><p>Obviously you will need to complete the function (it is missing the closing bracket).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 21st 2010, 12:07:29 am">November 21st 2010</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/80071/xhr-pulling-from-mysql-db-problems.html#answer-147591" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
