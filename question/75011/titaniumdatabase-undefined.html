<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium.Database undefined Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium.Database undefined</h1>
		</header>
		<section>
			<p>I am trying to learn the platform and get down the basics of using sql data in a table view. My code is </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;
<span class="hljs-comment">//Database</span>
<span class="hljs-keyword">var</span> db = Titanium.Database.install(<span class="hljs-string">'tips.sql'</span>,<span class="hljs-string">'tips'</span>);


<span class="hljs-comment">//This is the array we'll use to back the table view</span>
<span class="hljs-keyword">var</span> data = [];

<span class="hljs-comment">//Get data for tableview</span>
<span class="hljs-keyword">var</span> rows = db.execute(<span class="hljs-string">'SELECT * FROM tips'</span>);
<span class="hljs-keyword">while</span> (rows.isValidRow()) {
  data.push({
    title: rows.fieldByName(<span class="hljs-string">'title'</span>),
    tip: rows.fieldByName(<span class="hljs-string">'tip'</span>)
  });
    rows.next();
}
rows.close();
db.close();
<span class="hljs-comment">// create table view</span>
<span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({
    data:data,
    searchHidden:<span class="hljs-literal">true</span>
});

<span class="hljs-comment">// create table view event listener</span>
tableview.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    Titanium.UI.createAlertDialog({
      title: e.rowData.title, 
      message:e.rowData.tip
    }).show();
});

win.add(tableview);
</code></pre><p>The error that I receive is </p>
<pre><code class="hljs">[ERROR] Script Error = Result <span class="hljs-keyword">of</span> expression <span class="hljs-string">'Titanium.Database'</span> [<span class="hljs-literal">undefined</span>] <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> an object. at guides.js (line <span class="hljs-number">3</span>).
</code></pre><p>tips.sql is the testdb.db that came with the kitchensink its just been exported by a program of mine. I have also tried to run it with testdb.db and have the same error. I have also tried to place the db file in the same folder, in the parent folder and elsewhere. </p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 31st 2010, 4:12:31 pm">October 31st 2010</span>
				by <span class='authorname'>Grant Wolz</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>undefined</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I can only assume that isValidRow method is returning false positive result, this way letting the while cycle execute. As a result there is no rows object and you get the error.</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 14th 2012, 1:37:04 pm">June 14th 2012</span>
								by <span class='authorname'>Zurab Shubitidze</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>-1</span> Votes</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-203181">
				
						<section>
							<p>Try deleting the build folder and build again</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 25th 2011, 3:51:57 pm">February 25th 2011</span>
								by <span class='authorname'>Per Jorgensen</span><br>
								<a class="icon-bg icon-link" href="question/75011/titaniumdatabase-undefined.html#answer-203181" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This, and only this, solved the problem for me.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 28th 2011, 12:23:43 pm">February 28th 2011</span>
											by <span class='authorname'>Richard John</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Worked for me as well, took me a while to figure that out</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 17th 2011, 7:32:40 am">July 17th 2011</span>
											by <span class='authorname'>Tom Schouteden</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>5</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-135131">
				
						<section>
							<p>Try this instead of the Ti.Database.install() call:</p>
<pre><code class="hljs">var conn = Titanium.Database.open('your_db');
// Initialize the database
conn.execute('<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> table1 (<span class="hljs-keyword">id</span> <span class="hljs-built_in">INTEGER</span> PRIMARY <span class="hljs-keyword">KEY</span>, field_name <span class="hljs-built_in">TEXT</span>)<span class="hljs-string">');
// etc.</span></span>
</code></pre><p>I&#39;m not sure if you can load an external sql file with your table definitions. I&#39;ve never tried. I just put the above into my js file.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 31st 2010, 4:44:21 pm">October 31st 2010</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="question/75011/titaniumdatabase-undefined.html#answer-135131" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-135141">
				
						<section>
							<p>I think the install method is poorly named because it works more like open than install.  A functioning example looks like this.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> db = Titanium.Database.install(<span class="hljs-string">'../testdb.db'</span>,<span class="hljs-string">'quotes'</span>);
</code></pre><p>The first parameter is a path to the database.  The second parameter is the database you are trying to access.  See http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.Database.install-method.html</p>
<p>Like Tim sad, you would probably want to test for the existence of the table and create as needed.  You could do the test then use the file object to open a SQL file and pull the commands to execute or put them in the JS file.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 31st 2010, 5:13:18 pm">October 31st 2010</span>
								by <span class='authorname'>John McKnight</span><br>
								<a class="icon-bg icon-link" href="question/75011/titaniumdatabase-undefined.html#answer-135141" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-135161">
				
						<section>
							<p>The problem is that I don&#39;t want to create a new table, the user will not be entering any new information. I need to display information that already exists in a database that comes with the app. This is why I am using the install command as recommended by titanium. </p>
<p>Just no matter what I try I always get the same cryptic error. </p>
<pre><code class="hljs">var db = Titanium.Database.open('../testdb.db');
db.execute('<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> tips (<span class="hljs-keyword">id</span> <span class="hljs-built_in">INTEGER</span> PRIMARY <span class="hljs-keyword">KEY</span>, title <span class="hljs-built_in">TEXT</span>, tip <span class="hljs-built_in">TEXT</span>)<span class="hljs-string">');</span></span>
</code></pre><p>Errors</p>
<pre><code class="hljs">var db = Titanium.Database.open('testdb.db');
db.execute('<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> tips (<span class="hljs-keyword">id</span> <span class="hljs-built_in">INTEGER</span> PRIMARY <span class="hljs-keyword">KEY</span>, title <span class="hljs-built_in">TEXT</span>, tip <span class="hljs-built_in">TEXT</span>)<span class="hljs-string">');</span></span>
</code></pre><p>Errors</p>
<pre><code class="hljs">var db = Titanium.Database.open('tips');
db.execute('<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> tips (<span class="hljs-keyword">id</span> <span class="hljs-built_in">INTEGER</span> PRIMARY <span class="hljs-keyword">KEY</span>, title <span class="hljs-built_in">TEXT</span>, tip <span class="hljs-built_in">TEXT</span>)<span class="hljs-string">');</span></span>
</code></pre><p>Errors</p>
<pre><code class="hljs">var db = Titanium.Database.open('tips');
db.execute('<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> tips (<span class="hljs-keyword">id</span> <span class="hljs-built_in">INTEGER</span> PRIMARY <span class="hljs-keyword">KEY</span>, title <span class="hljs-built_in">TEXT</span>, tip <span class="hljs-built_in">TEXT</span>)<span class="hljs-string">');</span></span>
</code></pre><p>Errors</p>
<pre><code class="hljs">var db = Titanium.Database.install('../testdb.db');
db.execute('<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> tips (<span class="hljs-keyword">id</span> <span class="hljs-built_in">INTEGER</span> PRIMARY <span class="hljs-keyword">KEY</span>, title <span class="hljs-built_in">TEXT</span>, tip <span class="hljs-built_in">TEXT</span>)<span class="hljs-string">');</span></span>
</code></pre><p>Errors</p>
<pre><code class="hljs">var db = Titanium.Database.install('../testdb.db', 'tips');
db.execute('<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> tips (<span class="hljs-keyword">id</span> <span class="hljs-built_in">INTEGER</span> PRIMARY <span class="hljs-keyword">KEY</span>, title <span class="hljs-built_in">TEXT</span>, tip <span class="hljs-built_in">TEXT</span>)<span class="hljs-string">');</span></span>
</code></pre><p>Errors</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> db = Titanium.Database.install(<span class="hljs-string">'../testdb.db'</span>, <span class="hljs-string">'tips'</span>);
</code></pre><p>Errors</p>
<p>..&#x2F;testdb.db Errors, testdb.db Errors</p>
<p>Maybe someone can just post a full code sample to install a database and read from it. This should be one of the easiest things to on any platform and yet there isn&#39;t a single code sample that uses database.install.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 31st 2010, 7:11:19 pm">October 31st 2010</span>
								by <span class='authorname'>Grant Wolz</span><br>
								<a class="icon-bg icon-link" href="question/75011/titaniumdatabase-undefined.html#answer-135161" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-135181">
				
						<section>
							<p>The code in this post http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;71731&#x2F;database-install-making-me-sad- </p>
<p>If you paste that code into your app.js and put the testdb.db from the KitchenSink in the Resources folder alongside app.js the code will work as long as you get rid of the ..&#x2F; from the path in the install method.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 31st 2010, 7:58:22 pm">October 31st 2010</span>
								by <span class='authorname'>John McKnight</span><br>
								<a class="icon-bg icon-link" href="question/75011/titaniumdatabase-undefined.html#answer-135181" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-203001">
				
						<section>
							<p>Bump. I&#39;ve tried every method on this page so far, and the pages this one link to, and not one method works. I get </p>
<pre><code class="hljs">[<span class="hljs-keyword">ERROR</span>] Script <span class="hljs-keyword">Error</span> = Result <span class="hljs-keyword">of</span> expression <span class="hljs-comment">'Titanium.Database' </span>
[undefined] <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> an <span class="hljs-built_in">object</span>. at history.js (line <span class="hljs-number">33</span>). <span class="hljs-keyword">with</span> all.
</code></pre><p>My code: var conn = Titanium.Database.install(&#39;testdb.db&#39;,&#39;testdb&#39;);</p>
<p>My environ:<br> iPhone simulator on OS X Snow Leapard<br> Titanium 1.2.2<br> Titanium SDK 1.5.1<br> iPhone SDK 4.2</p>
<p>Could this be a permissions thing? I&#39;ve made sure the database is in the same folder, and is not read only. I can open the database with other apps just fine. </p>
<p>Frustrated,<br>RD</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 25th 2011, 11:43:24 am">February 25th 2011</span>
								by <span class='authorname'>Richard John</span><br>
								<a class="icon-bg icon-link" href="question/75011/titaniumdatabase-undefined.html#answer-203001" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
