<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>DRY transformFunction() for use in Collection databinding? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>DRY transformFunction() for use in Collection databinding?</h1>
		</header>
		<section>
			<p>Is there a way to reuse a transformFunction in multiple controllers? I have several places where I want to display similarly processed attributes from the same Controller&#39;s Models.</p>
<p>In page_1.xml:</p>
<pre><code class="hljs">        <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"MyModel"</span> <span class="hljs-attribute">dataTransform</span>=<span class="hljs-value">"transformFunction"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"{formatted_date}"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
</code></pre><p>In page_2.xml:</p>
<pre><code class="hljs">        <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"MyModel"</span> <span class="hljs-attribute">dataTransform</span>=<span class="hljs-value">"transformFunction"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"{formatted_date}"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
</code></pre><p>Where could &quot;transformFunction&quot; sit and be used in both pages?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 20th 2013, 2:23:35 pm">February 20th 2013</span>
				by <span class='authorname'>Joseph Beuckman</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>databinding</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-257183">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>I would do this, much as Nick suggested: <a href="https:&#x2F;&#x2F;gist.github.com&#x2F;tonylukasavage&#x2F;4997849">https:&#x2F;&#x2F;gist.github.com&#x2F;tonylukasavage&#x2F;4997849</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 20th 2013, 4:34:39 pm">February 20th 2013</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="question/148543/dry-transformfunction-for-use-in-collection-databinding#answer-257183" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Nice - this way I write and maintain one function. It&#39;s a yucky global, but at least it&#39;s just one.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2013, 4:37:50 pm">February 20th 2013</span>
											by <span class='authorname'>Joseph Beuckman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Knew he would :-)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2013, 4:41:22 pm">February 20th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you don&#39;t like the idea of a &quot;global&quot;, you can always create a commonjs module that contains the function, but in the end, the result and implementation is the same.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2013, 4:43:36 pm">February 20th 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Cool - I didn&#39;t know that you could write attribute values this complex, but it works</p>
<pre><code class="hljs">
        <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">dataCollection</span>=<span class="hljs-value">"MyModel"</span> <span class="hljs-attribute">dataTransform</span>=<span class="hljs-value">"require('transform_helper').transformFunction"</span>&gt;</span>
</code></pre><p>lib&#x2F;transform_helper.js </p>
<pre><code class="hljs">exports.transformFunction = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(model)</span> </span>{
    <span class="hljs-keyword">var</span> trans = model.toJSON();

    ...

    <span class="hljs-keyword">return</span> trans;
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 20th 2013, 4:50:05 pm">February 20th 2013</span>
											by <span class='authorname'>Joseph Beuckman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I wouldn&#39;t make that a common practice, but yeah, you can do that</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2013, 5:03:46 pm">February 20th 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-257179">
				
						<section>
							<p>You could always have a global function with your logic that is called from both collections&#39; own <code>transforFunction</code> ?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 20th 2013, 2:28:42 pm">February 20th 2013</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="question/148543/dry-transformfunction-for-use-in-collection-databinding#answer-257179" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hm - still writing two functions (actually three).</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2013, 2:32:05 pm">February 20th 2013</span>
											by <span class='authorname'>Joseph Beuckman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>But only ever change in one place after that… I&#39;m sure Tony will see this and give a better response :-)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 20th 2013, 2:34:41 pm">February 20th 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-257212">
				
						<section>
							<p>why dont you just extend the collection or model object since it seems to be a method that is directly related to the object. Making it global or putting it a library seems to be arbitrary IMHO</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 21st 2013, 12:20:50 am">February 21st 2013</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/148543/dry-transformfunction-for-use-in-collection-databinding#answer-257212" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>That&#39;s probably the cleanest way to do it in this case. But, it&#39;s not strictly MVC since presentation logic doesn&#39;t belong in the Model.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 1:27:46 pm">February 21st 2013</span>
											by <span class='authorname'>Joseph Beuckman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Personally, I&#39;d rather developers write clean code rather than be slavish to framework concepts. Whatever works though.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 1:32:57 pm">February 21st 2013</span>
											by <span class='authorname'>Tony Lukasavage</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@joseph i would have to disagree, if you look at what they do in a rails model… this fits perfectly into it, if you look at how the backbone community extends models, this once again fits perfectly into  that approach… So in what MVC framework would the be considered &quot;incorrect&quot;… remember this is real world not theory</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 2:12:45 pm">February 21st 2013</span>
											by <span class='authorname'>Aaron Saunders</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Agreed. I&#39;m not sure that concatenating values for composite display, or formatting values from the data source,count as presentation logic -  they are still part of the model.  eg. Would you not apply formatting to a raw datetime object inside the model in order for it to display sensibly ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 2:26:19 pm">February 21st 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Putting common presentation logic in the model is probably widely done and fine by me. I was just explaining why I might want it outside the model since @aaron said it seemed arbitrary. I&#39;m definitely no slave to framework concepts, but I appreciate how much Ti is improved by adapting the clarity MVC provides. If this happens a lot or putting it in the Model mucks things up, there might be an argument to build a place in Alloy for model-common presentation logic.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 21st 2013, 2:27:16 pm">February 21st 2013</span>
											by <span class='authorname'>Joseph Beuckman</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
