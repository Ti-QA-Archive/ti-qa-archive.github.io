<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium Desktop - File Drag and Drop » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium Desktop - File Drag and Drop</h1>
		</header>
		<section>
			<p>When will the API support dragging and dropping files into a Titanium Desktop application? Using fancy workarounds (like a hidden textarea) for this (for a &quot;native&quot; application) <strong>essential task</strong> is a pain in the butt.<br>This would really be a huge relief, because, besides from this, I really enjoy build win32 apps using Titanium Desktop!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 17th 2011, 6:01:34 am">June 17th 2011</span>
				by <span class='authorname'>Jonas Doebertin</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>desktop</span></li>
					
						<li><span class='tagname'>drag</span></li>
					
						<li><span class='tagname'>drop</span></li>
					
						<li><span class='tagname'>file</span></li>
					
						<li><span class='tagname'>win32</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>9</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>9 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-210619">
				
						<section>
							<p>&gt;You should have a look to this:<br>&gt;<br>&gt;http:&#x2F;&#x2F;html5demos.com&#x2F;drag-anything</p>
<p>I had a look at that page before. But if I use the exact same code in Titanium Desktop, I get the &quot;dragging not allowed&quot; symbol when dragging a file over the &quot;drag here&quot; field and nothing happens when I drop the file. <strong>That doesn&#39;t work!</strong></p>
<p>Maybe somebody can show me an example code, how to use this in Titanium to make it work?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 17th 2011, 3:00:15 pm">June 17th 2011</span>
								by <span class='authorname'>Jonas Doebertin</span><br>
								<a class="icon-bg icon-link" href="../../question/121210/titanium-desktop---file-drag-and-drop.html#answer-210619" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-215528">
				
						<section>
							<p>http:&#x2F;&#x2F;jsbin.com&#x2F;alura3&#x2F;edit</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 5th 2011, 8:29:18 am">August 5th 2011</span>
								by <span class='authorname'>Vadim Demedes</span><br>
								<a class="icon-bg icon-link" href="../../question/121210/titanium-desktop---file-drag-and-drop.html#answer-215528" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-210585">
				
						<section>
							<p>You should have a look to this:</p>
<p>http:&#x2F;&#x2F;html5demos.com&#x2F;drag-anything</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 17th 2011, 9:06:09 am">June 17th 2011</span>
								by <span class='authorname'>Ivan Mathy</span><br>
								<a class="icon-bg icon-link" href="../../question/121210/titanium-desktop---file-drag-and-drop.html#answer-210585" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>&gt;You should have a look to this:<br>&gt;<br>&gt;http:&#x2F;&#x2F;html5demos.com&#x2F;drag-anything</p>
<p>I had a look at that page before. But if I use the exact same code in Titanium Desktop, I get the &quot;dragging not allowed&quot; symbol when dragging a file over the &quot;drag here&quot; field and nothing happens when I drop the file. That doesn&#39;t work!</p>
<p>Maybe somebody can show me an example code, how to use this in Titanium to make it work?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 17th 2011, 3:00:48 pm">June 17th 2011</span>
											by <span class='authorname'>Jonas Doebertin</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-213525">
				
						<section>
							<p>I tried the code from html5demos on a windows machine and it doesn&#39;t work. Seems to work fine on a mac though. This is all using the 1.1 version of Titanium Desktop. Anyone know what version of WebKit is used in the 1.1 version of Titanium Desktop - perhaps it doesn&#39;t have dnd support baked in?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 18th 2011, 4:33:42 pm">July 18th 2011</span>
								by <span class='authorname'>Sean O Shea</span><br>
								<a class="icon-bg icon-link" href="../../question/121210/titanium-desktop---file-drag-and-drop.html#answer-213525" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-213655">
				
						<section>
							<p>See <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;117783&#x2F;file-drag-and-drop-in-titanium-desktop">here</a> guys.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 19th 2011, 1:30:34 pm">July 19th 2011</span>
								by <span class='authorname'>Sharry Stowell</span><br>
								<a class="icon-bg icon-link" href="../../question/121210/titanium-desktop---file-drag-and-drop.html#answer-213655" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-213662">
				
						<section>
							<p>Odd that it works on mac, but not on Windows. Some tickets from the Titanium jira: http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIDESK-278, http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIDESK-17 &amp; http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIDESK-67</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 19th 2011, 3:07:30 pm">July 19th 2011</span>
								by <span class='authorname'>Sean O Shea</span><br>
								<a class="icon-bg icon-link" href="../../question/121210/titanium-desktop---file-drag-and-drop.html#answer-213662" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-218675">
				
						<section>
							<p>Yup. I&#39;m struggling with this now in a desktop app I&#39;m building. The HTML5 drag&#x2F;drop works like a charm on Mac but not at all on Win. I think I&#39;m going to have to settle for using openFileChooserDialog. At least it&#39;s more &quot;tried &amp; true.&quot;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 13th 2011, 3:38:32 am">September 13th 2011</span>
								by <span class='authorname'>Mike Casto</span><br>
								<a class="icon-bg icon-link" href="../../question/121210/titanium-desktop---file-drag-and-drop.html#answer-218675" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-238028">
				
						<section>
							<p>Hello, i used :<br>http:&#x2F;&#x2F;jsbin.com&#x2F;alura3&#x2F;edit<br>and<br>http:&#x2F;&#x2F;html5demos.com&#x2F;drag-anything</p>
<p>When a &quot;ondrop&quot; event is trigged, you can get all the datas in e.dataTransfer.<br>1) e.dataTransfer.files returns a list of Javascript File Objet : all the dropped files. You can get their names, types, etc, but not their path… it&#39;s why the 1st code doesn&#39;t work.<br>2) e.dataTransfer.types returns a DOMStringList which is a list of data of the 1st dropped element. If the element is a file, the first data is the file url. To get the data, you must use the e.dataTransfer.getData() method. That&#39;s why the &quot;html5demos&quot; code works.</p>
<p>So I edited the JS of the first code with the html5demos tips. But my code only return the url of the first file dropped.</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"holder"</span>&gt;</span>
    Drop files here
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">           
    <span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'holder'</span>);

        div.ondragenter = div.ondragover = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            e.preventDefault();
            e.dataTransfer.dropEffect = <span class="hljs-string">'copy'</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        div.ondrop = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            <span class="hljs-comment">// if one (or more) FILE is droped. Not a link, a bookmark or whatever</span>
            <span class="hljs-keyword">if</span>(e.dataTransfer.files.length &gt; <span class="hljs-number">0</span>) {     
                <span class="hljs-comment">// the 1st file droped as File object</span>
                <span class="hljs-keyword">var</span> file = e.dataTransfer.files[<span class="hljs-number">0</span>];
                <span class="hljs-comment">// the DOMStringList of the 1st droped element. Here, a file                </span>
                types = e.dataTransfer.types;
                <span class="hljs-comment">// the 1st data of the DOMStringList of a file is the url</span>
                file_url = e.dataTransfer.getData(types[<span class="hljs-number">0</span>]);

                alert (file.name + <span class="hljs-string">"\n"</span> + file.type + <span class="hljs-string">"\n"</span> + file_url);
            }

            e.preventDefault();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 7th 2012, 4:43:26 pm">May 7th 2012</span>
								by <span class='authorname'>Sylvain Mariel</span><br>
								<a class="icon-bg icon-link" href="../../question/121210/titanium-desktop---file-drag-and-drop.html#answer-238028" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-238795">
				
						<section>
							<p>after playing around for many hours I found that the problem on windows is that the dataTransfer.effectAllowed property is read only meaning that you cannot set it to &quot;copy&quot; or &quot;all&quot; to indicate that you can drop files. So I have produced a work around by storing the files you are going to drop on the ondragenter event and then detecting the drop in the onmouseover event instead. The end result is that we can detect a drop of files and get hold of all of the file information. Here is a full file that will work on windows (developed using studio 2.0).</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Drag and Drop in Titanium Desktop!<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/css"</span>&gt;</span><span class="css">
        <span class="hljs-id">#holder</span>
        <span class="hljs-rules">{
            <span class="hljs-rule"><span class="hljs-attribute">border</span>:<span class="hljs-value"> <span class="hljs-number">10px</span> dashed <span class="hljs-hexcolor">#ccc</span></span></span>;
            <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">300px</span></span></span>;
            <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value"> <span class="hljs-number">300px</span></span></span>;
            <span class="hljs-rule"><span class="hljs-attribute">margin</span>:<span class="hljs-value"> <span class="hljs-number">20px</span> auto</span></span>;
        }</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">/**
         * bug fix since dataTransfer.effectAllowed seems to be read only.
         * Therefore have to "steal" data from the drag enter event and then detect a drop. 
         */</span>
        <span class="hljs-keyword">var</span> acceptDrop = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">var</span> acceptFiles =[];
        <span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'holder'</span>);
            div.ondragenter = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
                acceptDrop = <span class="hljs-literal">true</span>;
                <span class="hljs-comment">//acceptFiles = e.dataTransfer.files;</span>
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; e.dataTransfer.files.length; i++) { <span class="hljs-comment">// e.dataTransfer is a DataTransfer object (https://developer.mozilla.org/En/DragDrop/DataTransfer), e.dataTransfer.files is a FileList object (https://developer.mozilla.org/en/DOM/FileList)</span>
                       <span class="hljs-keyword">var</span> file = e.dataTransfer.files[i]; 
                       <span class="hljs-keyword">var</span> fileInfoCopy = {};
                       <span class="hljs-keyword">for</span>(f <span class="hljs-keyword">in</span> file) {
                           fileInfoCopy[f] = file[f];
                    }
                    acceptFiles.push(fileInfoCopy);
                   }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            div.onmouseout = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//cancel drop since left the div</span>
                acceptDrop = <span class="hljs-literal">false</span>;          
            }
            div.onmouseover = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">if</span> (acceptDrop) {
                    acceptDrop = <span class="hljs-literal">false</span>;
                    <span class="hljs-comment">//once you let go of the dragged files then this event is triggered.</span>
                    <span class="hljs-comment">//so handle as if it was the ondrop.</span>
                    <span class="hljs-keyword">var</span> out = [];
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; acceptFiles.length; i++) { <span class="hljs-comment">// e.dataTransfer is a DataTransfer object (https://developer.mozilla.org/En/DragDrop/DataTransfer), e.dataTransfer.files is a FileList object (https://developer.mozilla.org/en/DOM/FileList)</span>
                        <span class="hljs-keyword">var</span> file = acceptFiles[i]; <span class="hljs-comment">// file is a File object (https://developer.mozilla.org/en/DOM/File)</span>

                        <span class="hljs-keyword">for</span>(f <span class="hljs-keyword">in</span> file) {
                            out.push(f+<span class="hljs-string">"="</span>+file[f]+<span class="hljs-string">"&lt;br/&gt;"</span>);
                        }
                        out.push(<span class="hljs-string">"====="</span>);
                        <span class="hljs-comment">//var tiFile = Titanium.Filesystem.getFile(file.path);</span>
                        <span class="hljs-comment">// log the browser file</span>
                        <span class="hljs-comment">//console.log(file);</span>
                        <span class="hljs-comment">// log the Titanium wrapped version of this file, and that it exists</span>
                        <span class="hljs-comment">//console.log(tiFile, tiFile.exists());</span>
                        <span class="hljs-comment">// log the contents of the file, with '' appended to force the blob to convert to a string</span>
                        <span class="hljs-comment">//console.log(tiFile.read() + '');</span>
                    }
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'debug'</span>).innerHTML = out.join(<span class="hljs-string">''</span>);
                }
            }
            div.ondragover = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-comment">//e.preventDefault();</span>
                <span class="hljs-comment">//e.dataTransfer.effectAllowed ='all';</span>
                <span class="hljs-comment">//console.info('dragover:'+e.dataTransfer.effectAllowed);</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            div.ondrop = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">var</span> out = [];
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; e.dataTransfer.files.length; i++) { <span class="hljs-comment">// e.dataTransfer is a DataTransfer object (https://developer.mozilla.org/En/DragDrop/DataTransfer), e.dataTransfer.files is a FileList object (https://developer.mozilla.org/en/DOM/FileList)</span>
                    <span class="hljs-keyword">var</span> file = e.dataTransfer.files[i]; <span class="hljs-comment">// file is a File object (https://developer.mozilla.org/en/DOM/File)</span>

                    <span class="hljs-keyword">var</span> tiFile = Titanium.Filesystem.getFile(file.path);
                    <span class="hljs-keyword">for</span>(f <span class="hljs-keyword">in</span> file) {
                        out.push(f+<span class="hljs-string">"="</span>+file[f]+<span class="hljs-string">"&lt;br/&gt;"</span>);
                    }
                    out.push(<span class="hljs-string">"====="</span>);
                    <span class="hljs-comment">// log the browser file</span>
                    <span class="hljs-comment">//console.log(file);</span>
                    <span class="hljs-comment">// log the Titanium wrapped version of this file, and that it exists</span>
                    <span class="hljs-comment">//console.log(tiFile, tiFile.exists());</span>
                    <span class="hljs-comment">// log the contents of the file, with '' appended to force the blob to convert to a string</span>
                    <span class="hljs-comment">//console.log(tiFile.read() + '');</span>
                }
                <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'debug'</span>).innerHTML = out.join(<span class="hljs-string">''</span>);
                e.preventDefault();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"holder"</span>&gt;</span>
        Drop files here<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"debug"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 16th 2012, 6:59:50 pm">May 16th 2012</span>
								by <span class='authorname'>si test</span><br>
								<a class="icon-bg icon-link" href="../../question/121210/titanium-desktop---file-drag-and-drop.html#answer-238795" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
