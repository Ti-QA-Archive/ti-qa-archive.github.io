<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>How to convert an imageview with its children to a blob? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>How to convert an imageview with its children to a blob?</h1>
		</header>
		<section>
			<p>Titanium SDK version 3.1.1.GA<br>Alloy: 1.0<br>iOS SDK: 6.0<br>iOS iPad Simulator: 6.0</p>
<p>I&#39;m writing an app for iPad where users select icons which populates a page that is generated at the end of the app.  I&#39;d like the ability to save this page with the selected icons displayed on it as a blob to the filesystem.  I tried taking a screenshot of the page, using that image in an imageview, and then converted that to a blob using the <code>toImage()</code> method.  The problem is, the <code>Titanium.Media.takeScreenshot</code> function tends to crash my app and causes a sharp spike in memory usage.</p>
<p>I need a way to be able to save an image blob of my template (imageview) with selected icons added to it (children).  I realize the <code>toImage()</code> method doesn&#39;t include the children when it converts the imageview to a blob.</p>
<p>How can I convert an imageview with its children to a blob without taking a screenshot?</p>
<p>To give you a better idea, here&#39;s the code I was working with previously…</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">takeScreenshot</span><span class="hljs-params">()</span> </span>{
    Titanium.Media.takeScreenshot(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span></span>{

            <span class="hljs-keyword">var</span> templateView = Ti.UI.createImageView({
                        image: event.media,
                        width: <span class="hljs-number">750</span>,
                        height: <span class="hljs-number">562</span>
                    });

            templateBlob = templateView.toImage();

            <span class="hljs-keyword">var</span> fileName = Alloy.Globals.fileName;

                <span class="hljs-keyword">var</span> templateFile = Titanium.Filesystem.getFile(templateDir.nativePath, fileName);

                templateFile.write(templateBlob);

            });

}
</code></pre><p>Any suggestions or feedback would be greatly appreciated.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 26th 2013, 1:43:44 pm">August 26th 2013</span>
				by <span class='authorname'>Eric Duvon</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>alloy</span></li>
					
						<li><span class='tagname'>filesystem</span></li>
					
						<li><span class='tagname'>imageview</span></li>
					
						<li><span class='tagname'>ipad</span></li>
					
						<li><span class='tagname'>memory</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-267701">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>You mentioned more than once that your imageView has child views and that you are trying to convert that to an image blob.  There is no code to show how you achieve this - but if your explanation is literally using an imageView and placing views inside that - this may be your problem.</p>
<p>I would suggest you try creating a parent standard <strong>view</strong>, then place your image inside that and then your other child objects as well - ALL of these should be added to the view and added in order - do NOT add any to the imageView.</p>
<p>Then try the <strong>toImage</strong> method on the new parent view.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 26th 2013, 2:09:25 pm">August 26th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/156415/how-to-convert-an-imageview-with-its-children-to-a-blob#answer-267701" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Worked like a charm, thanks Malcom.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 26th 2013, 2:54:07 pm">August 26th 2013</span>
											by <span class='authorname'>Eric Duvon</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
