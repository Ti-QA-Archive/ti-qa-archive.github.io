<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>App keeps crashing when executing a database command Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>App keeps crashing when executing a database command</h1>
		</header>
		<section>
			<p>Howdy,</p>
<p>My app keeps crashing every time I try to execute a SQL query.  Below is a snippet of code that <em>should</em> install a preexisting database called <code>products.sqlite</code>, open the database, then drop a table called <code>products</code> if it exists.</p>
<pre><code class="hljs">Ti.Database.install('products.sqlite', 'productDB');
<span class="hljs-keyword">var</span> <span class="hljs-keyword">db</span> = Ti.Database.<span class="hljs-keyword">open</span>('productDB');

<span class="hljs-keyword">db</span>.execute('<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> EXISTS products');     <span class="hljs-comment">// Remove the products table</span>
</code></pre><p>Am I installing or opening the database incorrectly?  This is an iPad app on iOS 4.2.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 27th 2011, 8:37:42 pm">January 27th 2011</span>
				by <span class='authorname'>Scott Heath</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>execute</span></li>
					
						<li><span class='tagname'>ipad</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-186801">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Indeed, install does install and open the database. However, the apidocs explain that the arguments of <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.Database.install-method.html">Ti.Database.install</a> are actually <code>path</code> and <code>name</code>.</p>
<p>This is explained in more detail in the <a href="http:&#x2F;&#x2F;guides.appcelerator.com&#x2F;en&#x2F;local_data.html#sqlite_databases">SQLite Databases</a> guide.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 28th 2011, 12:33:45 am">January 28th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/105771/app-keeps-crashing-when-executing-a-database-command.html#answer-186801" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Scott, were you able to solve this? If so, would you mind posting the steps you took next to the answer that helped you most, and then close the post so that others may find it easily in future?  This is explained in the <a href="http:&#x2F;&#x2F;guides.appcelerator.com&#x2F;en&#x2F;contribute.html#participating_in_the_q&amp;a">Participating in the Q&amp;A</a> guide.  Thanks a lot :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2011, 11:05:36 am">February 3rd 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This is a project for work and I had to take a break to focus on other tasks.  I&#39;ll try your suggestion out soon and let you know how it worked out if me.  If it proves successful, I&#39;ll be sure to mark your answer and close the case.  Thanks for the help!</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2011, 1:17:49 pm">February 3rd 2011</span>
											by <span class='authorname'>Scott Heath</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You are welcome, Scott. Of course, if you still need help with this, just update the thread and I will try again. :)</p>
<p>Good luck!</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 3rd 2011, 5:01:40 pm">February 3rd 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;m back to work on this issue but it still keeps crashing my app.</p>
<p>The the database filename is &#39;products.sqlite&#39; and is stored in the Resources folder, so my path should be correct.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 2:38:57 pm">February 4th 2011</span>
											by <span class='authorname'>Scott Heath</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Scott</p>
<p>I don&#39;t think it is correct. Try the follwing:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> db = Ti.Database.install(<span class="hljs-string">'/'</span>, <span class="hljs-string">'products.sqlite'</span>);
</code></pre><p>What this does is copy the file from your Resources folder to the default location of your application&#39;s databases on the simulator&#x2F;device at runtime.</p>
<p>The above only needs to be done once (otherwise, you are simply attempting to copy over the same database again). Thereafter, use the following:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> db</span> = Ti.Database.<span class="hljs-keyword">open</span>('products.sqlite');
</code></pre><p>The information in <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;108731&#x2F;why-data-is-not-inserting-in-database-when-using-sqlite#192221">this post</a> may also be useful to you.</p>
<p>Let me know if it helps.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 3:06:32 pm">February 4th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I don&#39;t think that first bit of code is right.  In the example you linked to, they use the following:</p>
<pre><code class="hljs"><span class="hljs-title">ar</span> db = Ti.Database.install(<span class="hljs-string">'../tit_mob_test.sqlite'</span>,<span class="hljs-string">'tit_mob_test'</span>);
</code></pre><p>Fortunately, you did illuminate, along with the help of that WHILE loop in the example you referenced, that the changes I was making to the database weren&#39;t actually being saved to the sqlite file, but instead to the copy that exists in the mobile simulators runtime environment.</p>
<p>I&#39;m curious what that means for database persistence, but will burn that bridge when I get to it.  Thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 3:30:16 pm">February 4th 2011</span>
											by <span class='authorname'>Scott Heath</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-186691">
				
						<section>
							<p>What if you combine the first two lines into:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> db = Ti.Database.install(<span class="hljs-string">'products.sqlite'</span>, <span class="hljs-string">'productDB'</span>);
</code></pre><p>The install will do an install and&#x2F;or open, so calling the open again <em>might</em> be the problem.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 27th 2011, 8:57:58 pm">January 27th 2011</span>
								by <span class='authorname'>Dan Giulvezan</span><br>
								<a class="icon-bg icon-link" href="../../question/105771/app-keeps-crashing-when-executing-a-database-command.html#answer-186691" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I tried this, but it still keeps crashing.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2011, 2:39:23 pm">February 4th 2011</span>
											by <span class='authorname'>Scott Heath</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
