<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium Barcode Scanner issue: multiple success events fired Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium Barcode Scanner issue: multiple success events fired</h1>
		</header>
		<section>
			<p>We are using the [Titanium Barcode Scanner] (https:&#x2F;&#x2F;marketplace.appcelerator.com&#x2F;apps&#x2F;4963?restoreSearch=true#!overview) module from the marketplace in one of our apps . We use Titanium SDK 3.3.0. </p>
<p>The issue we are facing is as follows:<br>The first time we open up the window with the scanner, it scans perfectly fine.<br>However, the second time we open up the window with the scanner, it scans the barcode and returns the success event twice. The third time we open up the window, it returns the success event thrice and so on.</p>
<p>We have tried removing the eventlistner for success when we go form one window to another. We have also tried making the barcode object null when we move to another window. We have also tried closing the window which removes it from the memory. But the issue still persists.</p>
<p>This is how we initialize the Barcode:</p>
<pre><code class="hljs">var BarcodeUsed = require(<span class="hljs-string">'ti.barcode'</span>);
BarcodeUsed.allowRotation = <span class="hljs-literal">true</span>;
BarcodeUsed.displayedMessage = <span class="hljs-string">' '</span>;
BarcodeUsed.allowMenu = <span class="hljs-literal">false</span>;
BarcodeUsed.allowInstructions = <span class="hljs-literal">false</span>;
BarcodeUsed.useLED = <span class="hljs-literal">false</span>;

BarcodeUsed.capture({
        <span class="hljs-string">animate :</span> <span class="hljs-literal">false</span>,
        <span class="hljs-comment">//overlay : overlay,</span>
        <span class="hljs-string">showCancel :</span> <span class="hljs-literal">true</span>,
        <span class="hljs-string">showRectangle :</span> <span class="hljs-literal">true</span>,
        <span class="hljs-string">keepOpen :</span> <span class="hljs-literal">false</span>,
        <span class="hljs-string">acceptedFormats :</span> [BarcodeUsed.FORMAT_CODE_128]
    });
</code></pre><p>This is how we handle the event listeners</p>
<pre><code class="hljs"><span class="hljs-type">BarcodeUsed</span>.addEventListener('error', function(e) {
    scanResult.text = e.message;
});

<span class="hljs-type">BarcodeUsed</span>.addEventListener('cancel', function(e) {
    <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info('<span class="hljs-type">Cancel</span> received');
});

<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
<span class="hljs-type">BarcodeUsed</span>.addEventListener('success', function(e) {

    //i++;
    //alert(<span class="hljs-string">"Successs ..... "</span> + e.<span class="hljs-literal">result</span> + <span class="hljs-string">"Count : "</span> + i);

    <span class="hljs-type">Ti</span>.<span class="hljs-type">API</span>.info('<span class="hljs-type">Success</span> called <span class="hljs-keyword">with</span> barcode: ' + e.<span class="hljs-literal">result</span>);
<span class="hljs-keyword">if</span>(e.<span class="hljs-literal">result</span> == prevBarcode){
            alert('same bar code....');
        } <span class="hljs-keyword">else</span> {
            prevBarcode = e.<span class="hljs-literal">result</span>;
    success1(e.<span class="hljs-literal">result</span>);
}

});
</code></pre><p>We have used the eventlisters from the examples and made a few modifications for the functionality.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 20th 2014, 12:58:18 pm">November 20th 2014</span>
				by <span class='authorname'>Rushabh Shah</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>barcode</span></li>
					
						<li><span class='tagname'>scanner</span></li>
					
						<li><span class='tagname'>success event</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
