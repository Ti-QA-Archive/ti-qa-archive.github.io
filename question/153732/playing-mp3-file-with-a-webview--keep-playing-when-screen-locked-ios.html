<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Playing mp3 file with a webView + keep playing when screen locked (iOS) Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Playing mp3 file with a webView + keep playing when screen locked (iOS)</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I&#39;m using the following code to stream an mp3 file using a webview:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> theWvWebView = Ti.UI.createWebView(webViewOptions);
theWvWebView.url = <span class="hljs-built_in">encodeURI</span>(url); <span class="hljs-comment">// url = link to mp3 file</span>
</code></pre><p>everything works fine until the iPhone&#39;s screen is locked, and then the music stops playing.</p>
<p>I&#39;ve tried the suggestion I saw here like adding this line to the app.js:</p>
<pre><code class="hljs">Ti.Media.defaultAudioSessionMode = Ti.Media.AUDIO_SESSION_MODE_PLAYBACK<span class="hljs-comment">;</span>
</code></pre><p>and adding this to tiapp.xml:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">iphone</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">backgroundModes</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">mode</span>&gt;</span>audio<span class="hljs-tag">&lt;/<span class="hljs-title">mode</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">backgroundModes</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">iphone</span>&gt;</span>
</code></pre><p>but it didnt work (I think these are used when you are using a media player, not a webview to play the files).</p>
<p>Any idea how can I solve this problem?</p>
<p>Thanks,</p>
<p>Idan</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 17th 2013, 6:28:37 am">June 17th 2013</span>
				by <span class='authorname'>Idan Jan</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>mp3</span></li>
					
						<li><span class='tagname'>streaming</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-265340">
				
						<section>
							<p>Hello Idan, </p>
<p>I am pretty sure the behavior that you want is not possible. Only by using intents with the native media player (which causes it to continue playing even after the screen is locked) can you achieve this. Since you cannot have an intent on streaming media through a webview, iOS will automatically sleep the webview activity and thus stop the music from playing. Is there a certain reason you must use a webview to achieve this? </p>
<p>Best,</p>
<p>Carter</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 3rd 2013, 9:15:50 pm">July 3rd 2013</span>
								by <span class='authorname'>Carter Lathrop</span><br>
								<a class="icon-bg icon-link" href="../../question/153732/playing-mp3-file-with-a-webview--keep-playing-when-screen-locked-ios.html#answer-265340" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265414">
				
						<section>
							<p>Thanks for the response.<br>Actually I was able to accomplish this but forgot to update this ticket.<br>I just used the standard method and it worked (I had to clean my build directory)</p>
<p>Idan</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 5th 2013, 2:05:26 am">July 5th 2013</span>
								by <span class='authorname'>Idan Jan</span><br>
								<a class="icon-bg icon-link" href="../../question/153732/playing-mp3-file-with-a-webview--keep-playing-when-screen-locked-ios.html#answer-265414" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Can you elaborate on this? If you did indeed get this to work with a webview, mind shedding some light on how you did it. I am quite intrigued :D.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 5th 2013, 4:41:05 pm">July 5th 2013</span>
											by <span class='authorname'>Carter Lathrop</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265503">
				
						<section>
							<p>Yea, sure, here&#39;s how I did it:</p>
<p>This is the webview that plays the mp3 file (&quot;url&quot; is the link to the mp3 file):</p>
<pre><code class="hljs">var theWvWebView = Ti.UI.createWebView(webViewOptions)<span class="hljs-comment">;</span>
theWvWebView.height = getTopBottomOrHeightProportional(430)<span class="hljs-comment">; </span>
theWvWebView.url = encodeURI(url)<span class="hljs-comment">;</span>
theWvWindow.add(theWvWebView)<span class="hljs-comment">;</span>
</code></pre><p>and this is what I added to tiapp.xml</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">ios</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">plist</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>UIBackgroundModes<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>audio<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">plist</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ios</span>&gt;</span>
</code></pre><p>hope this helps,<br>Idan</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 7th 2013, 4:03:48 am">July 7th 2013</span>
								by <span class='authorname'>Idan Jan</span><br>
								<a class="icon-bg icon-link" href="../../question/153732/playing-mp3-file-with-a-webview--keep-playing-when-screen-locked-ios.html#answer-265503" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
