<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Apply Event on UI Controls in Array » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Apply Event on UI Controls in Array</h1>
		</header>
		<section>
			<p>Hi, I&#39;ve a nested array named controls. Each element of controls array is a set of 6 UI components 2 buttons and 4 labels something like <del>~ [ [{},…{}], [{}….{}]…]</del>~. I&#39;ve displayed all of the elements of the controls. Now the problem is that I&#39;ve to apply onClick event on the two buttons and 1 label on each index of controls array and each component will perform different functionality? I am stucked here and don&#39;t have any idea how to do this? Please guide me to do this I&#39;ll be really grateful….Thanks.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 6th 2012, 9:27:32 am">July 6th 2012</span>
				by <span class='authorname'>Muhammad Qasim</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>eventlistener</span></li>
					
						<li><span class='tagname'>events</span></li>
					
						<li><span class='tagname'>javascript</span></li>
					
						<li><span class='tagname'>ui controls</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>can you provide some code of what your doing please.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 6th 2012, 10:05:43 am">July 6th 2012</span>
								by <span class='authorname'>Trevor Ward</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi, Trevor. Thanks for response. My code is very large however the following code may give you some idea:-</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> controls=[];
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;json.length;i++)
{
    controls[i]=[];
    <span class="hljs-keyword">var</span> btn1=createButton(<span class="hljs-decorator">{....}</span>);

    controls[i][<span class="hljs-number">0</span>]=btn1;

    <span class="hljs-keyword">var</span> lbl1=createLabel(<span class="hljs-decorator">{...}</span>)
    controls[i][<span class="hljs-number">0</span>]=lbl1;

    //create all <span class="hljs-type">UI</span> controls <span class="hljs-keyword">and</span> add to controls <span class="hljs-type">array</span>.
}
</code></pre><p>In this way I get all controls which are created in the loop in controls array. These controls (right now they are 60) are displaying perfectly but now I&#39;ve to apply events on them where I am facing problems… :(… Hope you are a bit clear now….</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 6th 2012, 10:15:50 am">July 6th 2012</span>
								by <span class='authorname'>Muhammad Qasim</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;ve tried to solve this problem in this way:-</p>
<pre><code class="hljs"><span class="hljs-keyword">for</span>(var i=<span class="hljs-number">0</span>;i&lt;json.length;i++)
{
    controls[i][<span class="hljs-number">5</span>].addEventListener(<span class="hljs-string">'click'</span>,function(e)    <span class="hljs-regexp">//</span><span class="hljs-number">5</span> <span class="hljs-keyword">is</span> index <span class="hljs-literal">no</span>. <span class="hljs-literal">on</span> which button <span class="hljs-keyword">is</span> stored.
        {
            alert(<span class="hljs-string">'You'</span>ve pressed button <span class="hljs-comment"># '+i);</span>
        }
}
</code></pre><pre><code class="hljs">It is working but you press <span class="hljs-keyword">any</span> button you will <span class="hljs-built_in">get</span> <span class="hljs-operator">the</span> <span class="hljs-keyword">last</span> <span class="hljs-built_in">value</span> <span class="hljs-operator">of</span> i where <span class="hljs-operator">the</span> loop exited. The relevent no. <span class="hljs-operator">of</span> <span class="hljs-operator">the</span> button isn<span class="hljs-string">'t showing....</span>
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="July 6th 2012, 10:46:14 am">July 6th 2012</span>
								by <span class='authorname'>Muhammad Qasim</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-242623">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>You should reuse one event listener function (or a small set of event listener functions); add properties to your controls so that when they are clicked, your event listener can reference those properties and respond accordingly.  Something like this:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> onBtnClick = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">var</span> btn = e.source;
    <span class="hljs-keyword">var</span> url = btn.myClickUrl;

    <span class="hljs-comment">// now do something with the click url...</span>
};

<span class="hljs-keyword">var</span> controls=[];
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;json.length;i++)
{
    controls[i]=[];
    <span class="hljs-keyword">var</span> btn1=createButton({....});

    <span class="hljs-comment">// set some property of the button that will let you react differently to its click event</span>
    <span class="hljs-comment">// obviously, I don't know what is in your json array, but let's assume each item has</span>
    <span class="hljs-comment">// a "url" property</span>
    btn1.myClickUrl = json[i].url;

    btn1.addEventListener (<span class="hljs-string">'click'</span>, onBtnClick);

    controls[i][<span class="hljs-number">0</span>]=btn1;

    <span class="hljs-comment">//create all UI controls and add to controls array.</span>
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 6th 2012, 10:43:39 am">July 6th 2012</span>
								by <span class='authorname'>Jason Priebe</span><br>
								<a class="icon-bg icon-link" href="question/139337/apply-event-on-ui-controls-in-array.html#answer-242623" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Wow pretty good solution….Yes I have an elementID in jason array…can i use it instead of url and can I set some property which is not built-in or predefined that is my custom property. Is this allowed?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2012, 10:55:08 am">July 6th 2012</span>
											by <span class='authorname'>Muhammad Qasim</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Aslo Plz read my last comment in above question. How can I print that message correctly? Please elaborate…..Thanks in advance.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2012, 10:57:24 am">July 6th 2012</span>
											by <span class='authorname'>Muhammad Qasim</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Your solution creates anonymous event listeners.  Each of them references the variable <code>i</code> in the same scope, so when the event fires, you get the current value of <code>i</code>, which is always the value that you gave to variable <code>i</code> right before you exited the loop.</p>
<p>There&#39;s a workaround, but it&#39;s ugly.  See <a href="http:&#x2F;&#x2F;meshfields.de&#x2F;event-listeners-for-loop&#x2F;">this page</a> for a way to do it.</p>
<p>If you use my solution, you won&#39;t have that issue at all, because you&#39;re attaching discrete properties to the different controls, and when the event fires, you get a reference to that individual control via the <code>e.source</code> property.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2012, 11:18:58 am">July 6th 2012</span>
											by <span class='authorname'>Jason Priebe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>To answer your first comment on this thread – you can add arbitrary properties to the controls.  You could do something like this if you want:</p>
<pre><code class="hljs">btn1.elementID = json<span class="hljs-string">[i]</span>.elementID;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 6th 2012, 11:27:58 am">July 6th 2012</span>
											by <span class='authorname'>Jason Priebe</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242626">
				
						<section>
							<p>There is another solution. In that you should add an event listener in a loop….</p>
<p>Instead inside the loop… call a function passing the object you want to add the vent listener too and then add the event listener in that function.</p>
<p>something like </p>
<pre><code class="hljs">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addAction</span><span class="hljs-params">(inParam)</span> </span>{
    inParam.OBJECT.addEventListener(<span class="hljs-string">'click'</span>, onBtnClick);

    <span class="hljs-keyword">return</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildData</span><span class="hljs-params">(inParam)</span> </span>{
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; inParam.DATA.length; i++)
    {
        <span class="hljs-keyword">var</span> item = Ti.UI.createView({ .... });
        <span class="hljs-comment">// build your stuff here</span>

        addAction({OBJECT : item});
    }
}
</code></pre><p>It is bad practice to add event listeners in loops, you end up with the result you have of actually all the event listeners action the same event….</p>
<p>Hope this helps</p>
<p>T…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 6th 2012, 11:16:41 am">July 6th 2012</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/139337/apply-event-on-ui-controls-in-array.html#answer-242626" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Can you elaborate on the difference here?  It seems that your code is also adding event listeners inside a loop, but you&#39;ve wrapped it inside of a function call.</p>
<p>What would be the negative consequences of the code example I provided?  Maybe I&#39;ve overlooked something…</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2012, 11:21:52 am">July 6th 2012</span>
											by <span class='authorname'>Jason Priebe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Actually, this adds individual Event Listeners to the objects… But it is always better to have fewer events listeners so using the solution of one event listener on the table and then evaluating the source object is beneficial on large amounts of data.</p>
<p>your code does actually add all the event listeners, but all of them have the same final values to process. so actually adding an event listener to the table then evaluating the source could be the ultimate solution.</p>
<p>It is what is best for the Application. This solution would enable you to create say a tableview, where each row has a view and their are individual elements in that view, and you want to process each one differently. </p>
<p>But you can process it by using the e.source on the table row listener … </p>
<p>If you are adding an event listener in a loop, which gives the solution of having to do extra processing because it does not contain the correct property values, then either use the external function solution or just add 1 event listener to the table …</p>
<p>Hope this makes sense.. (Bad at explaining sometimes).</p>
<p>T.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2012, 11:30:50 am">July 6th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Absolutely – I get the value of using a single event listener on a tableview.  But Muhammad didn&#39;t say he was using a tableview.</p>
<p>So if he has to attach an event to each individual control, it&#39;s better to do it with a named function rather than anonymous functions.  You don&#39;t want to create all those anonymous functions in memory, and you can run into scope challenges like he found.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 6th 2012, 12:14:20 pm">July 6th 2012</span>
											by <span class='authorname'>Jason Priebe</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok..I&#39;ve applied event listeners successfully in some file a.js for example, now I want to handle the event in some external file b.js and refer the event to b.js like this:-</p>
<pre><code class="hljs">    <span class="hljs-keyword">if</span>(e.<span class="hljs-keyword">source</span>.name==<span class="hljs-string">'btn1'</span>
    {
        <span class="hljs-comment">//Refer to btn1Event.js where variables of a.js should be accessible</span>
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.<span class="hljs-keyword">source</span>.name==<span class="hljs-string">'lbl1'</span>
    {
        <span class="hljs-comment">//Refer to lbl1Event.js where variables of a.js should be accessible</span>
    }
</code></pre><pre><code class="hljs">The event will open a <span class="hljs-keyword">new</span> <span class="hljs-built_in">window</span> <span class="hljs-keyword">and</span> <span class="hljs-literal">on</span> pressing back button <span class="hljs-literal">it</span> should navigate <span class="hljs-keyword">to</span> previous  (parent) <span class="hljs-built_in">window</span>. What <span class="hljs-keyword">is</span> the best <span class="hljs-keyword">and</span> efficient way <span class="hljs-keyword">to</span> <span class="hljs-keyword">do</span> <span class="hljs-keyword">this</span>???
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 7th 2012, 3:22:54 am">July 7th 2012</span>
											by <span class='authorname'>Muhammad Qasim</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Muhammad</p>
<p>OK so it may appear you need to read some more… The answers to this can become quite long, so may I suggest you look at the API docs about event handling.</p>
<p>Also have a look at this project <a href="http:&#x2F;&#x2F;softlywired.com&#x2F;?page_id=178">TiCustomMenu</a> ITs open source and shows how to handle application navigation.</p>
<p>Hope this helps</p>
<p>T.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2012, 9:45:09 am">July 7th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks alot Mr. Trevor. Actually It was very crucial to solve the passing problem so i asked this question at 2 places due to tension. And it isn&#39;t necessary to answer here any kind of help in solving the problem is appreciated. Thanks for the help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 7th 2012, 9:55:50 am">July 7th 2012</span>
											by <span class='authorname'>Muhammad Qasim</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
