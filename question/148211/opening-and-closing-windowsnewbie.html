<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Opening and closing windows(Newbie) » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Opening and closing windows(Newbie)</h1>
		</header>
		<section>
			<p>Hey there,</p>
<p>I was wondering what as the best approach for navigating through just a couple pages.<br>My situation is as following:<br>I&#39;ve got a mainpage which redirects you to a &quot;Start&quot; window. If you press the start button on that page it will redirect you to a Stop page, which will redirect you back to the mainpage if you press &quot;Stop&quot;.</p>
<p>This is somewhat of a toggle thingie. My logic tells me: Well, create all the pages in the app.js and win.open() and close them when needed.</p>
<p>But is this the best way to go? Considering load and such. Or is the best approach to just create a new window for each start&#x2F;stop action?</p>
<p>Thanks in advance,</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 13th 2013, 8:06:27 am">February 13th 2013</span>
				by <span class='authorname'>T Engwer</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Missing from you question are several pieces of information that will help you obtain a speedy and accurate answer, please provide details for ALL of the following ONLY if they are relevant;</p>
<ul>
<li>Titanium SDK Version?</li>
<li>Target platform (which of the following)<ul>
<li>iPhone; which OS version?</li>
<li>iPad; which OS version?</li>
<li>Android Phones; which min&#x2F;target OS version?</li>
<li>Android Tablets; which min&#x2F;target OS version?</li>
<li>Blackberry Phones; which min&#x2F;target OS version?</li>
<li>Blackberry Tablets; which min&#x2F;target OS version?</li>
<li>Mobile Web; which testing device(s)?</li>
<li>Other?</li>
</ul>
</li>
<li>A code snippet that can be used to determine what you have achieved so far</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="February 13th 2013, 8:56:22 am">February 13th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thanks for the comment. I don&#39;t see how logic should be different on other platforms and SDK&#39;s to be honest.</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 13th 2013, 8:58:06 am">February 13th 2013</span>
								by <span class='authorname'>T Engwer</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>There are always reasons for asking each question, you may not understand the reasons but just because you do not - it doesn&#39;t mean there aren&#39;t any;</p>
<p><strong>SDK version</strong></p>
<ul>
<li>Earlier versions have a harder time managing memory and fast window opens when UI elements are added on the fly</li>
</ul>
<p><strong>Platform</strong></p>
<ul>
<li>Earlier versions of Android for example have a lower available memory footprint, which may limit if you can cache extra windows in memory</li>
<li>Difference in memory handling of each platform when accounting for the speed in which each platform is able to add new UI elements to windows and then display them.  </li>
</ul>
<p><strong>Code snippet</strong></p>
<ul>
<li>Provides an insight into the amount of UI elements will need to be taken into account when the answering if the windows should be cached or not.</li>
<li>Proves you have tried something and are not just seeking code without actually trying to help your self first.</li>
</ul>
<p>These are just a few of the things that should be taken into account when answering your question.</p>
<p>You also said you were new, so as you had not provided anywhere near the information required to provide a correct and balanced answer, I prompted you for the information.</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 13th 2013, 9:05:42 am">February 13th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-256700">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>This really depends on your target platform, the responsive need between the start and stop and the memory needs of the different windows.</p>
<p>If they are lightweight then I would declare both at the same time and toggle between them as you suggested.  Remember to dispose of the memory when they are no longer required though.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 13th 2013, 8:58:16 am">February 13th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/148211/opening-and-closing-windowsnewbie#answer-256700" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks alot. I&#39;ve tried defining two windows in my app.js(Redirecting immediatly(for now) to start.js). Can i make those created windows in my app.js public so i can call them seperately in start.js or stop.js?</p>
<p>And how do i dispose of the memory exactly? Closing or destroying the window?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 9:00:54 am">February 13th 2013</span>
											by <span class='authorname'>T Engwer</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The first part depends on how you are creating your windows, if you are using the <strong>url</strong> property of window then you are creating a multiple context app where referencing other windows can be tricky.  If you are using a single context app then it is easier.  Either way I need to see some code.</p>
<p>Disposing of memory depends on how they are created in the first place, if they are single or multiple context and if you are using any <strong>setInterval</strong> or dynamic event listeners that are persistent.  In simple terms, using the close method on a window will release the memory (except for persist declarations).  You can also set the variable to null (<strong>win1 = null</strong>) and this will release all non persistent memory.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 9:22:15 am">February 13th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This is what i do now:<br>app.js:</p>
<pre><code class="hljs">var win = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createWindow({ url: <span class="hljs-symbol">'main</span>.js' });
win.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>main.js:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> startButton = Titanium.UI.createButton({
    color: <span class="hljs-string">"#000"</span>,
    title: <span class="hljs-string">"Start"</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    width: <span class="hljs-number">200</span>,
    height: <span class="hljs-number">50</span>
});

Titanium.UI.currentWindow.add(startButton);

startButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
       <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> startPage == <span class="hljs-string">'undefined'</span>) {
           <span class="hljs-keyword">var</span> startPage = Titanium.UI.createWindow({url: <span class="hljs-string">'start_tracking.js'</span>});
    }
    startPage.open();
});
</code></pre><p>and last my start_tracking.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> stopButton = Titanium.UI.createButton({
    color: <span class="hljs-string">"#000"</span>,
    title: <span class="hljs-string">"Stop"</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    width: <span class="hljs-number">200</span>,
    height: <span class="hljs-number">50</span>
});

Titanium.UI.currentWindow.add(stopButton);

stopButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">//Titanium.UI.currentWindow.close();</span>
    stopTimer();
});


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLocation</span><span class="hljs-params">()</span> </span>{
    Titanium.API.log(<span class="hljs-string">'info'</span>, <span class="hljs-string">'test'</span>);
    Titanium.Geolocation.getCurrentPosition(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">if</span> (e.error) {
            longitude = <span class="hljs-string">''</span>;
            latitude = <span class="hljs-string">''</span>;
            Titanium.API.log(<span class="hljs-string">'info'</span>, e.error);
        } <span class="hljs-keyword">else</span> {
            longitude = e.coords.longitude;
            latitude = e.coords.latitude;
            Titanium.API.log(<span class="hljs-string">'info'</span>, <span class="hljs-string">'longi:'</span> + longitude + <span class="hljs-string">' - lati: '</span> + latitude);
        }

    });
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-keyword">var</span> timer = setInterval(getLocation, <span class="hljs-number">5000</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopTimer</span><span class="hljs-params">()</span> </span>{
    clearInterval(timer);
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 9:26:51 am">February 13th 2013</span>
											by <span class='authorname'>T Engwer</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You are using a multi-context solution, move away from this when you start newer projects.</p>
<p>My suggestion is to NOT use windows as they are too heavy-weight for your needs.</p>
<p>Create two <strong>views</strong> in <strong>main.js</strong> add each of your UI elements as needed to each and then toggle between them making one visible and the other invisible as you need.</p>
<p>Example;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.currentWindow;
<span class="hljs-keyword">var</span> viewStart = Ti.UI.createView({
    height: Ti.UI.FILL,
    visible: <span class="hljs-literal">true</span>,
    width: Ti.UI.FILL
});
win.add(viewStart);
<span class="hljs-keyword">var</span> btnStart = Ti.UI.createButton({
    title: <span class="hljs-string">'Start'</span>
});
win.add(btnStart);
<span class="hljs-keyword">var</span> viewStop = Ti.UI.createView({
    height: Ti.UI.FILL,
    visible: <span class="hljs-literal">false</span>,
    width: Ti.UI.FILL
});
win.add(viewStop);
<span class="hljs-keyword">var</span> btnStop = Ti.UI.createButton({
    title: <span class="hljs-string">'Stop'</span>
});
win.add(btnStop);
btnStart.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    viewStop.show();
    viewStart.hide();
    <span class="hljs-comment">// do what action you do when starting</span>
});
btnStop.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    viewStart.show();
    viewStop.hide();
    <span class="hljs-comment">// do what action you do when stopping</span>
});
</code></pre><p>You can fill in the details to make it your own.  This is much more memory friendly, gives control in ONE place and is easier to manage.</p>
<p>Be careful to release the interval variable when you are finished as it will persist otherwise causing a memory leak.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 9:43:36 am">February 13th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ll give this one a shot. Thanks a lot!<br>I am however not sure what you mean by the interval release. Would my stopTimer() function not do the trick?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 9:45:54 am">February 13th 2013</span>
											by <span class='authorname'>T Engwer</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I just meant that you need to make sure that you have called <strong>clearInterval(timer);</strong> even if the user has not, because they could navigate away from the window without having press the stop button.  If you do not trap for that the memory will not be released.  As I still do not know if this is android or iOS I will just suggest you investigate the event listener for <strong>close</strong> and <strong>android:back</strong>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 9:54:26 am">February 13th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I would also consider using a different geo code block as the one you are using will not do what you think it will.</p>
<p>Take a look at event <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;api&#x2F;Titanium.Geolocation-event-location">location</a>, with this you can listen into the current locations position as it changes.</p>
<p>A quick example; </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lbl = Ti.UI.createLabel({
    text: <span class="hljs-string">'Waiting'</span>
});
<span class="hljs-keyword">var</span> locationHandler = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  <span class="hljs-keyword">if</span> (e.success === <span class="hljs-literal">undefined</span> || e.success) {
    lbl.setText(<span class="hljs-built_in">JSON</span>.stringify(e.coords));
  }
}
Ti.Geolocation.addEventListener(<span class="hljs-string">"location"</span>, locationHandler);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 9:55:03 am">February 13th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>FYI : I appended the buttons to their own view instead of the window. Otherwise the buttons would both be shown on top of eachother.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 11:09:29 am">February 13th 2013</span>
											by <span class='authorname'>T Engwer</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That was my mistake during copying and pasting - sorry for that.</p>
<p>Should have been;</p>
<pre><code class="hljs">viewStart.add<span class="hljs-comment">(btnStart)</span>;
<span class="hljs-comment">// and</span>
viewStop.add<span class="hljs-comment">(btnStop)</span>;
</code></pre><p>As you have already worked out. :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 11:55:25 am">February 13th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I guess this question is now answered?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2013, 2:11:46 pm">February 13th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Can you confirm if this question has been answered?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 15th 2013, 8:35:09 pm">February 15th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
