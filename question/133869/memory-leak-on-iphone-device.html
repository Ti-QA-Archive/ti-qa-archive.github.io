<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Memory Leak on iPhone Device Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Memory Leak on iPhone Device</h1>
		</header>
		<section>
			<h1 id="system-build-config-informations">System, Build Config Informations</h1>
<p><strong>Application type:</strong><br>mobile</p>
<p><strong>Titanium SDK:</strong><br>timestamp=12&#x2F;22&#x2F;11 13:09<br>module_apiversion=2<br>version=1.8.0.1<br>githash=fbdc96f</p>
<p><strong>Platform &amp; version:</strong><br>iOS 5.0.1</p>
<p><strong>Device:</strong><br>iPhone 3GS</p>
<p><strong>Host Operating System:</strong><br>Mac OS X Lion 10.7.3 (11D50b)<br>Darwin Kernel Version 11.3.0</p>
<p><strong>Xcode Developer Information:</strong><br>Version:    4.2.1 (4D502)<br>Location:    &#x2F;Developer<br>Applications:<br>Xcode:        4.2.1 (834)<br>Instruments:    4.2 (4233)<br>Dashcode:    3.0.2 (336)<br>SDKs:<br>Mac OS X:<br>10,6:    (10K549)<br>10,7:    (11C63)<br>iPhone OS:<br>5,0:    (9A334)<br>iPhone Simulator:<br>5,0:    (9A334)</p>
<p><strong>Titanium Studio:</strong><br>Titanium Studio, build: 1.0.6.201110251616<br>(c) Copyright 2011 by Appcelerator, Inc.  All rights reserved.</p>
<p>Build: jenkins-titanium-rcp-master-115 (origin&#x2F;master)<br>Date: 25 October 2011, 16:19:29</p>
<p><strong>iOS Packaging:</strong></p>
<pre><code class="hljs">================================================================================
Appcelerator Titanium Diagnostics Build Log
The contents of this file are useful to send to Appcelerator Support if
reporting an issue to help us understand your environment, build settings
and aid in debugging. Please attach this log to any issue that you report.
================================================================================

Starting build at 03/15/12 13:25

Build details:

   timestamp=12/22/11 13:09
   module_apiversion=2
   version=1.8.0.1
   githash=fbdc96f


Script arguments:
   /Users/aaaron/Library/Application Support/Titanium/mobilesdk/osx/1.8.0.1/iphone/builder.py
   install
   5.0
   /Users/aaaron/Documents/TitaniumStudioWorkspace/testapp
   com.domain.testapp
   testapp
   3E916191-DF50-46FB-A1DE-A6C1B87899A9
   Aaron Meyer-Staufer (5U6E752KUC)
   universal

Building from: /Users/aaaron/Library/Application Support/Titanium/mobilesdk/osx/1.8.0.1/iphone
Platform: Darwin Kernel Version 11.3.0: Thu Jan 12 18:47:41 PST 2012; root:xnu-1699.24.23~1/RELEASE_X86_64

Xcode path is: /Developer

Reading provisioning profile:

<span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-doctype">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">plist</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"1.0"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>ApplicationIdentifierPrefix<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>4K6Z7D66RC<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>CreationDate<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">date</span>&gt;</span>2012-02-06T18:39:36Z<span class="hljs-tag">&lt;/<span class="hljs-title">date</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>DeveloperCertificates<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">data</span>&gt;</span>
        MIIFyTCCBLGgAwIBAgIIQISJr36FqRIwDQYJKoZIhvcNAQEFBQAwgZYxCzAJ
        BgNVBAYTAlVTMRMwEQYDVQQKDApBcHBsZSBJbmMuMSwwKgYDVQQLDCNBcHBs
        ZSBXb3JsZHdpZGUgRGV2ZWxvcGVyIFJlbGF0aW9uczFEMEIGA1UEAww7QXBw
        bGUgV29ybGR3aWRlIERldmVsb3BlciBSZWxhdGlvbnMgQ2VydGlmaWNhdGlv
        biBBdXRob3JpdHkwHhcNMTExMTE3MTU1NzIwWhcNMTIxMTE2MTU1NzIwWjCB
        vDEaMBgGCgmSJomT8ixkAQEMCjZCQjdZN0FaTVExOzA5BgNVBAMMMmlQaG9u
        ZSBEZXZlbG9wZXI6IEFhcm9uIE1leWVyLVN0YXVmZXIgKDVVNkU3NTJLVUMp
        MSkwJwYDVQQLDCBpdGVsbGljbyBpbnRlcm5ldCBzb2x1dGlvbnMgZ21iaDEp
        MCcGA1UECgwgaXRlbGxpY28gaW50ZXJuZXQgc29sdXRpb25zIGdtYmgxCzAJ
        BgNVBAYTAkFUMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAu+eZ
        9HwF7tLKZGdP0Q71LVouRNm6hz7yO7dSHMFuP/3WjJuE5BmfoGj9yDSF7O6H
        Ea3xsch4fAi82PSK8s/TrydhLmadDfzgYH8FdoqVgqSmM0VH44KUNlm5EdnF
        51+JAYtSnoKOVsGf9ggpnmkszvgWNhl4qnWoerRUVCc3DIC+QrUjBcMifw5B
        uyPF4AKJgfHsujRIa9J/mGlM3NaTjTm43Femql0QJC0OMO+g1ootg48l6FE0
        uROx0wEh6dwsi4FzV8hq7GieyzsD7IkugFY0l5GHmzBt4oMTQjA7Mw4in9y8
        Po2rI+WRpCHVFCE7LCwyD/VvPz4fJpvg4UsKzwIDAQABo4IB8TCCAe0wHQYD
        VR0OBBYEFOxtS7Ul4ewiAwMSGyC8VRqb1ng8MAwGA1UdEwEB/wQCMAAwHwYD
        VR0jBBgwFoAUiCcXCam2GGCL7Ou69kdZxVJUo7cwggEPBgNVHSAEggEGMIIB
        AjCB/wYJKoZIhvdjZAUBMIHxMIHDBggrBgEFBQcCAjCBtgyBs1JlbGlhbmNl
        IG9uIHRoaXMgY2VydGlmaWNhdGUgYnkgYW55IHBhcnR5IGFzc3VtZXMgYWNj
        ZXB0YW5jZSBvZiB0aGUgdGhlbiBhcHBsaWNhYmxlIHN0YW5kYXJkIHRlcm1z
        IGFuZCBjb25kaXRpb25zIG9mIHVzZSwgY2VydGlmaWNhdGUgcG9saWN5IGFu
        ZCBjZXJ0aWZpY2F0aW9uIHByYWN0aWNlIHN0YXRlbWVudHMuMCkGCCsGAQUF
        BwIBFh1odHRwOi8vd3d3LmFwcGxlLmNvbS9hcHBsZWNhLzBNBgNVHR8ERjBE
        MEKgQKA+hjxodHRwOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9jZXJ0aWZpY2F0
        aW9uYXV0aG9yaXR5L3d3ZHJjYS5jcmwwDgYDVR0PAQH/BAQDAgeAMBYGA1Ud
        JQEB/wQMMAoGCCsGAQUFBwMDMBMGCiqGSIb3Y2QGAQIBAf8EAgUAMA0GCSqG
        SIb3DQEBBQUAA4IBAQBkZ3jzRT0TLHs0trIF+tPhz5BbUGecjD8wA040OTqa
        z4QOKWRLCdd0aHdAjJTo4/5sGJsfA7wLKA7isX27ypexvSgSUg7SUa2ZFbq8
        UlS88H/BC7GT1pR9A2AeAjvsnT7KUiJtDKRx19V07DVZ47mG9Hy5jlnfnpZr
        omq8lVyu9PDyWdOWBtkRoI99VOZsGLpBTc2h+lXaGAIXU7IDXbQOT4phsdpt
        irHzOoscAVwh2sXyb/UJI2HC5MPiws1DhBM6MnVL1WJEwZgkS+uXRhLhSXfe
        wGudT22XsX05mJlXR54Fthsf2ICHRoExfN6fJ31M0xxZ/wXD3GCuUC8x/vd2
        <span class="hljs-tag">&lt;/<span class="hljs-title">data</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Entitlements<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>application-identifier<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>4K6Z7D66RC.*<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>get-task-allow<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">true</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>keychain-access-groups<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>4K6Z7D66RC.*<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>ExpirationDate<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">date</span>&gt;</span>2013-02-05T18:39:36Z<span class="hljs-tag">&lt;/<span class="hljs-title">date</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Wildcard<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>ProvisionedDevices<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>5233c0fde98bd53edab0481a580f89e9c903e9f1<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>TeamIdentifier<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>4K6Z7D66RC<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>TimeToLive<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">integer</span>&gt;</span>365<span class="hljs-tag">&lt;/<span class="hljs-title">integer</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>UUID<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>3E916191-DF50-46FB-A1DE-A6C1B87899A9<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Version<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">integer</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">integer</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">plist</span>&gt;</span>

githash=fbdc96f, existing_git_hash=None
forcing rebuild since libhash (None) not matching (086dba02ebf4956989e6555c3d754630)
Performing full rebuild
</code></pre><h1 id="problem-description">Problem Description</h1>
<p>If have created a default tabgroup mobile app project, compiled and uploaded it on the iOS device. Afterwards, i analyzed the App using Instruments, where i noticed a memory leak. Here is the log of the trace and caller function:</p>
<pre><code class="hljs"><span class="hljs-preprocessor">#    Address    Category    Event Type    RefCt    Timestamp    Size    Responsible Library    Responsible Caller</span>
<span class="hljs-number">0</span>    <span class="hljs-number">0x34d3d0</span>    <span class="hljs-built_in">CFDictionary</span> (<span class="hljs-keyword">mutable</span>)    Malloc    <span class="hljs-number">1</span>    <span class="hljs-number">00</span>:<span class="hljs-number">04.368</span><span class="hljs-number">.367</span>    <span class="hljs-number">48</span>    testapp    +[ApplicationDefaults copyDefaults]


<span class="hljs-comment">/**
* Appcelerator Titanium Mobile
* This is generated code. Do not modify. Your changes *will* be lost.
* Generated code is Copyright (c) 2009-2011 by Appcelerator, Inc.
* All Rights Reserved.
*/</span>
<span class="hljs-preprocessor">#import <span class="hljs-title">&lt;Foundation/Foundation.h&gt;</span></span>
<span class="hljs-preprocessor">#import <span class="hljs-title">"TiUtils.h"</span></span>
<span class="hljs-preprocessor">#import <span class="hljs-title">"ApplicationDefaults.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">ApplicationDefaults</span></span>

+ (<span class="hljs-built_in">NSMutableDictionary</span>*) copyDefaults
{
    <span class="hljs-built_in">NSMutableDictionary</span> * _property = [[<span class="hljs-built_in">NSMutableDictionary</span> alloc] init];


    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
}
<span class="hljs-keyword">@end</span>
</code></pre><p><strong>Project JS Code</strong></p>
<pre><code class="hljs"><span class="hljs-comment">// this sets the background color of the master UIView (when there are no windows/tab groups on it)</span>
Titanium.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);

<span class="hljs-comment">// create tab group</span>
var tabGroup = Titanium.UI.createTabGroup();


<span class="hljs-comment">//</span>
<span class="hljs-comment">// create base UI tab and root window</span>
<span class="hljs-comment">//</span>
var win1 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 1'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});
var tab1 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_views.png'</span>,
    title:<span class="hljs-string">'Tab 1'</span>,
    window:win1
});

var label1 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 1'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win1.<span class="hljs-built_in">add</span>(label1);

<span class="hljs-comment">//</span>
<span class="hljs-comment">// create controls tab and root window</span>
<span class="hljs-comment">//</span>
var win2 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 2'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});
var tab2 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_ui.png'</span>,
    title:<span class="hljs-string">'Tab 2'</span>,
    window:win2
});

var label2 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 2'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win2.<span class="hljs-built_in">add</span>(label2);



<span class="hljs-comment">//</span>
<span class="hljs-comment">//  add tabs</span>
<span class="hljs-comment">//</span>
tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  


<span class="hljs-comment">// open tab group</span>
tabGroup.<span class="hljs-built_in">open</span>();
</code></pre><p>How can i handle this leak?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 15th 2012, 2:05:02 pm">March 15th 2012</span>
				by <span class='authorname'>Aaron Meier-Stauffer</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>app</span></li>
					
						<li><span class='tagname'>appcelerator</span></li>
					
						<li><span class='tagname'>application</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-233470">
				
						<section>
							<p>Just a thought, but as this is the top level content - Its always going to be present while the app is running so the memory cant be reclaimed ?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 15th 2012, 3:05:35 pm">March 15th 2012</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="../../question/133869/memory-leak-on-iphone-device.html#answer-233470" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Stupid question: If thats the case, will Apple accept the app anyhow (made with TI Studio) when publishing it to the i-Tunes store, or will they reject it?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 18th 2012, 12:08:44 pm">March 18th 2012</span>
											by <span class='authorname'>Aaron Meier-Stauffer</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
