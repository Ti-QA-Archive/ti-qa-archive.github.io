<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Push: Change from MQTT to GCM? » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Push: Change from MQTT to GCM?</h1>
		</header>
		<section>
			<p>How can I change from MQTT to GCM in my project?</p>
<pre><code class="hljs"><span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">13.999</span>: I/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): Creating PushService.
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">13.999</span>: I/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): Handling crashed service...
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">14.009</span>: I/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): Starting push service...
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">14.009</span>: I/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): PushService status changed. ACTION=CF.KEEP_ALIVE
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">14.009</span>: I/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): PushService status changed. ACTION=CF.KEEP_ALIVE
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">14.009</span>: I/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): PushService status changed. ACTION=CF.KEEP_ALIVE
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">14.159</span>: D/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): Connectivity changed. Network availability:<span class="hljs-literal">true</span>; Has connectivity:<span class="hljs-literal">true</span>; type:WIFI; reason:null
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">14.159</span>: D/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): MQTT Status:<span class="hljs-literal">NULL</span>
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">14.159</span>: I/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): Reconnecting...
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">14.169</span>: D/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): Push Host: push-<span class="hljs-number">1.</span>cloud.appcelerator.com, Push Port: <span class="hljs-number">1883</span>
<span class="hljs-number">08</span>-<span class="hljs-number">19</span> <span class="hljs-number">12</span>:<span class="hljs-number">54</span>:<span class="hljs-number">14.870</span>: I/com.appcelerator.cloud.push.PushService(<span class="hljs-number">5040</span>): MQTT Connected
</code></pre><p>I&#39;m using SDK 3.1.2 and have set my tiapp.xml to:</p>
<pre><code class="hljs">    &lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"acs-push-type-development"</span> type=<span class="hljs-string">"string"</span>&gt;gcm&lt;/<span class="hljs-keyword">property</span>&gt;
    &lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"acs-push-type-production"</span> type=<span class="hljs-string">"string"</span>&gt;gcm&lt;/<span class="hljs-keyword">property</span>&gt;
    &lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"acs-push-type"</span> type=<span class="hljs-string">"string"</span>&gt;gcm&lt;/<span class="hljs-keyword">property</span>&gt;
</code></pre><p>If I&#39;m checking the properties I&#39;ll get:</p>
<pre><code class="hljs">alert<span class="hljs-list">(<span class="hljs-keyword">Ti</span>.App.Properties.getString<span class="hljs-list">(<span class="hljs-string">"acs-push-type-production"</span>)</span>)</span><span class="hljs-comment">;</span>
alert<span class="hljs-list">(<span class="hljs-keyword">Ti</span>.App.Properties.getString<span class="hljs-list">(<span class="hljs-string">"acs-push-type-development"</span>)</span>)</span><span class="hljs-comment">;</span>
alert<span class="hljs-list">(<span class="hljs-keyword">Ti</span>.App.Properties.getString<span class="hljs-list">(<span class="hljs-string">"acs-push-type"</span>)</span>)</span><span class="hljs-comment">;</span>
</code></pre><p>and inside the cloud subscribed devices list I have:</p>
<pre><code class="hljs">channel  <span class="hljs-function"><span class="hljs-title">android</span><span class="hljs-params">(mqtt)</span></span>  id token
</code></pre><p>my code:</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> CloudPush = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ti.cloudpush'</span>);
CloudPush.debug = <span class="hljs-literal">true</span>;

CloudPush.addEventListener(<span class="hljs-string">'trayClickLaunchedApp'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
            pushReceived();
});
CloudPush.addEventListener(<span class="hljs-string">'trayClickFocusedApp'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
            pushReceived();
});
CloudPush.addEventListener(<span class="hljs-string">'callback'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
            Ti.API.info(<span class="hljs-string">"cloud - push callback"</span>);
            pushReceived();
});

<span class="hljs-comment">// [register cloud user] function removed</span>

CloudPush.enabled = <span class="hljs-literal">true</span>;
CloudPush.showTrayNotificationsWhenFocused = <span class="hljs-literal">true</span>;
CloudPush.focusAppOnPush = <span class="hljs-literal">false</span>;

<span class="hljs-comment">// [login user] function removed</span>

CloudPush.retrieveDeviceToken({
    success : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deviceTokenSuccess</span>(<span class="hljs-params">e</span>) </span>{
        deviceToken = e.deviceToken;
subscribe();

    }, error : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deviceTokenError</span>(<span class="hljs-params">e</span>) </span>{
        Ti.API.info(<span class="hljs-string">"PUSH ERROR"</span>);
    }
});
</code></pre><p>to shorten the code I removed the register and login functions (Cloud.Users.create&#x2F;login)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 19th 2013, 9:04:06 am">August 19th 2013</span>
				by <span class='authorname'>Stick in</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>gcm</span></li>
					
						<li><span class='tagname'>mqtt</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-267545">
				
						<section>
							<p>Hi,<br>Titanium.CloudPush module is used to receive push notifications on a device by providing a connection to the push notification server.<br>It supports two protocols to access push notifications:</p>
<ol>
<li>Google Cloud Messaging (GCM)</li>
<li>ACS servers using the MQTT protocol<br>And, GCM is the default method to send push notifications. Please find the below link for more information :</li>
</ol>
<p>http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Titanium.CloudPush</p>
<p>To use GCM, you need to create a Google API project to obtain a Google API key and GCM sender ID.<br>For creating the above mentioned items you can go through the below link :</p>
<p>http:&#x2F;&#x2F;developer.android.com&#x2F;google&#x2F;gcm&#x2F;gs.html</p>
<p>Once you are done with the above items you need to configure your application to use GCM, to do this you need to open up your application in the ACS web console and configure your settings in the Android Push Configuration section. And there you need to copy the google API key and GCM sender id you have generated in the required fields and not on the tiapp.xml. Please see the below link for information on this :</p>
<p>http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;cloud&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;android-section-7</p>
<p>Regards</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 22nd 2013, 6:43:31 am">August 22nd 2013</span>
								by <span class='authorname'>Rupesh Sharma</span><br>
								<a class="icon-bg icon-link" href="question/156134/push-change-from-mqtt-to-gcm#answer-267545" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-277602">
				
						<section>
							<p>For anyone interested in a NON GCM alternative, I recently written a Titanium Android Module for JPUSH - A Chinese Push Service provider - its working and tested and works really well - visit my site for more details - http:&#x2F;&#x2F;kiteplans.info&#x2F;2014&#x2F;04&#x2F;05&#x2F;module-appcelerator-titanium-alloy-jpush-push-notification-module-android-china-push-non-gcm&#x2F;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 10th 2014, 5:17:18 am">April 10th 2014</span>
								by <span class='authorname'>DieSkim Skim</span><br>
								<a class="icon-bg icon-link" href="question/156134/push-change-from-mqtt-to-gcm#answer-277602" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Updated: Appcelerator Titanium Alloy JPUSH Push Notification Module – iOS and Android, China Push Notification- NON GCM - http:&#x2F;&#x2F;kiteplans.info&#x2F;2015&#x2F;04&#x2F;04&#x2F;appcelerator-titanium-alloy-jpush-push-notification-module-ios-and-android-china-push-notification-non-gcm&#x2F;</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 4th 2015, 6:35:42 am">April 4th 2015</span>
											by <span class='authorname'>Agape Hui</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
