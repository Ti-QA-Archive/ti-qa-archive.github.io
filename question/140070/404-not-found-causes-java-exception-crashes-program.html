<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>404 Not Found causes java exception, crashes program » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>404 Not Found causes java exception, crashes program</h1>
		</header>
		<section>
			<p>When a server responds with 404 not found, HTTP client on Android throws a java exception (as below) and terminates the program. The normal error handling doesn&#39;t happen, i.e. xhr_onreadystatechange never gets called.</p>
<p>Tested with 2.1 and 2.0.2 on Android.</p>
<p>Has anyone seen this? Know any workarounds? </p>
<p>Thanks,</p>
<pre><code class="hljs">[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  835)</span>] (TiHttpClient-2) [130504,134028] HTTP Error (org.apache.http.client.HttpResponseException): Not Found
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  835)</span>] org.apache.http.client.HttpResponseException: Not Found
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  835)</span>]     at ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:230)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  835)</span>]     at ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:189)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  835)</span>]     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  835)</span>]     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:637)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  835)</span>]     at ti.modules.titanium.network.TiHTTPClient$ClientRunnable.run(TiHTTPClient.java:1140)
[<span class="hljs-link_label">ERROR</span>][<span class="hljs-link_reference">TiHttpClient(  835)</span>]     at java.lang.Thread.run(Thread.java:856)
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 23rd 2012, 11:54:16 pm">July 23rd 2012</span>
				by <span class='authorname'>David Asher</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Missing from your question are a number of important pieces of information. I suggest you take a look at the <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Using+Questions+and+Answers">Using Questions and Answers</a> article, specifically the Q&amp;A Question Checklist.  The missing information is critical to reproducing problems in a test environment and often indicates other factors that cause the undesirable outcome you are experiencing.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 24th 2012, 12:03:57 am">July 24th 2012</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-258005">
				
						<section>
							<p>It&#39;s true what you say, a web server usually reports HTTP Status Code 404 for a missing resource, but in my case HTTPRequest crashes with the above error even though I provided a handler for the error event.</p>
<p>Shouldn&#39;t it call my errorHandler instead of crashing the app? </p>
<p>The same problem applies even when there is not network connectivity, which I solved testing for network connectivity before each network access.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 4th 2013, 5:11:28 am">March 4th 2013</span>
								by <span class='authorname'>Alexander Papastergiou</span><br>
								<a class="icon-bg icon-link" href="question/140070/404-not-found-causes-java-exception-crashes-program#answer-258005" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-243649">
				
						<section>
							<p>I guess you&#39;re referring to source code. It&#39;s posted on GitHub:https:&#x2F;&#x2F;github.com&#x2F;mapocosm&#x2F;Map-Explorer-Open&#x2F;blob&#x2F;master&#x2F;Resources&#x2F;FileTransfer.js<br>I think you&#39;ll find it&#39;s textbook http client, transferred many thousands of files successfully, but I just hit the first case of a missing file (404). Anyone&#39;s HTTP client code should show the error if given a url to a valid domain but invalid file, for example:<br>https:&#x2F;&#x2F;picasaweb.google.com&#x2F;s&#x2F;v&#x2F;lighthousefe_96.04&#x2F;picasa_pinOff.png</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 24th 2012, 12:19:15 am">July 24th 2012</span>
								by <span class='authorname'>David Asher</span><br>
								<a class="icon-bg icon-link" href="question/140070/404-not-found-causes-java-exception-crashes-program#answer-243649" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-243656">
				
						<section>
							<p>Titanium - you&#39;re off the hook! It&#39;s not an HTTP Client problem. The issue is that if you look at the response from the picasaweb url (above), you see a 404 error. But in fact, Google returns <code>status = 200 OK</code> with <code>Content-Type:text&amp;#x2F;html; charset=UTF-8</code>, in other words they are showing a 404 error HTML page. </p>
<p>So in fact there was a file not found error, there was a java exception, and there was a crash, but these were not directly cause and effect. </p>
<p>Google responded to an invalid file with a perfectly valid response. So code looking to download a jpg image file instead got text. The java exception did not cause the crash, rather it was probably the result of putting garbage in an image file. The lesson, and fix for more robust code, is header validation, even for a 200 OK response.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 24th 2012, 2:32:24 am">July 24th 2012</span>
								by <span class='authorname'>David Asher</span><br>
								<a class="icon-bg icon-link" href="question/140070/404-not-found-causes-java-exception-crashes-program#answer-243656" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I am still having the same problem, anyone know if there is a fix or workaround?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 24th 2013, 6:57:37 am">January 24th 2013</span>
											by <span class='authorname'>Alexander Papastergiou</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255288">
				
						<section>
							<p>Alex - I&#39;m not sure if you really are seeing the same problem, but the cause is a general issue for many websites. HTTP protocol is clearly defined that if a file isn&#39;t found, the server should respond with error 404. But many websites try to be &quot;friendly&quot; and reply with 200 OK and a web page that shows the text File Not Found. Perhaps that&#39;s okay for human readers, but if a program requests a link to an image file and gets a 200 OK, it would then process the image - only to get an internal error when the file contents turn out to be a text file. The solution is to check the header&#39;s MIME type before accepting an image file.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 24th 2013, 8:18:15 pm">January 24th 2013</span>
								by <span class='authorname'>David Asher</span><br>
								<a class="icon-bg icon-link" href="question/140070/404-not-found-causes-java-exception-crashes-program#answer-255288" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
