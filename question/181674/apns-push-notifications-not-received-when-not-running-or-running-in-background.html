<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>APNS push notifications not received when not running or running in background » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>APNS push notifications not received when not running or running in background</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>today I added support for APNS push notifications to my titanium mobile app. These notifications are sent from my php service and are delivered correctly when the app is running, so all configuration on server side and certificates&#x2F;provisioning profiles are correct. However, when the app is running in the background the notifications are not received. Also when the app is not running, I don&#39;t get a builtin push notification anymore for the app.</p>
<p>Does someone know how to also enable these push notifications when the app is not running or running in background? Since I use APNS, I of course debug on an iPhone.</p>
<p>I use the code below, which works when the app is running:</p>
<pre><code class="hljs">                   Ti.Network.registerForPushNotifications({
                types: [
                    Ti.Network.NOTIFICATION_TYPE_BADGE,
                    Ti.Network.NOTIFICATION_TYPE_ALERT,
                    Ti.Network.NOTIFICATION_TYPE_SOUND
                ],
                success: deviceTokenSuccess,
                <span class="hljs-keyword">error</span>: deviceTokenError,
                callback: receivePush
            });

                   function receivePush(<span class="hljs-keyword">e</span>) {
            <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">e</span>.data;
            console.<span class="hljs-literal">log</span>(<span class="hljs-keyword">e</span>.data);
            <span class="hljs-keyword">if</span> (data.vibrate == 1)
                Titanium.Media.vibrate();
            <span class="hljs-keyword">if</span> (data.sound == 1) {
                <span class="hljs-keyword">var</span> notificationSound = Ti.Media.createSound({url:Constants.Audio.notificationSound, volume:0.5});
                notificationSound.play();
            }
            <span class="hljs-keyword">if</span> (Titanium.<span class="hljs-keyword">App</span>.messageWindow)
                showMessageTimeout(data.title + <span class="hljs-string">"\n\n"</span> + data.message, 3000, Titanium.<span class="hljs-keyword">App</span>.messageWindow);

            updateWall(true);
        }
        <span class="hljs-comment">// Save the device token for subsequent API calls</span>
        function deviceTokenSuccess(<span class="hljs-keyword">e</span>) {
            Ti.API.info('Registered successfully <span class="hljs-keyword">for</span> push notifications with <span class="hljs-keyword">token</span>: ' + <span class="hljs-keyword">e</span>.deviceToken);
            Titanium.<span class="hljs-keyword">App</span>.PushService = {<span class="hljs-string">"deviceToken"</span> : <span class="hljs-keyword">e</span>.deviceToken};
        }
        function deviceTokenError(<span class="hljs-keyword">e</span>) {
            Ti.API.info('PushNotifications <span class="hljs-keyword">error</span>: ' + <span class="hljs-keyword">e</span>.<span class="hljs-keyword">error</span>);
        }
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 26th 2015, 6:09:25 pm">March 26th 2015</span>
				by <span class='authorname'>Jasper Tack</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>apns</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>push</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
