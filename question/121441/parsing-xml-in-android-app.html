<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Parsing xml in Android App » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Parsing xml in Android App</h1>
		</header>
		<section>
			<p>I am trying to develop my first Android app with no success.  My biggest issue involves parsing xml. </p>
<p><strong><em>My Error:</em></strong> Titanium cannot call method &quot;getElementsByTagName&quot; of undefined</p>
<p>Xml is being returned by this.responseText, so I know thats not the problem.</p>
<p><strong><em>My Code:</em></strong></p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
xhr.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'http://www.website.com/api/request/xml'</span>);

xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// Parse</span>
    <span class="hljs-keyword">var</span> xmldata = Titanium.XML.parseString(<span class="hljs-keyword">this</span>.responseText).documentElement;

    <span class="hljs-keyword">var</span> states = xmldata.documentElement.getElementsByTagName(<span class="hljs-string">'states'</span>);
}

<span class="hljs-comment">// send the data</span>
xhr.send();
</code></pre><p>I am also having issues setting background images for windows and imageViews period. I have developed 3 successful ios apps so far so Id like to think I have a clue, but I am stumped…</p>
<p>Running: Titanium SDK 1.6.2, Android 2.3.3, Screen HVGA</p>
<p>thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 22nd 2011, 12:52:24 pm">June 22nd 2011</span>
				by <span class='authorname'>Nicholas Vick</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-211045">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Nicholas</p>
<p>I think you need to use <code>responseXML</code> rather than <code>responseText</code> so that an XML DOMDocument object is returned. See this demonstrated in <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;blob&#x2F;master&#x2F;demos&#x2F;KitchenSink&#x2F;Resources&#x2F;examples&#x2F;xhr_xml.js#L6">xhr_xml.js</a>.</p>
<p>Cheers</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 22nd 2011, 1:17:26 pm">June 22nd 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/121441/parsing-xml-in-android-app#answer-211045" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hey Paul,</p>
<p>That got rid of the error, thanks!<br>Is this.responseXML suggested for both IOS and Android?  The code I posted works fine in IOS apps.</p>
<p>Also, is programming for Android really that different than IOS?  It seems like nothing works in Android for me, that works flawlessly in IOS.  This includes Labels, imageViews, buttons, etc… </p>
<p>thanks for your help</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 22nd 2011, 2:11:11 pm">June 22nd 2011</span>
											by <span class='authorname'>Nicholas Vick</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Nicholas</p>
<p>I am surprised that you have found inconsistencies in the basic UI components. Would you be able to open new questions for them, so that we may go through them? Maybe it would be a good idea to deal with the label first, just to insure nothing fundamental is causing it.</p>
<p>Many thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2011, 10:40:21 pm">June 23rd 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>btw, did you try using this.responseXML on iOS? Did it work?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2011, 10:41:58 pm">June 23rd 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey Paul,</p>
<p>Yes, this.responseXML does work on IOS.  The problem I was having with the UI components ended up being how I was adding them to tableViewRow and views. </p>
<p>Also because I was using tableview.setData() instead of tableview.appendRow() which is a new term to me. </p>
<p>EX:</p>
<p><strong>IOS can use:</strong></p>
<pre><code class="hljs">myView.add(<span class="hljs-keyword">label</span>,button);
<span class="hljs-built_in">table</span>Row.add(myView,imageView);

<span class="hljs-built_in">table</span>View.<span class="hljs-built_in">set</span>Data(<span class="hljs-built_in">table</span>Row);
</code></pre><p>^<br>Only the first item added to the row and view would show up on Android and setData breaks it.</p>
<p><strong>Android wanted:</strong></p>
<pre><code class="hljs"><span class="hljs-tag">myView</span><span class="hljs-class">.add</span>(<span class="hljs-tag">label</span>);
<span class="hljs-tag">myView</span><span class="hljs-class">.add</span>(<span class="hljs-tag">button</span>);

<span class="hljs-tag">tableRow</span><span class="hljs-class">.add</span>(<span class="hljs-tag">myView</span>);
<span class="hljs-tag">tableRow</span><span class="hljs-class">.add</span>(<span class="hljs-tag">imageView</span>);

<span class="hljs-tag">tableView</span><span class="hljs-class">.appendRow</span>(<span class="hljs-tag">tableRow</span>);
</code></pre><p>If you dont think this is common&#x2F;documented knowledge, I will be more than happy to post a new question.</p>
<p>Thanks for your help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 24th 2011, 11:52:16 am">June 24th 2011</span>
											by <span class='authorname'>Nicholas Vick</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Nevermind on the setData(), appendRow() confusion.  I was just passing a single row instead of an array of rows.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 24th 2011, 6:19:56 pm">June 24th 2011</span>
											by <span class='authorname'>Nicholas Vick</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211059">
				
						<section>
							<p>Just a good advice. Be careful with DOM parser on Android, because it is the least efficient from all xml parsers available in android SDK. It has memory issues when parsing something long and having a lot of fields, like feeds from Youtube and Picassaweb. As appcelerator has no alternative to DOM parser, I prefer a primitive string-based parser, that searches for a tag value without allocating in memory all the rest needed and not needed tags (and in streams like picassa some 80% of information you may never ever need)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 22nd 2011, 2:43:11 pm">June 22nd 2011</span>
								by <span class='authorname'>Ganna Kozynenko</span><br>
								<a class="icon-bg icon-link" href="question/121441/parsing-xml-in-android-app#answer-211059" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>any link available to such a string-based parser, Ganna?   thx!</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 2nd 2013, 4:42:13 am">October 2nd 2013</span>
											by <span class='authorname'>Brian Burgess</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It might have improved lately…. anyway, I am mostly using JSON these days.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 2nd 2013, 1:04:42 pm">December 2nd 2013</span>
											by <span class='authorname'>Ganna Kozynenko</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211062">
				
						<section>
							<p>And yes, programming for Android is VERY different from programming for iOS. It is another universe. So take a deep breath and watch some entry level videos on native Android programming, to get some intuition how it works under the hood, where it allows you more than iOS, and where you should watch out for a problem. It really helps.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 22nd 2011, 2:48:36 pm">June 22nd 2011</span>
								by <span class='authorname'>Ganna Kozynenko</span><br>
								<a class="icon-bg icon-link" href="question/121441/parsing-xml-in-android-app#answer-211062" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the helpful advice Ganna!  Im sure natively Android is completely different from IOS.  I just was not sure of the extent in Titanium.  It seems that most of the Titanium UI is compatible with both OS&#39;s but do not seem to work the same.</p>
<p>thanks again!</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 22nd 2011, 2:55:31 pm">June 22nd 2011</span>
											by <span class='authorname'>Nicholas Vick</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
