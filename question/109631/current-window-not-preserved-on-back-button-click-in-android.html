<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Current window not preserved on back button click in Android Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Current window not preserved on back button click in Android</h1>
		</header>
		<section>
			<p>Hi. I&#39;m using Android APIs 2.2 and Titanium 1.5.1. </p>
<p>I&#39;m trying to implement a button which fires an event to current window (for example, winA). A modal window, winB can be accessed from winA. To get from winB back to winA, one can use Android&#39;s back button. </p>
<p>However, once we are brought back to winA via the back button, the event fired to current window is fired to the modal window winB and not winA. Is this a bug? Or do I have disable the back button and manually close winB on back button click, so that the current window is recognised as winA?</p>
<p>Here is some code to try out:</p>
<p>app.js: http:&#x2F;&#x2F;pastie.org&#x2F;1535949</p>
<p>winA.js: http:&#x2F;&#x2F;pastie.org&#x2F;1535954</p>
<p>winB.js: http:&#x2F;&#x2F;pastie.org&#x2F;1535956</p>
<p>Firstly, in winA, bring up the menu and click the refresh icon. It will fire a &#39;refresh&#39; event which you can check via Ti.API.info. This is the expected behaviour.</p>
<p>Next, click the button to go from winA to winB, and then the back button to go from winB to winA. Now bring up the menu again and click the refresh icon. Notice that the refresh event is caught by winB and not winA which we are currently in. </p>
<p>Has anyone encountered the same problem?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 7th 2011, 12:26:55 pm">February 7th 2011</span>
				by <span class='authorname'>Zheng Da Clinton Goh</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>back</span></li>
					
						<li><span class='tagname'>currentwindow</span></li>
					
						<li><span class='tagname'>modal</span></li>
					
						<li><span class='tagname'>ti.ui.currentwindow</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-220102">
				
						<section>
							<p>Ti.UI.currentWindow never changes - it always refers to the window associated with the context that created it. This becomes ambiguous in the case where you are dealing with multiple Android activities and JavaScript contexts. This is probably a &quot;bug&quot;, but our recommended best practice is to avoid using multiple contexts and Ti.UI.currentXXX because of these data sharing and lifecycle issues.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 3rd 2011, 8:04:32 pm">October 3rd 2011</span>
								by <span class='authorname'>Kevin Whinnery</span><br>
								<a class="icon-bg icon-link" href="question/109631/current-window-not-preserved-on-back-button-click-in-android.html#answer-220102" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you so much for this!  You helped solve at least one of the issues I have been having.  Now I wonder if you have an answer for when the user closes a window in the middle of an animation, say moving a scrollview, which crashes the app?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 17th 2011, 11:37:40 pm">November 17th 2011</span>
											by <span class='authorname'>John Sanford</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-220082">
				
						<section>
							<p>same problem here</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 3rd 2011, 4:16:36 pm">October 3rd 2011</span>
								by <span class='authorname'>Nita Cosmin</span><br>
								<a class="icon-bg icon-link" href="question/109631/current-window-not-preserved-on-back-button-click-in-android.html#answer-220082" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
