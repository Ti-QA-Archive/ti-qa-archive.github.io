<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Parsing XML » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Parsing XML</h1>
		</header>
		<section>
			<p>Hello, i have some trouble with parsing a xml document. I Need the following information: the &#39;id&#39; value and the &#39;data&#39; value for each item block to put the information in a tableview.<br>I took a look at different examples but in this case, i think i need 2 &#39;for&#39; loops and two arrays and don&#39;t know how to get this done. I really hope someone could help me… Thanks!<br>This is the XML-File:</p>
<pre><code class="hljs">    <span class="hljs-tag">&lt;<span class="hljs-title">return</span> <span class="hljs-attribute">SOAP-ENC:arrayType</span>=<span class="hljs-value">"ns2:Map[3]"</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"SOAP-ENC:Array"</span>&gt;</span>    
    <span class="hljs-tag">&lt;<span class="hljs-title">item</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"ns2:Map"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>data<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>Third message<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>


    <span class="hljs-tag">&lt;<span class="hljs-title">item</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"ns2:Map"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>data<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>Second Message<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>


    <span class="hljs-tag">&lt;<span class="hljs-title">item</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"ns2:Map"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>data<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xsd:string"</span>&gt;</span>First Message<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">item</span>&gt;</span>    
    <span class="hljs-tag">&lt;/<span class="hljs-title">return</span>&gt;</span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 22nd 2013, 8:02:35 am">November 22nd 2013</span>
				by <span class='authorname'>Luke O</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>array</span></li>
					
						<li><span class='tagname'>for loop</span></li>
					
						<li><span class='tagname'>parse</span></li>
					
						<li><span class='tagname'>xml</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-271646">
				
						<section>
							<p>Hi</p>
<p>You will need two loops as you have the outer item array and inside each one an inner item array.</p>
<p>You can simplify your life by converting the XML to json and then iterating through that, which is massively easier to traverse than xml ever is.</p>
<ul>
<li><a href="https:&#x2F;&#x2F;github.com&#x2F;dbankier&#x2F;XMLTools-For-Appcelerator-Titanium">XMLTools</a></li>
</ul>
<pre><code class="hljs"><span class="hljs-built_in">var</span> <span class="hljs-built_in">xml</span> = <span class="hljs-literal">new</span> XMLTools(your_xml_string);
<span class="hljs-built_in">var</span> json = <span class="hljs-built_in">xml</span><span class="hljs-built_in">.</span>toJSON();
Ti<span class="hljs-built_in">.</span>API<span class="hljs-built_in">.</span>info(<span class="hljs-string">'json: '</span> + JSON<span class="hljs-built_in">.</span>stringify(json));
</code></pre><p>Then paste the results into <a href="http:&#x2F;&#x2F;jsonlint.com">jsonlint.com</a> - this will show you the array as json.  I have not run your xml myself - but chances are it will then be traverse something like this;</p>
<pre><code class="hljs">var intOuter = 0, intOuters = json.length<span class="hljs-comment">;</span>
var intInner = 0, intInners = 0<span class="hljs-comment">;</span>
for (intOuter = 0<span class="hljs-comment">; intOuter &lt; intOuters; intOuter = intOuter + 1) {</span>
    intInners = json[intOuter].length<span class="hljs-comment">;</span>
    for (intOuter = 0<span class="hljs-comment">; intOuter &lt; intOuters; intOuter = intOuter + 1) {</span>
        Ti.API.info('key: ' + json[intOuter].item[intInner].key)<span class="hljs-comment">;</span>
    }
}
</code></pre><p>Please note this is to show you the layout of how to iterate the loops, you will have to slot in the specific names of nodes that you will see form jsonlint.com.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 22nd 2013, 8:13:15 am">November 22nd 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/159744/parsing-xml.html#answer-271646" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for the help man, but i want to it without json….just parsing the XML i got…</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 22nd 2013, 8:43:34 am">November 22nd 2013</span>
											by <span class='authorname'>Luke O</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This will parse the XML, but by converting into much easier to traverse JSON.  You will not have to make any changes to your source file at all.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 22nd 2013, 9:00:56 am">November 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-271882">
				
						<section>
							<p>So, finally i got a solution,….</p>
<pre><code class="hljs"> client.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> 
</span>{


        <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>.responseXML;

            <span class="hljs-keyword">var</span> results = data.getElementsByTagName(<span class="hljs-string">"return"</span>);

           <span class="hljs-keyword">var</span> messages = results.item(<span class="hljs-number">0</span>).childNodes;

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; messages.length; i++) 
            {

                <span class="hljs-keyword">var</span> message = messages.item(i).childNodes;

                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; message.length; j++) 
                {
                    <span class="hljs-keyword">var</span> messagePart = message.item(j).childNodes;

                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; messagePart.length; k++) 
                    {

                        <span class="hljs-keyword">var</span> name = messagePart.item(k).nodeName;

                        <span class="hljs-keyword">var</span> value = messagePart.item(k).firstChild.nodeValue;

                        alert ( i + <span class="hljs-string">" "</span> + j + <span class="hljs-string">" "</span> + name + <span class="hljs-string">" "</span> + value);


                    }

                }
            }
          };
</code></pre><p> ; )</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 28th 2013, 9:50:01 am">November 28th 2013</span>
								by <span class='authorname'>Luke O</span><br>
								<a class="icon-bg icon-link" href="../../question/159744/parsing-xml.html#answer-271882" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
