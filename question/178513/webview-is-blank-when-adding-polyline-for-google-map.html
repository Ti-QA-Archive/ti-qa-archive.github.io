<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>WebView is blank when adding Polyline for Google Map » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>WebView is blank when adding Polyline for Google Map</h1>
		</header>
		<section>
			<p>WebView shows google map but becomes blank when adding polyline.</p>
<p>Using: Genymotion for Android 4.4.2 and HTC running 4.4.2, SDK 3.4GA, Alloy 1.5.1</p>
<pre><code class="hljs"><span class="xml">var _html = "<span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>" + 
    "<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>" + 
        "<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>" + 
            '<span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width, initial-scale=1"</span>&gt;</span>' + 
            '<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"http://maps.googleapis.com/maps/api/js?key=AIzaSyAb3YRdSGgcOvwjhNSOKTt3Rwlt9vKSRVY&amp;sensor=true"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>' + 
            "<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="undefined">" + 
                "function initialize() </span></span><span class="hljs-expression">{<span class="hljs-string">" + 
                    "</span><span class="hljs-variable">var</span> <span class="hljs-variable">mapProp</span> = {<span class="hljs-string">" + 
                        "</span><span class="hljs-variable">center</span> : <span class="hljs-variable">new</span> <span class="hljs-variable">google.maps.LatLng</span>(<span class="hljs-variable">new</span> <span class="hljs-variable">google.maps.LatLng</span>(36<span class="hljs-variable">.</span>171108,<span class="hljs-variable">-</span>115<span class="hljs-variable">.</span>355186)),<span class="hljs-string">" + 
                        "</span><span class="hljs-variable">zoom</span> : 17,<span class="hljs-string">" + 
                        "</span><span class="hljs-variable">mapTypeId</span> : <span class="hljs-variable">google.maps.MapTypeId.SATELLITE</span><span class="hljs-string">" + 
                    "</span>}</span><span class="xml"><span class="undefined">;" + 
                    'var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);' + 
                    "var marker = new google.maps.Marker(</span></span><span class="hljs-expression">{<span class="hljs-string">" + 
                        "</span><span class="hljs-variable">map</span> : <span class="hljs-variable">map</span>,<span class="hljs-string">" + 
                        "</span><span class="hljs-variable">draggable</span> : <span class="hljs-variable">false</span>,<span class="hljs-string">" + 
                        "</span><span class="hljs-variable">position</span> : <span class="hljs-variable">new</span> <span class="hljs-variable">google.maps.LatLng</span>(<span class="hljs-variable">new</span> <span class="hljs-variable">google.maps.LatLng</span>(36<span class="hljs-variable">.</span>171108,<span class="hljs-variable">-</span>115<span class="hljs-variable">.</span>355186))<span class="hljs-string">" + 
                    "</span>}</span><span class="xml"><span class="undefined">);" +
                    'var path = new google.maps.Polyline(</span></span><span class="hljs-expression">{'+
        '<span class="hljs-variable">path</span>: [<span class="hljs-variable">new</span> <span class="hljs-variable">google.maps.LatLng</span>(36<span class="hljs-variable">.</span>171108,<span class="hljs-variable">-</span>115<span class="hljs-variable">.</span>355186),<span class="hljs-variable">new</span> <span class="hljs-variable">google.maps.LatLng</span>(36<span class="hljs-variable">.</span>171139,<span class="hljs-variable">-</span>115<span class="hljs-variable">.</span>355103),<span class="hljs-variable">new</span> <span class="hljs-variable">google.maps.LatLng</span>(36<span class="hljs-variable">.</span>171188,<span class="hljs-variable">-</span>115<span class="hljs-variable">.</span>355011),<span class="hljs-variable">new</span> <span class="hljs-variable">google.maps.LatLng</span>(36<span class="hljs-variable">.</span>171249,<span class="hljs-variable">-</span>115<span class="hljs-variable">.</span>354973)],'+       
        '<span class="hljs-variable">strokeColor</span>: <span class="hljs-begin-block">#FF</span>0000,' +
        '<span class="hljs-variable">strokeOpacity</span>: 1<span class="hljs-variable">.</span>0,' +
        '<span class="hljs-variable">strokeWeight</span>: 2, <span class="hljs-variable">map</span>: <span class="hljs-variable">map</span>' +

        '}</span><span class="xml"><span class="undefined">);' +

                "}" + 

                "google.maps.event.addDomListener(window, 'load', initialize);" + 
            "</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>" + 
        "<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>" + 
        "<span class="hljs-tag">&lt;<span class="hljs-title">body</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">'width:100%;height:100%; padding: 0; margin: 0'</span>&gt;</span>" + 
               '<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"googleMap"</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"width:300px; height:300px; padding: 0; margin:0"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>' + 
           "<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>" + 
    "<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>";


var webviewMap = Ti.UI.createWebView(</span><span class="hljs-expression">{
    <span class="hljs-variable">html</span> : _<span class="hljs-variable">html</span>,
    <span class="hljs-variable">top</span> : 0,
    <span class="hljs-variable">left</span> : 0,
    <span class="hljs-variable">right</span> : 0,
    <span class="hljs-variable">bottom</span> : 0,
    <span class="hljs-variable">borderRadius</span>: 1
}</span><span class="xml">);
$.winTrailMapWebView.add(webviewMap);</span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 17th 2014, 6:59:49 pm">October 17th 2014</span>
				by <span class='authorname'>June Rockwell</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>googlemaps</span></li>
					
						<li><span class='tagname'>maps</span></li>
					
						<li><span class='tagname'>polyline</span></li>
					
						<li><span class='tagname'>routes</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Any reason why you show Google Map in a slow webview instead of using the native ti.map module?</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 17th 2014, 8:49:52 pm">October 17th 2014</span>
								by <span class='authorname'>Danny Pham</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I originally used the ti.map module. But there were some cases that it didn&#39;t work. Yes we all should be using the ti.map module but it doesn&#39;t help end-users if the maps will be blurry. I submitted a notice for a fix in JIRA https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC-4862. If you know any reason why the maps are blurry in some cases Danny, please let me know. Thanks.</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 17th 2014, 9:24:03 pm">October 17th 2014</span>
								by <span class='authorname'>June Rockwell</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Never had this problem with Google Maps in Android and I&#39;m using it a lot … any suspicious messages in LogCat, e.g. OutOfMemory etc.? Does this bug in ti.map also occur after you clean the Google Play Service cache?</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 17th 2014, 9:39:30 pm">October 17th 2014</span>
								by <span class='authorname'>Danny Pham</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I clared the Google Play Service &amp; Play Store cache in the HTC Once. It&#39;s still the same problem. Nothing changed. Oh well. For now I have the webview and it&#39;s working really well with the annotation and the route lines. Thanks anyways Danny.</p>
</div>
							<div class="author">
								&mdash; commented <span title="October 17th 2014, 9:58:06 pm">October 17th 2014</span>
								by <span class='authorname'>June Rockwell</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-283180">
				
						<section>
							<h1 id="ok-i-fixed-it-">Ok. I fixed it.</h1>
<p>I even did several test on the HTC One because since this is a webview it needs wifi or some internet connection. So I changed my location and mad sure my locations had internet connections so it worked.</p>
<h2 id="fixes">Fixes</h2>
<ol>
<li><p>Typo for the center coordinates for the mapProp variable. This is the same for the marker&#39;s coordinates as well!</p>
<pre><code class="hljs"><span class="hljs-comment">/* Wrong! */</span>
"<span class="hljs-tag">center</span> : <span class="hljs-tag">new</span> <span class="hljs-tag">google</span><span class="hljs-class">.maps</span><span class="hljs-class">.LatLng</span>(<span class="hljs-tag">new</span> <span class="hljs-tag">google</span><span class="hljs-class">.maps</span><span class="hljs-class">.LatLng</span>(36<span class="hljs-class">.171108</span>,<span class="hljs-tag">-115</span><span class="hljs-class">.355186</span>)),"
<span class="hljs-comment">/* Correct */</span>
"<span class="hljs-tag">center</span> : <span class="hljs-tag">new</span> <span class="hljs-tag">google</span><span class="hljs-class">.maps</span><span class="hljs-class">.LatLng</span>(36<span class="hljs-class">.171108</span>,<span class="hljs-tag">-115</span><span class="hljs-class">.355186</span>),"
</code></pre></li>
<li><p>Do the Polylines like this:<br>~~~<br>&#x2F;<em> Declare points first </em>&#x2F;<br>var points = [<br>new google.maps.LatLng(37.772323, -122.214897),<br>new google.maps.LatLng(21.291982, -157.821856),<br>new google.maps.LatLng(-18.142599, 178.431),<br>new google.maps.LatLng(-27.46758, 153.027892),<br>new google.maps.LatLng(12.97918167,   77.6449),<br>new google.maps.LatLng(12.97918667,   77.64487167),<br>new google.maps.LatLng(12.979185, 77.64479167),<br>new google.maps.LatLng(12.97918333, 77.64476)<br>];</p>
</li>
</ol>
<p>&#x2F;<em> Declare the polyline properties object. Set the coordinates array as path </em>&#x2F;<br>var poly = { path: points, strokeColor: &quot;#FF0033&quot;, strokeOpacity: 1.0, strokeWeight: 3, map: map};<br>&#x2F;<em> Put the paths together </em>&#x2F;<br>var path = new google.maps.Polyline(poly);</p>
<pre><code class="hljs">Before, <span class="hljs-keyword">if</span> you look at the code <span class="hljs-keyword">to</span> my question, the polyline<span class="hljs-comment">'s coordinates were included directly inside the polyline. But when I tried to declare the coordinates separately before I declared the polyline and it just worked.</span>

<span class="hljs-preprocessor">### Putting it together with dynamic variables</span>
</code></pre><p>var points = [<br>  new google.maps.LatLng(37.772323, -122.214897),<br>  new google.maps.LatLng(21.291982, -157.821856),<br>  new google.maps.LatLng(-18.142599, 178.431),<br>  new google.maps.LatLng(-27.46758, 153.027892),<br>  new google.maps.LatLng(12.97918167,   77.6449),<br>  new google.maps.LatLng(12.97918667,   77.64487167),<br>  new google.maps.LatLng(12.979185, 77.64479167),<br>  new google.maps.LatLng(12.97918333, 77.64476)<br>];<br>&#x2F;<em> polyline variable to be concatenated to the webview&#39;s html string value </em>&#x2F;<br>polyline = &#39;var coordinates = &#39;+points+&#39;;&#39; + &#39;var poly = {path: coordinates, strokeColor : &quot;#&#39; + parser.Document.Style.LineStyle.color.slice(2) + &#39;&quot;, strokeOpacity : 1.0, strokeWeight : 3, map: map};&#39; + &#39;var path = new google.maps.Polyline(poly);&#39;;</p>
<p>&#x2F;<em> variables data and mapDimensions are dynamically given values concatenated in this _html string </em>&#x2F;<br>var _html = &quot;&lt;!DOCTYPE html&gt;&quot; + &quot;&lt;html&gt;&quot; + &quot;&lt;head&gt;&quot; + &#39;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;&#39; + &#39;&lt;script src=&quot;http:&#x2F;&#x2F;maps.googleapis.com&#x2F;maps&#x2F;api&#x2F;js?key=AIzaSyAb3YRdSGgcOvwjhNSOKTt3Rwlt9vKSRVY&amp;sensor=true&quot;&gt;&lt;&#x2F;script&gt;&#39; + &quot;&lt;script&gt;&quot; + &quot;function initialize() {&quot; + &quot;var mapProp = {&quot; + &quot;center : new google.maps.LatLng(&quot; + data.latitude + &quot;, &quot; + data.longitude + &quot;),&quot; + &quot;zoom : 17,&quot; + &quot;mapTypeId : google.maps.MapTypeId.SATELLITE&quot; + &quot;};&quot; + &#39;var map = new google.maps.Map(document.getElementById(&quot;googleMap&quot;), mapProp);&#39; + &quot;var marker = new google.maps.Marker({&quot; + &quot;map : map,&quot; + &quot;draggable : false,&quot; + &quot;position : new google.maps.LatLng(&quot; + data.latitude + &quot;, &quot; + data.longitude + &quot;)&quot; + &quot;});&quot; + polyline + &quot;}&quot; + &quot;google.maps.event.addDomListener(window, &#39;load&#39;, initialize);&quot; + &quot;&lt;&#x2F;script&gt;&quot; + &quot;&lt;&#x2F;head&gt;&quot; + &quot;&lt;body style=&#39;width:100%;height:100%; padding: 0; margin: 0&#39;&gt;&quot; + &#39;&lt;div id=&quot;googleMap&quot; style=&quot;width:&#39; + mapDimensions.mapWidth + &#39;px; height:&#39; + mapDimensions.mapHeight + &#39;px; padding: 0; margin:0&quot;&gt;&lt;&#x2F;div&gt;&#39; + &quot;&lt;&#x2F;body&gt;&quot; + &quot;&lt;&#x2F;html&gt;&quot;;</p>
<p>&#x2F;<em> Make the WebView </em>&#x2F;<br>var webviewMap = Ti.UI.createWebView({<br>        html : _html,<br>        borderRadius : 1 &#x2F;<em> This is taken from Titanium&#39;s suggestion as a work around </em>&#x2F;<br>    });<br>$.winTrailMapWebView.add(webviewMap);<br>~~~</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 17th 2014, 9:42:41 pm">October 17th 2014</span>
								by <span class='authorname'>June Rockwell</span><br>
								<a class="icon-bg icon-link" href="../../question/178513/webview-is-blank-when-adding-polyline-for-google-map.html#answer-283180" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
