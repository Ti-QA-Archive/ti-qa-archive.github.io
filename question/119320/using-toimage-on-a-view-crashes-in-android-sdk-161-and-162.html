<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Using toImage() on a View crashes in Android (SDK 1.6.1 and 1.6.2) » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Using toImage() on a View crashes in Android (SDK 1.6.1 and 1.6.2)</h1>
		</header>
		<section>
			<p>The following code works fine for the iPhone - it layers some labels on a view and then you can do a view.toImage(), save the blob data off to the temp directory and I have provided a sample email dialog to show the image being attached as one complete picture.</p>
<p>http:&#x2F;&#x2F;pastie.org&#x2F;1867509</p>
<p>Exactly the same code and process fails on Android with the error &quot;java.io.IOException: unable to write unrecognized file type&quot;. </p>
<p>Here&#39;s some screenshots of that both working on iPhone and failing on Android: http:&#x2F;&#x2F;imgur.com&#x2F;R51xb</p>
<p>Does anyone have a work around to getting this to work on android? Desperate to get this to work somehow in order to finish up a project! </p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 5th 2011, 8:57:39 am">May 5th 2011</span>
				by <span class='authorname'>Boydlee Pollentine</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>file</span></li>
					
						<li><span class='tagname'>ioexception</span></li>
					
						<li><span class='tagname'>java.io</span></li>
					
						<li><span class='tagname'>mac</span></li>
					
						<li><span class='tagname'>system</span></li>
					
						<li><span class='tagname'>toimage</span></li>
					
						<li><span class='tagname'>toimage()</span></li>
					
						<li><span class='tagname'>view</span></li>
					
						<li><span class='tagname'>view.toimage</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-237517">
				
						<section>
							<p>I found a reason why it was crashing for me. On Android, toImage() does not return a blob. Instead, it returns an object with basic info about the image, like x, y, width, height, and one of those properties is the blob (the media property). So an android, you need to do: view.toImage().media to get the Ti.Blob</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 30th 2012, 3:13:10 am">April 30th 2012</span>
								by <span class='authorname'>Christopher Stea</span><br>
								<a class="icon-bg icon-link" href="question/119320/using-toimage-on-a-view-crashes-in-android-sdk-161-and-162#answer-237517" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>You just made my day - diagnosing this was driving me crazy.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 30th 2012, 1:05:20 pm">July 30th 2012</span>
											by <span class='authorname'>Shamyl Zakariya</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks dude.. your awesome</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 23rd 2015, 5:02:49 am">June 23rd 2015</span>
											by <span class='authorname'>Korada Rameshbabu</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>7</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207406">
				
						<section>
							<p>Thanks very much to Jeff Hampton (@jhampton) for his suggestions on twitter without which I wouldn&#39;t have got this to work.</p>
<p>The answer (work around anyway) involves adding a temporary imageview to your window, and assigning your views toImage() blob to that temp imageview&#39;s image property. Then you can save the imageView&#39;s toBlob() data to a file in whatever directory you wish.</p>
<p>I&#39;ve updated the pastie code here http:&#x2F;&#x2F;pastie.org&#x2F;1873525</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 6th 2011, 9:48:34 pm">May 6th 2011</span>
								by <span class='authorname'>Boydlee Pollentine</span><br>
								<a class="icon-bg icon-link" href="question/119320/using-toimage-on-a-view-crashes-in-android-sdk-161-and-162#answer-207406" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207509">
				
						<section>
							<p>Woohoo!  Glad this worked out, friend!  And thank you for documenting it for the community!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 9th 2011, 5:52:12 pm">May 9th 2011</span>
								by <span class='authorname'>Jeff Hampton</span><br>
								<a class="icon-bg icon-link" href="question/119320/using-toimage-on-a-view-crashes-in-android-sdk-161-and-162#answer-207509" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
