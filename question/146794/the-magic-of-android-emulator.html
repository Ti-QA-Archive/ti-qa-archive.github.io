<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>The Magic of Android Emulator » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>The Magic of Android Emulator</h1>
		</header>
		<section>
			<p>I  have a simple window on tab2  that used to work now crashes on android emulator. Once I switch tab, the UI elements showed briefly and then an alert  window with error: &quot;app has stopped unexpectedly shows up with Force Close&quot; option and app just restarts. I have narrowed the problem to the code that defines the window on tab2 of my app but can&#39;t see what is causing the problem.<br>Here&#39;s code for the tab:</p>
<pre><code class="hljs">(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> bisi = {};
    bisi.UI8 = {}; <span class="hljs-comment">//user interface namespace off of the app namespace</span>

<span class="hljs-keyword">var</span> TU = <span class="hljs-keyword">require</span> (<span class="hljs-string">'/TitanUp/TitanUp'</span>);
<span class="hljs-keyword">var</span> b = Titanium.UI.createButton({title:<span class="hljs-string">'Menu'</span>});

b.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
    locationUI.close();
});

exports.parishCity = <span class="hljs-keyword">null</span>;
exports.parishState = <span class="hljs-keyword">null</span>;
exports.tab2 = <span class="hljs-keyword">null</span>;

<span class="hljs-comment">/*
 * createFinderWindow() creates the window where other RCCG parish in the US can be searched
 */</span>
bisi.UI8.createFinderWindow = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{

    <span class="hljs-keyword">var</span> margin = TU.UI.Sizer.getDimension (<span class="hljs-number">10</span>);

    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createWindow({
        title: <span class="hljs-string">'Find USA RCCG Parish'</span>,
        barColor: TU.UI.Theme.barColor,
        borderRadius: margin,
        borderColor: TU.UI.Theme.borderColor,
        backgroundColor: TU.UI.Theme.backgroundColor
    });

    <span class="hljs-comment">//Header image view for the albums</span>

    <span class="hljs-keyword">var</span> imgHeader = Ti.UI.createImageView ({

        image: <span class="hljs-string">'/images/finder.jpg'</span>,
        top: <span class="hljs-number">0</span>,        
        width: <span class="hljs-string">'388dp'</span>,
        height: <span class="hljs-string">'175dp'</span>,
<span class="hljs-comment">//        layout: 'vertical'</span>
    });
    <span class="hljs-keyword">self</span>.add(imgHeader);    
    <span class="hljs-keyword">self</span>.leftNavButton = b;

        <span class="hljs-comment">// create the input field for city</span>

    <span class="hljs-keyword">var</span> labelCity = Ti.UI.createLabel({
        left: margin,
        top: <span class="hljs-string">'175dp'</span>,
        text: <span class="hljs-string">'City:'</span>,
        color: TU.UI.Theme.textColor,
        font: TU.UI.Theme.fonts.mediumBold

    });
    <span class="hljs-keyword">self</span>.add(labelCity);

    <span class="hljs-keyword">var</span> labelState = Ti.UI.createLabel({
        left: margin,
        top: <span class="hljs-string">'230dp'</span>,
        text: <span class="hljs-string">'State:'</span>,
        color: TU.UI.Theme.textColor,
        font: TU.UI.Theme.fonts.mediumBold

    });
    <span class="hljs-keyword">self</span>.add(labelState);

    <span class="hljs-keyword">var</span> parishLocCity = Ti.UI.createTextField({
        width:<span class="hljs-string">'200dp'</span>,
        height:<span class="hljs-string">'45dp'</span>,
        top:<span class="hljs-string">'175dp'</span>,
        right:margin,
        borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
        returnKeyType:Ti.UI.RETURNKEY_DONE,
        hintText:<span class="hljs-string">'Enter city name'</span>
    });
    <span class="hljs-keyword">self</span>.add(parishLocCity);


    <span class="hljs-comment">// create textfield for input of parish state</span>

    <span class="hljs-keyword">var</span> parishLocState = Ti.UI.createTextField({
        width:<span class="hljs-string">'200dp'</span>,
        height:<span class="hljs-string">'45dp'</span>,
        top:<span class="hljs-string">'220dp'</span>,
        right:margin,
        borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
        returnKeyType:Ti.UI.RETURNKEY_DONE,
        hintText:<span class="hljs-string">'e.g. VA or Virginia'</span>
    });
    <span class="hljs-keyword">self</span>.add(parishLocState);

    <span class="hljs-keyword">var</span> locStateEvent = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{

        <span class="hljs-keyword">if</span> (TU.Device.getOS () == <span class="hljs-string">'ios'</span>)
        {
            labelState.top = <span class="hljs-string">'180dp'</span>;
            parishLocState.top = <span class="hljs-string">'180dp'</span>;
            labelCity.visible = <span class="hljs-keyword">false</span>;
            parishLocCity.visible = <span class="hljs-keyword">false</span>;
        }
    };

    <span class="hljs-keyword">var</span> fParish = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
        <span class="hljs-comment">// restore labels and textfields to status quo</span>

        labelState.top = <span class="hljs-string">'240dp'</span>;
        parishLocState.top = <span class="hljs-string">'225dp'</span>;
        labelCity.visible = <span class="hljs-keyword">true</span>;
        parishLocCity.visible = <span class="hljs-keyword">true</span>;

        <span class="hljs-keyword">var</span> win = <span class="hljs-keyword">null</span>;
        exports.parishCity = parishLocCity.value;
        exports.parishState = parishLocState.value;
        <span class="hljs-keyword">var</span> parishFound = <span class="hljs-keyword">require</span>(<span class="hljs-string">'/ui/common/Finder'</span>);
        win = <span class="hljs-keyword">new</span> parishFound();
        exports.tab2.open(win);
    };

    parishLocState.addEventListener(<span class="hljs-string">'focus'</span>, locStateEvent);

    <span class="hljs-keyword">var</span> findParish = Ti.UI.createButton({
        title: <span class="hljs-string">'Submit'</span>,
        top: <span class="hljs-string">'280dp'</span>,
        right: margin
    });

    findParish.addEventListener(<span class="hljs-string">'click'</span>,fParish);
    b.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{

    findParish.removeEventListener(<span class="hljs-string">'click'</span>,fParish);
    parishLocState.removeEventListener(<span class="hljs-string">'click'</span>,locStateEvent);

    });

    <span class="hljs-keyword">self</span>.add(findParish);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
};
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 12th 2013, 12:47:32 pm">January 12th 2013</span>
				by <span class='authorname'>adebisi oladipupo</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>androd crash</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I am running Titanium SDK 3.0.1 on Mac OSX mountain Lion<br>Here&#39;s the Finder.js file called by the UI:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> loc = require('/ui/common/locationTabGroup');
//<span class="hljs-keyword">var</span> btn = require('/ui/common/locationTabGroup');

function local_search(_args) {

    <span class="hljs-keyword">var</span> self = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWindow({
        backgroundColor:'<span class="hljs-comment">#fff',</span>
        barColor: '<span class="hljs-comment">#9b05ad'</span>
    });

    // create table view
    <span class="hljs-keyword">var</span> tableview = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTableView({top: <span class="hljs-string">"60dp"</span>});

    self.add(<span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createLabel({
        borderRadius: <span class="hljs-number">5</span>, backgroundColor: <span class="hljs-string">"#13386c"</span>,
        color: <span class="hljs-string">"#fff"</span>, left: <span class="hljs-string">"10dp"</span>, right: <span class="hljs-string">"10dp"</span>, top: <span class="hljs-string">"10dp"</span>, height: <span class="hljs-string">"40dp"</span>,
        textAlign: <span class="hljs-string">"center"</span>,
        font: {fontWeight: <span class="hljs-string">"bold"</span>, fontSize: <span class="hljs-number">16</span>},
        text: '<span class="hljs-type">RCCG</span> <span class="hljs-type">Parish</span> <span class="hljs-keyword">in</span> ' +loc.parishCity
    }));


    <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.fireEvent(<span class="hljs-string">"show_indicator"</span>);

    <span class="hljs-keyword">var</span> navActInd = null;
    <span class="hljs-keyword">if</span> (<span class="hljs-type">Titanium</span>.<span class="hljs-type">Platform</span>.name == 'iPhone <span class="hljs-type">OS</span>') {
        navActInd = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createActivityIndicator();
        navActInd.show();
        self.setRightNavButton(navActInd);
    }

    // add table view to the window
    self.add(tableview);


    function loadWebView(url, placeName) {

        <span class="hljs-keyword">var</span> win = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWindow({
            fullscreen:<span class="hljs-literal">false</span>, 
            navBarHidden:<span class="hljs-literal">false</span>, 
            barColor: '<span class="hljs-comment">#9b05ad',</span>
            title: placeName
            });

        <span class="hljs-keyword">var</span> wv = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWebView({
            url: url,
            left: <span class="hljs-number">0</span>, right: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span>, bottom: <span class="hljs-number">0</span>
        });
        win.add(wv);
        loc.tab2.open(win);
    }

    <span class="hljs-type">Titanium</span>.<span class="hljs-type">Yahoo</span>.yql('select * <span class="hljs-keyword">from</span> local.search where location=<span class="hljs-string">"'+loc.parishCity+','+loc.parishState+'"</span> <span class="hljs-keyword">and</span> query=<span class="hljs-string">"RCCG"</span> limit <span class="hljs-number">10</span>',function(e)
    {
        <span class="hljs-keyword">var</span> data = e.data;
        <span class="hljs-keyword">if</span> (data == null || !data.<span class="hljs-type">Result</span>)
        {
            <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createAlertDialog({
                title: '<span class="hljs-type">Error</span> querying <span class="hljs-type">YQL</span>',
                message: '<span class="hljs-type">No</span> data could be retrieved <span class="hljs-keyword">using</span> <span class="hljs-type">YQL</span>' }).show();
            <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.fireEvent('hide_indicator');
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">var</span> count = data.<span class="hljs-type">Result</span>.length;
        <span class="hljs-keyword">var</span> rows = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) {
            <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = data.<span class="hljs-type">Result</span>[i];
            <span class="hljs-keyword">var</span> row = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createTableViewRow({height:<span class="hljs-number">60</span>});
            row.yahooUrl = <span class="hljs-literal">result</span>.<span class="hljs-type">ClickUrl</span>;
            row.place = <span class="hljs-literal">result</span>.<span class="hljs-type">Title</span>;
            <span class="hljs-keyword">var</span> title = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createLabel({
                left: <span class="hljs-number">10</span>,
                right: <span class="hljs-number">10</span>,
                textAlign: 'left',
                height: <span class="hljs-number">50</span>,
                text: <span class="hljs-literal">result</span>.<span class="hljs-type">Title</span> + <span class="hljs-string">", "</span> + <span class="hljs-literal">result</span>.<span class="hljs-type">Address</span> + <span class="hljs-string">", "</span> + <span class="hljs-literal">result</span>.<span class="hljs-type">City</span>,
                font:{fontWeight:'bold',fontSize:<span class="hljs-number">18</span>}
            });
            row.add(title);
            rows.push(row);
        }
        <span class="hljs-keyword">var</span> tableEventHandler = function(e) {
            loadWebView(e.row.yahooUrl, e.row.place);
        };
        tableview.addEventListener(<span class="hljs-string">"click"</span>, tableEventHandler);
        tableview.setData(rows);
        <span class="hljs-keyword">if</span>(navActInd){
            navActInd.hide();
        }
        <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.fireEvent(<span class="hljs-string">"hide_indicator"</span>);
        loc.b.addEventListener('click', function()
        {

        tableview.removeEventListener('click',tableEventHandler);

        });

    });

//    }
    <span class="hljs-keyword">return</span> self;
};

module.exports = local_search;
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="January 12th 2013, 12:50:22 pm">January 12th 2013</span>
								by <span class='authorname'>adebisi oladipupo</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Please post the error message itself. If you don&#39;t see it in Ti Studio than you can launch ddms (type &quot;ddms&quot; in the terminal window in Ti Studio), select the emulator, and then you will see it there.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 12th 2013, 1:02:20 pm">January 12th 2013</span>
								by <span class='authorname'>Justin Toth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>here&#39;s the error message from DDMS: </p>
<p>01-13 18:20:15.721: E&#x2F;InputDispatcher(62): channel &#39;407a4418 com.bespokenit.myhop&#x2F;com.bespokenit.myhop.MyhopActivity (server)&#39; ~ Consumer closed input channel or an error occurred.  events=0x8</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 13th 2013, 9:25:11 pm">January 13th 2013</span>
								by <span class='authorname'>adebisi oladipupo</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-254404">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>Good to see you again :)</p>
<p>Now that you have narrowed down the scope of the problem to this specific block of code - you need to keep narrowing it down.  As we will not be able to run the code ourselves we are left to review it for obvious errors and typos.</p>
<p>In the meantime can you do a series of tests for me, the result of which will hopefully provides us with the answer of the specific block of code at fault.</p>
<p><strong>1. Are you getting any actual results back and if so are the numbers of these low and not some huge number</strong></p>
<pre><code class="hljs">var <span class="hljs-command">count</span> = data.Result.<span class="hljs-property">length</span>;
Ti.API.info('YQL <span class="hljs-command">count</span>: ' + <span class="hljs-command">count</span>);
</code></pre><p><strong>2. Strip everything from finder.js this will tell us if the problem IS in here</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> loc = require('/ui/common/locationTabGroup');
//<span class="hljs-keyword">var</span> btn = require('/ui/common/locationTabGroup');

function local_search(_args) {

    <span class="hljs-keyword">var</span> self = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWindow({
        backgroundColor:'<span class="hljs-comment">#fff',</span>
        barColor: '<span class="hljs-comment">#9b05ad'</span>
    });
  /*
    // create table view
    <span class="hljs-keyword">var</span> tableview = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTableView({top: <span class="hljs-string">"60dp"</span>});

    self.add(<span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createLabel({
        borderRadius: <span class="hljs-number">5</span>, backgroundColor: <span class="hljs-string">"#13386c"</span>,
        color: <span class="hljs-string">"#fff"</span>, left: <span class="hljs-string">"10dp"</span>, right: <span class="hljs-string">"10dp"</span>, top: <span class="hljs-string">"10dp"</span>, height: <span class="hljs-string">"40dp"</span>,
        textAlign: <span class="hljs-string">"center"</span>,
        font: {fontWeight: <span class="hljs-string">"bold"</span>, fontSize: <span class="hljs-number">16</span>},
        text: '<span class="hljs-type">RCCG</span> <span class="hljs-type">Parish</span> <span class="hljs-keyword">in</span> ' +loc.parishCity
    }));


    <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.fireEvent(<span class="hljs-string">"show_indicator"</span>);

    <span class="hljs-keyword">var</span> navActInd = null;
    <span class="hljs-keyword">if</span> (<span class="hljs-type">Titanium</span>.<span class="hljs-type">Platform</span>.name == 'iPhone <span class="hljs-type">OS</span>') {
        navActInd = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createActivityIndicator();
        navActInd.show();
        self.setRightNavButton(navActInd);
    }

    // add table view to the window
    self.add(tableview);


    function loadWebView(url, placeName) {

        <span class="hljs-keyword">var</span> win = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWindow({
            fullscreen:<span class="hljs-literal">false</span>, 
            navBarHidden:<span class="hljs-literal">false</span>, 
            barColor: '<span class="hljs-comment">#9b05ad',</span>
            title: placeName
            });

        <span class="hljs-keyword">var</span> wv = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWebView({
            url: url,
            left: <span class="hljs-number">0</span>, right: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span>, bottom: <span class="hljs-number">0</span>
        });
        win.add(wv);
        loc.tab2.open(win);
    }

    <span class="hljs-type">Titanium</span>.<span class="hljs-type">Yahoo</span>.yql('select * <span class="hljs-keyword">from</span> local.search where location=<span class="hljs-string">"'+loc.parishCity+','+loc.parishState+'"</span> <span class="hljs-keyword">and</span> query=<span class="hljs-string">"RCCG"</span> limit <span class="hljs-number">10</span>',function(e)
    {
        <span class="hljs-keyword">var</span> data = e.data;
        <span class="hljs-keyword">if</span> (data == null || !data.<span class="hljs-type">Result</span>)
        {
            <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createAlertDialog({
                title: '<span class="hljs-type">Error</span> querying <span class="hljs-type">YQL</span>',
                message: '<span class="hljs-type">No</span> data could be retrieved <span class="hljs-keyword">using</span> <span class="hljs-type">YQL</span>' }).show();
            <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.fireEvent('hide_indicator');
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">var</span> count = data.<span class="hljs-type">Result</span>.length;
        <span class="hljs-keyword">var</span> rows = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) {
            <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = data.<span class="hljs-type">Result</span>[i];
            <span class="hljs-keyword">var</span> row = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createTableViewRow({height:<span class="hljs-number">60</span>});
            row.yahooUrl = <span class="hljs-literal">result</span>.<span class="hljs-type">ClickUrl</span>;
            row.place = <span class="hljs-literal">result</span>.<span class="hljs-type">Title</span>;
            <span class="hljs-keyword">var</span> title = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createLabel({
                left: <span class="hljs-number">10</span>,
                right: <span class="hljs-number">10</span>,
                textAlign: 'left',
                height: <span class="hljs-number">50</span>,
                text: <span class="hljs-literal">result</span>.<span class="hljs-type">Title</span> + <span class="hljs-string">", "</span> + <span class="hljs-literal">result</span>.<span class="hljs-type">Address</span> + <span class="hljs-string">", "</span> + <span class="hljs-literal">result</span>.<span class="hljs-type">City</span>,
                font:{fontWeight:'bold',fontSize:<span class="hljs-number">18</span>}
            });
            row.add(title);
            rows.push(row);
        }
        <span class="hljs-keyword">var</span> tableEventHandler = function(e) {
            loadWebView(e.row.yahooUrl, e.row.place);
        };
        tableview.addEventListener(<span class="hljs-string">"click"</span>, tableEventHandler);
        tableview.setData(rows);
        <span class="hljs-keyword">if</span>(navActInd){
            navActInd.hide();
        }
        <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.fireEvent(<span class="hljs-string">"hide_indicator"</span>);
        loc.b.addEventListener('click', function()
        {

        tableview.removeEventListener('click',tableEventHandler);

        });

    });
 */
//  }
    <span class="hljs-keyword">return</span> self;
};

module.exports = local_search;
</code></pre><p><strong>3. Remove the YQL section ONLY this will tell us if YQL, its returned data or the handling of that hand is the problem</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> loc = require('/ui/common/locationTabGroup');
//<span class="hljs-keyword">var</span> btn = require('/ui/common/locationTabGroup');

function local_search(_args) {

    <span class="hljs-keyword">var</span> self = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWindow({
        backgroundColor:'<span class="hljs-comment">#fff',</span>
        barColor: '<span class="hljs-comment">#9b05ad'</span>
    });

    // create table view
    <span class="hljs-keyword">var</span> tableview = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createTableView({top: <span class="hljs-string">"60dp"</span>});

    self.add(<span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createLabel({
        borderRadius: <span class="hljs-number">5</span>, backgroundColor: <span class="hljs-string">"#13386c"</span>,
        color: <span class="hljs-string">"#fff"</span>, left: <span class="hljs-string">"10dp"</span>, right: <span class="hljs-string">"10dp"</span>, top: <span class="hljs-string">"10dp"</span>, height: <span class="hljs-string">"40dp"</span>,
        textAlign: <span class="hljs-string">"center"</span>,
        font: {fontWeight: <span class="hljs-string">"bold"</span>, fontSize: <span class="hljs-number">16</span>},
        text: '<span class="hljs-type">RCCG</span> <span class="hljs-type">Parish</span> <span class="hljs-keyword">in</span> ' +loc.parishCity
    }));


    <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.fireEvent(<span class="hljs-string">"show_indicator"</span>);

    <span class="hljs-keyword">var</span> navActInd = null;
    <span class="hljs-keyword">if</span> (<span class="hljs-type">Titanium</span>.<span class="hljs-type">Platform</span>.name == 'iPhone <span class="hljs-type">OS</span>') {
        navActInd = <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createActivityIndicator();
        navActInd.show();
        self.setRightNavButton(navActInd);
    }

    // add table view to the window
    self.add(tableview);


    function loadWebView(url, placeName) {

        <span class="hljs-keyword">var</span> win = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWindow({
            fullscreen:<span class="hljs-literal">false</span>, 
            navBarHidden:<span class="hljs-literal">false</span>, 
            barColor: '<span class="hljs-comment">#9b05ad',</span>
            title: placeName
            });

        <span class="hljs-keyword">var</span> wv = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createWebView({
            url: url,
            left: <span class="hljs-number">0</span>, right: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span>, bottom: <span class="hljs-number">0</span>
        });
        win.add(wv);
        loc.tab2.open(win);
    }
 /*
    <span class="hljs-type">Titanium</span>.<span class="hljs-type">Yahoo</span>.yql('select * <span class="hljs-keyword">from</span> local.search where location=<span class="hljs-string">"'+loc.parishCity+','+loc.parishState+'"</span> <span class="hljs-keyword">and</span> query=<span class="hljs-string">"RCCG"</span> limit <span class="hljs-number">10</span>',function(e)
    {
        <span class="hljs-keyword">var</span> data = e.data;
        <span class="hljs-keyword">if</span> (data == null || !data.<span class="hljs-type">Result</span>)
        {
            <span class="hljs-type">Titanium</span>.<span class="hljs-type">UI</span>.createAlertDialog({
                title: '<span class="hljs-type">Error</span> querying <span class="hljs-type">YQL</span>',
                message: '<span class="hljs-type">No</span> data could be retrieved <span class="hljs-keyword">using</span> <span class="hljs-type">YQL</span>' }).show();
            <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.fireEvent('hide_indicator');
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">var</span> count = data.<span class="hljs-type">Result</span>.length;
        <span class="hljs-keyword">var</span> rows = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) {
            <span class="hljs-keyword">var</span> <span class="hljs-literal">result</span> = data.<span class="hljs-type">Result</span>[i];
            <span class="hljs-keyword">var</span> row = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createTableViewRow({height:<span class="hljs-number">60</span>});
            row.yahooUrl = <span class="hljs-literal">result</span>.<span class="hljs-type">ClickUrl</span>;
            row.place = <span class="hljs-literal">result</span>.<span class="hljs-type">Title</span>;
            <span class="hljs-keyword">var</span> title = <span class="hljs-type">Ti</span>.<span class="hljs-type">UI</span>.createLabel({
                left: <span class="hljs-number">10</span>,
                right: <span class="hljs-number">10</span>,
                textAlign: 'left',
                height: <span class="hljs-number">50</span>,
                text: <span class="hljs-literal">result</span>.<span class="hljs-type">Title</span> + <span class="hljs-string">", "</span> + <span class="hljs-literal">result</span>.<span class="hljs-type">Address</span> + <span class="hljs-string">", "</span> + <span class="hljs-literal">result</span>.<span class="hljs-type">City</span>,
                font:{fontWeight:'bold',fontSize:<span class="hljs-number">18</span>}
            });
            row.add(title);
            rows.push(row);
        }
        <span class="hljs-keyword">var</span> tableEventHandler = function(e) {
            loadWebView(e.row.yahooUrl, e.row.place);
        };
        tableview.addEventListener(<span class="hljs-string">"click"</span>, tableEventHandler);
        tableview.setData(rows);
        <span class="hljs-keyword">if</span>(navActInd){
            navActInd.hide();
        }
        <span class="hljs-type">Ti</span>.<span class="hljs-type">App</span>.fireEvent(<span class="hljs-string">"hide_indicator"</span>);
        loc.b.addEventListener('click', function()
        {

        tableview.removeEventListener('click',tableEventHandler);

        });

    });
*/

//  }
    <span class="hljs-keyword">return</span> self;
};

module.exports = local_search;
</code></pre><ul>
<li>Do you get a response for point 1?</li>
<li>Does point 2 stop the error (obviously the missing code will not function as you want whilst testing)</li>
<li>Does point 3 stop the error (obviously the missing code will not function as you want whilst testing)</li>
</ul>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 12th 2013, 1:11:48 pm">January 12th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/146794/the-magic-of-android-emulator#answer-254404" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Here&#39;s the console message:</p>
<p>[ERROR][TiExceptionHandler(  852)] (main) [172,44065152] —– Titanium Javascript Runtime Error —–<br>[ERROR][TiExceptionHandler(  852)] (main) [1,44065153] - In ti:&#x2F;module.js:86,19<br>[ERROR][TiExceptionHandler(  852)] (main) [1,44065154] - Message: Uncaught Error: Failed to load resource, Java exception was thrown.<br>[ERROR][TiExceptionHandler(  852)] (main) [1,44065155] - Source:         source = assets.readAsset(filename);<br>[ERROR][V8Exception(  852)] Exception occurred at ti:&#x2F;module.js:86: Uncaught Error: Failed to load resource, Java exception was thrown.</p>
<p>Again, this tab has worked in Android emulator in its current form without error but now this … Maybe you can help me understand the error and suggest a fix. Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 1:15:52 pm">January 12th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Malcolm, strange enough when all I have in the finder.js is the window creation (everything stripped, commented out as you suggested), same problem occurs. I never even got a chance to see the UI outside of the brief display before the crash.</p>
<p>I now get these warnings and info:</p>
<p>[WARN][TiDrawableReference(  918)] (main) [73,2736] Bitmap final bounds could not be determined.  If bitmap is loaded, it won&#39;t be scaled.<br>[WARN][InputManagerService(   62)] Got RemoteException sending setActive(false) notification to pid 894 uid 10038<br>[INFO][ActivityManager(   62)] Displayed com.bespokenit.myhop&#x2F;.MyhopActivity: +12h47m46s576ms (total +8s732ms)<br>[INFO][ActivityManager(   62)] Displayed com.bespokenit.myhop&#x2F;org.appcelerator.titanium.TiActivity: +3s665ms</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 1:28:47 pm">January 12th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just as additional info, this code works as desired in iOS and I tired to see if there&#39;s anything that is specifically annoying to android that makes it crash (even though it has worked before). Uumm magic. I do appreciate your taking the time to help me on this as you always do. thx</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 1:31:10 pm">January 12th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If stripping everything from finder.js and I am still having the same problem, won&#39;t that mean that the problem is not in finder.js? I am suspecting the problem is elsewhere since I have not even shown the UI where I will input data for finder.js to be called for search results. Here is the UI that is created with locationTabGroup.js from where finder.js will be called (running in iOS ).</p>
<p><a href="http:&#x2F;&#x2F;tinypic.com&#x2F;r&#x2F;15zqnv6&#x2F;6">UI that crashes in android</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 1:46:56 pm">January 12th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes, this is what I was trying to identify - is the problem in <strong>finder.js</strong> or the UI or elsewhere.</p>
<p>If you are still seeing the issue after stripping out all but the window itself, then there is very little that could be wrong there.</p>
<p>Your error message suggests you MAY (these particular errors are not always helpful) have an image problem and as it works on iOS this would normally mean (if we believe the error) that this error is one of three things;</p>
<ul>
<li>An image you have in the <strong>&#x2F;android&#x2F;</strong> folder that is not the same as one you have in the <strong>&#x2F;iphone&#x2F;</strong> folder - look for any related images if you have any and then check them for errors OR temporarily replace them with place-holder versions</li>
<li>if you are using images that stretch as a <strong>backgroundImage</strong> then you may not have provided an Android 9-patch image to help it determine where the strecth points are</li>
<li>The image is corrupt - less likely</li>
</ul>
<p>Once you have gone through these things; start the reduction commenting on the UI code - have it return back base objects&#x2F;views and see what happens.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 2:03:23 pm">January 12th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Update me on the above when you have gone through it all.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 2:40:11 pm">January 12th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks Malcolm. I have checked and verified the images. I have also created an android 9 patch image for the background image. Now I no longer can launch the tabGroup associated with the location icon. I am getting these errors:</p>
<p>[ERROR][InputDispatcher(   94)] Received spurious receive callback for unknown input channel.  fd=172, events=0x8<br>[ERROR][InputDispatcher(   94)] Received spurious receive callback for unknown input channel.  fd=153, events=0x8</p>
<p>Confused what is causing this that I can&#39;t even launch the tabGroup now.  Thx for assisting me.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 8:03:22 pm">January 12th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Able to launch the location tabGroup again but back to the same issue of tab2 window crashing at point of creation.  This time I ran ddms and here&#39;s the error message I got:</p>
<p>01-12 18:32:45.639: D&#x2F;SntpClient(62): request time failed: java.net.SocketException: Address family not supported by protocol</p>
<p>Not sure what to make of this or how to fix it (kind of cryptic for my know how).</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 9:37:36 pm">January 12th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>here&#39;s additional error messages from ddms console:</p>
<p>01-13 18:20:15.721: E&#x2F;InputDispatcher(62): channel &#39;407a4418 com.bespokenit.myhop&#x2F;com.bespokenit.myhop.MyhopActivity (server)&#39; ~ Consumer closed input channel or an error occurred.  events=0x8</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 13th 2013, 9:26:43 pm">January 13th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>sorry I have not been back to this - I did not spot that your had updated it.  I notice you asked a related question yesterday.  Is this one now answered?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2013, 8:26:27 pm">January 14th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No problem Malcolm. I know that if you had seen my updated request, you are kind enough to have at least commented back.  This issue has been resolved&#x2F;answered as well.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 15th 2013, 12:49:33 pm">January 15th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-254407">
				
						<section>
							<p>Here are pix showing that the app actually runs on both iOS and android and everything except the location icon works. And in the location icon, only tab2 that has the search function crashes in android.  Just a visual clue to assist helping me. Cheers and thanks.</p>
<p><a href="http:&#x2F;&#x2F;tinypic.com&#x2F;r&#x2F;1zvzmvk&#x2F;6">app on iOS simulator </a></p>
<p><a href="http:&#x2F;&#x2F;tinypic.com&#x2F;r&#x2F;1651sk&#x2F;6">app on Android emulator</a></p>
<p>Thx</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 12th 2013, 1:58:32 pm">January 12th 2013</span>
								by <span class='authorname'>adebisi oladipupo</span><br>
								<a class="icon-bg icon-link" href="question/146794/the-magic-of-android-emulator#answer-254407" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Quick tip; please keep comments in the same answer threads - you never know some genius might sweep in and have an answer and get confused by how this fits in the mix of the other comments (you are not being told off)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 2:05:08 pm">January 12th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanks for the advice. It is just that when I am including code, when the code is too long I need to break it up into segments to preview. ANyways, I hope a genius like you can help me.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2013, 2:35:31 pm">January 12th 2013</span>
											by <span class='authorname'>adebisi oladipupo</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-254537">
				
						<section>
							<p>This issue of window in a tab crashing has now been solved. </p>
<p>One of the great minds at Appcelerator and one who trained me, Pedro, found the issue.  It had to do with attaching a borderRadius and borderColor properties to a window instead of to a view.  My stupidity for inserting the two lines of code in the wrong place and thank Pedro for catching this and helping me with an otherwise intractable issue. Thanks also to Malcolm for his unwavering and never tired help on issues I have posted to the community.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 14th 2013, 10:55:57 pm">January 14th 2013</span>
								by <span class='authorname'>adebisi oladipupo</span><br>
								<a class="icon-bg icon-link" href="question/146794/the-magic-of-android-emulator#answer-254537" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
