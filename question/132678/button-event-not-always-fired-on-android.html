<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Button event not always fired on Android Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Button event not always fired on Android</h1>
		</header>
		<section>
			<p>Hi,<br>I&#39;m using 1.8.1 sdk.<br>I use some buttons where the user click to show some mapviews.<br>The problem is that on device (Galaxy S2 Android 2.3), I have to click multiple time before the event is fired. (ok on simulator). The strange thing is that I always ear the click sound but the event is not alway fired.<br>Any idea ?<br>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 23rd 2012, 4:28:02 pm">February 23rd 2012</span>
				by <span class='authorname'>Armindo Da Silva</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>button</span></li>
					
						<li><span class='tagname'>event</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-231367">
				
						<section>
							<p>can you post some code?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 23rd 2012, 4:52:51 pm">February 23rd 2012</span>
								by <span class='authorname'>Gaurang Chhatbar</span><br>
								<a class="icon-bg icon-link" href="../../question/132678/button-event-not-always-fired-on-android.html#answer-231367" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>yep.</p>
<pre><code class="hljs">var bottomView = Titanium.UI.createView({
    <span class="hljs-string">height :</span> <span class="hljs-string">"36dp"</span>,
    <span class="hljs-string">left :</span> <span class="hljs-string">"0dp"</span>,
    <span class="hljs-string">right :</span> <span class="hljs-string">"0dp"</span>,
    <span class="hljs-string">top :</span> bv
});


var traficBtn = Titanium.UI.createButton({
    <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'../images/traficMap.png'</span>,
<span class="hljs-label">    right:</span><span class="hljs-string">"4dp"</span>,
<span class="hljs-label">    width:</span><span class="hljs-string">"32dp"</span>,
<span class="hljs-label">    height:</span><span class="hljs-string">"32dp"</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">"transparent"</span>
});

traficBtn.addEventListener(<span class="hljs-string">'click'</span>, function() {
    <span class="hljs-keyword">if</span> (isAndroid) {
        navActInd.message = <span class="hljs-string">"Please wait..."</span>;
    } <span class="hljs-keyword">else</span> {
        mainWin.setRightNavButton(navActInd);
    };
    navActInd.show();

       <span class="hljs-comment">//do some stuff here</span>


    navActInd.hide();
    <span class="hljs-keyword">if</span>(!isAndroid) {
       mainWin.setRightNavButton(btnMap);
    };

    var win = Titanium.UI.createWindow({
                <span class="hljs-string">url :</span> <span class="hljs-string">"mapViewLigne.js"</span>,
                <span class="hljs-string">title :</span> <span class="hljs-string">"The title"</span>,
                <span class="hljs-string">ligne :</span> lig,
                <span class="hljs-string">barColor :</span> <span class="hljs-string">'#272727'</span>,
                <span class="hljs-string">showTraficLegend :</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">                forceRegionSite:</span><span class="hljs-literal">true</span>,
                <span class="hljs-string">type :</span> <span class="hljs-string">"routier"</span>});

    Titanium.UI.currentTab.open(win, {
                <span class="hljs-string">animated :</span> <span class="hljs-literal">true</span>
            });
});

bottomView.add(traficBtn);
</code></pre><p>nor the activityIndicator or the window are shown.<br>But sometimes it shows them. But all he times I ear the click on the button</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 23rd 2012, 5:44:58 pm">February 23rd 2012</span>
											by <span class='authorname'>Armindo Da Silva</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-231438">
				
						<section>
							<p>I tried out the following code in Samsung galaxy Y - Android 2.3 and did not find any problem in the button, It open every time and activity indicator also display when i click open button.</p>
<p>May be ur main code generates an error while executing the code or create low memory on phone. first check the errors in console while executing the application and remove all error if possible.</p>
<pre><code class="hljs">Titanium.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);

var tabGroup = Titanium.UI.createTabGroup();

var win = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 1'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});

var tab1 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_views.png'</span>,
    title:<span class="hljs-string">'Tab 1'</span>,
    window:win
});

var label1 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 1'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win.<span class="hljs-built_in">add</span>(label1);

var win2 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 2'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});
var tab2 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_ui.png'</span>,
    title:<span class="hljs-string">'Tab 2'</span>,
    window:win2
});

var label2 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 2'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win2.<span class="hljs-built_in">add</span>(label2);

tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  

var navActInd = Titanium.UI.createActivityIndicator({
    <span class="hljs-variable">height</span>:<span class="hljs-number">50</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">10</span>
});
var bottomView = Titanium.UI.createView({
    <span class="hljs-variable">height</span> : <span class="hljs-string">"36dp"</span>,
    left : <span class="hljs-string">"0dp"</span>,
    right : <span class="hljs-string">"0dp"</span>,
    top : <span class="hljs-number">50</span>,
    backgroundColor : <span class="hljs-string">"black"</span>
});
win.<span class="hljs-built_in">add</span>(bottomView);

var traficBtn = Titanium.UI.createButton({
    <span class="hljs-comment">// backgroundImage : '../images/traficMap.png',</span>
    right:<span class="hljs-string">"4dp"</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">"32dp"</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">"32dp"</span>,
    backgroundColor : <span class="hljs-string">"white"</span>,
    title : <span class="hljs-string">"Open Window"</span>,
    <span class="hljs-built_in">color</span> : <span class="hljs-string">"black"</span>
});
var isAndroid = <span class="hljs-keyword">null</span>;
<span class="hljs-keyword">if</span>( Titanium.Platform.name = <span class="hljs-string">"android"</span>)
{
    isAndroid = <span class="hljs-keyword">true</span>;
}
<span class="hljs-keyword">else</span>
{
    isAndroid = <span class="hljs-keyword">false</span>;
}

traficBtn.addEventListener(<span class="hljs-string">'click'</span>, function() {
    <span class="hljs-keyword">if</span> (isAndroid) {
        navActInd.message = <span class="hljs-string">"Please wait..."</span>;
    } <span class="hljs-keyword">else</span> {
        mainWin.setRightNavButton(navActInd);
    };
    navActInd.show();

       <span class="hljs-comment">//do some stuff here</span>


    navActInd.hide();
    <span class="hljs-keyword">if</span>(!isAndroid) {
       mainWin.setRightNavButton(btnMap);
    };

    var newWin = Titanium.UI.createWindow({
                url : <span class="hljs-string">"test.js"</span>,
                title : <span class="hljs-string">"The title"</span>,
                <span class="hljs-comment">// ligne : lig,</span>
                barColor : <span class="hljs-string">'#272727'</span>,
                showTraficLegend : <span class="hljs-keyword">true</span>,
                forceRegionSite:<span class="hljs-keyword">true</span>,
                type : <span class="hljs-string">"routier"</span>
     });

    tab1.<span class="hljs-built_in">open</span>(newWin, {
                animated : <span class="hljs-keyword">true</span>
            });
});

bottomView.<span class="hljs-built_in">add</span>(traficBtn);

tabGroup.<span class="hljs-built_in">open</span>();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 24th 2012, 9:12:32 am">February 24th 2012</span>
								by <span class='authorname'>Gaurang Chhatbar</span><br>
								<a class="icon-bg icon-link" href="../../question/132678/button-event-not-always-fired-on-android.html#answer-231438" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Gaurang,<br>I will try your code on a separated app. I wonder also if it is not a problem of size (small) of the button on the Ace display.<br>If I click , my finger a long time on the button it works. Wondering if the button is not too small and the phone detect a click in the view not in the button.<br>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 24th 2012, 9:17:11 am">February 24th 2012</span>
											by <span class='authorname'>Armindo Da Silva</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Using a bigger button, make it working fine.<br>Samsung Galaxy Ace touch precision is not so precise as an iPhone 3GS. :-(</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 24th 2012, 3:46:49 pm">February 24th 2012</span>
											by <span class='authorname'>Armindo Da Silva</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
