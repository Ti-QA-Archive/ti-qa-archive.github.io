<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Facebook /me/photos error » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Facebook /me/photos error</h1>
		</header>
		<section>
			<p>Hi everybody,</p>
<p>I&#39;m trying implement mokesmokes facebook module for IOS, and I have some problem to upload a picture.Here is my code</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span>    _facebook = <span class="hljs-built_in">require</span>(<span class="hljs-string">'com.facebook'</span>);
_facebook.appid = Ti.App.facebook_app_id;
_facebook.permissions = [<span class="hljs-string">'read_stream'</span>, <span class="hljs-string">'publish_stream'</span>];

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">post_picture</span>(<span class="hljs-params"></span>)
</span>{
    <span class="hljs-keyword">var</span> file = Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory, <span class="hljs-string">"images/my_image.png"</span>);
    <span class="hljs-keyword">var</span> blob = file.read();
    <span class="hljs-keyword">var</span> data = 
    {
        caption: <span class="hljs-string">"My great picture"</span>,
        picture: blob
    };
    _facebook.requestWithGraphPath(<span class="hljs-string">'/me/photos'</span>, data, <span class="hljs-string">'POST'</span>, facebook_post_success);
}

_facebook.initialize(<span class="hljs-number">2000</span>, <span class="hljs-literal">false</span>);
</code></pre><p>Of course I have login and logout functions, and I call the post_picture function when the user click on my share button.<br>Actually I succeed to get informations from Facebook about the user or post things on user&#39;s feed, so I think the problem is not the way I configure the module.</p>
<p>This is the informations I get</p>
<pre><code class="hljs">[INFO] :   <span class="hljs-number">2015</span>-<span class="hljs-number">03</span>-<span class="hljs-number">29</span> <span class="hljs-number">06</span>:<span class="hljs-number">56</span>:<span class="hljs-number">09.638</span> GreenCard2Golf[<span class="hljs-number">64385</span>:<span class="hljs-number">301726</span>] FBSDKLog: errorBehavior should be <span class="hljs-built_in">set</span> before requests were added. Prior requests will not use the supplied behavior.
[INFO] :   <span class="hljs-number">2015</span>-<span class="hljs-number">03</span>-<span class="hljs-number">29</span> <span class="hljs-number">06</span>:<span class="hljs-number">56</span>:<span class="hljs-number">09.639</span> GreenCard2Golf[<span class="hljs-number">64385</span>:<span class="hljs-number">301726</span>] -[TiBlob _fastCharacterContents]: unrecognized selector sent to instance <span class="hljs-number">0x79644680</span>
</code></pre><p>Before I used the titanium Facebook module, and this method worked perfectly.<br>Does anyone can help me about this ? Thanks a lot in advance !</p>
<p>Application type : mobile.</p>
<p>Titanium SDK : 3.5.0 GA.</p>
<p>platform : IOS</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 29th 2015, 3:27:09 am">March 29th 2015</span>
				by <span class='authorname'>charly mezari</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>facebook</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>what is errorBehavior ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 29th 2015, 10:04:19 am">March 29th 2015</span>
								by <span class='authorname'>Prashant Saini</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I don&#39;t know what is this error. But it appear too when I try other kind of process with Facebook and it work.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 29th 2015, 12:53:01 pm">March 29th 2015</span>
								by <span class='authorname'>charly mezari</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>any news? did you figure out a way to solve it?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 5th 2015, 10:22:11 am">April 5th 2015</span>
								by <span class='authorname'>Michael Gangolf</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>unfortunatly no I still didn&#39;t find a way to do it. I&#39;m planning to come back to a previous version of Facebook module and hope they will fix it soon…</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 5th 2015, 11:05:53 am">April 5th 2015</span>
								by <span class='authorname'>charly mezari</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>did some more testing! The problem is the blob. When you send the image via URL it will work. So the second error line is the problem. The TiBlob is not recognized in the call. Tried toString(), no error but no image</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 5th 2015, 11:06:45 am">April 5th 2015</span>
								by <span class='authorname'>Michael Gangolf</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-286889">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>found a workaround:</p>
<pre><code class="hljs"><span class="hljs-comment">// need to logged in </span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> endPoint</span> = 'https:<span class="hljs-comment">//graph.facebook.com/v2.1/me/photos?access_token=' + fb.getAccessToken();</span>
        <span class="hljs-variable"><span class="hljs-keyword">var</span> xhr</span> = Titanium.Network.createHTTPClient();
        xhr.<span class="hljs-keyword">open</span>('POST', endPoint);
        xhr.send({
            message: <span class="hljs-string">"test"</span>,
            picture: blob  <span class="hljs-comment">// the image</span>
        });
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 5th 2015, 11:20:42 am">April 5th 2015</span>
								by <span class='authorname'>Michael Gangolf</span><br>
								<a class="icon-bg icon-link" href="question/181733/facebook-mephotos-error.html#answer-286889" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks I will try it today !</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 5th 2015, 11:38:27 am">April 5th 2015</span>
											by <span class='authorname'>charly mezari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry I forgot to come back to tell you it work =&#x2F;<br>Thanks a lot it really helped me !</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 19th 2015, 5:17:05 pm">May 19th 2015</span>
											by <span class='authorname'>charly mezari</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-286777">
				
						<section>
							<p>You may want to try out the new version of the <a href="http:&#x2F;&#x2F;www.appcelerator.com&#x2F;blog&#x2F;2015&#x2F;03&#x2F;facebook-graph-api-v2-0&#x2F;">Facebook module</a> that is in beta now and uses the most recent Facebook SDK</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 29th 2015, 12:45:31 pm">March 29th 2015</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="question/181733/facebook-mephotos-error.html#answer-286777" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Does this module still have problem with multiple thread (FBSession should be use from only one thread) ?<br>Because I have to use Facebook in very different place in my app.<br>My app use tabGroup without Alloy, so do you think it will be ok ?</p>
<p>Thanks for your answer !</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 29th 2015, 12:55:35 pm">March 29th 2015</span>
											by <span class='authorname'>charly mezari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Give it a go. It you find problems then report them back via JIRA.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 29th 2015, 12:58:18 pm">March 29th 2015</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes I will try it.<br>But if someone have an answer or a sample code on what I want to do with mokesmokes facebook module, it would be great.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 29th 2015, 1:06:25 pm">March 29th 2015</span>
											by <span class='authorname'>charly mezari</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-286779">
				
						<section>
							<p>I tried the last Facebook module provided by Titanium and I have the exact same error …</p>
<p>Does someone succeed to upload a picture on a facebook account, with the latest titanium module or mokesmoke facebook module ?? </p>
<p>I&#39;m sure it is a small problem very easy to fix, but I don&#39;t find.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 29th 2015, 10:23:10 pm">March 29th 2015</span>
								by <span class='authorname'>charly mezari</span><br>
								<a class="icon-bg icon-link" href="question/181733/facebook-mephotos-error.html#answer-286779" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-286797">
				
						<section>
							<p>Look at the new blog post <a href="http:&#x2F;&#x2F;www.appcelerator.com&#x2F;blog&#x2F;2015&#x2F;03&#x2F;facebook-graph-api-v2-0&#x2F;">Facebook Graph API v2.0</a> and check out to make sure you&#39;re using <strong>3.5.2 SDK</strong> at least.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 30th 2015, 4:34:56 pm">March 30th 2015</span>
								by <span class='authorname'>Eduardo Gomez</span><br>
								<a class="icon-bg icon-link" href="question/181733/facebook-mephotos-error.html#answer-286797" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi,</p>
<p>The error happens with 3.5.2 too. I&#39;ve just tested it. Testing some fixes now</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 1st 2015, 2:05:32 pm">April 1st 2015</span>
											by <span class='authorname'>Oscar Lopez</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-286845">
				
						<section>
							<p>same error here with 3.5.2 (v20150313152423)</p>
<p>On Android the same code is working fine and the image gets posted.</p>
<pre><code class="hljs"> if (fb.permissions.indexOf('publish_actions') &lt; <span class="hljs-number">0</span>) {
            fb.requestNewPublishPermissions(<span class="hljs-string">['publish_actions']</span>, fb.AUDIENCE_FRIENDS, function(e) {

                fb.requestWithGraphPath('me/photos', fbdata, <span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span>, function(e) {

                    if (e.success) {
                        alert(L(<span class="hljs-string">"txt_send"</span>));
                    } else {
                        if (e.error) {
                            alert(e.error);
                        } else {
                            alert(<span class="hljs-string">"Unkown result"</span>);
                        }
                    }
                });
            });
        } else {
            console.log(<span class="hljs-string">"hier"</span>);
            fb.requestWithGraphPath('me/photos', fbdata, <span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span>, function() {
                console.log(<span class="hljs-string">"done"</span>)
            });
        }
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 2nd 2015, 4:39:09 am">April 2nd 2015</span>
								by <span class='authorname'>Michael Gangolf</span><br>
								<a class="icon-bg icon-link" href="question/181733/facebook-mephotos-error.html#answer-286845" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I don&#39;t understand how it is possible because it&#39;s a use case provided by their <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;platform&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Modules.Facebook">documentation</a>….</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 5th 2015, 11:10:21 am">April 5th 2015</span>
											by <span class='authorname'>charly mezari</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-287424">
				
						<section>
							<p>JIRA Ticket and bug in the community board:</p>
<p>https:&#x2F;&#x2F;community.appcelerator.com&#x2F;topic&#x2F;445&#x2F;posting-a-photo-to-facebook-doesn-t-support-blobs-ios&#x2F;</p>
<p>https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-18916</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 19th 2015, 4:54:20 pm">May 19th 2015</span>
								by <span class='authorname'>Michael Gangolf</span><br>
								<a class="icon-bg icon-link" href="question/181733/facebook-mephotos-error.html#answer-287424" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks I will follow the subject.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 19th 2015, 5:18:40 pm">May 19th 2015</span>
											by <span class='authorname'>charly mezari</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
