<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium Alloy Android Push Notifications not being delivered » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium Alloy Android Push Notifications not being delivered</h1>
		</header>
		<section>
			<p>Hi Everyone.</p>
<p>I&#39;m developing an Android app using Titanium Alloy.</p>
<p>Titanium Studio, build: 3.2.0.201312191547<br>(c) Copyright 2012-2013 by Appcelerator, Inc.  All rights reserved.</p>
<p>Build: jenkins-titanium-rcp-master-76 (origin&#x2F;master)<br>Date: 19 December 2013, 15:48:53.</p>
<p> My OS is Windows 8. I&#39;m running the app directly on the device rather than using an emulator.</p>
<p>I&#39;m having an issue with my push notifications. </p>
<p> can see the device is registered in the dashboard but when I send a message it&#39;s never delivered. In the Push Log it just says &quot;No sending logs found for this push notification. Push notification logs of requests will be visible here when push notifications are sent to subscribers of this app.&quot; and there&#39;s no record of the message at all in the API Logs.</p>
<p>I&#39;m really not sure what information you guys might need to help me diagnose the problem so please ask away and I&#39;ll provide you with any info you need.</p>
<p>Any help will be greatly appreciated.</p>
<p>Kind Regards,<br>Devon Britton.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 14th 2014, 7:39:53 am">January 14th 2014</span>
				by <span class='authorname'>Devon Britton</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>push notifications</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>EDIT:</p>
<p>When trying to push a notification using the following code in my app…</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testNotifications</span>(<span class="hljs-params"></span>) </span>{
    Cloud.PushNotifications.notify({
    channel: <span class="hljs-string">'all'</span>,
    to_ids: <span class="hljs-string">'everyone'</span>,
    payload: <span class="hljs-string">'Welcome to push notifications'</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">if</span> (e.success) {
        alert(<span class="hljs-string">'Success'</span>);
    } <span class="hljs-keyword">else</span> {
        alert(<span class="hljs-string">'Error:\\n'</span> +
            ((e.error &amp;&amp; e.message) || <span class="hljs-built_in">JSON</span>.stringify(e)));
    }
});
</code></pre><p>I&#39;m getting a &quot;404: Failed to authenticate user&quot; Error.</p>
<p>Anyone know what I&#39;m doing wrong??</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 14th 2014, 9:57:12 am">January 14th 2014</span>
								by <span class='authorname'>Devon Britton</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Getting a similar issue when i check in the logs. Any luck?</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 21st 2015, 4:07:29 am">February 21st 2015</span>
								by <span class='authorname'>Vishnu Khaunte</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-273876">
				
						<section>
							<p>Maybe these tutorials will help you nail your problem</p>
<p><a href="http:&#x2F;&#x2F;www.titaniumtutorial.com&#x2F;2012&#x2F;06&#x2F;appcelerator-cloud-push-notification-in.html">Appcelerator Cloud Push in Android</a></p>
<p><a href="http:&#x2F;&#x2F;www.titaniumtutorial.com&#x2F;2012&#x2F;07&#x2F;appcelerator-cloud-push-notification-in.html">Appcelerator Cloud Push in iPhone</a></p>
<p>Just wondering if you are logging in the user, using code similar to this, before calling testNotifications() ?</p>
<pre><code class="hljs">Cloud.Users.login({
     login: <span class="hljs-string">'push123'</span>,
     password: <span class="hljs-string">'push123'</span>
 }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
     <span class="hljs-keyword">if</span> (e.success) {
         alert(<span class="hljs-string">"login success"</span>);
     } <span class="hljs-keyword">else</span> {
         alert(<span class="hljs-string">'Error: '</span> +((e.error &amp;&amp; e.message) || <span class="hljs-built_in">JSON</span>.stringify(e)));
     }
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 14th 2014, 10:48:22 am">January 14th 2014</span>
								by <span class='authorname'>Luke Taylor</span><br>
								<a class="icon-bg icon-link" href="question/161483/titanium-alloy-android-push-notifications-not-being-delivered.html#answer-273876" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ok your code looks similar to the example code:</p>
<p>Here is a <a href="http:&#x2F;&#x2F;www.titaniumtutorial.com&#x2F;2013&#x2F;10&#x2F;acs-push-notification-using-gcm.html">guide</a> which is specific to setting up ACS with GCM. You should make sure you have set up and obtained an API key for your app.</p>
<p>Here is another <a href="https:&#x2F;&#x2F;github.com&#x2F;TiTutorial&#x2F;acs-android-push-gcm">link</a> to a project which is set up specifically for Android push which you can use to check your code against.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2014, 11:37:33 am">January 14th 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ugh.</p>
<p>Now I&#39;m getting a &quot;400: Subscription not Found&quot; error.</p>
<p>I didn&#39;t even change anything. ~sigh~</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2014, 12:08:14 pm">January 14th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok try swapping your code out with this <a href="https:&#x2F;&#x2F;github.com&#x2F;TiTutorial&#x2F;acs-android-push-gcm&#x2F;blob&#x2F;master&#x2F;Resources&#x2F;app.js">example</a> and make sure to change the login username and password, as this is what you should have registered with ACS.</p>
<p>Hopefully, as long as your API is correct and your device is registered to ACS using GCM then you should receive all the alerts. This will then identify whether it is something missing from your code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2014, 1:08:18 pm">January 14th 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey Luke.</p>
<p>Thanks for all the help. I tried your suggestion above but I&#39;m still having the same issue. Everything seems to be working fine but the message just never arrives :-(</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 15th 2014, 4:21:21 am">January 15th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-273877">
				
						<section>
							<p>Hi Luke.</p>
<p>Thanks for the help. I&#39;ll check those links out shortly!!</p>
<p>To answer your question, I am logging in as you asked. Here&#39;s the full code.</p>
<pre><code class="hljs">var deviceToken;

CloudPush.retrieveDeviceToken({
    success : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deviceTokenSuccess</span><span class="hljs-params">(e)</span></span> {
        deviceToken = e.deviceToken;
        alert(<span class="hljs-string">'Device Token: '</span> + deviceToken);
        Ti.API.info(<span class="hljs-string">'Device Token: '</span> + e.deviceToken);
    },
    <span class="hljs-built_in">error</span> : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deviceTokenError</span><span class="hljs-params">(e)</span></span> {
        alert(<span class="hljs-string">'Failed to register for push! '</span> + e.<span class="hljs-built_in">error</span>);
    }
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loginDefault</span><span class="hljs-params">(e)</span></span> {
    //Create a Default User <span class="hljs-keyword">in</span> Cloud Console, <span class="hljs-keyword">and</span> login with same credential
    Cloud.Users.login({
        login : <span class="hljs-string">'TestUser'</span>,
        password : <span class="hljs-string">'12345'</span>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span> {
        <span class="hljs-keyword">if</span> (e.success) {
            //alert(<span class="hljs-string">"Login success"</span>);
            defaultSubscribe();
        } <span class="hljs-keyword">else</span> {
            //alert(<span class="hljs-string">'Login error: '</span> + ((e.<span class="hljs-built_in">error</span> &amp;&amp; e.message) || JSON.stringify(e)));
        }
    });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultSubscribe</span><span class="hljs-params">()</span></span> {
    Cloud.PushNotifications.subscribe({
        channel : <span class="hljs-string">'alert2'</span>,//<span class="hljs-string">'alert'</span> is channel name
        device_token : deviceToken,
        <span class="hljs-built_in">type</span> : <span class="hljs-string">'android'</span> //here i am using gcm, it is recomended one
    }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span> {
        <span class="hljs-keyword">if</span> (e.success) {
            alert(<span class="hljs-string">'Subscribed for Push Notification!'</span>);
        } <span class="hljs-keyword">else</span> {
            alert(<span class="hljs-string">'Subscribe error:'</span> + ((e.<span class="hljs-built_in">error</span> &amp;&amp; e.message) || JSON.stringify(e)));
        }
    });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testNotifications</span><span class="hljs-params">()</span></span> {
    Cloud.PushNotifications.notify({
    channel: <span class="hljs-string">'all'</span>,
    to_ids: <span class="hljs-string">'everyone'</span>,
    payload: <span class="hljs-string">'Welcome to push notifications'</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span></span> {
    <span class="hljs-keyword">if</span> (e.success) {
        alert(<span class="hljs-string">'Success'</span>);
    } <span class="hljs-keyword">else</span> {
        alert(<span class="hljs-string">'Error:\\n'</span> +
            ((e.<span class="hljs-built_in">error</span> &amp;&amp; e.message) || JSON.stringify(e)));
    }
});
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 14th 2014, 11:00:07 am">January 14th 2014</span>
								by <span class='authorname'>Devon Britton</span><br>
								<a class="icon-bg icon-link" href="question/161483/titanium-alloy-android-push-notifications-not-being-delivered.html#answer-273877" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>A little nit picky, but this shouldn&#39;t have been added as an answer and instead as a comment. It makes the flow of the Q&amp;A a lot easier to read :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2014, 11:42:58 am">January 14th 2014</span>
											by <span class='authorname'>Luke Taylor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yeah I tried to add it as a comment…but for some reason every time I tried the website hung so eventually I just added it as an answer…</p>
<p>I have endless issues with the appcelerator website…lol</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 14th 2014, 11:47:30 am">January 14th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-273893">
				
						<section>
							<p>did you add Google Cloud Messaging (GCM) API Key and Google Cloud Messaging (GCM) Sender ID to the acs settings after the package name.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 14th 2014, 3:58:29 pm">January 14th 2014</span>
								by <span class='authorname'>prakash abhay</span><br>
								<a class="icon-bg icon-link" href="question/161483/titanium-alloy-android-push-notifications-not-being-delivered.html#answer-273893" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Prakash.</p>
<p>I&#39;ve added the GCM API Key and GCM Sender ID to the project in the appcelerator dashboard. Is there somewhere else I&#39;m supposed to put it?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 15th 2014, 4:04:32 am">January 15th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Devon</p>
<p>in the tiapp.xml file, you need to specify push type (either gcm or mqtt) and you have to use server key not android key.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 15th 2014, 6:43:27 am">January 15th 2014</span>
											by <span class='authorname'>prakash abhay</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Prakash.</p>
<p>Are these the properties you&#39;re talking about?</p>
<pre><code class="hljs">&lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"acs-push-type-development"</span> type=<span class="hljs-string">"string"</span>&gt;gcm&lt;/<span class="hljs-keyword">property</span>&gt;
&lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"acs-push-type-production"</span> type=<span class="hljs-string">"string"</span>&gt;gcm&lt;/<span class="hljs-keyword">property</span>&gt;
&lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"acs-push-type"</span> type=<span class="hljs-string">"string"</span>&gt;gcm&lt;/<span class="hljs-keyword">property</span>&gt;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 15th 2014, 6:56:31 am">January 15th 2014</span>
											by <span class='authorname'>Devon Britton</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
