<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Audio Recording in android » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Audio Recording in android</h1>
		</header>
		<section>
			<p>hi everyone,</p>
<p>wanted to ask if i can record on android?<br>i&#39;m using Titanium mobile sdk 1.6</p>
<p>checked kitchensink, checked the soun_record.js<br>but seems as if it is only for iOS and not for android?</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> recorder</span> = Titanium.Media.createAudioRecorder();
</code></pre><p>gives me error: cannot find function createAudioRecorder in object [Ti.Media]….</p>
<p>can i record in android with audiorecorder?<br>or any other way to record in android?</p>
<p>will be very grateful for your help and responses…</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 25th 2011, 9:52:47 am">February 25th 2011</span>
				by <span class='authorname'>Awais Akhtar</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>audio</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Go to <a href="http:&#x2F;&#x2F;vocalrank.com">vocalrank.com</a>. That android audio recording module picks up where Codeboxed stopped. It works with TiStudio 3.0, and targets Android SDK 10. There&#39;s a sample apk available for download and more info about the Android audio recorder module.</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 12th 2013, 2:44:25 pm">February 12th 2013</span>
								by <span class='authorname'>Eric Dean</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>8</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>8 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-215477">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Now recording is possible on Android, natively, without Intents.<br>We just released the Audio Recorder Titanium Module for Android.<br>You can see more details on <a href="http:&#x2F;&#x2F;www.codeboxed.com&#x2F;2011&#x2F;08&#x2F;titanium-module-for-android-audio-recording&#x2F;">Codeboxed Titanium Audio Recorder Module</a><br>Follow us on Twitter: <a href="http:&#x2F;&#x2F;twitter.com&#x2F;codeboxed">@codeboxed</a> for more updates.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 4th 2011, 9:43:34 pm">August 4th 2011</span>
								by <span class='authorname'>Alexandru Budin</span><br>
								<a class="icon-bg icon-link" href="question/116291/audio-recording-in-android#answer-215477" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>thanks, it will help someone :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 4th 2011, 9:47:32 pm">August 4th 2011</span>
											by <span class='authorname'>Awais Akhtar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Does not work currently in Titanium SDK 2.0.1 and no support on the blog.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 4th 2012, 12:28:21 pm">May 4th 2012</span>
											by <span class='authorname'>C Lee</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>?????^?^</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 31st 2012, 5:20:43 am">December 31st 2012</span>
											by <span class='authorname'>Seungik Kim</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank u so much,  Happy new year~</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 31st 2012, 5:21:34 am">December 31st 2012</span>
											by <span class='authorname'>Seungik Kim</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Everybody,</p>
<p>I am using Android 2.2.I added the module run the project and having this error in console </p>
<p>The &#39;apiversion&#39; for &#39;com.codeboxed.audiorecorder&#39; in the module manifest is not a valid value. Please use a version of the module that has an &#39;apiversion&#39; value of 2 or greater set in it&#39;s manifest file</p>
<p>What could be the issue ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 20th 2013, 4:57:23 am">March 20th 2013</span>
											by <span class='authorname'>Ali Akram</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>-3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-203191">
				
						<section>
							<p>Blog post came out yesterday <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;blog&#x2F;2011&#x2F;02&#x2F;launching-activities-and-using-content-uris-in-android.html">Launching Activities and Using Content URIs in Android
</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 25th 2011, 4:01:46 pm">February 25th 2011</span>
								by <span class='authorname'>Don Thorp</span><br>
								<a class="icon-bg icon-link" href="question/116291/audio-recording-in-android#answer-203191" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for help Don.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 25th 2011, 4:15:30 pm">February 25th 2011</span>
											by <span class='authorname'>Awais Akhtar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-203151">
				
						<section>
							<p>Apparently, there&#39;s a demo coming soon to show how to do this with Android &#39;intents&#39;.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 25th 2011, 3:12:48 pm">February 25th 2011</span>
								by <span class='authorname'>Kosso</span><br>
								<a class="icon-bg icon-link" href="question/116291/audio-recording-in-android#answer-203151" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Kosso.<br>i&#39;ll appreciate your response, please drop link too will grateful.</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 25th 2011, 3:46:44 pm">February 25th 2011</span>
											by <span class='authorname'>Awais Akhtar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-213339">
				
						<section>
							<p>problem is currently there in no way in Android to get the voice recording file name from the URI – short of coding up a module.  Would have been to include this in the URI work already implemented.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 16th 2011, 4:08:03 pm">July 16th 2011</span>
								by <span class='authorname'>Brian Dittmer</span><br>
								<a class="icon-bg icon-link" href="question/116291/audio-recording-in-android#answer-213339" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-214773">
				
						<section>
							<p>Forgive my inability to update the GIT hub, but here&#39;s a modified version of the &#39;KitchenSink&#x2F;Resources&#x2F;examples&#x2F;sound_record.js&#39; (as of 7&#x2F;27&#x2F;11) that uses the above example and fits into the rest of the window&#39;s design.  One problem I can&#39;t get around is that I think the sample rate is inaccurate in the recorded resource, so when played back it sounds like it&#39;s coming out at half the speed.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;

<span class="hljs-keyword">var</span> file;
<span class="hljs-keyword">var</span> timer;
<span class="hljs-keyword">var</span> sound;


<span class="hljs-keyword">var</span> label = Titanium.UI.createLabel({
    text:<span class="hljs-string">''</span>,
    top:<span class="hljs-number">150</span>,
    color:<span class="hljs-string">'#999'</span>,
    textAlign:<span class="hljs-string">'center'</span>,
    width:<span class="hljs-string">'auto'</span>,
    height:<span class="hljs-string">'auto'</span>
});

win.add(label);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lineTypeToStr</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">var</span> type = Ti.Media.audioLineType;
    <span class="hljs-keyword">switch</span>(type)
    {
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_HEADSET_INOUT:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"headset"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_RECEIVER_AND_MIC:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"receiver/mic"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_HEADPHONES_AND_MIC:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"headphones/mic"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_HEADPHONES:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"headphones"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_LINEOUT:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"lineout"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_SPEAKER:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"speaker"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_MICROPHONE:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"microphone"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_MUTED:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"silence switch on"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_UNAVAILABLE:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"unavailable"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_UNKNOWN:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"unknown"</span>;
    }
}

<span class="hljs-keyword">var</span> linetype = Titanium.UI.createLabel({
    text: <span class="hljs-string">"audio line type: "</span>+lineTypeToStr(),
    bottom:<span class="hljs-number">20</span>,
    color:<span class="hljs-string">'#999'</span>,
    textAlign:<span class="hljs-string">'center'</span>,
    width:<span class="hljs-string">'auto'</span>,
    height:<span class="hljs-string">'auto'</span>
});

win.add(linetype);

<span class="hljs-keyword">var</span> volume = Titanium.UI.createLabel({
    text: <span class="hljs-string">"volume: "</span>+Ti.Media.volume,
    bottom:<span class="hljs-number">50</span>,
    color:<span class="hljs-string">'#999'</span>,
    textAlign:<span class="hljs-string">'center'</span>,
    width:<span class="hljs-string">'auto'</span>,
    height:<span class="hljs-string">'auto'</span>
});

win.add(volume);

Ti.Media.addEventListener(<span class="hljs-string">'linechange'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{
    linetype.text = <span class="hljs-string">"audio line type: "</span>+lineTypeToStr();
});

Ti.Media.addEventListener(<span class="hljs-string">'volume'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{
    volume.text = <span class="hljs-string">"volume: "</span>+e.volume;
});

<span class="hljs-keyword">var</span> duration = <span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showLevels</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">var</span> peak = Ti.Media.peakMicrophonePower;
    <span class="hljs-keyword">var</span> avg = Ti.Media.averageMicrophonePower;
    duration++;
    label.text = <span class="hljs-string">'duration: '</span>+duration+<span class="hljs-string">' seconds\npeak power: '</span>+peak+<span class="hljs-string">'\navg power: '</span>+avg;
}

<span class="hljs-keyword">var</span> b1 = Titanium.UI.createButton({
    title:<span class="hljs-string">'Start Recording'</span>,
    width:<span class="hljs-number">200</span>,
    height:<span class="hljs-number">40</span>,
    top:<span class="hljs-number">20</span>
});

<span class="hljs-keyword">var</span> isAndroid = (Titanium.Platform.name != <span class="hljs-string">'iPhone OS'</span>);
<span class="hljs-keyword">if</span> (!isAndroid) {

    Titanium.Media.audioSessionMode = Ti.Media.AUDIO_SESSION_MODE_PLAY_AND_RECORD;
    <span class="hljs-keyword">var</span> recording = Ti.Media.createAudioRecorder();

    <span class="hljs-comment">// default compression is Ti.Media.AUDIO_FORMAT_LINEAR_PCM</span>
    <span class="hljs-comment">// default format is Ti.Media.AUDIO_FILEFORMAT_CAF</span>

    <span class="hljs-comment">// this will give us a wave file with µLaw compression which</span>
    <span class="hljs-comment">// is a generally small size and suitable for telephony recording</span>
    <span class="hljs-comment">// for high end quality, you'll want LINEAR PCM - however, that</span>
    <span class="hljs-comment">// will result in uncompressed audio and will be very large in size</span>
    recording.compression = Ti.Media.AUDIO_FORMAT_ULAW;
    recording.format = Ti.Media.AUDIO_FILEFORMAT_WAVE;

    Ti.Media.addEventListener(<span class="hljs-string">'recordinginput'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        Ti.API.info(<span class="hljs-string">'Input availability changed: '</span>+e.available);
        <span class="hljs-keyword">if</span> (!e.available &amp;&amp; recording.recording) {
            b1.fireEvent(<span class="hljs-string">'click'</span>, {});
        }
    });


    b1.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">if</span> (recording.recording)
        {
            file = recording.stop();
            b1.title = <span class="hljs-string">"Start Recording"</span>;
            b2.show();
            pause.hide();
            clearInterval(timer);
            Ti.Media.stopMicrophoneMonitor();
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-keyword">if</span> (!Ti.Media.canRecord) {
                Ti.UI.createAlertDialog({
                    title:<span class="hljs-string">'Error!'</span>,
                    message:<span class="hljs-string">'No audio recording hardware is currently connected.'</span>
                }).show();
                <span class="hljs-keyword">return</span>;
            }
            b1.title = <span class="hljs-string">"Stop Recording"</span>;
            recording.start();
            b2.hide();
            pause.show();
            Ti.Media.startMicrophoneMonitor();
            duration = <span class="hljs-number">0</span>;
            timer = setInterval(showLevels,<span class="hljs-number">1000</span>);
        }
    });

    <span class="hljs-keyword">var</span> pause = Titanium.UI.createButton({
        title:<span class="hljs-string">'Pause recording'</span>,
        width:<span class="hljs-number">200</span>,
        height:<span class="hljs-number">40</span>,
        top:<span class="hljs-number">80</span>
    });
    win.add(pause);
    pause.hide();


    pause.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (recording.paused) {
            pause.title = <span class="hljs-string">'Pause recording'</span>;
            recording.resume();
            timer = setInterval(showLevels,<span class="hljs-number">1000</span>);
        }
        <span class="hljs-keyword">else</span> {
            pause.title = <span class="hljs-string">'Unpause recording'</span>;
            recording.pause();
            clearInterval(timer);
        }
    });

        <span class="hljs-keyword">var</span> switchLabel = Titanium.UI.createLabel({
        text:<span class="hljs-string">'Hi-fidelity:'</span>,
        width:<span class="hljs-string">'auto'</span>,
        height:<span class="hljs-string">'auto'</span>,
        textAlign:<span class="hljs-string">'center'</span>,
        color:<span class="hljs-string">'#999'</span>,
        bottom:<span class="hljs-number">115</span>
    });
    <span class="hljs-keyword">var</span> switcher = Titanium.UI.createSwitch({
        value:<span class="hljs-literal">false</span>,
        bottom:<span class="hljs-number">80</span>
    });

    switcher.addEventListener(<span class="hljs-string">'change'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
    </span>{
        <span class="hljs-keyword">if</span> (!switcher.value)
        {
            recording.compression = Ti.Media.AUDIO_FORMAT_ULAW;
        }
        <span class="hljs-keyword">else</span>
        {
            recording.compression = Ti.Media.AUDIO_FORMAT_LINEAR_PCM;
        }
    });
    win.add(switchLabel);
    win.add(switcher);
}
<span class="hljs-keyword">else</span> {

    <span class="hljs-comment">// code from http://developer.appcelerator.com/blog/2011/02/launching-activities-and-using-content-uris-in-android.html</span>

    <span class="hljs-comment">// const value grabbed from</span>
    <span class="hljs-comment">// http://developer.android.com/reference/android/provider/MediaStore.Audio.Media.html#RECORD_SOUND_ACTION</span>
    <span class="hljs-keyword">var</span> RECORD_SOUND_ACTION = <span class="hljs-string">"android.provider.MediaStore.RECORD_SOUND"</span>;

    b1.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

        <span class="hljs-keyword">var</span> intent = Titanium.Android.createIntent({ 
              action: RECORD_SOUND_ACTION,
            <span class="hljs-comment">//http://www.google.com/codesearch#l05NtygeacY/trunk/src/com/ringdroid/RingdroidEditActivity.java&amp;q=Media.RECORD_SOUND_ACTION%20package:http://ringdroid\.googlecode\.com&amp;l=241</span>
            <span class="hljs-comment">//hide the dialog box</span>
              was_get_content_intent: <span class="hljs-literal">false</span> 
        });

      <span class="hljs-comment">//audio/3gpp = type??</span>


      Titanium.Android.currentActivity.startActivityForResult(intent, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">if</span> (e.error) {
            Ti.API.info(<span class="hljs-string">'Error: '</span>+e.error);
            Titanium.UI.createAlertDialog({
                title:<span class="hljs-string">'Error!'</span>,
                message:e.error
            }).show();      
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">if</span> (e.resultCode === Titanium.Android.RESULT_OK) {
            file = e.intent.data;
            b2.show();

          } <span class="hljs-keyword">else</span> {
            Ti.API.info(<span class="hljs-string">'Cancel/Error? Result code:'</span>+e.resultCode);
            Titanium.UI.createAlertDialog({
                title:<span class="hljs-string">'Error!'</span>,
                message: <span class="hljs-string">'Canceled/Error? Result code: '</span> + e.resultCode
            }).show();           
            <span class="hljs-keyword">return</span>;
          }
        }
      });    <span class="hljs-comment">//end start intent</span>

    });


<span class="hljs-comment">/*
    var labelResultCaption = Titanium.UI.createLabel({
      top: 60, left: 10, right: 10, height: 35, visible: false, color: 'yellow'
    });
    var labelResult = Titanium.UI.createLabel({
      top: 100, left: 10, right: 10, height: 100, visible: false,
      backgroundColor: 'white', color: 'black',
      verticalAlign: 'top'
    });


    var sendButton = Titanium.UI.createButton({
      top: 200, left: 10, right: 10, height: 35,
      title: "Share Recorded Audio", visible: false
    });
    sendButton.addEventListener('click', function(){
      var intent = Titanium.Android.createIntent({
        action: Titanium.Android.ACTION_SEND,
        type: 'audio/amr'
      });
      intent.putExtraUri(Titanium.Android.EXTRA_STREAM, soundUri);
      Titanium.Android.currentActivity.startActivity(intent);

//        var sound = Titanium.Media.createSound();
//        sound.url=soundUri; // For testing #1913
//        sound.play();

        //may be no way to change sample rate for recording in android...

    });
*/</span>


}

win.add(b1);


<span class="hljs-keyword">var</span> b2 = Titanium.UI.createButton({
    title:<span class="hljs-string">'Playback Recording'</span>,
    width:<span class="hljs-number">200</span>,
    height:<span class="hljs-number">40</span>,
    top:<span class="hljs-number">80</span>
});

win.add(b2);
b2.hide();
b2.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">if</span> (sound &amp;&amp; sound.playing)
    {
        sound.stop();
        sound.release();
        sound = <span class="hljs-literal">null</span>;
        b2.title = <span class="hljs-string">'Playback Recording'</span>;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-keyword">if</span> (!isAndroid) {
            Ti.API.info(<span class="hljs-string">"recording file size: "</span>+file.size);
            sound = Titanium.Media.createSound({sound:file});
        }
        <span class="hljs-keyword">else</span> {
            Ti.API.info(<span class="hljs-string">"recording file: "</span>+file);
            sound = Titanium.Media.createSound({url:file});
        }
        sound.addEventListener(<span class="hljs-string">'complete'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
        </span>{
            b2.title = <span class="hljs-string">'Playback Recording'</span>;
        });
        sound.play();
        b2.title = <span class="hljs-string">'Stop Playback'</span>;
    }
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 28th 2011, 8:47:40 pm">July 28th 2011</span>
								by <span class='authorname'>Eric Z</span><br>
								<a class="icon-bg icon-link" href="question/116291/audio-recording-in-android#answer-214773" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>ye i too when i did last time (six months ago) faced same problem, i don&#39;t know what was the problem either sound was not recorded well or it wasn&#39;t playing with normal speed as Eric z mentioned.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 29th 2011, 2:10:51 am">July 29th 2011</span>
											by <span class='authorname'>Awais Akhtar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Actually, after testing on a device itself, I found the playback speed&#x2F;sample rate to be correct.  So, it may just be a problem on the simulator&#39;s playback.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 29th 2011, 2:14:56 am">July 29th 2011</span>
											by <span class='authorname'>Eric Z</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ye maybe they have fixed it now, but lately i too had the problem when i tested it on device. At that time i was testing it on glaxyS</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 29th 2011, 2:17:13 am">July 29th 2011</span>
											by <span class='authorname'>Awais Akhtar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-214774">
				
						<section>
							<p>Too many lines, you&#39;ll need to copy from the GIT version of sound_record.js to replace my deleted &#39;…&#39; sections.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;

<span class="hljs-keyword">var</span> file;
<span class="hljs-keyword">var</span> timer;
<span class="hljs-keyword">var</span> sound;


<span class="hljs-keyword">var</span> label = Titanium.UI.createLabel({
    text:<span class="hljs-string">''</span>,
    top:<span class="hljs-number">150</span>,
    color:<span class="hljs-string">'#999'</span>,
    textAlign:<span class="hljs-string">'center'</span>,
    width:<span class="hljs-string">'auto'</span>,
    height:<span class="hljs-string">'auto'</span>
});

win.add(label);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lineTypeToStr</span><span class="hljs-params">()</span>
</span>{
...
}

<span class="hljs-keyword">var</span> linetype = Titanium.UI.createLabel({
    text: <span class="hljs-string">"audio line type: "</span>+lineTypeToStr(),
    bottom:<span class="hljs-number">20</span>,
    color:<span class="hljs-string">'#999'</span>,
    textAlign:<span class="hljs-string">'center'</span>,
    width:<span class="hljs-string">'auto'</span>,
    height:<span class="hljs-string">'auto'</span>
});

win.add(linetype);

<span class="hljs-keyword">var</span> volume = Titanium.UI.createLabel({
    text: <span class="hljs-string">"volume: "</span>+Ti.Media.volume,
    bottom:<span class="hljs-number">50</span>,
    color:<span class="hljs-string">'#999'</span>,
    textAlign:<span class="hljs-string">'center'</span>,
    width:<span class="hljs-string">'auto'</span>,
    height:<span class="hljs-string">'auto'</span>
});

win.add(volume);

Ti.Media.addEventListener(<span class="hljs-string">'linechange'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{
    linetype.text = <span class="hljs-string">"audio line type: "</span>+lineTypeToStr();
});

Ti.Media.addEventListener(<span class="hljs-string">'volume'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{
    volume.text = <span class="hljs-string">"volume: "</span>+e.volume;
});

<span class="hljs-keyword">var</span> duration = <span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showLevels</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">var</span> peak = Ti.Media.peakMicrophonePower;
    <span class="hljs-keyword">var</span> avg = Ti.Media.averageMicrophonePower;
    duration++;
    label.text = <span class="hljs-string">'duration: '</span>+duration+<span class="hljs-string">' seconds\npeak power: '</span>+peak+<span class="hljs-string">'\navg power: '</span>+avg;
}

<span class="hljs-keyword">var</span> b1 = Titanium.UI.createButton({
    title:<span class="hljs-string">'Start Recording'</span>,
    width:<span class="hljs-number">200</span>,
    height:<span class="hljs-number">40</span>,
    top:<span class="hljs-number">20</span>
});

<span class="hljs-keyword">var</span> isAndroid = (Titanium.Platform.name != <span class="hljs-string">'iPhone OS'</span>);
<span class="hljs-keyword">if</span> (!isAndroid) {

    Titanium.Media.audioSessionMode = Ti.Media.AUDIO_SESSION_MODE_PLAY_AND_RECORD;
    <span class="hljs-keyword">var</span> recording = Ti.Media.createAudioRecorder();

    <span class="hljs-comment">// default compression is Ti.Media.AUDIO_FORMAT_LINEAR_PCM</span>
    <span class="hljs-comment">// default format is Ti.Media.AUDIO_FILEFORMAT_CAF</span>

    <span class="hljs-comment">// this will give us a wave file with µLaw compression which</span>
    <span class="hljs-comment">// is a generally small size and suitable for telephony recording</span>
    <span class="hljs-comment">// for high end quality, you'll want LINEAR PCM - however, that</span>
    <span class="hljs-comment">// will result in uncompressed audio and will be very large in size</span>
    recording.compression = Ti.Media.AUDIO_FORMAT_ULAW;
    recording.format = Ti.Media.AUDIO_FILEFORMAT_WAVE;

    Ti.Media.addEventListener(<span class="hljs-string">'recordinginput'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        Ti.API.info(<span class="hljs-string">'Input availability changed: '</span>+e.available);
        <span class="hljs-keyword">if</span> (!e.available &amp;&amp; recording.recording) {
            b1.fireEvent(<span class="hljs-string">'click'</span>, {});
        }
    });


    b1.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
    </span>{
        ...
    });

    <span class="hljs-keyword">var</span> pause = Titanium.UI.createButton({
        title:<span class="hljs-string">'Pause recording'</span>,
        width:<span class="hljs-number">200</span>,
        height:<span class="hljs-number">40</span>,
        top:<span class="hljs-number">80</span>
    });
    win.add(pause);
    pause.hide();


    pause.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        ...
    });

    <span class="hljs-keyword">var</span> switchLabel = Titanium.UI.createLabel({
        ...
    });
    <span class="hljs-keyword">var</span> switcher = Titanium.UI.createSwitch({
        value:<span class="hljs-literal">false</span>,
        bottom:<span class="hljs-number">80</span>
    });

    switcher.addEventListener(<span class="hljs-string">'change'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
    </span>{
        <span class="hljs-keyword">if</span> (!switcher.value)
        {
            recording.compression = Ti.Media.AUDIO_FORMAT_ULAW;
        }
        <span class="hljs-keyword">else</span>
        {
            recording.compression = Ti.Media.AUDIO_FORMAT_LINEAR_PCM;
        }
    });
    win.add(switchLabel);
    win.add(switcher);
}
<span class="hljs-keyword">else</span> {

    <span class="hljs-comment">// code from http://developer.appcelerator.com/blog/2011/02/launching-activities-and-using-content-uris-in-android.html</span>

    <span class="hljs-comment">// const value grabbed from</span>
    <span class="hljs-comment">// http://developer.android.com/reference/android/provider/MediaStore.Audio.Media.html#RECORD_SOUND_ACTION</span>
    <span class="hljs-keyword">var</span> RECORD_SOUND_ACTION = <span class="hljs-string">"android.provider.MediaStore.RECORD_SOUND"</span>;

    b1.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

        <span class="hljs-keyword">var</span> intent = Titanium.Android.createIntent({ 
              action: RECORD_SOUND_ACTION
        });

      Titanium.Android.currentActivity.startActivityForResult(intent, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">if</span> (e.error) {
            Ti.API.info(<span class="hljs-string">'Error: '</span>+e.error);
            Titanium.UI.createAlertDialog({
                title:<span class="hljs-string">'Error!'</span>,
                message:e.error
            }).show();      
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">if</span> (e.resultCode === Titanium.Android.RESULT_OK) {
            file = e.intent.data;
            b2.show();

          } <span class="hljs-keyword">else</span> {
            Ti.API.info(<span class="hljs-string">'Cancel/Error? Result code:'</span>+e.resultCode);
            Titanium.UI.createAlertDialog({
                title:<span class="hljs-string">'Error!'</span>,
                message: <span class="hljs-string">'Canceled/Error? Result code: '</span> + e.resultCode
            }).show();           
            <span class="hljs-keyword">return</span>;
          }
        }
      });    <span class="hljs-comment">//end start intent</span>

    });
}

win.add(b1);
<span class="hljs-keyword">var</span> b2 = Titanium.UI.createButton({
    title:<span class="hljs-string">'Playback Recording'</span>,
    width:<span class="hljs-number">200</span>,
    height:<span class="hljs-number">40</span>,
    top:<span class="hljs-number">80</span>
});

win.add(b2);
b2.hide();
b2.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">if</span> (sound &amp;&amp; sound.playing)
    {
        sound.stop();
        sound.release();
        sound = <span class="hljs-literal">null</span>;
        b2.title = <span class="hljs-string">'Playback Recording'</span>;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-keyword">if</span> (!isAndroid) {
            Ti.API.info(<span class="hljs-string">"recording file size: "</span>+file.size);
            sound = Titanium.Media.createSound({sound:file});
        }
        <span class="hljs-keyword">else</span> {
            Ti.API.info(<span class="hljs-string">"recording file: "</span>+file);
            sound = Titanium.Media.createSound({url:file});
        }
        sound.addEventListener(<span class="hljs-string">'complete'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
        </span>{
            b2.title = <span class="hljs-string">'Playback Recording'</span>;
        });
        sound.play();
        b2.title = <span class="hljs-string">'Stop Playback'</span>;
    }
});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 28th 2011, 8:53:08 pm">July 28th 2011</span>
								by <span class='authorname'>Eric Z</span><br>
								<a class="icon-bg icon-link" href="question/116291/audio-recording-in-android#answer-214774" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Eric for this code, it will help others.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 29th 2011, 2:40:22 am">July 29th 2011</span>
											by <span class='authorname'>Awais Akhtar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>find a problem. Record a wav file with Android Phone. But can&#39;t play it on iPhone.(when i use var RECORD_SOUND_ACTION = &quot;android.provider.MediaStore.RECORD_SOUND&quot;;)</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 19th 2012, 11:42:19 pm">March 19th 2012</span>
											by <span class='authorname'>henry liu</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-215072">
				
						<section>
							<p>After work on this a little more, I found it difficult to manipulate files that were captured via the audio recorder, not to mention the fact that they get added into he media player&#39;s library.  Instead, I found these steps necessary to build your own audio capture module in android…</p>
<ol>
<li>Follow <a href="http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Module+Developer+Guide+for+Android">appcelerator&#39;s module guide</a></li>
<li>Copy a <a href="http:&#x2F;&#x2F;www.benmccann.com&#x2F;dev-blog&#x2F;android-audio-recording-tutorial&#x2F;">short example of an audio recorder</a> into your new module.</li>
<li>Copy your module locally and run it on android.</li>
</ol>
<p>Not ideal (because it does involve some grease work in the android API), but it seems to be working after a day of frustration.  Seems odd that this functionality didn&#39;t make it into an earlier cut of the SDK.</p>
<p>Hope this helps for others.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 1st 2011, 11:15:01 am">August 1st 2011</span>
								by <span class='authorname'>Eric Z</span><br>
								<a class="icon-bg icon-link" href="question/116291/audio-recording-in-android#answer-215072" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>hey Eric,</p>
<p>Can you please provide the module what you have created as mentioned above. I am facing the similar problem and tried using the above code but felt a set back as i am unable to access the file name. </p>
<p>I would truly appreciate if you can provide me the necessary details of the module or the code.</p>
<p>Regards,</p>
<p>wahib</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 16th 2011, 4:57:13 pm">August 16th 2011</span>
											by <span class='authorname'>wahib haq</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hey Eric,</p>
<p>Can you please provide the module what you have created as mentioned above. I am facing the similar problem and tried using the above code but felt a set back as i am unable to access the file name. </p>
<p>I would truly appreciate if you can provide me the necessary details of the module or the code.</p>
<p>Regards,</p>
<p>wahib</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 16th 2011, 5:10:38 pm">August 16th 2011</span>
											by <span class='authorname'>wahib haq</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-215193">
				
						<section>
							<p>Codeboxed will release a module tomorrow that will handle audio recording on Android. No more Android VU meters and platform specific components. Follow us on twitter: <a href="http:&#x2F;&#x2F;twitter.com&#x2F;codeboxed">@codeboxed</a> or here <a href="http:&#x2F;&#x2F;www.codeboxed.com">www.codeboxed.com</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 2nd 2011, 12:40:55 pm">August 2nd 2011</span>
								by <span class='authorname'>Alexandru Budin</span><br>
								<a class="icon-bg icon-link" href="question/116291/audio-recording-in-android#answer-215193" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi  Alexandru Budin,</p>
<p>I am using Android 2.2.I added the module run the project and having this error in console </p>
<p>The &#39;apiversion&#39; for &#39;com.codeboxed.audiorecorder&#39; in the module manifest is not a valid value. Please use a version of the module that has an &#39;apiversion&#39; value of 2 or greater set in it&#39;s manifest file</p>
<p>What could be the issue ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 20th 2013, 4:58:57 am">March 20th 2013</span>
											by <span class='authorname'>Ali Akram</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i just has the same problem.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 27th 2013, 2:05:57 am">September 27th 2013</span>
											by <span class='authorname'>freemem xiao</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
