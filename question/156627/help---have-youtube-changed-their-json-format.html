<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Help - have YouTube changed their JSON format? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Help - have YouTube changed their JSON format?</h1>
		</header>
		<section>
			<p>Part of my app&#39;s function is to play YouTube videos uploaded by a news organisation. I based my code on some suggestions  <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;70481&#x2F;playing-youtube-using-titaniummediavideoplayer">here</a> which were very helpful and worked (the Justin Toth code near the bottom). </p>
<p>Having completed my app, got it passed by Apple and ready for release - I now find it won&#39;t play videos any more as the JSON response is throwing a parse error on any video id I send to it. Yet all through the testing stages for the past few weeks it&#39;s been perfect.</p>
<p>Has anything changed at YouTube does anybody know? &#39;Security&#39; measured etc perhaps?</p>
<p>Essentially we are using this url http:&#x2F;&#x2F;m.youtube.com&#x2F;watch?ajax=1&amp;feature=related&amp;layout=mobile&amp;tsp=1&amp;&amp;v=[video id here]</p>
<p>and paring down the responseText with this code <code>var json = decodeURIComponent(decodeURIComponent(decodeURIComponent(decodeURIComponent(this.responseText.substring(4, this.responseText.length)))));</code></p>
<p>before sending it through <code>var response = JSON.parse(json);</code> which is were the error occurs.</p>
<p>Any clues would be great fully received as I am dead in the water right now.</p>
<p>Mobile &#x2F;Titanium SDK version 3.1.2.GA&#x2F; iOS&#x2F; Simulator &amp; device&#x2F; Mac OSX</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 30th 2013, 6:52:30 pm">August 30th 2013</span>
				by <span class='authorname'>Patrick Mounteney</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>video</span></li>
					
						<li><span class='tagname'>youtube</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Oh well, it looks like answer is &#39;Yes they have&#39; (see comments to accepted answer) as after using Dan&#39;s code, which did work - it suddenly didn&#39;t again as YouTube appear to have locked out those not using their official (Google) API&#39;s. Can somebody confirm this?</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 9th 2013, 8:52:27 am">September 9th 2013</span>
								by <span class='authorname'>Patrick Mounteney</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>@Patrick see my last answer on the accepted answer, I updated the module this morning :) Would be great if you test it and say if it works for you.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 9th 2013, 1:12:39 pm">September 9th 2013</span>
								by <span class='authorname'>Dan Tamas</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;ll give a go Dan thanks. But too late for the app which was passed (for the 2nd time) at Apple last night and doesn&#39;t play YouTube videos. Oops………… as Charles Dickens said &#39;What larks&#39;… ;)</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 9th 2013, 1:22:11 pm">September 9th 2013</span>
								by <span class='authorname'>Patrick Mounteney</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>It&#39;s never too late, change it and submit another binary ;)</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 9th 2013, 3:50:42 pm">September 9th 2013</span>
								by <span class='authorname'>Dan Tamas</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-267890">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Have a look <a href="https:&#x2F;&#x2F;github.com&#x2F;rborn&#x2F;TitaniumYoutubePlayer">at my module</a> and let me know if it works. If not I&#39;ll try to find a fix asap ;)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 30th 2013, 7:35:53 pm">August 30th 2013</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="../../question/156627/help---have-youtube-changed-their-json-format.html#answer-267890" rel="permalink">permalink</a>
							</div>

							<h5>14 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hey Dan - I think you may have saved my neck here! Your code works, whereas the very similar code I based mine on stopped working very recently. I haven&#39;t had time to track down what is broken on the &#39;old&#39; code as I now have to get this into my app and get it off to Apple again as my client is expecting it to be released next weekend!!</p>
<p>However both substring the returned string from YouTube and remove &#39;)]}&#39;&#39; from the front, which seems very odd as any changes here will cause it to break again. As you obviously know more about the YouTube API (I have some experience of that of LiveStream.com, but not YouTube) - why is YouTube&#39;s so tricky?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 30th 2013, 8:19:38 pm">August 30th 2013</span>
											by <span class='authorname'>Patrick Mounteney</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Patrick, Thank you for asking this question. I was having this problem. My app got reviewed and listed. Now I see videos from YouTube not playing. Just now tested with Dan&#39;s code and it&#39;s working again. Many thanks, Dan.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 31st 2013, 6:13:31 pm">August 31st 2013</span>
											by <span class='authorname'>Suhreed Sarkar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes, that was a close run thing Suhreed - I had to pull my app and re-submit. I just hope the code holds this time!</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 31st 2013, 6:17:59 pm">August 31st 2013</span>
											by <span class='authorname'>Patrick Mounteney</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Dan Tamas, I did a test today and It&#39;s not working, clip_url is always undefined</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 6th 2013, 5:00:49 pm">September 6th 2013</span>
											by <span class='authorname'>Cleison Pereira</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@ezoom -  it seems they changed it again :( I&#39;ll have a look</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 6th 2013, 5:18:45 pm">September 6th 2013</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ok guys, I updated the module <a href="https:&#x2F;&#x2F;github.com&#x2F;rborn&#x2F;TitaniumYoutubePlayer">please have a look</a> and let me know. I tested it on ios and android but u never know :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 9th 2013, 7:50:21 am">September 9th 2013</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Another update, sorry for this, Patrick found a mistake but should be fixed now :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 10th 2013, 7:58:45 am">September 10th 2013</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hi, thanks for the new update, i tasted it on ios, and works, but on android the var &quot;streamUrl&quot; only give me the normal url (http:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=8CX82uT7A9Y), any idea?<br>-sorry my bad english!</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 10th 2013, 5:18:02 pm">September 10th 2013</span>
											by <span class='authorname'>alexym gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@alexym can u make me me a <a href="http:&#x2F;&#x2F;pastie.org&#x2F;">pastie</a> with the <code>console.log(json);</code>put after the </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> json = <span class="hljs-keyword">this</span>.responseText.substring(<span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.responseText.length);
</code></pre><p>line?</p>
<p>Thank you</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 10th 2013, 6:09:20 pm">September 10th 2013</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>sure! <a href="http:&#x2F;&#x2F;pastie.org&#x2F;8315158.js">console.log</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="September 10th 2013, 8:06:14 pm">September 10th 2013</span>
											by <span class='authorname'>alexym gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@alexym -  there is a pull request that fixes the issue (did not test it though, but makes sense, I made a mistake :) ) - please have a look and let me know. Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 16th 2013, 7:14:26 am">September 16th 2013</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey Dan, congratulations on module, but it is not working for me, I received the message &quot;cannot retrieve video&quot;. I noticed that the JSON is ok but the object content = {} is empty =&#x2F;<br>This still working for you guys?<br>Thank you so much!<br>iOS - 3.1.3.GA</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 6th 2013, 10:06:38 am">November 6th 2013</span>
											by <span class='authorname'>Carlos Henrique Lustosa Zinato</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Carlos did u try with the latest version on github?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2013, 7:31:44 am">November 8th 2013</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Dan! With the last version of your github the JSON still not working. On your code I found that you use the Bob-Sims ytPlayer and he updated his code 7 days ago with the new JSON reader. His code works GREAT! This is the URL:<br>https:&#x2F;&#x2F;github.com&#x2F;bob-sims&#x2F;ytPlayer&#x2F;blob&#x2F;master&#x2F;app&#x2F;widgets&#x2F;ytPlayer&#x2F;controllers&#x2F;widget.js</p>
<p>You should upgrade yours!<br>Have a nice week!</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 18th 2013, 2:46:15 am">November 18th 2013</span>
											by <span class='authorname'>Carlos Henrique Lustosa Zinato</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>4</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
