<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>My Titanium Post Works, how do I display in Java Servlet » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>My Titanium Post Works, how do I display in Java Servlet</h1>
		</header>
		<section>
			<p>Hi im trying to send data from my titanium app to my Apache Web Service. The snippet of titanium code works as the output to the console is success. Now what im trying to do is when the post is sent, display the contents of the post on the web service page. Is my doPost correct?</p>
<p><strong>Titanium Snippet</strong></p>
<pre><code class="hljs">button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{

<span class="hljs-keyword">var</span> params = {
    <span class="hljs-string">"places"</span> : {
        Country : textCountry.getValue(),
        Capital : textCapital.getValue()
    }
};

<span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient({});

<span class="hljs-comment">// function to deal with errors</span>
xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    Ti.API.info(<span class="hljs-string">'error, HTTP status = '</span> + <span class="hljs-keyword">this</span>.status);
    alert(<span class="hljs-string">'Error Sending Data'</span>);
};

<span class="hljs-comment">// function to deal with response</span>
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'success, HTTP status = '</span> + <span class="hljs-keyword">this</span>.status);
};

xhr.open(<span class="hljs-string">"POST"</span>, <span class="hljs-string">'http://130.206.127.43:8080/Test'</span>);

<span class="hljs-comment">//set enconding</span>
xhr.setRequestHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json; charset=utf-8"</span>);

xhr.send(<span class="hljs-built_in">JSON</span>.stringify(params));

});
</code></pre><p><strong>Java Servlet&#x2F;Apache Tomcat Snippet</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">public</span> void doPost(HttpServletRequest <span class="hljs-built_in">request</span>,
                HttpServletResponse <span class="hljs-built_in">response</span>)
       throws ServletException, IOException
{

    <span class="hljs-built_in">String</span> jsonData = <span class="hljs-built_in">request</span>.getParameter(<span class="hljs-string">"json"</span>);
    <span class="hljs-built_in">response</span>.setContentType(<span class="hljs-string">"application/json"</span>);
    PrintWriter out= <span class="hljs-built_in">response</span>.getWriter();
    out.println(jsonData);
    out.close();
}
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 15th 2015, 9:36:43 am">February 15th 2015</span>
				by <span class='authorname'>Joshua Oneill</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>apache tomcat</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
						<li><span class='tagname'>java servlet</span></li>
					
						<li><span class='tagname'>post</span></li>
					
						<li><span class='tagname'>xhr</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-285868">
				
						<section>
							<p>It looks correct, Do you get a 200 code as well in the console?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 16th 2015, 4:35:09 am">February 16th 2015</span>
								by <span class='authorname'>Lloyd Dsouza</span><br>
								<a class="icon-bg icon-link" href="question/180861/my-titanium-post-works-how-do-i-display-in-java-servlet#answer-285868" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>yes Llyod i get 200 in the console? :-&#x2F; </p>
<pre><code class="hljs"><span class="hljs-string">[INFO]</span> :   success, HTTP status = <span class="hljs-number">200</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 16th 2015, 7:13:41 am">February 16th 2015</span>
											by <span class='authorname'>Joshua Oneill</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Great, So now you need to see if the response is hitting your server side code. Try putting some logging statements in your receiving function to see if its reaching there.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2015, 7:31:02 am">February 16th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>im not using an IDE im using vim editor on CentOS 6.3, i checked the CATALINA_HOME&#x2F;lib directory and cant seem to find anything, how do i do this thanks in advance</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2015, 12:27:50 pm">February 16th 2015</span>
											by <span class='authorname'>Joshua Oneill</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Joshua, You are doing everything right in Appc now you need to figure out the JAVA stuff on maybe a JAVA forum.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 17th 2015, 7:45:05 am">February 17th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Llyod, i put in </p>
<pre><code class="hljs"> <span class="hljs-tag">Ti</span><span class="hljs-class">.API</span><span class="hljs-class">.info</span>("<span class="hljs-tag">json</span>"  + <span class="hljs-tag">this</span><span class="hljs-class">.responseText</span>);
 <span class="hljs-tag">Ti</span><span class="hljs-class">.API</span><span class="hljs-class">.info</span>("<span class="hljs-tag">json</span>"  + <span class="hljs-tag">xhr</span><span class="hljs-class">.responseText</span>);
</code></pre><p>both returned null in console, don&#39;t think the appc is sending text fields in </p>
<pre><code class="hljs">xhr.<span class="hljs-built_in">send</span>(...
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 18th 2015, 8:02:05 am">February 18th 2015</span>
											by <span class='authorname'>Joshua Oneill</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Okay, I would like to see the entire function if possible. But you will get your response within the &quot;onload&quot; block of code.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2015, 8:10:05 am">February 18th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>xhr.onload = function() {<br>    console.log(&#39;success, HTTP status = &#39; + this.status);<br>    Ti.API.info(&quot;json&quot;  + this.responseText);<br>};</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2015, 8:10:25 am">February 18th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs"><span class="hljs-comment">// function to deal with response</span>
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'success, HTTP status = '</span> + <span class="hljs-keyword">this</span>.status);
        Ti.API.info(<span class="hljs-string">'json'</span> + <span class="hljs-keyword">this</span>.responseText);
    };
</code></pre><pre><code class="hljs"><span class="hljs-string">[INFO]</span> :   success, HTTP status = <span class="hljs-number">200</span>
<span class="hljs-string">[INFO]</span> :   json = null
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 18th 2015, 10:51:58 am">February 18th 2015</span>
											by <span class='authorname'>Joshua Oneill</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Okay Joshua. Lets take this step by step. You are first sending a network call from Titanium which is successful. The next step is to check on your server and see if its hitting the function on the server. Once you&#39;ve confirmed that, we can check if the data is being pushed back to Titanium.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 19th 2015, 2:32:22 am">February 19th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>For example, I would do something like this in PHP. You need to find a JAVA equivalent.</p>
<pre><code class="hljs">&lt;?php
    <span class="hljs-variable">$firstname</span> = $_POST[<span class="hljs-string">"firstname"</span>];
    <span class="hljs-variable">$lastname</span> = $_POST[<span class="hljs-string">"lastname"</span>];
    echo <span class="hljs-string">"Firstname=$firstname and Lastname=$lastname"</span>;
?&gt;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 19th 2015, 2:36:29 am">February 19th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
