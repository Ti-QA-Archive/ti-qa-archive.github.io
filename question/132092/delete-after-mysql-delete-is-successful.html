<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Delete AFTER mysql delete is successful » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Delete AFTER mysql delete is successful</h1>
		</header>
		<section>
			<p>I have a tableview with editable:true, so when the user swipes to the right, a red delete button shows up. Using that delete button, I create an event listener to delete data from a mysql db.</p>
<p>Typically, I am able to control what happens after an insert&#x2F;delete&#x2F;read etc, but in this case, the tableview row deletes from the screen, regardless of whether my db connection was successful. </p>
<p>So, if I return &quot;sorry, an active internet connection is required for this&quot;, the row deletes anyway! How would I stop it from deleting from the screen before successfully deleting from my db?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 13th 2012, 9:38:09 pm">February 13th 2012</span>
				by <span class='authorname'>Andrew Woods</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>delete</span></li>
					
						<li><span class='tagname'>editable</span></li>
					
						<li><span class='tagname'>mysql</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-230327">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hello,</p>
<p>Create a local DB, with the info you need (id of the row, modifications, or operations) and commit those changes when the user has connectivity.</p>
<p>Best,</p>
<p>Mauro</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 14th 2012, 8:58:23 pm">February 14th 2012</span>
								by <span class='authorname'>Mauro Parra</span><br>
								<a class="icon-bg icon-link" href="question/132092/delete-after-mysql-delete-is-successful.html#answer-230327" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I like where this is going, if you could help me with this I would appreciate it. So your suggestion would be to…<br>1)User hits delete button and the row gets deleted<br>2)At the same time, pertinent information is stored to a local db<br>3)When that is finished, check if there is an active internet connection<br>4)If there is, submit the information<br>5)If there isn&#39;t….</p>
<p>Step 5 is where I get caught up. When would I check next for internet connection?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 15th 2012, 12:44:45 pm">February 15th 2012</span>
											by <span class='authorname'>Andrew Woods</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hello,</p>
<p>It depends on you. You can set a timer to check if this db sync is done, with the settimeout function. You can find an example <a href="http:&#x2F;&#x2F;www.pageresource.com&#x2F;jscript&#x2F;jtimeout.htm">here</a>. Just create a function that checks if you already sync, if not, try to sync. IF fails, alert the user that there are some pending operations and that you need the user to connect to the internet. </p>
<p>Best,</p>
<p>Mauro</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 15th 2012, 3:16:53 pm">February 15th 2012</span>
											by <span class='authorname'>Mauro Parra</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The Ti.Network object has both a change event as well as a status property that identifies the networks status … check out <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.Network-module">http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;apidoc&#x2F;mobile&#x2F;latest&#x2F;Titanium.Network-module</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="February 15th 2012, 9:33:30 pm">February 15th 2012</span>
											by <span class='authorname'>Tim Alosi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Wow! Much appreciated, that will be a very useful tool.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 16th 2012, 12:50:16 pm">February 16th 2012</span>
											by <span class='authorname'>Andrew Woods</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-230223">
				
						<section>
							<p>In the &#39;delete&#39; eventListener, the tableview passes the row that was deleted as the e.row or e.rowData properties.  If your database delete is not successful, you can simply append the row back to the table … or if you want to put the row back where it was, you can use the insertRowBefore &#x2F; AFter method, but you will need to keep track of where the row was.  Example below</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> tableviewOnDelete = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span></span>{
<span class="hljs-comment">// save row that was deleted</span>
<span class="hljs-keyword">var</span> row = e.row; 

<span class="hljs-comment">// ...</span>
<span class="hljs-comment">// Execute SQL or database query and return results</span>
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">if</span> (!successful){
e.source.appendRow(row);

}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 13th 2012, 10:47:14 pm">February 13th 2012</span>
								by <span class='authorname'>Tim Alosi</span><br>
								<a class="icon-bg icon-link" href="question/132092/delete-after-mysql-delete-is-successful.html#answer-230223" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hmm seems like it would work, but seems a bit awkward. It would disappear then reappear if unsuccessful instead of just alerting &quot;unsuccessful&quot;.</p>
<p>Is there any form of default prevention like jquery&#39;s e.preventDefault(); ?</p>
<p>If not, I suppose I could make a custom button and custom animation with swipe and click events but that seems cumbersome compared to using the native UI.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 13th 2012, 11:50:40 pm">February 13th 2012</span>
											by <span class='authorname'>Andrew Woods</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
