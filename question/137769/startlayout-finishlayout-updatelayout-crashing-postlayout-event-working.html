<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>startLayout, finishLayout, updateLayout crashing? postlayout event working? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>startLayout, finishLayout, updateLayout crashing? postlayout event working?</h1>
		</header>
		<section>
			<p>This is another one of those &quot;Is it just me?&quot; kind of questions.  </p>
<p>I very innocently tried to use all of the above in the simple two-tab test program and have not gotten any to work on Android or iOS with the latest SDK 2.02GA.  Nothing in JIRA about it and nothing on the Q&amp;A except someone posting that it is always crashing on Android.</p>
<p>On Android I&#39;m getting null pointer exceptions on either finishLayout or updateLayout and on iPhone it just isn&#39;t throwing the postlayout event when I change the layout of the view inside the start&#x2F;endLayout pair.</p>
<p>So if someone has gotten this to work, I&#39;ll stand corrected - otherwise its on to JIRA to post another bug.</p>
<p>The one &quot;twist&quot; is that I&#39;m doing this with a Label - but these are defined operations with a Label in the docs.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 2nd 2012, 8:45:25 am">June 2nd 2012</span>
				by <span class='authorname'>Joe Falcone</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>layout</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Sorry - clicked the wrong box- answer should be comment…</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 2nd 2012, 8:50:35 am">June 2nd 2012</span>
								by <span class='authorname'>Joe Falcone</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;m having the same problem on android when i try to updateLayout on a View… Did you found any workaround to this?</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 9th 2012, 1:44:12 pm">June 9th 2012</span>
								by <span class='authorname'>Ricardo Canastro</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I also get a crash when calling updateLayout() on an ImageView.  Using Ti 2.1.3GA SDK and Android 4.1</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 2nd 2012, 2:30:45 pm">November 2nd 2012</span>
								by <span class='authorname'>Lachlan Ross</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>6</span> Votes</div>
			<div class="answers"><span>7</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>7 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-239967">
				
						<section>
							<p>Also doesn&#39;t work with 2.0.1.GA2.  Same results.</p>
<p>Just to clarify what I&#39;m seeing - on iPhone it is never calling the handler for the postlayout event.<br>On Android it is crashing in the process of trying to call the handler (from what I can see).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 2nd 2012, 8:48:24 am">June 2nd 2012</span>
								by <span class='authorname'>Joe Falcone</span><br>
								<a class="icon-bg icon-link" href="question/137769/startlayout-finishlayout-updatelayout-crashing-postlayout-event-working.html#answer-239967" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-241076">
				
						<section>
							<p>I also have an issue with postLayout on a label. I found that if I add any eventListener to the <em>containing</em> view then the label will fire its postLayout. Very strange but it works.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 18th 2012, 10:36:00 am">June 18th 2012</span>
								by <span class='authorname'>Joshua Kopel</span><br>
								<a class="icon-bg icon-link" href="question/137769/startlayout-finishlayout-updatelayout-crashing-postlayout-event-working.html#answer-241076" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242410">
				
						<section>
							<p>Same problem here for Android the postLayout event is only working on the views, no imageView, Label, Button…., only Views. On top of this if you set the event on the view it is constantly getting fire, so cant really use it since it will reduce performance. On the other hand I got it to work fine for iOS. </p>
<p>Please increase question votes if you are having the same error.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 3rd 2012, 12:31:56 pm">July 3rd 2012</span>
								by <span class='authorname'>Arian Caraballo</span><br>
								<a class="icon-bg icon-link" href="question/137769/startlayout-finishlayout-updatelayout-crashing-postlayout-event-working.html#answer-242410" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i tried postLayout event to get height of a view which contain a label but it returns 0. Testing on  iOS  , sdk 2.1.0GA.  Can you please post some code how you get it to work? Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 5th 2012, 5:08:17 am">July 5th 2012</span>
											by <span class='authorname'>Ibtihaaj Ghoorun</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Make sure you are using postlayout not postLayout. It is all lower case and is case sensitive!</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 5th 2012, 10:24:20 pm">July 5th 2012</span>
											by <span class='authorname'>Joshua Kopel</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242552">
				
						<section>
							<p>Here is JIRA ticket: <a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC-1037">https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC-1037</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 5th 2012, 10:23:26 am">July 5th 2012</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="question/137769/startlayout-finishlayout-updatelayout-crashing-postlayout-event-working.html#answer-242552" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Looks like nobody is working on it :(<br>The current implementation of the postlayout make it impossible for me to build a clean dynamic layout for my app. I need a postlayout event when the layout is really finished so i can get the &quot;real&quot; size of my components. At the moment, sometimes i get the correct values after the first postlayout but sometimes not until the second or third. Thats annoying and unpredictable.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 9th 2012, 5:24:57 am">July 9th 2012</span>
											by <span class='authorname'>Fabian Sei</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-239968">
				
						<section>
							<p>Answer is that it doesn&#39;t work with Label.  Tested with View and Button - both work.<br>Something about Label doesn&#39;t agree with batch layout and the postlayout event.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 2nd 2012, 9:16:49 am">June 2nd 2012</span>
								by <span class='authorname'>Joe Falcone</span><br>
								<a class="icon-bg icon-link" href="question/137769/startlayout-finishlayout-updatelayout-crashing-postlayout-event-working.html#answer-239968" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-239971">
				
						<section>
							<p>Have you tried using one of the recent continuous builds with the SDK from here? :<br>http:&#x2F;&#x2F;builds.appcelerator.com.s3.amazonaws.com&#x2F;index.html</p>
<p>(select &#39;master&#39; from the drop down) </p>
<p>I had some issues and bugs (confirmed) with events (specifically in Android) which do not work in the GA SDK, but worked in the CI build. </p>
<p>Could be related. Worth a try. I wasted hours trying to hunt down the bug in the GA and finally found the CI build had fixed it.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 2nd 2012, 1:46:52 pm">June 2nd 2012</span>
								by <span class='authorname'>Kosso</span><br>
								<a class="icon-bg icon-link" href="question/137769/startlayout-finishlayout-updatelayout-crashing-postlayout-event-working.html#answer-239971" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242540">
				
						<section>
							<p>I did also have a problem with postlayout events.<br>Below is my test code.<br>The postlayout event of the label is only fire once after adding it to the window.<br>When the button is clicked, some label properties are changed but no event is fired.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Ti.UI.createWindow({
    backgroundColor : '#FFF',
    layout : 'vertical'
});

<span class="hljs-keyword">var</span> <span class="hljs-keyword">label</span> = Ti.UI.createLabel({
    text : <span class="hljs-string">"hello"</span>,
    left : 0,
    width : Ti.UI.SIZE,
    height : Ti.UI.SIZE
});

<span class="hljs-keyword">label</span>.addEventListener(<span class="hljs-string">"postlayout"</span>, function(<span class="hljs-keyword">e</span>) {
    Ti.API.info(<span class="hljs-string">"label postlayout"</span>);
    alert(<span class="hljs-string">"label post layout"</span>);
});

<span class="hljs-keyword">var</span> doBtn = Ti.UI.createButton({
    title : <span class="hljs-string">"do"</span>,
    width : Ti.UI.SIZE,
    height : Ti.UI.SIZE
});

<span class="hljs-keyword">var</span> <span class="hljs-keyword">view</span> = Ti.UI.createView({
    backgroundColor : '#0F0',
    width : 100,
    height : 100
});
<span class="hljs-keyword">view</span>.addEventListener(<span class="hljs-string">"postlayout"</span>, function(<span class="hljs-keyword">e</span>) {
    Ti.API.info(<span class="hljs-string">"view postlayout"</span>);
    <span class="hljs-comment">//alert("label post layout");</span>
});

doBtn.addEventListener(<span class="hljs-string">"click"</span>, function() {
    <span class="hljs-keyword">label</span>.text = <span class="hljs-string">"new text"</span>;
    <span class="hljs-keyword">label</span>.backgroundColor = '#F00';
    <span class="hljs-keyword">label</span>.left += 20;
    <span class="hljs-keyword">label</span>.width = 300;
    <span class="hljs-keyword">view</span>.width += 5;
    <span class="hljs-keyword">view</span>.height += 5;

});
<span class="hljs-keyword">win</span>.add(doBtn);
<span class="hljs-keyword">win</span>.add(<span class="hljs-keyword">label</span>);
<span class="hljs-keyword">win</span>.add(<span class="hljs-keyword">view</span>);
<span class="hljs-keyword">win</span>.<span class="hljs-keyword">open</span>();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 5th 2012, 8:34:08 am">July 5th 2012</span>
								by <span class='authorname'>Fabian Sei</span><br>
								<a class="icon-bg icon-link" href="question/137769/startlayout-finishlayout-updatelayout-crashing-postlayout-event-working.html#answer-242540" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
