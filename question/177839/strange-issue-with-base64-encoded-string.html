<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Strange issue with Base64 encoded string Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Strange issue with Base64 encoded string</h1>
		</header>
		<section>
			<p>I am trying to do a receipt verification for iOS. So I receive the purchase receipt no problem. I have to Base64 encode it and create an Object to send to my server with the base64encoded receipt as the &quot;receipt-data&quot;.</p>
<p>No problem encoding the receipt, or creating the object, but when I do and try to stringify it, I get no value in the key value pair? </p>
<p>Here is the code</p>
<pre><code class="hljs">var encodedReceipt = Ti.Utils.base64encode(e.purchase.receipt).toString()<span class="hljs-comment">;</span>
Ti.API.info(encodedReceipt)<span class="hljs-comment">;</span>
var receiptObject = {}<span class="hljs-comment">;</span>
receiptObject["receipt-data"] = encodedReceipt<span class="hljs-comment">;</span>
Ti.API.info(JSON.stringify(receiptObject))<span class="hljs-comment">;</span>
</code></pre><p>Here is the console from the device in Xcode</p>
<pre><code class="hljs">Sep <span class="hljs-number">20</span> <span class="hljs-number">20</span>:<span class="hljs-number">30</span>:<span class="hljs-number">32</span> <span class="hljs-number">4</span>S-Iphone-Leo GoPhrazy[<span class="hljs-number">1377</span>] &lt;Warning&gt;: [INFO] ewoJInNpZ25hdHVyZSIgPSAiQXFKbk5VeEROQXBlTlJaYXNrcWg0SlRKVWJXTnVBOWlPbi8v

    ck9kMHAwQUNrdXkyWGpnVVNDdGh5bGcwK0xRNHdIbzNLNFJqeEhTbjR2NzNHUjM0QS9UamFN

    TkM1S3VXNTMrbXVsVTRJeVZRRjByZ3lFcHRiSTZvVHBxa05hZHlJNWFTS3BTT0JpYVR0WU1k

    aUJlV3kvc2Q0K0plZHBQM3NRclpxcDcydXluU0FBQURWekNDQTFNd2dnSTdvQU1DQVFJQ0NC

    dXA0K1BBaG0vTE1BMEdDU3FHU0liM0RRRUJCUVVBTUg4eEN6QUpCZ05WQkFZVEFsVlRNUk13

    RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFX

    WnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURXpNREVHQTFVRUF3d3FRWEJ3YkdVZ2FWUjFibVZ6

    SUZOMGIzSmxJRU5sY25ScFptbGpZWFJwYjI0Z1FYVjBhRzl5YVhSNU1CNFhEVEUwTURZd056

    QXdNREl5TVZvWERURTJNRFV4T0RFNE16RXpNRm93WkRFak1DRUdBMVVFQXd3YVVIVnlZMmho

    YzJWU1pXTmxhWEIwUTJWeWRHbG1hV05oZEdVeEd6QVpCZ05WQkFzTUVrRndjR3hsSUdsVWRX

    NWxjeUJUZEc5eVpURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NXNWpMakVMTUFrR0ExVUVCaE1D

    VlZNd2daOHdEUVlKS29aSWh2Y05BUUVCQlFBRGdZMEFNSUdKQW9HQkFNbVRFdUxnamltTHdS

    Snh5MW9FZjBlc1VORFZFSWU2d0Rzbm5hbDE0aE5CdDF2MTk1WDZuOTNZTzdnaTNvclBTdXg5

    RDU1NFNrTXArU2F5Zzg0bFRjMzYyVXRtWUxwV25iMzRucXlHeDlLQlZUeTVPR1Y0bGpFMU93

    QytvVG5STStRTFJDbWVOeE1iUFpoUzQ3VCtlWnRERWhWQjl1c2szK0pNMkNvZ2Z3bzdBZ01C

    QUFHamNqQndNQjBHQTFVZERnUVdCQlNKYUVlTnVxOURmNlpmTjY4RmUrSTJ1MjJzc0RBTUJn

    TlZIUk1CQWY4RUFqQUFNQjhHQTFVZEl3UVlNQmFBRkRZZDZPS2RndElCR0xVeWF3N1hRd3VS

    V0VNNk1BNEdBMVVkRHdFQi93UUVBd0lIZ0RBUUJnb3Foa2lHOTJOa0JnVUJCQUlGQURBTkJn

    a3Foa2lHOXcwQkFRVUZBQU9DQVFFQWVhSlYyVTUxcnhmY3FBQWU1QzIvZkVXOEtVbDRpTzRs

    TXV0YTdONlh6UDFwWkl6MU5ra0N0SUl3ZXlOajVVUllISytIalJLU1U5UkxndU5sMG5rZnhx

    T2JpTWNrd1J1ZEtTcTY5Tkluclp5Q0Q2NlI0Szc3bmI5bE1UQUJTU1lsc0t0OG9OdGxoZ1Iv

    MWtqU1NSUWNIa3RzRGNTaVFHS01ka1NscDRBeVhmN3ZuSFBCZTR5Q3dZVjJQcFNOMDRrYm9p

    SjNwQmx4c0d3Vi9abEwyNk0ydWVZSEtZQ3VYaGRxRnd4VmdtNTJoM29lSk9PdC92WTRFY1Fx

    N2VxSG02bTAzWjliN1BSellNMktHWEhEbU9Nazd2RHBlTVZsTERQU0dZejErVTNzRHhKemVi

    U3BiYUptVDdpbXpVS2ZnZ0VZN3h4ZjRjemZIMHlqNXdOelNHVE92UT09IjsKCSJwdXJjaGFz

    ZS1pbmZvIiA9ICJld29KSW05eWFXZHBibUZzTFhCMWNtTm9ZWE5sTFdSaGRHVXRjSE4wSWlB

    OUlDSXlNREUwTFRBNUxUSXdJREV4T2pNd09qTXhJRUZ0WlhKcFkyRXZURzl6WDBGdVoyVnNa

    WE1pT3dvSkluVnVhWEYxWlMxcFpHVnVkR2xtYVdWeUlpQTlJQ0l6WkRrMU1qTTFORFZrWVdW

    aE1HUmtOelppTVRaaFpEazVaVGhrTlRZeVlUazBNek13Tldaa0lqc0tDU0p2Y21sbmFXNWhi

    QzEwY21GdWMyRmpkR2x2YmkxcFpDSWdQU0FpTVRBd01EQXdNREV5TkRVNE1UZ3hNQ0k3Q2dr

    aVluWnljeUlnUFNBaU1TNHhMakl1TVRReE1USXpOelk0TVRRM05TSTdDZ2tpZEhKaGJuTmhZ

    M1JwYjI0dGFXUWlJRDBnSWpFd01EQXdNREF4TWpRMU9ERTRNVEFpT3dvSkluRjFZVzUwYVhS

    NUlpQTlJQ0l4SWpzS0NTSnZjbWxuYVc1aGJDMXdkWEpqYUdGelpTMWtZWFJsTFcxeklpQTlJ

    Q0l4TkRFeE1qTTNPRE14TXpNeklqc0tDU0oxYm1seGRXVXRkbVZ1Wkc5eUxXbGtaVzUwYVda

    cFpYSWlJRDBnSWtFeE5UZEdRelF3TFVJMlJVVXROREkyUWkxQk1qUXpMVFl4TjBaR1FUWkNS

    RU5CTWlJN0Nna2ljSEp2WkhWamRDMXBaQ0lnUFNBaWMydHBjRjh4SWpzS0NTSnBkR1Z0TFds

    a0lpQTlJQ0k1TURNMk9USTROVEFpT3dvSkltSnBaQ0lnUFNBaVkyOXRMbTF2ZW5waGNtVnNi

    Rzh1WjI5d2FISmhlbmtpT3dvSkluQjFjbU5vWVhObExXUmhkR1V0YlhNaUlEMGdJakUwTVRF

    eU16YzRNekV6TXpNaU93b0pJbkIxY21Ob1lYTmxMV1JoZEdVaUlEMGdJakl3TVRRdE1Ea3RN

    akFnTVRnNk16QTZNekVnUlhSakwwZE5WQ0k3Q2draWNIVnlZMmhoYzJVdFpHRjBaUzF3YzNR

    aUlEMGdJakl3TVRRdE1Ea3RNakFnTVRFNk16QTZNekVnUVcxbGNtbGpZUzlNYjNOZlFXNW5a

    V3hsY3lJN0Nna2liM0pwWjJsdVlXd3RjSFZ5WTJoaGMyVXRaR0YwWlNJZ1BTQWlNakF4TkMw

    d09TMHlNQ0F4T0Rvek1Eb3pNU0JGZEdNdlIwMVVJanNLZlE9PSI7CgkiZW52aXJvbm1lbnQi

    ID0gIlNhbmRib3giOwoJInBvZCIgPSAiMTAwIjsKCSJzaWduaW5nLXN0YXR1cyIgPSAiMCI7

    Cn0=
Sep <span class="hljs-number">20</span> <span class="hljs-number">20</span>:<span class="hljs-number">30</span>:<span class="hljs-number">32</span> <span class="hljs-number">4</span>S-Iphone-Leo GoPhrazy[<span class="hljs-number">1377</span>] &lt;Warning&gt;: [INFO] {<span class="hljs-string">"receipt-data"</span>:{}}
</code></pre><p>See the last line where there is empty brakets? The JSON.stringify can&#39;t seem to stringify the base64encoded string.</p>
<p>As you can see also strangely the base64code string comes out with these spaces. It&#39;s really weird.</p>
<p>I can&#39;t seem to figure this out.</p>
<p>Thanks for your help.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 20th 2014, 4:42:13 pm">September 20th 2014</span>
				by <span class='authorname'>Leonardo Amigoni</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>base64encode</span></li>
					
						<li><span class='tagname'>json</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-282557">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Try getText instead of toString</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 22nd 2014, 10:24:47 am">September 22nd 2014</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/177839/strange-issue-with-base64-encoded-string#answer-282557" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Better! Thanks!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 22nd 2014, 8:38:13 pm">September 22nd 2014</span>
											by <span class='authorname'>Leonardo Amigoni</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
