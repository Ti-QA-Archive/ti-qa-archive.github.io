<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Back button doesnt respond Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Back button doesnt respond</h1>
		</header>
		<section>
			<p>I have been playing around with appcelerator for the last few days. After some experimenting with parts of code that I found on the forum and through Google. I got it to work to import an rss feed, show the list, and when you click on the title it loads the rest of the content in a webview.</p>
<p>So far so good. But it would be nice to add a back button as well to the webview. I found some code on the forum, but it doesnt seem to work.</p>
<p>The button shows up, but nothing happens when I click on it.</p>
<pre><code class="hljs">for<span class="hljs-list">(<span class="hljs-keyword">var</span> c=0<span class="hljs-comment">; c&lt;items.length;c++) {</span>

            urls[c] = items.item<span class="hljs-list">(<span class="hljs-keyword">c</span>)</span>.getElementsByTagName<span class="hljs-list">(<span class="hljs-quoted">'link</span>')</span>.item<span class="hljs-list">(<span class="hljs-number">0</span>)</span>.text<span class="hljs-comment">;</span>
            postName = items.item<span class="hljs-list">(<span class="hljs-keyword">c</span>)</span>.getElementsByTagName<span class="hljs-list">(<span class="hljs-quoted">'title</span>')</span>.item<span class="hljs-list">(<span class="hljs-number">0</span>)</span>.text<span class="hljs-comment">;</span>
            postUrl = items.item<span class="hljs-list">(<span class="hljs-keyword">c</span>)</span>.getElementsByTagName<span class="hljs-list">(<span class="hljs-quoted">'link</span>')</span>.item<span class="hljs-list">(<span class="hljs-number">0</span>)</span>.text<span class="hljs-comment">;</span>
            postContent = items.item<span class="hljs-list">(<span class="hljs-keyword">c</span>)</span>.getElementsByTagName<span class="hljs-list">(<span class="hljs-quoted">'description</span>')</span>.item<span class="hljs-list">(<span class="hljs-number">0</span>)</span>.text<span class="hljs-comment">;    </span>

            row = Titanium.UI.createTableViewRow<span class="hljs-list">({
                title: postName,
                backgroundColor:<span class="hljs-quoted">'#000</span>',
                color: <span class="hljs-quoted">'#FF0</span>'
            })</span><span class="hljs-comment">;</span>

            row.addEventListener<span class="hljs-list">(<span class="hljs-quoted">'click</span>', function <span class="hljs-list">(<span class="hljs-keyword">e</span>)</span>{

                var dataWin = Titanium.UI.createWindow<span class="hljs-list">({  
                    fullscreen : false,
                    title: <span class="hljs-quoted">'My</span> Main Window',
                    url: <span class="hljs-quoted">'data</span>.js'
                })</span><span class="hljs-comment">;</span>

                dataWin.content = postContent
                dataWin.open<span class="hljs-list">(<span class="hljs-keyword">dataWin</span>,{animated<span class="hljs-keyword">:true</span>})</span><span class="hljs-comment">;</span>

            })</span><span class="hljs-comment">;</span>

            tableview.appendRow<span class="hljs-list">(<span class="hljs-keyword">row</span>)</span><span class="hljs-comment">;</span>

        }</span>
</code></pre><p>The data.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;

<span class="hljs-comment">// create web view</span>
<span class="hljs-keyword">var</span> tableview = Titanium.UI.createWebView({
    fullscreen : <span class="hljs-literal">false</span>,
    html:win.content,
    canGoBack: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">//backgroundColor:'#000'</span>
});

win.add(tableview);

<span class="hljs-comment">// Back Button</span>
<span class="hljs-keyword">var</span> backBtn = Titanium.UI.createButton({
   title:<span class="hljs-string">'Back'</span>,
});

backBtn.addEventListener( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    tableview.goBack();

});

win.add(backBtn);
</code></pre><p>Any advice on to fix the back button would be great. Also, is importing an rss feed to show content the recommended way to import data, and then show it in a webview? Or is there an better way to do this?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 5th 2011, 12:28:28 pm">May 5th 2011</span>
				by <span class='authorname'>Tijmen Smit</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>button</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-207314">
				
						<section>
							<p>try</p>
<pre><code class="hljs"><span class="hljs-tag">backBtn</span><span class="hljs-class">.addEventListener</span>( <span class="hljs-string">'click'</span>, <span class="hljs-function">function</span>() {
    <span class="hljs-tag">Titanium</span><span class="hljs-class">.UI</span><span class="hljs-class">.currentWindow</span><span class="hljs-class">.close</span>({
            <span class="hljs-attribute">duration</span>: <span class="hljs-number">300</span>
        });
});
</code></pre><p>Hope it helps!</p>
<p>Tjeu</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 5th 2011, 12:53:46 pm">May 5th 2011</span>
								by <span class='authorname'>Tjeu Vdw</span><br>
								<a class="icon-bg icon-link" href="question/119330/back-button-doesnt-respond.html#answer-207314" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207341">
				
						<section>
							<p>Is there a reason why you don&#39;t want to just use the back button on the phone to handle close, or alternately use the menu?</p>
<p>Here is how to use the android back button:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Ti.UI.currentWindow;
<span class="hljs-keyword">win</span>.addEventListener('android:back', <span class="hljs-keyword">win</span>.<span class="hljs-keyword">close</span>);
</code></pre><p>Here is how to use the menu. Below is a menu.js file that I use to handle all interaction with the menu in my apps, it keeps the code in your windows clean.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> menu = {

    isAndroid: Ti.Platform.name == <span class="hljs-string">'android'</span>,
    win: Ti.UI.currentWindow,
    data: [],
    tiVersion: <span class="hljs-number">1.5</span>,

    init: function (<span class="hljs-keyword">params</span>) {

        <span class="hljs-keyword">if</span> (!menu.isAndroid) {
            <span class="hljs-comment">//create iphone menu.</span>
            <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> flexSpace = <span class="hljs-keyword">new</span> Button({ systemButton: Ti.UI.iPhone.SystemButton.FLEXIBLE_SPACE });
            menu.data[index++] = flexSpace;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-keyword">params</span>.buttons.length; k++) {
                menu.data[index] = <span class="hljs-keyword">new</span> Button({ title: <span class="hljs-keyword">params</span>.buttons[k].title, style: Ti.UI.iPhone.SystemButtonStyle.BORDERED });
                menu.data[index].addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">params</span>.buttons[k].clickevent);
                index++;
                menu.data[index++] = flexSpace;
            }
            menu.win.setToolbar(menu.data);
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">//create android menu.</span>
            <span class="hljs-keyword">if</span> (menu.tiVersion &gt;= <span class="hljs-number">1.5</span>) {
                <span class="hljs-comment">//ti 1.5 has new way to create menu.</span>
                <span class="hljs-keyword">var</span> activity = Ti.Android.currentActivity;
                activity.onCreateOptionsMenu = function (e) {
                    <span class="hljs-keyword">var</span> optionsmenu = e.menu;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-keyword">params</span>.buttons.length; k++) {
                        menu.data[k] = optionsmenu.add({ title: <span class="hljs-keyword">params</span>.buttons[k].title })
                        menu.data[k].addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">params</span>.buttons[k].clickevent);
                    }
                }
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">//pre-ti 1.5 way to create menu.</span>
                <span class="hljs-keyword">var</span> optionsmenu = Ti.UI.Android.OptionMenu.createMenu();
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-keyword">params</span>.buttons.length; k++) {
                    menu.data[k] = Ti.UI.Android.OptionMenu.createMenuItem({ title: <span class="hljs-keyword">params</span>.buttons[k].title })
                    menu.data[k].addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-keyword">params</span>.buttons[k].clickevent);
                    optionsmenu.add(menu.data[k]);
                }
                Ti.UI.Android.OptionMenu.setMenu(optionsmenu);
            }
        }

    },

    setTiVersion: function (<span class="hljs-keyword">value</span>) {

        <span class="hljs-comment">//only need to set this if using android and an older version of ti than 1.5.</span>
        menu.tiVersion = <span class="hljs-keyword">value</span>;

    }

};
</code></pre><p>And then in your window code, include menu.js and then create a menu like so:</p>
<pre><code class="hljs"><span class="hljs-attribute">createMenu</span>: <span class="hljs-string">function () {</span>

<span class="armasm">    var <span class="hljs-keyword">buttons </span>= [
           {
<span class="hljs-label">                title:</span> <span class="hljs-string">"Close"</span>,
<span class="hljs-label">                clickevent:</span> TI.UI.currentWindow.close
            }]<span class="hljs-comment">;</span>
        }
        menu.init({
<span class="hljs-label">            buttons:</span> <span class="hljs-keyword">buttons
</span>        })<span class="hljs-comment">;</span>

    },</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 5th 2011, 6:24:26 pm">May 5th 2011</span>
								by <span class='authorname'>Justin Toth</span><br>
								<a class="icon-bg icon-link" href="question/119330/back-button-doesnt-respond.html#answer-207341" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Sorry I just realized that you want to add a back button for your webview, not for the actual window.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2011, 6:25:37 pm">May 5th 2011</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-207342">
				
						<section>
							<p>Which version of the Appcelerator SDK are you using?</p>
<p>Which version of the Android OS are you testing on?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 5th 2011, 6:30:35 pm">May 5th 2011</span>
								by <span class='authorname'>John Welch</span><br>
								<a class="icon-bg icon-link" href="question/119330/back-button-doesnt-respond.html#answer-207342" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
