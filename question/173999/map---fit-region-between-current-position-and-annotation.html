<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Map - fit region between current position and annotation » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Map - fit region between current position and annotation</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I have a question regarding fitting the region of a map.<br>After showing the map, I want to show the users a annotation and where they are.</p>
<p>My try was to calculate the middle between the coordinates of the current position and my annotation, but it seems that my approach is wrong.</p>
<p>Here my code snippet:</p>
<pre><code class="hljs">var map = Map.createView({
<span class="hljs-label">    region:</span> {<span class="hljs-string">latitude:</span>lat, <span class="hljs-string">longitude:</span><span class="hljs-typename">long</span>, <span class="hljs-string">latitudeDelta:</span>latdelta, <span class="hljs-string">longitudeDelta:</span>longdelta},
<span class="hljs-label">    animate:</span><span class="hljs-literal">true</span>,
<span class="hljs-label">    regionFit:</span><span class="hljs-literal">true</span>,
<span class="hljs-label">    userLocation:</span><span class="hljs-literal">true</span>,
<span class="hljs-label">    height:</span><span class="hljs-string">'100%'</span>,
<span class="hljs-label">    width:</span><span class="hljs-string">'100%'</span>
});

.....
Creating annotation
.....


Ti.Geolocation.getCurrentPosition(function(e) {
    <span class="hljs-keyword">if</span> (e.error) {
        <span class="hljs-keyword">return</span>; 
    }            

    map.setLocation({
        <span class="hljs-string">latitude :</span> ((map.annotations[<span class="hljs-number">0</span>].latitude + e.coords.latitude) / <span class="hljs-number">2</span>),
        <span class="hljs-string">longitude :</span> ((map.annotations[<span class="hljs-number">0</span>].longitude + e.coords.longitude) / <span class="hljs-number">2</span>),
        <span class="hljs-string">latitudeDelta :</span> <span class="hljs-number">1</span>,
        <span class="hljs-string">longitudeDelta :</span><span class="hljs-number">1</span>
    });
});
</code></pre><p>This solution is not working as the lat and long are not calculated right and also the Delta values are not really exact, as users could be anywhere in the world.</p>
<p>Is there any property on the map that I&#39;ve not seen or an other way to do that? Or is there a way to calc this (also the Delta values) automatically?</p>
<p>Thank you all<br>Toni</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 8th 2014, 7:58:44 am">May 8th 2014</span>
				by <span class='authorname'>Toni Hoffmann</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>map</span></li>
					
						<li><span class='tagname'>mapview</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><ul>
<li>Android?</li>
<li>iOS?</li>
</ul>
<p>Important</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 8th 2014, 8:08:42 am">May 8th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Focus is on iOS.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 8th 2014, 8:11:06 am">May 8th 2014</span>
								by <span class='authorname'>Toni Hoffmann</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-278532">
				
						<section>
							<p>Hi</p>
<p>For iOS you have a great friend - <a href="https:&#x2F;&#x2F;github.com&#x2F;benbahrenburg">Ben Bbahrenburg</a>, he has a library <strong>benCoding.Map</strong> that enhances the built in maps.  One of those enhancements is <strong>ZoomToFit</strong> - it does what you think it would do;</p>
<ul>
<li><a href="https:&#x2F;&#x2F;github.com&#x2F;benbahrenburg&#x2F;benCoding.Map&#x2F;tree&#x2F;master&#x2F;dist">Distribution</a></li>
<li><a href="https:&#x2F;&#x2F;github.com&#x2F;benbahrenburg&#x2F;benCoding.Map&#x2F;blob&#x2F;master&#x2F;documentation&#x2F;index.md">Documentation</a></li>
<li><a href="https:&#x2F;&#x2F;github.com&#x2F;benbahrenburg&#x2F;benCoding.Map&#x2F;tree&#x2F;master&#x2F;example">Examples</a></li>
</ul>
<p>You add your annotations, circles (new feature) polygons (new feature) and anything else - use this method and zoom to include those elements in view.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 8th 2014, 8:22:59 am">May 8th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/173999/map---fit-region-between-current-position-and-annotation#answer-278532" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you Malcolm, for your fast reply.<br>I&#39;ll have a look at the library and if this fits my needs. It sounds like what I need.</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 8th 2014, 8:25:08 am">May 8th 2014</span>
											by <span class='authorname'>Toni Hoffmann</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This module is compatible with iOS 7 and SDK 3.2.3GA?</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 8th 2014, 10:27:35 am">May 8th 2014</span>
											by <span class='authorname'>nicolò monili</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Honestly - I have not tried, I will take a look later and report back if @Toni has not yet managed</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 8th 2014, 10:38:05 am">May 8th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
