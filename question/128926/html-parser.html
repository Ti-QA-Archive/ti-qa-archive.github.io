<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>HTML parser » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>HTML parser</h1>
		</header>
		<section>
			<p>Hello, I would like parse html result but I don&#39;t know exactly how.</p>
<p>I make this code : </p>
<p>`<br>htmlparser.js</p>
<p>exports = {};<br>htmlparser = exports;</p>
<p>soupselect.js</p>
<p>var domUtils = require(&quot;include&#x2F;lib&#x2F;htmlparser&quot;).DomUtils;<br>var domUtils = htmlparser.DomUtils;<br>soupselect = exports;</p>
<p>My current page</p>
<p>Ti.include(&#39;..&#x2F;..&#x2F;include&#x2F;lib&#x2F;htmlparser.js&#39;);<br>Ti.include(&#39;..&#x2F;..&#x2F;include&#x2F;lib&#x2F;soupselect.js&#39;);</p>
<p>&#x2F;&#x2F;var select = soupselect.select;<br>var htmlparser = require(&quot;.&#x2F;lib&#x2F;htmlparser&quot;);</p>
<p>var body = &#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;&#39;</p>
<ul>
<li>&#39;&lt;body&gt;&#39;</li>
<li>&#39;&lt;img src=&quot;http:&#x2F;&#x2F;cdn.cad-comic.com&#x2F;comics&#x2F;2859286598c11964un2ya69354216.jpg&quot; &#x2F;&gt;&#39;</li>
<li><p>&#39;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&#39;;</p>
<p>  var handler = new htmlparser.DefaultHandler(function(err, dom){</p>
<pre><code class="hljs">  itanium.API.info(<span class="hljs-string">"dom : "</span>+dom);
<span class="hljs-keyword">if</span> (err) {
  alert(<span class="hljs-string">'Error: '</span> + err);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">var</span> img = select(dom, <span class="hljs-string">'img'</span>);

  img.<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(img)</span> </span>{
    alert(<span class="hljs-string">'src: '</span> + img.attribs.src);
  });

 alert(<span class="hljs-string">'Ok: '</span>);
}
</code></pre><p>  });</p>
<p>  var parser = new htmlparser.Parser(handler);<br>  parser.parseComplete(body);<br>`</p>
</li>
</ul>
<p>I followed this tuto : <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;60731&#x2F;what-is-the-best-way-to-parse-html">What is the best way to parse HTML?</a></p>
<p>But I have this error :<br>[ERROR] Script Error = <em>*</em> -[NSCFString substringFromIndex:]: Range or index out of bounds</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 1st 2011, 10:40:36 am">December 1st 2011</span>
				by <span class='authorname'>mickael lignier</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>code</span></li>
					
						<li><span class='tagname'>html</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>json</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-224640">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Despite the fact your CommonJS code is broken, I have to say that there is no need to parse HTML (or for HTML parser), use WebView to load HTML and use standard DOM methods to extract data you need. Simple, elegant and it works for sure.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 1st 2011, 10:49:54 am">December 1st 2011</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="../../question/128926/html-parser.html#answer-224640" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Just for clarification, <strong>simply create a new WebView with its url property set to the content that you want to manipulate. Add an event listener to its load event, and then use evalJS to have Titanium evaluate your desired JavaScript onto the DOM as its context:</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> webView = Ti.UI.createWebView({
  url:  <span class="hljs-string">'http://appcelerator.com'</span>
});
webView.addEventListener(<span class="hljs-string">'load'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> </span>{
  Ti.API.info(<span class="hljs-string">'Loaded WebView ...'</span>);
  webView.evalJS(<span class="hljs-string">"alert('We have now evaluated our JavaScript within the context of our loaded DOM')"</span>);
});
</code></pre><p>For reference to another thread: http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;141967&#x2F;accessing-dom-object-of-a-remote-web-page-in-web-view</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 9th 2013, 12:26:01 pm">May 9th 2013</span>
											by <span class='authorname'>Haseeb Qureshi</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>4</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-224641">
				
						<section>
							<p>Ok thanks for this answer, but can you tell me how I have to extract data to my WebView?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 1st 2011, 11:16:50 am">December 1st 2011</span>
								by <span class='authorname'>mickael lignier</span><br>
								<a class="icon-bg icon-link" href="../../question/128926/html-parser.html#answer-224641" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Please use comments instead of answers, it&#39;s easier to track discussion that way. Anyway, you can do that in the same manner as you extract data from any web page - <a href="http:&#x2F;&#x2F;www.w3schools.com&#x2F;htmldom&#x2F;dom_methods.asp">http:&#x2F;&#x2F;www.w3schools.com&#x2F;htmldom&#x2F;dom_methods.asp</a></p>
<p>The only difference is that you need to get that data to Titanium app. You can do that using app-level events (Ti.App.addEventListener&#x2F;fireEvent).</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 1st 2011, 11:24:33 am">December 1st 2011</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks so much for your help. It&#39;s working fine now, I can work now as well :)<br>Thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 1st 2011, 11:55:51 am">December 1st 2011</span>
											by <span class='authorname'>mickael lignier</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yeah, that&#39;s much easier then writing your own HTML parser. Writing your own HTML parser can be very difficult due to error handling, tags that don&#39;t need to be enclosed, etc.</p>
<p>In-built HTML parser in WebView has all that, so you just need to use it properly.</p>
<p>Glad that I helped you. You can mark my upper answer as the best one so others can find it easily.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 1st 2011, 12:15:42 pm">December 1st 2011</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
