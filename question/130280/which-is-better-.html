<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Which is better ? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Which is better ?</h1>
		</header>
		<section>
			<p>CommonJS, using require() in the js file as late as possible, is the recommendated architecture for Titanium. But I tried also using another approch global context reference.</p>
<p>In app.js define all the modules needed in global namespace. Then add global in windows to be opened: </p>
<h2 id="app-js-">app.js:</h2>
<p>var global = {};<br>global.ui = require(&#39;&#x2F;js&#x2F;app&#x2F;common&#x2F;ui&#39;);<br>global.model = require(&#39;&#x2F;js&#x2F;app&#x2F;common&#x2F;model&#39;);</p>
<p>…<br>var w = Titanium.UI.createWindow({<br>  backgroundColor: &quot;#fff&quot;,<br>  url: new_window.js,<br>  global: global<br>});<br>…</p>
<h2 id="in-the-file-new_window-js-">In the file new_window.js: </h2>
<p>var win = Ti.UI.currentWindow;<br>var global = win.global;<br>var obj1 = new global.model.func1();<br>…</p>
<p>I sthere anyone who can give a qualified analysis as what is the advantage and disadvantage of the approch? I am not sure which one is better in respect of speed and memory requirements.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 5th 2012, 9:07:36 pm">January 5th 2012</span>
				by <span class='authorname'>Zhong Yu</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>architecture</span></li>
					
						<li><span class='tagname'>commonjs</span></li>
					
						<li><span class='tagname'>design</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Add Titan Chat Group on 86986746 Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 5th 2012, 9:16:28 pm">January 5th 2012</span>
								by <span class='authorname'>clive klugman</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>QQ 86986746</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 5th 2012, 9:21:41 pm">January 5th 2012</span>
								by <span class='authorname'>Jiale He</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Sorry could you tell more abbout Titan Chat Group for a newbe?:).</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 5th 2012, 9:22:56 pm">January 5th 2012</span>
								by <span class='authorname'>Zhong Yu</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>There is a Titan chat group controlled by Appcelerator but it is password restricted for titans. There is an open appcelerator chat which quite a few titans sit in on. T…</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 5th 2012, 9:29:56 pm">January 5th 2012</span>
								by <span class='authorname'>Trevor Ward</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Zhong Yu</p>
<p>QQ CHAT GROUP 86986746</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 5th 2012, 10:11:04 pm">January 5th 2012</span>
								by <span class='authorname'>Jiale He</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-226856">
				
						<section>
							<p>Hi Zhong</p>
<p>In a quick answer both will use the same memory. In a longer answer, unless you are firing events back upto app.js then the global namespace is not the way to go. The bigger issue is run speed or more precisely loading time,if you require everything in app.js then it all has to be loaded before the app starts, which will obviously take longer thanif you require the files when needed.</p>
<p>But here is thing, there is no global namespace in commonJS, so it really is a case of requiring the files where needed. noting that if a file has been required and is needed again in another file, it will not reload it, just allow the scope of the functions and variables to be available to both…</p>
<p>Hope I have explained this ok.</p>
<p>T.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 5th 2012, 9:28:26 pm">January 5th 2012</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="../../question/130280/which-is-better-.html#answer-226856" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-226858">
				
						<section>
							<p>Thanks Trevor,</p>
<p>Loading the files may take some time but it is not much comparing to what these code will do later: fetch data from local database and from remote server. The files will be loaded several times in different context otherwise in the recommendated approch. How gabbage collector works in js and Titanium will be interesting for memory.</p>
<p>What worries me is the stability of application. My app crashes in rare cases. Could it be that app.js is killed by Android. It is not very plausible but is there any risk for such?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 5th 2012, 9:50:25 pm">January 5th 2012</span>
								by <span class='authorname'>Zhong Yu</span><br>
								<a class="icon-bg icon-link" href="../../question/130280/which-is-better-.html#answer-226858" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>actually they won&#39;t be loaded into different context unless you are also loading windows using the URL load option, which to be honest you shouldn&#39;t be using unless you have a specific need.</p>
<p>T.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 9:54:22 pm">January 5th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I used URL load option bacause it produces modulized code. I have not tried using CommonJs, For example I have 5 tabs in the TabGroup. Windows connected to 5 tabs have to be in 5 separate files (I hate big files). Could you give an sample how I could use CommomJS and late loading and not using url.</p>
<p>Thanks for discussing. It&#39;s getting interesting:)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 10:01:43 pm">January 5th 2012</span>
											by <span class='authorname'>Zhong Yu</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>it&#39;s fun when it gets interesting.</p>
<p>https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Best+Practices</p>
<p>is a good place to start..</p>
<p>T…</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 10:40:23 pm">January 5th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks again for the link. It is interesting.</p>
<p>However, I still cannot find any solutions for late loading with tabbed windows in a TabGroup. Even KitchenSink samples using URL.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 6th 2012, 5:45:02 pm">January 6th 2012</span>
											by <span class='authorname'>Zhong Yu</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-226860">
				
						<section>
							<p>Hi Trevor</p>
<p>Under android, we cannot prevent creating only one context since single context may cause one issue that is everytime you click on the physical back button, application will exit out which is bad……..</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 5th 2012, 10:15:43 pm">January 5th 2012</span>
								by <span class='authorname'>Jiale He</span><br>
								<a class="icon-bg icon-link" href="../../question/130280/which-is-better-.html#answer-226860" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>add an event listner for android:back and handle the button on each window.. especially if you are closing the previous window.</p>
<p>Also set exit on close to false on the window creation..</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 10:38:17 pm">January 5th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>But android:back is only working on heavywindow which means a different context</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 10:39:45 pm">January 5th 2012</span>
											by <span class='authorname'>Jiale He</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>nope …. same context within the JavaScript interpreter… and in 1.8.0.1 will need to check if there are still heavy and light weight windows, I know the plan was to make them just windows..</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 10:42:29 pm">January 5th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>unless you are using the URL load on the window creation..</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 10:43:01 pm">January 5th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>In APIs docs </p>
<p>it is saying</p>
<pre><code class="hljs">The createWindow <span class="hljs-operator"><span class="hljs-keyword">call</span> creates a heavyweight window <span class="hljs-keyword">if</span> <span class="hljs-keyword">any</span> <span class="hljs-keyword">of</span> the <span class="hljs-keyword">following</span> properties <span class="hljs-keyword">are</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">on</span> <span class="hljs-keyword">creation</span>:
fullscreen
navBarHidden
modal
windowSoftInputMode</span>
</code></pre><p>I never use url at the time of window creation, but I use windowSoftInputMode making my window heavy which means another context…</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 10:46:39 pm">January 5th 2012</span>
											by <span class='authorname'>Jiale He</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I am confused how does making it a heavyweight window create a new context…. on what do you base this on. Have I missed something .. Thanks T…</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 10:52:48 pm">January 5th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Trevor<br> I will reply to you shortly with the code sample. Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 11:01:48 pm">January 5th 2012</span>
											by <span class='authorname'>clive klugman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oops….using the wrong account again. I will reply to you shortly. Sorry</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 5th 2012, 11:03:06 pm">January 5th 2012</span>
											by <span class='authorname'>Jiale He</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Trevor</p>
<p>You are right. I just proved your comment is true. Thank you</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 6th 2012, 1:17:37 am">January 6th 2012</span>
											by <span class='authorname'>clive klugman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Nice to know fears I had misunderstood something there…..</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 6th 2012, 12:15:47 pm">January 6th 2012</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
