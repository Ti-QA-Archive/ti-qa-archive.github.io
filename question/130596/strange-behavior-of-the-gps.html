<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Strange behavior of the GPS » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Strange behavior of the GPS</h1>
		</header>
		<section>
			<p>Hi. I&#39;m seeing a strange behavior with the gps on iphone.</p>
<p>I have the following code:</p>
<pre><code class="hljs">Titanium<span class="hljs-built_in">.</span>Geolocation<span class="hljs-built_in">.</span>accuracy = Titanium<span class="hljs-built_in">.</span>Geolocation<span class="hljs-built_in">.</span>ACCURACY_BEST;
Titanium<span class="hljs-built_in">.</span>Geolocation<span class="hljs-built_in">.</span>distanceFilter = <span class="hljs-number">10</span>;
Titanium<span class="hljs-built_in">.</span>Geolocation<span class="hljs-built_in">.</span>preferredProvider = Titanium<span class="hljs-built_in">.</span>Geolocation<span class="hljs-built_in">.</span>PROVIDER_GPS;

<span class="hljs-built_in">var</span> locationCallback = function(e)
{
    <span class="hljs-attribute">...</span>
    <span class="hljs-attribute">...</span>
    <span class="hljs-attribute">...</span>
    <span class="hljs-attribute">...</span>
};

Titanium<span class="hljs-built_in">.</span>Geolocation<span class="hljs-built_in">.</span>addEventListener(<span class="hljs-string">'location'</span>, locationCallback);
</code></pre><p>This works fine. The problem is that I get one point (lat, lan) that is not correct.<br>I wait a few minutes for the accuracy be good, and still the same.</p>
<p>The strange thing is that if I put the application in the background and then open the Map application (which comes in iphone) and return to my application, this  begins to function properly.</p>
<p>What am I doing wrong?</p>
<p>I need to start something?</p>
<p>I tried using Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_HUNDRED_METERS and remains the same.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 12th 2012, 1:06:09 pm">January 12th 2012</span>
				by <span class='authorname'>Fabian Brussa</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>gps</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>6</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>6 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-227373">
				
						<section>
							<p><code>Titanium.Geolocation.ACCURACY_BEST</code> does <strong>not</strong> work on iPhone…only Android.  Set accuracy to <code>Ti.Geolocation.ACCURACY_NEAREST_TEN_METERS</code> for iPhone.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 12th 2012, 8:10:58 pm">January 12th 2012</span>
								by <span class='authorname'>Shawn Lipscomb</span><br>
								<a class="icon-bg icon-link" href="question/130596/strange-behavior-of-the-gps.html#answer-227373" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Confirmed this does NOT work on iPhone for v1.7.5 AND v1.8.1</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 15th 2012, 3:19:16 pm">February 15th 2012</span>
											by <span class='authorname'>Tjeerd Verhagen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-227342">
				
						<section>
							<p>The phone caches recently identified locations (anonymously now, of course!) to reduce the amount of network calls.  Possibly when you go to the Maps application it is updating that cache and when you return to the App it uses that last location.  The maps app <em>may</em> be utilising a local wireless network (ie not using 3G) which is why you get an updated location - Try disabling wireless on the phone before you open the Maps app and see if the same thing occurs ?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 12th 2012, 1:25:42 pm">January 12th 2012</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="question/130596/strange-behavior-of-the-gps.html#answer-227342" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Look, I followed the following steps:</p>
<ol>
<li><p>turn off wireless</p>
</li>
<li><p>open my app: –&gt; accuracy = 999</p>
</li>
<li><p>open map application</p>
</li>
<li><p>return to my app: –&gt; accuracy = 30</p>
</li>
</ol>
<p>I do not understand.<br>I have to remove Titanium.Geolocation.preferredProvider = Titanium.Geolocation.PROVIDER_GPS?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2012, 1:38:58 pm">January 12th 2012</span>
											by <span class='authorname'>Fabian Brussa</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I set these as my Geolocation settings before calling the &quot;location&quot; event.</p>
<pre><code class="hljs"><span class="hljs-constant">Ti.Geolocation.purpose</span> = 'Location based services for App';
<span class="hljs-constant">Ti.Geolocation.accuracy</span> = Ti.Geolocation.ACCURACY_BEST;
<span class="hljs-constant">Ti.Geolocation.preferredProvider</span> = Ti.Geolocation.PROVIDER_GPS;
<span class="hljs-constant">Ti.Geolocation.distanceFilter</span> = <span class="hljs-number">5</span>;
<span class="hljs-constant">Ti.Geolocation.showCalibration</span> = <span class="hljs-literal">false</span>;
<span class="hljs-constant">Ti.Geolocation.headingFilter</span> = <span class="hljs-number">1</span>;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 12th 2012, 2:11:24 pm">January 12th 2012</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ll try. thanks Nick</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2012, 3:22:03 pm">January 12th 2012</span>
											by <span class='authorname'>Fabian Brussa</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-227352">
				
						<section>
							<p>I noticed a similar problem.  On my late model iPhone 3G I could never get accuracy closer than 1 or 2 miles using the titanium API (v 1.6.8 and 1.7.0).  This occurred using a wifi and 3G connection.  I knew that the problem was not related to iOS (v4.2) or a bad GPS because my google maps app worked perfectly.</p>
<p>Also, I noticed that the accuracy was a lot better using the iPhone 4 and iOS 5.0, but with the same version of titanium I used on the iPhone 3G.</p>
<p>There are quite a few GPS related questions and answers with respect to accuracy.  I tried all of those workarounds and none of them worked.</p>
<p>Finally, I wrote an objective-C module just to make sure that it was related to the titanium API, and it turned out that the objective-C module always returned relatively accurate GPS information, within 30 to 50 feet, as compared to the titanium API which was consistently returning information off by 1 or 2 miles.  If you are interested in it I can share some code.  </p>
<p>I haven&#39;t tried v1.8 of the titanium API to see if it is better, and maybe it is.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 12th 2012, 2:52:33 pm">January 12th 2012</span>
								by <span class='authorname'>Jeremy Swensen</span><br>
								<a class="icon-bg icon-link" href="question/130596/strange-behavior-of-the-gps.html#answer-227352" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Jeremy, I am with IOS5 and iphone 4. I will try the sdk 1.8.</p>
<p>Unfortunately I&#39;m not good with Objective-C, so do not know what to do with your code. Thanks also</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 12th 2012, 3:20:46 pm">January 12th 2012</span>
											by <span class='authorname'>Fabian Brussa</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Could you please share the code Jeremy. I am facing similar problems with respect to accuracy.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 22nd 2012, 8:12:32 pm">April 22nd 2012</span>
											by <span class='authorname'>Anuj Surana</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-237608">
				
						<section>
							<p>I&#39;m having the same problem. Would like it alot if you could post your code (and explain how to use it) :)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 1st 2012, 4:31:13 am">May 1st 2012</span>
								by <span class='authorname'>ariel baruch</span><br>
								<a class="icon-bg icon-link" href="question/130596/strange-behavior-of-the-gps.html#answer-237608" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-237609">
				
						<section>
							<p>thanks Shawn Lipscomb, your solution worked for me!<br>Titanium.Geolocation.ACCURACY_BEST<br>was the problem (not working on iPhone.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 1st 2012, 4:42:47 am">May 1st 2012</span>
								by <span class='authorname'>ariel baruch</span><br>
								<a class="icon-bg icon-link" href="question/130596/strange-behavior-of-the-gps.html#answer-237609" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-245329">
				
						<section>
							<p>Anybody reported this bug on JIRA?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 15th 2012, 3:39:25 am">August 15th 2012</span>
								by <span class='authorname'>Ygor Lemos</span><br>
								<a class="icon-bg icon-link" href="question/130596/strange-behavior-of-the-gps.html#answer-245329" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
