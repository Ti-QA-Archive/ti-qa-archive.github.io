<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>IOS Push Notification badge icon as &#34;1&#34; after day passes. Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>IOS Push Notification badge icon as &#34;1&#34; after day passes.</h1>
		</header>
		<section>
			<p>Hi All,</p>
<p>I have successfully using Push Notifications in my IOS app, There is a login in my application after logging in i will get the count of unread messages from server and i am updating in badge icon. After a day passes before my login app badge icon is changed to &quot;1&quot;. But the expected is previous day unread count should be displayed. But it is not happening.</p>
<p>Please help me how can i handle this issue. </p>
<p>Thanks, Rakesh Kalwa.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 4th 2015, 11:13:12 am">March 4th 2015</span>
				by <span class='authorname'>Rakesh Kalwa</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>badgeicon</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>pushnotifications</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-286271">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Would it be helpful to store the count of unread messages in a App level variable which will retain the value even after exit.<br>e.g.  After login store the count in </p>
<pre><code class="hljs">Ti.App.<span class="hljs-keyword">Properties</span>.setInt(<span class="hljs-string">'unread_count'</span>, <span class="hljs-string">'server_value'</span>);
</code></pre><p>and then when the app starts check for the value using </p>
<pre><code class="hljs">Ti.App.<span class="hljs-keyword">Properties</span>.getInt(<span class="hljs-string">'unread_count'</span>);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 5th 2015, 3:40:23 am">March 5th 2015</span>
								by <span class='authorname'>Lloyd Dsouza</span><br>
								<a class="icon-bg icon-link" href="question/181209/ios-push-notification-badge-icon-as-1-after-day-passes#answer-286271" rel="permalink">permalink</a>
							</div>

							<h5>11 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Currently i am doing in same way storing the count in App level and assigning to badge, But it is working properly after login. And after App is exit or went to background for more than 5 hours badge value is changing to &quot;1&quot;.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 4:24:29 am">March 5th 2015</span>
											by <span class='authorname'>Rakesh Kalwa</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The appBadge takes a number as an argument. Are you sure you are converting the response to INT before saving it? Some code would be helpful</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 4:46:44 am">March 5th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks Dsouza for the replies, I am saving unread notifications after login as</p>
<p>Alloy.Globals.NoOfPendingNotif = Details[2];<br>$.notiCount.text = Alloy.Globals.NoOfPendingNotif;<br>Ti.UI.iPhone.setAppBadge(Alloy.Globals.NoOfPendingNotif);</p>
<p>Count is reflecting after login up to 5 hours after 5 hours it is automatically changed to &quot;1&quot;.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:03:51 am">March 5th 2015</span>
											by <span class='authorname'>Rakesh Kalwa</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Can you do a  <code>console.log(typeof(Alloy.Globals.NoOfPendingNotif));</code> just before you do a setAppBadge?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:08:44 am">March 5th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Also, you are using Alloy.Globals to store the count which does not retain the value after app exit. Or am I missing something?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:11:26 am">March 5th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have tried type of and i got it as string = INFO] :   typeof of NoOfPendingNotif = string</p>
<p>Good Point actually using Alloy.Globals will exit after app i will try with Ti.App.properties file.</p>
<p>Thanks once again, Will update you after doing the testing.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:26:13 am">March 5th 2015</span>
											by <span class='authorname'>Rakesh Kalwa</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Now that we know that you are getting a string, you need to convert it to number using <code>parseInt(&amp;#39;your_value&amp;#39;);</code> Because setAppBadge takes a number.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:32:20 am">March 5th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>But I am just wondering how it got worked till now with string?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:34:34 am">March 5th 2015</span>
											by <span class='authorname'>Rakesh Kalwa</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I tried to parseInt the value but it is giving me as -&gt; [INFO] :   typeof of NoOfPendingNotif = NaN</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:36:54 am">March 5th 2015</span>
											by <span class='authorname'>Rakesh Kalwa</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Doesn&#39;t hurt to do some defensive programming just in case :-)</p>
<p>Rakesh if the answers has helped you kindly mark it as resolved. Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:37:47 am">March 5th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Also check the value of whats being returned. It its blank it will give you NaN</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:46:06 am">March 5th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-286274">
				
						<section>
							<p>Also check the value of whats being returned. It its blank it will give you NaN</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 5th 2015, 5:39:37 am">March 5th 2015</span>
								by <span class='authorname'>Lloyd Dsouza</span><br>
								<a class="icon-bg icon-link" href="question/181209/ios-push-notification-badge-icon-as-1-after-day-passes#answer-286274" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Sorry, did a answer instead of comment</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 5:47:09 am">March 5th 2015</span>
											by <span class='authorname'>Lloyd Dsouza</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes the value is null, We have changed to parseInt.</p>
<p>I have done the code change to Ti.App.property we need to wait for the result as for the change, I Have changed the time in settings but there is no result it is having the same value.</p>
<p>Once again thanks for the help we will let you now after multiple testing.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2015, 6:22:54 am">March 5th 2015</span>
											by <span class='authorname'>Rakesh Kalwa</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
