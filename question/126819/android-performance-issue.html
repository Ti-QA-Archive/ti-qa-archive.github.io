<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android performance issue » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android performance issue</h1>
		</header>
		<section>
			<p>Hello,</p>
<p>I&#39;m facing a problem regarding performance on Android. My code built with Titanium 1.7.2 runs within around <strong>300ms</strong> on an <strong>iPad 1</strong>. Exactly the same code needs around <strong>10 seconds</strong> on a <strong>Samsung Galaxy Tab 7&quot;</strong> (Android 2.2) and on a <strong>HTC Flyer</strong> (Android 2.3).</p>
<p>Does anybody already have faced such a performance issue on Android ? Can this be due to a misconfiguration ?</p>
<p>I appreciate your help.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 13th 2011, 2:18:45 pm">October 13th 2011</span>
				by <span class='authorname'>Gerome Bovet</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>performance</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-220902">
				
						<section>
							<p>It&#39;s hard to tell without any code. Try to benchmark different parts of your application and try to narrow down the source of slowness.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 13th 2011, 5:29:33 pm">October 13th 2011</span>
								by <span class='authorname'>Ivan Škugor</span><br>
								<a class="icon-bg icon-link" href="question/126819/android-performance-issue#answer-220902" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hello Ivan,</p>
<p>I tried to find where time is lost, but it is overall.<br>The strangest thing is when I put my JS code which don&#39;t use the Titanium API out of app.js into a HTML page executed by a webview, the execution time is only around 250ms !</p>
<p>I just can&#39;t understand how the JS code in app.js is treaten by Titanium :(</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 14th 2011, 3:51:02 am">October 14th 2011</span>
											by <span class='authorname'>Gerome Bovet</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-220978">
				
						<section>
							<p>I just wrote a small test application to test the performance.</p>
<p>On a iPad 1 : 135ms</p>
<p>On a Samsung Galaxy Tab : 8 seconds</p>
<p>Why is the code running so slow on Android ? Is the parser nothing worth ??</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> buttonS = Titanium.UI.createButton({
   title: <span class="hljs-string">'Test perf'</span>
});
buttonS.height=<span class="hljs-string">"50px"</span>;
buttonS.width=<span class="hljs-string">"100%"</span>;

<span class="hljs-keyword">var</span> values = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();

buttonS.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{    
    <span class="hljs-keyword">var</span> start = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i&lt;<span class="hljs-number">500000</span>; i++){
        values[i]=<span class="hljs-number">5</span>;
    }

    <span class="hljs-keyword">var</span> stop = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    alert(<span class="hljs-string">'Time: '</span> + (stop-start) + <span class="hljs-string">'\nSize: '</span> + values.length);
});

<span class="hljs-keyword">var</span> <span class="hljs-built_in">window</span> = Titanium.UI.createWindow({exitOnClose: <span class="hljs-literal">true</span>, title: <span class="hljs-string">"Test templating"</span>});
<span class="hljs-built_in">window</span>.add(buttonS);
<span class="hljs-built_in">window</span>.open({modal: <span class="hljs-literal">true</span>});
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 14th 2011, 11:47:53 am">October 14th 2011</span>
								by <span class='authorname'>Gerome Bovet</span><br>
								<a class="icon-bg icon-link" href="question/126819/android-performance-issue#answer-220978" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Maybe iOS&#39;s JavaScript engine has some kind of code optimizer and it knows that loop can be optimized, while Android&#39;s Rhino JS engine does not have that kind of optimization.<br>Try to create table view rows with different title in the loop, I think that would give us better insight.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> buttonS = Titanium.UI.createButton({
   title: <span class="hljs-string">'Test perf'</span>
});
buttonS.height=<span class="hljs-string">"50px"</span>;
buttonS.width=<span class="hljs-string">"100%"</span>;

<span class="hljs-keyword">var</span> tableView = Ti.UI.createTableView();

buttonS.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{   
    <span class="hljs-keyword">var</span> start = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    <span class="hljs-keyword">var</span> values = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i&lt;<span class="hljs-number">500</span>; i++){
        values[i]=Ti.UI.createTableViewRow({ title: <span class="hljs-string">'Row '</span> + i });
    }
    tableView.setData(values);
    <span class="hljs-keyword">var</span> stop = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    alert(<span class="hljs-string">'Time: '</span> + (stop-start) + <span class="hljs-string">'\nSize: '</span> + values.length);
});

<span class="hljs-keyword">var</span> <span class="hljs-built_in">window</span> = Titanium.UI.createWindow({exitOnClose: <span class="hljs-literal">true</span>, title: <span class="hljs-string">"Test templating"</span>});
<span class="hljs-built_in">window</span>.add(buttonS);
<span class="hljs-built_in">window</span>.add(tableView);
<span class="hljs-built_in">window</span>.open({modal: <span class="hljs-literal">true</span>});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="October 14th 2011, 12:33:41 pm">October 14th 2011</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Ivan,</p>
<p>Thank you for your answer. I just tried your code, and you&#39;re right. The difference between iOS and Android is now acceptable. In my project I&#39;m using following library <a href="http:&#x2F;&#x2F;code.google.com&#x2F;p&#x2F;jsmart&#x2F;source&#x2F;browse&#x2F;smart.js">jSmart</a> for generating HTML pages. As I mentioned in my first post, execution on iOS is really excellent with 300ms, but takes 10 seconds on Android. Do you have any idea how I could improve it ?</p>
<p>I really appreciate your help.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 14th 2011, 1:29:21 pm">October 14th 2011</span>
											by <span class='authorname'>Gerome Bovet</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes. Don&#39;t use it. :D</p>
<p>Why would you use HTML anyway? Titanium can build native apps (well, almost native :) ) which run much faster than web pages.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 14th 2011, 1:38:25 pm">October 14th 2011</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It is not so simple. We currently have an application for Windows Mobile written in .Net using the principle of templates. The goal is to reuse all those templates inside our Titanium application.</p>
<p>So I have no choice, I have to use this library, that unfortunatelly is slow on Android.</p>
<p>By the way, do you have an idea why the library is running fast in a webview, even on Android ? An alternative would be to let it run inside the webview, but this is not feasible as there is no interaction possible between app.js and html doc inside the webview, isn&#39;t it ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 14th 2011, 1:51:45 pm">October 14th 2011</span>
											by <span class='authorname'>Gerome Bovet</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
