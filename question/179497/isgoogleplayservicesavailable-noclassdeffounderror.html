<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>isGooglePlayServicesAvailable NoClassDefFoundError » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>isGooglePlayServicesAvailable NoClassDefFoundError</h1>
		</header>
		<section>
			<p>I&#39;m building an app that previously worked on Android, showing maps on most devices. But now it crashes on this line:</p>
<p><code>var rc = require(&amp;#39;ti.map&amp;#39;).isGooglePlayServicesAvailable();</code></p>
<p>This gives the error below. I have tried a number of recommendations from this forum, without success. My setup is as follows:</p>
<ul>
<li>Ti Studio 3.4.1.201410281727 on Mac OS 10.10</li>
<li>Ti SDK from 3.3.0 to 3.4.1 gives the same result</li>
<li>I have updated all my Android SDKs to the latest versions</li>
<li>I have a valid Google Maps API Key (unchanged since the last version, which is on Google Play)</li>
<li>I don&#39;t know the difference between a development API key and production, I only have the one key, but this problem happens when installed via USB or from HockeyApp</li>
<li>the devices I&#39;m testing have the latest Google Play Services installed, and are all running Android 2.x or 3.x</li>
<li>ti.map is version 2.1.4 (the latest for Android)</li>
<li>I am creating the map view in code, not in the Alloy view:</li>
</ul>
<p><code>var mapview = Map.createView({mapType:Map.NORMAL_TYPE});</code></p>
<p>Any ideas?</p>
<pre><code class="hljs">
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   dalvikvm: Could not find method com.google.android.gms.common.GooglePlayServicesUtil.isGooglePlayServicesAvailable, referenced from method ti.map.MapModule.isGooglePlayServicesAvailable
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   dalvikvm: VFY: unable to resolve static method <span class="hljs-number">9651</span>: Lcom/google/android/gms/common/GooglePlayServicesUtil<span class="hljs-comment">;.isGooglePlayServicesAvailable (Landroid/content/Context;)I</span>
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] :   about to test Alloy.Globals.Map.isGooglePlayServicesAvailable = function isGooglePlayServicesAvailable<span class="hljs-list">()</span> { <span class="hljs-list">[<span class="hljs-keyword">native</span> code] }
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err: java.lang.NoClassDefFoundError: com.google.android.gms.common.GooglePlayServicesUtil
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at ti.map.MapModule.isGooglePlayServicesAvailable<span class="hljs-list">(<span class="hljs-keyword">MapModule.java:74</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.kroll.runtime.v8.V8Object.nativeFireEvent<span class="hljs-list">(<span class="hljs-keyword">Native</span> Method)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.kroll.runtime.v8.V8Object.fireEvent<span class="hljs-list">(<span class="hljs-keyword">V8Object.java:64</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.kroll.KrollProxy.doFireEvent<span class="hljs-list">(<span class="hljs-keyword">KrollProxy.java:884</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.kroll.KrollProxy.handleMessage<span class="hljs-list">(<span class="hljs-keyword">KrollProxy.java:1107</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage<span class="hljs-list">(<span class="hljs-keyword">TiViewProxy.java:347</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at android.os.Handler.dispatchMessage<span class="hljs-list">(<span class="hljs-keyword">Handler.java:95</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at android.os.Looper.loop<span class="hljs-list">(<span class="hljs-keyword">Looper.java:132</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">WARN</span>] :   W/System.err:     at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run<span class="hljs-list">(<span class="hljs-keyword">KrollRuntime.java:112</span>)</span>
<span class="hljs-list">[<span class="hljs-keyword">ERROR</span>] :  isGooglePlayServicesAvailable error: Error: com.google.android.gms.common.GooglePlayServicesUtil</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 7th 2014, 11:01:06 pm">December 7th 2014</span>
				by <span class='authorname'>Thomas Bisshop</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>google play</span></li>
					
						<li><span class='tagname'>maps</span></li>
					
						<li><span class='tagname'>ti.map</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hello Thomas,</p>
<p>Try to follow <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Modules.Map">this guide</a> and run this sample code available that link. And check again<br>GooglePlayServices  into the application manager on your device.</p>
<p>If you have any concern, then let me know.</p>
<p>Thanks.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 8th 2014, 3:31:57 am">December 8th 2014</span>
								by <span class='authorname'>Motiur Rahman</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Motiur,</p>
<p>thanks, but I&#39;ve already used that guide. This app was built in March 2014, using whatever version of Titanium was current at the time, and it worked and is on Google Play. I&#39;ve now built it in the latest Titanium, using only the changes to the code that were recommended in the 3.4 release notes, and I get that error.</p>
<p>As I said, the devices I&#39;m testing have the latest GooglePlayService installed.</p>
<p>I&#39;ve just built a brand new Alloy app, using that guide, and get the same result when installed via USB. Here is the code, with tiapp.xml set up with a Google Maps API key that matches the app id, and using the dev SHA-1 fingerprint:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-built_in">Map</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ti.map'</span>);

<span class="hljs-keyword">if</span> (Ti.Platform.osname === <span class="hljs-string">'android'</span>) {
    Ti.API.info(<span class="hljs-string">'about to test Map.isGooglePlayServicesAvailable = '</span> + <span class="hljs-built_in">Map</span>.isGooglePlayServicesAvailable);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> rc = <span class="hljs-built_in">Map</span>.isGooglePlayServicesAvailable();
        <span class="hljs-keyword">switch</span> (rc) {
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">Map</span>.SUCCESS:
                mapsAreAvailable = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">Map</span>.SERVICE_MISSING:
                LOCATION_WARNING_2 = <span class="hljs-string">'Google Play services is missing.'</span>;
                LOCATION_WARNING_4 = <span class="hljs-string">', or install Google Play services from the Google Play store.'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">Map</span>.SERVICE_VERSION_UPDATE_REQUIRED:
                LOCATION_WARNING_2 = <span class="hljs-string">'Google Play services is out of date.'</span>;
                LOCATION_WARNING_4 = <span class="hljs-string">', or update Google Play services.'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">Map</span>.SERVICE_DISABLED:
                LOCATION_WARNING_2 = <span class="hljs-string">'Google Play services is disabled.'</span>;
                LOCATION_WARNING_4 = <span class="hljs-string">', or enable Google Play services.'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-built_in">Map</span>.SERVICE_INVALID:
                LOCATION_WARNING_2 = <span class="hljs-string">'Google Play services cannot be authenticated.'</span>;
                LOCATION_WARNING_4 = <span class="hljs-string">', or reinstall Google Play services.'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-comment">// no message, fail</span>
                <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">var</span> mapview = <span class="hljs-built_in">Map</span>.createView({mapType:<span class="hljs-built_in">Map</span>.NORMAL_TYPE});
        $.<span class="hljs-built_in">window</span>.add(mapview);
    } <span class="hljs-keyword">catch</span>(e) {
        Ti.API.error(<span class="hljs-string">'isGooglePlayServicesAvailable error: '</span> + e);
    }
</code></pre><p>and here is the result:</p>
<pre><code class="hljs">[<span class="hljs-type">INFO</span>] :   dalvikvm: <span class="hljs-type">Could</span> <span class="hljs-keyword">not</span> find <span class="hljs-keyword">method</span> com.google.android.gms.common.<span class="hljs-type">GooglePlayServicesUtil</span>.isGooglePlayServicesAvailable, referenced <span class="hljs-keyword">from</span> <span class="hljs-keyword">method</span> ti.map.<span class="hljs-type">MapModule</span>.isGooglePlayServicesAvailable
[<span class="hljs-type">WARN</span>] :   dalvikvm: <span class="hljs-type">VFY</span>: unable to resolve <span class="hljs-keyword">static</span> <span class="hljs-keyword">method</span> <span class="hljs-number">9649</span>: <span class="hljs-type">Lcom</span>/google/android/gms/common/<span class="hljs-type">GooglePlayServicesUtil</span>;.isGooglePlayServicesAvailable (<span class="hljs-type">Landroid</span>/content/<span class="hljs-type">Context</span>;)I
[<span class="hljs-type">INFO</span>] :   about to test <span class="hljs-type">Map</span>.isGooglePlayServicesAvailable = function isGooglePlayServicesAvailable() { [native code] }
[<span class="hljs-type">WARN</span>] :   W/<span class="hljs-type">System</span>.err: java.lang.<span class="hljs-type">NoClassDefFoundError</span>: com.google.android.gms.common.<span class="hljs-type">GooglePlayServicesUtil</span>
[<span class="hljs-type">WARN</span>] :   W/<span class="hljs-type">System</span>.err:     at ti.map.<span class="hljs-type">MapModule</span>.isGooglePlayServicesAvailable(<span class="hljs-type">MapModule</span>.java:<span class="hljs-number">74</span>)
[<span class="hljs-type">WARN</span>] :   W/<span class="hljs-type">System</span>.err:     at org.appcelerator.kroll.runtime.v8.<span class="hljs-type">V8Runtime</span>.nativeRunModule(<span class="hljs-type">Native</span> <span class="hljs-type">Method</span>)
[<span class="hljs-type">WARN</span>] :   W/<span class="hljs-type">System</span>.err:     at org.appcelerator.kroll.runtime.v8.<span class="hljs-type">V8Runtime</span>.doRunModule(<span class="hljs-type">V8Runtime</span>.java:<span class="hljs-number">168</span>)
[<span class="hljs-type">WARN</span>] :   W/<span class="hljs-type">System</span>.err:     at org.appcelerator.kroll.<span class="hljs-type">KrollRuntime</span>.handleMessage(<span class="hljs-type">KrollRuntime</span>.java:<span class="hljs-number">299</span>)
[<span class="hljs-type">WARN</span>] :   W/<span class="hljs-type">System</span>.err:     at org.appcelerator.kroll.runtime.v8.<span class="hljs-type">V8Runtime</span>.handleMessage(<span class="hljs-type">V8Runtime</span>.java:<span class="hljs-number">194</span>)
[<span class="hljs-type">WARN</span>] :   W/<span class="hljs-type">System</span>.err:     at android.os.<span class="hljs-type">Handler</span>.dispatchMessage(<span class="hljs-type">Handler</span>.java:<span class="hljs-number">95</span>)
[<span class="hljs-type">WARN</span>] :   W/<span class="hljs-type">System</span>.err:     at android.os.<span class="hljs-type">Looper</span>.loop(<span class="hljs-type">Looper</span>.java:<span class="hljs-number">132</span>)
[<span class="hljs-type">WARN</span>] :   W/<span class="hljs-type">System</span>.err:     at org.appcelerator.kroll.<span class="hljs-type">KrollRuntime</span>$<span class="hljs-type">KrollRuntimeThread</span>.run(<span class="hljs-type">KrollRuntime</span>.java:<span class="hljs-number">112</span>)
[<span class="hljs-type">ERROR</span>] :  isGooglePlayServicesAvailable error: <span class="hljs-type">Error</span>: com.google.android.gms.common.<span class="hljs-type">GooglePlayServicesUtil</span>
</code></pre><p>If this is a configuration problem, then the message &quot;Could not find method com.google.android.gms.common.GooglePlayServicesUtil.isGooglePlayServicesAvailable&quot; is not helpful.</p>
<p>Is there a complete sample Alloy project that I can use as a comparison?</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 8th 2014, 4:43:29 am">December 8th 2014</span>
								by <span class='authorname'>Thomas Bisshop</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
