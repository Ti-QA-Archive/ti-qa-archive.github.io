<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Can&#39;t login to Facebook using the Add-on Module Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Can&#39;t login to Facebook using the Add-on Module</h1>
		</header>
		<section>
			<p>I&#39;m using Titanium SDK 3.1.0 and I can&#39;t login to Facebook in both iOS and Android. I get different error messages in both. </p>
<p>In Android, I&#39;m getting the following error in logcat when trying to log in to facebook using the Facebook Module from Titanium:</p>
<pre><code class="hljs">E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>: (main) [<span class="hljs-number">114509</span>,<span class="hljs-number">241940</span>] LoginDialogListener onFacebookError: null
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>: com<span class="hljs-class">.facebook</span><span class="hljs-class">.android</span><span class="hljs-class">.FacebookError</span>
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at com<span class="hljs-class">.facebook</span><span class="hljs-class">.android</span><span class="hljs-class">.Facebook</span><span class="hljs-class">.onSessionCallback</span>(Facebook<span class="hljs-class">.java</span>:<span class="hljs-number">433</span>)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at com<span class="hljs-class">.facebook</span><span class="hljs-class">.android</span><span class="hljs-class">.Facebook</span><span class="hljs-class">.access</span>$<span class="hljs-number">000</span>(Facebook<span class="hljs-class">.java</span>:<span class="hljs-number">97</span>)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at com<span class="hljs-class">.facebook</span><span class="hljs-class">.android</span><span class="hljs-class">.Facebook</span>$<span class="hljs-number">2</span>.<span class="hljs-function"><span class="hljs-title">call</span><span class="hljs-params">(Facebook.java:<span class="hljs-number">379</span>)</span></span>
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at com<span class="hljs-class">.facebook</span><span class="hljs-class">.Session</span>$<span class="hljs-number">3</span>$<span class="hljs-number">1</span>.<span class="hljs-function"><span class="hljs-title">run</span><span class="hljs-params">(Session.java:<span class="hljs-number">1239</span>)</span></span>
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at android<span class="hljs-class">.os</span><span class="hljs-class">.Handler</span><span class="hljs-class">.handleCallback</span>(Handler<span class="hljs-class">.java</span>:<span class="hljs-number">605</span>)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at android<span class="hljs-class">.os</span><span class="hljs-class">.Handler</span><span class="hljs-class">.dispatchMessage</span>(Handler<span class="hljs-class">.java</span>:<span class="hljs-number">92</span>)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at android<span class="hljs-class">.os</span><span class="hljs-class">.Looper</span><span class="hljs-class">.loop</span>(Looper<span class="hljs-class">.java</span>:<span class="hljs-number">137</span>)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at android<span class="hljs-class">.app</span><span class="hljs-class">.ActivityThread</span><span class="hljs-class">.main</span>(ActivityThread<span class="hljs-class">.java</span>:<span class="hljs-number">4424</span>)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at java<span class="hljs-class">.lang</span><span class="hljs-class">.reflect</span><span class="hljs-class">.Method</span><span class="hljs-class">.invokeNative</span>(Native Method)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at java<span class="hljs-class">.lang</span><span class="hljs-class">.reflect</span><span class="hljs-class">.Method</span><span class="hljs-class">.invoke</span>(Method<span class="hljs-class">.java</span>:<span class="hljs-number">511</span>)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.os</span><span class="hljs-class">.ZygoteInit</span><span class="hljs-variable">$MethodAndArgsCaller</span>.<span class="hljs-function"><span class="hljs-title">run</span><span class="hljs-params">(ZygoteInit.java:<span class="hljs-number">784</span>)</span></span>
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.os</span><span class="hljs-class">.ZygoteInit</span><span class="hljs-class">.main</span>(ZygoteInit<span class="hljs-class">.java</span>:<span class="hljs-number">551</span>)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>:     at dalvik<span class="hljs-class">.system</span><span class="hljs-class">.NativeStart</span><span class="hljs-class">.main</span>(Native Method)
E/<span class="hljs-function"><span class="hljs-title">FacebookModule</span><span class="hljs-params">(<span class="hljs-number">29188</span>)</span></span>: (main) [<span class="hljs-number">7</span>,<span class="hljs-number">241947</span>] onAuthFail: null
</code></pre><p>This is the code I&#39;m using to try to login into facebook:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> fb = <span class="hljs-built_in">require</span>(<span class="hljs-string">'facebook'</span>);
fb.appid = FACEBOOK_APP_ID;
fb.permissions = [<span class="hljs-string">'publish_stream'</span>];
fb.forceDialogAuth = <span class="hljs-literal">true</span>;
fb.addEventListener(<span class="hljs-string">'login'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">if</span> (e.success) {
        socialFacebook.image = imagesPath + <span class="hljs-string">"kinedu_0000_btn_FB.png"</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.error) {
        alert(<span class="hljs-string">'Error: '</span> + e.error);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.cancelled) {
        alert(<span class="hljs-string">"Canceled"</span>);
    }
}); 

<span class="hljs-keyword">var</span> socialFacebook = Ti.UI.createImageView({
    image:imagesPath + <span class="hljs-string">"kinedu_0000_btn_FB.png"</span>, 
    left:<span class="hljs-string">"5%"</span>, 
    bottom:<span class="hljs-number">10</span>, 
    right:Ti.Platform.displayCaps.platformWidth/<span class="hljs-number">2</span>    
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">socialFacebookTouchStart</span>(<span class="hljs-params"></span>)
</span>{        
    <span class="hljs-keyword">var</span> animateTouchStart = Ti.UI.createAnimation({
        bottom:<span class="hljs-number">9</span>, duration:<span class="hljs-number">200</span>
    });
    socialFacebook.animate(animateTouchStart);    
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">socialFacebookTouchEnd</span>(<span class="hljs-params"></span>)
</span>{            
    <span class="hljs-keyword">var</span> animateTouchEnd = Ti.UI.createAnimation({
        bottom:<span class="hljs-number">10</span>, duration:<span class="hljs-number">200</span>
    });
    socialFacebook.animate(animateTouchEnd);            
    animateTouchEnd.addEventListener(<span class="hljs-string">"complete"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
        <span class="hljs-keyword">if</span>(fb.loggedIn)
        {
            <span class="hljs-comment">//open facebook posting window    </span>
            alert(<span class="hljs-string">'logged in to facebook'</span>);
            <span class="hljs-keyword">var</span> openPostingOnFacebookMainView = Ti.UI.createAnimation({
                opacity:<span class="hljs-number">1</span>, 
                duration:<span class="hljs-number">250</span>
            });
            <span class="hljs-keyword">var</span> openPostingOnFacebookViewAnimation = Ti.UI.createAnimation({
                opacity:<span class="hljs-number">1</span>, 
                top:<span class="hljs-number">0</span>, 
                duration:<span class="hljs-number">250</span>
            });
            postingOnFacebookView.animate(openPostingOnFacebookViewAnimation);

            openPostingOnFacebookViewAnimation.addEventListener(<span class="hljs-string">"complete"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
                postingOnFacebookMainView.animate(openPostingOnFacebookMainView);
            });
        }
        <span class="hljs-keyword">else</span>
        {
            alert(<span class="hljs-string">'not logged in'</span>)
            fb.authorize();
        }
    });
}

socialFacebook.addEventListener(<span class="hljs-string">"touchstart"</span>, socialFacebookTouchStart);

socialFacebook.addEventListener(<span class="hljs-string">"touchend"</span>, socialFacebookTouchEnd);
</code></pre><p>I have a view that should trigger an event to login into facebook when it is touched, if the login is succesful then it should display another view. But the call to Facebook fails and I get that error message.</p>
<p>In iOS, the code is almost the same, except that the module is initiated differently to use the iOS 6 built-in Facebook login:</p>
<pre><code class="hljs">var fb = require('facebook')<span class="hljs-comment">;</span>
fb.appid = <span class="hljs-number">54806931192</span>0318<span class="hljs-comment">;</span>
fb.permissions = ['read_stream']<span class="hljs-comment">;</span>
fb.forceDialogAuth = false<span class="hljs-comment">;</span>
</code></pre><p>But with this, I get the following error: <code>User cancelled the login process.</code>. How could I had cancelled the process if the only thing I&#39;m doing is just to click on the view to log in?</p>
<p>This is my first time working with the Facebook Module, I&#39;m following the examples presented in the documentation and I have no idea why am I getting these errors on both Android and iOS. I will appreciate any help you can provide.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 8th 2013, 7:13:46 pm">August 8th 2013</span>
				by <span class='authorname'>Nenvo Software</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>facebook</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>module</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-267891">
				
						<section>
							<p>The problem in this one was the Facebook key. For some reason, the facebook key I was trying to use wasn&#39;t valid in my app, even though the same project could be built successfully in another machine.</p>
<p>After creating a new Facebook app with a new key, the problem was resolved.</p>
<p>I have no real clues as to why the initial key was invalid for the machine in which the deployment was trying to be performed.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 30th 2013, 7:45:50 pm">August 30th 2013</span>
								by <span class='authorname'>Nenvo Software</span><br>
								<a class="icon-bg icon-link" href="question/155807/cant-login-to-facebook-using-the-add-on-module#answer-267891" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
