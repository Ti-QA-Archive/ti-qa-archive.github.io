<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android:back on a singal window , between many views Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android:back on a singal window , between many views</h1>
		</header>
		<section>
			<p>hi everybdy, i m working on a project which consists of only one window but many views (say 5 ), those act like 5 different windows.Ive finalized my project nut atlast the &#39;android:back&#39; is apearing as the problem.I want to perform different functions by &#39;android:back&#39; as the views change on window, but &#39;android:back&#39; works only on window , so is there any solution to treat &#39;android:back&#39; differently with different views.<br>code is so wast so unable to post it.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 18th 2011, 9:13:35 am">November 18th 2011</span>
				by <span class='authorname'>Gagan Tiwari</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>event</span></li>
					
						<li><span class='tagname'>eventlistener</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
						<li><span class='tagname'>window</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>here is the very small part of refrence code::</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> view0 = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> view1 = <span class="hljs-number">1</span>;
<span class="hljs-keyword">var</span> view2 =<span class="hljs-number">2</span> ;
<span class="hljs-keyword">var</span> view3 = <span class="hljs-number">3</span>;
<span class="hljs-keyword">var</span> view4 = <span class="hljs-number">4</span>;
currentTabIndex = <span class="hljs-literal">null</span>;
<span class="hljs-comment">//changing the value of currentTabIndex when the view changes as (currentTabIndex=view0)</span>
mainWin.addEventListener(<span class="hljs-string">'android:back'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    performEvent();
    });
<span class="hljs-keyword">var</span> performEvent = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
<span class="hljs-keyword">switch</span>(currentTabIndex){
<span class="hljs-keyword">case</span> view0:
    mainWin.close();
    <span class="hljs-keyword">break</span>;
<span class="hljs-keyword">case</span> view1:
    view0.open();
    <span class="hljs-keyword">break</span>;
<span class="hljs-keyword">case</span> view2:
    view1.open();
    <span class="hljs-keyword">break</span>;
<span class="hljs-keyword">case</span> view3:
    view2.open();
    <span class="hljs-keyword">break</span>;
<span class="hljs-keyword">case</span> view4:
    view3.open();
    <span class="hljs-keyword">break</span>;
}
}
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="November 18th 2011, 9:23:12 am">November 18th 2011</span>
								by <span class='authorname'>Gagan Tiwari</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Nikunj, I have the same problem.On adding the sample code i am getting &quot;Uncaught Type Error:can not read property &#39;_currentView of undefined.&quot;<br>Thanks in advance!!</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 2nd 2012, 10:55:51 am">April 2nd 2012</span>
								by <span class='authorname'>Parul Gupta</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-223668">
				
						<section>
							<p>HI</p>
<p>Well i can suggest you to use the Custom Event.</p>
<p>Let me explain you this. As you able to get the event in the Window and not on the view so what you have to do is maintain the status of current view in the app data and when the back event is press the window will check that what is the current view  then you fire the event which is listened on the view which is open and perform the task in that function which you wants.</p>
<p>I am not sure is that make sense to you or not so adding one sample of code here too.<br>This code you add in your main window from where the view created.</p>
<pre><code class="hljs">win_main.addEventListener(<span class="hljs-string">'android:back'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    <span class="hljs-comment">//alert('Back called..');</span>
    <span class="hljs-keyword">if</span>(Ti.App.myData._currentView == <span class="hljs-string">"Window"</span>) {
        Ti.App.myData._currentView= <span class="hljs-string">''</span>;
        win_main.close();    
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(Ti.App.myData._currentView == <span class="hljs-string">"View1"</span>) {
        Ti.App.fireEvent(<span class="hljs-string">'backSelectForView1'</span>, { dummy:<span class="hljs-string">''</span> });
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(Ti.App.myData._currentView == <span class="hljs-string">"View2"</span>) {
        Ti.App.fireEvent(<span class="hljs-string">'backSelectForView2'</span>, { dummy:<span class="hljs-string">''</span> });
    }
});
</code></pre><p>Then now add the event listener for which the event is fired from the window on back button press.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> pre_view = Ti.<span class="hljs-keyword">App</span>.myData._currentview;
Ti.<span class="hljs-keyword">App</span>.myData._currentview = <span class="hljs-string">"view2"</span>;

function backfunction(){
    Ti.<span class="hljs-keyword">App</span>.myData._currentview = pre_view;
    view2.<span class="hljs-keyword">close</span>();
}

Ti.<span class="hljs-keyword">App</span>.addEventListener('backSelectForView2',backfunction);
</code></pre><p>I hope this will help you.</p>
<p>Regards</p>
<p>Nikunj</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 18th 2011, 10:19:12 am">November 18th 2011</span>
								by <span class='authorname'>Nikunj Sakhrelia</span><br>
								<a class="icon-bg icon-link" href="question/128403/androidback-on-a-singal-window--between-many-views.html#answer-223668" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Please check that while modifying the code i made mistake for Upper case &quot;V&quot; in many place so just keep that in mind.<br>Like in second part of code</p>
<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.App</span><span class="hljs-class">.myData</span><span class="hljs-class">._currentview</span>;
</code></pre><p> is actually</p>
<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.App</span><span class="hljs-class">.myData</span><span class="hljs-class">._currentView</span>;
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 18th 2011, 10:21:55 am">November 18th 2011</span>
											by <span class='authorname'>Nikunj Sakhrelia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>thanx for replying Nikunj, i hope this will work.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 18th 2011, 10:28:35 am">November 18th 2011</span>
											by <span class='authorname'>Gagan Tiwari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hi, did you able to solve this problem.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 19th 2011, 9:39:18 am">November 19th 2011</span>
											by <span class='authorname'>Nikunj Sakhrelia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>no , still in the same problem , android back executing whole code written in each view.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 23rd 2011, 6:01:02 am">November 23rd 2011</span>
											by <span class='authorname'>Gagan Tiwari</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Gagan</p>
<p>It will ou be good if you can able to share the full code if not here then you can send it on nikunj at mnpinfotech dot com</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 23rd 2011, 6:14:06 am">November 23rd 2011</span>
											by <span class='authorname'>Nikunj Sakhrelia</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
