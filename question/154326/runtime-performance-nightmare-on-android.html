<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Runtime performance nightmare on Android » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Runtime performance nightmare on Android</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I&#39;m having problems with runtime speed of my applications. It&#39;s not only tableviews with images from http, but simple screens with 3 or 4 views and two small icons that lasts for 2 or 3 seconds to open in a last generation quad-core Samsung S4.</p>
<p>What I do is &quot;require&quot; a file with the windows definition, then &quot;open()&quot; it. In that file, I&#39;ll declare all the views that needs to be associated with the main window and some functions that I&#39;ll use.</p>
<p>I don&#39;t know if it&#39;s the javascript parse speed that&#39;s too low or another problem.</p>
<p>Do we have a way that we can profile the execution of the app so we can see what&#39;s going on?</p>
<p>App is on the market if you want to test it&#39;s speed.</p>
<p>Thanks a lot,</p>
<p>Luis Miguel</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 1st 2013, 2:00:08 pm">July 1st 2013</span>
				by <span class='authorname'>Luis García</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>performance</span></li>
					
						<li><span class='tagname'>runtime</span></li>
					
						<li><span class='tagname'>speed</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-265190">
				
						<section>
							<p>The &#39;old-school&#39; method of profiling would be to add Ti.API.info() messages at strategic entry&#x2F;exit points to your methods and see which parts are taking longest.  The problem with trying to profile using Android tools is that it will only do so at the java level and will be hard to match up with your javascript code</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 1st 2013, 2:09:04 pm">July 1st 2013</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="../../question/154326/runtime-performance-nightmare-on-android.html#answer-265190" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Wow… that Ti.API.info() is pretty archaic.</p>
<p>Any other suggestion as preloading of .js or any other advanced technique? My app is barely unusable right now.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:09:07 pm">July 1st 2013</span>
											by <span class='authorname'>Luis García</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I would go with this first.  The thing you need to discover is where your bottlenecks occur, then you can tune those first. I&#39;m sorry but there is no magic that will do this for you. If your code is well organised then a Ti.API.info() at the start and end of each method logging the Date() will let you narrow down the problem</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:20:11 pm">July 1st 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just start by logging the most obvious methods - Loading from database, loading tableviews, network io….. etc</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:22:14 pm">July 1st 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>btw - what&#39;s the App called ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:23:16 pm">July 1st 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>It&#39;s called Voty, but the super-search engine of Google cannot find it if you search by its name, so you should locate it if you search for &quot;ktecho&quot; on the store.</p>
<p>No need to register to use it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:25:28 pm">July 1st 2013</span>
											by <span class='authorname'>Luis García</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Are you compiling with Rhino or V8 ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:29:06 pm">July 1st 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>oh, and do you open windows using the <code>url</code> property ?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:29:34 pm">July 1st 2013</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>V8. I&#39;m on latest Mobile SDK.</p>
<p>The issue is pointing towards file functions. For each icon&#x2F;image I&#39;m calling a function that looks if the file is localized in your language. If it&#39;s not, it returns the english version. I couldn&#39;t imagine that file accessing functions were going to be that slow…</p>
<p>Going to try another approach.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:30:57 pm">July 1st 2013</span>
											by <span class='authorname'>Luis García</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Nick, I open by:</p>
<p>var window= require(&#39;window.js&#39;);<br>var win = window();<br>win.open();</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:32:07 pm">July 1st 2013</span>
											by <span class='authorname'>Luis García</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265201">
				
						<section>
							<p>Hello,</p>
<p>Please use the documented approach:</p>
<p>– begin excerpt — </p>
<p>Internationalizing image and file resources<br>Titanium does not provide built-in functions for internationalizing image and file resources. But you can easily accomplish this yourself. There are a couple of techniques you can employ:</p>
<p>Put the path and file name of each resource in the strings.xml file, then use that string in the image property, like this:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> img = Ti.UI.createImageView({
    image: L(<span class="hljs-string">'my_image'</span>)
});
</code></pre><p>Put your images into a set of folders that match the 2-letter ISO codes, and include that directory in the path with Ti.Locale.currentCountry, like this:</p>
<pre><code class="hljs"><span class="hljs-built_in">var</span> img = Ti<span class="hljs-built_in">.</span>UI<span class="hljs-built_in">.</span>createImageView({
    image: <span class="hljs-string">'images/'</span>+Ti<span class="hljs-built_in">.</span><span class="hljs-built_in">Locale</span><span class="hljs-built_in">.</span>currentCountry+<span class="hljs-string">'/my_image.png'</span>
});
</code></pre><p>— end excerpt — </p>
<p>The article <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Internationalization#Internationalization-Internationalizingimageandfileresources">here</a>.</p>
<p>Best,</p>
<p>Mauro</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 1st 2013, 10:04:12 pm">July 1st 2013</span>
								by <span class='authorname'>Mauro Parra</span><br>
								<a class="icon-bg icon-link" href="../../question/154326/runtime-performance-nightmare-on-android.html#answer-265201" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Mauro,</p>
<p>I was not using localization functions because my system was a little more flexible: if I was asking for a spanish image, it would check if that image exists. If the localized image does not exist, it would use the default (english) one.</p>
<p>I was even using a theme system the same way: if you choose the &quot;black&quot; or &quot;color&quot; theme, images using that theme are going to be used, but if they don&#39;t exist, default theme is used.</p>
<p>That means two disk checks per image. It seems that&#39;s not too much on a computer, but it&#39;s too much on a mobile phone, at least with Titanium.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2013, 5:43:35 am">July 2nd 2013</span>
											by <span class='authorname'>Luis García</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265210">
				
						<section>
							<p>You may have more luck if you move all your image &#x2F; filesystem detection into a routine at startup and hold the rules in some form of global object</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 2nd 2013, 5:48:36 am">July 2nd 2013</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="../../question/154326/runtime-performance-nightmare-on-android.html#answer-265210" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>That&#39;s what I&#39;m trying to do, but I&#39;m passing on this for now because I need to continue development. By now I don&#39;t have more than one theme, so I&#39;m holding back a little.</p>
<p>When I found the time, I&#39;ll get a recursive directory listing and I&#39;ll iterate over that object.</p>
<p>Thanks a lot.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2013, 5:51:02 am">July 2nd 2013</span>
											by <span class='authorname'>Luis García</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
