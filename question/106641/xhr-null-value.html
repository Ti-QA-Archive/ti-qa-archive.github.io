<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>xhr null value  » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>xhr null value </h1>
		</header>
		<section>
			<p>I am getting null value for<br><code>xhr.open(&amp;#39;POST&amp;#39;,&amp;#39;http:&amp;#x2F;&amp;#x2F;www.inetwebdesign.com.au&amp;#x2F;email.php&amp;#39;);</code></p>
<p>and </p>
<p><code>xhr.send(data);</code></p>
<p>and i dont know why or how to fix it </p>
<p><strong>my first code was </strong></p>
<pre><code class="hljs">//
// // RSVP response via HTTP POST to php script on  server 
//
var xhr = Titanium.Network.createHTTPClient();

xhr.open('POST','http://www.inetwebdesign.com.au/email.php');




<span class="hljs-component">xhr.onload = function(){
//    Titanium<span class="hljs-string">.API.info('Response_JASON:</span> ' + JSON<span class="hljs-string">.stringify(data))</span>;
    Ti<span class="hljs-string">.API.info('in</span> utf-8 onload for POST'); 

}</span>;
<span class="hljs-component">xhr.onerror = function(){
    Ti<span class="hljs-string">.API.info('in</span> utf-8 error for POST');
}</span>;




//declare objects in js
<span class="hljs-component">var data = {name : nameTxt<span class="hljs-string">.value</span>,
            email : emailTxt<span class="hljs-string">.value</span>,
            subject : subjectTxt<span class="hljs-string">.value</span>,
            message : messageTxt<span class="hljs-string">.value}</span>;




Titanium<span class="hljs-string">.API.info(data)</span>;


var json = JSON<span class="hljs-string">.stringify(data)</span>;


Titanium<span class="hljs-string">.API.info(data)</span>;

//xhr<span class="hljs-string">.open("POST"</span>,"http://www<span class="hljs-string">.inetwebdesign.com.au/email.php")</span>;

    xhr<span class="hljs-string">.send(data)</span>;

Titanium<span class="hljs-string">.API.info(</span> xhr<span class="hljs-string">.open())</span>;
Titanium<span class="hljs-string">.API.info('xhr..send')</span>;
Titanium<span class="hljs-string">.API.info(</span> xhr<span class="hljs-string">.send())</span>;
Titanium<span class="hljs-string">.API.info('json')</span>;
Titanium<span class="hljs-string">.API.info(</span> json);

}</span>);
</code></pre><p>which gave me </p>
<pre><code class="hljs">[<span class="hljs-preprocessor">INFO</span>] {
<span class="hljs-label">email</span> = Sss<span class="hljs-comment">;</span>
<span class="hljs-label">message</span> = test<span class="hljs-comment">;</span>
<span class="hljs-label">name</span> = Ss<span class="hljs-comment">;</span>
<span class="hljs-keyword">subject </span>= test<span class="hljs-comment">;</span>
}
[<span class="hljs-preprocessor">INFO</span>] &lt;null&gt;
[<span class="hljs-preprocessor">INFO</span>] xhr..send
[<span class="hljs-preprocessor">INFO</span>] &lt;null&gt;
[<span class="hljs-preprocessor">INFO</span>] json
[<span class="hljs-preprocessor">INFO</span>] {<span class="hljs-string">"name"</span>:<span class="hljs-string">"Ss"</span>,<span class="hljs-string">"email"</span>:<span class="hljs-string">"Sss"</span>,<span class="hljs-string">"subject"</span>:<span class="hljs-string">"test"</span>,<span class="hljs-string">"message"</span>:<span class="hljs-string">"test"</span>}
[<span class="hljs-preprocessor">INFO</span>] in utf-<span class="hljs-number">8</span> error for POST
</code></pre><p>and i got null which was why my code wouldnt send to …email.php.</p>
<p>so I had done this test </p>
<pre><code class="hljs">
<span class="hljs-comment">//declare objects in js</span>
<span class="hljs-keyword">var</span> data = {name : nameTxt.<span class="hljs-keyword">value</span>,
            email : emailTxt.<span class="hljs-keyword">value</span>,
            subject : subjectTxt.<span class="hljs-keyword">value</span>,
            message : messageTxt.<span class="hljs-keyword">value</span>};


<span class="hljs-keyword">var</span> xhr1 = Titanium.Network.createHTTPClient();



xhr1.onload = function(){
<span class="hljs-comment">//    Titanium.API.info('Response_JASON: ' + JSON.stringify(data));</span>
    Ti.API.info(<span class="hljs-string">'in utf-8 onload for POST'</span>); 
    Titanium.API.info(<span class="hljs-string">"Loaded! Status : "</span> + <span class="hljs-keyword">this</span>.status);




<span class="hljs-keyword">var</span> contentType = <span class="hljs-keyword">this</span>.getResponseHeader(<span class="hljs-string">'Content-Type'</span>);
Titanium.API.info(<span class="hljs-string">"Content-Type (from this): "</span> + contentType);

<span class="hljs-keyword">var</span> xcontentType = xhr1.getResponseHeader(<span class="hljs-string">'Content-Type'</span>);
Titanium.API.info(<span class="hljs-string">"Content-Type (from xhr1): "</span> + xcontentType);

};

xhr1.open(<span class="hljs-string">'POST'</span>,<span class="hljs-string">'http://www.inetwebdesign.com.au/email.php'</span>);
xhr1.send(data);
</code></pre><p>which gave me </p>
<pre><code class="hljs"><span class="hljs-list">[<span class="hljs-keyword">INFO</span>] in utf-8 onload for POST
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] Loaded! Status : <span class="hljs-number">200</span>
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] Content-Type <span class="hljs-list">(<span class="hljs-keyword">from</span> this)</span>: text/html
<span class="hljs-list">[<span class="hljs-keyword">INFO</span>] Content-Type <span class="hljs-list">(<span class="hljs-keyword">from</span> xhr1)</span>: text/html</span></span></span></span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 30th 2011, 8:11:34 am">January 30th 2011</span>
				by <span class='authorname'>Carah Dose</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>null</span></li>
					
						<li><span class='tagname'>value</span></li>
					
						<li><span class='tagname'>xhr</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-188131">
				
						<section>
							<p>Not really sure what you are trying to accomplish here. But your second code is the way to go. Every thing seems to be correct from those results as well. Where is the problem? Is the data not reaching your email.php? The reason for null in your first example is because what is returned when you call xhr.open() is an object, not a string of information. This is why the second method is the correct way of doing this. If you are expecting&#x2F;wanting to get something back from you server (email.php) then in the onload event function you need to grab one of the following, depending on your situtation:</p>
<p>this.responseData<br>this.responseText<br>this.responseXML</p>
<p>Hopefully this helps, if not maybe you could expand on where you problem is.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 30th 2011, 8:32:01 am">January 30th 2011</span>
								by <span class='authorname'>Andrew Scofield</span><br>
								<a class="icon-bg icon-link" href="question/106641/xhr-null-value.html#answer-188131" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks Andrew for that, makes sense now.<br>My aim is to get a form such as name, email, subject and message in a text field to send to email.php (attached below) which will send off to my email. the problem is that the data from the phone wont make it to email.php as feed back is not shown in email.php nor is it sending to my email as i dont think it even gets to email.php. So im assuming ill grab &quot;this.responseData &quot; is that correct? im not sure what i need to do with it. what do i need to add to this?</p>
<pre><code class="hljs"><span class="hljs-comment">// validation vars</span>
<span class="hljs-variable">$errors</span>=<span class="hljs-keyword">array</span>();
<span class="hljs-variable">$rules</span>=<span class="hljs-keyword">array</span>();
<span class="hljs-variable">$fields</span>=<span class="hljs-keyword">array</span>();

<span class="hljs-comment">// process the form</span>
<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$_POST</span>)) {

    <span class="hljs-comment">// validation rules</span>
    <span class="hljs-variable">$rules</span>[] = <span class="hljs-string">"required,name,Please enter your name."</span>;
    <span class="hljs-variable">$rules</span>[] = <span class="hljs-string">"required,email,Please enter an email address."</span>;
    <span class="hljs-variable">$rules</span>[] = <span class="hljs-string">"valid_email,email,Please enter a valid email address."</span>;
    <span class="hljs-variable">$rules</span>[] = <span class="hljs-string">"required,name,Please enter a subject."</span>;
    <span class="hljs-variable">$rules</span>[] = <span class="hljs-string">"required,name,Please enter a message."</span>;

    <span class="hljs-comment">// check for invalid post fields</span>
    <span class="hljs-variable">$errors</span>=validateFields(<span class="hljs-variable">$_POST</span>, <span class="hljs-variable">$rules</span>);

    <span class="hljs-comment">// send the mail</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$errors</span>)) {
        <span class="hljs-comment">// format the email</span>
        <span class="hljs-variable">$to</span>=<span class="hljs-string">'carahdose@gmail.com'</span>;
        <span class="hljs-variable">$subject</span>=<span class="hljs-string">'iPhone App: '</span>.<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'subject'</span>];

        <span class="hljs-variable">$headers</span> = <span class="hljs-string">"MIME-Version: 1.0\r\n"</span>;
        <span class="hljs-variable">$headers</span>.= <span class="hljs-string">"Content-type: text/html; charset=iso-8859-1\r\n"</span>;
        <span class="hljs-variable">$headers</span>.= <span class="hljs-string">'From: '</span>.<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'name'</span>].<span class="hljs-string">' &lt;'</span>.<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'email'</span>].<span class="hljs-string">'&gt;'</span>.<span class="hljs-string">"\r\n"</span>;

        <span class="hljs-keyword">if</span>(mail(<span class="hljs-variable">$to</span>, <span class="hljs-variable">$subject</span>, <span class="hljs-variable">$_POST</span>[<span class="hljs-string">'message'</span>], <span class="hljs-variable">$headers</span>))
            <span class="hljs-keyword">echo</span> <span class="hljs-string">'Mail sent successfully'</span>;
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">echo</span> <span class="hljs-string">'Mail failed to be sent'</span>;
    } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">echo</span> <span class="hljs-string">'The following errors were found&lt;br /&gt;'</span>.print_r(<span class="hljs-variable">$errors</span>);
      }

} <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'No data received'</span>;
}

<span class="hljs-preprocessor">?&gt;</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 30th 2011, 8:47:00 am">January 30th 2011</span>
											by <span class='authorname'>Carah Dose</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-188151">
				
						<section>
							<p>[deleted by poster]</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 30th 2011, 10:12:00 am">January 30th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="question/106641/xhr-null-value.html#answer-188151" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
