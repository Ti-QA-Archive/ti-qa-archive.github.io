<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Auto-Renewing Subscription &amp; Verifying » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Auto-Renewing Subscription &amp; Verifying</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I’m trying to setup an auto-renewing subscription on iOS with Titanium 1.7.2, using Storekit 1.2.</p>
<p>I’m currently using the Storekit example code, and every thing works. However my question is: Do you need to get the user to verify their account every time they open the app? As in needing to input their password. Or is there another way to track whether the user is using a valid confirmed subscription?</p>
<p>It seems very inconvenient to force the user to input their password every time they load the app when they’re paying for a monthly subscription.</p>
<p>Thanks,<br>Nick</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 4th 2011, 11:13:47 am">October 4th 2011</span>
				by <span class='authorname'>Nicholas Thibault</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>auto-renewing</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>storekit</span></li>
					
						<li><span class='tagname'>subscription</span></li>
					
						<li><span class='tagname'>verify</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-220359">
				
						<section>
							<p>Can you post an example of your code?  I&#39;m trying to get it to work, and it finds my product (I&#39;m debugging on the device in xcode), and from what I&#39;ve copied from the example, it seems to be failing on &quot;var products=e.products&quot;.</p>
<p>Here is my code, if you have any insight I&#39;d appreciate it..</p>
<pre><code class="hljs">for <span class="hljs-list">(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; e.products.length; i++) {</span>
                         Ti.API.info<span class="hljs-list">(<span class="hljs-quoted">'product</span> title: ' + e.products[i].title +<span class="hljs-quoted">'&lt;br&gt;</span>')</span><span class="hljs-comment">;</span>
                           Ti.API.info<span class="hljs-list">(<span class="hljs-quoted">'product</span> identifier: ' +e.products[i].identifier + <span class="hljs-quoted">'&lt;br&gt;</span>')</span><span class="hljs-comment">;</span>
                     }
                   var product=e.products<span class="hljs-comment">;</span>
                   Ti.Storekit.purchase<span class="hljs-list">(<span class="hljs-keyword">product</span>, function<span class="hljs-list">(<span class="hljs-keyword">r</span>)</span> {

                    if <span class="hljs-list">(<span class="hljs-keyword">r</span>.state == Ti.Storekit.FAILED)</span> {
                            Ti.UI.createAlertDialog<span class="hljs-list">({
                                title: <span class="hljs-quoted">'Error</span>',
                                message: <span class="hljs-quoted">'Purchasing</span> product: ' + r.message
                            })</span>.show<span class="hljs-list">()</span><span class="hljs-comment">;</span>
                        }
                        else{
                            Ti.App.fireEvent<span class="hljs-list">(<span class="hljs-quoted">'registerAccount</span>')</span><span class="hljs-comment">; </span>
                        }</span></span>
</code></pre><p>XCODE debugging</p>
<pre><code class="hljs">[INFO] Found products: [object TiStorekitProduct]
[INFO] product title: Travel Map Upgrade&lt;br&gt;
[INFO] product identifier: com.quickiphoneapps.travelmapiphone1022&lt;br&gt;
<span class="hljs-number">2011</span>-<span class="hljs-number">10</span>-<span class="hljs-number">05</span> <span class="hljs-number">21</span>:<span class="hljs-number">05</span>:<span class="hljs-number">50.696</span> Travel Map[<span class="hljs-number">3250</span>:<span class="hljs-number">7</span>c03] -[__NSArrayM product]: unrecognized selector sent to instance <span class="hljs-number">0x6eacd0</span>
[WARN] Exception in event callback. {
    line = <span class="hljs-number">18</span>;
    message = <span class="hljs-string">"-[__NSArrayM product]: unrecognized selector sent to instance 0x6eacd0"</span>;
    sourceId = <span class="hljs-number">91305040</span>;
    sourceURL = <span class="hljs-string">"file://localhost/var/mobile/Applications/BFD9D9FE-648E-4E6B-82B0-ABEDB4C2A307/Travel%20Map.app/account.js"</span>;
</code></pre><p>It was suggested I change var product=e.products to e.products[i], or [0], but neither of those work either.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 6th 2011, 11:32:49 am">October 6th 2011</span>
								by <span class='authorname'>Josh Lewis</span><br>
								<a class="icon-bg icon-link" href="question/126392/auto-renewing-subscription--verifying#answer-220359" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
