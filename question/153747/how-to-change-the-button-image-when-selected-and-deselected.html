<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>How to change the button image when selected and deselected » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>How to change the button image when selected and deselected</h1>
		</header>
		<section>
			<p>So basically I have buttons that have the same image when the window is accessed. When one of the buttons is clicked, the button changes image. What I would like to happen is once a different button is clicked, the previous button that is clicked should go back to its original image. I tried things like backgroundDisabledImage, but it didnt work Here is the code I have:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> wednesdayButton = Ti.UI.createButton({
    title: <span class="hljs-string">'Weds'</span>,
    width: <span class="hljs-number">45</span>,
    bottom: <span class="hljs-number">160</span>,
    left:<span class="hljs-number">90</span>,
    font:{fontSize:<span class="hljs-number">10</span>,fontWeight:<span class="hljs-string">'bold'</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    backgroundImage:<span class="hljs-string">'/images/bgDay.png'</span>,
});

<span class="hljs-keyword">self</span>.add(wednesdayButton); 

wednesdayButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
     specialsLabel.text= data.wed_special;
     wednesdayButton.backgroundImage=<span class="hljs-string">'/images/selectedDay.png'</span>;

 });



<span class="hljs-keyword">var</span> thursdayButton = Ti.UI.createButton({
    title: <span class="hljs-string">'Thurs'</span>,
    width: <span class="hljs-number">45</span>,
    bottom: <span class="hljs-number">160</span>,
    left:<span class="hljs-number">135</span>,
    font:{fontSize:<span class="hljs-number">10</span>,fontWeight:<span class="hljs-string">'bold'</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    backgroundImage:<span class="hljs-string">'/images/bgDay.png'</span>,

});

<span class="hljs-keyword">self</span>.add(thursdayButton); 


thursdayButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
     specialsLabel.text= data.thu_special;
     thursdayButton.backgroundImage=<span class="hljs-string">'/images/selectedDay.png'</span>;

 });
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 17th 2013, 1:29:54 pm">June 17th 2013</span>
				by <span class='authorname'>Connor Phillips</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>button</span></li>
					
						<li><span class='tagname'>eventlistener</span></li>
					
						<li><span class='tagname'>image</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I didn&#39;t get what you are trying to do.. Can you a little clarify your requirement? Or may be wait for someone else&#39;s response.</p>
</div>
							<div class="author">
								&mdash; commented <span title="June 17th 2013, 2:03:13 pm">June 17th 2013</span>
								by <span class='authorname'>Nabeel  Munawar</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-264405">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>This is one way to achieve your goal;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> lastbutton = <span class="hljs-literal">undefined</span>;
<span class="hljs-keyword">var</span> wednesdayButton = Ti.UI.createButton({
    title: <span class="hljs-string">'Weds'</span>,
    width: <span class="hljs-number">45</span>,
    bottom: <span class="hljs-number">160</span>,
    left:<span class="hljs-number">90</span>,
    font:{fontSize:<span class="hljs-number">10</span>,fontWeight:<span class="hljs-string">'bold'</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    backgroundImage:<span class="hljs-string">'/images/bgDay.png'</span>,
}); 
self.add(wednesdayButton); 
wednesdayButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    specialsLabel.text= data.wed_special;
    wednesdayButton.backgroundImage=<span class="hljs-string">'/images/selectedDay.png'</span>;
    <span class="hljs-keyword">if</span> (lastbutton !== <span class="hljs-literal">undefined</span>) {
        lastbutton.backgroundImage=<span class="hljs-string">'/images/bgDay.png'</span>;
        lastbutton = wednesdayButton;
    }
});

<span class="hljs-keyword">var</span> thursdayButton = Ti.UI.createButton({
    title: <span class="hljs-string">'Thurs'</span>,
    width: <span class="hljs-number">45</span>,
    bottom: <span class="hljs-number">160</span>,
    left:<span class="hljs-number">135</span>,
    font:{fontSize:<span class="hljs-number">10</span>,fontWeight:<span class="hljs-string">'bold'</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    backgroundImage:<span class="hljs-string">'/images/bgDay.png'</span>, 
});
self.add(thursdayButton); 
thursdayButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    specialsLabel.text = data.thu_special;
    thursdayButton.backgroundImage=<span class="hljs-string">'/images/selectedDay.png'</span>;
    <span class="hljs-keyword">if</span> (lastbutton !== <span class="hljs-literal">undefined</span>) {
        lastbutton.backgroundImage=<span class="hljs-string">'/images/bgDay.png'</span>;
        lastbutton = thursdayButton;
    }
});
</code></pre><p>The idea here is you cache the last button pressed and that way you just update that reference each time;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 17th 2013, 1:59:02 pm">June 17th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/153747/how-to-change-the-button-image-when-selected-and-deselected#answer-264405" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This is a much more efficient method, it uses a single function to handle the toggle state by using the returned event object to reference the source button.  This way you do not need to repeat the code for each button.</p>
<p>I have also cached the common values for the button states and the font objects. The button now stores the special information inside the object so it can be read in the single even t handler.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> fonts = {
    button: {
        fontSize: <span class="hljs-number">10</span>,
        fontWeight: <span class="hljs-string">'bold'</span>,
        fontFamily: <span class="hljs-string">'Helvetica Neue'</span>
    }
};
<span class="hljs-keyword">var</span> buttons = {
    selected: <span class="hljs-string">'/images/selectedDay.png'</span>,
    unselected: <span class="hljs-string">'/images/bgDay.png'</span>
};
<span class="hljs-keyword">var</span> lastbutton = <span class="hljs-literal">undefined</span>;
<span class="hljs-keyword">var</span> toggle = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    specialsLabel.setText(e.source.special);
    e.source.setBackgroundImage(buttons.selected);
    <span class="hljs-keyword">if</span> (lastbutton !== <span class="hljs-literal">undefined</span>) {
        lastbutton.setBackgroundImage(buttons.unselected);
        lastbutton = e.source;
    }
};
<span class="hljs-comment">// button start</span>
<span class="hljs-keyword">var</span> wednesdayButton = Ti.UI.createButton({
    backgroundImage: buttons.unselected,
    bottom: <span class="hljs-number">160</span>,
    left: <span class="hljs-number">90</span>,
    font: fonts.button,
    special: data.wed_special,
    title: <span class="hljs-string">'Weds'</span>,
    width: <span class="hljs-number">45</span>
}); 
self.add(wednesdayButton); 
wednesdayButton.addEventListener(<span class="hljs-string">'click'</span>, toggle);
<span class="hljs-comment">// button end</span>
<span class="hljs-keyword">var</span> thursdayButton = Ti.UI.createButton({
    backgroundImage: buttons.unselected,
    bottom: <span class="hljs-number">160</span>,
    left: <span class="hljs-number">135</span>,
    font: fonts.button,
    special: data.thu_special,
    title: <span class="hljs-string">'Thurs'</span>,
    width: <span class="hljs-number">45</span>
});
self.add(thursdayButton); 
thursdayButton.addEventListener(<span class="hljs-string">'click'</span>, toggle);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="June 17th 2013, 2:08:23 pm">June 17th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I attempted both ways that you have mentioned, but I am still getting the image of the button selected, even when I have clicked a different button. It does not go back to the original image.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 18th 2013, 2:54:08 pm">June 18th 2013</span>
											by <span class='authorname'>Connor Phillips</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry about that, stupid error on my part, use the second example - much more efficient - but make a small line position swap.</p>
<p>This;</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (lastbutton !== <span class="hljs-literal">undefined</span>) {
    lastbutton.setBackgroundImage(buttons.unselected);
    lastbutton = e.source; <span class="hljs-comment">// move</span>
}
</code></pre><p>Becomes;</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span> (lastbutton !== <span class="hljs-literal">undefined</span>) {
    lastbutton.setBackgroundImage(buttons.unselected);
}
lastbutton = e.source; <span class="hljs-comment">// here</span>
</code></pre><p>I created a latch to say &quot;only make the change if the latched reference has been set&quot;, the problem was I only set the latched version inside that if statement - thus it never ran!</p>
<p>Does not - just tested it with a few days worth.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 18th 2013, 3:14:28 pm">June 18th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That was the fix! Thanks Malcolm!</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 18th 2013, 3:39:32 pm">June 18th 2013</span>
											by <span class='authorname'>Connor Phillips</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
