<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Use DB created programmatically » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Use DB created programmatically</h1>
		</header>
		<section>
			<p>Hi,<br> Am using Sqlite DB in my ipad app in which i need to create and use a db programmatically. The database is created(using <code>var myDB = Ti.Database.open(&amp;#39;myDB&amp;#39;);</code>) and then created a table myTable and i even inserted some records in the same js. </p>
<p>The problem is when i tried to install the db(<code>var myDB = Ti.Database.install(&amp;#39;myDB&amp;#39;, &amp;#39;myTable&amp;#39;);</code>) in another .js file, its throwing the following error </p>
<p><strong>[ERROR] Could not retrieve attributes. Error Domain=NSCocoaErrorDomain Code=260 &quot;The operation couldn’t be completed. (Cocoa error 260.)&quot; UserInfo=0x9b19000 {NSFilePath=&#x2F;Users&#x2F;Maheish&#x2F;Library&#x2F;Application Support&#x2F;iPhone Simulator&#x2F;5.0&#x2F;Applications&#x2F;BE3A2C2C-75DA-4331-87BE-3DFF73376613&#x2F;myApp.app&#x2F;myDB, NSUnderlyingError=0x9b11600 &quot;The operation couldn’t be completed. No such file or directory&quot;}  in -[TiDatabaseProxy install:name:] (TiDatabaseProxy.m:126)</strong>  </p>
<p>How should i install the db in another .js file?<br>When an existing db pasted in Resources folder is being used, we could navigate to the particular folder and install. But what path is to be given in install when i have to use a db created in my program? Thanks in advance :)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 28th 2012, 5:18:24 am">June 28th 2012</span>
				by <span class='authorname'>Maheish sundhar</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>path</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-242101">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>hi,</p>
<p>when you create db programmatically then no need to install db because it is already installed. so just open your database as you are doing right now…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 28th 2012, 5:28:49 am">June 28th 2012</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/138936/use-db-created-programmatically.html#answer-242101" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>When i specify as open, i think the db is newly created and the created db is not taken. I tried to fetch the count of the records in the table but error is thrown for this statement.(the query statement is correct). This is how i open the db in other js files : </p>
<p><code>var myDB = Ti.Database.open(&amp;#39;myDB&amp;#39;,&amp;#39;myTable&amp;#39;);</code></p>
</p>
										<div class="author">
											&mdash; commented <span title="June 28th 2012, 5:50:27 am">June 28th 2012</span>
											by <span class='authorname'>Maheish sundhar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>just use this statement to open your database connection</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> myDB</span> = Ti.Database.<span class="hljs-keyword">open</span>('myDB');
</code></pre><p>then</p>
<pre><code class="hljs"><span class="hljs-built_in">var</span> <span class="hljs-keyword">rows</span> = myDB<span class="hljs-built_in">.</span>execute(<span class="hljs-string">'select * from &lt;tablename&gt;'</span>);
<span class="hljs-comment">//it returns records</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="June 28th 2012, 6:48:11 am">June 28th 2012</span>
											by <span class='authorname'>Mitul Bhalia</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Got it..Thanks :)….. If we are creating a db programmatically, then there is no need to use &#39;install&#39; anywhere. As Bhalia and Ward have said, we are using &#39;open&#39; once, the database if present will be taken or a new db will be created.  So if we need to create and use a db, <code>var myDB=Ti.Database.open(&amp;#39;myDB&amp;#39;);</code> is just enough. The problem was that, i was trying to specify the table name in open method.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 28th 2012, 6:49:24 am">June 28th 2012</span>
											by <span class='authorname'>Maheish sundhar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242103">
				
						<section>
							<p>Actually you don&#39;t install it ?… You just use it.</p>
<p>So in the other file you would do the open and close and processing in-between.</p>
<p>Once you have created the DB then it is their for use.</p>
<p>Hope this help</p>
<p>T.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 28th 2012, 5:30:18 am">June 28th 2012</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/138936/use-db-created-programmatically.html#answer-242103" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>When i specify as open, i think the db is newly created and the created db is not taken. I tried to fetch the count of the records in the table but error is thrown for this statement.(the query statement is correct). This is how i open the db in other js files :</p>
<p> <code>var myDB = Ti.Database.open(&amp;#39;myDB&amp;#39;,&amp;#39;myTable&amp;#39;);</code></p>
</p>
										<div class="author">
											&mdash; commented <span title="June 28th 2012, 5:50:13 am">June 28th 2012</span>
											by <span class='authorname'>Maheish sundhar</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank you.. got it…</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 28th 2012, 6:45:07 am">June 28th 2012</span>
											by <span class='authorname'>Maheish sundhar</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-249785">
				
						<section>
							<p>Wait a second… none of this is working as planned for me. I don&#39;t want to install a database. I am creating a simple one table database. So in my app.js I have this:</p>
<pre><code class="hljs">var db = Ti.Database.open('inbox.db','KSLI');
db.execute('<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> inbox (inboxid <span class="hljs-built_in">INTEGER</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">ASC</span>, title <span class="hljs-built_in">TEXT</span>, description <span class="hljs-built_in">TEXT</span>, <span class="hljs-keyword">link</span> <span class="hljs-built_in">TEXT</span>, <span class="hljs-built_in">date</span> <span class="hljs-built_in">TEXT</span>, viewed <span class="hljs-built_in">INTEGER</span>, searchid <span class="hljs-built_in">INTEGER</span>)<span class="hljs-string">');
db.close();</span></span>
</code></pre><p>First of all, I don&#39;t see why I need the first argument. The docs indicate you only need the reference string and if a db doesn&#39;t exist with that reference, it creates one, but if I don&#39;t have both arguments I get an error.</p>
<p>Now, on to step two. If I close the db here and try to open it elsewhere, with two arguments or just the second one by itself, and just do an insert statement, my app says the table doesn&#39;t exist. With both arguments I get &quot;No such column: undefined.&quot; With just the one argument on pages other than app.js I get table not found.</p>
<p>If someone could please clarify this database confusion. It seems like it should be easier to do this.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 23rd 2012, 2:44:17 am">October 23rd 2012</span>
								by <span class='authorname'>Lee Bartelme</span><br>
								<a class="icon-bg icon-link" href="question/138936/use-db-created-programmatically.html#answer-249785" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>If I don&#39;t close the db connection I can insert on the other pages. I was keeping it open at first for testing, but when I close it like I am supposed to to conserve resources, nada.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 23rd 2012, 2:46:23 am">October 23rd 2012</span>
											by <span class='authorname'>Lee Bartelme</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
