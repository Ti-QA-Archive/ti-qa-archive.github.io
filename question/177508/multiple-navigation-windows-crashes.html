<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>multiple navigation windows crashes Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>multiple navigation windows crashes</h1>
		</header>
		<section>
			<p>What is the best approach to close previous windows when opening new ones without crash and memory leak? I have an example code but not the exact ones I used, this is just the concept and example below:<br>app.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> mainWin=Ti.UI.createWindow({});
<span class="hljs-keyword">var</span> <span class="hljs-built_in">window</span> = Titanium.UI.iOS.createNavigationWindow({
   <span class="hljs-built_in">window</span>: mainWin,
   exitOnClose:<span class="hljs-literal">true</span>
});

<span class="hljs-keyword">var</span> button1=Ti.UI.createButton({title: <span class="hljs-string">"BUTTON for WIN2"</span>});
button1.addEventListener(<span class="hljs-string">'click'</span>, a);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(<span class="hljs-params">e</span>)</span>{
    <span class="hljs-keyword">var</span> win2=Ti.UI.createWindow({
        url:<span class="hljs-string">"win2.js"</span>,
        title:<span class="hljs-string">"WIN1"</span>
    });
    <span class="hljs-built_in">window</span>.openWindow(win2, {animated:<span class="hljs-literal">true</span>});
};
<span class="hljs-built_in">window</span>.open();
win.add(button1);
</code></pre><p>win2.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span>=Ti.UI.currentWindow;
<span class="hljs-keyword">var</span> <span class="hljs-keyword">window</span> = Titanium.UI.iOS.createNavigationWindow({
   <span class="hljs-keyword">window</span>: <span class="hljs-keyword">win</span>
});

<span class="hljs-keyword">var</span> title=Ti.UI.createLabel({text:<span class="hljs-string">"this is the title"</span>});

<span class="hljs-keyword">var</span> button2=Ti.UI.createButton({title: <span class="hljs-string">"BUTTON for WIN3"</span>});
button2.addEventListener('click', a);
function a(<span class="hljs-keyword">e</span>){
    <span class="hljs-keyword">var</span> win3=Ti.UI.createWindow({
        url:<span class="hljs-string">"win3.js"</span>,
        title:<span class="hljs-string">"WIN3"</span>
    });
    <span class="hljs-keyword">window</span>.openWindow(win3, {animated:true});
};
<span class="hljs-keyword">window</span>.<span class="hljs-keyword">open</span>();
<span class="hljs-keyword">win</span>.add(button2);
<span class="hljs-keyword">win</span>.add(title);
</code></pre><p>win3.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span>=Ti.UI.currentWindow;
<span class="hljs-keyword">var</span> <span class="hljs-keyword">window</span> = Titanium.UI.iOS.createNavigationWindow({
   <span class="hljs-keyword">window</span>: <span class="hljs-keyword">win</span>
});
<span class="hljs-keyword">var</span> title2=Ti.UI.createLabel({text:<span class="hljs-string">"this is the title"</span>});


<span class="hljs-keyword">var</span> button3=Ti.UI.createButton({title: <span class="hljs-string">"BUTTON for WIN4"</span>});
button3.addEventListener('click', a);
function a(<span class="hljs-keyword">e</span>){
    <span class="hljs-keyword">var</span> win4=Ti.UI.createWindow({
        url:<span class="hljs-string">"win4.js"</span>,
        title:<span class="hljs-string">"WIN4"</span>
    });
    <span class="hljs-keyword">window</span>.openWindow(win4, {animated:true});
};
<span class="hljs-keyword">window</span>.<span class="hljs-keyword">open</span>();
<span class="hljs-keyword">win</span>.add(title2);
<span class="hljs-keyword">win</span>.add(button3);
</code></pre><p>When I open the windows and click the buttons, I get to the windows without problem but when going back and forth and clicking deeper inside the windows the apps crashes and hangs. I tried to use win.close(); in each new win creation but to no avail. Please advise. Thanks.</p>
<p>I am using:  Mac MAVERICKS, TI 3.2.3 GA, For IOS,  SDK 4.4.2.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 6th 2014, 9:35:49 am">September 6th 2014</span>
				by <span class='authorname'>Renato Tan</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>close current window</span></li>
					
						<li><span class='tagname'>closing opening</span></li>
					
						<li><span class='tagname'>navigation</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-282180">
				
						<section>
							<p>Dont use the <code>url</code> technique for opening new windows. There are very few situations where this is neccessary as you create an entire new context for the new window to run in. Instead use the commonJS approach to design your windows, or even better use Alloy and it will take care of that for you.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 6th 2014, 12:06:47 pm">September 6th 2014</span>
								by <span class='authorname'>Nick Milner</span><br>
								<a class="icon-bg icon-link" href="question/177508/multiple-navigation-windows-crashes.html#answer-282180" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you for the advice. Ok I will use the alloy for future codes. But for my existing project with deep classic version, do you suggest converting them all to alloy?</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 7th 2014, 12:41:15 am">September 7th 2014</span>
											by <span class='authorname'>Renato Tan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Probably too much effort, but you can more easily convert your url based js files to commonJS format</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 7th 2014, 4:16:53 am">September 7th 2014</span>
											by <span class='authorname'>Nick Milner</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Moreover, Ti.UI.iOS.createNavigationWindow() should only be used in the first window. No need to use it in the child window.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 8th 2014, 8:06:55 pm">September 8th 2014</span>
											by <span class='authorname'>Danny Pham</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thank you Nick and Danny for the notes. I modified my code and found out that the use of the navigation with my above example is wrong and causing the crash. Learning from the past questions, I now used the following making my code now stable.</p>
<p>app.js</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> firstWin=Ti.UI.createWindow({

});

<span class="hljs-keyword">var</span> navigationWindow=Ti.UI.iOS.createNavigationWindow({
    <span class="hljs-built_in">window</span>: firstWin
});

<span class="hljs-keyword">var</span> button1=Ti.UI.createButton({
    title: <span class="hljs-string">"this is button1 nexWin1"</span>
 });


<span class="hljs-comment">//other new windows</span>
button1.addEventListener(<span class="hljs-string">'click'</span>, abc);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">abc</span>(<span class="hljs-params"></span>)</span>{

<span class="hljs-keyword">var</span> nexWin1=Ti.UI.createWindow({
       url: abc.js
});
nexWin1.navigationWindow=navigationWindow;
navigationWindow.openWindow(nexWin1);
};

navigationWindow.open();
</code></pre><p>abc.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win=Ti.UI.currentWindow;

<span class="hljs-keyword">var</span> button2=Ti.UI.createButton({
    title: <span class="hljs-string">"this is button1 nexWin2"</span>
 });


button2.addEventListener(<span class="hljs-string">'click'</span>, abc);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">abc</span><span class="hljs-params">()</span></span>{
<span class="hljs-keyword">var</span> nexWin2=Ti.UI.createWindow({
     url: def.js

});
nexWin2.navigationWindow=win.navigationWindow
win.navigationWindow.openWindow(nexWin2);
};
</code></pre><p>Ergo: 1) I used the Ti.UI.iOS.createNavigationWindow many times per window which is wrong<br>2) I will use the alloy in future to avoid using too much urls</p>
<p>Cheers!!</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 17th 2014, 1:38:55 pm">September 17th 2014</span>
											by <span class='authorname'>Renato Tan</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
