<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Touchend didn&#39;t fire to exact location » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Touchend didn&#39;t fire to exact location</h1>
		</header>
		<section>
			<p>Hi everyone,<br>I need to place my box to a specific location, let say at 200,100. Once I drag my image to this location, it will stop automatically but my touched didn&#39;t fire up to my requirement. Can someone point out my mistakes? Thanks in advance. Here&#39;s my code:</p>
<p>  dragView.addEventListener(&#39;touchend&#39;, function(e){<br>            var p = {x: e.source.left, y: e.source.top};<br>            var tp = win1.convertPointToView(p, view2); </p>
<pre><code class="hljs">        <span class="hljs-keyword">if</span>(tp.x &lt; <span class="hljs-number">0</span>){
                tp = win1.convertPointToView(p, view1);
                e.<span class="hljs-keyword">source</span>.<span class="hljs-keyword">parent</span>.remove(e.<span class="hljs-keyword">source</span>);
                e.<span class="hljs-keyword">source</span>.left = tp.x;
                e.<span class="hljs-keyword">source</span>.top = tp.y;
                view1.add(e.<span class="hljs-keyword">source</span>);    
        }<span class="hljs-keyword">else</span>{
                e.<span class="hljs-keyword">source</span>.<span class="hljs-keyword">parent</span>.remove(e.<span class="hljs-keyword">source</span>);
                e.<span class="hljs-keyword">source</span>.left = tp.x;
                e.<span class="hljs-keyword">source</span>.top = tp.y;
                view2.add(e.<span class="hljs-keyword">source</span>);    
        }
});
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 10th 2014, 3:31:20 am">January 10th 2014</span>
				by <span class='authorname'>Herman Afandi</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>coordinate x,y</span></li>
					
						<li><span class='tagname'>drag and drop</span></li>
					
						<li><span class='tagname'>drag image</span></li>
					
						<li><span class='tagname'>jigsaw game</span></li>
					
						<li><span class='tagname'>touchend location</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Could you provide more information about what it is you are trying to achieve?</p>
<p>As far as I can understand, you are trying to move an image from View1 to View2, but it&#39;s not clear.</p>
<p>Also a tip to make it easier for others to help, would be to put code in the correct markdown syntax which can be found above all comment and answer boxes.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 10th 2014, 5:53:09 pm">January 10th 2014</span>
								by <span class='authorname'>Luke Taylor</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Luke. What we&#39;ve tried to achieve was for View1, let say at location 0,0 and we would like to move to view2 which will be at let say, 100,100. If you move exactly to 100,100, the image will automatically stop there but if it&#39;s not, the image will return back to it&#39;s original position at 0,0. It&#39;s a kind of a jigsaw game. Thanks for your help or anyone with an idea.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 10th 2014, 11:49:43 pm">January 10th 2014</span>
								by <span class='authorname'>Herman Afandi</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-273787">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>Please check the following code. I hope, it will be helpful to you to complete your task.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.createWindow({
    backgroundColor:<span class="hljs-string">'pink'</span>,
});

<span class="hljs-keyword">var</span> property=
{
    width:<span class="hljs-number">50</span>, 
    height:<span class="hljs-number">50</span>,
    top:<span class="hljs-number">0</span>, 
    left:<span class="hljs-number">0</span>,
}

<span class="hljs-keyword">var</span> DropView=Ti.UI.createView({
    top:<span class="hljs-number">300</span>,
    left:<span class="hljs-number">50</span>,
    width:<span class="hljs-number">200</span>,
    height:<span class="hljs-number">100</span>,
    backgroundColor:<span class="hljs-string">'green'</span>,
    borderRadius:<span class="hljs-number">5</span>
});

<span class="hljs-keyword">var</span> valueX; <span class="hljs-keyword">var</span> valueY; <span class="hljs-keyword">var</span> put = {};


<span class="hljs-keyword">var</span> tempView = Titanium.UI.createView(property);
tempView.backgroundColor=<span class="hljs-string">"red"</span>

<span class="hljs-keyword">var</span> MainView = Titanium.UI.createView(property);

MainView.addEventListener(<span class="hljs-string">'touchstart'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    startPosition(e);
});


MainView.addEventListener(<span class="hljs-string">'touchmove'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    movingPosition(e);
});


MainView.addEventListener(<span class="hljs-string">'touchend'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
    decessionMaking(e);
});

win.add(DropView); 
win.add(tempView);
win.add(MainView);
win.open();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startPosition</span><span class="hljs-params">(e)</span>
</span>{
    put.x = e.x - tempView.left;
    put.y = e.y - tempView.top;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">movingPosition</span><span class="hljs-params">(e)</span>
</span>{
    tempView.left = e.x - put.x;
    tempView.top = e.y - put.y;    
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decessionMaking</span><span class="hljs-params">(e)</span>
</span>{
    CheckingPositon(e.x - put.x,e.y - put.y);
    MainView.left =valueX; MainView.top = valueY;
    tempView.left=valueX;  tempView.top =valueY;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CheckingPositon</span><span class="hljs-params">(xCord,yCord)</span>
</span>{

    <span class="hljs-keyword">if</span>((xCord&gt;=<span class="hljs-number">50</span> &amp;&amp; xCord&lt;=<span class="hljs-number">225</span>) &amp;&amp; (yCord&gt;=<span class="hljs-number">225</span> &amp;&amp; yCord&lt;=<span class="hljs-number">400</span>))
    {
        valueX=<span class="hljs-number">50</span>;valueY=<span class="hljs-number">310</span>;
    }
    <span class="hljs-keyword">else</span>
    {
        valueX=<span class="hljs-number">0</span>;valueY=<span class="hljs-number">0</span>;
    }
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 11th 2014, 2:46:32 am">January 11th 2014</span>
								by <span class='authorname'>Amimul Hossain</span><br>
								<a class="icon-bg icon-link" href="question/161383/touchend-didnt-fire-to-exact-location#answer-273787" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Here I have used four function </p>
<pre><code class="hljs"><span class="hljs-number">1</span>. <span class="hljs-function"><span class="hljs-title">startPosition</span><span class="hljs-params">()</span></span> <span class="hljs-comment">// start to drag</span>
<span class="hljs-number">2</span>. <span class="hljs-function"><span class="hljs-title">movingPosition</span><span class="hljs-params">()</span></span> <span class="hljs-comment">// moving to the window</span>
<span class="hljs-number">3</span>. <span class="hljs-function"><span class="hljs-title">decessionMaking</span><span class="hljs-params">()</span></span> <span class="hljs-comment">// drop to the window's particular position</span>
<span class="hljs-number">4</span>. <span class="hljs-function"><span class="hljs-title">CheckingPositon</span><span class="hljs-params">()</span></span> <span class="hljs-comment">// checking your drop position</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="January 11th 2014, 2:50:31 am">January 11th 2014</span>
											by <span class='authorname'>Amimul Hossain</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You&#39;re just wonderful, Amimul Hossain. It&#39;s working now. Well done!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 11th 2014, 7:44:57 am">January 11th 2014</span>
											by <span class='authorname'>Herman Afandi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>you are awasom.logic great..thank you so much…</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 30th 2014, 11:21:07 am">April 30th 2014</span>
											by <span class='authorname'>Rama krishna</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
