<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>HTTP Post Request » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>HTTP Post Request</h1>
		</header>
		<section>
			<p>Hi,<br>I&#39;m new user of Titanium and I&#39;m getting trouble with HTTPClient.</p>
<p>this is my code:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> httpClient = Titanium.Network.createHTTPClient();
<span class="hljs-keyword">var</span> params = {  
                    shoppingName: <span class="hljs-string">'flamboyant'</span>
             };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getData</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">var</span> alert = Titanium.UI.createAlertDialog(
  {
    title: <span class="hljs-string">'T3Cinema'</span>,
    message: <span class="hljs-string">'Success '</span> + httpClient.connected + <span class="hljs-string">' '</span> + httpClient.statusText,
    buttonNames: [<span class="hljs-string">'OK'</span>]
  });

  alert.show();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">var</span> alert = Titanium.UI.createAlertDialog(
  {
    title: <span class="hljs-string">'T3Cinema'</span>,
    message: <span class="hljs-string">'Error '</span> + httpClient.connected  + <span class="hljs-string">' '</span> + httpClient.statusText,
    buttonNames: [<span class="hljs-string">'OK'</span>]
  });

  alert.show();
}


httpClient.onload = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> 
</span>{
  getData();  
};

httpClient.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{
  Ti.API.info(<span class="hljs-string">"Error"</span>);
  error();
};

<span class="hljs-keyword">var</span> button = Titanium.UI.createButton({
  title: <span class="hljs-string">'OK'</span>
});

button.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
</span>{
  sendRequest();  
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendRequest</span><span class="hljs-params">()</span>
</span>{
  Ti.API.info(<span class="hljs-string">"request"</span>);
  httpClient.open(<span class="hljs-string">'POST'</span>, <span class="hljs-string">'http://localhost/server.php'</span>);
  httpClient.send(params);
}

Titanium.UI.currentWindow.add(button);
</code></pre><p>I&#39;m getting only &quot;onerror&quot; function. My server is just fine. I&#39;m using Ti Sdk 1.5.1 and Android 2.2.<br>What am I doing wrong?!<br>Thankz!!</p>
<p>ps: Sorry about my english</p>
<p>EDIT - FULL CODE</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 31st 2011, 6:46:31 pm">January 31st 2011</span>
				by <span class='authorname'>Handel Das Vire</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
						<li><span class='tagname'>post</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>have you tried gooing to localhost&#x2F;server.php  with your web browser?  also what is this getData(); function  you seem to be missing some code   and finally try adding some step through Ti.API.info(&quot;&gt;&gt;  making request&quot;); this helps you see data like how you would with a break point</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 31st 2011, 9:11:54 pm">January 31st 2011</span>
								by <span class='authorname'>David Parker</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;m editing my post with the full code! I&#39;m just getting error function on HTTPCliente. I already tried localhost&#x2F;server.php from my web browser and is completely normal!</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 31st 2011, 9:25:30 pm">January 31st 2011</span>
								by <span class='authorname'>Handel Das Vire</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>9</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>9 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-189341">
				
						<section>
							<p>Snippet that i use for HTTP post </p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> xhr=Titanium.Network.createHTTPClient();    
xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{ 
 Ti.API.error(<span class="hljs-string">'Bad Sever =&gt;'</span>+e.error);
};

xhr.open(<span class="hljs-string">"POST"</span>,<span class="hljs-string">"SOME URL"</span>);<span class="hljs-comment">//ADD your URL</span>
xhr.setRequestHeader(<span class="hljs-string">"content-type"</span>, <span class="hljs-string">"application/json"</span>);
<span class="hljs-keyword">var</span> param={ <span class="hljs-string">"Param1"</span>:<span class="hljs-string">"PARAM1"</span>,<span class="hljs-string">"Param2"</span>:<span class="hljs-string">"PARAM2"</span>,<span class="hljs-string">"PARAM3"</span>:<span class="hljs-string">"PARAM3"</span> };

Ti.API.info(<span class="hljs-string">'Params'</span>+<span class="hljs-built_in">JSON</span>.stringify(param));
xhr.send(<span class="hljs-built_in">JSON</span>.stringify(param));

xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
 Ti.API.info(<span class="hljs-string">'RAW ='</span>+<span class="hljs-keyword">this</span>.responseText);
 <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.status == <span class="hljs-string">'200'</span>){
    Ti.API.info(<span class="hljs-string">'got my response, http status code '</span> + <span class="hljs-keyword">this</span>.status);
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span>){
      <span class="hljs-keyword">var</span> response=<span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
      Ti.API.info(<span class="hljs-string">'Response = '</span>+response);
    }<span class="hljs-keyword">else</span>{
      alert(<span class="hljs-string">'HTTP Ready State != 4'</span>);
    }            
 }<span class="hljs-keyword">else</span>{
    alert(<span class="hljs-string">'HTTp Error Response Status Code = '</span>+<span class="hljs-keyword">this</span>.status);
    Ti.API.error(<span class="hljs-string">"Error =&gt;"</span>+<span class="hljs-keyword">this</span>.response);
 }                
});
</code></pre><p>Hope it helps …</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2011, 11:19:37 pm">January 31st 2011</span>
								by <span class='authorname'>Satta Ravi</span><br>
								<a class="icon-bg icon-link" href="../../question/107241/http-post-request.html#answer-189341" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you for help! I&#39;m getting <strong>&quot;Bad Sever =&gt;Connection to http:&#x2F;&#x2F;127.0.0.1 refused&quot;</strong>, but I don&#39;t know why because my server seems to be ok on my web browser. Any more tips?!<br>Thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 31st 2011, 11:51:00 pm">January 31st 2011</span>
											by <span class='authorname'>Handel Das Vire</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>As far as i know this is not an issue with Ti ,there is got to be something with your server ., connection will be refused for any of the following reasons(few reasons that i know)<br>1.the service that you are trying to consume is running on some other port other than 80.<br>2.the server is not started at all(this cant be your case because you can see results on browser).<br>3.The firewall might be causing trouble.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 1st 2011, 12:19:15 am">February 1st 2011</span>
											by <span class='authorname'>Satta Ravi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>may be can you try http:&#x2F;&#x2F;127.0.0.1&#x2F;server.php instead …</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 1st 2011, 12:22:08 am">February 1st 2011</span>
											by <span class='authorname'>Satta Ravi</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>but that&#39;s the problem. I don&#39;t use any firewall and when I go to my browse I use <strong><em>http:&#x2F;&#x2F;127.0.0.1&#x2F;server.php</em></strong> and it just work. I tried to change localhost to 127.0.0.1 unsuccessfully.<br>Do I have to configure something like xml to support internet or something like that? I&#39;m desperate =&#x2F;<br>Thank you!</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 1st 2011, 12:50:00 pm">February 1st 2011</span>
											by <span class='authorname'>Handel Das Vire</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I don&#39;t know what to anymore! I&#39;m almost giving up! =&#x2F;</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 1st 2011, 3:34:07 pm">February 1st 2011</span>
											by <span class='authorname'>Handel Das Vire</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>11</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-211370">
				
						<section>
							<p>To hopefully help wrap up this thread up, I run into this same problem the other day which I was eventually able to solve after a bit of experimenting.</p>
<p>The problem is to do with working locally on a single machine where you have your server and your titanium app on the same machine. For whatever reason calls to either &#39;localhost&#39; or your internal ip &#39;127.0.0.1&#39; are rejected by Ti. It seems Ti only accepts remote addresses so the solution is to use your ipv4 address (ie. 192.168.1.x) which will work for both HTTP and HTTPS requests.</p>
<p>Unfortunately your ipv4 address is dynamic and so can change from network to network so you will need to keep on checking for the latest address during your development work. (You can do this in Windows or Linux by opening a command prompt and typing the command &#39;ipconfig&#39; or &#39;ifconfig&#39; respectively).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 25th 2011, 10:51:52 am">June 25th 2011</span>
								by <span class='authorname'>Matt Gallina</span><br>
								<a class="icon-bg icon-link" href="../../question/107241/http-post-request.html#answer-211370" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;m having this issue with my IP address as well…</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 5th 2012, 12:16:28 pm">May 5th 2012</span>
											by <span class='authorname'>Joris</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-189131">
				
						<section>
							<p>Handel</p>
<p>There are some good examples in the KitchenSink, especially <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;titanium_mobile&#x2F;blob&#x2F;master&#x2F;demos&#x2F;KitchenSink&#x2F;Resources&#x2F;examples&#x2F;xhr_utf8.js">xhr_utf8.js</a> that demonstrates the use of non-standard characters.</p>
<p>Also, there are some great tutorials in the guides. I think <a href="http:&#x2F;&#x2F;guides.appcelerator.com&#x2F;en&#x2F;remote_data.html">Working with Remote Data</a> will be a good place to start with your issue.</p>
<p>Cheers</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2011, 6:55:20 pm">January 31st 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/107241/http-post-request.html#answer-189131" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Are you really opening <code>http:&amp;#x2F;&amp;#x2F;localhost</code>? Localhost? This is the system sending the request; in other words, your android mobile. I doubt that is what you want.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 31st 2011, 10:53:57 pm">January 31st 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>localhost is where my server is placed. I&#39;m just doing like this tutorial: </p>
<p><a href="http:&#x2F;&#x2F;mobile.tutsplus.com&#x2F;tutorials&#x2F;appcelerator&#x2F;titanium-user-authentication&#x2F;">Titaniu Authentication</a> </p>
<p>I&#39;m not understanding why it doesn&#39;t work.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 31st 2011, 11:05:10 pm">January 31st 2011</span>
											by <span class='authorname'>Handel Das Vire</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Ah, I see. OK, I understand what you are doing now. Sorry for the slip! :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 31st 2011, 11:10:15 pm">January 31st 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-189191">
				
						<section>
							<p>Thank you for the response but i already read a lot of tutorials, specially these: http:&#x2F;&#x2F;mobile.tutsplus.com&#x2F;tutorials&#x2F;appcelerator&#x2F;titanium-user-authentication&#x2F;<br>http:&#x2F;&#x2F;guides.appcelerator.com&#x2F;en&#x2F;remote_data.html  (you sent me)</p>
<p>and I&#39;m still stuck! =&#x2F;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2011, 7:15:16 pm">January 31st 2011</span>
								by <span class='authorname'>Handel Das Vire</span><br>
								<a class="icon-bg icon-link" href="../../question/107241/http-post-request.html#answer-189191" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Please don&#39;t answer your own questions, Handel. Use the comment facility instead. Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 31st 2011, 10:51:09 pm">January 31st 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-189251">
				
						<section>
							<p>Please anybody?! I&#39;m guess I&#39;m doing everything right but I can&#39;t log in the server.. I&#39;m doing just the way of the tutorials and nothing… </p>
<p>Thanks!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2011, 9:02:56 pm">January 31st 2011</span>
								by <span class='authorname'>Handel Das Vire</span><br>
								<a class="icon-bg icon-link" href="../../question/107241/http-post-request.html#answer-189251" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228347">
				
						<section>
							<p>Maybe late… but Android AVD, at least, refuse connection to localhost, please use your ip address. Thos is not Ti fault, it&#39;s the android SDK.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 24th 2012, 6:32:18 am">January 24th 2012</span>
								by <span class='authorname'>Nacho Pavon</span><br>
								<a class="icon-bg icon-link" href="../../question/107241/http-post-request.html#answer-228347" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-234115">
				
						<section>
							<p>Localhost is your phone, not your computer.  This may be confusing if you&#39;re working on the emulator, where you may think that your localhost (local LAMP Stack) can be visible from the emulator.  The emulator has its own IP Address, thus its own &quot;localhost&quot;.  If what you need to do is connect from the emulator to your computer&#39;s local server, you need to find out what the computer&#39;s actual IP address is.  Then, since both the computer and the emulator will in the end be in the same network, you&#39;ll be able to access the webserver from the emulator.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 22nd 2012, 3:30:29 pm">March 22nd 2012</span>
								by <span class='authorname'>Ricardo Alcocer</span><br>
								<a class="icon-bg icon-link" href="../../question/107241/http-post-request.html#answer-234115" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-239487">
				
						<section>
							<p>The Android Team has actually developed a work-aroud solution for the IP issue. Use http:&#x2F;&#x2F;10.0.2.2</p>
<p>I can&#39;t confirm if this works or not because I keep getting the connection refused message too. </p>
<p>If someone could help me I would be soo stoked!! </p>
<p>I have used my computer&#39;s IP address, the Android work-around, and disabled my firewall. Nothing seems to work for me.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 28th 2012, 3:28:13 am">May 28th 2012</span>
								by <span class='authorname'>Mike Suechting</span><br>
								<a class="icon-bg icon-link" href="../../question/107241/http-post-request.html#answer-239487" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-271388">
				
						<section>
							<p>JSON.stringfy(parms) did the trick for me on .send call</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 16th 2013, 10:03:38 pm">November 16th 2013</span>
								by <span class='authorname'>Ash Prasad</span><br>
								<a class="icon-bg icon-link" href="../../question/107241/http-post-request.html#answer-271388" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
