<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android app runs in simulator and on the device, but fails during distribution » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android app runs in simulator and on the device, but fails during distribution</h1>
		</header>
		<section>
			<p>I have finished testing my first Android app on the simulator and on the device during development mode. It works ok, but when I package for distribution and try to install the .apk on a device, then it fails. </p>
<p>The error I get from adb log is that a javascript file cannot be found. The file is referenced from app.js via Titanium.include() but wasn&#39;t compiled properly during packaging for distribution:</p>
<p>E&#x2F;KrollContext( 1597): (kroll$1: app:&#x2F;&#x2F;app.js) [1,665] Couldn&#39;t find pre-compiled class for script: pinyin3&#x2F;words-lev1.js<br>E&#x2F;KrollContext( 1597): java.lang.ClassNotFoundException: com.XXXXXXX.YYYYYYYYY.js.pinyin3_words-lev1<br>E&#x2F;KrollContext( 1597):     at java.lang.Class.classForName(Native Method)<br>E&#x2F;KrollContext( 1597):     at java.lang.Class.forName(Class.java:237)<br>E&#x2F;KrollContext( 1597):     at java.lang.Class.forName(Class.java:183)<br>E&#x2F;KrollContext( 1597):     at org.appcelerator.titanium.TiScriptRunner.runScript(TiScriptRunner.java:91)<br>E&#x2F;KrollContext( 1597):     at org.appcelerator.titanium.kroll.KrollContext.runCompiledScript(KrollContext.java:192)<br>E&#x2F;KrollContext( 1597):     at org.appcelerator.titanium.kroll.KrollContext.handleEvalFile(KrollContext.java:234)<br>E&#x2F;KrollContext( 1597):     at org.appcelerator.titanium.kroll.KrollContext.evalFile(KrollContext.java:161)<br>E&#x2F;KrollContext( 1597):     at org.appcelerator.titanium.kroll.KrollBridge.evalFile(KrollBridge.java:132)<br>E&#x2F;KrollContext( 1597):     at org.appcelerator.titanium.TiContext.evalFile(TiContext.java:192)<br>E&#x2F;KrollContext( 1597):     at org.appcelerator.titanium.TiContext.evalFile(TiContext.java:211)<br>E&#x2F;KrollContext( 1597):     at ti.modules.titanium.TitaniumModule.include(TitaniumModule.java:115)<br>E&#x2F;KrollContext( 1597):     at ti.modules.titanium.TitaniumModuleBindingGen$13.invoke(TitaniumModuleBindingGen.java:504) </p>
<p>I am stuck because the app works fine on the device during development mode. This only happens for distribution. Is there a way to look at the log when compiling for distribution, so I can see the compiler error?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 25th 2011, 7:20:39 pm">April 25th 2011</span>
				by <span class='authorname'>Matthew Chiu</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>compiler</span></li>
					
						<li><span class='tagname'>distribution</span></li>
					
						<li><span class='tagname'>javascript</span></li>
					
				</ul>
			

			<section>
				<h5>6 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Same issue here. Dammit Appcelerator..</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 22nd 2011, 11:36:05 pm">July 22nd 2011</span>
								by <span class='authorname'>Paul Shapiro</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>What version for Ti are you using? Also are you on OSX?</p>
<p>I haven&#39;t seen this as a Ti.include error but have seen the above when the appId isn&#39;t a reference domain name ( com.test.stuff ).</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 25th 2011, 6:27:11 pm">July 25th 2011</span>
								by <span class='authorname'>Ben Bahrenburg</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I was running Titanium Mobile 1.6.2 on OSX…</p>
<p>I believe the java classes for a couple of the .js files were missing in the final android package because of an error compiling the .js file for production. There is no log, so I can&#39;t find out what the error is.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 27th 2011, 6:36:41 am">July 27th 2011</span>
								by <span class='authorname'>Matthew Chiu</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>hi I am facing the same problem in android emulator the app works fine even the app.apk which build temporary also works fine in the device. But once i publish it with key then it stop working on the device on some places. Its say class not found. If you had solved this problem then please share your views on this.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 2nd 2011, 6:40:47 am">August 2nd 2011</span>
								by <span class='authorname'>Nikunj Sakhrelia</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Same problem here. App runs fine in emulator and debug mode on device, but once compiled for distribution adb log lists &quot;Couldn&#39;t find pre-compiled class for script…&quot;! The problem occurred way before I used a Ti.include command though. I just referenced the first window with the url parameter of the createWindow-Object. If I don&#39;t use that, then the app is signed and compiled just fine.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 2:50:17 pm">August 9th 2011</span>
								by <span class='authorname'>Stephan Betke</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>com.XXXXXXX.YYYYYYYYY.js.pinyin3_words-lev1  - is not a valid symbol in a class name. Remove the - from your js filename and it should run.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2011, 8:57:21 pm">August 9th 2011</span>
								by <span class='authorname'>Don Thorp</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>3</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-215956">
				
						<section>
							<p>The problem must lie with Titanium. While compiling for distribution with Titanium causes the described errors, compiling the unsigned apk by hand will not, even if one uses Ti.include.</p>
<p>Please try it yourself using the Titanium created app-unsigned.apk within the build&#x2F;android&#x2F;bin&#x2F; folder and signed it using jarsigner and zipalign (http:&#x2F;&#x2F;developer.android.com&#x2F;guide&#x2F;publishing&#x2F;app-signing.html). It worked for me.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 9th 2011, 3:31:17 pm">August 9th 2011</span>
								by <span class='authorname'>Stephan Betke</span><br>
								<a class="icon-bg icon-link" href="question/118934/android-app-runs-in-simulator-and-on-the-device-but-fails-during-distribution#answer-215956" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-216026">
				
						<section>
							<p>Checked out Dons reply (remove the - from filename) and it works indeed. For me it was a folder starting with digits. For instance, I changed &#x2F;2011 to &#x2F;year_2011, &#x2F;1996-2006 to &#x2F;year_1996_2006 and so on. Compiling for distribution with Titanium afterwards worked without a hassle. Thanks Don, it is much more convenient this way!</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 10th 2011, 6:38:48 am">August 10th 2011</span>
								by <span class='authorname'>Stephan Betke</span><br>
								<a class="icon-bg icon-link" href="question/118934/android-app-runs-in-simulator-and-on-the-device-but-fails-during-distribution#answer-216026" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
