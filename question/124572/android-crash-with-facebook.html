<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android Crash with Facebook » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android Crash with Facebook</h1>
		</header>
		<section>
			<p>Hi all!!</p>
<p>Well i have been developing an App with Titanium (1.7.2) for android (2.3.1) and IPhone. And the problem that i have is that when i try to publish in facebook with a dialog on android it crashes, but not on IPhone…</p>
<p>Here is the code:</p>
<pre><code class="hljs">btnface.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">if</span>(Ti.Facebook.loggedIn)
    {
        FacebookDialogDet();
    }
}    

....

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FacebookDialogDet</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> dataDet = {
        link: <span class="hljs-string">'http://www.something.com'</span>,
        name: <span class="hljs-string">'This is a test'</span>,
        message: <span class="hljs-string">'This is the message'</span>,
        caption: <span class="hljs-string">"This is the caption"</span>,
        picture: <span class="hljs-string">'picture.jpg'</span>,
        description:<span class="hljs-string">'This is the description'</span>
    };    
    Titanium.Facebook.dialog(<span class="hljs-string">"feed"</span>, data,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{});
}
</code></pre><p>So… with this it work on Iphone… but on android when i hit the share button after the dialog has been opened, the app crashes…(although the data is publish on my wall). It seems as if the app crashes when it comes back from FB after a successfull post…</p>
<p>I have tried using the example Kitchen Sink for facebook… But out of the 3 options of the publish stream child just the Publish status with Graph Api and Publish wall post with graph Api work…</p>
<p>Any solution for the third? (Publish wall post with Dialog)</p>
<p>thanks in advance!!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 22nd 2011, 7:34:22 am">August 22nd 2011</span>
				by <span class='authorname'>Luis Cañamares</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>dialog</span></li>
					
						<li><span class='tagname'>facebook</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-217353">
				
						<section>
							<p>This happens here too and it seems a recent problem.<br>Appcelerator guys anywhere?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 24th 2011, 1:41:58 pm">August 24th 2011</span>
								by <span class='authorname'>Banzai Mobile</span><br>
								<a class="icon-bg icon-link" href="question/124572/android-crash-with-facebook.html#answer-217353" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Exception happens after correctly publishing to FB, just before calling the callback provided to Ti.Facebook.dialog. Stack is:</p>
<pre><code class="hljs">java<span class="hljs-class">.lang</span><span class="hljs-class">.ArrayIndexOutOfBoundsException</span>
at com<span class="hljs-class">.facebook</span><span class="hljs-class">.android</span><span class="hljs-class">.Util</span><span class="hljs-class">.decodeUrl</span>(Util<span class="hljs-class">.java</span>:<span class="hljs-number">115</span>)
at com<span class="hljs-class">.facebook</span><span class="hljs-class">.android</span><span class="hljs-class">.Util</span><span class="hljs-class">.parseUrl</span>(Util<span class="hljs-class">.java</span>:<span class="hljs-number">134</span>)
at com<span class="hljs-class">.facebook</span><span class="hljs-class">.android</span><span class="hljs-class">.FbDialog</span><span class="hljs-variable">$FbWebViewClient</span>.<span class="hljs-function"><span class="hljs-title">shouldOverrideUrlLoading</span><span class="hljs-params">(FbDialog.java:<span class="hljs-number">152</span>)</span></span>
at android<span class="hljs-class">.webkit</span><span class="hljs-class">.CallbackProxy</span><span class="hljs-class">.uiOverrideUrlLoading</span>(CallbackProxy<span class="hljs-class">.java</span>:<span class="hljs-number">218</span>)
at android<span class="hljs-class">.webkit</span><span class="hljs-class">.CallbackProxy</span><span class="hljs-class">.handleMessage</span>(CallbackProxy<span class="hljs-class">.java</span>:<span class="hljs-number">337</span>)
at android<span class="hljs-class">.os</span><span class="hljs-class">.Handler</span><span class="hljs-class">.dispatchMessage</span>(Handler<span class="hljs-class">.java</span>:<span class="hljs-number">99</span>)
at android<span class="hljs-class">.os</span><span class="hljs-class">.Looper</span><span class="hljs-class">.loop</span>(Looper<span class="hljs-class">.java</span>:<span class="hljs-number">130</span>)
at android<span class="hljs-class">.app</span><span class="hljs-class">.ActivityThread</span><span class="hljs-class">.main</span>(ActivityThread<span class="hljs-class">.java</span>:<span class="hljs-number">3687</span>)
at java<span class="hljs-class">.lang</span><span class="hljs-class">.reflect</span><span class="hljs-class">.Method</span><span class="hljs-class">.invokeNative</span>(Native Method)
at java<span class="hljs-class">.lang</span><span class="hljs-class">.reflect</span><span class="hljs-class">.Method</span><span class="hljs-class">.invoke</span>(Method<span class="hljs-class">.java</span>:<span class="hljs-number">507</span>)
at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.os</span><span class="hljs-class">.ZygoteInit</span><span class="hljs-variable">$MethodAndArgsCaller</span>.<span class="hljs-function"><span class="hljs-title">run</span><span class="hljs-params">(ZygoteInit.java:<span class="hljs-number">842</span>)</span></span>
at com<span class="hljs-class">.android</span><span class="hljs-class">.internal</span><span class="hljs-class">.os</span><span class="hljs-class">.ZygoteInit</span><span class="hljs-class">.main</span>(ZygoteInit<span class="hljs-class">.java</span>:<span class="hljs-number">600</span>)
at dalvik<span class="hljs-class">.system</span><span class="hljs-class">.NativeStart</span><span class="hljs-class">.main</span>(Native Method)
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 24th 2011, 1:47:55 pm">August 24th 2011</span>
											by <span class='authorname'>Banzai Mobile</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-218548">
				
						<section>
							<p>I think it may be that you have your var called &quot;dataDet&quot;  and in the dialog you specified just &quot;data&quot;.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 9th 2011, 7:40:24 pm">September 9th 2011</span>
								by <span class='authorname'>Peter Blanchard</span><br>
								<a class="icon-bg icon-link" href="question/124572/android-crash-with-facebook.html#answer-218548" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
