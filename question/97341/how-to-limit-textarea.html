<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>How to Limit TextArea? » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>How to Limit TextArea?</h1>
		</header>
		<section>
			<p>Is there a way to limit the amount of characters allowed in a TextArea? I would like a limit of 300 characters, or 50 words.</p>
<p>Could anybody help? Here&#39;s my TextArea, if you really need it:</p>
<pre><code class="hljs">var descData = Titanium.UI.createTextArea({
    value:<span class="hljs-string">''</span>,
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#336699'</span>,
    suppressReturn:<span class="hljs-keyword">false</span>,
    editable:<span class="hljs-keyword">true</span>,
    enabled:<span class="hljs-keyword">true</span>,
    paddingLeft:<span class="hljs-number">5</span>,
    paddingRight:<span class="hljs-number">5</span>,
    top:<span class="hljs-number">30</span>,
    left:<span class="hljs-string">'auto'</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">90</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">280</span>,
    borderColor:<span class="hljs-string">'#888'</span>,
    font:{fontSize:<span class="hljs-number">16</span>, fontWeight:<span class="hljs-string">'bold'</span>},
    borderStyle:Titanium.UI.INPUT_BORDERSTYLE_LINE
});
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 6th 2011, 3:49:14 am">January 6th 2011</span>
				by <span class='authorname'>Colton Arabsky</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>textarea</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-173721">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Colton</p>
<p>This is certainly possible, and I&#39;ve seen it done successfully.</p>
<p>For limiting the number of characters, you need to have a variable that stores the <em>previous</em> textField <code>value</code> property (using the change event) and then for every new change check the length against your pre-defined limit and replace the textField with the previous value (your variable) if it exceeds it. You may need to handle the <code>blur</code> and <code>return</code> also.</p>
<p>For a word limit, you would use a similar approach, but use a standard js technique for counting the number of words, as in <a href="http:&#x2F;&#x2F;www.google.co.uk&#x2F;search?q=javascript+count+words">these pages</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 6th 2011, 8:16:17 am">January 6th 2011</span>
								by <span class='authorname'>Paul Dowsett</span><br>
								<a class="icon-bg icon-link" href="../../question/97341/how-to-limit-textarea.html#answer-173721" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-225014">
				
						<section>
							<p>textArea.addEventListener(&#39;change&#39;, function(e){</p>
<pre><code class="hljs">    e.source.<span class="hljs-keyword">value</span> = e.source.<span class="hljs-keyword">value</span>.slice(<span class="hljs-number">0</span>,maxLength);
</code></pre><p>});</p>
<p>;)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 7th 2011, 12:38:39 pm">December 7th 2011</span>
								by <span class='authorname'>Andres Gariglio</span><br>
								<a class="icon-bg icon-link" href="../../question/97341/how-to-limit-textarea.html#answer-225014" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Did you test that on Android? I think you did not, because changing value of text field on Android moves cursor to the beginning of typed text, which results in terrible user experience, especially if you do that for every character user inputs.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 7th 2011, 12:51:34 pm">December 7th 2011</span>
											by <span class='authorname'>Ivan Škugor</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry, I tested it only on iPhone&#x2F;iPad</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 7th 2011, 1:07:18 pm">December 7th 2011</span>
											by <span class='authorname'>Andres Gariglio</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>3</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-174131">
				
						<section>
							<p>It mas much simpler then that, Hal :P All I had to do was this:</p>
<pre><code class="hljs">var descData = Titanium.UI.createTextArea({
    value:<span class="hljs-string">''</span>,
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#444'</span>,
    paddingLeft:<span class="hljs-number">5</span>,
    paddingRight:<span class="hljs-number">5</span>,
    top:<span class="hljs-number">30</span>,
    left:<span class="hljs-string">'auto'</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">90</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">280</span>,
    editable:<span class="hljs-keyword">true</span>,
    borderColor:<span class="hljs-string">'#888'</span>,
    suppressReturn:<span class="hljs-keyword">false</span>,
    font:{fontSize:<span class="hljs-number">16</span>, fontWeight:<span class="hljs-string">'bold'</span>},
    borderStyle:Titanium.UI.INPUT_BORDERSTYLE_LINE
});

var descCount_Label = Ti.UI.createLabel({
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'0'</span>,
    top:<span class="hljs-number">4</span>,
    left:<span class="hljs-number">220</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">100</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>,
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    font:{fontSize:<span class="hljs-number">16</span>,fontWeight:<span class="hljs-string">'bold'</span>}
});

<span class="hljs-keyword">if</span> (Ti.App.Properties.getInt(<span class="hljs-string">'auto_descCount'</span>) == <span class="hljs-keyword">null</span>) {
    descCount_Label.<span class="hljs-built_in">text</span> = <span class="hljs-string">'0'</span>;
} <span class="hljs-keyword">else</span> {
    descCount_Label.<span class="hljs-built_in">text</span> = Ti.App.Properties.getInt(<span class="hljs-string">'auto_descCount'</span>);
}
descData.addEventListener(<span class="hljs-string">'change'</span>, function(e)
{
    Titanium.App.Properties.setString(<span class="hljs-string">'auto_description'</span>, e.value);

    <span class="hljs-comment">// Set character limit</span>
    descCount_Label.<span class="hljs-built_in">text</span> = e.value.length;
    Ti.App.Properties.setInt(<span class="hljs-string">'auto_descCount'</span>, e.value.length);

    <span class="hljs-keyword">if</span> (e.value.length &gt;= <span class="hljs-number">100</span>) {
        descData.blur();
    }
});
</code></pre><p>That counts it correctly and when it&#39;s over 100 characters, the TextArea will blur. Sure, you can always click in it and add another character, but it will blur right after.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 6th 2011, 7:44:58 pm">January 6th 2011</span>
								by <span class='authorname'>Colton Arabsky</span><br>
								<a class="icon-bg icon-link" href="../../question/97341/how-to-limit-textarea.html#answer-174131" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>That is great, Colton, I am pleased that you have found a solution, and glad that you have shared it, but that&#39;s not the best way to provide the correct answer, as doing it that way you cannot close the post. Please see <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;guides&#x2F;en&#x2F;contribute.html#participating_in_the_q&amp;a">Participating in the Q&amp;A</a> for the best way to participate in this forum.</p>
<p>Cheers</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 6th 2011, 8:12:13 pm">January 6th 2011</span>
											by <span class='authorname'>Paul Dowsett</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>This helped me, copy paste and it works great!</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 16th 2011, 5:02:15 am">June 16th 2011</span>
											by <span class='authorname'>Kami -</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-261870">
				
						<section>
							<p>Same as the above answer really, but a bit more generic, with a couple of tweaks:</p>
<pre><code class="hljs">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createTextField</span><span class="hljs-params">(pOptions)</span> </span>{
        <span class="hljs-keyword">var</span> TextField = Ti.UI.createTextField(pOptions);
        <span class="hljs-keyword">if</span> (TextField.maxLength!==<span class="hljs-literal">null</span>) {
            TextField.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
            </span>{
                <span class="hljs-keyword">if</span> (e.value.length &gt; e.source.maxLength) {
                    e.source.blur();
                    e.source.value=e.source.value.substr(<span class="hljs-number">0</span>,e.source.maxLength);
                }
            });
        }
        <span class="hljs-keyword">return</span> TextField;
    },
</code></pre><p>So I&#39;ve created a function to create TextFields generically, which, if the parameter maxLength is set in the options when the TextField is created, will automatically add the event listener to do as your function did (i.e. blur away from the field). </p>
<p>I&#39;ve slightly changed this function to be more generic (i.e. referring to e.source, using a generic parameter extension). I&#39;ve also made it work so that it only blurs if you enter MORE that the maxLength. After that, it removes the offending additional character from the field.</p>
<p>The reason for this is, in the original code, once you&#39;d entered the full field, if you clicked back on it, it would immediately blur away again, meaning you couldn&#39;t edit it. This way, you can go back in and remove some characters and edit it again.</p>
<p>It&#39;s still not perfect, obviously (if you edit a field and add some characters in the middle, the end character is removed, plus moving out of the field is a little jarring for the user), but it&#39;s better than failing validations or having to have databases with unlimited field lengths all over the place.</p>
<p>I think that some other users have suggested that this may have a different solution on iOS, so really this is only Android code and should be surrounded in the usual osname checks, but as I haven&#39;t tested this code out on iOS yet, I&#39;ll leave it applying to all.</p>
<p>Hope you can us it, and thanks for your original solution - this really helped me out.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 30th 2013, 7:05:39 am">April 30th 2013</span>
								by <span class='authorname'>Tony Walker</span><br>
								<a class="icon-bg icon-link" href="../../question/97341/how-to-limit-textarea.html#answer-261870" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
