<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Routing - useless? Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Routing - useless?</h1>
		</header>
		<section>
			<p>In my app, I&#39;m letting people add address they plan on visiting and want to be able to have it route from the current location to the destination.</p>
<p>I have it working fine in that I can click the annotation and it will open the link in the Maps app and plot from there, but I would like it in-app if possible, as opening it in the Maps app is kind of a hack.</p>
<p>The kitchen sink just has them plotted in a csv file manually, and that seems kind of a bad example to me.</p>
<p>If nothing else, can I get the distance between the points based on directions, and not straight line (which it does now)?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 9th 2010, 12:56:12 pm">November 9th 2010</span>
				by <span class='authorname'>Josh Lewis</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>maps</span></li>
					
						<li><span class='tagname'>route</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I&#39;ve been wondering this myself</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 9th 2010, 1:21:56 pm">November 9th 2010</span>
								by <span class='authorname'>Chris Nelson</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>9</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>9 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-140591">
				
						<section>
							<p>Josh,</p>
<p>Here is an example.  Mapquest can be twitchy so set your referer URL in the settings to just * and allow empty referers.  Paste in your API key into the app.js sample and give it a run.</p>
<p>This class has several functions but the only ones that matter are shown in app.js.  </p>
<p>The first is init and it takes your key and mapview as parameters.  </p>
<p>The next is route and you can send it the location parameter in the form that Mapquest expects which means you can do lat, lng or send full addresses and it will geocode them - the sample shows the correct form.  </p>
<p>The last method actually draws the route on the map and you can specify the title, color and width of the route on the map.  </p>
<p>BTW - I made the 2nd and 3rd methods separate so you can choice between just calling and getting routing information and being able to draw it.  I do not know what your goal is so making them two calls allowed for extra flexibility.  </p>
<p>A second BTW is that each method takes more parameters than I demonstrate and you can look inside the class and see them.  </p>
<p>If you look inside the class you will see that I also expose the distance and time to travel and you can tell it things like quickest, shortest, pedestrian and other options.  This is a crude example but it&#39;ll get you started.</p>
<p>Be careful with the API key.  If you paste it in and it has % symbols in it, the key is URL encoded and it shouldn&#39;t be.  You will need to URL decode the key and use it raw or you will get an error from mapquest saying the key is invalid.</p>
<p>I plan on putting this code on GitHub and refining it so please put feedback here and I&#39;ll try to incorporate it into the GitHub repository.</p>
<p><a href="http:&#x2F;&#x2F;pastie.org&#x2F;1285934">Sample Code</a></p>
<p><a href="https:&#x2F;&#x2F;github.com&#x2F;smpdawg&#x2F;scandium">GitHub Repository</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2010, 11:24:57 pm">November 9th 2010</span>
								by <span class='authorname'>John McKnight</span><br>
								<a class="icon-bg icon-link" href="question/77921/routing---useless#answer-140591" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-140221">
				
						<section>
							<p>You could try to make the route fetching some data from google maps.<br>But take care with the google TOS, they don&#39;t allow driving directions inside an app( if you don&#39;t pay for).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2010, 1:39:08 pm">November 9th 2010</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/77921/routing---useless#answer-140221" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-140261">
				
						<section>
							<p>I agree. I used googles api for requesting directons (i.e. point to point).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2010, 2:05:18 pm">November 9th 2010</span>
								by <span class='authorname'>Steve Clark</span><br>
								<a class="icon-bg icon-link" href="question/77921/routing---useless#answer-140261" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Do you have an example of how you do that?  I&#39;m not using webviews or anything like that.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2010, 2:41:18 pm">November 9th 2010</span>
											by <span class='authorname'>Josh Lewis</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-140301">
				
						<section>
							<p>Does anyone think if I just modify the routes.csv code in kitchen sink to have a starting and ending point, it will route, or do I NEED to have every point in-between?</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> f = <span class="hljs-type">Ti</span>.<span class="hljs-type">Filesystem</span>.getFile(<span class="hljs-type">Ti</span>.<span class="hljs-type">Filesystem</span>.resourcesDirectory,'examples','route.csv');
<span class="hljs-keyword">var</span> csv = f.read();
<span class="hljs-keyword">var</span> points = [];
<span class="hljs-keyword">var</span> lines = csv.<span class="hljs-built_in">toString</span>().<span class="hljs-built_in">split</span>(<span class="hljs-string">"\n"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> <span class="hljs-built_in">c</span>=<span class="hljs-number">0</span>;<span class="hljs-built_in">c</span>&lt;lines.length;<span class="hljs-built_in">c</span>++)
{
    <span class="hljs-keyword">var</span> line = lines[<span class="hljs-built_in">c</span>];
    <span class="hljs-keyword">var</span> latlong = line.<span class="hljs-built_in">split</span>(<span class="hljs-string">","</span>);
    <span class="hljs-keyword">if</span> (latlong.length &gt; <span class="hljs-number">1</span>)
    {
        <span class="hljs-keyword">var</span> lat = latlong[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">var</span> lon = latlong[<span class="hljs-number">1</span>];
        <span class="hljs-keyword">var</span> entry = {latitude:lat,longitude:lon};
        points[<span class="hljs-built_in">c</span>]=entry;
    }
}

<span class="hljs-comment">// route object</span>
<span class="hljs-keyword">var</span> route = {
    name:<span class="hljs-string">"boston"</span>,
    points:points,
    color:<span class="hljs-string">"red"</span>,
    width:<span class="hljs-number">4</span>
};

<span class="hljs-comment">// add a route</span>
mapview.addRoute(route);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2010, 2:51:17 pm">November 9th 2010</span>
								by <span class='authorname'>Josh Lewis</span><br>
								<a class="icon-bg icon-link" href="question/77921/routing---useless#answer-140301" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-140341">
				
						<section>
							<p>The problem with adding routing directly to the API is the moment you do someone will complain that you didn&#39;t use the right one.  </p>
<p>There are many different providers of direction services, several of which are free, and they each have different licenses and terms.  Do you know there are some that will not let you route over a Google map because they work exclusively with Microsoft?  There are others that will also discriminate against the platform you target.  I had to work with a company that would let you do mapping and directions on Android but not iPhone.  Because of all of these screwball licenses and terms it would be difficult for Appcelerator to add this to the API and still target multiple platforms.  And all of this doesn&#39;t even take into account that a direction provider may not even support the country you are in!</p>
<p>If you are in the US and are targeting the US I would use the mapquest API.  It is clean, easy to use and returns a very nice JSON response that is easy to parse and very complete.   They are also free if you fit their criteria.  Yes, I have used them in several projects and they work great.</p>
<p>Here is the main portal for the Mapquest API<br>http:&#x2F;&#x2F;developer.mapquest.com&#x2F;</p>
<p>This is the directions API<br>http:&#x2F;&#x2F;www.mapquestapi.com&#x2F;directions&#x2F;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2010, 3:04:09 pm">November 9th 2010</span>
								by <span class='authorname'>John McKnight</span><br>
								<a class="icon-bg icon-link" href="question/77921/routing---useless#answer-140341" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-140391">
				
						<section>
							<p>John,</p>
<p>Do you have a code sample?  I basically have a starting and ending lat an Lon and just want to get in-app directions from there. </p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2010, 3:41:22 pm">November 9th 2010</span>
								by <span class='authorname'>Josh Lewis</span><br>
								<a class="icon-bg icon-link" href="question/77921/routing---useless#answer-140391" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-140411">
				
						<section>
							<p>Let me put together a basic example from some code that I have.  It will require a Mapquest API key so you may want to sign up and get your key and check out their API while I get the code ready.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2010, 3:53:14 pm">November 9th 2010</span>
								by <span class='authorname'>John McKnight</span><br>
								<a class="icon-bg icon-link" href="question/77921/routing---useless#answer-140411" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-140421">
				
						<section>
							<p>Thanks, I appreciate it</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2010, 4:24:48 pm">November 9th 2010</span>
								by <span class='authorname'>Josh Lewis</span><br>
								<a class="icon-bg icon-link" href="question/77921/routing---useless#answer-140421" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-140581">
				
						<section>
							<p>You could try <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;74221&#x2F;mobile-map-route-from-google-server#133781">this</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2010, 11:11:27 pm">November 9th 2010</span>
								by <span class='authorname'>Vali Filip</span><br>
								<a class="icon-bg icon-link" href="question/77921/routing---useless#answer-140581" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
