<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Google Maps V2 module crashes when view placed in tab group » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Google Maps V2 module crashes when view placed in tab group</h1>
		</header>
		<section>
			<p>In my app I have a main screen with a tab group, where I now want to add a &quot;Map&quot; tab. This has worked in tests with 3.0.0 GA previously  (on a very simple &quot;Hello world&quot; level…), using the &quot;old&quot; cross-platform Ti.Map (on Android also even without explicitly creating any Google Maps Android V1 key), but has not been part of the production version. Now I have moved to 3.1.0 GA. The old test code for iOS still works, but for Android I now try to use the new module for Google Maps Android V2. I have followed all the steps for setting it up in <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Google_Maps_v2_for_Android">this guide</a>, although I had to manually download the android ti.map 2.1.0 module from GitHub and place it under my project to get it to work (it did not appear as a global module in Titanium). If I copy the example code from <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;api&#x2F;Modules.Map">the api doc</a> directly into app.js instead of my normal startup code, I get a map (although it&#39;s centered on Atlanta rather than on Mountain View), so that indicates that I have gotten it right with the installation, the android manifest and the Google API key. However, when I try to use it in the proper place in the app, it crashes. I can extract the following from the Android log:</p>
<pre><code class="hljs">04-25 14:14:58.295: <span class="hljs-keyword">D</span>/AndroidRuntime(18222): Shutting down VM
04-25 14:14:58.295: W/dalvikvm(18222): threadid=1: thread exiting with uncaught exception (group=0x411e12a0)
04-25 14:14:58.295: <span class="hljs-keyword">E</span>/TiApplication(18222): (main) [44941,49687] Sending event: exception <span class="hljs-keyword">on</span> thread: main msg:java.lang.IllegalArgumentException: <span class="hljs-keyword">No</span> <span class="hljs-keyword">view</span> found <span class="hljs-keyword">for</span> id 0x3e8 <span class="hljs-keyword">for</span> fragment SupportMapFragment{41f458b8 #0 id=0x3e8}; Titanium 3.1.0,2013/04/15 18:46,57634ef
04-25 14:14:58.295: <span class="hljs-keyword">E</span>/TiApplication(18222): java.lang.IllegalArgumentException: <span class="hljs-keyword">No</span> <span class="hljs-keyword">view</span> found <span class="hljs-keyword">for</span> id 0x3e8 <span class="hljs-keyword">for</span> fragment SupportMapFragment{41f458b8 #0 id=0x3e8}
04-25 14:14:58.295: <span class="hljs-keyword">E</span>/TiApplication(18222):     at android.support.v4.<span class="hljs-keyword">app</span>.FragmentManagerImpl.moveToState(FragmentManager.java:865)
...
</code></pre><p>The main screen view is set up with a Ti.UI.createTabGroup(), and then for each tab a window is set up using Ti.UI.createWindow() and then passed to Ti.UI.createTab(), and finally the tab object is added to the tab group. For the map tab, a view is created using MapModule.createView() and added to the window attached to the tab. The app does not crash when this code is executed, but it does when you click the tab.</p>
<p>A solution or workaround for this in the near future is much needed, in fact it would be a real showstopper (on the &quot;should we abandon Titanium?&quot; level) for us if we cannot add Android map functionality to our app in this way.</p>
<p>Application type: mobile<br>Titanium SDK: 3.1.0 GA<br>Platform &amp; version: Android 4.1.2<br>Device: Samsung Galaxy SII<br>Host Operating System: OSX 10.7.5<br>Titanium Studio: 3.1.0.201304151600</p>
<p>Regards</p>
<p>Magnus Oskarsson</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 25th 2013, 12:01:30 pm">April 25th 2013</span>
				by <span class='authorname'>Magnus Oskarsson</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>map</span></li>
					
						<li><span class='tagname'>mapview</span></li>
					
						<li><span class='tagname'>tabgroup</span></li>
					
				</ul>
			

			<section>
				<h5>24 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Code example ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 25th 2013, 12:57:36 pm">April 25th 2013</span>
								by <span class='authorname'>Nick Milner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>The map related code is taken directly from the above mentioned example in the docs. When I have boiled it down to a test app starting from the &quot;Tabbed Application&quot; template in Titanium I get it to work. So my initial guess that it is related to the tabgroup may not necessarily be true, it could be something else in the full app that causes a conflict with the V2 map module. But I am at a loss for what to try next, so any suggestion based on the description or the log extract above would be much appreciated.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 26th 2013, 10:10:18 am">April 26th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I have tested removing a lot of stuff from the app to see if that removed the crash, but it didn&#39;t. Finally I tested adding the map to the first tab (instead of to the third or fourth where it is supposed to be), and then the map displays, and you can switch to another tab and then go back as well. However, if I try to add a route to the map it crashes again, now with the following lines in the log:</p>
<pre><code class="hljs"><span class="hljs-number">04-30 13:03</span>:54.788: D/AndroidRuntime(23124): Shutting down VM
<span class="hljs-number">04-30 13:03</span>:54.788: W/dalvikvm(23124): threadid=1: thread exiting with uncaught exception (group=<span class="hljs-number">0x4103c2</span>a0)
<span class="hljs-number">04-30 13:03</span>:54.793: E/TiApplication(23124): (main) [<span class="hljs-number">49615,130891</span>] Sending event: exception on thread: main msg:java.lang.ClassCastException: java.util.HashMap cannot be cast to ti.map.RouteProxy<span class="hljs-comment">; Titanium 3.1.0,2013/04/15 18:46,57634ef</span>
<span class="hljs-number">04-30 13:03</span>:54.793: E/TiApplication(23124): java.lang.ClassCastException: java.util.HashMap cannot be cast to ti.map.RouteProxy
<span class="hljs-number">04-30 13:03</span>:54.793: E/TiApplication(23124):     at ti.map.ViewProxy.handleMessage(ViewProxy.java:134)
<span class="hljs-number">04-30 13:03</span>:54.793: E/TiApplication(23124):     at android.os.Handler.dispatchMessage(Handler.java:95)
</code></pre><p>Judging from this and other newsgroup posts I have seen, the new Google Maps V2 module seems very shaky. I would really appeciate a comment from an Appcelerator representative on this, we must know if improvning this module has top priority. As mentioned above, not being able to add maps to our apps the way we want would be devastating, and we would have to start looking for another development tool if we saw no solution in the near future.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 30th 2013, 9:22:20 am">April 30th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I have added a link to this thread as a comment to <a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMODOPEN-230?focusedCommentId=250071#comment-250071">this (open) JIRA bug tracker ticket</a>, which seems likely to be a related problem. If anyone else who reads this has experienced similar problems, please comment here and&#x2F;or in JIRA so that our voices are heard as much as possible.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 6th 2013, 7:52:54 am">May 6th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I followed all of the steps too (and double, triple, quadruple checked them) and app crashes every time at the splash screen.  Getting a similar message in the log.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 6th 2013, 4:40:07 pm">May 6th 2013</span>
								by <span class='authorname'>Sarah Smith</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Can someone post an actual test case to replicate what you are seeing?</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 6th 2013, 7:03:17 pm">May 6th 2013</span>
								by <span class='authorname'>Eduardo Gomez</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I feel lucky that I&#39;m not getting the splash screen crash.  But I&#39;m seeing buggy behavior.  When I tried to instantiate multiple maps on different windows (including tab windows), I found very strange behavior – only the original map would remain interactive; the others were frozen.  Annotations were unreliable, and in some cases, you could see annotations flickering in and out of view.</p>
<p>I reverted back to my old system of managing a single mapview and adding to &#x2F;removing from windows on demand.  I really had hoped to get rid of this mechanism – it&#39;s complex and somewhat limiting in what you can do in the UI.</p>
<p>The other thing that&#39;s driving me crazy is that the mapview flashes black before it loads.  I have tried setting the background color, but that doesn&#39;t help.  In fact, it flashes more than just the view – it flashes the entire app, tabs, windows, everything.  The entire app goes to black for a fraction of a second before the first map is loaded.  I&#39;m guessing that it might have something to do with switching into OpenGL mode.   Similar symptoms are reported by native android devs <a href="https:&#x2F;&#x2F;code.google.com&#x2F;p&#x2F;gmaps-api-issues&#x2F;issues&#x2F;detail?id=4639">here</a>.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 7th 2013, 12:58:20 pm">May 7th 2013</span>
								by <span class='authorname'>Jason Priebe</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I have finally found what looks to be the reason for my crash: using the Android Holo theme with an action bar. I now have a test project with source code I can share, based on modifying the &quot;Tabbed application&quot; template for the Google Maps V2 module and the Holo theme, and adding the map view on one of the tabs. Forgive a a basic question: where and how can I post my test case?</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 7th 2013, 1:42:44 pm">May 7th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thanks for point that out Magnus, </p>
<p>You can either <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;How_to_Submit_a_Bug_Report">submit a ticket</a> on <a href="jira.appcelerator.org">Jira</a> or post a <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;How_to_Submit_a_Bug_Report-section-29004732_HowtoSubmitaBugReport-CreatingaTestCase">test case</a> right here, check out code markdown syntax to improve readability.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 7th 2013, 1:53:34 pm">May 7th 2013</span>
								by <span class='authorname'>Eduardo Gomez</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>OK, I thought you had something like an attachment newsgroup where I could upload the entire test project as a zip file, but I see from your guides that you don&#39;t want it like that. Here are the key parts:<br>TiApp.xml:</p>
<pre><code class="hljs">    <span class="hljs-tag">&lt;<span class="hljs-title">android</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">manifest</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">uses-sdk</span> <span class="hljs-attribute">android:minSdkVersion</span>=<span class="hljs-value">"8"</span> <span class="hljs-attribute">android:targetSdkVersion</span>=<span class="hljs-value">"14"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.INTERNET"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.ACCESS_FINE_LOCATION"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.ACCESS_COARSE_LOCATION"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.google.android.providers.gsf.permission.READ_GSERVICES"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">uses-feature</span> <span class="hljs-attribute">android:glEsVersion</span>=<span class="hljs-value">"0x00020000"</span> <span class="hljs-attribute">android:required</span>=<span class="hljs-value">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.enera.tabbedmap.permission.MAPS_RECEIVE"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">permission</span>
                <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.enera.tabbedmap.permission.MAPS_RECEIVE"</span> <span class="hljs-attribute">android:protectionLevel</span>=<span class="hljs-value">"signature"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">application</span> <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@android:style/Theme.Holo"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">meta-data</span>
                    <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"com.google.android.maps.v2.API_KEY"</span> <span class="hljs-attribute">android:value</span>=<span class="hljs-value">"AIzaSyDYBIo7m2GkNpiwQ2VpwfH_FwOtm8a_V-w"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">application</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">manifest</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">android</span>&gt;</span>
</code></pre><p>ApplicationTabGroup.js:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ApplicationTabGroup</span><span class="hljs-params">(Window)</span> </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createTabGroup();
    <span class="hljs-keyword">var</span> win1 = <span class="hljs-keyword">new</span> Window(L(<span class="hljs-string">'home'</span>)),
        win2 = <span class="hljs-keyword">new</span> Window(<span class="hljs-string">'Two'</span>);
        win3 = <span class="hljs-keyword">new</span> Window(<span class="hljs-string">'Three'</span>);
        win4 = <span class="hljs-keyword">new</span> Window(<span class="hljs-string">'Map'</span>);
    <span class="hljs-keyword">var</span> tab1 = Ti.UI.createTab({
        title: L(<span class="hljs-string">'home'</span>),
        icon: <span class="hljs-string">'/images/KS_nav_ui.png'</span>,
        window: win1
    });
    win1.containingTab = tab1;
    <span class="hljs-keyword">var</span> tab2 = Ti.UI.createTab({
        title: <span class="hljs-string">'Two'</span>,
        icon: <span class="hljs-string">'/images/KS_nav_views.png'</span>,
        window: win2
    });
    win2.containingTab = tab2;
    <span class="hljs-keyword">var</span> tab3 = Ti.UI.createTab({
        title: <span class="hljs-string">'Three'</span>,
        icon: <span class="hljs-string">'/images/KS_nav_views.png'</span>,
        window: win3
    });
    win3.containingTab = tab3;
    <span class="hljs-keyword">var</span> tab4 = Ti.UI.createTab({
        title: <span class="hljs-string">'Map'</span>,
        icon: <span class="hljs-string">'/images/KS_nav_views.png'</span>,
        window: win4
    });
    win4.containingTab = tab4;
    <span class="hljs-keyword">self</span>.addTab(tab1);
    <span class="hljs-keyword">self</span>.addTab(tab2);
    <span class="hljs-keyword">self</span>.addTab(tab3);
    <span class="hljs-keyword">self</span>.addTab(tab4);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
};
module.exports = ApplicationTabGroup;
</code></pre><p>ApplicationWindow.js:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ApplicationWindow</span><span class="hljs-params">(title)</span> </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">self</span> = Ti.UI.createWindow({
        title:title,
        backgroundColor:<span class="hljs-string">'white'</span>
    });
    <span class="hljs-keyword">if</span> (Ti.Platform.osname === <span class="hljs-string">'android'</span>) {
        <span class="hljs-keyword">self</span>.activity.onCreateOptionsMenu = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
            <span class="hljs-keyword">var</span> actionBar = <span class="hljs-keyword">self</span>.activity.actionBar;
            actionBar.setTitle(<span class="hljs-string">'Action bar'</span>);
            actionBar.displayHomeAsUp = <span class="hljs-keyword">true</span>;
            actionBar.onHomeIconItemSelected = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
                <span class="hljs-keyword">self</span>.close(); <span class="hljs-comment">// Does not work, but never mind</span>
            };
        };
        <span class="hljs-keyword">if</span> (title == <span class="hljs-string">'Map'</span>) {    
            <span class="hljs-keyword">var</span> MapModule = <span class="hljs-keyword">require</span>(<span class="hljs-string">'ti.map'</span>);            
            <span class="hljs-keyword">var</span> mountainView = MapModule.createAnnotation({
                latitude:<span class="hljs-number">37.390749</span>,
                longitude:-<span class="hljs-number">122.081651</span>,
                title:<span class="hljs-string">"Appcelerator Headquarters"</span>,
                subtitle:<span class="hljs-string">'Mountain View, CA'</span>,
                pincolor:MapModule.ANNOTATION_RED,
                myid:<span class="hljs-number">1</span> <span class="hljs-comment">// Custom property to uniquely identify this annotation.</span>
            });            
            <span class="hljs-keyword">var</span> mapview = MapModule.createView({
                mapType: MapModule.NORMAL_TYPE,
                region: {latitude:<span class="hljs-number">33.74511</span>, longitude:-<span class="hljs-number">84.38993</span>,
                        latitudeDelta:<span class="hljs-number">0.01</span>, longitudeDelta:<span class="hljs-number">0.01</span>},
                animate:<span class="hljs-keyword">true</span>,
                regionFit:<span class="hljs-keyword">true</span>,
                userLocation:<span class="hljs-keyword">true</span>,
                annotations:[mountainView]
            });
            <span class="hljs-keyword">self</span>.add(mapview);
            mapview.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> </span>{
                Ti.API.info(<span class="hljs-string">"Annotation "</span> + evt.title + <span class="hljs-string">" clicked, id: "</span> + evt.annotation.myid);
            });    
        }        
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
};
module.exports = ApplicationWindow;
</code></pre><p>App,js (this was to make it more similar to my own app, not sure if the change is needed):</p>
<pre><code class="hljs"><span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> <span class="hljs-collection">{
    var osname = Ti.Platform.osname,
        version = Ti.Platform.version,
        height = Ti.Platform.displayCaps.platformHeight,
        width = Ti.Platform.displayCaps.platformWidth;
    var isTablet = osname === 'ipad' || <span class="hljs-list">(<span class="hljs-keyword">osname</span> === 'android' &amp;&amp; <span class="hljs-list">(<span class="hljs-keyword">width</span> &gt; <span class="hljs-number">899</span> || height &gt; <span class="hljs-number">899</span>)</span>)</span><span class="hljs-comment">;    </span>
    var Window;
    if <span class="hljs-list">(<span class="hljs-keyword">isTablet</span>)</span> <span class="hljs-collection">{
        Window = require<span class="hljs-list">(<span class="hljs-keyword">'ui/tablet/ApplicationWindow'</span>)</span><span class="hljs-comment">;</span>
    }</span>
    else <span class="hljs-collection">{
        Window = require<span class="hljs-list">(<span class="hljs-keyword">'ui/handheld/ApplicationWindow'</span>)</span><span class="hljs-comment">;</span>
    }</span>
    var mainWindow = Ti.UI.createWindow<span class="hljs-list">(<span class="hljs-collection">{
        title: 'Main',
        navBarHidden: <span class="hljs-literal">false</span>
    }</span>)</span><span class="hljs-comment">;</span>
    var startButton = Ti.UI.createButton<span class="hljs-list">(<span class="hljs-collection">{
        height:80,
        width:300,
        title:'Start',
        top:20
    }</span>)</span><span class="hljs-comment">;</span>
    mainWindow.add<span class="hljs-list">(<span class="hljs-keyword">startButton</span>)</span><span class="hljs-comment">;</span>
        startButton.addEventListener<span class="hljs-list">(<span class="hljs-keyword">'click'</span>, function<span class="hljs-list">()</span> <span class="hljs-collection">{
        var ApplicationTabGroup = require<span class="hljs-list">(<span class="hljs-keyword">'ui/common/ApplicationTabGroup'</span>)</span><span class="hljs-comment">;</span>
        new ApplicationTabGroup<span class="hljs-list">(<span class="hljs-keyword">Window</span>)</span>.open<span class="hljs-list">()</span><span class="hljs-comment">;</span>
    }</span>)</span><span class="hljs-comment">;</span>
    mainWindow.open<span class="hljs-list">()</span><span class="hljs-comment">;</span>
}</span>)</span><span class="hljs-list">()</span><span class="hljs-comment">;</span>
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="May 7th 2013, 2:22:22 pm">May 7th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thanks Magnus, </p>
<p>Everybody can submit reports at <a href="jira.appcelerator.org">Jira</a> that can upload entire ZIP projects. Otherwise, please post device logs and Actual Android OS version where this was tested on as well. It will make easier to dig into it for the Appcelerator team.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 7th 2013, 3:10:37 pm">May 7th 2013</span>
								by <span class='authorname'>Eduardo Gomez</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>OK, thanks for the info, I did not see that option in JIRA, perhaps due to only commenting an existing ticket, not creating it myself. Device log and Android version is in the original post above.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 8th 2013, 3:45:15 am">May 8th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Same issue for me. Any news ?</p>
<p>Have you found another way to make maps work with Holo theme ?</p>
<p>thx</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 14th 2013, 11:03:33 am">May 14th 2013</span>
								by <span class='authorname'>Romain Salles</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>No, I have had to concentrate on other things the last few days. Now that Appcelerator has picked this up, hopefully they will have a fix soon, or at least some temporary workaround.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 14th 2013, 11:24:25 am">May 14th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I have created a new Jira with your code minified : <a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC-2285">https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC-2285</a>.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 15th 2013, 9:25:05 am">May 15th 2013</span>
								by <span class='authorname'>Romain Salles</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Great!</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 15th 2013, 12:50:51 pm">May 15th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thanks Romain,</p>
<p>You may want to keep an eye close here instead: <a href="https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-13864">https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-13864</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="May 15th 2013, 1:10:01 pm">May 15th 2013</span>
								by <span class='authorname'>Eduardo Gomez</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>This is exactly the kind of senario that made my company afraid to use Titanium.<br>Any word on this we we have been sailing smoothly and then this problem has cropped up.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 27th 2013, 3:34:57 am">May 27th 2013</span>
								by <span class='authorname'>Nicholas Conroy</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>A workaround for us, is to add the mapView after the tabgroup is built.<br>It works but it is not perfect ; when the mapView is added, a quick black screen appears…</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 27th 2013, 10:08:33 am">May 27th 2013</span>
								by <span class='authorname'>Arnaud Besnier</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Actually we add the mapView on the tab - the one containing the map - first focus (with an eventListener on the tab event &#39;focus&#39;).<br>That the earlier moment it does not crash.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 27th 2013, 10:39:43 am">May 27th 2013</span>
								by <span class='authorname'>Arnaud Besnier</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Arnaud, thanks for the tip! I have tried it in the simple test case and it seems to avoid the crash. Remains to be seen how it works in the real world app.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 27th 2013, 4:03:34 pm">May 27th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Magnus, </p>
<p>let us know if the Arnaud is a factible workaround. If so, Arnaud, can you please post it as a reply? </p>
<p>Best,</p>
<p>Mauro</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 27th 2013, 10:20:41 pm">May 27th 2013</span>
								by <span class='authorname'>Mauro Parra</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Mauro: yes, the &quot;create mapView on focus&quot; approach seems to work in the real world app as well.</p>
<p>Arnaud: could you please add your workaround as an answer? Then I&#39;ll mark it as best answer to the question.</p>
</div>
							<div class="author">
								&mdash; commented <span title="May 29th 2013, 5:17:25 am">May 29th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Update: I have unfortunately now had a few crashes while using the map in the real world app. I am not sure if they are related to the original &quot;Holo crash&quot;, and&#x2F;or has something to do with that I updated the map module to the latest version published on GitHub (a couple of weeks ago). In one case (this time, it came after clicking the built-in zoom out button), I was able to get a log:</p>
<pre><code class="hljs"><span class="hljs-number">05-29 13:32</span>:34.213: D/AndroidRuntime(1650): Shutting down VM
<span class="hljs-number">05-29 13:32</span>:34.213: W/dalvikvm(1650): threadid=1: thread exiting with uncaught exception (group=<span class="hljs-number">0x4185c2</span>a0)
<span class="hljs-number">05-29 13:32</span>:34.213: D/StatusBar(2311): expanding top notification at 8entry.userCollapsed() = false
<span class="hljs-number">05-29 13:32</span>:34.218: E/TiApplication(1650): (main) [<span class="hljs-number">52604,56990</span>] Sending event: exception on thread: main msg:java.lang.IllegalArgumentException: southern latitude exceeds northern latitude (90.0 &gt; -90.0)<span class="hljs-comment">; Titanium 3.1.0,2013/04/15 18:46,57634ef</span>
<span class="hljs-number">05-29 13:32</span>:34.218: E/TiApplication(1650): java.lang.IllegalArgumentException: southern latitude exceeds northern latitude (90.0 &gt; -90.0)
<span class="hljs-number">05-29 13:32</span>:34.218: E/TiApplication(1650):     at com.google.android.gms.internal.at.a(Unknown Source)
<span class="hljs-number">05-29 13:32</span>:34.218: E/TiApplication(1650):     at com.google.android.gms.maps.model.LatLngBounds.&lt;init&gt;(Unknown Source)
<span class="hljs-number">05-29 13:32</span>:34.218: E/TiApplication(1650):     at com.google.android.gms.maps.model.LatLngBounds.&lt;init&gt;(Unknown Source)
<span class="hljs-number">05-29 13:32</span>:34.218: E/TiApplication(1650):     at ti.map.TiUIMapView.updateCamera(TiUIMapView.java:229)
<span class="hljs-number">05-29 13:32</span>:34.218: E/TiApplication(1650):     at ti.map.TiUIMapView.propertyChanged(TiUIMapView.java:142)
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="May 30th 2013, 6:06:16 am">May 30th 2013</span>
								by <span class='authorname'>Magnus Oskarsson</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-263439">
				
						<section>
							<p>I am experiencing the same issue. I get &quot;Unfortunately AppName has stopped&quot; alert and when press OK the app restarts. Is there a solution to this problem as it is a business blocker! Also I see the same errors in the debug output. I am using this in an Alloy &lt;TabGroup….&gt; and it is the second tab</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 28th 2013, 7:55:30 am">May 28th 2013</span>
								by <span class='authorname'>Tsvetan Nikolov</span><br>
								<a class="icon-bg icon-link" href="question/151567/google-maps-v2-module-crashes-when-view-placed-in-tab-group#answer-263439" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Tsvetan, thank you for letting the readers know that many have this problem! A note: in the future, please enter information like this as a comment rather than as an answer (as it contains no solution to the problem).</p>
</p>
										<div class="author">
											&mdash; commented <span title="May 29th 2013, 5:21:05 am">May 29th 2013</span>
											by <span class='authorname'>Magnus Oskarsson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>same problem with SDK 3.2.0.GA</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2014, 8:49:08 pm">January 21st 2014</span>
											by <span class='authorname'>Cesar Quinteiro</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Cesar Quintero</p>
<p>Like Romain Salles pointed out already, did you add the focus event as work around to prevent the crash?</p>
<p>E.G.</p>
<pre><code class="hljs">            <span class="hljs-keyword">var</span> MapModule = <span class="hljs-keyword">require</span>(<span class="hljs-string">'ti.map'</span>);
            <span class="hljs-keyword">var</span> mapview = MapModule.createView({
                region : {
                    latitude : <span class="hljs-number">33.74511</span>,
                    longitude : -<span class="hljs-number">84.38993</span>,
                    latitudeDelta : <span class="hljs-number">0.01</span>,
                    longitudeDelta : <span class="hljs-number">0.01</span>
                }
            });

            <span class="hljs-comment">//DO NOT</span>
            <span class="hljs-comment">//self.add(mapview);</span>
            <span class="hljs-comment">//WORK AROUND</span>
            <span class="hljs-keyword">self</span>.addEventListener(<span class="hljs-string">'focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
                <span class="hljs-keyword">self</span>.add(mapview);
            });
</code></pre><p>What module version, OS device are you using?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2014, 9:05:26 pm">January 21st 2014</span>
											by <span class='authorname'>Eduardo Gomez</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Same issue here. Module version 2.1.3, SDK 3.2.0.GA, Nexus 5 and first Nexus 7.</p>
<p>The map does work if I create a new window and add it straight to that, instead of a view.</p>
<p>I also get several of these in the log:<br>01-25 08:51:58.668: E&#x2F;GooglePlayServicesUtil(17358): The Google Play services resources were not found. Check your project configuration to ensure that the resources are included.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 25th 2014, 5:52:15 am">January 25th 2014</span>
											by <span class='authorname'>Dan Kronholm (Bitfabrikken)</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Same issue here. SDK 3.2.2.GA, Android 4.4, the focus workaround solved the issue for now.</p>
</p>
										<div class="author">
											&mdash; commented <span title="April 17th 2014, 7:43:12 pm">April 17th 2014</span>
											by <span class='authorname'>Ash ESM</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
