<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Cannot stop recording audio in KitchenSink and my app » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Cannot stop recording audio in KitchenSink and my app</h1>
		</header>
		<section>
			<p>If I fire up KitchenSink on iPhone and goto Phone Tab, Sound, Record and hit Start Recording…I am unable to stop the app recording, I hit Stop Recording and the time continues counting. My app has a function to record audio loosely based on the Kitchen Sink code and it does the same.</p>
<p>Is this a bug? Is there any way to stop the thing recording as it just goes on and on and on. I don&#39;t want to remove a very popular feature of my app but I cannot see a fix if the Kitchen Sink code doesn&#39;t work either, anyone know?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 5th 2012, 10:21:03 am">August 5th 2012</span>
				by <span class='authorname'>Stephen Page</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>kitchensink</span></li>
					
						<li><span class='tagname'>media</span></li>
					
						<li><span class='tagname'>record</span></li>
					
				</ul>
			

			<section>
				<h5>6 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Missing from your question are a number of important pieces of information. I suggest you take a look at the <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Using+Questions+and+Answers">Using Questions and Answers</a> article, specifically the Q&amp;A Question Checklist.  The missing information is critical to reproducing problems in a test environment and often indicates other factors that cause the undesirable outcome you are experiencing.</p>
<hr>
<p>Specifically absent are your environment details, the SDK you are using, the hardware you are testing on, and code snippets detailing how you are calling Ti.Media.AudioRecorder</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 5th 2012, 12:07:27 pm">August 5th 2012</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Ti SDK is 2.1.1.GA, Testing on the iPhone 4 (not S),  My code is irrelevant as it fails in the code I was given (below) AND with Kitchen Sink, so its more than just my code at issue here, hence why I didn&#39;t supply it (I normally do)</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 6th 2012, 9:11:55 am">August 6th 2012</span>
								by <span class='authorname'>Stephen Page</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;ve just upgraded XCode and am building to iOS 5.1 and my all aslo fails for recording. This is with I&#39;ve attempted to build using Ti 1.8.2 through 2.1.2 and none of them work.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 9th 2012, 6:28:33 pm">September 9th 2012</span>
								by <span class='authorname'>Sosh Howell</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Some additional information: this appears to only be an issue for me on the simulator as I&#39;m running the app on the &quot;the new&quot; iPad and recording is working fine there.</p>
<p>Also, not documented at all, but make sure to call Ti.Media.startMicrophoneMonitor() before you start recording. As there is no documentation I am not sure why, I just know that if its not this way, the app will fail.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 9th 2012, 6:37:53 pm">September 9th 2012</span>
								by <span class='authorname'>Sosh Howell</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Sosh, as referenced in my answer below it is a general iOS issue when you upgrade that applies to the simulator. See this this <a href="http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;7961840&#x2F;what-does-this-gdb-output-mean">stackoverflow link</a>. </p>
<p>I have released an iPad app using 2.1.0 that both records and plays - I did on device dev work to test.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 9th 2012, 11:39:47 pm">September 9th 2012</span>
								by <span class='authorname'>David Bankier</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Have any answer here?<br>I have the same problem in my app. I use the Ti.SDK 2.1.2GA(also 2.1.3GA and Xcode 4.5 and the bug is always happen. I can&#39;t remove this feature in my app…</p>
<p>Anyone help?</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 26th 2012, 3:28:59 am">September 26th 2012</span>
								by <span class='authorname'>Huang Fish</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>7</span> Votes</div>
			<div class="answers"><span>7</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>7 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-244920">
				
						<section>
							<p>Answered <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;140272&#x2F;sound-problem-getting-some-wierd-error-sometimes.html#answer-244919">here</a>.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 9th 2012, 11:36:32 pm">August 9th 2012</span>
								by <span class='authorname'>David Bankier</span><br>
								<a class="icon-bg icon-link" href="question/140571/cannot-stop-recording-audio-in-kitchensink-and-my-app.html#answer-244920" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I am hoping this works (looks like it will) as every tried so far could not replicate it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2012, 6:02:03 am">August 10th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That is to do with PLAYING a sound, I am talking about RECORDING a sound. Playing works fine, recording does not.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2012, 5:53:55 am">August 11th 2012</span>
											by <span class='authorname'>Stephen Page</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Judging by your error logs below, e.g. </p>
<p><code>Error: AudioFileCreateWithURL failed</code></p>
<p>and </p>
<p><code>Symbol not found: ___CFObjCIsCollectable</code></p>
<p> it definitely relates. Try it on a device and prove me wrong.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2012, 9:42:29 am">August 11th 2012</span>
											by <span class='authorname'>David Bankier</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry, what I mean is you want get that specific error on the device. Which doesn&#39;t mean you don&#39;t have other errors. I have no problem recording and play sound on a device using 2.1.1 and 5.1.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2012, 10:10:54 am">August 11th 2012</span>
											by <span class='authorname'>David Bankier</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I wrote up recording code today and it works on an iPad 2 without issue.</p>
<p>timobile sdk 2.1.3RC, ipad 2 iOS 5.1</p>
<p><code>Error: AudioFileCreateWithURL failed</code> &lt;– That occurs on the simulator though, and results in a 0 byte file.  why? because the simulator has no access to a mic input.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 23rd 2012, 12:56:41 am">September 23rd 2012</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247223">
				
						<section>
							<p>All this used to work great. But now I keep getting a file size of 0 and sometimes the following error: </p>
<p>AudioFileCreateWithURL failed (-50)</p>
<p>I&#39;m using Xcode 4.4.1 and Titanium SDK 2.1.2.GA</p>
<p>I don&#39;t know what is going on…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 13th 2012, 2:44:33 pm">September 13th 2012</span>
								by <span class='authorname'>Michael Humeny</span><br>
								<a class="icon-bg icon-link" href="question/140571/cannot-stop-recording-audio-in-kitchensink-and-my-app.html#answer-247223" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-248585">
				
						<section>
							<p>I&#39;m having the same issue. I&#39;ve isolated the problem to the line <code>recording.start();</code><br>My setup is 2.1.3RC w&#x2F; XCode 4.5, iOS 6 simulator. This used to work fine before upgrading to the latest sdk &amp; xcode.</p>
<p>I haven&#39;t tried w&#x2F; an actual iOS 6 device as I don&#39;t want to loose Google Maps on my phone :&#x2F;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 3rd 2012, 9:18:45 pm">October 3rd 2012</span>
								by <span class='authorname'>Shashi Jain</span><br>
								<a class="icon-bg icon-link" href="question/140571/cannot-stop-recording-audio-in-kitchensink-and-my-app.html#answer-248585" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-256055">
				
						<section>
							<p>It seems you&#39;ll need to update your Xcode in order to fix it.</p>
<p>Quoting: http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;7961840&#x2F;what-does-this-gdb-output-mean</p>
<p>&quot;This issue is finally fixed within Xcode Version 4.5 (4G182), iOS SDK 6.0.<br>Note:<br>The issue persists even in Xcode Version 4.5 when used in conjunction with the iOS 5.1 (or lower) simulator.&quot;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 4th 2013, 12:34:08 pm">February 4th 2013</span>
								by <span class='authorname'>Joseandro Luiz</span><br>
								<a class="icon-bg icon-link" href="question/140571/cannot-stop-recording-audio-in-kitchensink-and-my-app.html#answer-256055" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I just updated my XCode to the all the latest and I&#39;m sill getting the recording fail on the simulator. Did this fix it for you?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2013, 2:54:15 pm">February 4th 2013</span>
											by <span class='authorname'>Kosso</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have only tried to record it, but it seems the output I was saw was just garbage. I tried the Kitchen Sink example but it also failed.</p>
<p>Do you know if there is a ticket opened for this issue?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2013, 3:06:14 pm">February 4th 2013</span>
											by <span class='authorname'>Joseandro Luiz</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-262294">
				
						<section>
							<p>This works on the device but not on the simulator (6.1)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 7th 2013, 11:59:58 am">May 7th 2013</span>
								by <span class='authorname'>Tony Yustein</span><br>
								<a class="icon-bg icon-link" href="question/140571/cannot-stop-recording-audio-in-kitchensink-and-my-app.html#answer-262294" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-244501">
				
						<section>
							<p>Hi Stephen</p>
<p>Without a code snippet I am going to have to guess the detail of your bug.</p>
<p>Having reviewed the Kitchen Sink code (v2.1.1) the audio recorder, plays, pauses and stops.</p>
<p>The code from their example (shortened) to achieve this would be.</p>
<p>To play</p>
<pre><code class="hljs">var <span class="hljs-keyword">sound</span> = Titanium.Media.createSound({<span class="hljs-keyword">sound</span>:<span class="hljs-keyword">file</span>});
<span class="hljs-keyword">sound</span>.<span class="hljs-keyword">play</span>();
</code></pre><p>To stop </p>
<pre><code class="hljs">sound.stop()<span class="hljs-comment">;</span>
sound.release()<span class="hljs-comment">;</span>
sound = null<span class="hljs-comment">;</span>
</code></pre><p>They really want this to stop - with three separate commands :)</p>
<p>These worked fine in my tests.</p>
<p>If this has not given you enough information, provide a code snippet I will try and find an answer for you.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 5th 2012, 11:09:27 am">August 5th 2012</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/140571/cannot-stop-recording-audio-in-kitchensink-and-my-app.html#answer-244501" rel="permalink">permalink</a>
							</div>

							<h5>10 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>You&#39;ve told me how to stop PLAYBACK but what I asked about was hot to stop RECORDING, that does not appear to work even in Kitchen Sink.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2012, 11:31:21 am">August 5th 2012</span>
											by <span class='authorname'>Stephen Page</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Sorry - been at this a while.</p>
<p>I am going to put together a test app and see what happens.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 5th 2012, 11:34:09 am">August 5th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have created a test app and it works fine.  The code is readable but not pretty, but I have included it at the bottom of this comment for reference.</p>
<p>Setup stuff</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> recording = Ti.Media.createAudioRecorder();
recording.compression = Ti.Media.AUDIO_FORMAT_ULAW;
recording.<span class="hljs-keyword">format</span> = Ti.Media.AUDIO_FILEFORMAT_WAVE;
<span class="hljs-keyword">var</span> <span class="hljs-keyword">file</span>, <span class="hljs-keyword">timer</span>, duration = 0;;
</code></pre><p>I started recording with </p>
<pre><code class="hljs">recording.<span class="hljs-literal">start</span>();
</code></pre><p>I stopped it using</p>
<pre><code class="hljs"><span class="hljs-keyword">file</span> = recording.<span class="hljs-keyword">stop</span>();
Ti.API.info(<span class="hljs-string">'file size'</span>, <span class="hljs-keyword">file</span>.<span class="hljs-built_in">size</span>); // shows <span class="hljs-built_in">size</span> of audio <span class="hljs-keyword">file</span> <span class="hljs-type">in</span> bytes
// extra goes here
</code></pre><p>I also added this to where is says &#39;extra&#39;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> newDir = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory);
<span class="hljs-keyword">var</span> newFile = Titanium.Filesystem.getFile(newDir.nativePath,<span class="hljs-string">'audio.wav'</span>);
newFile.<span class="hljs-keyword">write</span>(<span class="hljs-keyword">file</span>);
</code></pre><p>This saves the file to the local file system.</p>
<p>I created a test button to play this file back.&#39;Test Playback&#39;  - you can see that in the code below.</p>
<p>This is raw code - no re-factoring has occurred so do not judge me!  Simply add this to a project with at least a reference to a window called <code>win</code>.  It does however include all the captions for level and volume etc.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showLevels</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">var</span> peak = Ti.Media.peakMicrophonePower;
    <span class="hljs-keyword">var</span> avg = Ti.Media.averageMicrophonePower;
    duration = duration + <span class="hljs-number">1</span>;
    label.setText(<span class="hljs-string">'duration: '</span> + duration + <span class="hljs-string">' seconds\npeak power: '</span> + peak + <span class="hljs-string">'\navg power: '</span> + avg);
}

Titanium.Media.audioSessionMode = Ti.Media.AUDIO_SESSION_MODE_PLAY_AND_RECORD;
<span class="hljs-keyword">var</span> recording = Ti.Media.createAudioRecorder();
recording.compression = Ti.Media.AUDIO_FORMAT_ULAW;
recording.format = Ti.Media.AUDIO_FILEFORMAT_WAVE;
<span class="hljs-keyword">var</span> file, sound, timer, duration = <span class="hljs-number">0</span>;;


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lineTypeToStr</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> type = Ti.Media.audioLineType;
    <span class="hljs-keyword">switch</span> (type) {
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_HEADSET_INOUT:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"headset"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_RECEIVER_AND_MIC:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"receiver/mic"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_HEADPHONES_AND_MIC:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"headphones/mic"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_HEADPHONES:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"headphones"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_LINEOUT:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"lineout"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_SPEAKER:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"speaker"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_MICROPHONE:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"microphone"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_MUTED:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"silence switch on"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_UNAVAILABLE:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"unavailable"</span>;
        <span class="hljs-keyword">case</span> Ti.Media.AUDIO_UNKNOWN:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"unknown"</span>;
    }
}



<span class="hljs-keyword">var</span> btnRecord = Titanium.UI.createButton({
    height: <span class="hljs-number">40</span>,
    top: <span class="hljs-number">20</span>,
    title: <span class="hljs-string">'Record'</span>,
    width: <span class="hljs-number">200</span>
});
win.add(btnRecord);
btnRecord.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    <span class="hljs-keyword">if</span> (recording.recording) {
        Ti.API.info(<span class="hljs-string">'record'</span>, <span class="hljs-string">'stopped'</span>);
        file = recording.stop();
        Ti.API.info(<span class="hljs-string">'file size'</span>, file.size);
        <span class="hljs-keyword">var</span> newDir = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory);
        <span class="hljs-keyword">var</span> newFile = Titanium.Filesystem.getFile(newDir.nativePath,<span class="hljs-string">'audio.wav'</span>);
        newFile.write(file);
        btnRecord.title = <span class="hljs-string">"Record"</span>;
        Ti.Media.stopMicrophoneMonitor();
        clearInterval(timer);
    } <span class="hljs-keyword">else</span> {    
        Ti.API.info(<span class="hljs-string">'record'</span>, <span class="hljs-string">'recording'</span>);
        <span class="hljs-keyword">if</span> (!Ti.Media.canRecord) {
            Ti.UI.createAlertDialog({
                title:<span class="hljs-string">'Error!'</span>,
                message:<span class="hljs-string">'No audio recording hardware is currently connected.'</span>
            }).show();
            <span class="hljs-keyword">return</span>;
        }
        btnRecord.title = <span class="hljs-string">"Stop"</span>;
        recording.start();
        Ti.Media.startMicrophoneMonitor();
        duration = <span class="hljs-number">0</span>;
        showLevels();
        timer = setInterval(showLevels,<span class="hljs-number">1000</span>);
    }
});

<span class="hljs-keyword">var</span> label = Titanium.UI.createLabel({
    text:<span class="hljs-string">'Levels here'</span>,
    top:<span class="hljs-number">150</span>,
    color:<span class="hljs-string">'#999'</span>,
    textAlign:<span class="hljs-string">'center'</span>,
    width:<span class="hljs-string">'auto'</span>,
    height:<span class="hljs-string">'auto'</span>
});
win.add(label);

<span class="hljs-keyword">var</span> linetype = Titanium.UI.createLabel({
    text: <span class="hljs-string">"audio line type: "</span>+lineTypeToStr(),
    bottom: <span class="hljs-number">20</span>,
    color:<span class="hljs-string">'#999'</span>,
    textAlign:<span class="hljs-string">'center'</span>,
    width:<span class="hljs-string">'auto'</span>,
    height:<span class="hljs-string">'auto'</span>
});
win.add(linetype);

<span class="hljs-keyword">var</span> volume = Titanium.UI.createLabel({
    text: <span class="hljs-string">"volume: "</span> + Ti.Media.volume,
    bottom: <span class="hljs-number">70</span>,
    color: <span class="hljs-string">'#999'</span>,
    textAlign: <span class="hljs-string">'center'</span>,
    width: <span class="hljs-string">'auto'</span>,
    height: <span class="hljs-string">'auto'</span>
});
win.add(volume);

Ti.Media.addEventListener(<span class="hljs-string">'linechange'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    linetype.setText(<span class="hljs-string">"audio line type: "</span> + lineTypeToStr());
});
Ti.Media.addEventListener(<span class="hljs-string">'volume'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    volume.text = <span class="hljs-string">"volume: "</span> + e.volume;
});

<span class="hljs-keyword">var</span> btnTest = Titanium.UI.createButton({
    height: <span class="hljs-number">40</span>,
    bottom: <span class="hljs-number">100</span>,
    title: <span class="hljs-string">'Test Playback'</span>,
    width: <span class="hljs-number">200</span>
});
win.add(btnTest);
btnTest.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    <span class="hljs-comment">//var audiofile = Titanium.Filesystem.getFile(Titanium.Filesystem.resourcesDirectory, 'cricket.wav');</span>
    <span class="hljs-keyword">var</span> audiofile = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory, <span class="hljs-string">'audio.wav'</span>);
    <span class="hljs-keyword">var</span> testsound = Titanium.Media.createSound({url:audiofile});
    testsound.play();
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 5th 2012, 1:22:30 pm">August 5th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Same problem. Once you start recording you cannot STOP. Hitting the stop button, has no effect, its not the button, as if you slip a Ti.API.info into the event listener you can see the button being activated.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 6th 2012, 9:13:24 am">August 6th 2012</span>
											by <span class='authorname'>Stephen Page</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I also get these errors:</p>
<pre><code class="hljs">[INFO] record recording
<span class="hljs-number">2012</span>-<span class="hljs-number">08</span>-<span class="hljs-number">06</span> <span class="hljs-number">12</span>:<span class="hljs-number">41</span>:<span class="hljs-number">19.910</span> BFO DEV[<span class="hljs-number">3983</span>:<span class="hljs-number">3</span>b03] Error loading <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span><span class="hljs-string">AppleHDAHALPlugIn:</span>  dlopen(<span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span>AppleHDAHALPlugIn, <span class="hljs-number">262</span>): Symbol not <span class="hljs-string">found:</span> ___CFObjCIsCollectable
  Referenced <span class="hljs-string">from:</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
  Expected <span class="hljs-string">in:</span> <span class="hljs-regexp">/Applications/</span>Xcode.app<span class="hljs-regexp">/Contents/</span>Developer<span class="hljs-regexp">/Platforms/</span>iPhoneSimulator.platform<span class="hljs-regexp">/Developer/</span>SDKs<span class="hljs-regexp">/iPhoneSimulator5.1.sdk/</span>System<span class="hljs-regexp">/Library/</span>Frameworks<span class="hljs-regexp">/CoreFoundation.framework/</span>CoreFoundation
 <span class="hljs-keyword">in</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
<span class="hljs-number">2012</span>-<span class="hljs-number">08</span>-<span class="hljs-number">06</span> <span class="hljs-number">12</span>:<span class="hljs-number">41</span>:<span class="hljs-number">19.912</span> BFO DEV[<span class="hljs-number">3983</span>:<span class="hljs-number">3</span>b03] Error loading <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span><span class="hljs-string">AppleHDAHALPlugIn:</span>  dlopen(<span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span>AppleHDAHALPlugIn, <span class="hljs-number">262</span>): Symbol not <span class="hljs-string">found:</span> ___CFObjCIsCollectable
  Referenced <span class="hljs-string">from:</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
  Expected <span class="hljs-string">in:</span> <span class="hljs-regexp">/Applications/</span>Xcode.app<span class="hljs-regexp">/Contents/</span>Developer<span class="hljs-regexp">/Platforms/</span>iPhoneSimulator.platform<span class="hljs-regexp">/Developer/</span>SDKs<span class="hljs-regexp">/iPhoneSimulator5.1.sdk/</span>System<span class="hljs-regexp">/Library/</span>Frameworks<span class="hljs-regexp">/CoreFoundation.framework/</span>CoreFoundation
 <span class="hljs-keyword">in</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
<span class="hljs-number">2012</span>-<span class="hljs-number">08</span>-<span class="hljs-number">06</span> <span class="hljs-number">12</span>:<span class="hljs-number">41</span>:<span class="hljs-number">19.913</span> BFO DEV[<span class="hljs-number">3983</span>:<span class="hljs-number">3</span>b03] Error loading <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span><span class="hljs-string">AppleHDAHALPlugIn:</span>  dlopen(<span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span>AppleHDAHALPlugIn, <span class="hljs-number">262</span>): Symbol not <span class="hljs-string">found:</span> ___CFObjCIsCollectable
  Referenced <span class="hljs-string">from:</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
  Expected <span class="hljs-string">in:</span> <span class="hljs-regexp">/Applications/</span>Xcode.app<span class="hljs-regexp">/Contents/</span>Developer<span class="hljs-regexp">/Platforms/</span>iPhoneSimulator.platform<span class="hljs-regexp">/Developer/</span>SDKs<span class="hljs-regexp">/iPhoneSimulator5.1.sdk/</span>System<span class="hljs-regexp">/Library/</span>Frameworks<span class="hljs-regexp">/CoreFoundation.framework/</span>CoreFoundation
 <span class="hljs-keyword">in</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
<span class="hljs-number">2012</span>-<span class="hljs-number">08</span>-<span class="hljs-number">06</span> <span class="hljs-number">12</span>:<span class="hljs-number">41</span>:<span class="hljs-number">19.913</span> BFO DEV[<span class="hljs-number">3983</span>:<span class="hljs-number">3</span>b03] Error loading <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span><span class="hljs-string">AppleHDAHALPlugIn:</span>  dlopen(<span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span>AppleHDAHALPlugIn, <span class="hljs-number">262</span>): Symbol not <span class="hljs-string">found:</span> ___CFObjCIsCollectable
  Referenced <span class="hljs-string">from:</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
  Expected <span class="hljs-string">in:</span> <span class="hljs-regexp">/Applications/</span>Xcode.app<span class="hljs-regexp">/Contents/</span>Developer<span class="hljs-regexp">/Platforms/</span>iPhoneSimulator.platform<span class="hljs-regexp">/Developer/</span>SDKs<span class="hljs-regexp">/iPhoneSimulator5.1.sdk/</span>System<span class="hljs-regexp">/Library/</span>Frameworks<span class="hljs-regexp">/CoreFoundation.framework/</span>CoreFoundation
 <span class="hljs-keyword">in</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
<span class="hljs-number">2012</span>-<span class="hljs-number">08</span>-<span class="hljs-number">06</span> <span class="hljs-number">12</span>:<span class="hljs-number">41</span>:<span class="hljs-number">19.914</span> BFO DEV[<span class="hljs-number">3983</span>:<span class="hljs-number">3</span>b03] Error loading <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span><span class="hljs-string">AppleHDAHALPlugIn:</span>  dlopen(<span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span>AppleHDAHALPlugIn, <span class="hljs-number">262</span>): Symbol not <span class="hljs-string">found:</span> ___CFObjCIsCollectable
  Referenced <span class="hljs-string">from:</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
  Expected <span class="hljs-string">in:</span> <span class="hljs-regexp">/Applications/</span>Xcode.app<span class="hljs-regexp">/Contents/</span>Developer<span class="hljs-regexp">/Platforms/</span>iPhoneSimulator.platform<span class="hljs-regexp">/Developer/</span>SDKs<span class="hljs-regexp">/iPhoneSimulator5.1.sdk/</span>System<span class="hljs-regexp">/Library/</span>Frameworks<span class="hljs-regexp">/CoreFoundation.framework/</span>CoreFoundation
 <span class="hljs-keyword">in</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
<span class="hljs-number">2012</span>-<span class="hljs-number">08</span>-<span class="hljs-number">06</span> <span class="hljs-number">12</span>:<span class="hljs-number">41</span>:<span class="hljs-number">19.915</span> BFO DEV[<span class="hljs-number">3983</span>:<span class="hljs-number">3</span>b03] Error loading <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span><span class="hljs-string">AppleHDAHALPlugIn:</span>  dlopen(<span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Extensions/</span>AppleHDA.kext<span class="hljs-regexp">/Contents/</span>PlugIns<span class="hljs-regexp">/AppleHDAHALPlugIn.bundle/</span>Contents<span class="hljs-regexp">/MacOS/</span>AppleHDAHALPlugIn, <span class="hljs-number">262</span>): Symbol not <span class="hljs-string">found:</span> ___CFObjCIsCollectable
  Referenced <span class="hljs-string">from:</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
  Expected <span class="hljs-string">in:</span> <span class="hljs-regexp">/Applications/</span>Xcode.app<span class="hljs-regexp">/Contents/</span>Developer<span class="hljs-regexp">/Platforms/</span>iPhoneSimulator.platform<span class="hljs-regexp">/Developer/</span>SDKs<span class="hljs-regexp">/iPhoneSimulator5.1.sdk/</span>System<span class="hljs-regexp">/Library/</span>Frameworks<span class="hljs-regexp">/CoreFoundation.framework/</span>CoreFoundation
 <span class="hljs-keyword">in</span> <span class="hljs-regexp">/System/</span>Library<span class="hljs-regexp">/Frameworks/</span>Security.framework<span class="hljs-regexp">/Versions/</span>A/Security
<span class="hljs-string">Error:</span> AudioFileCreateWithURL failed (-<span class="hljs-number">50</span>)
[INFO] record recording
<span class="hljs-string">Error:</span> AudioFileCreateWithURL failed (-<span class="hljs-number">50</span>)
[INFO] record recording
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 6th 2012, 9:43:05 am">August 6th 2012</span>
											by <span class='authorname'>Stephen Page</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Never did get an answer to this, anyone know if its a bug? Can anyone help?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 9th 2012, 9:55:10 am">August 9th 2012</span>
											by <span class='authorname'>Stephen Page</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have been trying.</p>
<p>What happens when you run this on the simulator?</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 9th 2012, 10:12:27 am">August 9th 2012</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Same thing, never stops.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 11th 2012, 5:52:40 am">August 11th 2012</span>
											by <span class='authorname'>Stephen Page</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Is there a working example of recording audio and playback on an iphone anywhere?  The latest Kitchen Sink (2.1.2) doesn&#39;t work - at least not on my 3GS.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 5th 2012, 4:52:53 am">September 5th 2012</span>
											by <span class='authorname'>Rick Cox</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;ve had to remove features of an already released app as I am unable to update the app because a) I cannot get the record function to work on an iPhone b) The record function seems to have been removed from Android. Not good.</p>
</p>
										<div class="author">
											&mdash; commented <span title="September 7th 2012, 1:05:27 pm">September 7th 2012</span>
											by <span class='authorname'>Stephen Page</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-247845">
				
						<section>
							<p>Same problem</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 22nd 2012, 11:15:12 pm">September 22nd 2012</span>
								by <span class='authorname'>Max Wang</span><br>
								<a class="icon-bg icon-link" href="question/140571/cannot-stop-recording-audio-in-kitchensink-and-my-app.html#answer-247845" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>me too</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 31st 2013, 5:16:37 pm">January 31st 2013</span>
											by <span class='authorname'>Paulo Filipak</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Whenever i check the recording object for the property recording, it never seems to return true. if I bypass that check..and go straight and call stop()……i get a file size of 0</p>
<p>Any thoughts??</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 5th 2013, 7:14:10 pm">March 5th 2013</span>
											by <span class='authorname'>Peter Ladis</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-1</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
