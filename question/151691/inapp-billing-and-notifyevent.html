<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>InApp Billing and NOTIFY_EVENT » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>InApp Billing and NOTIFY_EVENT</h1>
		</header>
		<section>
			<p>Is anyone using Android InApp Billing? The dialogs have recently changed - image links to the new versions are below.  At the same time, the NOTIFY_EVENT response doesn&#39;t happen anymore, so there&#39;s no way to get confirmation that a purchase was successful. I&#39;ve copied code below that&#39;s straightforward, and worked perfectly before the dialogs changed. Did the dialog changes come from Google Play or from Android? Has anyone seen this yet and know how to work around it? Thanks for any help!</p>
<p>Buy Dialog: https:&#x2F;&#x2F;www.box.com&#x2F;s&#x2F;g2urfd7alro2f8vj64vl</p>
<p>Success Dialog: https:&#x2F;&#x2F;www.box.com&#x2F;s&#x2F;irn1t6vbujvj00jdww61</p>
<pre><code class="hljs">InAppBilling.addEventListener(InAppBilling.ON_CONNECT_EVENT, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{
    <span class="hljs-keyword">if</span> ( processTerminated ) {
        Ti.API.debug( <span class="hljs-string">'RESPONSE AFTER TERMINATION: '</span> + <span class="hljs-built_in">JSON</span>.stringify( e ) );
        <span class="hljs-keyword">return</span>;
    }
    Ti.API.info(<span class="hljs-string">'ON_CONNECT_EVENT'</span>);
    <span class="hljs-keyword">var</span> synchronousResponse = InAppBilling.requestPurchase({
        productId: androidProductId,
        productType: InAppBilling.ITEM_TYPE_INAPP,
        developerPayload: <span class="hljs-string">'some user stuff...'</span>
    });
    displaySynchronousResponseCodes( <span class="hljs-string">'ON_CONNECT_EVENT'</span>, synchronousResponse);
})

InAppBilling.addEventListener(InAppBilling.NOTIFY_EVENT, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{
    Ti.API.info(<span class="hljs-string">'NOTIFY_EVENT, Id = '</span> + e.notifyId);
    <span class="hljs-keyword">var</span> synchronousResponse = InAppBilling.getPurchaseInformation({
        notificationIds: [e.notifyId]
    });
    displaySynchronousResponseCodes( <span class="hljs-string">'NOTIFY_EVENT'</span>, synchronousResponse);
});
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 28th 2013, 7:48:47 pm">April 28th 2013</span>
				by <span class='authorname'>David Asher</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>inapp billing</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
