<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>When to register for push??? Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>When to register for push???</h1>
		</header>
		<section>
			<p>Hey all,<br>when is the right time to use Ti.Network.registerForPushNotifications method?<br>should i call it <strong>every time</strong> the app loads? or maybe just <strong>once</strong> after a success user login?</p>
<p>I&#39;m asking because my callback function doesn&#39;t work all the time.</p>
<p>10x!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 2nd 2012, 9:44:32 am">July 2nd 2012</span>
				by <span class='authorname'>Nir Weber</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>notification</span></li>
					
						<li><span class='tagname'>push</span></li>
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-242324">
				
						<section>
							<p>Take a look <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;2.0&#x2F;index.html#!&#x2F;api&#x2F;Titanium.Network-method-registerForPushNotifications">here</a>.</p>
<p>Ti.Network.registerForPushNotifications will prompt the user a deny&#x2F;allow popup to authorize the app for push notifications.</p>
<p>If the user expresses the choise this function will be ignored in next executions.<br>User will be able to change the deny&#x2F;allow push authorization in the iOs settings menu.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 2nd 2012, 10:42:37 am">July 2nd 2012</span>
								by <span class='authorname'>Stefano Di Luca</span><br>
								<a class="icon-bg icon-link" href="question/139112/when-to-register-for-push.html#answer-242324" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Ok. great.<br>the url you referred me to says:<br>&quot;This method should be called at application startup.&quot;<br>no prob.</p>
<p>but, does the app &quot;remembers&quot; the callback function I&#39;ve specified?<br>lets say the user declined the use of push notification but changed his mind afterwards, do i need to enter the callback function again?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 10:47:38 am">July 2nd 2012</span>
											by <span class='authorname'>Nir Weber</span>
										</div>
									</li>
								
									<li class="comment">
										<p><pre><code class="hljs">Titanium.Network.registerForPushNotifications({
    types: [
        Titanium.Network.NOTIFICATION_TYPE_BADGE,
        Titanium.Network.NOTIFICATION_TYPE_ALERT,
        Titanium.Network.NOTIFICATION_TYPE_SOUND
    ],
    success:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{
        alert(<span class="hljs-string">'deny/allow registered to remote Apple service. '</span> + <span class="hljs-built_in">JSON</span>.stringify(e));
    },
    error:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{
        alert(<span class="hljs-string">'Some error occurred'</span>  + <span class="hljs-built_in">JSON</span>.stringify(e));
    },
    callback:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{
        <span class="hljs-comment">// called when a push notification is received.</span>
        alert(<span class="hljs-string">'Received a push notification '</span> + <span class="hljs-built_in">JSON</span>.stringify(e));
    }
});
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 2nd 2012, 11:02:29 am">July 2nd 2012</span>
											by <span class='authorname'>Stefano Di Luca</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242347">
				
						<section>
							<p>I&#39;m just building something along these lines at the moment too. </p>
<p>I&#39;ve done it like this : </p>
<p>Set up two functions in app.js - one to register the device for push (followed by then registering the device token with my server). And another for unregistering. </p>
<p>I then have two custom event listeners wait for a &#39;register&#39; and &#39;unregister&#39; event so I can call these functions from elsewhere in my app - specifically, on my settings page where I have a switch to turn the push notification on of off).</p>
<p>The switch also sets a boolean app property to say if push has been turned on and off. This is used to set the value of the switch and also to let the app know if it needs to registerForPushNotifications again when the app is launched again. </p>
<p>I found that if I completely closed down the app and opened it again without checking what the user has set previously, then re-registering (though this time not needing to re-register at my server), then I wouldn&#39;t get any notifications.</p>
<p>Does that make sense? ;)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 2nd 2012, 3:34:28 pm">July 2nd 2012</span>
								by <span class='authorname'>Kosso</span><br>
								<a class="icon-bg icon-link" href="question/139112/when-to-register-for-push.html#answer-242347" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
