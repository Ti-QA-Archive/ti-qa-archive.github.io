<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Pagination for scrollview » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Pagination for scrollview</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I&#39;m trying to load around 100+ images in a scrollview….but the app crash because of memory. So, I&#39;m trying to do pagination. Can someone show an example how to do it with scrollview?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 26th 2013, 3:47:24 am">March 26th 2013</span>
				by <span class='authorname'>Chung Farn Kien</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>imageview</span></li>
					
						<li><span class='tagname'>pagination</span></li>
					
						<li><span class='tagname'>scrollview</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Plz explain the os you are targeting and code snippet what you are trying to achieve</p>
<p>Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2013, 4:04:49 am">March 26th 2013</span>
								by <span class='authorname'>Muhammad Wahhab Mirza</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Chung,</p>
<p>You can use lazy load for displaying images in scrollview.</p>
<p>Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2013, 4:06:22 am">March 26th 2013</span>
								by <span class='authorname'>Sunny Patel</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>@Muhammad I&#39;m building for iPhone and using 3.0.2.GA<br>@sunny how do i do that? is there an example i can refer to?</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2013, 4:24:40 am">March 26th 2013</span>
								by <span class='authorname'>Chung Farn Kien</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi chung, You can try below sample.</p>
<p>Because in below sample, the <strong>scrollEnd</strong> event is used and you want the load images at the scrollEnd. so, Please Can you try this.?. May be it helpful to solve your problem</p>
<p>If Problem is not solved then we will go for Other Solution.</p>
<p>Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2013, 4:45:53 am">March 26th 2013</span>
								by <span class='authorname'>Jigar Maheshwari</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>i know the below sample works….but it will take some time to incorporate it in my code….but if there is any other solution, you can keep posting….</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 26th 2013, 4:51:25 am">March 26th 2013</span>
								by <span class='authorname'>Chung Farn Kien</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-259377">
				
						<section>
							<p>###Hi Use this replace  innerviews with ur Imageview</p>
<pre><code class="hljs">    var videoButton1 = Ti.UI.createButton({
        <span class="hljs-string">title :</span> <span class="hljs-string">'Play Video'</span>,
        <span class="hljs-string">height :</span> <span class="hljs-number">40</span>,
        <span class="hljs-string">width :</span> <span class="hljs-number">80</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-number">0</span>,

    });
    videoButton1.addEventListener(<span class="hljs-string">'click'</span>, function() {
        <span class="hljs-comment">//tab1.close();</span>
        tabGroup.removeTab(tab1);
        win.close();
    });
    var serollview1 = Ti.UI.createScrollView({
        <span class="hljs-string">top :</span> <span class="hljs-number">0</span>,
        <span class="hljs-string">bottom :</span> <span class="hljs-number">40</span>,
        <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
        <span class="hljs-string">right :</span> <span class="hljs-number">10</span>,
        <span class="hljs-string">layout :</span> <span class="hljs-string">'vertical'</span>,
<span class="hljs-label">        backbackgroundColor:</span><span class="hljs-string">'yellow'</span>
    });
    serollview1.addEventListener(<span class="hljs-string">'scrollEnd'</span>, function(e) {
        Ti.API.info(<span class="hljs-string">'Hello World'</span>);
        <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            serollview1.add(Ti.UI.createView({
                <span class="hljs-string">top :</span> <span class="hljs-number">2</span>,
                <span class="hljs-string">height :</span> <span class="hljs-number">60</span>,
                <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'green'</span>,
                <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
                <span class="hljs-string">right :</span> <span class="hljs-number">10</span>,
            }))
        }

    });
    <span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
        serollview1.add(Ti.UI.createView({
            <span class="hljs-string">top :</span> <span class="hljs-number">2</span>,
            <span class="hljs-string">height :</span> <span class="hljs-number">60</span>,
            <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'blue'</span>,
            <span class="hljs-string">left :</span> <span class="hljs-number">10</span>,
            <span class="hljs-string">right :</span> <span class="hljs-number">10</span>,
        }))
    }
    var win = Ti.UI.createWindow({
        <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'red'</span>,
        <span class="hljs-string">navBarHidden :</span> <span class="hljs-literal">true</span>
    });
    win.add(videoButton1);
    win.add(serollview1);
    win.open();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 26th 2013, 4:22:20 am">March 26th 2013</span>
								by <span class='authorname'>Vilas kharate</span><br>
								<a class="icon-bg icon-link" href="../../question/150034/pagination-for-scrollview.html#answer-259377" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>this looks promising…will take some time to try with my code….but will post my result here….</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 26th 2013, 4:28:32 am">March 26th 2013</span>
											by <span class='authorname'>Chung Farn Kien</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>it works with Iphone &amp; Ipad only because scroll event not supports with android?</p>
<p>it will work no problem..</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 26th 2013, 4:43:47 am">March 26th 2013</span>
											by <span class='authorname'>Vilas kharate</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-259380">
				
						<section>
							<p>Hi Chung,</p>
<p>I think this link help you.</p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;118322&#x2F;lazy-load-images">Lazy Load Images</a></p>
<p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 26th 2013, 4:40:50 am">March 26th 2013</span>
								by <span class='authorname'>Sunny Patel</span><br>
								<a class="icon-bg icon-link" href="../../question/150034/pagination-for-scrollview.html#answer-259380" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-259382">
				
						<section>
							<p>I&#39;ll post some code here so maybe u guys can help me incorporate lazy loading….</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> groups = urbanimagelibrary.groups({
        success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">if</span>(limit === e.groups.length)
            {
                updateTableViewGroups(e.groups);
                albumGroup = e.groups;
            }
            <span class="hljs-keyword">else</span>
            {
                limit++;
            }

        },
        error: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            Ti.API.error(<span class="hljs-string">"An error occured! "</span> + e);
        }
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateTableViewGroups</span>(<span class="hljs-params">groups</span>)</span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> counter=<span class="hljs-number">0</span>; counter &lt; groups.length; counter++) {
            <span class="hljs-keyword">var</span> albumContainer = Ti.UI.createScrollView({
                width:screenWidth,
                height:screenHeight - <span class="hljs-number">20</span>,
                contentHeight:Ti.UI.SIZE,
                top:<span class="hljs-number">0</span>,
                backgroundImage:(screenHeight &lt; <span class="hljs-number">568</span>)?<span class="hljs-string">'Images/iphone4_bg.png'</span>:<span class="hljs-string">'Images/iphone5_bg.png'</span>,
                locked:<span class="hljs-literal">false</span>,
                albumTitle:groups[counter].name,
                skin:dateColor[<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*<span class="hljs-number">10</span>)]
            });
            clickGroup(albumContainer, groups[counter]);
            scrollArr.push(albumContainer);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clickGroup</span>(<span class="hljs-params">albumContainer, group</span>)
    </span>{
        <span class="hljs-keyword">var</span> photos = urbanimagelibrary.photos({
          success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            Ti.API.info(<span class="hljs-string">"Number of photos returned: "</span> + e.photos.length);
            totalHeight = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> num = e.photos.length;
            <span class="hljs-keyword">var</span> photoArr = e.photos;
            <span class="hljs-keyword">var</span> dateArr = [];
            <span class="hljs-keyword">var</span> tempo;

            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByDate</span>(<span class="hljs-params">d</span>)
            </span>{
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; photoArr.length; i++) {
                    <span class="hljs-keyword">if</span> ( d === photoArr[i].creationDate ) {
                        tempo = i;
                        <span class="hljs-keyword">return</span> photoArr[i];
                        <span class="hljs-keyword">break</span>;
                    }
                }
            }

            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> p = <span class="hljs-number">0</span>; p &lt; photoArr.length; p++)
            {
                <span class="hljs-keyword">var</span> date = moment(photoArr[p].creationDate).format(<span class="hljs-string">'YYYY/MM/DD'</span>);
                photoArr[p].creationDate = date;
                dateArr.push(date);
            }

            dateArr = dateArr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,b</span>)</span>{
                  a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(a);
                  b = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(b);
                  <span class="hljs-keyword">return</span> a&lt;b?-<span class="hljs-number">1</span>:a&gt;b?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>;
            });
            dateArr.reverse();

            <span class="hljs-keyword">var</span> sortedArray = [];
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> l = <span class="hljs-number">0</span>; l &lt; dateArr.length; l++)
            {
                sortedArray.push(findByDate(dateArr[l]));
                photoArr.splice(tempo, <span class="hljs-number">1</span>);
            }
            photoArr = sortedArray;
            <span class="hljs-keyword">var</span> arr = [];

            <span class="hljs-keyword">while</span>(num &gt; <span class="hljs-number">0</span>)
            {
                <span class="hljs-keyword">var</span> tempArr = [photoArr[<span class="hljs-number">0</span>]];
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> abc = <span class="hljs-number">0</span>; abc &lt; photoArr.length; abc++)
                {
                    <span class="hljs-keyword">if</span>(abc !== photoArr.length -<span class="hljs-number">1</span>)
                    {
                        <span class="hljs-keyword">if</span>(photoArr[abc + <span class="hljs-number">1</span>].creationDate === photoArr[<span class="hljs-number">0</span>].creationDate)
                        {
                            tempArr.push(photoArr[abc + <span class="hljs-number">1</span>]);
                        }
                    }
                }
                arr.push(tempArr);
                <span class="hljs-keyword">var</span> length = tempArr.length;
                photoArr.splice(<span class="hljs-number">0</span>, length);
                num = num - length;
            }


            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> q = <span class="hljs-number">0</span>; q &lt; arr.length; q++)
            {
                albumCreation(albumContainer, arr[q]);
            }
            albumContainer.add(emptyScroll());
            check++;
            <span class="hljs-keyword">if</span>(check === limit)
            {
                test();
            }
          },
          error: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            Ti.API.error(<span class="hljs-string">"An error occured! "</span> + e);
          },
          includeFullSizeImage: <span class="hljs-literal">true</span>,
          groupId: group.id,
        });
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">albumCreation</span>(<span class="hljs-params">albumContainer, photo</span>)</span>{
        <span class="hljs-keyword">var</span> numPhoto = photo.length;
        <span class="hljs-keyword">var</span> pattern = numPhoto%<span class="hljs-number">3</span>;

        <span class="hljs-keyword">switch</span>(pattern)
        {
            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                albumContainer.add(containerC(photo[<span class="hljs-number">0</span>], photo[<span class="hljs-number">1</span>], photo[<span class="hljs-number">2</span>], albumContainer.skin));
                photo.splice(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>);
                numPhoto = numPhoto - <span class="hljs-number">3</span>;
                <span class="hljs-keyword">while</span>(numPhoto &gt; <span class="hljs-number">0</span>)
                {
                    albumContainer.add(topRowContainer(photo[<span class="hljs-number">0</span>], photo[<span class="hljs-number">1</span>], photo[<span class="hljs-number">2</span>]));
                    photo.splice(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>);
                    numPhoto = numPhoto - <span class="hljs-number">3</span>;
                }
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                albumContainer.add(containerA(photo[<span class="hljs-number">0</span>], albumContainer.skin));
                photo.splice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
                numPhoto--;
                <span class="hljs-keyword">while</span>(numPhoto &gt; <span class="hljs-number">0</span>)
                {
                    albumContainer.add(topRowContainer(photo[<span class="hljs-number">0</span>], photo[<span class="hljs-number">1</span>], photo[<span class="hljs-number">2</span>]));
                    photo.splice(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>);
                    numPhoto = numPhoto - <span class="hljs-number">3</span>;
                }
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                albumContainer.add(containerB(photo[<span class="hljs-number">0</span>], photo[<span class="hljs-number">1</span>], albumContainer.skin));
                photo.splice(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);

                numPhoto = numPhoto - <span class="hljs-number">2</span>;
                <span class="hljs-keyword">while</span>(numPhoto &gt; <span class="hljs-number">0</span>)
                {
                    albumContainer.add(topRowContainer(photo[<span class="hljs-number">0</span>], photo[<span class="hljs-number">1</span>], photo[<span class="hljs-number">2</span>]));
                    photo.splice(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>);
                    numPhoto = numPhoto - <span class="hljs-number">3</span>;
                }
                <span class="hljs-keyword">break</span>;
       }
       albumContainer.add(separatorLine());
    }
</code></pre><p>I&#39;ll explain a little here. So I&#39;m retrieving images from the device photo library using this module - https:&#x2F;&#x2F;github.com&#x2F;quickstonesw&#x2F;Appcelerator-Urban-Image-Library. When the app starts, it will get number of album and throughout that it will create scrollview for each album. Then the photos are retrieved for each album. My app crash here. If the number of photos exceed 20-30, it crashes. All the containerA, B and C that you can see is a view that contains the image view.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 26th 2013, 5:01:41 am">March 26th 2013</span>
								by <span class='authorname'>Chung Farn Kien</span><br>
								<a class="icon-bg icon-link" href="../../question/150034/pagination-for-scrollview.html#answer-259382" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>i think i found out 1 of the problem with my code. urbanimagelibrary.photos return array of obj and each obj has a blob for image and thumbnail properties. So, because there is too much blob, the memory can&#39;t handle it. I would need a solution for this….or another module that can do the same thing as this module….</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 26th 2013, 6:08:33 am">March 26th 2013</span>
											by <span class='authorname'>Chung Farn Kien</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I ran into the same problem as well.  If you set urbanimagelibrary.photos&#39; includeFullSizeImage attribute to false (originally true), the memory issue goes away.  Otherwise, the app will try to load all of the images fullsize, until the process chews up 512Mb of memory, and the app dies.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 7th 2014, 3:03:57 am">March 7th 2014</span>
											by <span class='authorname'>Tim Regulski</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
