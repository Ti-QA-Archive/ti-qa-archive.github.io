<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Getting random 422 - Unprocessable Entity » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Getting random 422 - Unprocessable Entity</h1>
		</header>
		<section>
			<p>For some reason, for some ACS notification API calls I&#39;m getting a 422 Unprocessable Entity error. Called again at a different time, the exact same request works fine.</p>
<p>Below are two requests, called just seconds apart.</p>
<pre><code class="hljs"><span class="hljs-number">2013</span>-<span class="hljs-number">12</span>-<span class="hljs-number">13</span>T04:<span class="hljs-number">32</span>:<span class="hljs-number">03</span>+<span class="hljs-number">0000</span>
Request Time     <span class="hljs-number">2013</span>
Request Name     POST /v1/push_notification/notify.json
Response Status     <span class="hljs-number">422</span>
Parameters     { <span class="hljs-string">"version"</span> =&gt; <span class="hljs-string">"v1"</span>, <span class="hljs-string">"channel"</span> =&gt; <span class="hljs-string">"bjjhq_rolling"</span>, <span class="hljs-string">"key"</span> =&gt; <span class="hljs-string">"[MY KEY]"</span>, <span class="hljs-string">"action"</span> =&gt; <span class="hljs-string">"notify"</span>, <span class="hljs-string">"controller"</span> =&gt; <span class="hljs-string">"push_notification"</span>, <span class="hljs-string">"format"</span> =&gt; <span class="hljs-string">"json"</span>, <span class="hljs-string">"payload"</span> =&gt; <span class="hljs-string">"{"</span>alert<span class="hljs-string">":"</span>Scramble The Wave Gi<span class="hljs-string">","</span>title<span class="hljs-string">":"</span>BJJHQ Rolling Deals<span class="hljs-string">","</span>icon<span class="hljs-string">":"</span>appicon<span class="hljs-string">","</span>sound<span class="hljs-string">":"</span><span class="hljs-keyword">default</span><span class="hljs-string">","</span>to_ids<span class="hljs-string">":"</span>everyone<span class="hljs-string">"}"</span> }
Source IP     <span class="hljs-number">54.226</span><span class="hljs-number">.205</span><span class="hljs-number">.247</span>
Response Size     <span class="hljs-number">93</span> bytes


<span class="hljs-number">2013</span>-<span class="hljs-number">12</span>-<span class="hljs-number">13</span>T04:<span class="hljs-number">32</span>:<span class="hljs-number">06</span>+<span class="hljs-number">0000</span>
Request Time     <span class="hljs-number">2013</span>
Request Name     POST /v1/push_notification/notify.json
Response Status     <span class="hljs-number">200</span>
Parameters     { <span class="hljs-string">"version"</span> =&gt; <span class="hljs-string">"v1"</span>, <span class="hljs-string">"channel"</span> =&gt; <span class="hljs-string">"bjjhq_rolling"</span>, <span class="hljs-string">"key"</span> =&gt; <span class="hljs-string">"[MY KEY]"</span>, <span class="hljs-string">"action"</span> =&gt; <span class="hljs-string">"notify"</span>, <span class="hljs-string">"controller"</span> =&gt; <span class="hljs-string">"push_notification"</span>, <span class="hljs-string">"format"</span> =&gt; <span class="hljs-string">"json"</span>, <span class="hljs-string">"payload"</span> =&gt; <span class="hljs-string">"{"</span>alert<span class="hljs-string">":"</span>Scramble The Wave Gi<span class="hljs-string">","</span>title<span class="hljs-string">":"</span>BJJHQ Rolling Deals<span class="hljs-string">","</span>icon<span class="hljs-string">":"</span>appicon<span class="hljs-string">","</span>sound<span class="hljs-string">":"</span><span class="hljs-keyword">default</span><span class="hljs-string">","</span>to_ids<span class="hljs-string">":"</span>everyone<span class="hljs-string">"}"</span> }
Source IP     <span class="hljs-number">54.196</span><span class="hljs-number">.59</span><span class="hljs-number">.11</span>
Response Size     <span class="hljs-number">301</span> bytes
</code></pre><p>You can see that they are the exact same reuqest, but one fails (Response Status 422) and one works (Response Status 200).</p>
<p>Any ideas what could be causing this?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 13th 2013, 1:40:15 pm">December 13th 2013</span>
				by <span class='authorname'>Yosef Haas</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>notification</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-272515">
				
						<section>
							<p>In our latest release, we are requiring application admins set the to_ids parameter to everyone to send to all devices subscribed to the identified channel to prevent unnecessary spamming by unauthorized users. If your app is created after this monday, you will be subject to the new rule, if your app was created before this monday, you could continue to broad cast by not passing to_ids.</p>
<p>http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;cloud&#x2F;latest&#x2F;#!&#x2F;api&#x2F;PushNotifications-method-notify</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 13th 2013, 4:13:13 pm">December 13th 2013</span>
								by <span class='authorname'>Wei Kong</span><br>
								<a class="icon-bg icon-link" href="question/160444/getting-random-422---unprocessable-entity#answer-272515" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>The app was created before Monday - but I&#39;m actually sending the &quot;to_ids&quot; parameter anyway.<br>Both of the requests have it, but one failed and the other didn&#39;t.</p>
<p>On a side note, the recent change you made also now seems to require an admin user to be the notification sender - it didn&#39;t before. My calls weren&#39;t working and I was able to fix it by changing to an admin user. This does not seem to be documented anywhere. (this is not related to the above issue, but I figured I&#39;d mention it).</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 13th 2013, 4:27:49 pm">December 13th 2013</span>
											by <span class='authorname'>Yosef Haas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>you are right about the admin user!<br>it worked<br>many thanks!</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 18th 2013, 1:33:17 pm">December 18th 2013</span>
											by <span class='authorname'>Alex Asimakopoulos</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Yosef, we actually have always documented the admin broadcast behavior in http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;cloud&#x2F;latest&#x2F;#!&#x2F;api&#x2F;PushNotifications-method-notify</p>
<p>But due to a bug it was not enforced.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 18th 2013, 1:48:57 pm">December 18th 2013</span>
											by <span class='authorname'>Wei Kong</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Wei,<br>Thanks for clearing that up. I thought it may be something like that, but I wasn&#39;t sure if it was a new feature or not and I didn&#39;t see anything related to it in the release notes. It could also be due to the fact that I wasn&#39;t using to_ids before, and adding it requires the user to be an admin (as the docs state). </p>
<p>As for the original question - notifications seem to be working now, no 422&#39;s recently, but I&#39;ll keep an eye on it.</p>
<p>Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 18th 2013, 2:00:18 pm">December 18th 2013</span>
											by <span class='authorname'>Yosef Haas</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
