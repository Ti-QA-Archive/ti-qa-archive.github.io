<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Ti.App.Properties aren&#39;t read pproperly on actual device » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Ti.App.Properties aren&#39;t read pproperly on actual device</h1>
		</header>
		<section>
			<p>(I wrote this question once already, and the submit came back with the &quot;Bad Request&quot; page. So let&#39;s try again…).</p>
<p><strong>Studio</strong><br>Titanium Studio, build: 3.0.1.201212181159<br>Build: jenkins-titanium-rcp-master-350 (origin&#x2F;master)<br>Date: 18 December 2012, 12:04:42</p>
<p><strong>Platform</strong><br>IOS v6.0, iPhone</p>
<p><strong>SDK</strong><br>3.0.0.GA</p>
<h3 id="the-problem">The Problem</h3>
<p>On the IOS SImulator, I can fetch my server url from the IOS settings. (Root.plist). This has stopped working on the device itself.</p>
<p>As an example, here&#39;s the key&#x2F;value pairs returned from the simulator:</p>
<pre><code class="hljs">
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) serverUrl *&lt;hidden&gt;*
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) NSInterfaceStyle macintosh
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) AppleLanguages 
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) AppleITunesStoreItemKinds 
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) AppleLocale en_US
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) ti.ui.defaultunit system
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) version <span class="hljs-number">1.2</span>
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) NSLanguages 
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) store_username <span class="hljs-number">1</span>
[debug] <span class="hljs-number">12</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span> GMT+<span class="hljs-number">1300</span> (NZDT) username *&lt;hidden&gt;*
</code></pre><p>But on the iPhone via Xcode&#39;s console:</p>
<pre><code class="hljs">
[DEBUG] <span class="hljs-number">11</span>:<span class="hljs-number">48</span>:<span class="hljs-number">38</span> GMT+<span class="hljs-number">1300</span> (NZDT) AppleLanguages 
[DEBUG] <span class="hljs-number">11</span>:<span class="hljs-number">48</span>:<span class="hljs-number">38</span> GMT+<span class="hljs-number">1300</span> (NZDT) AppleITunesStoreItemKinds 
[DEBUG] <span class="hljs-number">11</span>:<span class="hljs-number">48</span>:<span class="hljs-number">38</span> GMT+<span class="hljs-number">1300</span> (NZDT) AppleLocale en_NZ
[DEBUG] <span class="hljs-number">11</span>:<span class="hljs-number">48</span>:<span class="hljs-number">38</span> GMT+<span class="hljs-number">1300</span> (NZDT) AppleICUForce24HourTime <span class="hljs-number">0</span>
[DEBUG] <span class="hljs-number">11</span>:<span class="hljs-number">48</span>:<span class="hljs-number">38</span> GMT+<span class="hljs-number">1300</span> (NZDT) NSLanguages 
[DEBUG] <span class="hljs-number">11</span>:<span class="hljs-number">48</span>:<span class="hljs-number">38</span> GMT+<span class="hljs-number">1300</span> (NZDT) ti.ui.defaultunit system
[DEBUG] <span class="hljs-number">11</span>:<span class="hljs-number">48</span>:<span class="hljs-number">38</span> GMT+<span class="hljs-number">1300</span> (NZDT) NSInterfaceStyle macintosh
</code></pre><p>Notice that &quot;username&quot;, &quot;serverUrl&quot;, &quot;store_username&quot;, and &quot;version&quot; all exist in the simulator, but not on the device. </p>
<p>If I execute <code>Ti.App.Properties.setString(&amp;#39;version&amp;#39;, &amp;#39;1.4&amp;#39;)</code>, the device will remember it. </p>
<p>I&#39;ve tried setTimeouts to wait in case it was a timing issue, but no difference. </p>
<p>Any suggestions are appreciated.</p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 21st 2013, 9:45:24 pm">January 21st 2013</span>
				by <span class='authorname'>Glenn Murphy</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>device</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>properties</span></li>
					
				</ul>
			

			<section>
				<h5>8 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>After Malcolm&#39;s response I had an idea. I deleted the app from the simulator, and then rebuilt. Now I have the same problem on both the simulator and the iPhone. So, worse, but at least it&#39;s consistent now.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 21st 2013, 10:03:22 pm">January 21st 2013</span>
								by <span class='authorname'>Glenn Murphy</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>The problem seems to be that Titanium does not recognize properties that have been defined in Root.plist unless they&#39;ve been modified by the application as well. For instance, my &quot;version&quot; settings string cannot be read when an app is freshly installed (despite showing up in the settings page), but if I do a &quot;setString&quot; on it, it gets returned correctly.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 21st 2013, 10:46:51 pm">January 21st 2013</span>
								by <span class='authorname'>Glenn Murphy</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>On the basis you are using <strong>root.plist</strong> to add settings to your iOS app and you are using those settings to gain settings either hard coded or changeable then I have just done the following and it works.</p>
<p>Location;</p>
<pre><code class="hljs"><span class="hljs-command">\{</span>appname<span class="hljs-special">}</span>platform<span class="hljs-command">\iphone</span><span class="hljs-command">\Settings</span>.bundle<span class="hljs-command">\Root</span>.plist
</code></pre><p><strong>Root.plist</strong></p>
<pre><code class="hljs"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-doctype">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">plist</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"1.0"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>StringsTable<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Root<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>PreferenceSpecifiers<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSGroupSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Kitchen Sink<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSTextFieldSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Key<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>name_preference<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>DefaultValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>IsSecure<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">false</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>KeyboardType<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Alphabet<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>AutocapitalizationType<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>None<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>AutocorrectionType<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>No<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSToggleSwitchSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Enabled<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Key<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>enabled_preference<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>DefaultValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">true</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSSliderSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Key<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>slider_preference<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>DefaultValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">real</span>&gt;</span>0.5<span class="hljs-tag">&lt;/<span class="hljs-title">real</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>MinimumValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">integer</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">integer</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>MaximumValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">integer</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">integer</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>MinimumValueImage<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>MaximumValueImage<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">plist</span>&gt;</span>
</code></pre><p>Test listener;</p>
<pre><code class="hljs">btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    Ti.API.info(<span class="hljs-string">"AppSetting Name = "</span> + Ti.App.Properties.getString(<span class="hljs-string">'name_preference'</span>));
    Ti.API.info(<span class="hljs-string">"AppSetting Enabled = "</span> + Ti.App.Properties.getString(<span class="hljs-string">'enabled_preference'</span>));
    Ti.API.info(<span class="hljs-string">"AppSetting Slider = "</span> + Ti.App.Properties.getString(<span class="hljs-string">'slider_preference'</span>));
    alert(Ti.App.Properties.getString(<span class="hljs-string">'name_preference'</span>, <span class="hljs-string">'missed'</span>));
});
</code></pre><p>If I go to the apps settings change the values, jump back to the app and press the button - I get the new values.</p>
<p>If I am going down the wrong direction - let me know where I turned off :)</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 22nd 2013, 9:06:45 am">January 22nd 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>You&#39;re going in the right direction, but I&#39;d have to do more testing. I&#39;ve finished the release using the workaround and switched onto a non-mac for other development, so I can&#39;t test any more at the moment. </p>
<p>Might try to run a few simple test programs and create a bug (if I can reproduce again). </p>
<p>Thanks for your suggestions.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 22nd 2013, 6:17:14 pm">January 22nd 2013</span>
								by <span class='authorname'>Glenn Murphy</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>You are welcome.  I just realised I added the follow up as a comment to the question rather than a comment on my own answer.  So I am going to duplicate it down there - so do not get confused.</p>
<p>If you do get chance to test in the future and the answer I provided did help you remember (if you would be so kind) to revisit the question and mark it as such.  This problem should have a solution, and this was the solution, others should not need to go through the work-around you did so a question marked as answered helps others.</p>
<p>BTW I learnt a lot on this question - so thanks.  Including that you can add properties to the <strong>tiapp.xml</strong> and read them back in your app!</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 22nd 2013, 7:37:59 pm">January 22nd 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I appreciate what you&#39;re saying about upvotes, but there is still no satisfactory answer. See my comment below yours. </p>
<p>It looks like Titanium needs to do something like this on startup:</p>
<p>http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;510216&#x2F;can-you-make-the-settings-in-settings-bundle-default-even-if-you-dont-open-the</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 18th 2013, 8:19:23 pm">February 18th 2013</span>
								by <span class='authorname'>Glenn Murphy</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I&#39;ve created a improvement-request: https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TC-1895</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 18th 2013, 8:37:38 pm">February 18th 2013</span>
								by <span class='authorname'>Glenn Murphy</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>BTW just because you you are not able to do exactly as you wanted does not mean there isn&#39;t and answer, just one you may not like.  As I mentioned below your own investigation shows that xcode also suffers from this problem.</p>
<p>I have provide you with a different solution to your problem below.  I imagine this will help you provide solve your issue.  As you will not I pointed that out 4 weeks ago when I provided you with significant amounts of assistance.</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 18th 2013, 9:27:06 pm">February 18th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-255058">
				
						<section>
							<p>Hi</p>
<p>Obviously you have set the properties; &quot;username&quot;, &quot;serverUrl&quot;, &quot;store_username&quot;, and &quot;version&quot; on the simulator, but have you set them on the actual device?</p>
<p>Check the properties you have saved - with the <em>output all properties</em> code;</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> props = Ti.App.Properties.listProperties();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>, ilen=props.length; i&lt;ilen; i++){
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">value</span> = Ti.App.Properties.getString(props[i]);
    Ti.API.info(props[i] + <span class="hljs-string">' = '</span> + <span class="hljs-keyword">value</span>);
}
</code></pre><p>I have never seen a need to use timeout to obtain settings, they are either there or not there.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 21st 2013, 9:53:18 pm">January 21st 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/147214/tiappproperties-arent-read-pproperly-on-actual-device.html#answer-255058" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>They are in the IOS Settings page on the device itself, but not returned via code. </p>
<p>The listProperties function is what I&#39;m using to generate the two lists. Both execute the same code on my end. </p>
<p>The setTimeout was just an attempt to rule out device timing issues, and that made no difference.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 9:57:58 pm">January 21st 2013</span>
											by <span class='authorname'>Glenn Murphy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Have you followed this tutorial? Does it provide any extra info?</p>
<p>From what I can determine, the file has to have the exact same name as <strong>Root.plist</strong> (note initial cap) be stored in the main folder;</p>
<pre><code class="hljs"><span class="hljs-regexp">/{your app}/</span>modules<span class="hljs-regexp">/iphone/</span>Root.plist <span class="hljs-comment">// here</span>
<span class="hljs-regexp">/{your app}/</span>resources<span class="hljs-regexp">/app.js /</span>/ <span class="hljs-keyword">for</span> reference only
</code></pre><p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;doc&#x2F;mobile&#x2F;guides&#x2F;iphone_settings_page">phone_settings_page</a></p>
<p>I will check back in the morning, on UK&#x2F;GMT here</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 11:17:42 pm">January 21st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks again, but that file is old I think. The settings are in &quot;{app}&#x2F;platform&#x2F;iphone&#x2F;Settings.bundle&#x2F;Root.plist&quot;. As I said, they are installing <strong>correctly</strong> on both the device and simulator (Settings App, click on your app). But Ti.App.Properties.listProperties does not list all the available options. The only time a setting seems to appear in Titanium is when it has been set using, for instance, the setString function. Once it&#39;s been set inside Titanium code, everything is fine. </p>
<p>Now that&#39;s I&#39;ve figured that out, I can work around the problem by re-setting defaults in my code, but this seems like a bug to me.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 11:25:06 pm">January 21st 2013</span>
											by <span class='authorname'>Glenn Murphy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>On the basis you are using <strong>root.plist</strong> to add settings to your iOS app and you are using those settings to gain settings either hard coded or changeable then I have just done the following and it works.</p>
<p>Location;</p>
<pre><code class="hljs"><span class="hljs-command">\{</span>appname<span class="hljs-special">}</span>platform<span class="hljs-command">\iphone</span><span class="hljs-command">\Settings</span>.bundle<span class="hljs-command">\Root</span>.plist
</code></pre><p><strong>Root.plist</strong></p>
<pre><code class="hljs"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-doctype">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">plist</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"1.0"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>StringsTable<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Root<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>PreferenceSpecifiers<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSGroupSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Kitchen Sink<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSTextFieldSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Key<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>name_preference<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>DefaultValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>IsSecure<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">false</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>KeyboardType<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Alphabet<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>AutocapitalizationType<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>None<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>AutocorrectionType<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>No<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSToggleSwitchSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>Enabled<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Key<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>enabled_preference<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>DefaultValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">true</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dict</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Type<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>PSSliderSpecifier<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>Key<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>slider_preference<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>DefaultValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">real</span>&gt;</span>0.5<span class="hljs-tag">&lt;/<span class="hljs-title">real</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>MinimumValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">integer</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">integer</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>MaximumValue<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">integer</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">integer</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>MinimumValueImage<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>MaximumValueImage<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dict</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">plist</span>&gt;</span>
</code></pre><p>Test listener;</p>
<pre><code class="hljs">btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
    Ti.API.info(<span class="hljs-string">"AppSetting Name = "</span> + Ti.App.Properties.getString(<span class="hljs-string">'name_preference'</span>));
    Ti.API.info(<span class="hljs-string">"AppSetting Enabled = "</span> + Ti.App.Properties.getString(<span class="hljs-string">'enabled_preference'</span>));
    Ti.API.info(<span class="hljs-string">"AppSetting Slider = "</span> + Ti.App.Properties.getString(<span class="hljs-string">'slider_preference'</span>));
    alert(Ti.App.Properties.getString(<span class="hljs-string">'name_preference'</span>, <span class="hljs-string">'missed'</span>));
});
</code></pre><p>If I go to the apps settings change the values, jump back to the app and press the button - I get the new values.</p>
<p>If I am going down the wrong direction - let me know where I turned off :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 22nd 2013, 7:38:56 pm">January 22nd 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Just tested this example using Titanium SDK 3.0. New, clean App (Default template). I added a button to the window. Upon clicking the button, my output is:</p>
<pre><code class="hljs">INFO] AppSetting Name = <span class="hljs-literal">null</span>
[INFO] AppSetting Enabled = <span class="hljs-literal">null</span>
[INFO] AppSetting Slider = <span class="hljs-literal">null</span>
</code></pre><p>And I see a popup with &quot;missed&quot; in it. </p>
<p>This is the problem.  </p>
<p>If I change all the values, and then restart the app, here&#39;s the output:</p>
<pre><code class="hljs"><span class="hljs-string">[INFO]</span> AppSetting Name = Foo
<span class="hljs-string">[INFO]</span> AppSetting Enabled = <span class="hljs-number">0</span>
<span class="hljs-string">[INFO]</span> AppSetting Slider = <span class="hljs-number">0</span>.<span class="hljs-number">4209486</span>
</code></pre><p>And the popup says &quot;Foo&quot;.</p>
<p>If I delete the app from the simulator and build again, this time adding &quot;This works&quot; to the name_preference DefaultValue, the results are the same as the first case:</p>
<pre><code class="hljs"><span class="hljs-string">[INFO]</span> AppSetting Name = null
<span class="hljs-string">[INFO]</span> AppSetting Enabled = null
<span class="hljs-string">[INFO]</span> AppSetting Slider = null
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 8:10:21 pm">February 18th 2013</span>
											by <span class='authorname'>Glenn Murphy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So, to confirm, your problem is that the default values you have added to your root.plist file are not being read by the app UNLESS the settings page has been displayed by the user?</p>
<p>As your own investigations show in the stack overflow question <a href="http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;510216&#x2F;can-you-make-the-settings-in-settings-bundle-default-even-if-you-dont-open-the">Can you make the settings in Settings.bundle default even if you don&#39;t open the Settings App</a>, this is not possible in a native app either.  I am not sure why - seems weird but you have not found a failing of Titanium as far as I can tell.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 9:13:59 pm">February 18th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So lets look at this a different way, and try and solve your problem not try and solve something you thought was the solution.</p>
<p>If you need to store values that you retrieve inside your app using defaults then you can add them to the <strong>tiapp.xml</strong> file as follows;</p>
<pre><code class="hljs">&lt;<span class="hljs-keyword">property</span> <span class="hljs-property">name</span>=<span class="hljs-string">"username"</span> type=<span class="hljs-string">"string"</span>&gt;canyouseeme&lt;/<span class="hljs-keyword">property</span>&gt;
</code></pre><p>Then call it as follows;</p>
<pre><code class="hljs">Ti.API.info(<span class="hljs-string">"tiapp.xml username = "</span> + Ti.App.<span class="hljs-keyword">Properties</span>.getString(<span class="hljs-string">'username'</span>));
</code></pre><p>I cannot imagine why you would have these values editable in the settings page and not in your app so it seems sensible to have them inside the <strong>tiapp.xml</strong> instead;</p>
<ul>
<li>username</li>
<li>serverUrl</li>
<li>store_username</li>
<li>version</li>
</ul>
<p>You can access your own apps property using this property, so there is not real need to store it twice unless the two things are different of course.</p>
<pre><code class="hljs">Ti.API.info(<span class="hljs-string">"version = "</span> + Ti.<span class="hljs-keyword">App</span>.<span class="hljs-keyword">version</span>);
</code></pre><p>I am hoping this make sense and that you storing the information in <strong>tiapp.xml</strong> provides you will all of the benefits you stated you required.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 9:23:52 pm">February 18th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><ol>
<li><p>Displaying the settings app does nothing. Changing the values either in the Settings page, or via Ti.App.Properties makes them readable. </p>
</li>
<li><p>The defaults are not being picked up in Objective C apps, or Titanium apps. However, the SO question shows that you can provide a generic workaround using ObjC. There is no such workaround for Titanium (unless I wanted to figure out how to write an ObjC plugin to do it). My enhancement request proposed to add this feature to the underlying Titanium code so it benefits everyone. So I agree that it&#39;s not Titanium&#39;s fault, but they could add the code to abstract these issues so developers don&#39;t need to worry about it.  </p>
</li>
<li><p>I have a workaround. But, like your suggestion to use tiapp.xml, it&#39;s not ideal. IOS provides a settings app, and Titanium provides the API to use it. I have a settings section in my app itself, but the context is more around the user&#39;s settings rather than the IOS application settings (the ios app is client for a server product).</p>
</li>
</ol>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 10:41:10 pm">February 18th 2013</span>
											by <span class='authorname'>Glenn Murphy</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Well no-one can accuse us of not trying everything ;-)</p>
<p>Hopefully Appcelerator can go further than what &quot;appears&quot; to be an xcode limitation (without work-around) as well.</p>
<p>Cheers Glenn</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 18th 2013, 11:14:23 pm">February 18th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
