<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Table View + Search Bar » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Table View + Search Bar</h1>
		</header>
		<section>
			<p>Hi Team, </p>
<p>I am new on Titanium,  i need create the following app:</p>
<p>I have the table view section on file test1.js, when the user make click on the button add1, the application open a new window (customer.js), this window has a list of values and the option of search.</p>
<p>When the user select a value in the list of values (on customer.js), i need get the value selected on file test1.js.</p>
<p>Any suggestions?</p>
<p>I have the following code:</p>
<pre><code class="hljs">
test1.js

function openWindow(url, anim, title)
{

    var win= Titanium.UI.createWindow({  
        title: title,
        url: url,
        fullscreen: <span class="hljs-keyword">false</span>
        });

    <span class="hljs-keyword">if</span> (Titanium.UI.currentTab != <span class="hljs-keyword">null</span>)
    {
        Titanium.UI.currentTab.<span class="hljs-built_in">open</span>(win,{animated:anim});
    }
    <span class="hljs-keyword">else</span>
    {
        win.<span class="hljs-built_in">open</span>({animated:anim});
    }

}

Titanium.UI.setBackgroundColor(<span class="hljs-string">'#fff'</span>);

var win = Titanium.UI.currentWindow;

var data =[];

var section = Titanium.UI.createTableViewSection();
data.push(section);

<span class="hljs-comment">// ROW 1 - Customer</span>
var row1 = Titanium.UI.createTableViewRow();

row1.<span class="hljs-variable">height</span> = <span class="hljs-number">52</span>;
var item1 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#000'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'Customer'</span>,
    font:{fontSize:<span class="hljs-number">16</span>, fontWeight:<span class="hljs-string">'bold'</span>},
    top:<span class="hljs-number">4</span>,
    left:<span class="hljs-number">10</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">25</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">100</span>
});    
row1.<span class="hljs-built_in">add</span>(item1);

var cost1 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    font:{fontSize:<span class="hljs-number">13</span>,fontWeight:<span class="hljs-string">'normal'</span>, fontFamily:<span class="hljs-string">'Arial'</span>},
    top:<span class="hljs-number">26</span>,
    left:<span class="hljs-number">10</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">20</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">150</span>
});    
row1.<span class="hljs-built_in">add</span>(cost1);

var add1 = Titanium.UI.createButton({

    backgroundImage:<span class="hljs-string">'addDefault.png'</span>,
    <span class="hljs-variable">height</span>:<span class="hljs-number">27</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-number">27</span>,
    top:<span class="hljs-number">15</span>,
    right:<span class="hljs-number">10</span>
});
row1.<span class="hljs-built_in">add</span>(add1);
section.<span class="hljs-built_in">add</span>(row1);



var tableview = Titanium.UI.createTableView({
    data:data,
    style:Titanium.UI.iPhone.TableViewStyle.GROUPED

});


add1.addEventListener(<span class="hljs-string">'click'</span>, function()
{

    openWindow(<span class="hljs-string">'customer.js'</span>,<span class="hljs-keyword">true</span>,<span class="hljs-string">'Customer'</span>);


});

win.<span class="hljs-built_in">add</span>(tableview);
</code></pre><p>customer.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Titanium.UI.currentWindow;

<span class="hljs-comment">// create table view data object</span>
<span class="hljs-keyword">var</span> data = [];

data[<span class="hljs-number">0</span>] = Ti.UI.createTableViewRow({title:<span class="hljs-string">'John AppleSeed'</span>, id:<span class="hljs-string">'100'</span>});
data[<span class="hljs-number">1</span>] = Ti.UI.createTableViewRow({title:<span class="hljs-string">'John'</span>, id:<span class="hljs-string">'101'</span>});
data[<span class="hljs-number">2</span>] = Ti.UI.createTableViewRow({title:<span class="hljs-string">'Mark'</span>, id:<span class="hljs-string">'102'</span>});
data[<span class="hljs-number">3</span>] = Ti.UI.createTableViewRow({title:<span class="hljs-string">'Paul'</span>, id:<span class="hljs-string">'103'</span>});

<span class="hljs-keyword">var</span> search = Titanium.UI.createSearchBar({

    showCancel:<span class="hljs-literal">false</span>,
    hintText:<span class="hljs-string">'Search Customer'</span>
});
search.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{
   e.value <span class="hljs-comment">// search string as user types</span>
});
search.addEventListener(<span class="hljs-string">'return'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{
   search.blur();
});
search.addEventListener(<span class="hljs-string">'cancel'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{
   search.blur();
});

<span class="hljs-comment">// create table view</span>
<span class="hljs-keyword">var</span> tableview = Titanium.UI.createTableView({
    data:data,
    search:search

});

<span class="hljs-comment">//Titanium.App.Properties.setInt('row','');</span>

<span class="hljs-comment">// create table view event listener</span>
tableview.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
</span>{
    <span class="hljs-comment">// event data</span>
    <span class="hljs-keyword">var</span> index = e.index;
    <span class="hljs-keyword">var</span> section = e.section;
    <span class="hljs-keyword">var</span> row = e.row;
    <span class="hljs-keyword">var</span> rowdata = e.rowData;

    <span class="hljs-keyword">var</span> prop = rowdata.id;

    win.close();
});



<span class="hljs-comment">// add table view to the window</span>
win.add(tableview);
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 3rd 2010, 11:32:39 am">November 3rd 2010</span>
				by <span class='authorname'>Jorge Luis Frias Butron</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>table</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>3</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-137881">
				
						<section>
							<p>Look at the KitchenSink Example  <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator&#x2F;KitchenSink&#x2F;blob&#x2F;master&#x2F;KitchenSink&#x2F;Resources&#x2F;examples&#x2F;custom_properties.js">custom_properties.js</a></p>
<p>in a nutshell though</p>
<p>Assign a custom property on win since it is the current windw</p>
<pre><code class="hljs">win.SELECTED_DATA_ID = rowdata.<span class="hljs-property">id</span>;
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 5th 2010, 2:35:53 am">November 5th 2010</span>
								by <span class='authorname'>Aaron Saunders</span><br>
								<a class="icon-bg icon-link" href="question/76091/table-view--search-bar#answer-137881" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Aaron thanks for your help.</p>
<p>I have reviewed your suggestion but the case is inverse.</p>
<p>I need select a value on window2(custom_properties2.js) and the value selected show in window 1 (custom_properties.js).</p>
<p>In the sample The value is defined on window1 and the information is show on window2.</p>
<p>Any suggestion for solve my problem.</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 5th 2010, 5:31:19 am">November 5th 2010</span>
											by <span class='authorname'>Jorge Luis Frias Butron</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-138221">
				
						<section>
							<p>You could add a custom Event in window1 that receives an object, and in window2 you will fire that event passing the selected value as an argument. So the receiving of the value will happen on the event handler. </p>
<p>Or</p>
<p>You could pass a reference of the field you want to fill from window1 to window2, and after making a selection in window2, just set that field&#39;s value and close window2.</p>
<p>Hope this helps.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 5th 2010, 1:56:47 pm">November 5th 2010</span>
								by <span class='authorname'>Vali Filip</span><br>
								<a class="icon-bg icon-link" href="question/76091/table-view--search-bar#answer-138221" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Vali thanks for review my problem.</p>
<p>Would you send for me any sample of implementation about suggestion?</p>
<p>And</p>
<p>In window1 i have the button for select items. When i press the button, the new window is open (windows2), in this windows i can see the list of item.</p>
<p>I need select a item on windows2 and the item selected show in button of windows1.</p>
<p>Please you can see the user interface design on:<br>http:&#x2F;&#x2F;seedmanager.nerdsonsite.com&#x2F;images&#x2F;sample.png</p>
<p>Now, </p>
<p>In window2 i have stored the value of item selected on:</p>
<pre><code class="hljs">Titanium.App.Properties.setString(<span class="hljs-string">'row'</span>,<span class="hljs-keyword">index</span>);
</code></pre><p>On windows1 i have get the value stored on window2:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> row = Titanium.App.Properties.getString(<span class="hljs-string">'row'</span>);
</code></pre><p>But i have a problem, the value of variable row selected is not show on window1, the value show is the previous. </p>
<p>How can update the windows1 with value of windows2 passed?</p>
<p>Any Suggestion.</p>
<p>Thanks<br>Jorge Luis</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 6th 2010, 9:15:55 pm">November 6th 2010</span>
											by <span class='authorname'>Jorge Luis Frias Butron</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>So, you have to make  a receiver for the event in window1, something like this: </p>
<p><strong>window1.js</strong></p>
<pre><code class="hljs">Titanium.App.addEventListener(<span class="hljs-string">'set_cust'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> <span class="hljs-comment">{
    row = data.name;
    ...set the name in the row, according to your layout ;)
}</span>);</span>
</code></pre><p>And have a function as a handler for the click event on the tableview that looks like this:</p>
<p><strong>window2.js</strong></p>
<pre><code class="hljs"><span class="hljs-tag">function</span> <span class="hljs-tag">set_cust</span>(e) {
    <span class="hljs-tag">Titanium</span><span class="hljs-class">.App</span><span class="hljs-class">.fireEvent</span>(<span class="hljs-string">'set_cust'</span>,{
        <span class="hljs-attribute">id</span>: e.rowData.cust_id,
        <span class="hljs-attribute">name</span>: e.rowData.title
        }); 
}
</code></pre><p>Hope you can make this happen.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 7th 2010, 4:39:04 am">November 7th 2010</span>
											by <span class='authorname'>Vali Filip</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
