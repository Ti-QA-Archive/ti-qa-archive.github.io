<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Why is the imageview height wrong? Picture attached.. » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Why is the imageview height wrong? Picture attached..</h1>
		</header>
		<section>
			<p>I select an image and set it to an imageview, everything scales correctly but for some reason the imageview is way taller than it should be (see the red background). How can I get the imageview to fit the image so I dont have all that unneccessary red background?</p>
<p>Top part of image:<br>http:&#x2F;&#x2F;imgur.com&#x2F;buJ4S</p>
<p>Bottom part of image:<br>http:&#x2F;&#x2F;imgur.com&#x2F;X4EsQ</p>
<p>Code is just a simple imageview inside a scrollview. Can post if needed. Running latest of everything on iPhone simulator.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="October 26th 2012, 4:10:26 pm">October 26th 2012</span>
				by <span class='authorname'>andrew royce</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>imageview</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-250051">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<pre><code class="hljs"><span class="hljs-tag">Ti</span><span class="hljs-class">.UI</span><span class="hljs-class">.createImageView</span>: <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value">Ti.UI.SIZE,
    ....
</span></span></span>};
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 26th 2012, 4:31:25 pm">October 26th 2012</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/144031/why-is-the-imageview-height-wrong-picture-attached#answer-250051" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks but I have tried every mixture of the different settings and still no luck. Here is what the picture looks like with the following code :</p>
<pre><code class="hljs">postImage = Ti.UI.createImageView({
                <span class="hljs-string">height :</span> Ti.UI.SIZE,
                <span class="hljs-string">image :</span> <span class="hljs-string">"http://solaraluminyum.com/img/wp-content/uploads/cool-background-wallpapers_8844_14.jpg"</span>,
                <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'red'</span>
            });
</code></pre><p>http:&#x2F;&#x2F;imgur.com&#x2F;aXRzd</p>
<p>I realized if I save the file then read the width and height as a blob I can get the real values. I can then calculate the new size and keep aspect ratio and set the backgroundImage property with the new values. Sucks I have to do it this way but I have wasted too much time on the imageview itself already.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 26th 2012, 4:37:36 pm">October 26th 2012</span>
											by <span class='authorname'>andrew royce</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You never said the image is remote. Until the image is downloaded there is no way for the device to know it&#39;s dimensions so the behavior is normal I&#39;d say.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 26th 2012, 4:42:57 pm">October 26th 2012</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The original image was not remote but from the gallery (which was saved off the internet). I changed it just for demonstation purposes so you could easily copy&#x2F;paste it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 26th 2012, 4:45:58 pm">October 26th 2012</span>
											by <span class='authorname'>andrew royce</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Well, at least you fixed it :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="October 26th 2012, 4:49:36 pm">October 26th 2012</span>
											by <span class='authorname'>Dan Tamas</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yea I appreciate the time.. Here is the code if anyone else would need it..</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> fileObject</span> = Ti.Filesystem.getFile(imagePath);
            <span class="hljs-variable"><span class="hljs-keyword">var</span> fileBlob</span> = fileObject.read();
            <span class="hljs-variable"><span class="hljs-keyword">var</span> maxWidth</span> = '<span class="hljs-number">400</span>dp';

            <span class="hljs-variable"><span class="hljs-keyword">var</span> newSize</span> = resizeImage(maxWidth, fileBlob.width, fileBlob.height)
            <span class="hljs-comment">//alert(newSize);</span>

            placeHolderImageView.height = newSize.height;
            placeHolderImageView.width = newSize.width;
            placeHolderImageView.backgroundImage = imagePath;



    function resizeImage(maxWidth, originalWidth, originalHeight) {
            <span class="hljs-keyword">if</span> (originalWidth &gt; maxWidth) {
                <span class="hljs-variable"><span class="hljs-keyword">var</span> ratio</span> = maxWidth / originalWidth;
                <span class="hljs-variable"><span class="hljs-keyword">var</span> newWidth</span> = ratio * originalWidth;
                <span class="hljs-variable"><span class="hljs-keyword">var</span> newHeight</span> = ratio * originalHeight;
                <span class="hljs-keyword">return</span> {
                    width : newWidth,
                    height : newHeight
                };
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> {
                    width : originalWidth,
                    height : originalHeight
                };
            }
        }
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="October 26th 2012, 4:58:32 pm">October 26th 2012</span>
											by <span class='authorname'>andrew royce</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
