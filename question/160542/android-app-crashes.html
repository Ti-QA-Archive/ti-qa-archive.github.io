<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android App crashes Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android App crashes</h1>
		</header>
		<section>
			<p>Am using 3.1.3.GA sdk, Alloys and 2.3.3 Android Emulator and also tested with Sony Xperia J(Android 4.1.2). I am loading images from my server, crops and resize it and place it in TableViewRow. Always in info its saying as <strong>Jit: resizing JitTable from xxx to yyy</strong> and finally <strong>Bitmap vm budget exceeds</strong> and stops loading and app crashes. I have to removed all the views used in window to null. Even this error fires. I have seen many problems in QA like this and nothing have solution as per my search. Please help me get rid of this, <strong>My Sample Code</strong></p>
<p><strong>searchResults.xml</strong></p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"searchResults"</span> <span class="hljs-attribute">navBarHidden</span>=<span class="hljs-value">"true"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"containerView"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mainView"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"headerWithBack"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"headerWithBack"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Require</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">TableView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"searchResultContainer"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">"openDetails"</span> <span class="hljs-attribute">onScroll</span>=<span class="hljs-value">"lazyLoad"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">FooterView</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"footerView"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">ActivityIndicator</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"loader"</span>/&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">Label</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"loadingIndicator"</span> <span class="hljs-attribute">visible</span>=<span class="hljs-value">"false"</span>&gt;</span>No more datas to load.<span class="hljs-tag">&lt;/<span class="hljs-title">Label</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">FooterView</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">TableView</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"WindowFooter"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"WindowFooter"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Require</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"slidingView"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"slidingMenu"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"slidingMenu"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">Require</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p><strong>index.js</strong></p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadResults</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> url = <span class="hljs-string">'XXX'</span>;
    <span class="hljs-keyword">var</span> actionMethod = <span class="hljs-string">'GET'</span>;
    <span class="hljs-keyword">var</span> successFunction = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response, xhrObject</span>)</span>{
        <span class="hljs-keyword">if</span>(!ajaxCancel &amp;&amp; response.success){
            <span class="hljs-keyword">var</span> results = response.results;
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>,j=results.length;i&lt;j;i++){
                <span class="hljs-keyword">var</span> cabImageURL = vehicleList[i].resourceURL === <span class="hljs-string">''</span> ? <span class="hljs-string">'someURL'</span> : <span class="hljs-string">'someURL'</span>;
                <span class="hljs-keyword">var</span> cabImage = imageManipulation(cabImageURL);
                data.push(Alloy.createController(<span class="hljs-string">'views/test'</span>, {
                    cabImage: cabImage,
                }).getView());
            }
            searchResultContainer.appendRow(data);
        }<span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">if</span>(!ajaxCancel){
                <span class="hljs-keyword">var</span> message = Alloy.Globals.someErrors;
                Alloy.Globals.createToastNotification(message);
            }
        }
    };
    <span class="hljs-keyword">var</span> errorFunction = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>)</span>{
        <span class="hljs-comment">//alert(error);</span>
        Ti.API.info(error);
        <span class="hljs-keyword">var</span> message = Alloy.Globals.someErrors;
        Alloy.Globals.createToastNotification(message);
    };
    cabyAjaxUtils.getAjax(url, {}, actionMethod, successFunction, errorFunction);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">imageManipulation</span>(<span class="hljs-params">imageURL</span>)</span>{
    <span class="hljs-keyword">var</span> newImage;
    <span class="hljs-keyword">var</span> originalImage = Ti.UI.createImageView({
        image : imageURL,
        width : <span class="hljs-string">'auto'</span>,
        height : <span class="hljs-string">'auto'</span>
    });
    <span class="hljs-keyword">var</span> imgBlob = originalImage.toBlob();
    <span class="hljs-keyword">var</span> height = imgBlob.height;
    <span class="hljs-keyword">var</span> width = imgBlob.width;
    <span class="hljs-keyword">if</span> (height &gt; width) {
        <span class="hljs-keyword">var</span> pos = (height - width) / <span class="hljs-number">2</span>;
        <span class="hljs-keyword">var</span> dict = {
            height : width,
            width : width,
            x : <span class="hljs-number">0</span>,
            y : pos
        };
        newImage = imgBlob.imageAsCropped(dict);
        newImage = newImage.imageAsResized(width, height);
    }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (height &lt; width) {
        <span class="hljs-keyword">var</span> pos = (width - height) / <span class="hljs-number">2</span>;
        <span class="hljs-keyword">var</span> dict = {
            height : height,
            width : height,
            x : pos,
            y : <span class="hljs-number">0</span>
        };
        newImage = imgBlob.imageAsCropped(dict);
        newImage = newImage.imageAsResized(width, height);
    }<span class="hljs-keyword">else</span> {
        newImage = originalImage;
    }
    originalImage = <span class="hljs-literal">null</span>;
    imgBlob = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> newImage;
}
$.searchResults.open();
</code></pre><p><strong>test.xml</strong></p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TableViewRow</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"results"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">ImageView</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"cabImage"</span>/&gt;</span>            
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">TableViewRow</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>I have posted a sample code of my application. The major place where am getting error is ImageView, even I tried posting images <strong>without using imageManipulation()</strong> too and I dont think error in that function. I released all of the objects and events I created when close that window. May be images loaded from server are cached and not released or else what may be problem. How to release memory allocated to those images. Thank you.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 17th 2013, 8:01:48 am">December 17th 2013</span>
				by <span class='authorname'>Dont Know What to do</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>application crash</span></li>
					
						<li><span class='tagname'>crash</span></li>
					
						<li><span class='tagname'>imageview</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I have tried placing a local default image even for that its getting leak and JIT Resizes.</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 19th 2013, 5:29:37 am">December 19th 2013</span>
								by <span class='authorname'>Dont Know What to do</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>0</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>0 Answers</h3>

	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
