<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>error in opening one window on event » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>error in opening one window on event</h1>
		</header>
		<section>
			<p>HI,</p>
<p> I tried to open a new window in tabgroup on event but I got error. as undefined</p>
<ol>
<li>[ERROR][V8Exception(  568)] Exception occurred at login.js:156: Uncaught ReferenceError: main is not defined</li>
<li>[ERROR][V8Exception(  568)] Exception occurred at login.js:161: Uncaught ReferenceError: mainTab is not defined</li>
<li>[ERROR][V8Exception(  568)] Exception occurred at login.js:162: Uncaught ReferenceError: tabGroupis not defined</li>
</ol>
<p>My code for event on &#39;login.js &#39;is </p>
<pre><code class="hljs">Ti.App.addEventListener('event_fire', function(event)
{
    main.tabBarHidden     = true<span class="hljs-comment">;</span>
    main.url         = 'main.js'<span class="hljs-comment">;</span>
    mainTab.window = main<span class="hljs-comment">;</span>
    tabGroup.addTab(mainTab)<span class="hljs-comment">;</span>
    tabGroup.removeTab(loginTab)<span class="hljs-comment">;</span>
    tabGroup.removeTab(accountTab)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre><p>and this is on app.js</p>
<pre><code class="hljs">Titanium.UI.setBackgroundColor('#fff');

<span class="hljs-variable"><span class="hljs-keyword">var</span> tabGroup</span>    = Titanium.UI.createTabGroup();

<span class="hljs-variable"><span class="hljs-keyword">var</span> main</span> = Titanium.UI.createWindow();

<span class="hljs-variable"><span class="hljs-keyword">var</span> mainTab</span>= Titanium.UI.createTab();

<span class="hljs-variable"><span class="hljs-keyword">var</span> login</span> = Titanium.UI.createWindow({
    url:'login.js'
});

<span class="hljs-variable"><span class="hljs-keyword">var</span> loginTab</span> = Titanium.UI.createTab({
    window:login
});

<span class="hljs-variable"><span class="hljs-keyword">var</span> account</span> = Titanium.UI.createWindow({
    url:'account.js'
});

<span class="hljs-variable"><span class="hljs-keyword">var</span> accountTab</span> = Titanium.UI.createTab({
    window:account
});



tabGroup.addTab(loginTab);
tabGroup.addTab(accountTab);
tabGroup.<span class="hljs-keyword">open</span>();
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 27th 2013, 4:44:52 pm">November 27th 2013</span>
				by <span class='authorname'>Ritesh Rijal</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>tab</span></li>
					
						<li><span class='tagname'>tabgroup</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-271859">
				
						<section>
							<p>This is a scope issue. main exists in app.js. On iOS, it might be seen in login.js (ios broken), but on android it is not (android good).</p>
<p><a href="http:&#x2F;&#x2F;coding.smashingmagazine.com&#x2F;2009&#x2F;08&#x2F;01&#x2F;what-you-need-to-know-about-javascript-scope&#x2F;">what-you-need-to-know-about-javascript-scope&#x2F;</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 27th 2013, 4:52:48 pm">November 27th 2013</span>
								by <span class='authorname'>Stephen Feather</span><br>
								<a class="icon-bg icon-link" href="question/159915/error-in-opening-one-window-on-event#answer-271859" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Since you seem new to not only Titanium, but also to JavaScript, allow me to share some wisdom:</p>
<p>w3schools is <strong>EVIL</strong>, avoid like the plague.  NOTHING they offer is good, ignore any search results for them.</p>
<p><a href="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript">Mozilla Developer Network</a> is <strong>GOOD</strong></p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 4:55:46 pm">November 27th 2013</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>url:&#39;login.js&#39; is <strong>BAD</strong></p>
<p><a href="http:&#x2F;&#x2F;softlywired.com&#x2F;titanium-commonjs-introduction&#x2F;">commonJS</a> is <strong>GOOD</strong></p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 5:00:05 pm">November 27th 2013</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Well in that case, I need to change the way of my exploring. But as the matter of fact the solution to above problem means a lot to me. Could you please guide me to the solution. Rest I will definately follow your suggestion.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 5:06:45 pm">November 27th 2013</span>
											by <span class='authorname'>Ritesh Rijal</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No, I will not enable bad programming style by attempting to make the afore mentioned code operational.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 5:43:33 pm">November 27th 2013</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Well in that case, I now change the whole programming pattern. Now I am using exactly how the &#39;Kitchen-sink&#39; sample is done . Now my question is still the same.<br>I guess you could show a short code for adding and removing tab if I am using commonJS .</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 10:50:38 pm">November 27th 2013</span>
											by <span class='authorname'>Ritesh Rijal</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Lets say, in ApplicationTabGroup.js</p>
<pre><code class="hljs"><span class="hljs-keyword">function</span> ApplicationTabGroup() {
<span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">//    
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">// create module instance
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span>
    <span class="hljs-keyword">var</span> app = Ti.UI.createTabGroup(),
        BaseUIWindow = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/common/BaseUIWindow'</span>),
        AuthenticationWindow = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/common/AuthenticationWindow'</span>),
        AccountWindow = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ui/common/AccountWindow'</span>);

<span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">//    
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">// Base Home tab creation
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span>    
    <span class="hljs-keyword">var</span> baseUIWin = <span class="hljs-keyword">new</span> BaseUIWindow(<span class="hljs-string">'Home'</span>),
        authenticationWin = <span class="hljs-keyword">new</span> AuthenticationWindow(<span class="hljs-string">'Login'</span>),
        accountWin = <span class="hljs-keyword">new</span> AccountWindow(<span class="hljs-string">'Account'</span>);

    <span class="hljs-keyword">var</span> baseUITab = Ti.UI.createTab({
        <span class="hljs-attribute">title</span>: <span class="hljs-string">'Home'</span>,
        <span class="hljs-attribute">icon</span>: <span class="hljs-string">'/images/tabs/tab_home.png'</span>,
        <span class="hljs-attribute">window</span>: baseUIWin
    });
    baseUIWin.containingTab = baseUITab;

    self.addTab(baseUITab);

<span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">//    
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">// Authentication Tab Creation
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span>    
    <span class="hljs-keyword">var</span> authenticationTab = Ti.UI.createTab({
        <span class="hljs-attribute">title</span>: <span class="hljs-string">'Login'</span>,
        <span class="hljs-attribute">icon</span>: <span class="hljs-string">'/images/tabs/tab_login.png'</span>,
        <span class="hljs-attribute">window</span>: authenticationWin
    });
    authenticationWin.containingTab = authenticationTab;
    self.addTab(authenticationTab);    

<span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">//    
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">// Account Tab Creation
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span>
    <span class="hljs-keyword">var</span> accountTab = Ti.UI.createTab();
    accountWin.containingTab = accountTab;

<span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">//    
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">// Blur event Listener
//</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span><span class="hljs-pi">////</span>    
    self.addEventListener(<span class="hljs-string">'blur'</span>, <span class="hljs-keyword">function</span>(e) {
        Titanium.API.info(<span class="hljs-string">'tab blur - new index '</span> + e.index + <span class="hljs-string">' old index '</span> + e.previousIndex);
    });
    self.model = Ti.Platform.model;
    <span class="hljs-keyword">return</span> self;
};

<span class="hljs-built_in">module</span>.exports = ApplicationTabGroup;
</code></pre><p>And an event is fired on  Authentication.js called grantEntrance. How can I add&#x2F;remove the tabs from tabgroup in this situation. </p>
<pre><code class="hljs">Ti.App.addEventListener(<span class="hljs-string">'grantEntrance'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-keyword">event</span>)</span>
<span class="hljs-comment">{

}</span>);</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 10:57:25 pm">November 27th 2013</span>
											by <span class='authorname'>Ritesh Rijal</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I guess this is exactly the same programming style that you were suggesting earlier.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 10:58:16 pm">November 27th 2013</span>
											by <span class='authorname'>Ritesh Rijal</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Instead of using an eventListener and hoping the event fire when you want it, in the time span you want it to, I would do one of two things:</p>
<ol>
<li><strong>Pass a reference to the tabgroup down into the window.</strong> You are already doing something similar with this line: </li>
</ol>
<pre><code class="hljs">authenticationWin.containingTab = authenticationTab<span class="hljs-comment">;</span>
</code></pre><p>This reference to the accountTab is not available at the time the window is created, but would be available by the time you needed it in an eventListener for a button or something. A reference like this is great for opening sub windows on the tab itself </p>
<pre><code class="hljs"><span class="hljs-tag">win</span><span class="hljs-class">.containTab</span><span class="hljs-class">.open</span>(<span class="hljs-tag">mySubWindow</span>);
</code></pre><p>You could pass a reference to the tabGroup itself like so:</p>
<pre><code class="hljs">authenticationWin.tabGroup = app<span class="hljs-comment">;</span>
</code></pre><p>The problem with this method, is all the manipulation of the tab group occurs within the context (scope) of the authenticationWin.  You have access to the tab group, but not to any other tabs you wanted to create&#x2F;remove.  So now you are creating tabs that are siblings (brothers and sisters) of the window that is the child of the tabgroup.  Its like a trailer park family from Alabama!  Whose your daddy? If you marry your sister, do your kids call her mom or auntie?</p>
<ol>
<li><strong>Pass a callback function down into the window.</strong><br>I much prefer this method.  Because when the callback function is run, it runs in the context (within the scope) of ApplicationTabGroup file.  These means the tab group is there, any other tabs you created, but have not added to the tabgroup are there.  You can cleanly remove your login tab if you want.</li>
</ol>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span><span class="hljs-params">(parameters)</span></span>{
    console.log(<span class="hljs-string">'I am the callback!'</span>);

}

authenticationWin.<span class="hljs-keyword">callback</span> = <span class="hljs-keyword">callback</span>;
</code></pre><p>Now, I&#39;d rather pass parameters straight into my window creation functions, but with tabs you have a chicken and egg scenario.  You don&#39;t have the tabs until you created the window that you needed to pass the tab reference to.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 11:33:49 pm">November 27th 2013</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Caveat: Adding&#x2F;Removing tabs only works well on iOS.  It fails on android. On android, you would have to destroy the tab group, rebuild it with the new tabs.  For android we usually throw a modal window up for the login view, authenticate, then close the window.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 27th 2013, 11:40:24 pm">November 27th 2013</span>
											by <span class='authorname'>Stephen Feather</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
