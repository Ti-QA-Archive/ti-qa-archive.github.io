<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>The correct way to call a local function Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>The correct way to call a local function</h1>
		</header>
		<section>
			<p>I wonder if the way we design the function &quot;call_search&quot; inside this procedure is the correct way. Thanks a lot.</p>
<p>note: &quot;pv&quot; is the main app namespace.</p>
<pre><code class="hljs"><span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> <span class="hljs-collection">{

    pv.ui = <span class="hljs-collection">{}</span><span class="hljs-comment">;</span>

    //=================================================
    pv.ui.createSearchWin = function<span class="hljs-list">()</span> <span class="hljs-collection">{
    //=================================================

        //Create interface
        var win = Ti.UI.createWindow<span class="hljs-list">()</span><span class="hljs-comment">;</span>
        var bar = Ti.UI.createView<span class="hljs-list">()</span><span class="hljs-comment">;</span>
        var btn = Ti.UI.createButton<span class="hljs-list">(<span class="hljs-collection">{title:'search'}</span>)</span><span class="hljs-comment">;</span>
        bar.add<span class="hljs-list">(<span class="hljs-keyword">btn</span>)</span><span class="hljs-comment">;</span>
        win.add<span class="hljs-list">(<span class="hljs-keyword">bar</span>)</span><span class="hljs-comment">;</span>


        //Define click event
        btn.addEventListener<span class="hljs-list">(<span class="hljs-keyword">'click'</span>, function<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span><span class="hljs-collection">{
            call_search<span class="hljs-list">()</span><span class="hljs-comment">;</span>
        }</span>)</span><span class="hljs-comment">;</span>


        function call_search<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> <span class="hljs-collection">{
            //Do someting...

        }</span><span class="hljs-comment">;</span>

        return win;

    }</span><span class="hljs-comment">;</span>

}</span>)</span><span class="hljs-list">()</span><span class="hljs-comment">;</span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="March 14th 2013, 5:31:44 am">March 14th 2013</span>
				by <span class='authorname'>Xabi Palmer</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>event</span></li>
					
						<li><span class='tagname'>namespace</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-258587">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>There is really only one &quot;problem&quot; with calling that function in that code in that way;</p>
<pre><code class="hljs"><span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> <span class="hljs-collection">{

    pv.ui = <span class="hljs-collection">{}</span><span class="hljs-comment">;</span>

    //=================================================
    pv.ui.createSearchWin = function<span class="hljs-list">()</span> <span class="hljs-collection">{
    //=================================================

        //Create interface
        var win = Ti.UI.createWindow<span class="hljs-list">()</span><span class="hljs-comment">;</span>
        var bar = Ti.UI.createView<span class="hljs-list">()</span><span class="hljs-comment">;</span>
        var btn = Ti.UI.createButton<span class="hljs-list">(<span class="hljs-collection">{title:'search'}</span>)</span><span class="hljs-comment">;</span>
        bar.add<span class="hljs-list">(<span class="hljs-keyword">btn</span>)</span><span class="hljs-comment">;</span>
        win.add<span class="hljs-list">(<span class="hljs-keyword">bar</span>)</span><span class="hljs-comment">;</span>


        function call_search<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> <span class="hljs-collection">{
            //Do someting...

        }</span><span class="hljs-comment">;</span>

        //Define click event
        btn.addEventListener<span class="hljs-list">(<span class="hljs-keyword">'click'</span>, function<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span><span class="hljs-collection">{
            call_search<span class="hljs-list">()</span><span class="hljs-comment">;</span>
        }</span>)</span><span class="hljs-comment">;</span>


        return win;

    }</span><span class="hljs-comment">;</span>

}</span>)</span><span class="hljs-list">()</span><span class="hljs-comment">;</span>
</code></pre><p>You should always define the thing before you reference the thing.  So in the above code I have moved the function you reference before you actually reference it.  Whilst in an event handler this is not likely to cause a problem, this rule should be followed at all times (where possible).</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 14th 2013, 8:02:55 am">March 14th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/149540/the-correct-way-to-call-a-local-function.html#answer-258587" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This however is a much better way of creating and managing the code above in a more reusable way with a lower memory footprint and focused code.</p>
<p>This uses <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;3.0&#x2F;#!&#x2F;guide&#x2F;CommonJS_Modules_in_Titanium">CommonJS</a> to manage your code rather than a namespace technique which has lost favour in recent times.</p>
<p>Create a new JS file <strong>searchwin.js</strong></p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createSearchWin</span><span class="hljs-params">(o)</span> </span>{
    <span class="hljs-keyword">var</span> obj = o || {};

    <span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
        title: obj.title || <span class="hljs-string">'Unknown'</span>
    });
    <span class="hljs-keyword">var</span> bar = Ti.UI.createView();
    <span class="hljs-keyword">var</span> btn = Ti.UI.createButton({title:<span class="hljs-string">'search'</span>});
    bar.add(btn);
    win.add(bar);

    <span class="hljs-keyword">var</span> call_search = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
        <span class="hljs-comment">//Do someting...</span>
    };
    <span class="hljs-comment">//Define click event</span>
    btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
        call_search();
    });
    <span class="hljs-keyword">return</span> win;
}
exports.createSearchWin = createSearchWin;
</code></pre><p>Usage</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> winSearch = <span class="hljs-built_in">require</span>(<span class="hljs-string">'/searchwin'</span>).createSearchWin({
    title: <span class="hljs-string">'Search Stuff'</span>
});
winSearch.open();
</code></pre><p>This will place all the logic in a file that is only placed into memory when required, you can add other functions in if you like that are related.</p>
<p>Not also the variation on how to write a function inside another function - this is a better style.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 14th 2013, 8:08:46 am">March 14th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>There are many advantages to CommonJS, here are the main ones.</p>
<ul>
<li>Break code into many small manageable, easy to maintain code snippet files.</li>
<li>Code is ONLY loaded if required, namespace loads EVERYTHING even if not called on.</li>
<li>Encourages reuse of common methods of your own in the same app</li>
<li>Easier to move from this project to another</li>
<li>Easier for multiple people to work on the same project - where you check in functionality</li>
<li>Does not pollute the namespace ot Ti (some people do)</li>
<li>Generally faster to run.</li>
<li>Makes cross platform development easier as you can place CommonJS modules in iPhone or Android folder INSTEAD of the main folder and those will ONLY be run on those devices.  This way you separate code that has specific platform differences.</li>
<li>Helps you focus on the importance of the app by defining functionality</li>
</ul>
<p>That should provide a starting a point.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 14th 2013, 2:46:54 pm">March 14th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thansks, I&#39;ll test this method :) Are there any disadvantages?</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 15th 2013, 5:13:58 am">March 15th 2013</span>
											by <span class='authorname'>Xabi Palmer</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Not really, whilst there may be some small negatives - it is unlikely you will hit any, and they will be more than offset by all the positives if you do.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 15th 2013, 7:35:34 am">March 15th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-258579">
				
						<section>
							<p>hi,</p>
<p>of course this is a correct way to define function within procedure but if your function is global and does not use any objects declared in <strong>pv.ui.createSearchWin</strong> then you can make <strong>call_search</strong> function global so you can use it globally in any window.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 14th 2013, 6:36:03 am">March 14th 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/149540/the-correct-way-to-call-a-local-function.html#answer-258579" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-258620">
				
						<section>
							<p>What&#39;s the most advantage of use CommonJS instead of owner namespaces?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 14th 2013, 2:15:35 pm">March 14th 2013</span>
								by <span class='authorname'>Xabi Palmer</span><br>
								<a class="icon-bg icon-link" href="question/149540/the-correct-way-to-call-a-local-function.html#answer-258620" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Quick tip; next time - please comment on the related answer or the actual question if there is no answer - rather than creating a whole new answer which is really a comment - it makes it harder in the future to work out threads if any answers score change or other answers are added. (You are not being told off)</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 14th 2013, 2:32:24 pm">March 14th 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
