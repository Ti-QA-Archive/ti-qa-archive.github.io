<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>install db method fails - Andriod » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>install db method fails - Andriod</h1>
		</header>
		<section>
			<p>This code works fine for iOS, but fails for Andriod:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">old</span> = Ti.Database.install(dir_path.R + <span class="hljs-string">'db/'</span> + db_name, <span class="hljs-string">'Towns'</span>);
</code></pre><p>Uncaught Error: install: invalid number of arguments. Expected 3 but got 2</p>
<p>Documentation says that this method only takes 2 arguments. What gives??</p>
<p>Any reason why this may be happening?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 21st 2013, 1:55:08 am">January 21st 2013</span>
				by <span class='authorname'>Steven Marshall</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Please need help on this, our andriod app is useless unless this works.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 21st 2013, 2:54:50 am">January 21st 2013</span>
								by <span class='authorname'>Steven Marshall</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Which Ti SDK are you using?</p>
<ul>
<li>3.0.0</li>
<li>2.1.4</li>
<li>something else?</li>
</ul>
</div>
							<div class="author">
								&mdash; commented <span title="January 21st 2013, 8:56:32 am">January 21st 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>using 2.1.4GA currently. This is an external module, where the code is, but worked last year with this code, but now is failing on andriod, but working on iPhone.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 21st 2013, 10:20:13 am">January 21st 2013</span>
								by <span class='authorname'>Steven Marshall</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-255030">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>Thanks for the update on SDK.  If you did this work last year (assuming around a full year) then 2.1.4 would not have been available - this would be a change, not sure if if relevant though.</p>
<p>I have a question related to your comment &quot;..external module…&quot;.  Can you explain if this is a compiled module or a CommonJS module?</p>
<p>To rule things out could you create a blank new default project and add your database install code, your <strong>db</strong> where your path points.  If this does not generate a problem make sure you can select the database.</p>
<p>Make sure your path does not have <strong>..</strong> at the start, start it with <strong>&#x2F;</strong> and point directly.</p>
<p>Test the database is readable by using a desktop sqlite read - there is a plugin-in for firefox if you do not have anything else.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 21st 2013, 10:30:32 am">January 21st 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/147170/install-db-method-fails---andriod#answer-255030" rel="permalink">permalink</a>
							</div>

							<h5>5 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>It is a CommonJS module. I have even taken it back to 2.1.3, and still get this weird error about 3 parameters instead of 2.</p>
<p>I have infact created a new project, and copied the db code, and it works.</p>
<p>So I am now in the process of checking why this may be.</p>
<p>As a side note I also got 2 other commonjs modules which started to fail too, which worked last year. Not sure what is going on.</p>
<p>Driving me crazy.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 10:37:19 am">January 21st 2013</span>
											by <span class='authorname'>Steven Marshall</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Excellent - narrowing down to the problem.</p>
<p>Check the syntax of your CommonJS code, any problems here will silently fail so you need to be careful.</p>
<p>I would always look for extra commas in object creation and undeclared variables first.</p>
<p>Consider the old-school 50&#x2F;50 technique, simply comment out half the code (that is sensible) and then run, do you still have the issue, then reverse the commenting. Obviously in coding this is not always easy.  So consider commenting all BUT the <strong>db</strong> install, if that works release the next block and so on.</p>
<p>Try running the code against a service like; <a href="http:&#x2F;&#x2F;jslint.com&#x2F;">jslint.com</a>, make sure to add some exceptions in the <em>*&quot;predefined global variables here&quot;</em>, some starting ones for you;</p>
<ul>
<li>Titanium</li>
<li>Ti</li>
<li>alert</li>
<li>JSON</li>
<li>plus any of your own</li>
</ul>
<p>This will let you find any issues, I suggest you use some of the forgiveness check-boxes below or you will spend all your time find white-space issues;</p>
<p>Tick these at least;</p>
<ul>
<li>messy white space</li>
<li>many var statements per function</li>
<li>missing &#39;use strict&#39; pragma</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 10:49:11 am">January 21st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>ok. I have moved the code to app.js the db code using an event listener, and that did the trick. Works fine now.</p>
<p>No idea why it stopped working. But that can happen sometimes.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 11:12:34 am">January 21st 2013</span>
											by <span class='authorname'>Steven Marshall</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Excellent, isn&#39;t coding fun!</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 11:15:11 am">January 21st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yeah. when it works. Actually been doing some native code too for android. Pretty nice how you can see all the methods of each object, too bad that isnt work for titanium. As makes coding much more fun.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 11:24:21 am">January 21st 2013</span>
											by <span class='authorname'>Steven Marshall</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-254999">
				
						<section>
							<p>hi,</p>
<p>ok, try one thing instead of <strong>dir_path.R</strong> and <strong>db_name</strong> try to  write path like</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">old</span> = Ti.Database.install(<span class="hljs-string">'../db/'</span> + db_name, <span class="hljs-string">'Towns'</span>);
</code></pre><p>or declare one variable and store path </p>
<p>like</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> dbPath = dir_path.R + <span class="hljs-string">'db/'</span> + db_name;
<span class="hljs-keyword">var</span> <span class="hljs-keyword">old</span> = Ti.Database.install(dbPath, <span class="hljs-string">'Towns'</span>);
</code></pre><p>and then clean build your project  and also if installed in emulator or device try to delete it first and try again.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 21st 2013, 7:22:06 am">January 21st 2013</span>
								by <span class='authorname'>Mitul Bhalia</span><br>
								<a class="icon-bg icon-link" href="question/147170/install-db-method-fails---andriod#answer-254999" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Tried both these suggestions, and gives same error. Something is really wrong here. How can this code just break, when I never changed anything!!!! Arhhhhhh???</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 21st 2013, 8:16:35 am">January 21st 2013</span>
											by <span class='authorname'>Steven Marshall</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
