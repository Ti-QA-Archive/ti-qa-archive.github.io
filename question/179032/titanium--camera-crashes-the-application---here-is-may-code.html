<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium : Camera crashes the application - here is may code » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium : Camera crashes the application - here is may code</h1>
		</header>
		<section>
			<p>$.profilepicview.addEventListener(&#39;click&#39;, function(e) {<br>    var dialog = Titanium.UI.createOptionDialog({<br>        &#x2F;&#x2F;title of dialog<br>        title : &#39;Choose an image source…&#39;,<br>        &#x2F;&#x2F;options<br>        options : [&#39;Camera&#39;, &#39;Photo Gallery&#39;, &#39;Cancel&#39;],<br>        &#x2F;&#x2F;index of cancel button<br>        cancel : 2<br>    });</p>
<pre><code class="hljs">dialog.show();
dialog.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-comment">//if first option was selected</span>
    <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">//then we are getting image from camera</span>
        Titanium.Media.showCamera({
            <span class="hljs-comment">//we got something</span>
            success : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                <span class="hljs-comment">//getting media</span>
                <span class="hljs-keyword">var</span> image = event.media;

                <span class="hljs-comment">//checking if it is photo</span>
                <span class="hljs-keyword">if</span> (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
                    <span class="hljs-comment">//we may create image view with contents from image variable</span>
                    <span class="hljs-comment">//or simply save path to image</span>

                    $.profilepic.image = event.media;

                    profilePic = event.media;



                }
            },
            cancel : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-comment">//do somehting if user cancels operation</span>
            },
            error : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
                <span class="hljs-comment">//error happend, create alert</span>
                <span class="hljs-keyword">var</span> a = Titanium.UI.createAlertDialog({
                    title : <span class="hljs-string">'Camera'</span>
                });
                <span class="hljs-comment">//set message</span>
                <span class="hljs-keyword">if</span> (error.code == Titanium.Media.NO_CAMERA) {
                    a.setMessage(<span class="hljs-string">'Device does not have camera'</span>);
                } <span class="hljs-keyword">else</span> {
                    a.setMessage(<span class="hljs-string">'Unexpected error: '</span> + error.code);
                }

                <span class="hljs-comment">// show alert</span>
                a.show();
            },
            allowImageEditing : <span class="hljs-literal">true</span>,
            saveToPhotoGallery : <span class="hljs-literal">true</span>
        });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">1</span>) {
        <span class="hljs-comment">//obtain an image from the gallery</span>
        Titanium.Media.openPhotoGallery({
            success : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                <span class="hljs-comment">//getting media</span>
                <span class="hljs-keyword">var</span> cropRect = event.cropRect;
                <span class="hljs-keyword">var</span> image = event.media;
                <span class="hljs-comment">// set image view</span>

                <span class="hljs-comment">//checking if it is photo</span>
                <span class="hljs-keyword">if</span> (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
                    <span class="hljs-comment">//we may create image view with contents from image variable</span>
                    <span class="hljs-comment">//or simply save path to image</span>

                    $.profilepic.image = event.media;

                    profilePic = event.media;


                }
            },
            cancel : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-comment">//user cancelled the action fron within</span>
                <span class="hljs-comment">//the photo gallery</span>
            },
            allowImageEditing : <span class="hljs-literal">true</span>,
        });
    } 
});
</code></pre><p>});</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 13th 2014, 6:11:47 am">November 13th 2014</span>
				by <span class='authorname'>Sandeep Bhambad</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>camera crash</span></li>
					
						<li><span class='tagname'>titanium.media</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-283797">
				
						<section>
							<p>Hello Sandeep,</p>
<p>I tested your code on Android and IOS real device, it works as expected. The app does not crease for me. Test it again and send your testing environment and log for further investigation.</p>
<p><strong>My Testing Environment:</strong><br>Titanium SDK: 3.4.0,<br>Titanium CLI: 3.4.0,<br>iOS Version: 8.1,<br>Android SDK : 4.3<br>OS X Version: 10.9.5,<br>Appcelerator Studio: 3.4.1</p>
<p><strong>index.xml</strong></p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Window</span>  <span class="hljs-attribute">exitOnClose</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">layout</span>=<span class="hljs-value">"vertical"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ImageView</span> <span class="hljs-attribute">width</span>=<span class="hljs-value">"200"</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">"200"</span> <span class="hljs-attribute">top</span>=<span class="hljs-value">"20"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"profilepic"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">ImageView</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Button</span>  <span class="hljs-attribute">id</span>=<span class="hljs-value">"profilepicview"</span> <span class="hljs-attribute">width</span>=<span class="hljs-value">"100"</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">"60"</span> <span class="hljs-attribute">top</span>=<span class="hljs-value">"20"</span>&gt;</span>Set Profile<span class="hljs-tag">&lt;/<span class="hljs-title">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Window</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p><strong>index.js</strong></p>
<pre><code class="hljs">$.profilepicview.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> dialog = Titanium.UI.createOptionDialog({
        title : <span class="hljs-string">'Choose an image source...'</span>, <span class="hljs-comment">//title of dialog</span>
        options : [<span class="hljs-string">'Camera'</span>, <span class="hljs-string">'Photo Gallery'</span>, <span class="hljs-string">'Cancel'</span>], <span class="hljs-comment">//options</span>
        cancel : <span class="hljs-number">2</span> <span class="hljs-comment">//index of cancel button</span>
    });
    dialog.show();
    dialog.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-comment">//if first option was selected</span>
        <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">0</span>) {
            <span class="hljs-comment">//then we are getting image from camera</span>
            Titanium.Media.showCamera({
                <span class="hljs-comment">//we got something</span>
                success : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    <span class="hljs-comment">//getting media</span>
                    <span class="hljs-keyword">var</span> image = event.media;

                    <span class="hljs-comment">//checking if it is photo</span>
                    <span class="hljs-keyword">if</span> (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
                        <span class="hljs-comment">//we may create image view with contents from image variable</span>
                        <span class="hljs-comment">//or simply save path to image</span>

                        $.profilepic.image = event.media;

                        profilePic = event.media;

                    }
                },
                cancel : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-comment">//do somehting if user cancels operation</span>
                },
                error : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
                    <span class="hljs-comment">//error happend, create alert</span>
                    <span class="hljs-keyword">var</span> a = Titanium.UI.createAlertDialog({
                        title : <span class="hljs-string">'Camera'</span>
                    });
                    <span class="hljs-comment">//set message</span>
                    <span class="hljs-keyword">if</span> (error.code == Titanium.Media.NO_CAMERA) {
                        a.setMessage(<span class="hljs-string">'Device does not have camera'</span>);
                    } <span class="hljs-keyword">else</span> {
                        a.setMessage(<span class="hljs-string">'Unexpected error: '</span> + error.code);
                    }

                    <span class="hljs-comment">// show alert</span>
                    a.show();
                },
                allowImageEditing : <span class="hljs-literal">true</span>,
                saveToPhotoGallery : <span class="hljs-literal">true</span>
            });
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.index == <span class="hljs-number">1</span>) {
            <span class="hljs-comment">//obtain an image from the gallery</span>
            Titanium.Media.openPhotoGallery({
                success : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
                    <span class="hljs-comment">//getting media</span>
                    <span class="hljs-keyword">var</span> cropRect = event.cropRect;
                    <span class="hljs-keyword">var</span> image = event.media;
                    <span class="hljs-comment">// set image view</span>

                    <span class="hljs-comment">//checking if it is photo</span>
                    <span class="hljs-keyword">if</span> (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
                        <span class="hljs-comment">//we may create image view with contents from image variable</span>
                        <span class="hljs-comment">//or simply save path to image</span>

                        $.profilepic.image = event.media;

                        profilePic = event.media;

                    }
                },
                cancel : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                    <span class="hljs-comment">//user cancelled the action fron within</span>
                    <span class="hljs-comment">//the photo gallery</span>
                },
                allowImageEditing : <span class="hljs-literal">true</span>,
            });
        }
    });
});

$.index.open();
</code></pre><p>If you have any concern, then feel free to ask me.</p>
<p>Thanks.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 13th 2014, 7:48:50 am">November 13th 2014</span>
								by <span class='authorname'>Motiur Rahman</span><br>
								<a class="icon-bg icon-link" href="question/179032/titanium--camera-crashes-the-application---here-is-may-code.html#answer-283797" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Motiur Rahman,<br>Thank you for all your cooperation.I really appreciate your cooperation.<br>Testing Environment is : CLI version 3.2.3, Titanium SDK version 3.2.3.GA,IOS sdk 7.1,OS X Version: 10.9.5 Testing Device : ipad mini<br>Test Case : -&gt; select camera -&gt; capture a picture -&gt; use photo; repeat this many times app will crash.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 13th 2014, 8:58:12 am">November 13th 2014</span>
											by <span class='authorname'>Sandeep Bhambad</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Currently Titanium SDK version is 3.4.0GA and CLI version:3.4.0 test on it, hope  problem will be solved.</p>
<p>Thanks.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 13th 2014, 12:13:00 pm">November 13th 2014</span>
											by <span class='authorname'>Motiur Rahman</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>But Ti SDK 3.4.0GA works only Xcode 6.<a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;titanium&#x2F;release-notes&#x2F;?version=3.4.0.GA#ios">Compatibility</a></p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 13th 2014, 12:21:05 pm">November 13th 2014</span>
											by <span class='authorname'>Motiur Rahman</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-283801">
				
						<section>
							<p>Hi Motiur Rahman,</p>
<p>Thank you for all your cooperation.I really appreciate your cooperation.</p>
<p>Testing Environment is : CLI version 3.2.3, Titanium SDK version 3.2.3.GA,IOS sdk 7.1,OS X Version: 10.9.5<br>Testing Device : ipad mini</p>
<p>Test Case : -&gt; select camera -&gt; capture a picture -&gt; use photo; repeat this many times app will crash.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 13th 2014, 8:57:31 am">November 13th 2014</span>
								by <span class='authorname'>Sandeep Bhambad</span><br>
								<a class="icon-bg icon-link" href="question/179032/titanium--camera-crashes-the-application---here-is-may-code.html#answer-283801" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
