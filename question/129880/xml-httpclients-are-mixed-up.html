<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>XML httpclients are mixed up Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>XML httpclients are mixed up</h1>
		</header>
		<section>
			<p>I have a view with 2 labels. Each has click event listeners which will open up new view on top of it and these 2nd views are all tableviews created by httpclients.<br>httpclients works fine. It is communicating with server just fine and I&#39;m also getting the data I want. </p>
<p>The problems is that when I add httpclient on second label, the 1st label&#39;s httpclient doesn&#39;t show up. And sometimes I see second label&#39;s tabelview under first label and vise-versa. </p>
<p>What could be the problem?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 27th 2011, 2:03:50 am">December 27th 2011</span>
				by <span class='authorname'>Nidhi Shah</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>httpclient</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi Nidhi </p>
<p>are you trying to call the 2 httpclient at the same time? and as you have mentioned that the label is also dynamically generated by the httpclient code so if possible to share then share the code here. it might possible that the id to the tableview is not assigning properly.</p>
<p>Regards</p>
<p>Nikunj</p>
</div>
							<div class="author">
								&mdash; commented <span title="December 27th 2011, 2:13:20 am">December 27th 2011</span>
								by <span class='authorname'>Nikunj Sakhrelia</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi nikunj,<br>I have two labels and each has saperate httpclient. So if first label is clicked, then only one httpclient is called.<br>here&#39;s my first httpclient code:</p>
<pre><code class="hljs">var firstData = [];
var tableview = Ti.UI.createTableView({
    data: [],
    separatorColor: '<span class="hljs-comment">#6fab70'</span>
});
mainview.add(tableview);
tableview.addEventListener('click',function(e){
    descrip.<span class="hljs-type">text</span> = <span class="hljs-string">"Description: "</span> +e.rowData.tagName1;
    headname.<span class="hljs-type">text</span> = e.rowData.tagName2;
    funfact.<span class="hljs-type">text</span> = <span class="hljs-string">"Fun Fact:"</span> +e.rowData.tagName4;
    sciname.<span class="hljs-type">text</span> = <span class="hljs-string">"Scientific Name: "</span> +e.rowData.tagName3;
    view4.visible = <span class="hljs-constant">true</span>;   
});
var xhr = Ti.Network.createHTTPClient();
xhr.onload = function(){
    <span class="hljs-keyword">if</span>(this.readyState == <span class="hljs-number">4</span>){
        var doc = this.responseXML.documentElement;

        var items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);

        <span class="hljs-keyword">for</span> (var c=<span class="hljs-number">0</span>;c&lt;items.<span class="hljs-property">length</span>;c++)
        {
            var <span class="hljs-property">item</span> = items.<span class="hljs-property">item</span>(c);
            var description = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"description"</span>);
            var Scientific = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"Scientific"</span>);
            var funfact = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"FunFact"</span>);

            var thumbnails = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"media:thumbnail"</span>);
            <span class="hljs-keyword">if</span> (thumbnails &amp;&amp; thumbnails.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>)
            {
                var media = thumbnails.<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"url"</span>);
                var titlename = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"title"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>;

                var row = Ti.UI.createTableViewRow({
                    height:<span class="hljs-number">80</span>,
                    className: 'xmlData',   

                    tagName1 : <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"description"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>,
                    tagName2 : <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"title"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>,
                    tagName3 : <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"Scientific"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>,
                    tagName4 : <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"FunFact"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>,

                });
                var label = Ti.UI.createLabel({
                    <span class="hljs-type">text</span>:titlename,
                    left:<span class="hljs-number">72</span>,
                    top:<span class="hljs-number">5</span>,
                    bottom:<span class="hljs-number">5</span>,
                    right:<span class="hljs-number">5</span>             
                });
                row.add(label);
                var img = Ti.UI.createImageView({
                        image:media,
                        left:<span class="hljs-number">5</span>,
                        height:<span class="hljs-number">60</span>,
                        width:<span class="hljs-number">60</span>
                });

                }
                row.add(img);
                firstData.push(row);    
            }
            tableview.setData(firstData); 
        }
};  
xhr.open(<span class="hljs-string">"GET"</span>,<span class="hljs-string">"http://www.myurl.com/file.xml"</span>);
xhr.send();
</code></pre><p>and this is the second one:</p>
<pre><code class="hljs">var secondData = [];
var tableview = Ti.UI.createTableView({
    data: [],
    separatorColor: '<span class="hljs-comment">#6fab70'</span>
});
mainview2.add(tableview);
tableview.addEventListener('click',function(e){
    desc.<span class="hljs-type">text</span> = <span class="hljs-string">"Description: "</span> +e.rowData.tagName10;
    title.<span class="hljs-type">text</span> = e.rowData.tagName20;
    funfact2.<span class="hljs-type">text</span> = <span class="hljs-string">"Fun Fact: "</span> +e.rowData.tagName40;
    scientific.<span class="hljs-type">text</span> = <span class="hljs-string">"Scientific Name: "</span> +e.rowData.tagName30;
    view5.visible = <span class="hljs-constant">true</span>;

});
var fauna = Ti.Network.createHTTPClient();
fauna.onload = function(){
    <span class="hljs-keyword">if</span>(this.readyState == <span class="hljs-number">4</span>){
        var doc = this.responseXML.documentElement;

        var items = doc.getElementsByTagName(<span class="hljs-string">"item"</span>);

        <span class="hljs-keyword">for</span> (var c=<span class="hljs-number">0</span>;c&lt;items.<span class="hljs-property">length</span>;c++)
        {
            var <span class="hljs-property">item</span> = items.<span class="hljs-property">item</span>(c);
            var description = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"Description"</span>);
            var Scientific = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"Scientific"</span>);
            var funfact = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"FunFact"</span>);

            var thumbnails = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"media:thumbnail"</span>);
            <span class="hljs-keyword">if</span> (thumbnails &amp;&amp; thumbnails.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>)
            {
                var media = thumbnails.<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).getAttribute(<span class="hljs-string">"url"</span>);
                var titlename = <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"title"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>;

                var row2 = Ti.UI.createTableViewRow({
                    height:<span class="hljs-number">80</span>,
                    className: 'xmlData',   

                    tagName10 : <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"Description"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>,
                    tagName20 : <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"title"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>,
                    tagName30 : <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"Scientific"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>,
                    tagName40 : <span class="hljs-property">item</span>.getElementsByTagName(<span class="hljs-string">"FunFact"</span>).<span class="hljs-property">item</span>(<span class="hljs-number">0</span>).<span class="hljs-type">text</span>,

                });
                var label = Ti.UI.createLabel({
                    <span class="hljs-type">text</span>:titlename,
                    left:<span class="hljs-number">72</span>,
                    top:<span class="hljs-number">5</span>,
                    bottom:<span class="hljs-number">5</span>,
                    right:<span class="hljs-number">5</span>             
                });
                row2.add(label);
                var img = Ti.UI.createImageView({
                        image:media,
                        left:<span class="hljs-number">5</span>,
                        height:<span class="hljs-number">60</span>,
                        width:<span class="hljs-number">60</span>
                });

                }
                row2.add(img);
                secondData.push(row2);    
            }
            tableview.setData(secondData); 
        }
};  
fauna.open(<span class="hljs-string">"GET"</span>,<span class="hljs-string">"http://www.myurl.com/file2.xml"</span>);
fauna.send();
</code></pre></div>
							<div class="author">
								&mdash; commented <span title="December 27th 2011, 2:23:29 am">December 27th 2011</span>
								by <span class='authorname'>Nidhi Shah</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-226136">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi Nidhi,</p>
<p>When you saying &quot; I see second label&#39;s tabelview under first label&quot; that means you need to set zIndex values for both the tables.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 27th 2011, 6:46:36 am">December 27th 2011</span>
								by <span class='authorname'>Zarir Bhesania</span><br>
								<a class="icon-bg icon-link" href="question/129880/xml-httpclients-are-mixed-up#answer-226136" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Zarir,<br>As you suggested, I added zIndex to tableview. I added the same zIndex as the mainview.<br>But now click event listerner isn&#39;t working.</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 27th 2011, 11:26:56 pm">December 27th 2011</span>
											by <span class='authorname'>Nidhi Shah</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Oh I figured.<br>I made a lower zIndex of tabelviews than the mainview. And now it&#39;s not mixing up.<br>Thanks Zarir !</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 28th 2011, 12:02:23 am">December 28th 2011</span>
											by <span class='authorname'>Nidhi Shah</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Welcome</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 28th 2011, 3:09:37 am">December 28th 2011</span>
											by <span class='authorname'>Zarir Bhesania</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-226132">
				
						<section>
							<p>there are many timing issues in Titanium.<br>try using flags and timeouts</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 27th 2011, 4:51:52 am">December 27th 2011</span>
								by <span class='authorname'>mo joe</span><br>
								<a class="icon-bg icon-link" href="question/129880/xml-httpclients-are-mixed-up#answer-226132" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
