<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Androdir error trying to add a calendar event: java.lang.Double cannot be cast to java.lang.Long » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Androdir error trying to add a calendar event: java.lang.Double cannot be cast to java.lang.Long</h1>
		</header>
		<section>
			<p>I&#39;m trying to add an event to calendar usin intents, because it allows my app to not request calendar write permissions, and if there are more applications that can handle events, user can select it. Also allows user to edit event with native interface, without need to creare my own interface.</p>
<p>This is my code:</p>
<pre><code class="hljs"><span class="hljs-built_in">var</span> intent = Ti<span class="hljs-built_in">.</span>Android<span class="hljs-built_in">.</span>createIntent({
    action: Ti<span class="hljs-built_in">.</span>Android<span class="hljs-built_in">.</span>ACTION_EDIT,
    <span class="hljs-keyword">type</span>: <span class="hljs-string">'vnd.android.cursor.item/event'</span>
});

intent<span class="hljs-built_in">.</span>putExtra(<span class="hljs-string">'title'</span>, <span class="hljs-built_in">data</span><span class="hljs-built_in">.</span>title);
intent<span class="hljs-built_in">.</span>putExtra(<span class="hljs-string">'description'</span>, <span class="hljs-built_in">data</span><span class="hljs-built_in">.</span>description);
intent<span class="hljs-built_in">.</span>putExtra(<span class="hljs-string">'eventLocation'</span>, <span class="hljs-built_in">data</span><span class="hljs-built_in">.</span>location);
intent<span class="hljs-built_in">.</span>putExtra(<span class="hljs-string">'beginTime'</span>, parseInt(<span class="hljs-built_in">data</span><span class="hljs-built_in">.</span><span class="hljs-keyword">to</span><span class="hljs-built_in">.</span>miliseconds));
intent<span class="hljs-built_in">.</span>putExtra(<span class="hljs-string">'endTime'</span>, parseInt(<span class="hljs-built_in">data</span><span class="hljs-built_in">.</span><span class="hljs-keyword">to</span><span class="hljs-built_in">.</span>miliseconds));

Ti<span class="hljs-built_in">.</span>Android<span class="hljs-built_in">.</span>currentActivity<span class="hljs-built_in">.</span>startActivity(intent);
</code></pre><p>beginTime and endTime, expressed in miliseconds as integer, throws this exception:</p>
<pre><code class="hljs">[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>] java.lang.ClassCastException: java.lang.Double cannot be cast to java.lang.Long
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.os.Bundle.getLong(Bundle.java:973)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.content.Intent.getLongExtra(Intent.java:4063)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at com.android.calendar.event.EditEventActivity.getEventInfoFromIntent(EditEventActivity.java:114)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at com.android.calendar.event.EditEventActivity.onCreate(EditEventActivity.java:56)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.app.Activity.performCreate(Activity.java:5008)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.app.ActivityThread.access$600(ActivityThread.java:130)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.os.Handler.dispatchMessage(Handler.java:99)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.os.Looper.loop(Looper.java:137)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at android.app.ActivityThread.main(ActivityThread.java:4745)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at java.lang.reflect.Method.invokeNative(Native Method)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at java.lang.reflect.Method.invoke(Method.java:511)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
[<span class="hljs-link_label">WARN</span>][<span class="hljs-link_reference">Bundle  (  843)</span>]     at dalvik.system.NativeStart.main(Native Method)
</code></pre><p>Can I pass this values as long instead of double?</p>
<p>Please, don&#39;t suggest to use Titanium.Android.Calendar API, I tried and is not what I need…</p>
<p>Thanks!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 8th 2012, 1:13:22 am">November 8th 2012</span>
				by <span class='authorname'>David Martínez</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>calendar</span></li>
					
						<li><span class='tagname'>double</span></li>
					
						<li><span class='tagname'>long</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>What does <code>data.to.miliseconds</code> hold and how is that value assigned?</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 8th 2012, 8:49:51 pm">November 8th 2012</span>
								by <span class='authorname'>Shawn Lipscomb</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-250804">
				
						<section>
							<p>Shawn, data is a JSON decoded value received through XHR from a PHP server. Is just an unix timestamp multiplied by 1000. Anyway, I tried to use multiple values: </p>
<pre><code class="hljs">intent.putExtra('beginTime', <span class="hljs-number">135240237300</span>0)<span class="hljs-comment">;</span>
intent.putExtra('beginTime', parseInt(<span class="hljs-number">135240237300</span>0))<span class="hljs-comment">;</span>
intent.putExtra('beginTime', new Date(<span class="hljs-number">1352402373</span>).getTime())<span class="hljs-comment">;</span>
</code></pre><p>None of those options works, because intent expects a Long and any value bigger tan 32bit is converted to Double…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2012, 7:14:28 am">November 9th 2012</span>
								by <span class='authorname'>David Martínez</span><br>
								<a class="icon-bg icon-link" href="question/144484/androdir-error-trying-to-add-a-calendar-event-javalangdouble-cannot-be-cast-to-javalanglong.html#answer-250804" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
