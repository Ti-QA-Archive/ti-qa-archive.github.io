<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Mobile SDK 1.8.0.1 Android Orientation Bug? Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Mobile SDK 1.8.0.1 Android Orientation Bug?</h1>
		</header>
		<section>
			<p>Guys, please i need your help very very much. I&#39;ve spent many many hours with this problem and do not know what else to do. I tried a solution in Q&amp;A, blog and documentation without success. I have an app that works very well since the first stable release of Titanium Mobile, about a year and a half, both iOS and Android. For Android devices I need to define a set of parameters to the home screen as well as in others, such as wallpaper, menu type, and others whose behavior depends on the orientation and resolution of the device. The orientation is the key issue here because I need to lock the home screen in portrait format.</p>
<p>The application worked well until version 1.7.0 Mobile SDK. In version 1.7.2 there was a discrete change in behavior but in 1.8.0.1 it failed to work properly.</p>
<p>I prepared an example to explain better my problem. The complete code below was generated by Titanium to create a new project and I added a line to show the initial orientation of the device <code>Ti.API.info(&amp;quot;Initial orientation mode: &amp;quot; + Ti.Gesture.orientation)</code> and another to lock the orientation in portrait mode <code>win1.orientationModes = [Ti.UI.PORTRAIT]</code>.</p>
<pre><code class="hljs">Titanium.UI.setBackgroundColor(<span class="hljs-string">'#000'</span>);

<span class="hljs-comment">// Inserted for me</span>
Ti.API.info(<span class="hljs-string">"Initial orientation mode: "</span> + Ti.Gesture.orientation);

<span class="hljs-comment">// create tab group</span>
var tabGroup = Titanium.UI.createTabGroup();

<span class="hljs-comment">// create base UI tab and root window</span>
var win1 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 1'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});

<span class="hljs-comment">// Inserted for me ...</span>
<span class="hljs-comment">// Orientation locked</span>
win1.orientationModes = [Ti.UI.PORTRAIT];

var tab1 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_views.png'</span>,
    title:<span class="hljs-string">'Tab 1'</span>,
    window:win1
});

var label1 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 1'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win1.<span class="hljs-built_in">add</span>(label1);

<span class="hljs-comment">// create controls tab and root window</span>
var win2 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 2'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>
});


var tab2 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_ui.png'</span>,
    title:<span class="hljs-string">'Tab 2'</span>,
    window:win2
});

var label2 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 2'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win2.<span class="hljs-built_in">add</span>(label2);

<span class="hljs-comment">//  add tabs</span>
tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  

<span class="hljs-comment">// open tab group</span>
tabGroup.<span class="hljs-built_in">open</span>();
</code></pre><ul>
<li>Starting the app with the emulator or device in landscape -</li>
</ul>
<p>When compiling this code with the SDK 1.7.0 Ti.Gesture.orientation returns 3, landscape mode, and the application responds correctly to the command&#x2F;property <code>orientationModes</code> and stay in portrait mode, as can be seen <a href="http:&#x2F;&#x2F;img198.imageshack.us&#x2F;img198&#x2F;4426&#x2F;samplesdk170.png">here</a>. That is, the app behaves correctly and exactly as I need.</p>
<p>When compiling the code with the SDK 1.7.2 Ti.Gesture.orientation returns 2, portrait mode (UPSIDE_PORTRAIT), but the application responds to the command and is in portrait mode, as can be seen <a href="http:&#x2F;&#x2F;img198.imageshack.us&#x2F;img198&#x2F;7013&#x2F;samplesdk172.png">here</a>.</p>
<p>When compiling the code with the SDK 1.8.0.1 Ti.Gesture.orientation returns 2, portrait mode (UPSIDE_PORTRAIT) and the application responds to the win1.orientationModes = [Ti.UI.PORTRAIT] and is in landscape mode, as can be seen <a href="http:&#x2F;&#x2F;img576.imageshack.us&#x2F;img576&#x2F;9428&#x2F;samplesdk1801.png">here</a>.</p>
<p>I did tests using the Android Emulator 3.0, 2.2 and 2.2 and 2.3 devices with always getting the same result.</p>
<p>Please, somebody help me because I&#39;m desperate.</p>
<p>Many thanks in advance!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 25th 2012, 6:52:31 pm">January 25th 2012</span>
				by <span class='authorname'>Jose Luna</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>1.8.0.1</span></li>
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>orientation</span></li>
					
						<li><span class='tagname'>orientationmode</span></li>
					
				</ul>
			

			<section>
				<h5>5 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Sorry! Explaining, in the third example the command <code>win1.orientationModes = [Ti.UI.PORTRAIT]</code> don&#39;t work and the application still in landscape mode.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 25th 2012, 6:58:56 pm">January 25th 2012</span>
								by <span class='authorname'>Jose Luna</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I just tried the &#39;win1.orientationModes = [Ti.UI.PORTRAIT]&#39; in an app of mine on a HTC Evo 3d, and it works as expected. (TI 1.8.0.1 on Mac OSX, Android 2.3.4, Google API v2.2)</p>
<p>Have you tried a clean&#x2F;rebuild from scratch?</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 25th 2012, 7:35:34 pm">January 25th 2012</span>
								by <span class='authorname'>Ray Belisle</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I cleaned project before each compilation. I tested on Xoom (3.1), Galaxy tab 7&quot; (2.2) and SE Xperia (2.3). Please, if you can do try to create and install project with this example above. If you use a simple window (without tab group) it will works fine. I think that the problem is associated with tab groups. Thank you very much.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 25th 2012, 8:12:04 pm">January 25th 2012</span>
								by <span class='authorname'>Jose Luna</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hello,<br>i did this code:</p>
<pre><code class="hljs">
Titanium.UI.orientation = Titanium.UI.LANDSCAPE_LEFT;

<span class="hljs-comment">// create tab group</span>
var tabGroup = Titanium.UI.createTabGroup();


<span class="hljs-comment">//</span>
<span class="hljs-comment">// create base UI tab and root window</span>
<span class="hljs-comment">//</span>
var win1 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 1'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>,
});
var tab1 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_views.png'</span>,
    title:<span class="hljs-string">'Tab 1'</span>,
    window:win1
});

var label1 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 1'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win1.<span class="hljs-built_in">add</span>(label1);

<span class="hljs-comment">//</span>
<span class="hljs-comment">// create controls tab and root window</span>
<span class="hljs-comment">//</span>
var win2 = Titanium.UI.createWindow({  
    title:<span class="hljs-string">'Tab 2'</span>,
    backgroundColor:<span class="hljs-string">'#fff'</span>,
});
var tab2 = Titanium.UI.createTab({  
    icon:<span class="hljs-string">'KS_nav_ui.png'</span>,
    title:<span class="hljs-string">'Tab 2'</span>,
    window:win2
});

var label2 = Titanium.UI.createLabel({
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'#999'</span>,
    <span class="hljs-built_in">text</span>:<span class="hljs-string">'I am Window 2'</span>,
    font:{fontSize:<span class="hljs-number">20</span>,fontFamily:<span class="hljs-string">'Helvetica Neue'</span>},
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'center'</span>,
    <span class="hljs-variable">width</span>:<span class="hljs-string">'auto'</span>
});

win2.<span class="hljs-built_in">add</span>(label2);



<span class="hljs-comment">//</span>
<span class="hljs-comment">//  add tabs</span>
<span class="hljs-comment">//</span>
tabGroup.addTab(tab1);  
tabGroup.addTab(tab2);  

<span class="hljs-comment">// open tab group</span>
tabGroup.<span class="hljs-built_in">open</span>();
</code></pre><p>and I see this <a href="http:&#x2F;&#x2F;yfrog.com&#x2F;ntjfxmp">nice landscape</a>.</p>
<p>Best,</p>
<p>Mauro</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 25th 2012, 8:52:00 pm">January 25th 2012</span>
								by <span class='authorname'>Mauro Parra</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thanks Mauro, but the problem is that the app needs to be lock in protrait mode. If you use <code>Titanium.UI.orientation = Titanium.UI.PORTRAIT</code> the app do not work correctly, stay in landscape position. (remember that the emulator or device is in landscape position)</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 25th 2012, 9:59:44 pm">January 25th 2012</span>
								by <span class='authorname'>Jose Luna</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-230109">
				
						<section>
							<p>Jose,</p>
<p>Had the same problem. win.orientationModes was being ignored from 1.8 onward with the window inside a tabGroup.</p>
<p>I worked around it by adding the following to my tiapp.xml:</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">android</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">manifest</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">application</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">activity</span> 
          <span class="hljs-attribute">android:configChanges</span>=<span class="hljs-value">"keyboardHidden|orientation"</span> 
          <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"ti.modules.titanium.ui.TiTabActivity"</span>
          <span class="hljs-attribute">android:screenOrientation</span>=<span class="hljs-value">"portrait"</span>
          /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">application</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">manifest</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">android</span>&gt;</span>
</code></pre><p>Note: I have stripped out all my other customer manifest bits and left the structure for you.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 12th 2012, 9:41:21 pm">February 12th 2012</span>
								by <span class='authorname'>David Bankier</span><br>
								<a class="icon-bg icon-link" href="question/131179/mobile-sdk-1801-android-orientation-bug#answer-230109" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>And add win.orientationModes = [ Ti.UI.PORTRAIT ]; after each window creation.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 6th 2012, 9:48:38 am">June 6th 2012</span>
											by <span class='authorname'>Ibtihaaj Ghoorun</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228596">
				
						<section>
							<p>Please, does anyone have any idea about how solve this problem?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 26th 2012, 9:23:24 am">January 26th 2012</span>
								by <span class='authorname'>Jose Luna</span><br>
								<a class="icon-bg icon-link" href="question/131179/mobile-sdk-1801-android-orientation-bug#answer-228596" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228638">
				
						<section>
							<p>This is working for me </p>
<pre><code class="hljs"><span class="hljs-title">var</span> prevOrientation;
<span class="hljs-title">if</span> (isAndroid)
{
    <span class="hljs-title">var</span> tempOrient = mainWindow.getOrientation();
    <span class="hljs-title">if</span> ( (tempOrient == <span class="hljs-number">1</span>) || (tempOrient == <span class="hljs-number">3</span>) ) {    <span class="hljs-title">prevOrientation</span> = <span class="hljs-string">'portrait'</span>; }
    <span class="hljs-title">else</span> {    <span class="hljs-title">prevOrientation</span> = <span class="hljs-string">'landscape'</span>; }
}
<span class="hljs-title">else</span>
{
    <span class="hljs-title">var</span> tempOrient = Ti.UI.getOrientation();
    <span class="hljs-title">if</span> ( (tempOrient == <span class="hljs-number">1</span>) || (tempOrient == <span class="hljs-number">2</span>) ) {    <span class="hljs-title">prevOrientation</span> = <span class="hljs-string">'portrait'</span>; }
    <span class="hljs-title">else</span> {    <span class="hljs-title">prevOrientation</span> = <span class="hljs-string">'landscape'</span>; }
}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 26th 2012, 2:10:19 pm">January 26th 2012</span>
								by <span class='authorname'>Idan Jan</span><br>
								<a class="icon-bg icon-link" href="question/131179/mobile-sdk-1801-android-orientation-bug#answer-228638" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for your reply, Idan. But I need do lock a window inside a tabGroup in portrait mode. This was working very well until sdk 1.7.5. In sdk 1.8.0.1 do not work.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2012, 3:18:22 pm">January 26th 2012</span>
											by <span class='authorname'>Jose Luna</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for your reply, Idan. But I need do lock a window inside a tabGroup in portrait mode. This was working very well until sdk 1.7.5. In sdk 1.8.0.1 do not work.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 26th 2012, 3:18:23 pm">January 26th 2012</span>
											by <span class='authorname'>Jose Luna</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-228722">
				
						<section>
							<p>Guys, this problem just occurs in Android. I tested with iOS, iPhone and iPad, and the behavior was as an expected. Seems a bug of 1.8.0 and 1.8.0.1 on Android.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 27th 2012, 8:50:16 am">January 27th 2012</span>
								by <span class='authorname'>Jose Luna</span><br>
								<a class="icon-bg icon-link" href="question/131179/mobile-sdk-1801-android-orientation-bug#answer-228722" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
