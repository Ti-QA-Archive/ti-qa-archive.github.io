<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>math help - calculate rotation angle - code and images within » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>math help - calculate rotation angle - code and images within</h1>
		</header>
		<section>
			<p>hey,<br>im working on a titanium mobile application targeted for ipad.<br>im using SDK Ti.Mobile 1.7.5 or 1.81 (i get the same results).<br>im using a macbook pro (because i have to for iOS dev).</p>
<p>anyway,<br>the application has a &quot;wheel&quot; with &quot;bins&quot; on it. The bins are like pie slices around the circular wheel interface.</p>
<p>im using a for loop to position all the bins in a circular pattern with no problem.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> binCount = <span class="hljs-number">28</span>;
<span class="hljs-keyword">var</span> radius = <span class="hljs-number">544</span>;
<span class="hljs-keyword">var</span> centerX = <span class="hljs-number">544</span>;
car centerY = <span class="hljs-number">540</span>;

<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; binCount; i++) {
     <span class="hljs-comment">//create the image object</span>
     <span class="hljs-keyword">var</span> bin = imageView({…});
     <span class="hljs-comment">//calculate position</span>
     <span class="hljs-keyword">var</span> ib = i * (<span class="hljs-built_in">Math</span>.PI*<span class="hljs-number">2</span> / binCount);
     <span class="hljs-keyword">var</span> ix = <span class="hljs-built_in">Math</span>.cos(ib) * radius;
     <span class="hljs-keyword">var</span> iy = <span class="hljs-built_in">Math</span>.sin(ib) * radius;
     <span class="hljs-comment">//set position</span>
     bin.top = ix + centerX;
     bin.left = iy + centerY;
     <span class="hljs-comment">//add to interface</span>
     holder.add(bin);
}
</code></pre><p>that part is working fine.<br>my troubles are the 2nd part. Making all the bins rotated towards the center point.</p>
<p>here&#39;s what the interface <em>should</em> look like with 2  bins positioned on the wheel.</p>
<p><img src="http:&#x2F;&#x2F;i40.tinypic.com&#x2F;10ifa0h.png" alt="2 correctly positioned bins"></p>
<p>you can set an anchor point on an image that will be used as a rotation point.<br>the points are a percent of 100, so I was thinking that the axis point needs to<br>be 0, 0.5 so that would be the center of the far left side. Here&#39;s an image illustrating that. </p>
<p><img src="http:&#x2F;&#x2F;i40.tinypic.com&#x2F;6rorkg.png" alt="single bin anchorPoint"></p>
<p>i guess that i need to write some math that will take that anchor point and the centerX and centerY values and find that angle. </p>
<p>I have been trying this code (goes at the bottom inside the for loop),<br>but with no luck:</p>
<pre><code class="hljs">var angle = Math.atan2((iy – centerY), (ix – centerX)) * (180/Math.PI)<span class="hljs-comment">;</span>
if(angle &lt; 0) angle += 360<span class="hljs-comment">;</span>

var t = Ti.UI.create2DMatrix()<span class="hljs-comment">;</span>
t = t.rotate(angle)<span class="hljs-comment">;</span>
var a = Ti.UI.createAnimation()<span class="hljs-comment">;</span>
a.transform = t<span class="hljs-comment">;</span>
a.duration = 1<span class="hljs-comment">;</span>
bin.animate(a)<span class="hljs-comment">;</span>
</code></pre><p>that logic seems sound, but the rotations are all over the place :P</p>
<p>any suggestions will be greatly appreciated!</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 22nd 2012, 6:00:03 pm">February 22nd 2012</span>
				by <span class='authorname'>andrew harrison</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>atan2</span></li>
					
						<li><span class='tagname'>ios</span></li>
					
						<li><span class='tagname'>math</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>rotate</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-231256">
				
						<section>
							<p>The Rotate angle is relative to the views starting angle of 0.  If you rotated something 45 degrees and wanted it to go back 45, you wouldnt </p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">rotate</span><span class="hljs-params">(-<span class="hljs-number">45</span>)</span></span>
</code></pre><p>instead you would </p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">rotate</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>
</code></pre><p>Hope this helps.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 22nd 2012, 9:31:04 pm">February 22nd 2012</span>
								by <span class='authorname'>Paul Nelson</span><br>
								<a class="icon-bg icon-link" href="question/132611/math-help---calculate-rotation-angle---code-and-images-within.html#answer-231256" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-231372">
				
						<section>
							<p>hello again.<br>i eventually &quot;solved&quot; the issue the way i always handle my problems…<br>by creating a different solution all together.</p>
<p>i created a variable called rot, and set it to 0 (initial rotation), and<br>in my while loop i decrement it by a factor of -12.86 and applied that<br>as the rotation for each bin. it took a lot of manual trial and error<br>to find the appropriate value, but problem solved. </p>
<p>i would still like to know the solution to this problem though,<br>if any future readers see this thread, feel free to post your thoughts.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 23rd 2012, 6:17:58 pm">February 23rd 2012</span>
								by <span class='authorname'>andrew harrison</span><br>
								<a class="icon-bg icon-link" href="question/132611/math-help---calculate-rotation-angle---code-and-images-within.html#answer-231372" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
