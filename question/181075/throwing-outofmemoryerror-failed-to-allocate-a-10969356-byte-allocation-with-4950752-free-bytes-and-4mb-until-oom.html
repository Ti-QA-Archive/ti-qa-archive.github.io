<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Throwing OutOfMemoryError &#34;Failed to allocate a 10969356 byte allocation with 4950752 free bytes and 4MB until OOM Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Throwing OutOfMemoryError &#34;Failed to allocate a 10969356 byte allocation with 4950752 free bytes and 4MB until OOM</h1>
		</header>
		<section>
			<p>I&#39;ve been porting my app to android and haven&#39;t ran into too many issues but when I started testing on 5.0.0 it started throwing these errors, the previous version do not complain about my art assets, the pictures it refuses to load weigh in from 80 to 120kb and there&#39;s only 3 of them, my app isn&#39;t heavy, the complete art asset folder is 1.5mb    </p>
<p>is this a known issue? is this issue limited to the emulator?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 24th 2015, 4:48:12 pm">February 24th 2015</span>
				by <span class='authorname'>Francois Brosseau</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>out of memory</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I have similar issue on the Nexus 7 device with android 5.0.2. But my app works well on android 4.4, 4.0 and even 2.3.</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 3rd 2015, 2:36:25 pm">March 3rd 2015</span>
								by <span class='authorname'>Ed Kozachek</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I don&#39;t know what the official word on the issue is.. I don&#39;t have a 5.0.X device to test with at the moment<br>the only consolation is that the market share was about 1.5% last time I checked.   </p>
<p>There seems to be much more overhead and I would like to hear appcelerator comment on this</p>
</div>
							<div class="author">
								&mdash; commented <span title="March 3rd 2015, 6:04:24 pm">March 3rd 2015</span>
								by <span class='authorname'>Francois Brosseau</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-286577">
				
						<section>
							<p>Did you finally solve this problem?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 19th 2015, 10:56:22 am">March 19th 2015</span>
								by <span class='authorname'>lin xiulun</span><br>
								<a class="icon-bg icon-link" href="question/181075/throwing-outofmemoryerror-failed-to-allocate-a-10969356-byte-allocation-with-4950752-free-bytes-and-4mb-until-oom.html#answer-286577" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Check my <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;181075&#x2F;throwing-outofmemoryerror-failed-to-allocate-a-10969356-byte-allocation-with-4950752-free-bytes-and-4mb-until-oom.html#answer-286579">answer</a>, maybe it would help you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 19th 2015, 11:31:07 am">March 19th 2015</span>
											by <span class='authorname'>Ed Kozachek</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-286579">
				
						<section>
							<p>These two articles help me a lot:</p>
<ul>
<li><a href="http:&#x2F;&#x2F;www.tidev.io&#x2F;2014&#x2F;09&#x2F;18&#x2F;cleaning-up-alloy-controllers&#x2F;">http:&#x2F;&#x2F;www.tidev.io&#x2F;2014&#x2F;09&#x2F;18&#x2F;cleaning-up-alloy-controllers&#x2F;</a></li>
<li><a href="http:&#x2F;&#x2F;www.tidev.io&#x2F;2014&#x2F;03&#x2F;27&#x2F;memory-management&#x2F;">http:&#x2F;&#x2F;www.tidev.io&#x2F;2014&#x2F;03&#x2F;27&#x2F;memory-management&#x2F;</a></li>
</ul>
<p>The main ideas are:</p>
<ol>
<li>set every (as more as you can) variable to null right after it not needed anymore.</li>
<li>add listener to the <code>close</code> event for every Alloy controller:</li>
</ol>
<pre><code class="hljs">$.inputs.addEventListener(<span class="hljs-string">"close"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    $.inputsListView = <span class="hljs-literal">null</span>;
    moment = <span class="hljs-literal">null</span>;
    $.destroy();
    $.off();
});
</code></pre><p>You&#39;ll need to call <code>close</code> method manually for every opening of new controller:</p>
<pre><code class="hljs">$.inputs.addInput = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
    <span class="hljs-title">Alloy</span>.<span class="hljs-title">createController</span><span class="hljs-params">(<span class="hljs-string">'input/manage_input/manage_input'</span>)</span>.<span class="hljs-title">getView</span><span class="hljs-params">()</span>.<span class="hljs-title">open</span><span class="hljs-params">()</span>;</span>
    $.inputs.close();
};
</code></pre><p>Also do not forget to call <code>close</code> on <code>android:back</code> event and action bar back button click.</p>
<p>After applying these changes in every controller, I could successfully run application on Nexus 7 device with android 5.0.2.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="March 19th 2015, 11:30:20 am">March 19th 2015</span>
								by <span class='authorname'>Ed Kozachek</span><br>
								<a class="icon-bg icon-link" href="question/181075/throwing-outofmemoryerror-failed-to-allocate-a-10969356-byte-allocation-with-4950752-free-bytes-and-4mb-until-oom.html#answer-286579" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>I&#39;ll give that a try, I&#39;ve been refactoring my code to better manage memory..  thank you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 19th 2015, 12:11:26 pm">March 19th 2015</span>
											by <span class='authorname'>Francois Brosseau</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>To save others tons of time, it took me like 3 hours of banging my head to the wall, trying to realise WHY on earth I could not assign values to my objects.</p>
<p>Apparently I created an object inside my View like so <code>$.myController.myCustomObject = {}</code> and eventhough it some times worked, sometimes it DIDN&#39;T WORK.<br>By that I mean, most of the times I was able to change its contents, but then other times (like when using with an array, I wasn&#39;t able to change ANY of its values.) </p>
<p>Later I discovered <a href="http:&#x2F;&#x2F;docs.appcelerator.com&#x2F;platform&#x2F;latest&#x2F;#!&#x2F;guide&#x2F;Coding_Best_Practices">this link</a> and found out why.<br>In short:</p>
<pre><code class="hljs"><span class="hljs-number">1</span>) The Titanium <span class="hljs-keyword">end</span> objects are really <span class="hljs-keyword">not</span> <span class="hljs-constant">true</span> JavaScript objects. They are proxy representations <span class="hljs-keyword">of</span> native operating system components. 

<span class="hljs-number">2</span>)Sometimes you might be able <span class="hljs-keyword">to</span> store things <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword">the</span> namespace <span class="hljs-keyword">but</span> <span class="hljs-keyword">it</span>'s <span class="hljs-keyword">not</span> changeable (i.e. an array stored <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword">the</span> namespace might <span class="hljs-keyword">not</span> be able <span class="hljs-keyword">to</span> be modified - mutable, etc.). Other-<span class="hljs-keyword">times</span> your stored objects will be completely null.
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="September 29th 2015, 1:36:13 pm">September 29th 2015</span>
											by <span class='authorname'>John Kokkin</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
