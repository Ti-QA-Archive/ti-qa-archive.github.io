<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Error using appendRow() » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Error using appendRow()</h1>
		</header>
		<section>
			<p>Hi guys. I&#39;m getting a random error when I try to use appendRow() to create or add more rows to a table. I get the error in the simulator, didn&#39;t try on a device. </p>
<pre><code class="hljs"><span class="hljs-number">2013</span>-<span class="hljs-number">01</span>-<span class="hljs-number">28</span> <span class="hljs-number">19</span>:<span class="hljs-number">05</span>:<span class="hljs-number">59.154</span> MyApplication[<span class="hljs-number">5447</span>:<span class="hljs-number">207</span>] *** Assertion failure in -[_UITableViewUpdateSupport _computeRowUpdates], /SourceCache/UIKit_Sim/UIKit-<span class="hljs-number">1912.3</span>/UITableViewSupport.m:<span class="hljs-number">386</span>
</code></pre><p>It&#39;s completely random, some times the rows are created and some times I get an empty table. The error is shown after I print something in the console, otherwise I get the empty table and no error at all.</p>
<p>I use the same code to create the table or append rows later, so I need to use appendRow() to not have to repeat code.</p>
<p>The code is elaborated so I can come up with an example. First, I&#39;d like to know if someone has seen this error before.</p>
<p>Titanium 2.1.4 (the version 3 doesn&#39;t work on my Mac)<br>Snow Leopard</p>
<p>Thanks<br>JD</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 29th 2013, 1:20:58 am">January 29th 2013</span>
				by <span class='authorname'>John Gauchat</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>appendrow</span></li>
					
						<li><span class='tagname'>error</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi John,</p>
<p>Can you paste the code snippet for better understanding.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 29th 2013, 2:26:26 am">January 29th 2013</span>
								by <span class='authorname'>Zarir Bhesania</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi John ,</p>
<p>please paste some source code for better understanding…..</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 29th 2013, 3:01:29 am">January 29th 2013</span>
								by <span class='authorname'>Raj Sharma</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi guys. I have posted an example below.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 29th 2013, 10:56:47 pm">January 29th 2013</span>
								by <span class='authorname'>John Gauchat</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi guys. Did someone check this problem? I&#39;m not sure how to proceed. Should I change the code to work with appendRow only when the table has some content?</p>
</div>
							<div class="author">
								&mdash; commented <span title="February 4th 2013, 7:56:21 pm">February 4th 2013</span>
								by <span class='authorname'>John Gauchat</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-255714">
				
						<section>
							<p>Hi guys. I was able to reproduce the error using a similar code. The following example create a button and a table. Every time you click the button, a new row is added to the list, the table is emptied and all the rows are created again. It works fine at the beginning, but if you click the button several times, sooner or later you get an empty table.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> counter = 0;

<span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Ti.UI.createWindow({
    backgroundColor: '#FFFFFF'
});

<span class="hljs-keyword">var</span> <span class="hljs-keyword">view</span> = Ti.UI.createView({
    top: 0,
    left: 0,
    width: Ti.UI.FILL,
    height: Ti.UI.FILL,
    layout: 'vertical'    
});

<span class="hljs-keyword">var</span> button = Ti.UI.createButton({
    title: ' Add Row ',
    top: 10,
    right: 10,
    width: Ti.UI.SIZE,
    height: Ti.UI.SIZE
});
button.addEventListener('click', function(){
    <span class="hljs-keyword">var</span> row;

    counter++;
    <span class="hljs-keyword">table</span>.setData([]);
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> f = 0; f &lt; counter; f++){
        row = Ti.UI.createTableViewRow({
            title: 'New Account ' + f,
            backgroundColor: '#FFFFFF'
        });
        <span class="hljs-keyword">table</span>.appendRow(row);
    }
});
<span class="hljs-keyword">view</span>.add(button);

<span class="hljs-keyword">var</span> <span class="hljs-keyword">table</span> = Ti.UI.createTableView({
    top: 0,
    left: 0,
    width: Ti.UI.FILL,
    height: Ti.UI.FILL
});
<span class="hljs-keyword">view</span>.add(<span class="hljs-keyword">table</span>);

<span class="hljs-keyword">win</span>.add(<span class="hljs-keyword">view</span>);
<span class="hljs-keyword">win</span>.<span class="hljs-keyword">open</span>();
</code></pre><p>With this code, nothing is shown in the console, but if you add a console.log() statement in the middle of the for loop, you get the error I showed you before. Just replace the for loop by this one:</p>
<pre><code class="hljs">    for<span class="hljs-list">(<span class="hljs-keyword">var</span> f = <span class="hljs-number">0</span><span class="hljs-comment">; f &lt; counter; f++){</span>
        row = Ti.UI.createTableViewRow<span class="hljs-list">({
            title: <span class="hljs-quoted">'New</span> Account ' + f,
            backgroundColor: <span class="hljs-quoted">'#FFFFFF</span>'
        })</span><span class="hljs-comment">;</span>

        console.log<span class="hljs-list">(<span class="hljs-quoted">'hello</span> error')</span><span class="hljs-comment">;</span>

        table.appendRow<span class="hljs-list">(<span class="hljs-keyword">row</span>)</span><span class="hljs-comment">;</span>
    }</span>
</code></pre><p>I can modify the code to not have to empty the table, but it was easier this way. The table is only 50 rows long, so nobody was going to notice the difference of using appendRow than other methods to populate the table.</p>
<p>JD</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 29th 2013, 7:50:06 pm">January 29th 2013</span>
								by <span class='authorname'>John Gauchat</span><br>
								<a class="icon-bg icon-link" href="question/147546/error-using-appendrow#answer-255714" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-256083">
				
						<section>
							<p>Hi</p>
<p>I have tried your code and whilst I can replicate the problem in 2.1.4 using your exact code I do not experience the problem if you do not use the <strong>table.setData([])</strong> command first.</p>
<p>I have performed the test a few times and even gone up as many as 120+ rows.</p>
<p>My revised test;</p>
<pre><code class="hljs">counter++;
<span class="hljs-keyword">var</span> row = Ti.UI.createTableViewRow({
    title: <span class="hljs-string">'New Account '</span> + counter,
    backgroundColor: <span class="hljs-string">'#FFFFFF'</span>
});
table.appendRow(row);
</code></pre><p>BTW I did not experience the problem with 3.0.0 - when you are able to upgrade.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 4th 2013, 8:36:38 pm">February 4th 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/147546/error-using-appendrow#answer-256083" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Malcolm. Yes, apparently the bug is when you empty the table. I couldn&#39;t try it with 3.0.0, but if it is as you said, then the problem was already solved and the only thing I have to do is to upgrade my computer to be able to use 3.0.0. Thanks for the info.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 4th 2013, 11:14:09 pm">February 4th 2013</span>
											by <span class='authorname'>John Gauchat</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
