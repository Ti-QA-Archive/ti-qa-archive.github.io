<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>bugreport: view.center.y with percentage broken? » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>bugreport: view.center.y with percentage broken?</h1>
		</header>
		<section>
			<p>it seems that the y property is broken when using percentages. it seems its using always the width property instead of height to calculate the position.</p>
<p>i have two views</p>
<p>&#39;red&#39;</p>
<pre><code class="hljs">{
    <span class="hljs-tag">width</span>: <span class="hljs-tag">100</span>,
    <span class="hljs-tag">height</span>: <span class="hljs-tag">100</span>,
    <span class="hljs-tag">center</span>: {<span class="hljs-attribute">x</span>: <span class="hljs-string">'50%'</span>, <span class="hljs-attribute">y</span>: <span class="hljs-string">'50%'</span>},
    <span class="hljs-attribute">backgroundColor</span>: <span class="hljs-string">'red'</span>
}
</code></pre><p>&#39;blue&#39;, which is added to red</p>
<pre><code class="hljs">{
    <span class="hljs-tag">width</span>: <span class="hljs-tag">10</span>,
    <span class="hljs-tag">height</span>: <span class="hljs-tag">10</span>,
    <span class="hljs-tag">center</span>: {<span class="hljs-attribute">x</span>: <span class="hljs-string">'50%'</span>, <span class="hljs-attribute">y</span>: <span class="hljs-string">'100%'</span>},
    <span class="hljs-attribute">backgroundColor</span>: <span class="hljs-string">'blue'</span>
}
</code></pre><p>this works as expected. the blue view is horizontal centered and on the bottom edge of the red view.</p>
<p>but when i change the height property of &#39;red&#39; to 150, i dont get the expected result. the blue view stays exactly in the same position.</p>
<p><img src="http:&#x2F;&#x2F;www0.xup.in&#x2F;exec&#x2F;ximg.php?fid=16398750 &quot;Illustration&quot;" alt="Illustration Image"></p>
<p><a href="http:&#x2F;&#x2F;www.xup.in&#x2F;dl,16398750&#x2F;illustration.png&#x2F;">Illustration</a></p>
<p>the third image is to illustrate that there is no difference of the position of the blue view.</p>
<p>note that this is not a change while the app is running. i am changing the property by hand in the code an the start the app again.</p>
<p>the reasoning that the position will be calculated by the width property instead of the height property is supported by the fact that the blue view will be outside the red view if i change the width of the red view to something &gt; than the height of the red view.</p>
<p>try it for yourself and tell me if i am right and this is a bug or if it happens only with my code :)</p>
<pre><code class="hljs"><span class="hljs-attr_selector">[INFO]</span> <span class="hljs-tag">Titanium</span> <span class="hljs-tag">SDK</span> <span class="hljs-tag">version</span>: 1<span class="hljs-class">.7</span><span class="hljs-class">.1</span>
<span class="hljs-attr_selector">[INFO]</span> <span class="hljs-tag">iPhone</span> <span class="hljs-tag">Device</span> <span class="hljs-tag">family</span>: <span class="hljs-tag">iphone</span>
<span class="hljs-attr_selector">[INFO]</span> <span class="hljs-tag">iPhone</span> <span class="hljs-tag">SDK</span> <span class="hljs-tag">version</span>: 4<span class="hljs-class">.3</span>
<span class="hljs-attr_selector">[INFO]</span> <span class="hljs-tag">iPhone</span> <span class="hljs-tag">simulated</span> <span class="hljs-tag">device</span>: <span class="hljs-tag">iphone</span>
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 20th 2011, 2:58:04 pm">July 20th 2011</span>
				by <span class='authorname'>Jaap Groeneveld</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>center</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>percentage</span></li>
					
						<li><span class='tagname'>position</span></li>
					
						<li><span class='tagname'>view</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-213869">
				
						<section>
							<p>Unless the window that contains the view is set to <code>layout = &amp;quot;vertical&amp;quot;</code> the blue view&#39;s position should be independent of the red view&#39;s. The blue view should stay in the same location when you change the red view&#39;s height. Compare the following with layout set to &#39;absolute&#39; (the default) to &#39;vertical&#39;.</p>
<pre><code class="hljs">win = Ti.UI.createWindow({
    backgroundColor:<span class="hljs-string">'green'</span>,
    layout:<span class="hljs-string">'absolute'</span>
});
label = Ti.UI.createLabel({
    text:<span class="hljs-string">'absolute'</span>,
    top:<span class="hljs-number">1</span>,
    height:<span class="hljs-string">'auto'</span>,
    width:<span class="hljs-string">'auto'</span>
})
win.add(label);
<span class="hljs-keyword">var</span> redView = Ti.UI.createView({
    width: <span class="hljs-number">100</span>,
    height: <span class="hljs-number">100</span>,
    center: {x: <span class="hljs-string">'50%'</span>, y: <span class="hljs-string">'50%'</span>},
    backgroundColor: <span class="hljs-string">'red'</span>
});
win.add(redView);

<span class="hljs-keyword">var</span> blueView = Ti.UI.createView({
    width: <span class="hljs-number">10</span>,
    height: <span class="hljs-number">10</span>,
    center: {x: <span class="hljs-string">'50%'</span>, y: <span class="hljs-string">'100%'</span>},
    backgroundColor: <span class="hljs-string">'blue'</span>
});
win.add(blueView);

<span class="hljs-comment">// Helper functions</span>
changeHeight = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    redView.height = <span class="hljs-number">250</span>;
};
resetHeight = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    redView.height = <span class="hljs-number">100</span>;
};
changeToVertical = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    win.layout = <span class="hljs-string">'vertical'</span>;
    label.text = <span class="hljs-string">'vertical'</span>;
};
changeToAbsolute = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    win.layout = <span class="hljs-string">'absolute'</span>;
    label.text = <span class="hljs-string">'absolute'</span>;
};
<span class="hljs-comment">// controller function for all the changes</span>
kickItOff = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    setTimeout(changeHeight,<span class="hljs-number">1000</span>); <span class="hljs-comment">// no change in blueView position</span>
    setTimeout(resetHeight,<span class="hljs-number">2000</span>); <span class="hljs-comment">// reset things</span>
    setTimeout(changeToVertical,<span class="hljs-number">2000</span>); <span class="hljs-comment">// blueView moves</span>
    setTimeout(changeHeight,<span class="hljs-number">3000</span>); <span class="hljs-comment">// blueView moves again</span>
    setTimeout(resetHeight,<span class="hljs-number">4000</span>); <span class="hljs-comment">// blueView moves back</span>
    setTimeout(changeToAbsolute, <span class="hljs-number">5000</span>); <span class="hljs-comment">// back to original</span>

}
<span class="hljs-comment">// start the animations</span>
setTimeout(kickItOff, <span class="hljs-number">1000</span>);
</code></pre><p>So, absolute positioning is relative to the parent container&#39;s top-left corner. Vertical positioning is relative to the bottom of the preceding sibling within the container.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 21st 2011, 2:48:22 am">July 21st 2011</span>
								by <span class='authorname'>Tim Poulsen</span><br>
								<a class="icon-bg icon-link" href="question/122903/bugreport-viewcentery-with-percentage-broken#answer-213869" rel="permalink">permalink</a>
							</div>

							<h5>4 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>well yeah, but that is not what i wrote<br>&gt; &#39;blue&#39;, which is added to red</p>
<p>i will post complete examples this evening if thats easier to understand.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 21st 2011, 4:03:07 am">July 21st 2011</span>
											by <span class='authorname'>Jaap Groeneveld</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Damn, and I thought I was adding something insightful. Please post your code and I&#39;ll take a look. If it&#39;s a bug, I&#39;ll be glad to submit a bug report for you.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 21st 2011, 12:11:24 pm">July 21st 2011</span>
											by <span class='authorname'>Tim Poulsen</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>A</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'#55ff55'</span>
});

var <span class="hljs-built_in">red</span> = Ti.UI.createView({
    <span class="hljs-variable">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">100</span>,
    top: <span class="hljs-number">100</span>,
    backgroundColor: <span class="hljs-string">'red'</span>
});
win.<span class="hljs-built_in">add</span>(<span class="hljs-built_in">red</span>);

var <span class="hljs-built_in">blue</span> = Ti.UI.createView({
    <span class="hljs-variable">width</span>: <span class="hljs-number">10</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">10</span>,
    center: {x: <span class="hljs-string">'50%'</span>, y: <span class="hljs-string">'100%'</span>},
    backgroundColor: <span class="hljs-string">'blue'</span>
});
<span class="hljs-built_in">red</span>.<span class="hljs-built_in">add</span>(<span class="hljs-built_in">blue</span>);

win.<span class="hljs-built_in">open</span>();
</code></pre><p>B</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'#55ff55'</span>
});

var <span class="hljs-built_in">red</span> = Ti.UI.createView({
    <span class="hljs-variable">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">150</span>,
    top: <span class="hljs-number">100</span>,
    backgroundColor: <span class="hljs-string">'red'</span>
});
win.<span class="hljs-built_in">add</span>(<span class="hljs-built_in">red</span>);

var <span class="hljs-built_in">blue</span> = Ti.UI.createView({
    <span class="hljs-variable">width</span>: <span class="hljs-number">10</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">10</span>,
    center: {x: <span class="hljs-string">'50%'</span>, y: <span class="hljs-string">'100%'</span>},
    backgroundColor: <span class="hljs-string">'blue'</span>
});
<span class="hljs-built_in">red</span>.<span class="hljs-built_in">add</span>(<span class="hljs-built_in">blue</span>);

win.<span class="hljs-built_in">open</span>();
</code></pre><p>C</p>
<pre><code class="hljs">var win = Ti.UI.createWindow({
    backgroundColor: <span class="hljs-string">'#55ff55'</span>
});

var <span class="hljs-built_in">red</span> = Ti.UI.createView({
    <span class="hljs-variable">width</span>: <span class="hljs-number">150</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">100</span>,
    top: <span class="hljs-number">100</span>,
    backgroundColor: <span class="hljs-string">'red'</span>
});
win.<span class="hljs-built_in">add</span>(<span class="hljs-built_in">red</span>);

var <span class="hljs-built_in">blue</span> = Ti.UI.createView({
    <span class="hljs-variable">width</span>: <span class="hljs-number">10</span>,
    <span class="hljs-variable">height</span>: <span class="hljs-number">10</span>,
    center: {x: <span class="hljs-string">'50%'</span>, y: <span class="hljs-string">'100%'</span>},
    backgroundColor: <span class="hljs-string">'blue'</span>
});
<span class="hljs-built_in">red</span>.<span class="hljs-built_in">add</span>(<span class="hljs-built_in">blue</span>);

win.<span class="hljs-built_in">open</span>();
</code></pre><p><img src="http:&#x2F;&#x2F;s1.directupload.net&#x2F;images&#x2F;110721&#x2F;rw4zy5lt.png" alt="illustration"></p>
</p>
										<div class="author">
											&mdash; commented <span title="July 21st 2011, 2:07:26 pm">July 21st 2011</span>
											by <span class='authorname'>Jaap Groeneveld</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for providing that code. You&#39;re correct, this is a bug. We&#39;ve filed a ticket. You should be able to watch it at <a href="http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-4743">http:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-4743</a>.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 21st 2011, 10:12:10 pm">July 21st 2011</span>
											by <span class='authorname'>Tim Poulsen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-215552">
				
						<section>
							<p>Yup i have the same problem with my code, but it seems the y parameter has an incidence. It does not work correctly (ie i have to put 10% instead of 50%) but it has an effect.<br>I hope it will be fixed soon :)</p>
<p>tested on iphone simulator.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 5th 2011, 11:41:23 am">August 5th 2011</span>
								by <span class='authorname'>jb cazaux</span><br>
								<a class="icon-bg icon-link" href="question/122903/bugreport-viewcentery-with-percentage-broken#answer-215552" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
