<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Android R.* references in appcelerator module » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Android R.* references in appcelerator module</h1>
		</header>
		<section>
			<p>Hi folks, I&#39;ve asked this question already in your google group but didn&#39;t get any response. So I thought I&#39;ll try it here:</p>
<p>I&#39;m trying to port an existing barcode-scanner module for android to<br>appcelerator. Unfortunately there are some R.* references to XML ui-<br>definitons, internationalized strings, drawables and colors. I haven&#39;t<br>figured out if there&#39;s a way to use them inside of an appcelerator<br>module. And if there&#39;s a way I haven&#39;t figured out how to use them.<br>Is there any way to use those resources inside of an appcelerator<br>module?</p>
<p>If not:</p>
<ul>
<li>Is there a &quot;right&quot; way to put drawables to the module so I can get a<br>reference of them inside my code? </li>
<li>Is there a way to do i18n inside a module? </li>
<li>Is the only way to create ui-definitions for activities to write<br>them down in Java-Code?<br>I&#39;m a bit stuck at the moment so I thought someone could give me some<br>advice about what to do or where to look for clues.</li>
</ul>
<p>Thanks,<br>pfleidi</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 4th 2010, 8:55:34 am">August 4th 2010</span>
				by <span class='authorname'>Sven Pfleiderer</span>
			</div>

			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Hi, I share as I solved,</p>
<p><a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;116650&#x2F;native-android-java-module-for-titanium-doesnt-generate-rjava#answer-273581">answer similar question</a></p>
</div>
							<div class="author">
								&mdash; commented <span title="January 7th 2014, 3:03:22 pm">January 7th 2014</span>
								by <span class='authorname'>Alejandro Alfonso Oropeza López</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>2</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-266726">
				
						<section>
							<p>I had the same problem and it seems to be have been solved by getting the resourceId another way. It must be looking for resources in a different directory&#x2F;package or something like that.</p>
<p>getResource() gives an Error</p>
<p>get<strong><em>Android</em></strong>Resource() gives an Error</p>
<p>but get<strong><em>Application</em></strong>Resource() DOES work</p>
<pre><code class="hljs">findViewById<span class="hljs-list">( <span class="hljs-keyword">TiRHelper</span>.getApplicationResource<span class="hljs-list">(<span class="hljs-string">"id.image_view1"</span>)</span>)</span>
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 2nd 2013, 1:28:55 pm">August 2nd 2013</span>
								by <span class='authorname'>Leon Schreuder</span><br>
								<a class="icon-bg icon-link" href="question/49671/android-r-references-in-appcelerator-module#answer-266726" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-96171">
				
						<section>
							<p>Sven, I&#39;m looking at the same kind of problem. I think it should be possible but seeing as modules are typically built without any knowledge of the app that will go and use it I believe we should be making references dynamically, maybe through parameters to our modules. But I would be interested in finding out what the correct approach is.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 4th 2010, 2:13:28 pm">August 4th 2010</span>
								by <span class='authorname'>Charlie Roche</span><br>
								<a class="icon-bg icon-link" href="question/49671/android-r-references-in-appcelerator-module#answer-96171" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-266274">
				
						<section>
							<p>Same Problem here.<br>I got my ResourceID of an XML-Layout in my module-directory&#x2F;platform&#x2F;android&#x2F;res, but findViewById() results in a null object.<br>Any solutions now after 2 years? :-)</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 23rd 2013, 1:17:58 pm">July 23rd 2013</span>
								by <span class='authorname'>Marcus Biel</span><br>
								<a class="icon-bg icon-link" href="question/49671/android-r-references-in-appcelerator-module#answer-266274" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-188711">
				
						<section>
							<p>I finally got my R resource references to work by referencing them as strings in my module&#39;s native code, and dropping the resource files into my $APP_DIR&#x2F;platform&#x2F;android&#x2F;res directory. NOT my module directory, or any directory within it.</p>
<p>You could probably pass the Strings to the module&#39;s kroll method from your JS code. From JS, Ti.Android.R gives you access to the resources somehow, but it seemed like too much hassle so I just hardcoded mine into the module, since I knew what I was putting into the app.</p>
<p>If you called a Kroll method from JS, for instance myKrollMethod(Ti.Android.R.drawable.myicon), then when you looked at what the Java code in the module received, you&#39;d have been passed an RProxy object. From that, you can extract the resource&#39;s name.</p>
<p>Once you have the name, from within the module you call: </p>
<p>TiRHelper.getResource(String resourceName)</p>
<p>This will return the integer ID of the resource you want from your application&#39;s R class. Again, NOT from your module&#39;s R class.</p>
<p>Here&#39;s a quick sample:</p>
<pre><code class="hljs"><span class="hljs-keyword">import</span> org.appcelerator.titanium.util.TiRHelper;

<span class="hljs-comment">//.....</span>
<span class="hljs-comment">//Blah blah code</span>
<span class="hljs-comment">//.....</span>

<span class="hljs-comment">//Get the ID of R.drawable.myicon</span>

        <span class="hljs-comment">//This could possibly be extracted from an RProxy object</span>
        <span class="hljs-keyword">String</span> icon_name=<span class="hljs-string">"android.R.drawable.myicon"</span>;

        <span class="hljs-comment">//This is where we will store the ID from R</span>
        <span class="hljs-built_in">int</span> icon_id;

        <span class="hljs-keyword">try</span>{
           icon_id=TiRHelper.getResource(icon_name);
        }
        <span class="hljs-keyword">catch</span>(ResourceNotFoundException e){
            System.err.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Failed to locate required Android resource \'"</span> + icon_name + <span class="hljs-string">"\' : "</span> + e);
            System.<span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
        }
</code></pre><p>Of course, if you want to understand this better you&#39;ll need to read the Titanium source, since Appcelerator have done what I would call the singularly worst possible job of documenting their product. In fact, I&#39;m going to use something else for my cross platform development in future, and recommend that you do too.</p>
<p>If you do read the source, beware that it has next to no comments in it, at least for the Android related stuff.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2011, 8:03:03 am">January 31st 2011</span>
								by <span class='authorname'>Ewan Sinclair</span><br>
								<a class="icon-bg icon-link" href="question/49671/android-r-references-in-appcelerator-module#answer-188711" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hi Ewan,<br>i read your example and i tried it: it works, i can get the id of the resource but i can&#39;t get the resource itself, &#39;cause i tried to get it with:</p>
<pre><code class="hljs"><span class="hljs-comment">// it works</span>
<span class="hljs-keyword">int</span> myViewId = TiRHelper.getResource(<span class="hljs-string">"id.my_view"</span>);
<span class="hljs-comment">// it doesn't work</span>
myView = (TextView) findViewById(myViewId);
</code></pre><p>i got a null object…i think i need to use the TiActivity.findViewById but i don&#39;t understand how to do it…can you give me an advice please?</p>
<p>Thank you very much, regards.</p>
</p>
										<div class="author">
											&mdash; commented <span title="March 8th 2011, 6:42:59 pm">March 8th 2011</span>
											by <span class='authorname'>Matteo Traina</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i get Error generating R.java from manifest, can you help me? this happen when i add res forlder and put my xml file inside it<br> invalid resource directory name: C:\Users\Titanium_Studio_Workspace\myapp\build\android\res&#x2F;activity_main.xml</p>
</p>
										<div class="author">
											&mdash; commented <span title="December 3rd 2013, 3:39:14 am">December 3rd 2013</span>
											by <span class='authorname'>Ario Barzan</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-2</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
