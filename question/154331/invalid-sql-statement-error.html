<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Invalid sql statement error » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Invalid sql statement error</h1>
		</header>
		<section>
			<p>I am simply trying to install a database. Then take a query, execute on that query and bring back some data. Should be pretty simple, but I am missing something on my syntax. </p>
<p>var db = Ti.Database.install(&#39;et.sql&#39;,&#39;et&#39;);<br>var dbOpen = Ti.Database.open(&#39;et&#39;)</p>
<p>var sql = &quot;SELECT countryName FROM countries&quot;;<br>var countryQuery = db.execute(sql);</p>
<p>I keep getting a invalid SQL statement error…where am I wrong here?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 1st 2013, 3:07:47 pm">July 1st 2013</span>
				by <span class='authorname'>Matt Wohlstadter</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>database</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
						<li><span class='tagname'>sqlite</span></li>
					
				</ul>
			

			<section>
				<h5>7 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>What is the actual SQL error ? Scroll right in the console to see the exact error message</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 1st 2013, 3:42:08 pm">July 1st 2013</span>
								by <span class='authorname'>Nick Milner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>or just paste the entire error message row here… ?</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 1st 2013, 3:42:55 pm">July 1st 2013</span>
								by <span class='authorname'>Nick Milner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Error Domain=com.plausiblelabs.pldatabase Code=3 &quot;An error occured parsing the provided SQL statement.&quot; UserInfo=0xacb1f90 {com.plausiblelabs.pldatabase.error.vendor.code=26, NSLocalizedDescription=An error occured parsing the provided SQL statement., com.plausiblelabs.pldatabase.error.query.string=SELECT countryName FROM countries, com.plausiblelabs.pldatabase.error.vendor.string=file is encrypted or is not a database} (SQLite #26: file is encrypted or is not a database) (query: &#39;SELECT countryName FROM countries&#39;)</p>
<p>Hopefully you can read that.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 1st 2013, 3:44:43 pm">July 1st 2013</span>
								by <span class='authorname'>Matt Wohlstadter</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>So, your real problem is</p>
<pre><code class="hljs"><span class="hljs-type">file</span> <span class="hljs-keyword">is</span> encrypted <span class="hljs-keyword">or</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> a database
</code></pre><p>Have you used an encryption module with your database ? Else it looks somehow that the sql lite database file you are installing is somehow corrupt</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 1st 2013, 4:07:50 pm">July 1st 2013</span>
								by <span class='authorname'>Nick Milner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Ah - Malcolm is on the case! I&#39;ll get my coat ;-)</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 1st 2013, 4:12:38 pm">July 1st 2013</span>
								by <span class='authorname'>Nick Milner</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I have not tried to comment after the malcolm answer :)</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 1st 2013, 4:21:51 pm">July 1st 2013</span>
								by <span class='authorname'>Muhammad Wahhab Mirza</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Come on guys - not fair - better with all of us. ;-)</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 1st 2013, 4:28:34 pm">July 1st 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-265193">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>Just for reference you have an error in your code (but not really) and unlikely to cause this problem;</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> db</span> = Ti.Database.install('et.sql','et');
<span class="hljs-variable"><span class="hljs-keyword">var</span> dbOpen</span> = Ti.Database.<span class="hljs-keyword">open</span>('et') <span class="hljs-comment">// not needed if you just installed the db</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> sql</span> = <span class="hljs-string">"SELECT countryName FROM countries"</span>;
<span class="hljs-variable"><span class="hljs-keyword">var</span> countryQuery</span> = db.execute(sql); <span class="hljs-comment">// and you do not reference the variable anyway</span>
</code></pre><p>So you only really need this (at this point);</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> db</span> = Ti.Database.install('et.sql','et');
<span class="hljs-variable"><span class="hljs-keyword">var</span> sql</span> = <span class="hljs-string">"SELECT countryName FROM countries"</span>;
<span class="hljs-variable"><span class="hljs-keyword">var</span> countryQuery</span> = db.execute(sql); <span class="hljs-comment">// and you do not reference the variable anyway</span>
</code></pre><p>Whilst I would end your sql statement with a semi-colon <strong>;</strong> - again not a reason for the problem.</p>
<p>The sql statement is so simple there really is no way that syntax is your problem.</p>
<p>I would check that the database you are installing has a table called <strong>countries</strong> that has a column called <strong>countryName</strong>.  As you are installing the database I will assume you have already defined the database schema and added at least one record.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 1st 2013, 3:22:27 pm">July 1st 2013</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="../../question/154331/invalid-sql-statement-error.html#answer-265193" rel="permalink">permalink</a>
							</div>

							<h5>19 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Seems this is the big clue;</p>
<ul>
<li><strong>file is encrypted or is not a database</strong></li>
</ul>
<p>Check the database file you are installing exists and is readable.</p>
<p>Firefox has a plug-in for sqlite database - check the file opens in that.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:49:36 pm">July 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I can open it with the sqlite plug in for firefox. I checked the permissions, its read for everyone.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:53:16 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Check the filename is <strong>et.sql</strong> and is placed in the following location (depending on if the app is alloy based;</p>
<p>Non-alloy</p>
<ul>
<li><strong>{aapname}&#x2F;resources&#x2F;et.sql</strong></li>
</ul>
<p>Alloy </p>
<ul>
<li><strong>{appname}&#x2F;app&#x2F;assets&#x2F;et.sql</strong> alloy <em>or</em></li>
<li><strong>{appname}&#x2F;app&#x2F;assets&#x2F;iphone&#x2F;et.sql</strong> </li>
</ul>
<p>Confirm the file is not read-only.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 3:56:29 pm">July 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hey Malcolm,</p>
<p>I&#39;ve made sure the file was in that directory. Which it is. On my iOS OS, the get info tab revealed it was read only for everyone and staff. I made sure to change that to read and write.. Launched it in my simulator and I get the same error.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 4:37:16 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I simply export a database out of sqlite to get the et.sqlite file.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 4:38:42 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>*sql</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 4:39:01 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>If you feel comfortable with the idea, send me a link to the zipped db file via <a href="http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;devlink&#x2F;profile&#x2F;427941&#x2F;malcolm-hollingsworth">DevEmail</a> I will try it here and see if there is anything obvious.</p>
<p>Feel free to strip any data from it.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 4:40:46 pm">July 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I sent you a link to the file.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 4:49:55 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK I know what the problem is.</p>
<p>When you said &quot;you exported the file&quot; - you meant exactly that.  The file that has been created is a list of SQL statements designed to be run against a database to recreate a database using create and insert statements.</p>
<p>You need to use the actual file that the FireFox SQLite Manager is reading - you do NOT export the file.  This hold the binary version of the file.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 5:00:22 pm">July 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>How would I do that Malcolm?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 5:02:52 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Do you mean the actual sqlite file?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 5:08:39 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Assuming you are able to edit and view the data in the FireFox SQLite manager as we discussed then you have a file saved someone on your computer that it has opened (may have been automatically since last time).</p>
<ul>
<li>From the <strong>Database Menu</strong></li>
<li>Select <strong>Recently Used</strong></li>
<li>The top entry should be the current editing file</li>
<li>Note the location and find the file in your computer.</li>
<li>Copy this file to the <strong>resources</strong> folder. (or other if Alloy)</li>
</ul>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 5:10:02 pm">July 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yes - that is the one.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 5:10:19 pm">July 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I did a Ti.API.info function and it gave me back this for the query.  </p>
<p>SELECT countryName FROM countries</p>
<p>It&#39;s still not working. Weird. Do you use teamviewer by chance?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 5:20:14 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I have just sent you a zip file with a test <strong>app.js</strong> that installs your database file (I imported your sql statements into a db using SQLite Manager).</p>
<p>Press the button to see the record count and the first entry.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 5:37:00 pm">July 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>That code worked for me. So it has to be something in my code in my other file.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 5:50:31 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>The code I just supplied was basically the same as you provided to start with, what other code to you have that talks to the DB?</p>
<p>Remember you ONLY install the DB once, from then on you reference it with open, so as follows;</p>
<p><strong>First Time</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> db = Ti.Database.install(<span class="hljs-string">'et.sqlite'</span>,<span class="hljs-string">'et'</span>);
</code></pre><p><strong>Subsequent times</strong></p>
<pre><code class="hljs"><span class="hljs-comment">// uses the second param of the install command</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> db</span> = Ti.Database.<span class="hljs-keyword">open</span>('et'); 
<span class="hljs-variable"><span class="hljs-keyword">var</span> sql</span> = <span class="hljs-string">"SELECT countryName FROM countries"</span>;
<span class="hljs-variable"><span class="hljs-keyword">var</span> rows</span> = db.execute(sql);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 5:54:26 pm">July 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Got it to work..the key words, ONLY install the db once triggered a thought here.</p>
<p>Earlier, I did an install of another sql file. Not the sqlite file without the read only permissions. I went to the directory located under (hold alt when clicking the go menu to see Library) Library&#x2F;Application Support&#x2F;iPhone Simulator&#x2F;6.1&#x2F;Applications&#x2F;Findtheappprojecthere&#x2F;Library&#x2F;Private Documents&#x2F;</p>
<p>Here is where I deleted the old copy of the database. Ran the simulator again to populate it with the new copy of my db and it worked!!! Wow, what a pain to get all this to work. Thanks a lot Malcolm for the help! :)</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 6:04:29 pm">July 1st 2013</span>
											by <span class='authorname'>Matt Wohlstadter</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You are very welcome - we got there in the end.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 1st 2013, 6:12:24 pm">July 1st 2013</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-265194">
				
						<section>
							<p>Matt it should be like this</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> db</span> = Ti.Database.install('et.sql','et'); 
<span class="hljs-variable"><span class="hljs-keyword">var</span> db</span> = Ti.Database.<span class="hljs-keyword">open</span>('et')
<span class="hljs-variable"><span class="hljs-keyword">var</span> sql</span> = <span class="hljs-string">"SELECT countryName FROM countries"</span>; 
<span class="hljs-variable"><span class="hljs-keyword">var</span> countryQuery</span> = db.execute(sql);
</code></pre><p>Thanks</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 1st 2013, 3:22:49 pm">July 1st 2013</span>
								by <span class='authorname'>Muhammad Wahhab Mirza</span><br>
								<a class="icon-bg icon-link" href="../../question/154331/invalid-sql-statement-error.html#answer-265194" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
