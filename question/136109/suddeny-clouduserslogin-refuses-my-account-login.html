<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Suddeny, Cloud.Users.login refuses my account login » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Suddeny, Cloud.Users.login refuses my account login</h1>
		</header>
		<section>
			<p>my login module coded like this…</p>
<pre><code class="hljs">exports.login = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_creds, _callback</span>)</span>{
    Cloud.Users.login({
        login : _creds.login,
        password : _creds.password
    }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
        alert(<span class="hljs-string">'Cloud.Users.login error...'</span>);
        <span class="hljs-keyword">if</span>(e.success){
            SmileADay.user = e.users[<span class="hljs-number">0</span>];
            Ti.App.Properties.setString(<span class="hljs-string">'credentials'</span>, <span class="hljs-built_in">JSON</span>.stringify({
                <span class="hljs-string">"login"</span> : _creds.login,
                <span class="hljs-string">"password"</span> : _creds.password,
                <span class="hljs-string">"id"</span> : SmileADay.user.id
            }));
        }<span class="hljs-keyword">else</span>{
            alert(<span class="hljs-string">'Error : '</span>+<span class="hljs-built_in">JSON</span>.stringify(e));
        }
        _callback(e);
    });
};
</code></pre><p>But, it failed, all of a sudden. it was fine few hours ago.<br>And the old cocoafish api also find. but now it is failed.</p>
<p>the log message belows…</p>
<pre><code class="hljs"><span class="hljs-string">[INFO]</span> ACS Request: { url: <span class="hljs-string">"users/login.json"</span>, verb: <span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span>, secure: YES, data: {<span class="hljs-string">"login"</span>:<span class="hljs-string">"test5@soreply"</span>,<span class="hljs-string">"password"</span>:<span class="hljs-string">"1234"</span>} })
<span class="hljs-string">[INFO]</span> POST: https://api.cloud.appcelerator.com/v1/users/login.json
<span class="hljs-string">[INFO]</span> header: {<span class="hljs-string">"Authorization"</span>:<span class="hljs-string">"OAuth realm=\"</span>\<span class="hljs-string">",oauth_version=\"</span><span class="hljs-number">1</span>.<span class="hljs-number">0</span>\<span class="hljs-string">",oauth_consumer_key=\"</span>e96VgaVvpK6GGG1lgJI7PfdvsmL9gRkU\<span class="hljs-string">",oauth_signature_method=\"</span>HMAC-SHA1\<span class="hljs-string">",oauth_nonce=\"</span>y4Xk8JwEeMxbUci\<span class="hljs-string">",oauth_timestamp=\"</span><span class="hljs-number">1335487810</span>\<span class="hljs-string">",oauth_signature=\"</span>O%2BTHTHXXeNrReK%2BZNX%2FU1NANmlc%3D\<span class="hljs-string">""</span>}
<span class="hljs-string">[INFO]</span> data: {<span class="hljs-string">"login"</span>:<span class="hljs-string">"test5@soreply"</span>,<span class="hljs-string">"password"</span>:<span class="hljs-string">"1234"</span>,<span class="hljs-string">"ti_analytics"</span>:<span class="hljs-string">"{\"</span>id\<span class="hljs-string">":\"</span>C7B35F14-B522-40F0-B902-F1CC4EB8BC7F\<span class="hljs-string">",\"</span>mid\<span class="hljs-string">":\"</span>733E1B44-A290-498E-B33F-A723408B52F3\<span class="hljs-string">",\"</span>aguid\<span class="hljs-string">":\"</span>fa53f4dd-c447-<span class="hljs-number">4972</span>-b6e4-394ae0bcadd1\<span class="hljs-string">",\"</span>event\<span class="hljs-string">":\"</span>cloud.users.login\<span class="hljs-string">",\"</span>deploytype\<span class="hljs-string">":\"</span>development\<span class="hljs-string">",\"</span>sid\<span class="hljs-string">":\"</span>844A87B3-88D1-48AB-A91D-6DE8A0587AD4\<span class="hljs-string">"}"</span>}
<span class="hljs-string">[ERROR]</span> <span class="hljs-number">401</span>: You need to sign in or sign up before continuing.
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 26th 2012, 11:19:26 pm">April 26th 2012</span>
				by <span class='authorname'>JongWon Choi</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>api</span></li>
					
						<li><span class='tagname'>cloud.users.login</span></li>
					
						<li><span class='tagname'>user login</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Also, note that storing the credentials for your user is functionally redundant and a security vulnerability. After you login or register a user, the Cloud module stores a session ID for the user that it will persist until the user logs out. It will even last across device reboots.</p>
</div>
							<div class="author">
								&mdash; commented <span title="April 27th 2012, 1:40:03 pm">April 27th 2012</span>
								by <span class='authorname'>Dawson Toth</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-237331">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Did you change your oauth secret and key in the xml file? you can try to comment out oauth key and secret and see if it works.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 27th 2012, 12:12:44 am">April 27th 2012</span>
								by <span class='authorname'>Wei Kong</span><br>
								<a class="icon-bg icon-link" href="question/136109/suddeny-clouduserslogin-refuses-my-account-login#answer-237331" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-237333">
				
						<section>
							<p>Yes, I did just delete one single white space line. but i think it could not be a reason.</p>
<p>So, I changed the tiapp.xml file to previous safe version one. and try it again, even delete all build files..<br>but it also didn&#39;t work. the same error.. I couldn&#39;t understand.</p>
<p>it&#39;s my tiapp.xml file</p>
<pre><code class="hljs"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">ti:app</span> <span class="hljs-attribute">xmlns:ti</span>=<span class="hljs-value">"http://ti.appcelerator.org"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"acs-api-key-development"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"string"</span>&gt;</span>1Qlwiom5TNE9tdibsKrYo7K9jZRrCYjY<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"acs-oauth-key-development"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"string"</span>&gt;</span>e96VgaVvpK6GGG1lgJI7PfdvsmL9gRkU<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"acs-oauth-secret-development"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"string"</span>&gt;</span>IwieyrBTp3pZwrc5DgmLuCeS08YhgBgW<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"acs-api-key-production"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"string"</span>&gt;</span>0f4qBTdUY7DEgXge1G406Lv8hr201DgE<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"acs-oauth-key-production"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"string"</span>&gt;</span>xu50DdQ1t05mgHAXQM6IUX4t0ZLQndLq<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"acs-oauth-secret-production"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"string"</span>&gt;</span>IYq52raX0Eo6WowD1b1mtE0KWweDrqLg<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">deployment-targets</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">target</span> <span class="hljs-attribute">device</span>=<span class="hljs-value">"mobileweb"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">target</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">target</span> <span class="hljs-attribute">device</span>=<span class="hljs-value">"iphone"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">target</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">target</span> <span class="hljs-attribute">device</span>=<span class="hljs-value">"ipad"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">target</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">target</span> <span class="hljs-attribute">device</span>=<span class="hljs-value">"android"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">target</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">target</span> <span class="hljs-attribute">device</span>=<span class="hljs-value">"blackberry"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">target</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">deployment-targets</span>&gt;</span>

...
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 27th 2012, 2:22:26 am">April 27th 2012</span>
								by <span class='authorname'>JongWon Choi</span><br>
								<a class="icon-bg icon-link" href="question/136109/suddeny-clouduserslogin-refuses-my-account-login#answer-237333" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-237335">
				
						<section>
							<p>what a magic !!</p>
<p>As you said I commented out the oauth and secret key… it works as below<br>then, is there any problem to my developer oauth and key ?</p>
<pre><code class="hljs">
[INFO] ACS Request: { url: <span class="hljs-string">"users/login.json"</span>, verb: <span class="hljs-string">"POST"</span>, secure: YES, data: {<span class="hljs-string">"login"</span>:<span class="hljs-string">"test5@soreply"</span>,<span class="hljs-string">"password"</span>:<span class="hljs-string">"1234"</span>} })
[INFO] POST: https://api.cloud.appcelerator.com/v1/users/login.json?key=<span class="hljs-number">1</span>Qlwiom5TNE9tdibsKrYo7K9jZRrCYjY
[INFO] header: {}
[INFO] data: {<span class="hljs-string">"login"</span>:<span class="hljs-string">"test5@soreply"</span>,<span class="hljs-string">"password"</span>:<span class="hljs-string">"1234"</span>,<span class="hljs-string">"ti_analytics"</span>:<span class="hljs-string">"{\"</span>id\<span class="hljs-string">":\"</span><span class="hljs-number">6</span>AFBEDA3-F91F-<span class="hljs-number">4162</span>-<span class="hljs-number">8101</span>-<span class="hljs-number">93</span>F5F48C1061\<span class="hljs-string">",\"</span>mid\<span class="hljs-string">":\"</span><span class="hljs-number">733</span>E1B44-A29<span class="hljs-number">0</span>-<span class="hljs-number">498</span>E-B33F-A723408B52F3\<span class="hljs-string">",\"</span>aguid\<span class="hljs-string">":\"</span>fa53f4dd-c447-<span class="hljs-number">4972</span>-b6e4-<span class="hljs-number">394</span>ae0bcadd1\<span class="hljs-string">",\"</span>event\<span class="hljs-string">":\"</span>cloud.users.login\<span class="hljs-string">",\"</span>deploytype\<span class="hljs-string">":\"</span>development\<span class="hljs-string">",\"</span>sid\<span class="hljs-string">":\"</span>EB604137-<span class="hljs-number">04</span>B<span class="hljs-number">0</span>-<span class="hljs-number">439</span>D-<span class="hljs-number">954</span>E-DCF8F103EF24\<span class="hljs-string">"}"</span>}
[INFO] {<span class="hljs-string">"users"</span>:[{<span class="hljs-string">"id"</span>:<span class="hljs-string">"4f8fa4a9eeb652246f0010d5"</span>,<span class="hljs-string">"first_name"</span>:<span class="hljs-string">"Test5"</span>,<span class="hljs-string">"last_name"</span>:<span class="hljs-string">"Soreply"</span>,<span class="hljs-string">"created_at"</span>:<span class="hljs-string">"2012-04-19T05:37:45+0000"</span>,<span class="hljs-string">"updated_at"</span>:<span class="hljs-string">"2012-04-27T04:36:34+0000"</span>,<span class="hljs-string">"external_accounts"</span>:[],<span class="hljs-string">"confirmed_at"</span>:<span class="hljs-string">"2012-04-19T05:37:45+0000"</span>,<span class="hljs-string">"username"</span>:<span class="hljs-string">"test5 soreply"</span>,<span class="hljs-string">"email"</span>:<span class="hljs-string">"test5@soreply"</span>,<span class="hljs-string">"custom_fields"</span>:{<span class="hljs-string">"gender"</span>:<span class="hljs-string">"male"</span>,<span class="hljs-string">"city"</span>:<span class="hljs-string">"NY"</span>,<span class="hljs-string">"phone"</span>:<span class="hljs-string">"010100100100"</span>},<span class="hljs-string">"stats"</span>:{<span class="hljs-string">"photos"</span>:{<span class="hljs-string">"total_count"</span>:<span class="hljs-number">5</span>},<span class="hljs-string">"storage"</span>:{<span class="hljs-string">"used"</span>:<span class="hljs-number">7275832</span>}}}],<span class="hljs-string">"success"</span>:true,<span class="hljs-string">"error"</span>:false,<span class="hljs-string">"meta"</span>:{<span class="hljs-string">"code"</span>:<span class="hljs-number">200</span>,<span class="hljs-string">"status"</span>:<span class="hljs-string">"ok"</span>,<span class="hljs-string">"method_name"</span>:<span class="hljs-string">"loginUser"</span>,<span class="hljs-string">"session_id"</span>:<span class="hljs-string">"2w1DEEg7f2hTQwbCmp3Jj76FGfA"</span>}}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 27th 2012, 2:38:40 am">April 27th 2012</span>
								by <span class='authorname'>JongWon Choi</span><br>
								<a class="icon-bg icon-link" href="question/136109/suddeny-clouduserslogin-refuses-my-account-login#answer-237335" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
