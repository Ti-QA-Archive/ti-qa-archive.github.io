<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Webview in TableViewRow - not responding to first click on Android » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Webview in TableViewRow - not responding to first click on Android</h1>
		</header>
		<section>
			<p>Hi,</p>
<p>I have a tableview with ~40 normal tableviewrows, each row has it&#39;s own event listener.</p>
<p>Every 5th tableviewrow is a different type of row, with a webview showing an advertisement. The advertisement is an animated gif inside a hyperlink. I need the webview to show the animated gifs, it&#39;s the only way of showing them.</p>
<p>The HTML of the webview is loaded from a server, and the ad is loaded in by javascript on page load. So far, so good, working nicely.</p>
<p>There is an event listener on the webview tablerow. This event listener is supposed to evalJS on the webview, to get it&#39;s hyperlink href, so I can open the ad url in a browser window instead of inside an app window.</p>
<p>There&#39;s the problem. I have to <strong>click</strong> the webview tablerow <strong>twice</strong> for this to work, and then it works as intended. It seems like I have to focus on the cell, before the click works.</p>
<p>When I remove the webview from the tableviewrow, it immediately fires it&#39;s click. How do I make that click fire right away when there&#39;s a webview inside?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="May 16th 2013, 12:08:05 pm">May 16th 2013</span>
				by <span class='authorname'>Joucke Hempenius</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>click</span></li>
					
						<li><span class='tagname'>tableviewrow</span></li>
					
						<li><span class='tagname'>webview</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-262850">
				
						<section>
							<p>Hello,</p>
<p>you don&#39;t use scrollable views on top of scrollable views (ie, a webview on top of tableviews).</p>
<p>AS you can see, the scrolls just get messy. </p>
<p>Best,</p>
<p>Mauro</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 16th 2013, 8:37:04 pm">May 16th 2013</span>
								by <span class='authorname'>Mauro Parra</span><br>
								<a class="icon-bg icon-link" href="question/152463/webview-in-tableviewrow---not-responding-to-first-click-on-android#answer-262850" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>1</span> Vote</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-262866">
				
						<section>
							<p>Hi Mauro, thanks for your answer.</p>
<p>How do I then get animated gifs to work in a table?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 17th 2013, 4:46:45 am">May 17th 2013</span>
								by <span class='authorname'>Joucke Hempenius</span><br>
								<a class="icon-bg icon-link" href="question/152463/webview-in-tableviewrow---not-responding-to-first-click-on-android#answer-262866" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-262877">
				
						<section>
							<p>HI,<br>   You can set scrollable false and touchenabled to false, remember setBubbleParent to false to prevent event bubbling to parent.</p>
<p>That might come with certain combination of property, as what you are trying to do is not recommended as Mauro said already.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 17th 2013, 7:09:19 am">May 17th 2013</span>
								by <span class='authorname'>Ashish Nigam</span><br>
								<a class="icon-bg icon-link" href="question/152463/webview-in-tableviewrow---not-responding-to-first-click-on-android#answer-262877" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-262896">
				
						<section>
							<p>Mauro and Ashish thanks for your answers. I <strong>know</strong> using webviews this way is recommended against, but <strong>it is the only way to show animated gifs</strong>, which I must do.</p>
<p>I found a solution for the focus problem myself.</p>
<p>If you add a transparent view over the webview, the webview becomes unclickable. Then you can use the webview load event with evalJS to store the url needed in the overlay webview, and fire Ti.Platform.openURL with givenurl.</p>
<p>Example of tablerow:</p>
<pre><code class="hljs">var self = Ti.UI.createTableViewRow({
    width:<span class="hljs-number">320</span>,height:<span class="hljs-number">50</span>
});

<span class="hljs-comment">// external html and javascript file, loading the ad as hyperlink (id:link) with embedded gif</span>
var urlValue = <span class="hljs-string">"http://example.com/filename.ext"</span>;

var webview = Ti.UI.createWebView({
    width:<span class="hljs-number">320</span>,
    height:<span class="hljs-number">50</span>,
    left:<span class="hljs-number">0</span>,right:<span class="hljs-number">0</span>,top:<span class="hljs-number">0</span>,bottom:<span class="hljs-number">0</span>,
    url:urlValue,
});
webview.addEventListener(<span class="hljs-string">"load"</span>,copyURL);
self.add(webview);

<span class="hljs-comment">// transparent overlay</span>
var overlay = Ti.UI.createView({
    width:<span class="hljs-number">320</span>,
    height:<span class="hljs-number">50</span>,
    left:<span class="hljs-number">0</span>,right:<span class="hljs-number">0</span>,top:<span class="hljs-number">0</span>,bottom:<span class="hljs-number">0</span>,
    backgroundColor:<span class="hljs-string">"transparent"</span>,
    url:<span class="hljs-string">""</span>
})
self.add(overlay);

<span class="hljs-function">function <span class="hljs-title">copyURL</span><span class="hljs-params">(e)</span> </span>{
    overlay.url = e.source.evalJS(<span class="hljs-string">"document.getElementById('link').href"</span>);
}
</code></pre><p>Example of table click handler:</p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> overlay</span> = e.source;
<span class="hljs-variable"><span class="hljs-keyword">var</span> url</span> = overlay.url;
<span class="hljs-keyword">if</span>(url != <span class="hljs-string">""</span>) Ti.Platform.openURL(url);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="May 17th 2013, 8:13:58 am">May 17th 2013</span>
								by <span class='authorname'>Joucke Hempenius</span><br>
								<a class="icon-bg icon-link" href="question/152463/webview-in-tableviewrow---not-responding-to-first-click-on-android#answer-262896" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
