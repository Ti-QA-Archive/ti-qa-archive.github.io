<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Large gap between view elements Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Large gap between view elements</h1>
		</header>
		<section>
			<p>I have a view with buttons ,labels and scrollview. I have to set it dynamically. My code as follows:</p>
<p> var textLabel = Titanium.UI.createLabel({<br>            text:&quot;This First textLabel&quot;,<br>            height:&#39;auto&#39;,<br>            width:&#39;285dp&#39;,<br>            top:&#39;130dp&#39;,<br>            editable:false,<br>            left:&#39;10dp&#39;,<br>            color:&#39;black&#39;,<br>            font:{fontSize:&#39;14dp&#39;,<br>            fontFamily:&#39;Helvetica Neue&#39;},<br>            backgroundColor:&#39;#0000&#39;,<br>            textAlign:&#39;left&#39;<br>           }); </p>
<pre><code class="hljs">view.<span class="hljs-built_in">add</span>(textLabel); 

  var scrollView = Titanium.UI.createScrollView({
        <span class="hljs-variable">width</span> : <span class="hljs-string">'285dp'</span>,
                    <span class="hljs-variable">height</span> : <span class="hljs-string">'72dp'</span>,
        contentWidth:<span class="hljs-string">'auto'</span>,
        contentHeight:<span class="hljs-string">'auto'</span>,
        backgroundColor:<span class="hljs-string">'#944BBD'</span>,
        scrollType:<span class="hljs-string">'horizontal'</span>,
                    top:textArea.toImage().<span class="hljs-variable">height</span>+<span class="hljs-number">140</span>+<span class="hljs-string">'dp'</span>,
                    left:<span class="hljs-string">'5dp'</span>
    });    
</code></pre><p>view.add(scrollview);</p>
<p>var taPlay = Titanium.UI.createLabel({<br>            text:howToPlay,<br>            height:&#39;auto&#39;,<br>            width:&#39;285dp&#39;,<br>            top:textArea.toImage().height +200+&#39;dp&#39;,<br>            editable:false,<br>            left:&#39;10dp&#39;,<br>            color:&#39;black&#39;,<br>            font:{fontSize:&#39;14dp&#39;,<br>            color:&#39;black&#39;,<br>            fontFamily:&#39;Helvetica Neue&#39;},<br>            backgroundColor:&#39;#EAE4EE&#39;,<br>            textAlign:&#39;left&#39;<br>              }); </p>
<p>view.add(taPlay); </p>
<p>var playNowBtn = Titanium.UI.createButton({<br>    top:taPlay.toImage().top+taPlay.toImage().height+20+&#39;dp&#39;,<br>    height:&#39;40dp&#39;,<br>    width:&#39;200dp&#39;,<br>    left:&#39;50dp&#39;,<br>    backgroundImage:&#39;&#x2F;images&#x2F;playNow.png&#39;</p>
<p>});<br>view.add(playNowBtn); </p>
<p>the issue is :<br>there is large space between taPlay  and playNowBtn on device. But working fine on emulator.<br>My titanium sdk is 2.0.1 and android version is 2.2.<br>Any help or suggestion will be appreciated.!<br>Thanks.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="August 9th 2012, 11:44:05 am">August 9th 2012</span>
				by <span class='authorname'>Sanjay Shekhawat</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>button height</span></li>
					
						<li><span class='tagname'>large gap</span></li>
					
						<li><span class='tagname'>layout issue</span></li>
					
						<li><span class='tagname'>view height</span></li>
					
						<li><span class='tagname'>view layout</span></li>
					
				</ul>
			

			<section>
				<h5>3 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>@sanjay please format code properly before posting</p>
<pre><code class="hljs">var textLabel = Titanium.UI.createLabel({
    <span class="hljs-string">text :</span> <span class="hljs-string">"This First textLabel"</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-string">'285dp'</span>,
    <span class="hljs-string">top :</span> <span class="hljs-string">'130dp'</span>,
    <span class="hljs-string">editable :</span> <span class="hljs-literal">false</span>,
    <span class="hljs-string">left :</span> <span class="hljs-string">'10dp'</span>,
    <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-string">'14dp'</span>,
        <span class="hljs-string">fontFamily :</span> <span class="hljs-string">'Helvetica Neue'</span>
    },
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#0000'</span>,
    <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>
});
view.add(textLabel);

var scrollView = Titanium.UI.createScrollView({
    <span class="hljs-string">width :</span> <span class="hljs-string">'285dp'</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'72dp'</span>,
    <span class="hljs-string">contentWidth :</span> <span class="hljs-string">'auto'</span>,
    <span class="hljs-string">contentHeight :</span> <span class="hljs-string">'auto'</span>,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#944BBD'</span>,
    <span class="hljs-string">scrollType :</span> <span class="hljs-string">'horizontal'</span>,
    <span class="hljs-string">top :</span> textArea.toImage().height + <span class="hljs-number">140</span> + <span class="hljs-string">'dp'</span>,
    <span class="hljs-string">left :</span> <span class="hljs-string">'5dp'</span>
});
view.add(scrollview);
var taPlay = Titanium.UI.createLabel({
    <span class="hljs-string">text :</span> howToPlay,
    <span class="hljs-string">height :</span> <span class="hljs-string">'auto'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-string">'285dp'</span>,
    <span class="hljs-string">top :</span> textArea.toImage().height + <span class="hljs-number">200</span> + <span class="hljs-string">'dp'</span>,
    <span class="hljs-string">editable :</span> <span class="hljs-literal">false</span>,
    <span class="hljs-string">left :</span> <span class="hljs-string">'10dp'</span>,
    <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
    <span class="hljs-string">font :</span> {
        <span class="hljs-string">fontSize :</span> <span class="hljs-string">'14dp'</span>,
        <span class="hljs-string">color :</span> <span class="hljs-string">'black'</span>,
        <span class="hljs-string">fontFamily :</span> <span class="hljs-string">'Helvetica Neue'</span>
    },
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">'#EAE4EE'</span>,
    <span class="hljs-string">textAlign :</span> <span class="hljs-string">'left'</span>
});
view.add(taPlay);
var playNowBtn = Titanium.UI.createButton({
    <span class="hljs-string">top :</span> taPlay.toImage().top + taPlay.toImage().height + <span class="hljs-number">20</span> + <span class="hljs-string">'dp'</span>,
    <span class="hljs-string">height :</span> <span class="hljs-string">'40dp'</span>,
    <span class="hljs-string">width :</span> <span class="hljs-string">'200dp'</span>,
    <span class="hljs-string">left :</span> <span class="hljs-string">'50dp'</span>,
    <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">'/images/playNow.png'</span>
});
view.add(playNowBtn);
</code></pre><p>So as to make it more readable and one can understand.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2012, 12:13:52 pm">August 9th 2012</span>
								by <span class='authorname'>Sahil Grover</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Formated to no one else has a seizure trying to read the code:</p>
<pre><code class="hljs">
var textLabel = Titanium.UI.createLabel({ 
    <span class="hljs-built_in">text</span>:<span class="hljs-string">"This First textLabel"</span>, 
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>, 
    <span class="hljs-variable">width</span>:<span class="hljs-string">'285dp'</span>, 
    top:<span class="hljs-string">'130dp'</span>, 
    editable:<span class="hljs-keyword">false</span>, 
    left:<span class="hljs-string">'10dp'</span>, 
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'black'</span>, 
    font:{fontSize:<span class="hljs-string">'14dp'</span>, fontFamily:<span class="hljs-string">'Helvetica Neue'</span>}, 
    backgroundColor:<span class="hljs-string">'#0000'</span>, 
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'left'</span> });
view.<span class="hljs-built_in">add</span>(textLabel); 

var scrollView = Titanium.UI.createScrollView({
    <span class="hljs-variable">width</span> : <span class="hljs-string">'285dp'</span>,
    <span class="hljs-variable">height</span> : <span class="hljs-string">'72dp'</span>,
    contentWidth:<span class="hljs-string">'auto'</span>,
    contentHeight:<span class="hljs-string">'auto'</span>,
    backgroundColor:<span class="hljs-string">'#944BBD'</span>,
    scrollType:<span class="hljs-string">'horizontal'</span>,
    top:textArea.toImage().<span class="hljs-variable">height</span>+<span class="hljs-number">140</span>+<span class="hljs-string">'dp'</span>,
    left:<span class="hljs-string">'5dp'</span>}); 
view.<span class="hljs-built_in">add</span>(scrollview);

var taPlay = Titanium.UI.createLabel({ 
    <span class="hljs-built_in">text</span>:howToPlay, 
    <span class="hljs-variable">height</span>:<span class="hljs-string">'auto'</span>, 
    <span class="hljs-variable">width</span>:<span class="hljs-string">'285dp'</span>, 
    top:textArea.toImage().<span class="hljs-variable">height</span> +<span class="hljs-number">200</span>+<span class="hljs-string">'dp'</span>, 
    editable:<span class="hljs-keyword">false</span>, 
    left:<span class="hljs-string">'10dp'</span>, 
    <span class="hljs-built_in">color</span>:<span class="hljs-string">'black'</span>, 
    font:{fontSize:<span class="hljs-string">'14dp'</span>, <span class="hljs-built_in">color</span>:<span class="hljs-string">'black'</span>, fontFamily:<span class="hljs-string">'Helvetica Neue'</span>}, 
    backgroundColor:<span class="hljs-string">'#EAE4EE'</span>, 
    <span class="hljs-built_in">textAlign</span>:<span class="hljs-string">'left'</span> });
view.<span class="hljs-built_in">add</span>(taPlay);

var playNowBtn = Titanium.UI.createButton({ 
    top:taPlay.toImage().top+taPlay.toImage().<span class="hljs-variable">height</span>+<span class="hljs-number">20</span>+<span class="hljs-string">'dp'</span>, 
    <span class="hljs-variable">height</span>:<span class="hljs-string">'40dp'</span>, 
    <span class="hljs-variable">width</span>:<span class="hljs-string">'200dp'</span>, 
    left:<span class="hljs-string">'50dp'</span>, 
    backgroundImage:<span class="hljs-string">'/images/playNow.png'</span>}); 
view.<span class="hljs-built_in">add</span>(playNowBtn);
</code></pre><p>Also, in the future, a screen shot when discussing visual UI problems is very helpful.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2012, 12:23:14 pm">August 9th 2012</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>&#x2F;me slaps Sahil <em>grin</em></p>
<p>I can&#39;t believe it took me 9 minutes to format that.</p>
</div>
							<div class="author">
								&mdash; commented <span title="August 9th 2012, 12:24:01 pm">August 9th 2012</span>
								by <span class='authorname'>Stephen Feather</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-244877">
				
						<section>
							<p>A few comments, while may not be directly related to the issue.</p>
<p><code>height:&amp;#39;auto&amp;#39;</code> is deprecated in Titanium 2 and higher. You should use <code>height: Ti.UI.SIZE</code> instead.</p>
<p>Your issue maybe is due to the fact that you are using dp and testing with different screen resolutions between the emulator and the device. Just for test, try to use a fixed height instead of all those toImage()</p>
<p>I think would be easier for you to use a vertical layout in your view definition, so all the components will be located vertically in the order you add them to the view.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 9th 2012, 12:56:58 pm">August 9th 2012</span>
								by <span class='authorname'>Javier Rayon</span><br>
								<a class="icon-bg icon-link" href="question/140794/large-gap-between-view-elements#answer-244877" rel="permalink">permalink</a>
							</div>

							<h5>6 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>@Javier, thanks for reply!<br>I had tried with fixed height and tested on device, the behavior of application is same as in emulator. But my label text is dynamic, so how can i set static height and top of  lower components. Any suggestion!</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2012, 4:54:58 am">August 10th 2012</span>
											by <span class='authorname'>Sanjay Shekhawat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>My recommendation is to use a vertical layout. In your main view, set <code>layout: &amp;#39;vertical&amp;#39;</code>, and then the <code>top</code> property of its children is the top-margin, instead of the absolute top position (so, put them to almost zero). </p>
<p>If you have any reason to not do that, change the way you calculate the height of each view. <code>toImage()</code> is slow and since Titanium 2 you can access real size for each view after postlLayout event, as easy as <code>textArea.rect.height</code>. More info about this in <a href="https:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Titanium+2.0+Layout+Changes#Titanium2.0LayoutChanges-ControlSizeandPositionandPostLayoutEvent">this guide</a></p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2012, 6:42:54 am">August 10th 2012</span>
											by <span class='authorname'>Javier Rayon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>lblTxt.rect.height  gives 0 on window open event. How can i get the actual height of label. Any help to get the label actual after inserting text into it</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2012, 7:59:56 am">August 10th 2012</span>
											by <span class='authorname'>Sanjay Shekhawat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>check <code>postlayout</code> event. This should work</p>
<pre><code class="hljs">
<span class="hljs-keyword">var</span> postLayoutCallback  = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{

    <span class="hljs-comment">//remove listener to avoid repeated calls</span>
    textArea.removeEventListener(<span class="hljs-string">'postlayout'</span>, postLayoutCallback);

    alert(<span class="hljs-string">'textArea height is: '</span> + textArea.rect.height);

    <span class="hljs-comment">//add your stuff here</span>
 }

textArea.addEventListener(<span class="hljs-string">'postlayout'</span>, postLayoutCallback);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="August 10th 2012, 8:13:22 am">August 10th 2012</span>
											by <span class='authorname'>Javier Rayon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p><code>postLayout</code> event not working even on window open event. i had used same as above.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2012, 8:44:38 am">August 10th 2012</span>
											by <span class='authorname'>Sanjay Shekhawat</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>@Javier Rayon please open the link:<br>http:&#x2F;&#x2F;mymobilespace.in&#x2F;test&#x2F;labelHeight.jpg</p>
<p>the problem is that i can&#39;t get the actual height of my dynamic label text, thats why the playnow button is showing in between label text. I want to show it just below the label text. please help!<br>Thanks in advance.</p>
</p>
										<div class="author">
											&mdash; commented <span title="August 10th 2012, 10:25:52 am">August 10th 2012</span>
											by <span class='authorname'>Sanjay Shekhawat</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>2</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-244889">
				
						<section>
							<p>I&#39;ve never seen the <code>toImage()</code> technique used like that.  Not to say it&#39;s wrong, but it looks fragile to me.  I would be concerned that the label might not actually have a correct height yet â there&#39;s a <code>postlayout</code> event that gets fired.  It&#39;s usually not until that stage that all your views have their &quot;final&quot; dimensions.</p>
<p>Javier is right that you could use a vertical layout for the parent view (although vertical can be somewhat hard to use for more complicated interfaces.  You could also just preassign <code>height</code> and <code>top</code> to your elements.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="August 9th 2012, 2:35:13 pm">August 9th 2012</span>
								by <span class='authorname'>Jason Priebe</span><br>
								<a class="icon-bg icon-link" href="question/140794/large-gap-between-view-elements#answer-244889" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
