<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>geoLocation error » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>geoLocation error</h1>
		</header>
		<section>
			<p>[ERROR] Script Error = &#39;undefined&#39; is not an object (evaluating &#39;win.backgroundColor = &#39;#fff&#39;&#39;) (unknown file)<br>2012-07-10 14:57:39.918 LocationMapping[6567:1aa03] <em>*</em> Terminating app due to uncaught exception of class &#39;__NSCFDictionary&#39;</p>
<p>LocationMapping is my project name…….</p>
<p>Can anyone tel me wh I am getting this error…</p>
<p>Thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 10th 2012, 7:34:16 am">July 10th 2012</span>
				by <span class='authorname'>Suchismita Pavan</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>titanium</span></li>
					
				</ul>
			

			<section>
				<h5>6 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>[ERROR] Script Error = Parse error (unknown file)<br>2012-07-10 15:26:04.263 LocationMapping[6874:1ab03] <em>*</em> Terminating app due to uncaught exception of class &#39;__NSCFDictionary&#39;<br>terminate called throwing an exception</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 10th 2012, 7:57:58 am">July 10th 2012</span>
								by <span class='authorname'>Suchismita Pavan</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Suchismita Pavan,</p>
<p>can you explain more about Platform  IOS or Android and post some code so we may better help you.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 10th 2012, 7:58:14 am">July 10th 2012</span>
								by <span class='authorname'>Nitin Chavda</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>sorry….</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 10th 2012, 8:08:37 am">July 10th 2012</span>
								by <span class='authorname'>Suchismita Pavan</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>This application m running in titanium and when i run it in iPhone this error is coming.i created a single view application.and in FirstView.js I pasted the following code.So I am getting this error.<br>&#x2F;&#x2F;FirstView Component Constructor Ti.Geolocation.purpose-&quot;Recieve User Location&quot;;<br>function FirstView() { &#x2F;&#x2F;create object instance, a parasitic subclass of Observable var self = Ti.UI.create&quot;View(); Ti.Geolocation.purpose-&quot;Recieve User Location&quot;;<br>Titanium.Geolocation.getCurrentPosition( function(e) { if (!e.success) { alert(&#39;Could not retrieve location&#39;); return; } &#x2F;&#x2F;here are users coordinates var longitude = e.coords.longitude; var latitude = e.coords.latitude;<br>&#x2F;&#x2F; try to get address<br>Titanium.Geolocation.reverseGeocoder(latitude,longitude, function(evt) {<br>    &#x2F;&#x2F;here we will store address information<br>    var street;<br>    var city;<br>    var country;<br>    if (evt.success) {<br>        var places = evt.places;<br>        if (places &amp;amp;&amp;amp; places.length) {<br>            street = places[0].street;<br>            city = places[0].city;<br>            country = places[0].country_code;<br>        } else {<br>            address = &amp;quot;No address found&amp;quot;;<br>        }<br>    }<br>    &#x2F;&#x2F;and now we can fill lables<br>    &#x2F;&#x2F;or create a pin on the map view<br>    &#x2F;&#x2F;to display where user actually is<br>});<br>});<br>return self;<br>}<br>module.exports = FirstView;<br>I am getting the error<br>[ERROR] Script Error = Parse error (unknown file) 2012-07-10 15:26:04.263 LocationMapping[6874:1ab03] <em>*</em> Terminating app due to uncaught exception of class &#39;__NSCFDictionary&#39; terminate called throwing an exception</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 10th 2012, 8:08:59 am">July 10th 2012</span>
								by <span class='authorname'>Suchismita Pavan</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Could you please post code in a proper manner .</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 10th 2012, 8:46:59 am">July 10th 2012</span>
								by <span class='authorname'>Moiz Chhatriwala</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hi Suchismita,</p>
<p>Have you tried my last posted code?.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 11th 2012, 5:03:57 am">July 11th 2012</span>
								by <span class='authorname'>Nitin Chavda</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-242847">
				
						<section>
							<p>This application m running in titanium and when i run it in iPhone this error is coming.i created a single view application.and in FirstView.js  I pasted the following code.So I am getting this error.</p>
<p>&#x2F;&#x2F;FirstView Component Constructor<br>Ti.Geolocation.purpose-&quot;Recieve User Location&quot;;</p>
<p>function FirstView() {<br>    &#x2F;&#x2F;create object instance, a parasitic subclass of Observable<br>    var self = Ti.UI.create&quot;View();<br>    Ti.Geolocation.purpose-&quot;Recieve User Location&quot;;</p>
<p>Titanium.Geolocation.getCurrentPosition( function(e) {<br>    if (!e.success) {<br>        alert(&#39;Could not retrieve location&#39;);<br>        return;<br>    }<br>    &#x2F;&#x2F;here are users coordinates<br>    var longitude = e.coords.longitude;<br>    var latitude = e.coords.latitude;</p>
<pre><code class="hljs"><span class="hljs-comment">// try to get address</span>
Titanium.Geolocation.reverseGeocoder(latitude,longitude, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(evt)</span> </span>{
    <span class="hljs-comment">//here we will store address information</span>
    <span class="hljs-keyword">var</span> street;
    <span class="hljs-keyword">var</span> city;
    <span class="hljs-keyword">var</span> country;
    <span class="hljs-keyword">if</span> (evt.success) {
        <span class="hljs-keyword">var</span> places = evt.places;
        <span class="hljs-keyword">if</span> (places &amp;&amp; places.length) {
            street = places[<span class="hljs-number">0</span>].street;
            city = places[<span class="hljs-number">0</span>].city;
            country = places[<span class="hljs-number">0</span>].country_code;
        } <span class="hljs-keyword">else</span> {
            address = <span class="hljs-string">"No address found"</span>;
        }
    }
    <span class="hljs-comment">//and now we can fill lables </span>
    <span class="hljs-comment">//or create a pin on the map view</span>
    <span class="hljs-comment">//to display where user actually is</span>
});
</code></pre><p>});</p>
<pre><code class="hljs"><span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
</code></pre><p>}</p>
<p>module.exports = FirstView;</p>
<p>I am getting the error</p>
<p>[ERROR] Script Error = Parse error (unknown file) 2012-07-10 15:26:04.263 LocationMapping[6874:1ab03] <em>*</em> Terminating app due to uncaught exception of class &#39;__NSCFDictionary&#39; terminate called throwing an exception</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 10th 2012, 8:07:42 am">July 10th 2012</span>
								by <span class='authorname'>Suchismita Pavan</span><br>
								<a class="icon-bg icon-link" href="../../question/139499/geolocation-error.html#answer-242847" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>This is not the answer…This the problem m getting…….</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 10th 2012, 8:09:33 am">July 10th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-242848">
				
						<section>
							<p>Hi Suchismita,</p>
<p>Have you check your <strong>Ti.Geolocation.locationServicesEnabled</strong> on or not?.</p>
<p>and put your code inside below condition</p>
<pre><code class="hljs"><span class="hljs-keyword">if</span>(Ti.Geolocation.locationServicesEnabled == <span class="hljs-literal">true</span>) {

}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 10th 2012, 8:22:12 am">July 10th 2012</span>
								by <span class='authorname'>Nitin Chavda</span><br>
								<a class="icon-bg icon-link" href="../../question/139499/geolocation-error.html#answer-242848" rel="permalink">permalink</a>
							</div>

							<h5>14 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Can you please tell me where to check it….and how to enable it</p>
<p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 10th 2012, 8:55:03 am">July 10th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>By keeping inside the if clause also m getting same error(Parse error)</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 10th 2012, 8:56:55 am">July 10th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Have you set latitude and longitude in simulator&#x2F;emulator because by default it does not get any latitude and longitude for testing in simulator&#x2F;emulator .</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 10th 2012, 8:58:58 am">July 10th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Actually I am very much new…can u tell me how to do that</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 10th 2012, 9:31:29 am">July 10th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>i Have done this from github</p>
<p>&#x2F;&#x2F;FirstView Component Constructor<br>if(Ti.Geolocation.locationServicesEnabled == true) {</p>
<p>Ti.Geolocation.purpose=&quot;Recieve User Location&quot;;<br>function FirstView() {<br>    &#x2F;&#x2F;create object instance, a parasitic subclass of Observable<br>    var self = Ti.UI.createView();<br>    var win = Ti.UI.createWindow({<br>    backgroundColor:&#39;#000&#39;<br>});</p>
<p>&#x2F;&#x2F;Ti.include(&quot;version.js&quot;);</p>
<p>Ti.Geolocation.preferredProvider = &quot;gps&quot;;</p>
<p>if (Titanium.Platform.name == &#39;iPhone OS&#39;)<br>{<br>    &#x2F;&#x2F;NOTE: starting in 3.2+, you&#39;ll need to set the applications<br>    &#x2F;&#x2F;purpose property for using Location services on iPhone<br>    Ti.Geolocation.purpose = &quot;GPS demo&quot;;<br>}</p>
<p>function translateErrorCode(code) {<br>    if (code == null) {<br>        return null;<br>    }<br>    switch (code) {<br>        case Ti.Geolocation.ERROR_LOCATION_UNKNOWN:<br>            return &quot;Location unknown&quot;;<br>        case Ti.Geolocation.ERROR_DENIED:<br>            return &quot;Access denied&quot;;<br>        case Ti.Geolocation.ERROR_NETWORK:<br>            return &quot;Network error&quot;;<br>        case Ti.Geolocation.ERROR_HEADING_FAILURE:<br>            return &quot;Failure to detect heading&quot;;<br>        case Ti.Geolocation.ERROR_REGION_MONITORING_DENIED:<br>            return &quot;Region monitoring access denied&quot;;<br>        case Ti.Geolocation.ERROR_REGION_MONITORING_FAILURE:<br>            return &quot;Region monitoring access failure&quot;;<br>        case Ti.Geolocation.ERROR_REGION_MONITORING_DELAYED:<br>            return &quot;Region monitoring setup delayed&quot;;<br>    }<br>}</p>
<p>var currentHeadingLabel = Titanium.UI.createLabel({<br>    text:&#39;Current Heading (One Shot)&#39;,<br>    font:{fontSize:12, fontWeight:&#39;bold&#39;},<br>    color:&#39;#111&#39;,<br>    top:10,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(currentHeadingLabel);</p>
<p>var currentHeading = Titanium.UI.createLabel({<br>    text:&#39;Updated Heading not fired&#39;,<br>    font:{fontSize:12},<br>    color:&#39;#444&#39;,<br>    top:30,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(currentHeading);</p>
<p>var updatedHeadingLabel = Titanium.UI.createLabel({<br>    text:&#39;Updated Heading&#39;,<br>    font:{fontSize:12, fontWeight:&#39;bold&#39;},<br>    color:&#39;#111&#39;,<br>    top:50,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(updatedHeadingLabel);</p>
<p>var updatedHeading = Titanium.UI.createLabel({<br>    text:&#39;Updated Heading not fired&#39;,<br>    font:{fontSize:12},<br>    color:&#39;#444&#39;,<br>    top:70,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(updatedHeading);</p>
<p>var updatedHeadingTime = Titanium.UI.createLabel({<br>    text:&#39;&#39;,<br>    font:{fontSize:11},<br>    color:&#39;#444&#39;,<br>    top:90,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(updatedHeadingTime);</p>
<p>var currentLocationLabel = Titanium.UI.createLabel({<br>    text:&#39;Current Location (One Shot)&#39;,<br>    font:{fontSize:12, fontWeight:&#39;bold&#39;},<br>    color:&#39;#111&#39;,<br>    top:110,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(currentLocationLabel);</p>
<p>var currentLocation = Titanium.UI.createLabel({<br>    text:&#39;Current Location not fired&#39;,<br>    font:{fontSize:11},<br>    color:&#39;#444&#39;,<br>    top:130,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(currentLocation);</p>
<p>var updatedLocationLabel = Titanium.UI.createLabel({<br>    text:&#39;Updated Location&#39;,<br>    font:{fontSize:12, fontWeight:&#39;bold&#39;},<br>    color:&#39;#111&#39;,<br>    top:150,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(updatedLocationLabel);</p>
<p>var updatedLocation = Titanium.UI.createLabel({<br>    text:&#39;Updated Location not fired&#39;,<br>    font:{fontSize:11},<br>    color:&#39;#444&#39;,<br>    top:170,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(updatedLocation);</p>
<p>var updatedLatitude = Titanium.UI.createLabel({<br>    text:&#39;&#39;,<br>    font:{fontSize:11},<br>    color:&#39;#444&#39;,<br>    top:190,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(updatedLatitude);</p>
<p>var updatedLocationAccuracy = Titanium.UI.createLabel({<br>    text:&#39;&#39;,<br>    font:{fontSize:11},<br>    color:&#39;#444&#39;,<br>    top:210,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(updatedLocationAccuracy);</p>
<p>var updatedLocationTime = Titanium.UI.createLabel({<br>    text:&#39;&#39;,<br>    font:{fontSize:11},<br>    color:&#39;#444&#39;,<br>    top:230,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(updatedLocationTime);</p>
<p>var forwardGeoLabel = Titanium.UI.createLabel({<br>    text:&#39;Forward Geo (Addr-&gt;Coords)&#39;,<br>    font:{fontSize:12, fontWeight:&#39;bold&#39;},<br>    color:&#39;#111&#39;,<br>    top:250,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(forwardGeoLabel);</p>
<p>var forwardGeo = Titanium.UI.createLabel({<br>    text:&#39;&#39;,<br>    font:{fontSize:11},<br>    color:&#39;#444&#39;,<br>    top:270,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(forwardGeo);</p>
<p>var reverseGeoLabel = Titanium.UI.createLabel({<br>    text:&#39;Reverse Geo (Coords-&gt;Addr)&#39;,<br>    font:{fontSize:12, fontWeight:&#39;bold&#39;},<br>    color:&#39;#111&#39;,<br>    top:290,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(reverseGeoLabel);</p>
<p>var reverseGeo = Titanium.UI.createLabel({<br>    text:&#39;&#39;,<br>    font:{fontSize:11},<br>    color:&#39;#444&#39;,<br>    top:310,<br>    left:10,<br>    height:15,<br>    width:300<br>});<br>win.add(reverseGeo);</p>
<p>&#x2F;&#x2F; state vars used by resume&#x2F;pause<br>var headingAdded = false;<br>var locationAdded = false;</p>
<p>&#x2F;&#x2F;<br>&#x2F;&#x2F;  SHOW CUSTOM ALERT IF DEVICE HAS GEO TURNED OFF<br>&#x2F;&#x2F;<br>if (Titanium.Geolocation.locationServicesEnabled === false)<br>{<br>    Titanium.UI.createAlertDialog({title:&#39;Kitchen Sink&#39;, message:&#39;Your device has geo turned off - turn it on.&#39;}).show();<br>}<br>else<br>{<br>    if (Titanium.Platform.name != &#39;android&#39;) {<br>        var authorization = Titanium.Geolocation.locationServicesAuthorization;<br>        Ti.API.info(&#39;Authorization: &#39;+authorization);<br>        if (authorization == Titanium.Geolocation.AUTHORIZATION_DENIED) {<br>            Ti.UI.createAlertDialog({<br>                title:&#39;Kitchen Sink&#39;,<br>                message:&#39;You have disallowed Titanium from running geolocation services.&#39;<br>            }).show();<br>        }<br>        else if (authorization == Titanium.Geolocation.AUTHORIZATION_RESTRICTED) {<br>            Ti.UI.createAlertDialog({<br>                title:&#39;Kitchen Sink&#39;,<br>                message:&#39;Your system has disallowed Titanium from running geolocation services.&#39;<br>            }).show();<br>        }<br>    }</p>
<pre><code class="hljs"><span class="hljs-comment">//</span>
<span class="hljs-comment">// IF WE HAVE COMPASS GET THE HEADING</span>
<span class="hljs-comment">//</span>
<span class="hljs-keyword">if</span> (Titanium.Geolocation.hasCompass)
{
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">//  TURN OFF ANNOYING COMPASS INTERFERENCE MESSAGE</span>
    <span class="hljs-comment">//</span>
    Titanium.Geolocation.showCalibration = <span class="hljs-literal">false</span>;

    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// SET THE HEADING FILTER (THIS IS IN DEGREES OF ANGLE CHANGE)</span>
    <span class="hljs-comment">// EVENT WON'T FIRE UNLESS ANGLE CHANGE EXCEEDS THIS VALUE</span>
    Titanium.Geolocation.headingFilter = <span class="hljs-number">90</span>;

    <span class="hljs-comment">//</span>
    <span class="hljs-comment">//  GET CURRENT HEADING - THIS FIRES ONCE</span>
    <span class="hljs-comment">//</span>
    Ti.Geolocation.getCurrentHeading(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{
        <span class="hljs-keyword">if</span> (e.error)
        {
            currentHeading.text = <span class="hljs-string">'error: '</span> + e.error;
            Ti.API.info(<span class="hljs-string">"Code translation: "</span>+translateErrorCode(e.code));
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">var</span> x = e.heading.x;
        <span class="hljs-keyword">var</span> y = e.heading.y;
        <span class="hljs-keyword">var</span> z = e.heading.z;
        <span class="hljs-keyword">var</span> magneticHeading = e.heading.magneticHeading;
        <span class="hljs-keyword">var</span> accuracy = e.heading.accuracy;
        <span class="hljs-keyword">var</span> trueHeading = e.heading.trueHeading;
        <span class="hljs-keyword">var</span> timestamp = e.heading.timestamp;

        currentHeading.text = <span class="hljs-string">'x:'</span> + x + <span class="hljs-string">' y: '</span> + y + <span class="hljs-string">' z:'</span> + z;
        Titanium.API.info(<span class="hljs-string">'geo - current heading: '</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(timestamp) + <span class="hljs-string">' x '</span> + x + <span class="hljs-string">' y '</span> + y + <span class="hljs-string">' z '</span> + z);
    });

    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// EVENT LISTENER FOR COMPASS EVENTS - THIS WILL FIRE REPEATEDLY (BASED ON HEADING FILTER)</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-keyword">var</span> headingCallback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
    </span>{
        <span class="hljs-keyword">if</span> (e.error)
        {
            updatedHeading.text = <span class="hljs-string">'error: '</span> + e.error;
            Ti.API.info(<span class="hljs-string">"Code translation: "</span>+translateErrorCode(e.code));
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">var</span> x = e.heading.x;
        <span class="hljs-keyword">var</span> y = e.heading.y;
        <span class="hljs-keyword">var</span> z = e.heading.z;
        <span class="hljs-keyword">var</span> magneticHeading = e.heading.magneticHeading;
        <span class="hljs-keyword">var</span> accuracy = e.heading.accuracy;
        <span class="hljs-keyword">var</span> trueHeading = e.heading.trueHeading;
        <span class="hljs-keyword">var</span> timestamp = e.heading.timestamp;

        updatedHeading.text = <span class="hljs-string">'x:'</span> + x + <span class="hljs-string">' y: '</span> + y + <span class="hljs-string">' z:'</span> + z;
        updatedHeadingTime.text = <span class="hljs-string">'timestamp:'</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(timestamp);
        updatedHeading.color = <span class="hljs-string">'red'</span>;
        updatedHeadingTime.color = <span class="hljs-string">'red'</span>;
        setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
        </span>{
            updatedHeading.color = <span class="hljs-string">'#444'</span>;
            updatedHeadingTime.color = <span class="hljs-string">'#444'</span>;

        },<span class="hljs-number">100</span>);

        Titanium.API.info(<span class="hljs-string">'geo - heading updated: '</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(timestamp) + <span class="hljs-string">' x '</span> + x + <span class="hljs-string">' y '</span> + y + <span class="hljs-string">' z '</span> + z);
    };
    Titanium.Geolocation.addEventListener(<span class="hljs-string">'heading'</span>, headingCallback);
    headingAdded = <span class="hljs-literal">true</span>;
}
<span class="hljs-keyword">else</span>
{
    Titanium.API.info(<span class="hljs-string">"No Compass on device"</span>);
    currentHeading.text = <span class="hljs-string">'No compass available'</span>;
    updatedHeading.text = <span class="hljs-string">'No compass available'</span>;
}

<span class="hljs-comment">//</span>
<span class="hljs-comment">//  SET ACCURACY - THE FOLLOWING VALUES ARE SUPPORTED</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Titanium.Geolocation.ACCURACY_BEST</span>
<span class="hljs-comment">// Titanium.Geolocation.ACCURACY_NEAREST_TEN_METERS</span>
<span class="hljs-comment">// Titanium.Geolocation.ACCURACY_HUNDRED_METERS</span>
<span class="hljs-comment">// Titanium.Geolocation.ACCURACY_KILOMETER</span>
<span class="hljs-comment">// Titanium.Geolocation.ACCURACY_THREE_KILOMETERS</span>
<span class="hljs-comment">//</span>
Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST;

<span class="hljs-comment">//</span>
<span class="hljs-comment">//  SET DISTANCE FILTER.  THIS DICTATES HOW OFTEN AN EVENT FIRES BASED ON THE DISTANCE THE DEVICE MOVES</span>
<span class="hljs-comment">//  THIS VALUE IS IN METERS</span>
<span class="hljs-comment">//</span>
Titanium.Geolocation.distanceFilter = <span class="hljs-number">10</span>;

<span class="hljs-comment">//</span>
<span class="hljs-comment">// GET CURRENT POSITION - THIS FIRES ONCE</span>
<span class="hljs-comment">//</span>
Titanium.Geolocation.getCurrentPosition(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{
    <span class="hljs-keyword">if</span> (!e.success || e.error)
    {
        currentLocation.text = <span class="hljs-string">'error: '</span> + <span class="hljs-built_in">JSON</span>.stringify(e.error);
        Ti.API.info(<span class="hljs-string">"Code translation: "</span>+translateErrorCode(e.code));
        alert(<span class="hljs-string">'error '</span> + <span class="hljs-built_in">JSON</span>.stringify(e.error));
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> longitude = e.coords.longitude;
    <span class="hljs-keyword">var</span> latitude = e.coords.latitude;
    <span class="hljs-keyword">var</span> altitude = e.coords.altitude;
    <span class="hljs-keyword">var</span> heading = e.coords.heading;
    <span class="hljs-keyword">var</span> accuracy = e.coords.accuracy;
    <span class="hljs-keyword">var</span> speed = e.coords.speed;
    <span class="hljs-keyword">var</span> timestamp = e.coords.timestamp;
    <span class="hljs-keyword">var</span> altitudeAccuracy = e.coords.altitudeAccuracy;
    Ti.API.info(<span class="hljs-string">'speed '</span> + speed);
    currentLocation.text = <span class="hljs-string">'long:'</span> + longitude + <span class="hljs-string">' lat: '</span> + latitude;

    Titanium.API.info(<span class="hljs-string">'geo - current location: '</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(timestamp) + <span class="hljs-string">' long '</span> + longitude + <span class="hljs-string">' lat '</span> + latitude + <span class="hljs-string">' accuracy '</span> + accuracy);
});

<span class="hljs-comment">//</span>
<span class="hljs-comment">// EVENT LISTENER FOR GEO EVENTS - THIS WILL FIRE REPEATEDLY (BASED ON DISTANCE FILTER)</span>
<span class="hljs-comment">//</span>
<span class="hljs-keyword">var</span> locationCallback = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)
</span>{
    <span class="hljs-keyword">if</span> (!e.success || e.error)
    {
        updatedLocation.text = <span class="hljs-string">'error:'</span> + <span class="hljs-built_in">JSON</span>.stringify(e.error);
        updatedLatitude.text = <span class="hljs-string">''</span>;
        updatedLocationAccuracy.text = <span class="hljs-string">''</span>;
        updatedLocationTime.text = <span class="hljs-string">''</span>;
        Ti.API.info(<span class="hljs-string">"Code translation: "</span>+translateErrorCode(e.code));
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> longitude = e.coords.longitude;
    <span class="hljs-keyword">var</span> latitude = e.coords.latitude;
    <span class="hljs-keyword">var</span> altitude = e.coords.altitude;
    <span class="hljs-keyword">var</span> heading = e.coords.heading;
    <span class="hljs-keyword">var</span> accuracy = e.coords.accuracy;
    <span class="hljs-keyword">var</span> speed = e.coords.speed;
    <span class="hljs-keyword">var</span> timestamp = e.coords.timestamp;
    <span class="hljs-keyword">var</span> altitudeAccuracy = e.coords.altitudeAccuracy;

    <span class="hljs-comment">//Titanium.Geolocation.distanceFilter = 100; //changed after first location event</span>

    updatedLocation.text = <span class="hljs-string">'long:'</span> + longitude;
    updatedLatitude.text = <span class="hljs-string">'lat: '</span>+ latitude;
    updatedLocationAccuracy.text = <span class="hljs-string">'accuracy:'</span> + accuracy;
    updatedLocationTime.text = <span class="hljs-string">'timestamp:'</span> +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(timestamp);

    updatedLatitude.color = <span class="hljs-string">'red'</span>;
    updatedLocation.color = <span class="hljs-string">'red'</span>;
    updatedLocationAccuracy.color = <span class="hljs-string">'red'</span>;
    updatedLocationTime.color = <span class="hljs-string">'red'</span>;
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{
        updatedLatitude.color = <span class="hljs-string">'#444'</span>;
        updatedLocation.color = <span class="hljs-string">'#444'</span>;
        updatedLocationAccuracy.color = <span class="hljs-string">'#444'</span>;
        updatedLocationTime.color = <span class="hljs-string">'#444'</span>;

    },<span class="hljs-number">100</span>);

    <span class="hljs-comment">// reverse geo</span>
    Titanium.Geolocation.reverseGeocoder(latitude,longitude,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>)
    </span>{
        <span class="hljs-keyword">if</span> (evt.success) {
            <span class="hljs-keyword">var</span> places = evt.places;
            <span class="hljs-keyword">if</span> (places &amp;&amp; places.length) {
                reverseGeo.text = places[<span class="hljs-number">0</span>].address;
            } <span class="hljs-keyword">else</span> {
                reverseGeo.text = <span class="hljs-string">"No address found"</span>;
            }
            Ti.API.debug(<span class="hljs-string">"reverse geolocation result = "</span>+<span class="hljs-built_in">JSON</span>.stringify(evt));
        }
        <span class="hljs-keyword">else</span> {
            Ti.UI.createAlertDialog({
                title:<span class="hljs-string">'Reverse geo error'</span>,
                message:evt.error
            }).show();
            Ti.API.info(<span class="hljs-string">"Code translation: "</span>+translateErrorCode(e.code));
        }
    });


    Titanium.API.info(<span class="hljs-string">'geo - location updated: '</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(timestamp) + <span class="hljs-string">' long '</span> + longitude + <span class="hljs-string">' lat '</span> + latitude + <span class="hljs-string">' accuracy '</span> + accuracy);
};
Titanium.Geolocation.addEventListener(<span class="hljs-string">'location'</span>, locationCallback);
locationAdded = <span class="hljs-literal">true</span>;
</code></pre><p>}<br>var addr = &quot;2065 Hamilton Avenue San Jose California 95125&quot;;</p>
<p>Titanium.Geolocation.forwardGeocoder(addr,function(evt)<br>{<br>    Ti.API.info(&#39;in forward &#39;);<br>    forwardGeo.text = &quot;lat:&quot;+evt.latitude+&quot;, long:&quot;+evt.longitude;<br>    Titanium.Geolocation.reverseGeocoder(evt.latitude,evt.longitude,function(evt)<br>    {<br>        if (evt.success) {<br>            var text = &quot;&quot;;<br>            for (var i = 0; i &lt; evt.places.length; i++) {<br>                text += &quot;&quot; + i + &quot;) &quot; + evt.places[i].address + &quot;\n&quot;;<br>            }<br>            Ti.API.info(&#39;Reversed forward: &#39;+text);<br>        }<br>        else {<br>            Ti.UI.createAlertDialog({<br>                title:&#39;Forward geo error&#39;,<br>                message:evt.error<br>            }).show();<br>            Ti.API.info(&quot;Code translation: &quot;+translateErrorCode(e.code));<br>        }<br>    });<br>});</p>
<p>if (Titanium.Platform.name == &#39;android&#39;)<br>{<br>    &#x2F;&#x2F;  as the destroy handler will remove the listener, only set the pause handler to remove if you need battery savings<br>    Ti.Android.currentActivity.addEventListener(&#39;pause&#39;, function(e) {<br>        Ti.API.info(&quot;pause event received&quot;);<br>        if (headingAdded) {<br>            Ti.API.info(&quot;removing heading callback on pause&quot;);<br>            Titanium.Geolocation.removeEventListener(&#39;heading&#39;, headingCallback);<br>            headingAdded = false;<br>        }<br>        if (locationAdded) {<br>            Ti.API.info(&quot;removing location callback on pause&quot;);<br>            Titanium.Geolocation.removeEventListener(&#39;location&#39;, locationCallback);<br>            locationAdded = false;<br>        }<br>    });<br>    Ti.Android.currentActivity.addEventListener(&#39;destroy&#39;, function(e) {<br>        Ti.API.info(&quot;destroy event received&quot;);<br>        if (headingAdded) {<br>            Ti.API.info(&quot;removing heading callback on destroy&quot;);<br>            Titanium.Geolocation.removeEventListener(&#39;heading&#39;, headingCallback);<br>            headingAdded = false;<br>        }<br>        if (locationAdded) {<br>            Ti.API.info(&quot;removing location callback on destroy&quot;);<br>            Titanium.Geolocation.removeEventListener(&#39;location&#39;, locationCallback);<br>            locationAdded = false;<br>        }<br>    });<br>    Ti.Android.currentActivity.addEventListener(&#39;resume&#39;, function(e) {<br>        Ti.API.info(&quot;resume event received&quot;);<br>        if (!headingAdded &amp;&amp; headingCallback) {<br>            Ti.API.info(&quot;adding heading callback on resume&quot;);<br>            Titanium.Geolocation.addEventListener(&#39;heading&#39;, headingCallback);<br>            headingAdded = true;<br>        }<br>        if (!locationAdded &amp;&amp; locationCallback) {<br>            Ti.API.info(&quot;adding location callback on resume&quot;);<br>            Titanium.Geolocation.addEventListener(&#39;location&#39;, locationCallback);<br>            locationAdded = true;<br>        }<br>    });<br>}</p>
<pre><code class="hljs"><span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
</code></pre><p>}</p>
<p>}<br>module.exports = FirstView;</p>
<p>here the output is coming in console….but the screen is coming null</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 10th 2012, 9:44:31 am">July 10th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>yes by this i am getting the address by text format…but i want map for mat</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 10th 2012, 9:50:11 am">July 10th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Suchismita,</p>
<p>Sorry for late reply i was busy with my work.</p>
<p>Try this code just place your address and call <strong>getLatLon</strong> function.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showLocation</span>(<span class="hljs-params">lat, lon</span>) </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> annotation = Titanium.Map.createAnnotation({
            latitude : lat,
            longitude : lon,
            animate : <span class="hljs-literal">true</span>,
            title : <span class="hljs-string">"Map"</span>
        });

        <span class="hljs-keyword">var</span> mapView = Ti.Map.createView({
            top : <span class="hljs-number">100</span>,
            left : <span class="hljs-number">0</span>,
            width : <span class="hljs-number">320</span>,
            height : <span class="hljs-number">100</span>,
            region : {
                latitude : lat,
                longitude : lon,
                latitudeDelta : <span class="hljs-number">0.01</span>,
                longitudeDelta : <span class="hljs-number">0.01</span>
            },
            animate : <span class="hljs-literal">true</span>,
            regionFit : <span class="hljs-literal">true</span>,
            annotations : [annotation]
        });
        win.add(mapView);
    } <span class="hljs-keyword">catch</span>(evt) {

    }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLatLon</span>(<span class="hljs-params">address</span>) </span>{

    <span class="hljs-keyword">var</span> xhr = Ti.Network.createHTTPClient();
    xhr.setTimeout(<span class="hljs-number">120000</span>);
    xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        Ti.API.info(e);
    }
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
            <span class="hljs-keyword">var</span> lon = json.Placemark[<span class="hljs-number">0</span>].Point.coordinates[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">var</span> lat = json.Placemark[<span class="hljs-number">0</span>].Point.coordinates[<span class="hljs-number">1</span>];
            showLocation(lat, lon);
        } <span class="hljs-keyword">catch</span>(t) {

        }

    }
    <span class="hljs-keyword">var</span> url = <span class="hljs-string">'http://maps.google.com/maps/geo?q='</span> + address + <span class="hljs-string">'&amp;output=json'</span>;
    xhr.open(<span class="hljs-string">'GET'</span>, url);
    xhr.send();
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 10th 2012, 11:55:12 am">July 10th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>what is the value of lat and lon here</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2012, 10:29:02 am">July 12th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>hi,<br>I am trying github  geolocation.js example..<br>In that what is this line…will it be same for all…Actually m getting &#39;Forward geo error&#39;<br>var addr = &quot;2065 Hamilton Avenue San Jose California 95125&quot;;</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2012, 11:09:57 am">July 12th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You have to pass <strong>addr</strong> in <strong>getLatLon</strong> function and that will get latitude and longitude and display map.</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2012, 11:12:42 am">July 12th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>can u tell me the solution of the problem m getting in github example.,,,this m getting when m running in ipod….</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2012, 11:15:27 am">July 12th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2012, 11:16:06 am">July 12th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Shall i need to to something additional for that github example….</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 12th 2012, 11:29:48 am">July 12th 2012</span>
											by <span class='authorname'>Suchismita Pavan</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>You told me earlier that you got address from the code.If you got address then you have to just call <strong>getLatLon</strong> function nothing else. Like this way</p>
<pre><code class="hljs">getLatLon<span class="hljs-list">(<span class="hljs-keyword">addr</span>)</span><span class="hljs-comment">;</span>
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 12th 2012, 11:46:01 am">July 12th 2012</span>
											by <span class='authorname'>Nitin Chavda</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>-2</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
