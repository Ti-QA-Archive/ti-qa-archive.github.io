<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>XHR only works once » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>XHR only works once</h1>
		</header>
		<section>
			<p>This is only a duplicate question because the previous one by another developer (http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;12341&#x2F;xhropen-will-only-work-once) has its comments closed.</p>
<p>I have a login form that accesses a web service. Upon clicking a button, it makes an XHR request to determine if the login was successful. However, if the user puts in invalid information and then tries again, the XHR request does not fired the second time. The button click fires, but the xhr.open() is never called.</p>
<p>I&#39;ve tried recreating a new XHR object upon each button click (as suggested in the above link), but it is still not working.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="April 26th 2010, 5:10:54 pm">April 26th 2010</span>
				by <span class='authorname'>Michael Szul</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>login</span></li>
					
						<li><span class='tagname'>xhr</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>4</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>4 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-163191">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Upon developing an iPad version of the iPhone application I&#39;ve built, I noticed that this issue no longer seems to occur. The problem must have been fixed in a Mobile SDK update.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 16th 2010, 11:36:50 am">December 16th 2010</span>
								by <span class='authorname'>Michael Szul</span><br>
								<a class="icon-bg icon-link" href="question/20181/xhr-only-works-once#answer-163191" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-43861">
				
						<section>
							<p>This is also happening to me but with the &quot;share gesture&quot;, the shake is listened app wide, but when I make a XHR post request… The shake is no longer available… there could be something wrong with the XHR after all…</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 26th 2010, 5:47:20 pm">April 26th 2010</span>
								by <span class='authorname'>Raul Riera</span><br>
								<a class="icon-bg icon-link" href="question/20181/xhr-only-works-once#answer-43861" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-43871">
				
						<section>
							<p>As an extremely horrible work around, I&#39;ve resorted to rebuilding the window view upon a failed login attempt. This seems to reset everything. Doing it this way makes me feel dirty, so if anyone knows of a fix, please post.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="April 26th 2010, 5:49:43 pm">April 26th 2010</span>
								by <span class='authorname'>Michael Szul</span><br>
								<a class="icon-bg icon-link" href="question/20181/xhr-only-works-once#answer-43871" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-127971">
				
						<section>
							<p>[EDIT]!!!</p>
<p>Ok, I have tracked down this issue NOT to the xhr call at all, but rather an alert dialog I was creating on failure to inform the user.<br>Apparently this:</p>
<pre><code class="hljs"> <span class="hljs-keyword">var</span> alertDialog = Titanium.UI.createAlertDialog({
    title: <span class="hljs-string">'Login Failed'</span>,
    message: <span class="hljs-string">'User not found.'</span>,
    buttonNames: [<span class="hljs-string">'OK'</span>]
});

alertDialog.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
            alertDialog.close();
        }
);
</code></pre><p>is wrong, as that click event listener kills something in regards to my other one never being called again.</p>
<pre><code class="hljs"> <span class="hljs-keyword">var</span> alertDialog = Titanium.UI.createAlertDialog({
    title: <span class="hljs-string">'Login Failed'</span>,
    message: <span class="hljs-string">'User not found.'</span>,
    buttonNames: [<span class="hljs-string">'OK'</span>]
});
</code></pre><p>That works fine, and clicking on the &#39;ok&#39; button closes the dialog without issue also.</p>
<p>I&#39;ll put this up as a problem as it shouldn&#39;t do anything to the other click event.</p>
<p>[END EDIT]<br>I&#39;m having a similar issue. I have a button called login, it too is doing a login call using post. </p>
<pre><code class="hljs">login.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">do</span>Login);
</code></pre><p>First click, the method doLogin is called and all logging lines are written out, and the call happens and I get a response back. If I click the button again, not only does the call never happen, but I don&#39;t even see the log line in the console that is the first line of the doLogin function. I&#39;ve tried having the </p>
<pre><code class="hljs"><span class="hljs-variable"><span class="hljs-keyword">var</span> xhr</span> = Titanium.Network.createHTTPClient();
</code></pre><p>line be global for this page, and also within the doLogin function (so a new instance should be created each call), but neither works.</p>
<p>If I take out the httpClient stuff from the doLogin function it fires as many times as I press the button.</p>
<p>This is running with Android SDK, Google API v 2.2</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="October 15th 2010, 1:47:23 am">October 15th 2010</span>
								by <span class='authorname'>Simon O&#39;Connor</span><br>
								<a class="icon-bg icon-link" href="question/20181/xhr-only-works-once#answer-127971" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
