<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Unable to get current position, location is null [ANDROID] » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Unable to get current position, location is null [ANDROID]</h1>
		</header>
		<section>
			<p>hello there..i have problem..</p>
<p>i can get position in gingerbread..but in froyo this work..</p>
<p>i use this code :</p>
<pre><code class="hljs">function getLokasi() {
    var x = <span class="hljs-number">0</span>;
    var longitude
    var latitude
    var timer = setInterval(function() {
        <span class="hljs-constant">Titanium</span>.<span class="hljs-constant">Geolocation</span>.getCurrentPosition(function(e) {
            <span class="hljs-keyword">if</span>(!e.success || e.error) {
                <span class="hljs-regexp">//</span> currentLocation.text = <span class="hljs-string">'error: '</span> + <span class="hljs-constant">JSON</span>.stringify(e.error);
                <span class="hljs-regexp">//</span> <span class="hljs-constant">Ti</span>.<span class="hljs-constant">API</span>.info(<span class="hljs-string">"Code translation: "</span>+translateErrorCode(e.code));
                <span class="hljs-regexp">//</span> alert(<span class="hljs-string">'error '</span> + <span class="hljs-constant">JSON</span>.stringify(e.error));
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-keyword">if</span>(x &lt; <span class="hljs-number">5</span>) {
                longitude = e.coords.longitude;
                latitude = e.coords.latitude;
                <span class="hljs-regexp">//</span> var altitude = e.coords.altitude;
                <span class="hljs-regexp">//</span> var heading = e.coords.heading;
                <span class="hljs-regexp">//</span> var accuracy = e.coords.accuracy;
                <span class="hljs-regexp">//</span> var speed = e.coords.speed;
                <span class="hljs-regexp">//</span> var timestamp = e.coords.timestamp;
                <span class="hljs-regexp">//</span> var altitudeAccuracy = e.coords.altitudeAccuracy;
                <span class="hljs-regexp">//</span> <span class="hljs-constant">Ti</span>.<span class="hljs-constant">API</span>.info(<span class="hljs-string">'speed '</span> + speed);
                <span class="hljs-regexp">//</span> currentLocation.text = <span class="hljs-string">'long:'</span> + longitude + <span class="hljs-string">' lat: '</span> + latitude;

                <span class="hljs-regexp">//</span> <span class="hljs-constant">Titanium</span>.<span class="hljs-constant">API</span>.info(<span class="hljs-string">'geo - current location: '</span> + new <span class="hljs-constant">Date</span>(timestamp) + <span class="hljs-string">' long '</span> + longitude + <span class="hljs-string">' lat '</span> + latitude + <span class="hljs-string">' accuracy '</span> + accuracy);
                <span class="hljs-regexp">//</span> <span class="hljs-constant">Titanium</span>.<span class="hljs-constant">API</span>.info(<span class="hljs-string">'geo - current location: long '</span> + longitude + <span class="hljs-string">', lat '</span> + latitude);

                <span class="hljs-keyword">if</span>(x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {
                    labelLokasi.text = <span class="hljs-string">'You are in :  - Getting Location - '</span>;
                } <span class="hljs-keyword">else</span> {
                    labelLokasi.text = <span class="hljs-string">'You are in :'</span>;
                }
                x++;
                <span class="hljs-regexp">//</span> <span class="hljs-constant">Titanium</span>.<span class="hljs-constant">API</span>.info(x);
            } <span class="hljs-keyword">else</span> {
                posLat = latitude;
                posLong = longitude;

                getKota(posLat, posLong);

                <span class="hljs-regexp">//</span> <span class="hljs-constant">Titanium</span>.<span class="hljs-constant">API</span>.info(<span class="hljs-string">'LatLong : '</span> + posLat + <span class="hljs-string">','</span> + posLong);
                clearInterval(timer);
            }
        });
    }, <span class="hljs-number">2000</span>);
}
</code></pre><p>somebody help my problem..!!thanks</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="December 1st 2011, 12:47:49 pm">December 1st 2011</span>
				by <span class='authorname'>Firman Sach</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>gps</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>1</span> Vote</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-224744">
				
						<section>
							<p>There doesn&#39;t appear to be anything wrong with that code, but you may want to consider listening for the <code>location</code>, like this:</p>
<pre><code class="hljs">Ti.Geolocation.addEventListener(<span class="hljs-string">'location'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> </span>{
    <span class="hljs-comment">// do your thing</span>
});
</code></pre><p>When you consistently poll at an interval like that, you may be getting overlapping calls returning from the Geolocation module, giving unexpected results. Also, make sure you have location services enabled and configured through DDMS if you are using an emulator. Here&#39;s the wiki documentation covering all of this: <a href="http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Tracking+Position+and+Heading">http:&#x2F;&#x2F;wiki.appcelerator.org&#x2F;display&#x2F;guides&#x2F;Tracking+Position+and+Heading</a></p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="December 2nd 2011, 8:08:49 pm">December 2nd 2011</span>
								by <span class='authorname'>Tony Lukasavage</span><br>
								<a class="icon-bg icon-link" href="question/128932/unable-to-get-current-position-location-is-null-android#answer-224744" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
