<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>ACS Cloud Custom Objects - $or queries not returning any values Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>ACS Cloud Custom Objects - $or queries not returning any values</h1>
		</header>
		<section>
			<p>Hi,<br>I have created a custom object on the ACS cloud and are querying it from a Titanium based iOS app.<br>It works nicely as long as I only include a single set of criterias. I do however have a requirement to do &#39;or&#39; selections. I haven&#39;t been able to find an example but the documentation state that you can use $or and provide an array of parameters. </p>
<p>I have tried various syntax. They all return success but no records despite each of the individual filters are valid. This is what I have tried in Titanium without luck:</p>
<pre><code class="hljs">where: {<span class="hljs-variable">$or</span>:[{name:<span class="hljs-string">'value 1'</span>},{name:<span class="hljs-string">'value 2'</span>}]}
</code></pre><pre><code class="hljs"><span class="hljs-string">where:</span> {<span class="hljs-string">'$or'</span>:[{<span class="hljs-string">name:</span><span class="hljs-string">'value 1'</span>},{<span class="hljs-string">name:</span><span class="hljs-string">'value 2'</span>}]}
</code></pre><pre><code class="hljs">where: {<span class="hljs-variable">$or</span>:[{<span class="hljs-string">'name'</span>:<span class="hljs-string">'value 1'</span>},{<span class="hljs-string">'name'</span>:<span class="hljs-string">'value 2'</span>}]}
</code></pre><pre><code class="hljs">where: {<span class="hljs-string">'$or'</span>:[{<span class="hljs-string">'name'</span>:<span class="hljs-string">'value 1'</span>},{<span class="hljs-string">'name'</span>:<span class="hljs-string">'value 2'</span>}]}
</code></pre><p>Has anyone successfully used the $or syntax to query ACS custom objects? If so, I would be grateful if you could share the syntax that worked for you. </p>
<p>Note that this is a simplified example so replacing the $or with $in is not an option.</p>
<p>Any help appreciated.</p>
<p>Kind Regards</p>
<p>Jorgen</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="February 1st 2013, 6:35:56 am">February 1st 2013</span>
				by <span class='authorname'>Jorgen Rasmussen</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>$or</span></li>
					
						<li><span class='tagname'>acs</span></li>
					
						<li><span class='tagname'>cloud</span></li>
					
						<li><span class='tagname'>query</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>5</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>5 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-255932">
				
						<section>
							<p>What&#39;s your code like. Can you please also Check the ACS admin console and see what the log is like?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 1st 2013, 2:26:23 pm">February 1st 2013</span>
								by <span class='authorname'>Wei Kong</span><br>
								<a class="icon-bg icon-link" href="question/147729/acs-cloud-custom-objects---or-queries-not-returning-any-values#answer-255932" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255934">
				
						<section>
							<p>You can refer to the mongoDB for documentation aswell</p>
<p>http:&#x2F;&#x2F;docs.mongodb.org&#x2F;manual&#x2F;reference&#x2F;operator&#x2F;or&#x2F;</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 1st 2013, 2:37:57 pm">February 1st 2013</span>
								by <span class='authorname'>Hasnaad Din</span><br>
								<a class="icon-bg icon-link" href="question/147729/acs-cloud-custom-objects---or-queries-not-returning-any-values#answer-255934" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255950">
				
						<section>
							<p>Thank you for your replies. </p>
<p>I will do my best to provide further context but providing full working examples cagainst the ACS is it is secured.<br>Below, I have added a dump of the data response from the Titanium console if I do not apply any where clause. This gives a clear view of the actual data. The over simplified example that I did was to filter on the name &#39;New Farm&#39; or &#39;Newstead&#39;. That should return two records but returns none.</p>
<p>I did look at the mongoDB documentation and tried to follow the syntax. It is however not everything in mongoDB that can be leveraged which are causing me a few other concerns with the ACS cloud.</p>
<p>mongoDB example with $or:</p>
<pre><code class="hljs">db.inventory.find( { price:<span class="hljs-number">1.99</span>, <span class="hljs-variable">$or</span>: [ { qty: { <span class="hljs-variable">$lt</span>: <span class="hljs-number">20</span> } }, { sale: true } ] } )
</code></pre><p>I have now isolated the call to the ACS cloud in Titanium to the following statement:</p>
<pre><code class="hljs">    Cloud.Objects.query(
        {
            classname: <span class="hljs-string">'post_code'</span>,
            page: <span class="hljs-number">1</span>,
            per_page: <span class="hljs-number">100</span>,
            response_json_depth:<span class="hljs-number">1</span>,
            where:{ <span class="hljs-variable">$or</span>:[ { name:<span class="hljs-string">'New Farm'</span> }, { name:<span class="hljs-string">'Newstead'</span> } ] }
        }, <span class="hljs-keyword">function</span>(e){
            // process response here
        }
    );
</code></pre><p>As said, this returns succes but no records.</p>
<p>As suggested, I looked in the log on ACS to see what parameters were sent to the server and this is the where clause:</p>
<pre><code class="hljs"><span class="hljs-string">"where"</span> =&gt; <span class="hljs-string">"{"</span>$o<span class="hljs-string">r":[{"</span>name<span class="hljs-string">":"</span>Newstead<span class="hljs-string">"},{"</span>name<span class="hljs-string">":"</span>Newstead<span class="hljs-string">"}]}"</span>
</code></pre><p>I can&#39;t see anything wrong with that either.</p>
<p>Any help greatly appreciated as I have run out of ideas. Even if someone has actually successfully used the ACS custom objects with the $or syntax could post the syntax they used would be a help. At least I then know that it works. </p>
<p>Thanks in advanced.</p>
<p>&#x2F;Jorgen</p>
<p>Response as it is returned if I do not apply any filters:</p>
<pre><code class="hljs">{"<span class="hljs-attribute">post_code</span>":<span class="hljs-value">[
    {"<span class="hljs-attribute">post_code</span>":<span class="hljs-value"><span class="hljs-string">"4005"</span></span>,"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"New Farm"</span></span>,"<span class="hljs-attribute">descr</span>":<span class="hljs-value"><span class="hljs-string">"Northgate, QLD"</span></span>,"<span class="hljs-attribute">state</span>":<span class="hljs-value"><span class="hljs-string">"QLD"</span></span>,"<span class="hljs-attribute">country</span>":<span class="hljs-value"><span class="hljs-string">"AU"</span></span>,"<span class="hljs-attribute">coordinates</span>":<span class="hljs-value">[[<span class="hljs-number">153.047052</span>,-<span class="hljs-number">27.467878</span>]]</span>,"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-string">"510b321b222b3a3d7a0031b2"</span></span>,"<span class="hljs-attribute">created_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:19+0000"</span></span>,"<span class="hljs-attribute">updated_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:19+0000"</span></span>},
    {"<span class="hljs-attribute">post_code</span>":<span class="hljs-value"><span class="hljs-string">"4006"</span></span>,"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"Fortitude Valley"</span></span>,"<span class="hljs-attribute">descr</span>":<span class="hljs-value"><span class="hljs-string">"Northgate, QLD"</span></span>,"<span class="hljs-attribute">state</span>":<span class="hljs-value"><span class="hljs-string">"QLD"</span></span>,"<span class="hljs-attribute">country</span>":<span class="hljs-value"><span class="hljs-string">"AU"</span></span>,"<span class="hljs-attribute">coordinates</span>":<span class="hljs-value">[[<span class="hljs-number">153.038407</span>,-<span class="hljs-number">27.444163</span>]]</span>,"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-string">"510b321b222b3a3d84002ff3"</span></span>,"<span class="hljs-attribute">created_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:19+0000"</span></span>,"<span class="hljs-attribute">updated_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:19+0000"</span></span>},
    {"<span class="hljs-attribute">post_code</span>":<span class="hljs-value"><span class="hljs-string">"4006"</span></span>,"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"Bowen Hills"</span></span>,"<span class="hljs-attribute">descr</span>":<span class="hljs-value"><span class="hljs-string">"Northgate, QLD"</span></span>,"<span class="hljs-attribute">state</span>":<span class="hljs-value"><span class="hljs-string">"QLD"</span></span>,"<span class="hljs-attribute">country</span>":<span class="hljs-value"><span class="hljs-string">"AU"</span></span>,"<span class="hljs-attribute">coordinates</span>":<span class="hljs-value">[[<span class="hljs-number">153.038407</span>,-<span class="hljs-number">27.444163</span>]]</span>,"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-string">"510b321b7c1d0c058c002f04"</span></span>,"<span class="hljs-attribute">created_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:19+0000"</span></span>,"<span class="hljs-attribute">updated_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:19+0000"</span></span>},
    {"<span class="hljs-attribute">post_code</span>":<span class="hljs-value"><span class="hljs-string">"4006"</span></span>,"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"Newstead"</span></span>,"<span class="hljs-attribute">descr</span>":<span class="hljs-value"><span class="hljs-string">"Northgate, QLD"</span></span>,"<span class="hljs-attribute">state</span>":<span class="hljs-value"><span class="hljs-string">"QLD"</span></span>,"<span class="hljs-attribute">country</span>":<span class="hljs-value"><span class="hljs-string">"AU"</span></span>,"<span class="hljs-attribute">coordinates</span>":<span class="hljs-value">[[<span class="hljs-number">153.038407</span>,-<span class="hljs-number">27.444163</span>]]</span>,"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-string">"510b321c7c1d0c0582002df2"</span></span>,"<span class="hljs-attribute">created_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:20+0000"</span></span>,"<span class="hljs-attribute">updated_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:20+0000"</span></span>},
    {"<span class="hljs-attribute">post_code</span>":<span class="hljs-value"><span class="hljs-string">"4006"</span></span>,"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"Herston"</span></span>,"<span class="hljs-attribute">descr</span>":<span class="hljs-value"><span class="hljs-string">"Northgate, QLD"</span></span>,"<span class="hljs-attribute">state</span>":<span class="hljs-value"><span class="hljs-string">"QLD"</span></span>,"<span class="hljs-attribute">country</span>":<span class="hljs-value"><span class="hljs-string">"AU"</span></span>,"<span class="hljs-attribute">coordinates</span>":<span class="hljs-value">[[<span class="hljs-number">153.038407</span>,-<span class="hljs-number">27.444163</span>]]</span>,"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-string">"510b321c222b3a3d7a0031b7"</span></span>,"<span class="hljs-attribute">created_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:20+0000"</span></span>,"<span class="hljs-attribute">updated_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:20+0000"</span></span>},
    {"<span class="hljs-attribute">post_code</span>":<span class="hljs-value"><span class="hljs-string">"4005"</span></span>,"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"Teneriffe"</span></span>,"<span class="hljs-attribute">descr</span>":<span class="hljs-value"><span class="hljs-string">"Northgate, QLD"</span></span>,"<span class="hljs-attribute">state</span>":<span class="hljs-value"><span class="hljs-string">"QLD"</span></span>,"<span class="hljs-attribute">country</span>":<span class="hljs-value"><span class="hljs-string">"AU"</span></span>,"<span class="hljs-attribute">coordinates</span>":<span class="hljs-value">[[<span class="hljs-number">153.0454709</span>,-<span class="hljs-number">27.4578693</span>]]</span>,"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-string">"510b321b15e06042e0003152"</span></span>,"<span class="hljs-attribute">created_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:19+0000"</span></span>,"<span class="hljs-attribute">updated_at</span>":<span class="hljs-value"><span class="hljs-string">"2013-02-01T03:10:19+0000"</span></span>}
]</span>,"<span class="hljs-attribute">success</span>":<span class="hljs-value"><span class="hljs-literal">true</span></span>,"<span class="hljs-attribute">error</span>":<span class="hljs-value"><span class="hljs-literal">false</span></span>,"<span class="hljs-attribute">meta</span>":<span class="hljs-value">{"<span class="hljs-attribute">code</span>":<span class="hljs-value"><span class="hljs-number">200</span></span>,"<span class="hljs-attribute">status</span>":<span class="hljs-value"><span class="hljs-string">"ok"</span></span>,"<span class="hljs-attribute">method_name</span>":<span class="hljs-value"><span class="hljs-string">"queryCustomObjects"</span></span>,"<span class="hljs-attribute">page</span>":<span class="hljs-value"><span class="hljs-number">1</span></span>,"<span class="hljs-attribute">per_page</span>":<span class="hljs-value"><span class="hljs-number">100</span></span>,"<span class="hljs-attribute">total_pages</span>":<span class="hljs-value"><span class="hljs-number">1</span></span>,"<span class="hljs-attribute">total_results</span>":<span class="hljs-value"><span class="hljs-number">6</span></span>}</span>}
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 2nd 2013, 1:43:00 am">February 2nd 2013</span>
								by <span class='authorname'>Jorgen Rasmussen</span><br>
								<a class="icon-bg icon-link" href="question/147729/acs-cloud-custom-objects---or-queries-not-returning-any-values#answer-255950" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-255955">
				
						<section>
							<p>Looks like a bug when $or is used. We will fix it asap.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 2nd 2013, 4:15:31 am">February 2nd 2013</span>
								by <span class='authorname'>Wei Kong</span><br>
								<a class="icon-bg icon-link" href="question/147729/acs-cloud-custom-objects---or-queries-not-returning-any-values#answer-255955" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thank you for looking into this.<br>The ability to formulate queries including &#39;or&#39; logic is fundamental to using your cloud offering. I appreciate that you address this with high priority. It would also be great if you could update this message on the progress.<br>Once again, thank you for your effort.<br>Jorgen</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 2nd 2013, 5:09:53 am">February 2nd 2013</span>
											by <span class='authorname'>Jorgen Rasmussen</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-256759">
				
						<section>
							<p>I also have this issue.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 13th 2013, 9:59:46 pm">February 13th 2013</span>
								by <span class='authorname'>David Murray</span><br>
								<a class="icon-bg icon-link" href="question/147729/acs-cloud-custom-objects---or-queries-not-returning-any-values#answer-256759" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
