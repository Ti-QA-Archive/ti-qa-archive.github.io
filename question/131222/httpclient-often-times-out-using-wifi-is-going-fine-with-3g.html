<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>HTTPClient often times out using WIFI. Is going fine with 3G » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>HTTPClient often times out using WIFI. Is going fine with 3G</h1>
		</header>
		<section>
			<p>Often the XHR times out. I have set the timeout to 15000ms. When connected via 3G it is working fine and fast. When using I often get the following errors:</p>
<pre><code class="hljs"><span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>: (TiHttpClient-<span class="hljs-number">7</span>) [<span class="hljs-number">0</span>,<span class="hljs-number">32258</span>] HTTP Error (org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.conn</span><span class="hljs-class">.ConnectTimeoutException</span>): Connect to /<span class="hljs-number">62.212</span>.<span class="hljs-number">70.51</span>:<span class="hljs-number">80</span> timed out
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>: org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.conn</span><span class="hljs-class">.ConnectTimeoutException</span>: Connect to /<span class="hljs-number">62.212</span>.<span class="hljs-number">70.51</span>:<span class="hljs-number">80</span> timed out
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.conn</span><span class="hljs-class">.scheme</span><span class="hljs-class">.PlainSocketFactory</span><span class="hljs-class">.connectSocket</span>(PlainSocketFactory<span class="hljs-class">.java</span>:<span class="hljs-number">121</span>)
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.conn</span><span class="hljs-class">.DefaultClientConnectionOperator</span><span class="hljs-class">.openConnection</span>(DefaultClientConnectionOperator<span class="hljs-class">.java</span>:<span class="hljs-number">155</span>)
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.conn</span><span class="hljs-class">.AbstractPoolEntry</span><span class="hljs-class">.open</span>(AbstractPoolEntry<span class="hljs-class">.java</span>:<span class="hljs-number">164</span>)
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.conn</span><span class="hljs-class">.AbstractPooledConnAdapter</span><span class="hljs-class">.open</span>(AbstractPooledConnAdapter<span class="hljs-class">.java</span>:<span class="hljs-number">119</span>)
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.DefaultRequestDirector</span><span class="hljs-class">.execute</span>(DefaultRequestDirector<span class="hljs-class">.java</span>:<span class="hljs-number">359</span>)
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.AbstractHttpClient</span><span class="hljs-class">.execute</span>(AbstractHttpClient<span class="hljs-class">.java</span>:<span class="hljs-number">580</span>)
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.AbstractHttpClient</span><span class="hljs-class">.execute</span>(AbstractHttpClient<span class="hljs-class">.java</span>:<span class="hljs-number">678</span>)
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at org<span class="hljs-class">.apache</span><span class="hljs-class">.http</span><span class="hljs-class">.impl</span><span class="hljs-class">.client</span><span class="hljs-class">.AbstractHttpClient</span><span class="hljs-class">.execute</span>(AbstractHttpClient<span class="hljs-class">.java</span>:<span class="hljs-number">662</span>)
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at ti<span class="hljs-class">.modules</span><span class="hljs-class">.titanium</span><span class="hljs-class">.network</span><span class="hljs-class">.TiHTTPClient</span><span class="hljs-variable">$ClientRunnable</span>.<span class="hljs-function"><span class="hljs-title">run</span><span class="hljs-params">(TiHTTPClient.java:<span class="hljs-number">1140</span>)</span></span>
<span class="hljs-number">01</span>-<span class="hljs-number">26</span> <span class="hljs-number">16</span>:<span class="hljs-number">14</span>:<span class="hljs-number">39.361</span>: E/<span class="hljs-function"><span class="hljs-title">TiHttpClient</span><span class="hljs-params">(<span class="hljs-number">23687</span>)</span></span>:     at java<span class="hljs-class">.lang</span><span class="hljs-class">.Thread</span><span class="hljs-class">.run</span>(Thread<span class="hljs-class">.java</span>:<span class="hljs-number">1019</span>)
</code></pre><p>I get this using an android device (several) and the emulator.</p>
<p>The code is:</p>
<pre><code class="hljs">    <span class="hljs-keyword">if</span> ( Titanium.Network.online ==<span class="hljs-literal">true</span> ){
        showActInd();
        client = Titanium.Network.createHTTPClient();
        client.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ret</span>)</span>{
            alert( <span class="hljs-string">'Er gaat iets mis. Probeer het later nogmaals'</span> );
        }
        client.setTimeout(<span class="hljs-number">10000</span>);
        client.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ret</span>)</span>{
            Ti.API.info(<span class="hljs-string">'&gt;&gt;&gt; got the feed! ... '</span>);
                 response = <span class="hljs-keyword">this</span>.responseText;
            <span class="hljs-keyword">if</span>( response != <span class="hljs-literal">null</span> ){
                <span class="hljs-keyword">var</span> posts = <span class="hljs-built_in">JSON</span>.parse( response );
                createDataviewArray(posts); <span class="hljs-comment">//Function to create tableview with posts.</span>
            } <span class="hljs-keyword">else</span> {
                actInd.hide();
            }
        };
        client.open(<span class="hljs-string">'GET'</span>,feed);
        client.send();
    }<span class="hljs-keyword">else</span> {
        alert(<span class="hljs-string">'Helaas geen internetverbinding'</span>);
    }
</code></pre><p>Titanium Studio, build: 1.0.7.201112281340<br>Using titanium SDK 1.8  V8<br>Android<br>Mac OS X Lion</p>
<p>Anyone got any suggestions?</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 26th 2012, 1:24:56 pm">January 26th 2012</span>
				by <span class='authorname'>Léon Doornkamp</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>httpclient</span></li>
					
						<li><span class='tagname'>timeout</span></li>
					
						<li><span class='tagname'>wifi</span></li>
					
						<li><span class='tagname'>xhr</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>xhr.enableKeepAlive=false;</p>
<p>check this thread</p>
<p>http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;56621&#x2F;httpclient-returning-a-false-timeout-on-3g-only</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 26th 2012, 1:27:17 pm">January 26th 2012</span>
								by <span class='authorname'>Brian Wells</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Thx for you reply.</p>
<p>This doesn&#39;t work unfortunately. In the other thread it is about 3G only.<br>My problem occurs only when connected via Wifi.</p>
<p>It does work properly sometimes. Most of the time it doesn&#39;t.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 26th 2012, 1:45:35 pm">January 26th 2012</span>
								by <span class='authorname'>Léon Doornkamp</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Hello Leon,<br>is this happening on the device? or just the emulator?</p>
<p>Best,<br>Mauro</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 26th 2012, 3:53:12 pm">January 26th 2012</span>
								by <span class='authorname'>Mauro Parra</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Is this server on your wifi network? If so, have you tried localhost instead of the server ip address?</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 26th 2012, 4:46:56 pm">January 26th 2012</span>
								by <span class='authorname'>Darren Adams</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-228700">
				
						<section>
							<p>Hi Mauro,</p>
<p>This is on both actually. On the emulator and on the device when using Wifi. Not when using 3G. On the emulator I can&#39;t test it for 3G ofcourse</p>
<p>Hi Darren,<br>The server is not in the same wifi network. It is a dedicated server with a hosting provider.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 27th 2012, 6:14:10 am">January 27th 2012</span>
								by <span class='authorname'>Léon Doornkamp</span><br>
								<a class="icon-bg icon-link" href="question/131222/httpclient-often-times-out-using-wifi-is-going-fine-with-3g.html#answer-228700" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Sorry, this was meant to be a comment on your answers.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 27th 2012, 6:15:00 am">January 27th 2012</span>
											by <span class='authorname'>Léon Doornkamp</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>the only thing I can think of what would be causing this is your ISP manipulating the headers. Have you tried your android device on more than one wifi network? Would it be possible to take your device to a cafe, bookstore, a friend, or somewhere else that has a different ISP?</p>
<p>I know of a Titanium Mobile developer that lives in the UK, he had similar issues with his cell carrier Vodafone (i think that was the name) manipulating the headers of the http request, which was on 3G, and I know is different from your issue. Just makes me wonder…</p>
<p>Have you tried 1.7.5 or any SDK prior to 1.8.x?</p>
<p>!.8.0.1 has been close to a nightmare for me on Android in almost every way.</p>
<p>I wish I had more ideas.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 27th 2012, 7:18:02 am">January 27th 2012</span>
											by <span class='authorname'>Darren Adams</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi Darren,</p>
<p>Thx, I was thinking the same thin and so I tried it on a completely different network and completely different ISP. It gave the same problem.</p>
<p>&quot;Have you tried 1.7.5 or any SDK prior to 1.8.x?&quot; Yes. It happened with 1.7.5 as well.</p>
<p>BUT I am close to the answer. I also think it has something to do with the headers. I can lookup the request in Apache. the request via 3G will sett the User-Agent to &quot;-&quot; (dash). When on Wifi this stays empty &quot;&quot;. I think it has something to do with this. I will test further and come back on this.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 27th 2012, 7:48:30 am">January 27th 2012</span>
											by <span class='authorname'>Léon Doornkamp</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>By the way, how can is set the header User-Agent to what it should be? Android mobile or iPhone or whatever. It is not supposed to be empty I think..</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 27th 2012, 7:50:21 am">January 27th 2012</span>
											by <span class='authorname'>Léon Doornkamp</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Found this already.<br><code>client.setRequestHeader( &amp;#39;User-Agent&amp;#39;,Titanium.userAgent );</code><br>Will test now for some time using Wifi.</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 27th 2012, 7:57:46 am">January 27th 2012</span>
											by <span class='authorname'>Léon Doornkamp</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Unfortunately this doesn&#39;t help. I am seeing something new now, or I probably overlooked at first.<br>When the timeout occurs, before the errors are thrown (see original post), I also see DEBUG and WARNING</p>
<pre><code class="hljs">
<span class="hljs-number">01</span>-<span class="hljs-number">27</span> <span class="hljs-number">11</span>:<span class="hljs-number">06</span>:<span class="hljs-number">28.274</span>: D/TiHttpClient(<span class="hljs-number">8012</span>): (TiHttpClient-<span class="hljs-number">9</span>) [<span class="hljs-number">10186</span>,<span class="hljs-number">10489</span>] clearing the expired and idle connections
<span class="hljs-number">01</span>-<span class="hljs-number">27</span> <span class="hljs-number">11</span>:<span class="hljs-number">06</span>:<span class="hljs-number">28.274</span>: W/IdleConnectionHandler(<span class="hljs-number">8012</span>): Removing a connection that never existed!
</code></pre><p>Maybe this can help in finding a solution?</p>
</p>
										<div class="author">
											&mdash; commented <span title="January 27th 2012, 8:04:05 am">January 27th 2012</span>
											by <span class='authorname'>Léon Doornkamp</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Did you ever get this worked out?</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 7th 2012, 4:00:27 pm">February 7th 2012</span>
											by <span class='authorname'>Daniel Mahon</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>No, unfortunately not yet</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 8th 2012, 7:33:34 am">February 8th 2012</span>
											by <span class='authorname'>Léon Doornkamp</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hi, any  news on that issue ? I had posted a simmilar problem at: </p>
<p> https:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;182935&#x2F;httpclient-behaviour-ok-on-3g-but-faces-timeout-under-wifi-for-2-or-more-devices </p>
<p>thanks</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 28th 2015, 3:23:11 pm">July 28th 2015</span>
											by <span class='authorname'>Andre Sonnenburg</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
