<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Testing Geolocation » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Testing Geolocation</h1>
		</header>
		<section>
			<p>How are folks testing geolocation features? I&#39;m getting an error that location services are disabled and everything I&#39;m reading here and elsewhere indicates that it&#39;s a bug in Xcode 4.1. That said, I don&#39;t see anywhere near as many rants&#x2F;reports&#x2F;workarounds as I&#39;d expect. I&#39;m working on an app where I need to provide a distance from my current location to several other locations and…I can&#39;t. As far as I can tell, that inability isn&#39;t even a result of my newness to Titianium development.</p>
<p>What are others doing to test this functionality? Am I just at a full stop on this feature?</p>
<p>Thanks.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="November 8th 2011, 6:42:44 pm">November 8th 2011</span>
				by <span class='authorname'>Rob Wilkerson</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>geolocation</span></li>
					
						<li><span class='tagname'>iphone</span></li>
					
						<li><span class='tagname'>mobile</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>I&#39;m reading that Xcode 4.2 fixed the location services so they should work, but somehow mine still aren&#39;t enabled. Is there something special I need to do to enable them? I still don&#39;t see anything in the simulator settings, nor do I see anything obvious in tiapp.xml that might en&#x2F;disable them at the app level.</p>
<p>Thanks.</p>
</div>
							<div class="author">
								&mdash; commented <span title="November 14th 2011, 11:40:34 am">November 14th 2011</span>
								by <span class='authorname'>Rob Wilkerson</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-222861">
				
						<section>
							<p>I have this feature working.. it was working in 4.1 and is working in 4.2…<br>Look at the ARTI example.</p>
<p>I would recommend upgrading to 4.2 though.</p>
<p>If you post some code I may be able to help..</p>
<p>T.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 8th 2011, 7:37:12 pm">November 8th 2011</span>
								by <span class='authorname'>Trevor Ward</span><br>
								<a class="icon-bg icon-link" href="question/127949/testing-geolocation#answer-222861" rel="permalink">permalink</a>
							</div>

							<h5>9 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Hey, Trevor. This is what I&#39;m trying. It&#39;s the <code>getCurrentPosition()</code> method that fails. I&#39;m downloading Xcode 4.2 now just in case that will fix it.</p>
<pre><code class="hljs">        Ti.Geolocation.forwardGeocoder(
            geo_addr,
            <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span></span> {
                <span class="hljs-keyword">if</span>( e.<span class="hljs-built_in">error</span> ) {
                    alert( <span class="hljs-string">'doh!'</span> );
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
                }

                alert( <span class="hljs-string">'lat: '</span> + e.latitude + <span class="hljs-string">', long:'</span> + e.longitude );

                Ti.Geolocation.getCurrentPosition( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span></span> {
                    alert( <span class="hljs-string">'got current pos'</span> );
                });
            }
        );
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="November 8th 2011, 9:55:26 pm">November 8th 2011</span>
											by <span class='authorname'>Rob Wilkerson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK why are you using forward geocode…</p>
<p>I think the issue here is that you just want to run getcurrentposition and return the lang and lat.. then you can run any function you require on success or ignore on error…</p>
<p>Unless you have a specific reason for doing it this way.. simplify the code and processing.</p>
<p>Hope this helps</p>
<p>T..</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2011, 10:24:13 pm">November 8th 2011</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Well, the gist is that I need the long&#x2F;lat of a given address in order to calculate the distance of that address from the device&#39;s current location. That&#39;s why I need both. The <code>forwardGeocoder()</code> method works fine, but the <code>getCurrentPosition()</code> method doesn&#39;t. Hopefully that clears some things up and makes some semblance of sense.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2011, 11:03:07 pm">November 8th 2011</span>
											by <span class='authorname'>Rob Wilkerson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>OK so put in the success and error in the getcurrentPosition and capture it when it fails…</p>
<p>I wouldn&#39;t nest them I would get the forward coder and on success get the current position then on success of that calculate the distance.</p>
<p>But only run the forward coder if you don&#39;t already have the co ordinates of the location. Again I would also only update in background if you have moved a significant distance say 1km rather than a time space..</p>
<p>actually thinking about it I would always get the current position first. then only run the forward if success and not already got …</p>
<p>Hope this helps.</p>
<p>T…</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2011, 7:19:32 am">November 9th 2011</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I guess what I&#39;m trying to convey, and doing a piss poor job of it, is that the call to <code>getCurrentPosition()</code> never reaches the callback. It doesn&#39;t matter whether it&#39;s nested or otherwise. All I get is the &quot;location services disabled&quot; message and, as far as I can tell, there&#39;s no way to turn them on. I&#39;m now running OSX Lion + XCode 4.2.</p>
<p>Thanks again.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2011, 9:06:39 am">November 9th 2011</span>
											by <span class='authorname'>Rob Wilkerson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Make sure you add Ti.Geolocation.purpose to your code. It says it&#39;s mandatory to add it.<br>Have you tried to check the geolocation permission? Is disabled only for your app or for your device?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2011, 9:12:07 am">November 9th 2011</span>
											by <span class='authorname'>Itinerarium Itinerarium</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I do have the purpose set (it warned me that I needed it), but I don&#39;t know of any way to turn on the geolocation permission. Based on what I was reading, I got the impression that it wasn&#39;t possible. I&#39;ve dug around the emulator settings and my system preferences, but don&#39;t see any way to turn on location services in such a way that it might enable the same in the simulator. If something like that exists, can you point me in the right direction?</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2011, 9:15:10 am">November 9th 2011</span>
											by <span class='authorname'>Rob Wilkerson</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>I&#39;m afraid I can&#39;t help you. The location should be working &#39;out-of-the-box&#39;.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2011, 9:22:26 am">November 9th 2011</span>
											by <span class='authorname'>Itinerarium Itinerarium</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Well, damn. :-) Thanks anyway.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 9th 2011, 9:23:09 am">November 9th 2011</span>
											by <span class='authorname'>Rob Wilkerson</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-222863">
				
						<section>
							<p>Are you testing it in the simulator?  I believe geolocation doesn&#39;t work if you are testing in the simulator, you have to deploy to a device for that.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 8th 2011, 8:07:11 pm">November 8th 2011</span>
								by <span class='authorname'>Blueshift Local</span><br>
								<a class="icon-bg icon-link" href="question/127949/testing-geolocation#answer-222863" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Again I have it working with both.. but fixed points in the simulator …</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2011, 8:44:35 pm">November 8th 2011</span>
											by <span class='authorname'>Trevor Ward</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Hmmm. Might be the &quot;fixed points&quot; thing that&#39;s causing all the problems.</p>
</p>
										<div class="author">
											&mdash; commented <span title="November 8th 2011, 9:56:06 pm">November 8th 2011</span>
											by <span class='authorname'>Rob Wilkerson</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-222890">
				
						<section>
							<p>I would recommend you to update Xcode and try again. With Snow Leopard the simulator can get your location based on wi-fi.<br>With Xcode 4.2 and iOS 5 you can simulate locations directly from Xcode, even from a gpx file.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="November 9th 2011, 8:44:27 am">November 9th 2011</span>
								by <span class='authorname'>Itinerarium Itinerarium</span><br>
								<a class="icon-bg icon-link" href="question/127949/testing-geolocation#answer-222890" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
