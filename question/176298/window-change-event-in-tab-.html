<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Window change event in tab ? » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Window change event in tab ?</h1>
		</header>
		<section>
			<p>Hi all,</p>
<p>I have Tabgroup in my applications and it has 2 tabs. In one tab I then open other windows like this :-</p>
<p>Alloy.Globals.tabgroup.activeTab.open(newWinToOpen);</p>
<p>I want to know which window is at top right now but I am not finding any event to get this.</p>
<p>I have tried with tab.addEventListener(&#39;click&#39;&#x2F;&#39;focus&#39;) but this is not firing when window inside tab is changed.</p>
<p>I have also tried with registering focus to tabgroup itself Alloy.Globals.tabgroup.tab.addEventListener(&#39;focus&#39;) but it is only firing when I change tab itself.</p>
<p>I also tried with registering &#39;focus&#39; to each window which is inside tab but it is not firing.</p>
<p>Can any one tell me what is going wrong here ?<br>Thanks.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="July 20th 2014, 2:35:58 am">July 20th 2014</span>
				by <span class='authorname'>Roshan Jha</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>tab</span></li>
					
						<li><span class='tagname'>tabgroup</span></li>
					
						<li><span class='tagname'>window</span></li>
					
				</ul>
			

			<section>
				<h5>4 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Thanks for your input guys.</p>
<p>By examine closely I found &quot;focus&quot; events of window in tabs are firing as expected.</p>
<p> I think problem is related to animation of my tabgroup. Sorry about that I did not mention it, actually I myself knew this after little more testing, let me know whether I should start new thread or this will work.</p>
<p>I am animating my Tabgroup when upper right button is pressed(I have one button in each window and when this is pressed I animate my tabgroup by changing its right property.(I am implementing Menu like functionality)) as soon as I do this(Click Menu button and start animation) events firing are stopped.</p>
<p>Till I don&#39;t click this right button it fires events expected but if I click this events stops working.</p>
<p>Any idea on this would be helpful.</p>
<p>Thanks.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 20th 2014, 11:27:21 am">July 20th 2014</span>
								by <span class='authorname'>Roshan Jha</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I think this is issue :-</p>
<p>https:&#x2F;&#x2F;jira.appcelerator.org&#x2F;browse&#x2F;TIMOB-15768</p>
<p>Can any one tell me how to deal with this?<br>Thanks</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 20th 2014, 11:34:48 am">July 20th 2014</span>
								by <span class='authorname'>Roshan Jha</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Require;</p>
<ul>
<li>Reproducible code snippet (NOT entire app)</li>
<li>Platform; Android, iOS?</li>
<li>Ti SDK number? </li>
</ul>
<p>One of the important things is that I need to be able to check if the animation is automatic (done by the operating system) or you created it.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 20th 2014, 12:20:32 pm">July 20th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>Sure<br>Here are the details :-</p>
<p>Platform :- iOS<br>Ti SDK Number :- 3.2.3.GA</p>
<p>Code Snippest :-</p>
<p>My code is not in one file, but I try here to write as much as near possible :-</p>
<pre><code class="hljs"><span class="hljs-comment">//My window which reside below tab group, - This code is in index.js</span>
Alloy.Globals.menuWindow = Ti.UI.createWindow({
    <span class="hljs-string">right :</span> -<span class="hljs-number">200</span>,
    <span class="hljs-string">width :</span> <span class="hljs-number">200</span>,
    <span class="hljs-string">height :</span> Ti.UI.FILL,
    <span class="hljs-string">backgroundColor :</span> <span class="hljs-string">"blue"</span>
    });
Alloy.Globals.menuWindow.open();
</code></pre><p>I then open home window(which is tab group) from here - This code is in index.js</p>
<pre><code class="hljs">var homeWin = <span class="hljs-type">Alloy</span>.createController(<span class="hljs-symbol">'home'</span>).getView<span class="hljs-literal">()</span>;
homeWin.<span class="hljs-keyword">open</span><span class="hljs-literal">()</span>;
</code></pre><p>This is how home.xml looks</p>
<pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-title">Alloy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TabGroup</span> <span class="hljs-attribute">onOpen</span>=<span class="hljs-value">"doOpen"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"Home"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"abc"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Require</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"xyz"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">TabGroup</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Alloy</span>&gt;</span>
</code></pre><p>In home.js I take tab group in alloy global</p>
<pre><code class="hljs">Alloy.Globals.tabgroup = $.home; - This code <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> home.js
</code></pre><p>Now as you can see I have two tabs in my tab group. As I said, I then add oneMenu button to each window.</p>
<pre><code class="hljs"><span class="hljs-constant">Alloy.Globals.</span>addRightButton(<span class="hljs-variable">$.</span>win);    <span class="hljs-regexp">//</span><span class="hljs-constant">This </span>code is <span class="hljs-keyword">in</span> abc.js,xyz.js <span class="hljs-keyword">and</span> other windows which <span class="hljs-constant">I </span>open <span class="hljs-keyword">in</span> tabs
</code></pre><p>As you can see I am passing window object and apply right button property to that window    - This code is in alloy.js in Alloy.Globals.addRightButton method</p>
<pre><code class="hljs">var rightBtn = Ti.UI.createButton({
    <span class="hljs-string">width :</span> <span class="hljs-number">24</span>,
    <span class="hljs-string">height :</span> <span class="hljs-number">20</span>,
    <span class="hljs-string">backgroundImage :</span> <span class="hljs-string">"menu.png"</span>
    });
win.rightNavButton = rightBtn;

Now when I click <span class="hljs-keyword">this</span> Menu I apply animation to <span class="hljs-string">it :</span>-

rightBtn.addEventListener(<span class="hljs-string">'click'</span>, function(e) {
        <span class="hljs-comment">// If the menu is opened</span>
        <span class="hljs-keyword">if</span> (Alloy.Globals.menuToggle == <span class="hljs-literal">true</span>) {
            Alloy.Globals.menuWindow.animate({
                <span class="hljs-string">right :</span> -<span class="hljs-number">200</span>,
                <span class="hljs-string">duration :</span> <span class="hljs-number">400</span>,
                <span class="hljs-string">curve :</span> Ti.UI.ANIMATION_CURVE_EASE_IN_OUT
            });
            Alloy.Globals.tabgroup.animate({
                <span class="hljs-string">right :</span> <span class="hljs-number">0</span>,
                <span class="hljs-string">left :</span> <span class="hljs-number">0</span>,
                <span class="hljs-string">duration :</span> <span class="hljs-number">400</span>,
                <span class="hljs-string">curve :</span> Ti.UI.ANIMATION_CURVE_EASE_IN_OUT
            });
            Alloy.Globals.menuToggle = <span class="hljs-literal">false</span>;
        }
        <span class="hljs-comment">// If the menu isn't opened</span>
        <span class="hljs-keyword">else</span> {
            Alloy.Globals.menuWindow.animate({
                <span class="hljs-string">right :</span> <span class="hljs-number">0</span>,
                <span class="hljs-string">duration :</span> <span class="hljs-number">400</span>,
                <span class="hljs-string">curve :</span> Ti.UI.ANIMATION_CURVE_EASE_IN_OUT
            });
            Alloy.Globals.tabgroup.animate({
                <span class="hljs-string">right :</span> <span class="hljs-number">200</span>,
                <span class="hljs-string">left :</span> -<span class="hljs-number">200</span>,
                <span class="hljs-string">duration :</span> <span class="hljs-number">400</span>,
                <span class="hljs-string">curve :</span> Ti.UI.ANIMATION_CURVE_EASE_IN_OUT
            });
            Alloy.Globals.menuToggle = <span class="hljs-literal">true</span>;
        }
    });
</code></pre><p>Inside above two tabs I then open other windows like :-    &#x2F;&#x2F;This code is in abc.js</p>
<pre><code class="hljs">var entriesW<span class="hljs-keyword">in</span> = Alloy.createController(<span class="hljs-string">'newwin'</span>).getView();
Alloy.Globals.tabgroup.activeTab.open(entriesW<span class="hljs-keyword">in</span>);
</code></pre><p>Inside newwin I register its focus event like this :- this is in newwin.js<br>win4 is window id.</p>
<pre><code class="hljs">$.win4.addEventListener(<span class="hljs-string">'focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    Ti.API.info(<span class="hljs-string">'------------Entries Focus----------------'</span>); <span class="hljs-comment">//This does not fire once you click Menu button which applies animation(code is shown below.)</span>
});
</code></pre><p>Now I am able to see that focus log when window comes in focus till I don&#39;t click Menu button, but as I click Menu button and animation code runs this focus log is stopped firing.</p>
<p>I hope this will help.</p>
<p>Thanks.</p>
</div>
							<div class="author">
								&mdash; commented <span title="July 20th 2014, 2:59:01 pm">July 20th 2014</span>
								by <span class='authorname'>Roshan Jha</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box vote-box-answered">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>2</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>2 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article class="accepted-answer" id="answer-280882">
						<header>
							<h2><span class="icon-bg icon-check-1"></span>Accepted Answer</h2>
						</header>
				
						<section>
							<p>Hi</p>
<p>If you are just trying to monitor which window or tab is the currently selected on then this is easy and despite your own tests suggesting otherwise there are events on both the tabs and windows that fire to keep you up to date on this.  You WILL have to keep in memory the reference to which one is active.</p>
<p>The following code makes these assumptions; TabGroup = tabs, each tab = tab1, tab2, tab3 &amp; each windows = win1, win2, win3.  Finally a single button to open a child window = btn.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> inform = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    Ti.API.info(<span class="hljs-string">'id: '</span> + e.source.id + <span class="hljs-string">' type: '</span> + e.type); <span class="hljs-comment">// + ' e: ' + JSON.stringify(e));</span>
};
$.tab1.addEventListener(<span class="hljs-string">'focus'</span>, inform);
$.tab1.addEventListener(<span class="hljs-string">'blur'</span>, inform);
$.tab2.addEventListener(<span class="hljs-string">'focus'</span>, inform);
$.tab2.addEventListener(<span class="hljs-string">'blur'</span>, inform);
$.tab3.addEventListener(<span class="hljs-string">'focus'</span>, inform);
$.tab3.addEventListener(<span class="hljs-string">'blur'</span>, inform);
$.win1.addEventListener(<span class="hljs-string">'focus'</span>, inform);
$.win1.addEventListener(<span class="hljs-string">'blur'</span>, inform);
$.win2.addEventListener(<span class="hljs-string">'focus'</span>, inform);
$.win2.addEventListener(<span class="hljs-string">'blur'</span>, inform);
$.win3.addEventListener(<span class="hljs-string">'focus'</span>, inform);
$.win3.addEventListener(<span class="hljs-string">'blur'</span>, inform);

$.btn.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> win = Ti.UI.createWindow({
        id: <span class="hljs-string">'hello'</span>, <span class="hljs-comment">// non-alloy id</span>
        title: <span class="hljs-string">'New Window'</span>
    });
    win.addEventListener(<span class="hljs-string">'focus'</span>, inform);
    win.addEventListener(<span class="hljs-string">'blur'</span>, inform);
    $.tabs.getActiveTab().open(win);
});
</code></pre><p>This will then fire for every single new window focus, tab focus and blur for each.</p>
<p>You have not said if this is for Android or iOS so I tested for both and each fire the correct events every single time, both for tabbed windows and child windows.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 20th 2014, 7:06:43 am">July 20th 2014</span>
								by <span class='authorname'>Malcolm Hollingsworth</span><br>
								<a class="icon-bg icon-link" href="question/176298/window-change-event-in-tab-#answer-280882" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Did this help answer your question?</p>
</p>
										<div class="author">
											&mdash; commented <span title="July 30th 2014, 2:43:22 pm">July 30th 2014</span>
											by <span class='authorname'>Malcolm Hollingsworth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box vote-box-answered">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-280880">
				
						<section>
							<p>I&#39;m not sure I fully understand your scenario, but I believe you will need to track this on your own. </p>
<p>You could make a window creation bootstrap that tracks this for you. Rather than using Alloy.createController(&#39;mywin&#39;), make a controller called &quot;windowCreator.js&quot; with the following code:</p>
<p>windowCreator.js</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> <span class="hljs-keyword">args</span> = arguments[0];
<span class="hljs-keyword">var</span> <span class="hljs-keyword">win</span> = Alloy.createController(<span class="hljs-keyword">args</span>.<span class="hljs-keyword">window</span>, <span class="hljs-keyword">args</span>.<span class="hljs-keyword">args</span>);
exports.<span class="hljs-keyword">window</span> = <span class="hljs-keyword">win</span>;
<span class="hljs-keyword">win</span>.addEventListener('<span class="hljs-keyword">open</span>', function(){
    Alloy.Globals.currentWindow = <span class="hljs-keyword">win</span>;
});
</code></pre><p>Then, create a window using this like the following:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> newWin = Alloy.createController(<span class="hljs-string">'windowCreator'</span>, {<span class="hljs-built_in">window</span>: <span class="hljs-string">'myWindow'</span>, args: {title: <span class="hljs-string">'test'</span>});
Alloy.Globals.tabgroup.activeTab.open(newWin.getView());
setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    alert(Alloy.Globals.currentWindow);
}, <span class="hljs-number">1000</span>);
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="July 20th 2014, 3:25:34 am">July 20th 2014</span>
								by <span class='authorname'>Allen Hartwig</span><br>
								<a class="icon-bg icon-link" href="question/176298/window-change-event-in-tab-#answer-280880" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Oops, that should be:</p>
<pre><code class="hljs"><span class="hljs-tag">Alloy</span><span class="hljs-class">.Globals</span><span class="hljs-class">.tabgroup</span><span class="hljs-class">.activeTab</span><span class="hljs-class">.open</span>(<span class="hljs-tag">newWin</span><span class="hljs-class">.window</span><span class="hljs-class">.getView</span>());
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="July 20th 2014, 3:29:11 am">July 20th 2014</span>
											by <span class='authorname'>Allen Hartwig</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
