<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Added variables cannot be included in rowData? » Community Questions &amp; Answers » Appcelerator Developer Center</title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Added variables cannot be included in rowData?</h1>
		</header>
		<section>
			<p>Hello everyone,</p>
<p>I&#39;m using json to read and write rowData as you can see bellow.<br>It works when json reads and writes only &quot;rows&quot;. However when row is added some variables such as view2 here, it doesn&#39;t appear. Only &quot;row&quot; appears .</p>
<p>What is problem here?<br>Added variables cannot be written and read by json?</p>
<p>Thanks.</p>
<pre><code class="hljs">var fileName = <span class="hljs-string">'test.txt'</span>;
var rowData = [];

var file  = <span class="hljs-constant">Ti</span>.<span class="hljs-constant">Filesystem</span>.getFile(
    <span class="hljs-constant">Ti</span>.<span class="hljs-constant">Filesystem</span>.resourcesDirectory + <span class="hljs-string">'/'</span> + fileName
);
var json = file.read();

<span class="hljs-regexp">/*
/</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">/
*/</span>

var row2 = <span class="hljs-constant">Ti</span>.<span class="hljs-constant">UI</span>.createTableViewRow({
    <span class="hljs-symbol">height:</span> <span class="hljs-string">'70dp'</span>,
    <span class="hljs-symbol">color:</span> <span class="hljs-string">'red'</span>,
    <span class="hljs-symbol">title:</span> <span class="hljs-string">'green'</span>,
});
var view2 = <span class="hljs-constant">Ti</span>.<span class="hljs-constant">UI</span>.createView({
    <span class="hljs-symbol">backgroundImage:</span> <span class="hljs-string">'greenbar.png'</span>,  
    borderRadius : <span class="hljs-string">'10dp'</span>,
    height : <span class="hljs-string">'40dp'</span>, <span class="hljs-symbol">left:</span> <span class="hljs-string">'0dp'</span>
});
var rowdata = row2.add(view2);

rowData.push(rowdata);
tableView.appendRow(row2);

var json = <span class="hljs-constant">JSON</span>.stringify(rowData);
var file  = <span class="hljs-constant">Ti</span>.<span class="hljs-constant">Filesystem</span>.getFile(
    <span class="hljs-constant">Titanium</span>.<span class="hljs-constant">Filesystem</span>.resourcesDirectory + <span class="hljs-string">'/'</span> + fileName
    );
file.write(json);
</code></pre>
		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="June 10th 2012, 1:19:26 pm">June 10th 2012</span>
				by <span class='authorname'>Hidora Kaga</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>json</span></li>
					
						<li><span class='tagname'>read</span></li>
					
						<li><span class='tagname'>rowdata</span></li>
					
						<li><span class='tagname'>tableviewrow</span></li>
					
						<li><span class='tagname'>write</span></li>
					
				</ul>
			

			<section>
				<h5>0 Comments</h5>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-240555">
				
						<section>
							<p>I&#39;m not quite sure what you are looking to do with the file read and write, considering you are overwriting some variables there.  I cut that out and made a few other changes to give you an example of what I think you are looking for.</p>
<p>The main thing is that I don&#39;t believe <code>row2.add(view2);</code> is going to return a modified row object, so <code>rowdata</code> will be void.  Second, <code>JSON.stringify(rowData)</code> will show you the row-level details, but if you want to see the child views of the object, then you will want to access the children property of the row view. Here is an example:</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.createWindow();
<span class="hljs-keyword">var</span> rowData = [];
<span class="hljs-keyword">var</span> tableView = Ti.UI.createTableView();

<span class="hljs-keyword">var</span> row2 = Ti.UI.createTableViewRow({
    height: <span class="hljs-string">'70dp'</span>,
    color: <span class="hljs-string">'red'</span>,
    title: <span class="hljs-string">'green'</span>,
});
<span class="hljs-keyword">var</span> view2 = Ti.UI.createView({
    borderColor:<span class="hljs-string">'#ededed'</span>, 
    borderRadius : <span class="hljs-string">'10dp'</span>,
    height : <span class="hljs-string">'40dp'</span>, left: <span class="hljs-string">'0dp'</span>
});
row2.add(view2);

rowData.push(row2);

tableView.setData(rowData);
win.add(tableView);

<span class="hljs-comment">//show top level data in rowData array</span>
Ti.API.info(<span class="hljs-built_in">JSON</span>.stringify(rowData));

<span class="hljs-comment">//iterate through the rowData array and show child views if available</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rowData.length; i++){
    <span class="hljs-keyword">if</span>(rowData[i].children){
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>; j &lt; rowData[i].children.length; j++){
            Ti.API.info(<span class="hljs-built_in">JSON</span>.stringify(rowData[i].children[j]));
        }
    }
}

win.open();
</code></pre>
						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="June 10th 2012, 1:46:19 pm">June 10th 2012</span>
								by <span class='authorname'>Adam Paxton</span><br>
								<a class="icon-bg icon-link" href="question/138133/added-variables-cannot-be-included-in-rowdata#answer-240555" rel="permalink">permalink</a>
							</div>

							<h5>3 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Thanks for answering, the read is used for restoring the previous tableView before closing and write is used to write rowData into json when rows are created.<br>I guess that works well with these codes.</p>
<p>However, if rows are added variable such as view2, it doesn&#39;t seem to be written into json, so once I finish the application and open it again, there are not view2 data on tableview.</p>
<p>How can I show view2 data on tableview with rows?</p>
<p>thanks.</p>
<pre><code class="hljs"><span class="hljs-keyword">var</span> win = Ti.UI.currentWindow;

<span class="hljs-keyword">var</span> tableView;
<span class="hljs-keyword">var</span> fileName = <span class="hljs-string">'test.txt'</span>;
<span class="hljs-keyword">var</span> rowData = [];

<span class="hljs-keyword">var</span> file  = Ti.Filesystem.getFile(
    Ti.Filesystem.resourcesDirectory + <span class="hljs-string">'/'</span> + fileName
);
<span class="hljs-keyword">var</span> json = file.read();

<span class="hljs-keyword">if</span> ( !json || json.length &lt;= <span class="hljs-number">0</span>) {
<span class="hljs-keyword">var</span> row1 = Ti.UI.createTableViewRow({
    height: <span class="hljs-string">'60dp'</span>,
    color: <span class="hljs-string">'red'</span>,
    title: <span class="hljs-string">'row1'</span>
});
rowData.push(row1);

<span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.stringify(rowData);
<span class="hljs-keyword">var</span> file  = Ti.Filesystem.getFile(
    Titanium.Filesystem.resourcesDirectory + <span class="hljs-string">'/'</span> + fileName
    );
file.write(json);

} <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> rowData = <span class="hljs-built_in">JSON</span>.parse(json);
}



Titanium.App.addEventListener(<span class="hljs-string">'test_123'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> row2 = Ti.UI.createTableViewRow({
        height: <span class="hljs-string">'70dp'</span>,
        color: <span class="hljs-string">'red'</span>,
        title: <span class="hljs-string">'asdf'</span>,
        backgroundImage: <span class="hljs-string">'greenbar.png'</span>
    });
    <span class="hljs-keyword">var</span> view2 = Ti.UI.createView({
    backgroundImage: <span class="hljs-string">'testView.png'</span>,  
    borderRadius : <span class="hljs-string">'10dp'</span>,
    height : <span class="hljs-string">'40dp'</span>, left: <span class="hljs-string">'0dp'</span>
    });
    row2.add(view2);

    rowData.push(row2);
    tableView.setData(rowData);

    <span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.stringify(rowData);
    <span class="hljs-keyword">var</span> file  = Ti.Filesystem.getFile(
        Titanium.Filesystem.resourcesDirectory + <span class="hljs-string">'/'</span> + fileName
        );
    file.write(json);    
});

<span class="hljs-keyword">var</span> tableView = Ti.UI.createTableView({
    data: rowData
});

win.add(tableView);
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="June 10th 2012, 2:23:10 pm">June 10th 2012</span>
											by <span class='authorname'>Hidora Kaga</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>In my example I showed you how to get json output of the row&#39;s child views, see &#39;iterate through the rowData array and show child views if available&#39;.  </p>
<p>However, I think you are making this too difficult.  Rather than try to copy all of the configuration of the table by extracting the properties of the tablerows and all child views, you may want to look at managing the configuration externally from the table itself.</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 10th 2012, 2:46:19 pm">June 10th 2012</span>
											by <span class='authorname'>Adam Paxton</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Thanks for your answer!<br>Managing the configuration externally means I should create some function outside of the table codes?</p>
</p>
										<div class="author">
											&mdash; commented <span title="June 11th 2012, 10:27:45 pm">June 11th 2012</span>
											by <span class='authorname'>Hidora Kaga</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
