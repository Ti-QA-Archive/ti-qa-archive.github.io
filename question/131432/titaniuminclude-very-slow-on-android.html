<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>Titanium.include() very slow on Android » Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>Titanium.include() very slow on Android</h1>
		</header>
		<section>
			<p>Hi<br>I&#39;m writing a &quot;cross-platform&quot; app for iOS &amp; Android.</p>
<p>During development I have always noticed a huge performance reduction on Android.. on the emulator obviously, but also on my test devices (a &quot;powerful&quot; Acer A100 &amp; an &quot;entry level&quot; Orange San Francisco). The problem is particularly acute when opening new windows - when includes() are performed.</p>
<p>On the iPhone, app response times are instantaneous. But on android, simple windows can take 2 seconds to open on the A100, 6 seconds on the San Francisco. These windows are loading 30K of include files. </p>
<p>I had always assumed I would be able to tweak the android code to improve performance , but now that I&#39;ve got around to it, the include() problem is pretty core to my application and I can&#39;t see an easy fix.</p>
<p>Has anybody found a way to mitigate the performance hit of &quot;Titanium.include()&quot; on android? Some thoughts: </p>
<ul>
<li><p>I have seen posts suggesting including all code in App.js, then calling functions by firing events. It&#39;s too late for this approach for me now. </p>
</li>
<li><p>I could optimise my include files down to the bare minimum functions needed by each window. I&#39;m sure this would give some improvement but I don&#39;t want to embark on this project until I&#39;m sure it&#39;s the best solution.</p>
</li>
</ul>
<p>Any other suggestions?</p>
<p>Thanks.</p>
<p>(Building on: iOS 4.2, Android 2.1, Titanium 1.6.2)</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="January 31st 2012, 12:50:09 pm">January 31st 2012</span>
				by <span class='authorname'>Mel Bradley</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>include</span></li>
					
						<li><span class='tagname'>performance</span></li>
					
						<li><span class='tagname'>slow</span></li>
					
				</ul>
			

			<section>
				<h5>1 Comment</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>Yes you are right. Ti.include will take time to include JS file. Even I have read some article on this too that says Ti.include will slow down your performance mainly in android. I have personally not tried V8 but as Titanium guys are saying that It will boost up your application performance on android. You can try with V8 if it&#39;s possible for you.</p>
</div>
							<div class="author">
								&mdash; commented <span title="January 31st 2012, 2:02:32 pm">January 31st 2012</span>
								by <span class='authorname'>Yogin Bhungalia</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>3</span> Answers</div>
		</aside>
	</div>

	<hr>

	<h3>3 Answers</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-229031">
				
						<section>
							<p>You may be interested in looking at the following thread:<br>http:&#x2F;&#x2F;developer.appcelerator.com&#x2F;question&#x2F;126492&#x2F;mass-includes—fixed</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2012, 2:20:21 pm">January 31st 2012</span>
								by <span class='authorname'>Steven McGowan</span><br>
								<a class="icon-bg icon-link" href="../../question/131432/titaniuminclude-very-slow-on-android.html#answer-229031" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-229053">
				
						<section>
							<p>It sounds like you&#39;re using the kitchen sink model, which is more for showing examples rather than a good architecture to follow. </p>
<p>Check out <a href="https:&#x2F;&#x2F;github.com&#x2F;appcelerator-titans&#x2F;tweetanium">Tweetanium</a> for an approach that will load all the js files on app load and make your shared classes available globally in your app. This will make it so that new windows can be opened quickly without having to load all of the js files again. </p>
<p>It will take some time to convert your code but it&#39;s worth it in the long run and you will notice significant speed gains, especially on Android.</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="January 31st 2012, 11:09:46 pm">January 31st 2012</span>
								by <span class='authorname'>Justin Toth</span><br>
								<a class="icon-bg icon-link" href="../../question/131432/titaniuminclude-very-slow-on-android.html#answer-229053" rel="permalink">permalink</a>
							</div>

							<h5>2 Comments</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>Yes I have based all my code on Kitchen Sink. I was so pleased that there was such a comprehensive example to base my app on! How wrong I was… that thing should carry a health warning. Retooling to fit the tweetanium model sounds like a major undertaking. Lesson learned.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 1st 2012, 6:47:09 am">February 1st 2012</span>
											by <span class='authorname'>Mel Bradley</span>
										</div>
									</li>
								
									<li class="comment">
										<p><p>Yeah been there myself! Over time I&#39;ve been going back and updating all of my apps one by one to use Tweetanium, however I modified it to use Windows instead of Views so it&#39;s easier to use for real world situations.</p>
</p>
										<div class="author">
											&mdash; commented <span title="February 1st 2012, 12:00:53 pm">February 1st 2012</span>
											by <span class='authorname'>Justin Toth</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
				<li class="answer">
				
					<article id="answer-229083">
				
						<section>
							<p>I have implemented a partial solution that may be sufficient for this project. Can you let me know if you think it will be a problem? (or perhaps it was just the obvious thing to do in the first place).</p>
<ol>
<li><p>When the child window is opened for the first time, I have to take the include() performance hit. But instead of closing the child window when returning to the parent window, the child window is just set to visible=false.</p>
</li>
<li><p>When the window is &quot;opened&quot; again, a check is made to see if it is open. If so, just set visible=true and send it an initialise event.</p>
</li>
</ol>
<p>This approach, combined with optimising-down the include files to the bare minimum, seems to provide a reasonable user experience. Any drawbacks compared to closing the window each time?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="February 1st 2012, 7:10:05 am">February 1st 2012</span>
								by <span class='authorname'>Mel Bradley</span><br>
								<a class="icon-bg icon-link" href="../../question/131432/titaniuminclude-very-slow-on-android.html#answer-229083" rel="permalink">permalink</a>
							</div>

							<h5>0 Comments</h5>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
