<!doctype html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	
		<title>App Restarts - Still searching for help Â» Community Questions &amp; Answers </title>
	
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="../../related/favicon.png" rel="shortcut icon" type="image/png">
	<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
	<link href="//d3ilu1xuwhtfe2.cloudfront.net/e8e0ebd/css/style.css" rel="stylesheet" type="text/css">
	<link href="../../related/qa.css" rel="stylesheet" type="text/css">
	<link href="../../related/hybrid.css" rel="stylesheet" type="text/css">
	
	<link href="../../related/overrides.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class='mast'>    <div class='container'>        <div class='row'>            <div class='col-sm-12'>                <div class='masthead'><h1>Titanium Community Questions & Answer Archive</h1><h2>We felt that 6+ years of knowledge should not die so this is the Titanium Community Questions &amp; Answer Archive</h2></div>            </div>        </div>    </div></div>

<main class="container">
	<div class="row">
		<div class="col-sm-12">
			
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<article class="question-container">
	<div class="question">
		<header>
			<h1>App Restarts - Still searching for help</h1>
		</header>
		<section>
			<p>So here&#39;s the situation a number of my users (mostly with Samsung S3 phones and some Moto phones) say that my app just restarts as soon as it opens.  After trying on my phone I was unable to reproduce.  So I bit the bullet and bought an S3 - of course I can&#39;t reproduce it still.</p>
<p>Here is the trace:</p>
<pre><code class="hljs">[ <span class="hljs-number">09-17 16:35</span>:24.023   <span class="hljs-number">651:0x2</span>af I/power    ]
release_dvfs_lock : lockType : 1 


[ <span class="hljs-number">09-17 16:35</span>:24.023   <span class="hljs-number">651:0x2</span>af D/PowerManagerService ]
releaseDVFSLockLocked : all DVFS_MIN_LIMIT are released 

[ <span class="hljs-number">09-17 16:35</span>:24.023   <span class="hljs-number">651:0x2</span>af W/ActivityManager ]
mDVFSLock.release()

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.203 10286</span>:0x283d I/TiAPI    ]
dashboard open event called

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.203 10286</span>:0x283d I/TiAPI    ]
x

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.213 10286</span>:0x283d I/TiAPI    ]
show dialog

[ <span class="hljs-number">09-17 16:35</span>:24.313   <span class="hljs-number">651:0x68</span>3b V/WindowManager ]
rotationForOrientationLw(orient=1, last=0)<span class="hljs-comment">; user=0  mLidOpen=-1 mDockMode=0 mHdmiPlugged=false mAccelerometerDefault=1 sensorRotation=0</span>

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.363 102</span><span class="hljs-number">86:0x282</span>e D/TiUIView ]
(main) [<span class="hljs-number">1533,1541</span>] Nativeview is null

[ <span class="hljs-number">09-17 16:35</span>:24.363   <span class="hljs-number">342:0x207</span> W/SurfaceFlinger ]
id=1229(3) createSurface 0xef5264 (1x1),2 flag=400

[ <span class="hljs-number">09-17 16:35</span>:24.373   <span class="hljs-number">651:0x4</span>c0 D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.373  <span class="hljs-number">1101:0x44</span>d V/PhoneStatusBar ]
setLightsOn(true)

[ <span class="hljs-number">09-17 16:35</span>:24.373   <span class="hljs-number">651:0x30</span>f D/STATUSBAR-StatusBarManagerService ]
setSystemUiVisibility(0x0)

[ <span class="hljs-number">09-17 16:35</span>:24.373   <span class="hljs-number">651:0x30</span>f D/STATUSBAR-StatusBarManagerService ]
manageDisableList what=0x0 pkg=WindowManager.LayoutParams

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.383 102</span><span class="hljs-number">86:0x282</span>e D/TiUIView ]
(main) [21,1562] Nativeview is null

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.383 102</span><span class="hljs-number">86:0x282</span>e D/TiUIView ]
(main) [0,1562] Nativeview is null

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.423 102</span><span class="hljs-number">86:0x282</span>e D/TiUIView ]
(main) [41,1603] Nativeview is null

[ <span class="hljs-number">09-17 16:35</span>:24.423   <span class="hljs-number">651:0x28</span>51 I/ClipboardServiceEx ]
Send intent for dismiss clipboard dialog inside hideCurrentInputLocked() !

[ <span class="hljs-number">09-17 16:35</span>:24.423   <span class="hljs-number">651:0x43</span>40 D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.443   <span class="hljs-number">342:0x51</span>a4 D/memalloc ]
ion: Allocated buffer base:0x437fe000 size:<span class="hljs-number">3768320</span> fd:42

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.443 102</span><span class="hljs-number">86:0x282</span>e D/memalloc ]
ion: Mapped buffer base:<span class="hljs-number">0x60329000</span> size:<span class="hljs-number">3768320</span> offset:0 fd:102

[ <span class="hljs-number">09-17 16:35</span>:24.483   <span class="hljs-number">342:0x207</span> I/Adreno200-EGLSUB ]
&lt;CreateImage:893&gt;: Android Image

[ <span class="hljs-number">09-17 16:35</span>:24.483   <span class="hljs-number">342:0x207</span> I/Adreno200-EGLSUB ]
&lt;GetImageAttributes:1158&gt;: RGBX_8888

[ <span class="hljs-number">09-17 16:35</span>:24.483   <span class="hljs-number">651:0x4</span>c3 D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.483   <span class="hljs-number">651:0x4</span>c3 D/DEFERED_APP_VISIBILITY ]
tweaking closing app

[ <span class="hljs-number">09-17 16:35</span>:24.493   <span class="hljs-number">651:0x4</span>c3 D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.503   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.523   <span class="hljs-number">651:0x2</span>ad V/WindowOrientationListener ]
nearestRotation : 0   Angle: 4   tilt: 29

[ <span class="hljs-number">09-17 16:35</span>:24.533   <span class="hljs-number">342:0x207</span> W/SurfaceFlinger ]
id=1230(4) createSurface 0xee0b84 (1x1),1 flag=0


[ <span class="hljs-number">09-17 16:35</span>:24.563   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.573   <span class="hljs-number">342:0x74</span>7d D/memalloc ]
ion: Allocated buffer base:<span class="hljs-number">0x43c59000</span> size:<span class="hljs-number">1130496</span> fd:34

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.573 102</span><span class="hljs-number">86:0x282</span>e D/memalloc ]
ion: Mapped buffer base:<span class="hljs-number">0x606c100</span>0 size:<span class="hljs-number">1130496</span> offset:0 fd:105


[ <span class="hljs-number">09-17 16:35</span>:24.593   <span class="hljs-number">342:0x207</span> I/Adreno200-EGLSUB ]
&lt;CreateImage:893&gt;: Android Image

[ <span class="hljs-number">09-17 16:35</span>:24.593   <span class="hljs-number">342:0x207</span> I/Adreno200-EGLSUB ]
&lt;GetImageAttributes:1102&gt;: RGBA_8888

[ <span class="hljs-number">09-17 16:35</span>:24.593   <span class="hljs-number">651:0x30</span>e I/ActivityManager ]
Displayed shortComponentName: +1s547ms

[ <span class="hljs-number">09-17 16:35</span>:24.593   <span class="hljs-number">651:0x81</span>4 D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.593   <span class="hljs-number">651:0x4</span>cb D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.593   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.613   <span class="hljs-number">342:0x4</span>c19 D/memalloc ]
ion: Allocated buffer base:<span class="hljs-number">0x44455000</span> size:<span class="hljs-number">3768320</span> fd:50

[ <span class="hljs-number">09-17 16:35</span>:24.613   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.613 102</span><span class="hljs-number">86:0x282</span>e D/memalloc ]
ion: Mapped buffer base:<span class="hljs-number">0x607d50</span>00 size:<span class="hljs-number">3768320</span> offset:0 fd:108

[ <span class="hljs-number">09-17 16:35</span>:24.623   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.643   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.663   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.663   <span class="hljs-number">651:0x39</span>46 D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.673 102</span><span class="hljs-number">86:0x282</span>e D/memalloc ]
ion: Unmapping buffer  base:0x5f2bf000 size:<span class="hljs-number">3768320</span>

[ <span class="hljs-number">09-17 16:35</span>:24.673   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.683   <span class="hljs-number">342:0x4</span>c19 D/memalloc ]
ion: Allocated buffer base:0x452ae000 size:<span class="hljs-number">3768320</span> fd:59

[ <span class="hljs-number">09-17 16:35</span>:24.683   <span class="hljs-number">342:0x207</span> I/Adreno200-EGLSUB ]
&lt;CreateImage:893&gt;: Android Image

[ <span class="hljs-number">09-17 16:35</span>:24.683   <span class="hljs-number">342:0x207</span> I/Adreno200-EGLSUB ]
&lt;GetImageAttributes:1158&gt;: RGBX_8888

[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.683 102</span><span class="hljs-number">86:0x282</span>e D/memalloc ]
ion: Mapped buffer base:0x5f2bf000 size:<span class="hljs-number">3768320</span> offset:0 fd:65

[ <span class="hljs-number">09-17 16:35</span>:24.693   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.714   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.714   <span class="hljs-number">342:0x158</span>1 W/SurfaceFlinger ]
id=1227 Removed idx=1 Map Size=5

[ <span class="hljs-number">09-17 16:35</span>:24.714   <span class="hljs-number">342:0x156</span> W/SurfaceFlinger ]
id=1227 Removed idx=-2 Map Size=5

[ <span class="hljs-number">09-17 16:35</span>:24.724   <span class="hljs-number">651:0x30</span>e D/KeyguardViewMediator ]
setHidden false

[ <span class="hljs-number">09-17 16:35</span>:24.744   <span class="hljs-number">342:0x207</span> D/memalloc ]
ion: Freeing buffer base:0x440bd000 size:<span class="hljs-number">3768320</span> fd:36

[ <span class="hljs-number">09-17 16:35</span>:24.744   <span class="hljs-number">342:0x207</span> D/memalloc ]
ion: Unmapping buffer  base:0x440bd000 size:<span class="hljs-number">3768320</span>

[ <span class="hljs-number">09-17 16:35</span>:24.744   <span class="hljs-number">342:0x207</span> I/Adreno200-EGLSUB ]
&lt;CreateImage:893&gt;: Android Image

[ <span class="hljs-number">09-17 16:35</span>:24.744   <span class="hljs-number">342:0x207</span> I/Adreno200-EGLSUB ]
&lt;GetImageAttributes:1158&gt;: RGBX_8888


[ <span class="hljs-number">09-17 16:35</span>:<span class="hljs-number">24.844 102</span><span class="hljs-number">86:0x282</span>e W/TiApplication ]
(main) [<span class="hljs-number">422,2025</span>] Scheduling application restart
</code></pre><p>You can see near the top the last TiAPI log message &quot;show dialog&quot; this happens at the very start of my app.  Then a bunch of system stuff and the TiApplication &quot;scheduling application restart&quot;.  I traced it on my new S3 and everything looks the same except I dont get the scheduling application restart.  I&#39;m totally lost on what else I can do.  Ideas? </p>
<p>Note: this is happening on the latest RC as well as all the 2.x releases.</p>

		</section>
		<footer>
			<div class="author">
				&mdash; asked <span title="September 21st 2012, 12:10:43 pm">September 21st 2012</span>
				by <span class='authorname'>Frank A</span>
			</div>

			
				<ul class="tags">
					
						<li><span class='tagname'>android</span></li>
					
						<li><span class='tagname'>crash</span></li>
					
				</ul>
			

			<section>
				<h5>2 Comments</h5>
				
					<ul class="comments">
					
						<li class="comment">
							<div><p>You need to post code samples for help with these types of issues</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 21st 2012, 12:12:57 pm">September 21st 2012</span>
								by <span class='authorname'>Matt Apperson</span>
							</div>
						</li>
					
						<li class="comment">
							<div><p>I posted some relevant code below.  I&#39;m happy to post&#x2F;send more.</p>
</div>
							<div class="author">
								&mdash; commented <span title="September 21st 2012, 12:24:03 pm">September 21st 2012</span>
								by <span class='authorname'>Frank A</span>
							</div>
						</li>
					
					</ul>
				
			</section>
		</footer>
		<aside class="vote-box">
			<div class="score"><span>0</span> Votes</div>
			<div class="answers"><span>1</span> Answer</div>
		</aside>
	</div>

	<hr>

	<h3>1 Answer</h3>

	
		<ul class="answers">
			
				<li class="answer">
				
					<article id="answer-247739">
				
						<section>
							<p>When does the restart occur? on daily usage or only when the user tries to open it from the playstore (after download)?</p>

						</section>
						<footer>
							<div class="author">
								&mdash; answered <span title="September 21st 2012, 12:16:57 pm">September 21st 2012</span>
								by <span class='authorname'>Dan Tamas</span><br>
								<a class="icon-bg icon-link" href="question/142518/app-restarts---still-searching-for-help.html#answer-247739" rel="permalink">permalink</a>
							</div>

							<h5>1 Comment</h5>
							
								<ul class="comments">
								
									<li class="comment">
										<p><p>On every start of the app (for the users who have the issue).  I&#39;ve had them try starting the app from the home screen,  app store, application list.  What&#39;s so frustrating is that I&#39;ve never personally seen it happen, just have the logs to work off of.  What they say is that the app starts and they see the dialog flash and then it just restarts.  The app has a dialog that shows up after the main window opens.  </p>
<p>Here&#39;s the relevant code:</p>
<pre><code class="hljs">
    theWin.addEventListener(<span class="hljs-string">'open'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
        Ti.API.info(<span class="hljs-string">'dashboard open event called'</span>);
        <span class="hljs-keyword">if</span> (settings.getShownRegMsg()!=<span class="hljs-literal">true</span> &amp;&amp; !settings.isPremium()){
            util.premiumMsg(<span class="hljs-literal">null</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
                <span class="hljs-comment">//NOTE this never shows up when things crash</span>
                Ti.API.info(<span class="hljs-string">"Closing premium msg"</span>);
                settings.setShownRegMsg(<span class="hljs-literal">true</span>);
                <span class="hljs-keyword">if</span> (!settings.isPremium()){
                    <span class="hljs-keyword">var</span> adUtil = require(<span class="hljs-string">'/ui/adutil'</span>);
                    <span class="hljs-keyword">var</span> lat = <span class="hljs-number">40.714623</span>;
                    <span class="hljs-keyword">var</span> lng = -<span class="hljs-number">74.006605</span>;
                    <span class="hljs-keyword">if</span> (settings.hasLastSearch()==<span class="hljs-literal">true</span>){
                        lat = settings.getLastLat();
                        lng = settings.getLastLng();
                    }
                    theWin.addEventListener(<span class="hljs-string">'tvf:adgood'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span></span>{
                        theWin.theAd = e.ad;
                        Ti.API.info(<span class="hljs-string">'Setting this.theAd '</span>+JSON.stringify(theWin.theAd));
                    });
                    Ti.API.info(<span class="hljs-string">'addad2 called from openDashboard'</span>);
                    adUtil.addAd2(theWin,lat,lng,<span class="hljs-string">'HOME'</span>);

                }
            });
    }
    });

<span class="hljs-comment">//utils.js</span>
exports.premiumMsg=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(msg,callback)</span></span>{
     <span class="hljs-keyword">if</span> (!msg)
              msg = <span class="hljs-string">'Would you like to support TVFoodMaps, remove ads and get premium features?'</span>;

      <span class="hljs-keyword">var</span> dlg = Titanium.UI.createAlertDialog({
        message:msg, 
        buttonNames: [<span class="hljs-string">'Yes, Upgrade for $2.99'</span>,<span class="hljs-string">'Learn More'</span>,<span class="hljs-string">'No Thanks'</span>]
      });
      dlg.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ev)</span> </span>{
          Ti.API.info(<span class="hljs-string">'premium msg dialog clicked'</span>);
        <span class="hljs-keyword">if</span> (ev.index == <span class="hljs-number">0</span>) { <span class="hljs-comment">// clicked "Yes"</span>
            Ti.App.fireEvent(<span class="hljs-string">"tvf:buypremium"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ev.index == <span class="hljs-number">1</span>) { <span class="hljs-comment">// clicked "learn more"</span>
          Ti.Platform.openURL(<span class="hljs-string">'http://www.tvfoodmaps.com/T_PremiumMobile.jsp'</span>);
          setTimeout (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{dlg.show()},<span class="hljs-number">500</span>);
       } <span class="hljs-keyword">else</span> {
       }
       <span class="hljs-keyword">if</span>(<span class="hljs-keyword">callback</span>){
            Ti.API.info(<span class="hljs-string">'Calling premiumMsg callback'</span>);
            <span class="hljs-keyword">callback</span>();
       }
      });
      dlg.show();
      Ti.API.info(<span class="hljs-string">"show dialog"</span>);
}
</code></pre></p>
										<div class="author">
											&mdash; commented <span title="September 21st 2012, 12:23:31 pm">September 21st 2012</span>
											by <span class='authorname'>Frank A</span>
										</div>
									</li>
								
								</ul>
							
						</footer>
						<aside class="vote-box">
							<div class="score"><span>0</span> Votes</div>
						</aside>
					</article>
				</li>
			
		</ul>
	
</article>

		</div>
		<div class="col-sm-3"></div>
	</div>
	<div class="row"><div class="signoff">The ownership of individual contributions to this community generated content is retained by the authors of their contributions.<br>All trademarks remain the property of the respective owner.</div></div>
</main>


</body>
</html>
